b4w.register("flight_main",function(J,b){function y(){q.resize_to_container()}function K(){var c=z.get_std_assets_path();A.set_debug_resources_root("/flight_over_island/");A.load(c+"flight_over_island/flight_over_island.json",L,M,!1);y()}function L(){g=B.get_active_camera();var c=B.get_object_by_dupli_name,d=a.set_behavior,f=a.apply;k=c("Cessna Rig","Cessna Armature");v=c("Cessna Rig","Engine Speaker");l=c("golf_player_fmale_rig","rig");f(g,"CameraAction.001");d(g,a.AB_CYCLIC);f(k,"fly_cessna");d(k,
a.AB_FINISH_STOP);f(l,"fly_girl");d(l,a.AB_FINISH_STOP);C(k,v,l);w();x.set_render_callback(N);m=!0}function C(c,d,f){a.set_first_frame(c);a.play(c,O);a.stop(f);a.set_first_frame(f);a.play(f);r.speaker_reset_speed(d,40)}function w(){switch(e){case D:e=n;a.stop(g);break;case n:e=t;a.stop(g);break;case t:e=p;a.play(g);break;case p:e=n,a.stop(g)}E();switch(e){case n:r.listener_reset_speed(40);break;case t:r.listener_reset_speed(0);break;case p:r.listener_reset_speed(0)}}function F(c,d){var a=document.getElementById(c),
b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);b.addEventListener("mouseup",function(a){var b=document.getElementById(c),e=document.querySelector("#glow_down"),f=document.createElement("div");f.id="glow";f.style.top=a.target.offsetTop-25+"px";e&&(h.removeChild(e),h.appendChild(f));b.className=b.className.replace("button_down","");d()},!1);b.addEventListener("mouseover",function(c){if(!("ontouchstart"in window||0<window.navigator.a)){c=c.target;var a=document.querySelector("#glow");a||(a=document.createElement("div"),
a.id="glow",a.style.top=c.offsetTop,h.appendChild(a));a.style.top=c.offsetTop-20+"px"}},!1);b.addEventListener("mouseout",function(){var a=document.getElementById(c);a.className=a.className.replace("button_down","");G()},!1);b.addEventListener("mousedown",function(a){if(!("ontouchstart"in window||0<window.navigator.a)){G();var b=document.getElementById(c),d=document.createElement("div");d.id="glow_down";d.style.marginTop=a.target.offsetTop-28+"px";h.appendChild(d);b.className+=" button_down"}},!1)}
function G(){var a=document.querySelector("#glow_down"),b=document.querySelector("#glow");b&&h.removeChild(b);a&&h.removeChild(a)}function H(a){document.getElementById("pause_resume").className=a+" controls_button"}function M(a){I.update_preloader(a)}function O(){e!=p&&w();C(k,v,l)}function N(){E()}function E(){if(e!=p){var b=P;a.get_bone_translation(k,"Root",b);if(e==t)var d=Q;else e==n&&(d=R,S.add(b,T,d));U.set_look_at(g,d,b,V)}}var a=b("animation"),q=b("app"),U=b("camera"),z=b("config"),A=b("data"),
x=b("main"),I=b("preloader"),B=b("scenes"),r=b("sfx"),u=b("version"),S=b("vec3"),u="DEBUG"===u.type(),T=new Float32Array([13,4.5,13]),Q=new Float32Array([-20,2,120]),V=new Float32Array([0,1,0]),W={canvas_container_id:"main_canvas_container",callback:function(a,b){b?(h=document.querySelector("#hover_panel"),q.enable_controls(),I.create_advanced_preloader({img_width:165,preloader_width:460,preloader_bar_id:"preloader_bar",fill_band_id:"fill_band",preloader_caption_id:"preloader_caption",preloader_container_id:"preloader_container",
background_container_id:"background_image_container",canvas_container_id:"main_canvas_container"}),document.querySelector("#preloader_frame").style.visibility="visible",F("pause_resume",function(){m?(m=!1,x.pause(),H("resume")):(m=!0,x.resume(),H("pause"))}),F("camera_view",function(){m&&w()}),window.addEventListener("resize",y,!1),document.addEventListener("keydown",function(a){13==a.keyCode&&q.request_fullscreen(document.body)},!1),K()):console.log("b4w init failure")},gl_debug:!1,show_fps:!1,alpha:!1,
physics_enabled:!1,console_verbose:u,assets_dds_available:!u,assets_min50_available:!1,quality:z.P_HIGH},D=10,n=20,t=30,p=40,P=new Float32Array(3),R=new Float32Array(3),k=null,v=null,l=null,g=null,m=!1,e=D,h;J.init=function(){q.init(W)}});b4w.require("flight_main").init();
