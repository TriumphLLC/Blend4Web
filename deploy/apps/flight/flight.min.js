b4w.register("flight_main",function(K,c){function x(){r.resize_to_container()}function L(){var d=y.get_std_assets_path();z.set_debug_resources_root("/flight_over_island/");z.load(d+"flight_over_island/flight_over_island.json",M,N,!1);x()}function M(){e=A.get_active_camera();var d=A.get_object_by_dupli_name,t=b.set_behavior,c=b.apply;f=d("Cessna Rig","Cessna Armature");u=d("Cessna Rig","Engine Speaker");h=d("golf_player_fmale_rig","rig");c(e,"CameraAction.001");t(e,b.AB_CYCLIC);c(f,"fly_cessna");t(f,
b.AB_FINISH_STOP);c(h,"fly_girl");t(h,b.AB_FINISH_STOP);B(f,u,h);v();w.set_render_callback(O);k=!0}function B(d,c,a){b.set_first_frame(d);b.play(d,P);b.stop(a);b.set_first_frame(a);b.play(a);n.speaker_reset_speed(c,40)}function v(){switch(a){case C:a=l;b.stop(e);break;case l:a=p;b.stop(e);break;case p:a=m;b.play(e);break;case m:a=l,b.stop(e)}D();switch(a){case l:n.listener_reset_speed(40);break;case p:n.listener_reset_speed(0);break;case m:n.listener_reset_speed(0)}}function E(d,c){var b=document.getElementById(d),
a=b.cloneNode(!0);b.parentNode.replaceChild(a,b);a.addEventListener("mouseup",function(a){var b=document.getElementById(d),e=document.querySelector("#glow_down"),f=document.createElement("div");f.id="glow";f.style.top=a.target.offsetTop-25+"px";e&&(g.removeChild(e),g.appendChild(f));b.className=b.className.replace("button_down","");c()},!1);a.addEventListener("mouseover",function(d){if(!("ontouchstart"in window||0<window.navigator.a)){d=d.target;var a=document.querySelector("#glow");a||(a=document.createElement("div"),
a.id="glow",a.style.top=d.offsetTop,g.appendChild(a));a.style.top=d.offsetTop-20+"px"}},!1);a.addEventListener("mouseout",function(){var a=document.getElementById(d);a.className=a.className.replace("button_down","");F()},!1);a.addEventListener("mousedown",function(a){if(!("ontouchstart"in window||0<window.navigator.a)){F();var c=document.getElementById(d),b=document.createElement("div");b.id="glow_down";b.style.marginTop=a.target.offsetTop-28+"px";g.appendChild(b);c.className+=" button_down"}},!1)}
function F(){var a=document.querySelector("#glow_down"),b=document.querySelector("#glow");b&&g.removeChild(b);a&&g.removeChild(a)}function G(a){document.getElementById("pause_resume").className=a+" controls_button"}function N(a){H.update_preloader(a)}function P(){a!=m&&v();B(f,u,h)}function O(){D()}function D(){if(a!=m){Q.get_bone_tsr(f,"Root",I);var b=J.get_trans_view(I);if(a==p)var c=R;else a==l&&(c=S,T.add(b,U,c));V.eye_set_look_at(e,c,b)}}var b=c("animation"),Q=c("armature"),r=c("app"),V=c("camera"),
y=c("config"),z=c("data"),w=c("main"),H=c("preloader"),A=c("scenes"),n=c("sfx"),J=c("tsr"),q=c("version"),T=c("vec3"),q="DEBUG"===q.type(),U=new Float32Array([13,4.5,13]),R=new Float32Array([-20,2,120]),W={canvas_container_id:"main_canvas_container",callback:function(a,b){b?(g=document.querySelector("#hover_panel"),H.create_advanced_preloader({img_width:165,preloader_width:460,preloader_bar_id:"preloader_bar",fill_band_id:"fill_band",preloader_caption_id:"preloader_caption",preloader_container_id:"preloader_container",
background_container_id:"background_image_container",canvas_container_id:"main_canvas_container"}),document.querySelector("#preloader_frame").style.visibility="visible",E("pause_resume",function(){k?(k=!1,w.pause(),G("resume")):(k=!0,w.resume(),G("pause"))}),E("camera_view",function(){k&&v()}),window.addEventListener("resize",x,!1),document.addEventListener("keydown",function(a){13==a.keyCode&&r.request_fullscreen(document.body)},!1),L()):console.log("b4w init failure")},gl_debug:!1,show_fps:!1,alpha:!1,
physics_enabled:!1,console_verbose:q,assets_dds_available:!q,assets_min50_available:!1,quality:y.P_HIGH},C=10,l=20,p=30,m=40,S=new Float32Array(3),I=J.create(),f=null,u=null,h=null,e=null,k=!1,a=C,g;K.init=function(){r.init(W)}});b4w.require("flight_main").init();
