/**
 * Blend4Web CE 17_10
 * Copyright (C) 2014-2017 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
var b4w="object"===typeof b4w?b4w:function(a){var u={};a.module=u;var e={};a.cleanup=function(a,b){var c=u[a];c&&(c.Nn=null);e[b||"__b4w_default"]=null};a.register=function(a,b){u[a]||(u[a]=b)};a.require=function(a,b){if(!u[a])throw Error('Module "'+a+'" not found');b=b||"__b4w_default";e[b]||(e[b]=function(a){return function(b){var c=u[b];if(!c)throw Error('Module "'+b+'" not found');c.Nn||(c.Nn={});c.Nn[a]||(c.Nn[a]={},c(c.Nn[a],e[a]));return c.Nn[a]}}(b));return e[b](a)};a.module_check=function(a){return u[a]?
!0:!1};a.get_namespace=function(a){for(var b in e)if(e[b]==a)return b;return""};a.worker_listeners=[];a.worker_namespaces=[];return a}({});b4w.module.__version=function(a){var u=new Date(2017,9,31,17,54,16),e=[17,10];a.version=function(){return e};a.version_str=function(){for(var a="",b=0;b<e.length;b++)a=1==b?a+(10>e[b]?"0"+e[b]:e[b]):a+e[b],b!=e.length-1&&(a+=".");return a};a.type=function(){return"RELEASE"};a.date=function(){return u};a.date_str=function(){var a=u.getDate(),a=10>a?"0"+String(a):String(a),b=u.getMonth()+1,b=10>b?"0"+String(b):String(b),e=String(u.getFullYear()),g=u.getHours(),g=10>g?"0"+String(g):String(g),p=u.getMinutes(),
p=10>p?"0"+String(p):String(p),k=u.getSeconds(),k=10>k?"0"+String(k):String(k);return a+"."+b+"."+e+" "+g+":"+p+":"+k};a.get_build_version=function(){return"_b4w_ver_17_10_"}};b4w.module.__config=function(a,u){function e(){return b4w.module_check(a.af.gu)}function c(){for(var c=a.af,e=null,n=document.getElementsByTagName("script"),x=0;x<n.length;x++){for(var v=n[x].src,h=0;h<c.ZG.length;h++)if(0<=v.indexOf(c.ZG[h])){e=v;break}if(null!==e)break}e||(b.warn("Couldn't determine path to ancillary resources, fallback to the current page directory"),e=document.location.href);c=e.indexOf("?");0<=c&&(e=e.substring(0,c));return e.substring(0,e.lastIndexOf("/"))}var b=u("__print"),
n=u("__util");a.P_LOW=1;a.P_HIGH=2;a.P_ULTRA=3;a.P_CUSTOM=4;a.P_AUTO=5;a.context={alpha:!0,antialias:!1,premultipliedAlpha:!0};a.jF=n.W(a.context);a.L={alpha_sort:!0,alpha_sort_threshold:.1,Vm:[6,3],max_fps:1E4,console_verbose:!1,do_not_load_resources:!1,use_min50:!1,enable_texture_cache:!0,SF:1,HQ:5,background_color:[0,0,0,0],canvas_resolution_factor:1,ek:3,allow_cors:!1,RF:!1,cz:!0,anisotropic_filtering:!0,Yx:!1,uJ:!1,eW:!1,dW:!1,fW:!1,HE:!1,TN:!1,show_hud_debug_info:!1,Ju:!0,shadows:!0,stereo:"NONE",
reflections:!0,refractions:!0,ssao:!0,dof:!0,god_rays:!0,bloom:!0,motion_blur:!0,compositing:!0,antialiasing:!0,smaa:!1,debug_view:!1,qK:!1,po:!0,Sw:!0,Nc:!0,water_dynamic:!0,shore_smoothing:!0,lp:!0,UJ:!0,precision:"highp",quality:a.P_HIGH,Lt:!0,lod_leap_smooth_threshold:3,assets_gzip_available:!1,AT:!1,jC:!1,Sz:!1,hK:!1,is_mobile_device:!1,HA:!1,yz:!1,C_:!1,Es:!1,allow_hidpi:!1,VI:!1,iB:!1,KG:!1,enable_selectable:!0,enable_outlining:!0,lod_smooth_transitions:!0,glow_materials:!0,Rv:!1,OF:!1,XA:[0,
0],cI:!0,ux:!1,url_params:null,gb:!0,ec:4,Tq:!1,rI:!1,JU:!1,zs:!1,mI:!1,RE:!1,FG:!1,EG:!1,media_auto_activation:!0,wH:4,rw:!1,gl_debug:!1,KE:!1,$D:!1,$y:!1,lm:"dds",shadow_blur_samples:"",reflection_quality:"",srgb_type:"SRGB_SIMPLE",Vv:!1,As:!1,debug_loading:!1,tH:!1,sH:!1,QE:!1,hp:!0};a.AF=n.W(a.L);a.$l={jv:-1,TF:!1,zm:1};a.controls={uT:1/120};a.ae={path:"",OT:"B4W_ASSETS_PATH=__JS__/../../assets/",eU:"B4W_PROJ_ASSETS_PATH=__JS__/../../../projects/__NAME__/assets/",oT:15,prevent_caching:!0,hB:!1,
Pz:!1,$w:!1};a.eE=n.W(a.ae);a.af={shaders_path:"",BV:"../shaders/",TI:"include/",A_:"postprocessing/",gu:"built_in_data",ZG:"b4w.min.js b4w.full.min.js b4w.simple.min.js b4w.whitespace.min.js src/b4w.js B4W_MAIN_MODULE".split(" "),smaa_search_texture_path:"smaa_search_texture.png",smaa_area_texture_path:"smaa_area_texture.png"};a.CG={webvr:{distortion_coefs:[.22,.28],chromatic_aberration_coefs:[-.015,.02,.025,.02]},nonwebvr:{FF:.8,Hh:.064,ci:.035,Bs:.039,distortion_coefs:[.34,.55],chromatic_aberration_coefs:[0,
0,0,0],Pl:.11,yi:.062,di:.004}};a.N={enabled:!0,max_fps:60,dt:"",ky:"",ly:"B4W_URANIUM_PATH=./",dE:"uranium.js",pK:"uranium_wasm.js",zH:"uranium.js.mem",oK:"uranium_wasm.wasm",TJ:"../deploy/apps/common/",pz:!1,ping:!1,xn:!0,jt:!0};a.VH=n.W(a.N);a.kp={Fr:1024,Cu:256,sF:32,QP:128,PP:256,XH:.25,WT:.5,VT:1};a.vI=n.W(a.kp);a.ka={aD:!0,yw:!1,iE:!1,UE:!1,DF:!1};a.RI=n.W(a.ka);a.Xc={outlining_overview_mode:!1,Nh:[1,.4,.05],il:.2,jl:3.8,kl:1};a.rm={enabled:!1,Qs:39,bW:0,EV:"COLOR"};a.yF=n.W(a.rm);a.zh={nT:8,
aB:64,eB:8,uw:8,fB:15,yH:0,vw:128,rg:1024,bB:4096,dc:4096,gB:[4096,4096],fo:24};a.iF=n.W(a.zh);a.apply_quality=function(){var b=a.L,c=a.N,e=a.kp;switch(b.quality){case a.P_ULTRA:b.shadows=!0;b.shore_smoothing=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.po=!0;b.Sw=!0;b.Nc=!0;e.Fr=2048;e.Cu=512;b.ek=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.lp=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!0;b.enable_outlining=
!0;b.glow_materials=!0;b.ec=16;b.srgb_type="SRGB_PROPER";c.max_fps=120;b.lod_smooth_transitions=!0;break;case a.P_HIGH:b.shadows=!0;b.shore_smoothing=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.po=!0;b.Sw=!0;b.Nc=!0;e.Fr=1024;e.Cu=256;b.ek=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.lp=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!1;b.enable_outlining=!0;b.glow_materials=!0;b.srgb_type="SRGB_SIMPLE";b.ec=
4;c.max_fps=60;b.lod_smooth_transitions=!0;break;case a.P_LOW:b.shadows=!1;b.shore_smoothing=!1;b.ssao=!1;b.dof=!1;b.god_rays=!1;b.bloom=!1;b.reflections=!1;b.refractions=!1;b.po=!1;b.Sw=!1;b.Nc=!1;e.Fr=512;e.Cu=256;b.ek=2;b.anisotropic_filtering=!1;b.use_min50=!0;b.water_dynamic=!1;b.lp=!1;b.antialiasing=!1;b.smaa=!1;b.compositing=!1;b.motion_blur=!1;b.allow_hidpi=!1;b.enable_outlining=!1;b.glow_materials=!1;b.srgb_type="SRGB_SIMPLE";b.ec=1;c.max_fps=60;b.lod_smooth_transitions=!1;break;case a.P_AUTO:n.K("Direct AUTO quality profile setting is forbidden")}};
a.set=function(c,e){switch(c){case "allow_cors":a.L.allow_cors=e;break;case "allow_hidpi":a.L.allow_hidpi=e;break;case "alpha":a.context.alpha=e;break;case "alpha_sort":a.L.alpha_sort=e;break;case "alpha_sort_threshold":a.L.alpha_sort_threshold=e;break;case "anaglyph_use":b.Zu("anaglyph_use","stereo");a.L.stereo=e?"ANAGLYPH":a.L.stereo;break;case "animation_framerate":a.$l.jv=e;break;case "anisotropic_filtering":a.L.anisotropic_filtering=e;break;case "antialiasing":a.L.antialiasing=e;break;case "assets_dir":case "assets_path":a.ae.path=
e;break;case "assets_dds_available":a.ae.Pz=e;break;case "assets_pvr_available":a.ae.$w=e;break;case "assets_min50_available":a.ae.hB=e;break;case "audio":a.ka.aD=e;break;case "background_color":a.L.background_color=e;break;case "bloom":a.L.bloom=e;break;case "built_in_module_name":a.af.gu=e;break;case "canvas_resolution_factor":a.L.canvas_resolution_factor=e;break;case "console_verbose":a.L.console_verbose=e;break;case "compositing":a.L.compositing=e;break;case "dof":a.L.dof=e;break;case "do_not_load_resources":a.L.do_not_load_resources=
e;break;case "god_rays":a.L.god_rays=e;break;case "stereo":a.L.stereo=e;break;case "lod_leap_smooth_threshold":a.L.lod_leap_smooth_threshold=e;break;case "lod_smooth_transitions":a.L.lod_smooth_transitions=e;break;case "max_fps":a.L.max_fps=e;break;case "max_fps_physics":a.N.max_fps=e;break;case "media_auto_activation":a.L.media_auto_activation=e;break;case "motion_blur":a.L.motion_blur=e;break;case "physics_enabled":a.N.enabled=e;break;case "physics_uranium_path":a.N.jt&&window.WebAssembly?(a.N.dt=
e+a.N.pK,a.N.ky=e+a.N.oK):(a.N.dt=e+a.N.dE,a.N.ky=e+a.N.zH);a.N.TJ=e;break;case "physics_use_wasm":a.N.jt=e;break;case "physics_calc_fps":a.N.pz=e;break;case "physics_use_workers":a.N.xn=e;break;case "precision":a.L.precision=e;break;case "prevent_caching":a.ae.prevent_caching=e;break;case "quality":a.L.quality=e;break;case "reflections":a.L.reflections=e;break;case "refractions":a.L.refractions=e;break;case "sfx_mix_mode":a.ka.yw=e;break;case "shaders_dir":case "shaders_path":a.af.shaders_path=e;
break;case "shadows":a.L.shadows=e;break;case "show_hud_debug_info":a.L.show_hud_debug_info=e;break;case "smaa":b.Zu("smaa");a.L.smaa=e;break;case "smaa_search_texture_path":b.Zu("smaa_search_texture_path");a.af.smaa_search_texture_path=e;break;case "smaa_area_texture_path":b.Zu("smaa_area_texture_path");a.af.smaa_area_texture_path=e;break;case "ssao":a.L.ssao=e;break;case "debug_view":a.L.debug_view=e;break;case "enable_selectable":a.L.enable_selectable=e;break;case "enable_outlining":a.L.enable_outlining=
e;break;case "outlining_overview_mode":a.Xc.outlining_overview_mode=e;break;case "glow_materials":a.L.glow_materials=e;break;case "url_params":a.L.url_params=e;break;case "use_min50":a.L.use_min50=e;break;case "enable_texture_cache":a.L.enable_texture_cache=e;break;case "gl_debug":a.L.gl_debug=e;break;case "srgb_type":a.L.srgb_type=e;break;case "shadow_blur_samples":a.L.shadow_blur_samples=e;break;case "reflection_quality":a.L.reflection_quality=e;break;case "assets_gzip_available":a.L.assets_gzip_available=
e;break;case "debug_loading":a.L.debug_loading=e;break;case "msaa_samples":a.L.ec=e;break;default:b.error("Unknown config property: "+c)}};a.get=function(c){switch(c){case "allow_cors":return a.L.allow_cors;case "allow_hidpi":return a.L.allow_hidpi;case "alpha":return a.context.alpha;case "alpha_sort":return a.L.alpha_sort;case "alpha_sort_threshold":return a.L.alpha_sort_threshold;case "anaglyph_use":return"ANAGLYPH"==a.L.stereo;case "animation_framerate":return a.$l.jv;case "anisotropic_filtering":return a.L.anisotropic_filtering;
case "antialiasing":return a.L.antialiasing;case "assets_dir":case "assets_path":return a.ae.path;case "assets_dds_available":return a.ae.Pz;case "assets_pvr_available":return a.ae.$w;case "assets_min50_available":return a.ae.hB;case "audio":return a.ka.aD;case "background_color":return a.L.background_color;case "bloom":return a.L.bloom;case "built_in_module_name":return a.af.gu;case "canvas_resolution_factor":return a.L.canvas_resolution_factor;case "console_verbose":return a.L.console_verbose;case "compositing":return a.L.compositing;
case "dof":return a.L.dof;case "do_not_load_resources":return a.L.do_not_load_resources;case "is_mobile_device":return a.L.is_mobile_device;case "god_rays":return a.L.god_rays;case "stereo":return a.L.stereo;case "lod_leap_smooth_threshold":return a.L.lod_leap_smooth_threshold;case "lod_smooth_transitions":return a.L.lod_smooth_transitions;case "max_fps":return a.L.max_fps;case "max_fps_physics":return a.N.max_fps;case "media_auto_activation":return a.L.media_auto_activation;case "motion_blur":return a.L.motion_blur;
case "physics_enabled":return a.N.enabled;case "physics_uranium_path":return a.N.TJ;case "physics_uranium_bin":return a.N.ky;case "physics_use_wasm":return a.N.jt;case "physics_calc_fps":return a.N.pz;case "physics_use_workers":return a.N.xn;case "precision":return a.L.precision;case "prevent_caching":return a.ae.prevent_caching;case "quality":return a.L.quality;case "reflections":return a.L.reflections;case "refractions":return a.L.refractions;case "sfx_mix_mode":return a.ka.yw;case "shaders_dir":case "shaders_path":return a.af.shaders_path;
case "shadows":return a.L.shadows;case "show_hud_debug_info":return a.L.show_hud_debug_info;case "smaa":return a.L.smaa;case "smaa_search_texture_path":return a.af.smaa_search_texture_path;case "smaa_area_texture_path":return a.af.smaa_area_texture_path;case "ssao":return a.L.ssao;case "debug_view":return a.L.debug_view;case "enable_selectable":return a.L.enable_selectable;case "enable_outlining":return a.L.enable_outlining;case "outlining_overview_mode":return a.Xc.outlining_overview_mode;case "glow_materials":return a.L.glow_materials;
case "url_params":return a.L.url_params;case "use_min50":return a.L.use_min50;case "enable_texture_cache":return a.L.enable_texture_cache;case "gl_debug":return a.L.gl_debug;case "srgb_type":return a.L.srgb_type;case "shadow_blur_samples":return a.L.shadow_blur_samples;case "reflection_quality":return a.L.reflection_quality;case "assets_gzip_available":return a.L.assets_gzip_available;case "debug_loading":return a.L.debug_loading;case "msaa_samples":return a.L.ec;default:b.error("Unknown config property: "+
c)}};a.reset=function(){for(var b in a.jF)a.context[b]=a.jF[b];for(b in a.AF)a.L[b]=a.AF[b];for(b in a.eE)a.ae[b]=a.eE[b];for(b in a.VH)a.N[b]=a.VH[b];for(b in a.vI)a.kp[b]=a.vI[b];for(b in a.RI)a.ka[b]=a.RI[b];for(b in a.yF)a.rm[b]=a.yF[b]};a.reset_limits=function(){var b=a.zh.fo,c;for(c in a.iF)a.zh[c]=a.iF[c];a.zh.fo=b};a.OG=e;a.kV=function(){var b=a.af,n=a.N;e()||""!=b.shaders_path||(b.shaders_path=c()+"/"+b.BV);if(a.N.jt&&window.WebAssembly)var b=n.ly+n.pK,k=n.ly+n.oK;else b=n.ly+n.dE,k=n.ly+
n.zH;n.enabled&&""==n.dt&&(n.dt=c()+"/"+b.replace("B4W_URANIUM_PATH=",""),n.ky=c()+"/"+k.replace("B4W_URANIUM_PATH=",""))};a.get_assets_path=function(b){var e=a.ae;if(e.path)return e.path;var g=e.OT,n="B4W_ASSETS_PATH=";b&&(g=e.eU,n="B4W_PROJ_ASSETS_PATH=",g=g.replace("__NAME__",b));g=g.replace(n,"");return g=g.replace("__JS__",c())}};b4w.module.__anchors=function(a,u){function e(){if(!C&&!M){var a=B;if(a)if("visible"==a.lastElementChild.style.visibility)c(),B=null;else if(1==a.style.opacity){var b=a.lastElementChild,a=a.firstElementChild,d=b.firstElementChild,m=Math.ceil(b.getBoundingClientRect().width),A=Math.ceil(b.getBoundingClientRect().height),f=Math.ceil(a.getBoundingClientRect().width),e=Math.ceil(a.getBoundingClientRect().height);b.style.position="absolute";b.style.visibility="visible";var h=!0,l=!0;a.style.display="none";
C=!0;f!=m?E.animate(f,m,200,function(a){a==m&&(h=!1,l||(C=!1,d.style.visibility="visible"));b.style.width=a+"px"}):(h=!1,l||(C=!1));e!=A?E.animate(e,A,200,function(a){a==A&&(l=!1,h||(C=!1,d.style.visibility="visible"));b.style.height=a+"px"}):(l=!1,h||(C=!1))}}}function c(){var a=B.lastElementChild;B.firstElementChild.style.display="";a.style.visibility="hidden";a.style.position="relative";a.firstElementChild.style.visibility="hidden"}function b(a){a.style.cssText+="color:       #fff;font-family: Arial;font-size:   12px;font-weight: bold;line-height: 1.25;"}
function n(a,d,m){var A=document.createElement("div"),f=document.createElement("span");m&&(A.style.maxWidth=m+"px");A.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;bottom:             0;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);left:               0;box-sizing:         border-box;opacity:            1.0;padding:            6px 12px 6px 12px;position:           relative;z-index:            2;";b(f);f.innerHTML=
a;A.style.visibility="hidden";f.style.visibility="hidden";A.appendChild(f);d.appendChild(A);q.add_click_listener(d,function(){C||d==B||1!=d.style.opacity||M||(B&&"visible"==B.lastElementChild.style.visibility&&c(),B=d)})}function g(){for(var a=0,b=0;b<N.length;b++)N[b].ho&&a++;A=new Float32Array(3*a)}function p(a,b){return b.depth-a.depth}function k(a,b,d){a=a.element;D.FG&&(b=Math.floor(b),d=Math.floor(d));"transform"in a.style?a.style.transform="translate3d("+b+"px, "+d+"px, 0px)":"webkitTransform"in
a.style?a.style.webkitTransform="translate3d("+b+"px, "+d+"px, 0px)":(a.style.left=b+"px",a.style.top=d+"px")}function x(a){for(var b=0;b<N.length;b++)if(N[b].obj==a)return!0;return!1}var v=u("__batch"),h=u("__camera"),d=u("__config"),t=u("__container"),q=u("__input"),G=u("__objects"),H=u("__obj_util"),z=u("__print"),l=u("__renderer"),F=u("__scenes"),r=u("__subscene"),E=u("__time"),w=u("__transform"),f=u("__tsr"),y=u("__vec3"),D=d.L,N=[],M=!1,B=null,J=!1,C=!1,A=new Float32Array(0),X=new Uint8Array(16),
m=new Float32Array(2),K=new Float32Array(3),R=new Float32Array(3);a.append=function(a){if(!x(a)){var d=a.anchor.ho&&!!F.Tb(F.Gh(),r.Gn),d={type:a.anchor.type,obj:a,x:0,y:0,depth:0,am:"out",ho:d,element:null,Oo:null,KM:a.anchor.pT,Ik:a.anchor.Ik};switch(d.type){case "ANNOTATION":var m=d.obj;a=t.get_container();var A=G.get_meta_tags(m),m=m.name,c="",f=document.createElement("div"),C=f.cloneNode(!1),h=document.createElement("span");f.style.cssText+="position:        absolute;height:          0;top:             0;left:            0;transform-style: preserve-3d;";
C.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);opacity:            1.0;box-sizing:         border-box;bottom:             0;left:               0;padding:            6px 12px 6px 12px;position:           absolute;";f.style.visibility="hidden";A&&(c=A.description||c,m=A.title||m);h.innerHTML=m;h.style.cssText+="-webkit-touch-callout: none;-webkit-user-select:   none;-khtml-user-select:    none;-moz-user-select:      none;-ms-user-select:       none;user-select:           none;cursor:                default;";
b(h);h.style.whiteSpace="nowrap";C.appendChild(h);f.appendChild(C);c&&n(c,f,d.KM);a.appendChild(f);d.element=f;break;case "ELEMENT":if(d.element=document.getElementById(a.anchor.Ik),d.element)for(A=0;A<N.length;A++)"ELEMENT"==N[A].type&&N[A].Ik==a.anchor.Ik&&(z.warn("Anchor with the id '"+a.anchor.Ik+"' already exists, making the new anchor generic."),d.type="GENERIC");else z.warn("Anchor HTML element with the id '"+a.anchor.Ik+"' was not found, making it generic."),d.type="GENERIC"}N.push(d);g();
J||(J=!0,t.get_container().addEventListener("mouseup",e))}};a.remove=function(a){for(var b=0;b<N.length;b++){var d=N[b];if(d.obj==a){"ANNOTATION"==d.type&&(a=d,t.get_container().removeChild(a.element));N.splice(b,1);g();break}}};a.update=function(a){for(var b=0,d=N.length;d--;){var m=N[d];if(m.ho){var c=f.get_trans_view(m.obj.A.D);A.set(c,3*b++)}var C;C=m;var c=K,e=F.Ok(F.Gh());C=f.get_trans_view(C.obj.A.D);h.project_point(e,C,c);C=c;c=C[0];e=C[1];C=C[2];if(a||c!=m.x||e!=m.y||C!=m.depth){switch(m.type){case "ANNOTATION":var l=
c,R=e;k(m,l,R);break;case "ELEMENT":R=m.element.getBoundingClientRect(),l=c-R.width/2,R=e-R.height/2,k(m,l,R)}m.x=c;m.y=e;m.depth=C;m.Oo&&m.Oo(c,e,m.am,m.obj,m.element)}}N.sort(p);for(d=0;d<N.length;d++)m=N[d],"GENERIC"!=m.type&&(m.element.style.zIndex=B==m.element?N.length:d);0<b&&(a=F.Tb(F.Gh(),r.Gn),b=a.Za[0].La[0],v.rW(b.ya,A),r.Rc(a,b))};a.RJ=function(){for(var a=t.get_container(),b=F.get_active(),b=F.Tb(b,r.Hg),b=!(!b||!b.enable_hmd_stereo),d=N.length;d--;){var A=N[d],f=A.obj,C=f.A,e=A.x,h=
A.y,g=A.depth,n=F.Ok(F.Gh()),J=w.get_translation(f,K),n=w.get_translation(n,R),J=y.dist(J,n);(g=0>e||0>h||0>g||1<g||F.is_hidden(f)||e>=a.clientWidth||h>=a.clientHeight)||(C.Ej?(g=C.pg,C=J<C.qg?!1:g==H.Qy||J<g?!0:!1):C=!0,g=!C);C=g?"out":"visible";A.ho&&"out"!=C&&(C=A,g=F.Tb(F.Gh(),r.Gn).H,J=t.Iq(C.x,C.y,m,g),l.cx(g.We,J[0],g.height-J[1],2,2,X),C=255<=X[0]+X[4]+X[8]+X[12]?"visible":"out"!=C.am&&X[0]+X[4]+X[8]+X[12]?C.am:"covered");b&&(C="out");if(C!=A.am){switch(A.type){case "ANNOTATION":case "ELEMENT":var q=
A.element;q&&("out"==C?(q.style.visibility="hidden",q.children.length&&(q.children[0].style.visibility="hidden")):"visible"==C?(q.style.visibility="visible",q.children.length&&(q.children[0].style.visibility="visible"),q.style.opacity=1):(q.style.visibility="visible",q.style.opacity=.1,q.children.length&&(q.children[0].style.visibility="visible"),"ANNOTATION"==A.type&&1<q.children.length&&"visible"==q.lastElementChild.style.visibility&&(c(),q==B&&(B=null))))}A.am=C;A.Oo&&A.Oo(e,h,A.am,f,q)}}};a.attach_move_cb=
function(a,b){for(var d=0;d<N.length;d++)N[d].obj==a&&(N[d].Oo=b)};a.detach_move_cb=function(a){for(var b=0;b<N.length;b++)N[b].obj==a&&(N[b].Oo=null)};a.cleanup=function(){for(var a=0;a<N.length;a++){var b=N[a];"ANNOTATION"==b.type&&t.get_container().removeChild(b.element)}N.length=0};a.is_anchor=x;a.get_element_id=function(a){for(var b=0;b<N.length;b++)if(N[b].obj==a)return N[b].Ik;return!1};a.pause=function(){M=!0};a.resume=function(){M=!1};a.PT=function(a,b){for(var d=-1,m=0;m<N.length;m++){var A;
if(A="visible"==N[m].am){var c=N[m];if(c.element){A=Math.round(c.element.offsetWidth)||0;var f=Math.round(c.element.offsetHeight)||0}else f=A=0;var C=c.x,c=c.y;A=a>=C&&a<=C+A&&b<c&&b>=c-f?!0:!1}if(A)if(0>d)var e=N[m].depth,d=m;else N[m].depth<e&&(d=m,e=N[m].depth)}return 0>d?null:N[d].obj}};b4w.module.__armature=function(a,u){function e(a){a=a.A;for(var b=a.op,d=a.ww,c=0;c<b.length;c++){for(var e=b[c],h=d[c],g=0;g<h.length;g+=2)for(var n=h[g],w=h[g+1],f=0;4>f;f++)e.Qd[n+f]=a.Qd[w+f],e.Fe[n+f]=a.Fe[w+f],e.Wd[n+f]=a.Wd[w+f],e.Ke[n+f]=a.Ke[w+f];e.Bf=a.Bf}}function c(a,b,d,e){var h=a.NC,g=a.Wh,r=a.Ys,q=a.cn;q?(q=q.Ys,b?n.multiply(q,h,r):(b=v,n.invert(q,b),n.multiply(b,r,h))):b?n.copy(h,r):n.copy(r,h);h=x;n.invert(g,h);n.multiply(r,h,h);g=a.fi;d[4*g]=h[0];d[4*g+1]=h[1];d[4*g+2]=h[2];d[4*
g+3]=h[3];e[4*g]=h[4];e[4*g+1]=h[5];e[4*g+2]=h[6];e[4*g+3]=h[7];a=a.Ku;for(g=0;g<a.length;g++)r=a[g],r.uc||c(r,!0,d,e)}var b=u("__util"),n=u("__tsr"),g=u("__quat"),p=u("__mat4"),k=u("__vec3"),x=n.create(),v=n.create(),h=new Float32Array(4),d=new Float32Array(4),t=new Float32Array(4);a.Lp=function(a,d){for(var c=a.data.bones,e=a.pose.bones,h={},g=0;g<e.length;g++){var r=e[g],q=r.bone,w=q.name,f=h[w]={fi:0,iK:-1,cn:null,Ku:[],ku:[],uc:null,Jp:n.create(),NC:n.create(),Wh:n.create(),PC:n.create(),Ys:n.create(),
hy:n.create(),gy:n.create(),Xs:n.create(),OC:n.create(),fy:!1,sJ:new Float32Array(3)},w=new Float32Array(q.matrix_local),y=new Float32Array(16);p.invert(w,y);var r=new Float32Array(r.matrix_basis),t=f.sJ;k.subtract(b.f32(q.tail_local),b.f32(q.head_local),t);b.mX(t,y,t);n.from_mat4(w,f.Wh);n.from_mat4(r,f.Xs);n.copy(f.Wh,f.Ys);n.invert(f.Wh,f.PC)}for(g=0;g<c.length;g++){w=c[g].name;r=b.keysearch("name",w,e);f=h[w];q=r.parent_recursive;f.ku.push(f);for(y=0;y<q.length;y++)r=q[y],r=r.name,r=h[r],f.ku.push(r);
q.length?(r=q[0],r=r.name,r=h[r],f.cn=r,n.invert(r.Wh,x),n.multiply(x,f.Wh,f.Jp),r.Ku.push(f)):n.copy(f.Wh,f.Jp);f.fi=g;f.name=w;n.multiply(f.Jp,f.Xs,f.NC)}d.A.fg=h};a.get_bone_tsr=function(a,b,c,e,l){var q=a.A,r=q.Bf;b=q.fg[b];var k=b.fi;a=b.Wh;var w=q.Wd,f=q.Ke,y=q.Qd,q=q.Fe,G=w[4*k+1],z=w[4*k+2],p=w[4*k+3],B=f[4*k+1],J=f[4*k+2],C=f[4*k+3];h[0]=(1-r)*w[4*k]+r*f[4*k];h[1]=(1-r)*G+r*B;h[2]=(1-r)*z+r*J;h[3]=(1-r)*p+r*C;d[0]=y[4*k];d[1]=y[4*k+1];d[2]=y[4*k+2];d[3]=y[4*k+3];t[0]=q[4*k];t[1]=q[4*k+1];
t[2]=q[4*k+2];t[3]=q[4*k+3];g.slerp(d,t,r,d);r=x;n.set_transcale(h,r);n.set_quat(d,r);c?(c=v,n.translate(a,b.sJ,c),n.multiply(r,c,r)):n.multiply(r,a,r);if(e){if(e=b.cn)c=v,n.invert(e.Ys,c),n.multiply(c,r,r);e=v;n.invert(b.Jp,e);n.multiply(e,r,r)}n.copy(r,l)};a.set_bone_tsr=function(a,b,d,h){var g=a.A;b=g.fg[b];var q=g.Wd,r=g.Qd;h?n.multiply(b.Jp,d,b.NC):n.copy(d,b.Ys);c(b,h,q,r);g.Bf=0;e(a)};a.YW=e;a.yW=c;a.lu=function(a,b){return b in a.A.fg}};b4w.module.__boundings=function(a,u){function e(){return{max_x:0,min_x:0,max_y:0,min_y:0,max_z:0,min_z:0}}function c(a,b){b.min_x=a.min_x;b.max_x=a.max_x;b.min_y=a.min_y;b.max_y=a.max_y;b.min_z=a.min_z;b.max_z=a.max_z;return b}function b(){return{U:new Float32Array(3),Sa:new Float32Array(3),Ta:new Float32Array(3),Ua:new Float32Array(3)}}function n(a,b){var d=a.max_y,c=a.max_z,m=a.min_x,f=a.min_y,e=a.min_z;a.max_x=Math.max(b.max_x,a.max_x);a.max_y=Math.max(b.max_y,d);a.max_z=Math.max(b.max_z,c);a.min_x=
Math.min(b.min_x,m);a.min_y=Math.min(b.min_y,f);a.min_z=Math.min(b.min_z,e);return a}function g(a,b,d,c){var m=a[b],A=a[b+1],f=a[b+2],e=a[b],h=a[b+1],C=a[b+2];for(b+=3;b<d;b+=3)var g=a[b],l=a[b+1],r=a[b+2],m=Math.max(m,g),A=Math.max(A,l),f=Math.max(f,r),e=Math.min(e,g),h=Math.min(h,l),C=Math.min(C,r);c.max_x=m;c.max_y=A;c.max_z=f;c.min_x=e;c.min_y=h;c.min_z=C;return c}function p(a,b){b||(b=new Float32Array(24));var d=a.max_x,c=a.max_y,m=a.max_z,f=a.min_x,e=a.min_y,h=a.min_z;b[0]=f;b[1]=e;b[2]=h;b[3]=
d;b[4]=e;b[5]=h;b[6]=d;b[7]=c;b[8]=h;b[9]=f;b[10]=c;b[11]=h;b[12]=f;b[13]=e;b[14]=m;b[15]=d;b[16]=e;b[17]=m;b[18]=d;b[19]=c;b[20]=m;b[21]=f;b[22]=c;b[23]=m;return b}function k(){return{U:new Float32Array(3),ab:0}}function x(a,b){b.U[0]=a.U[0];b.U[1]=a.U[1];b.U[2]=a.U[2];b.ab=a.ab;return b}function v(){return{Sa:new Float32Array(3),Ta:new Float32Array(3),Ua:new Float32Array(3),U:new Float32Array(3)}}function h(a,b){l.copy(a.Sa,b.Sa);l.copy(a.Ta,b.Ta);l.copy(a.Ua,b.Ua);l.copy(a.U,b.U);return b}function d(a,
b,d,c){return{Sa:new Float32Array(a),Ta:new Float32Array(b),Ua:new Float32Array(d),U:new Float32Array([c[0],c[1],c[2]])}}function t(a,b){var A=F.MN(a,D),A=b?F.IN(a,A,M):r.identity(M),A=F.AQ(A,N);l.copy(a,w);l.transformMat3(w,A,w);for(var c=w[0],m=c,f=w[1],e=f,h=w[2],g=h,C,n,q,J,k=3;k<a.length;k+=3)w[0]=a[k],w[1]=a[k+1],w[2]=a[k+2],l.transformMat3(w,A,w),C=w[0],n=w[1],q=w[2],C>c&&(c=C),C<m&&(m=C),n>f&&(f=n),n<e&&(e=n),q>h&&(h=q),q<g&&(g=q);c=Math.max(c-m,.001);f=Math.max(f-e,.001);h=Math.max(h-g,.001);
g=r.identity(M);g[0]=c?1/c:2E3;g[4]=f?1/f:2E3;g[8]=h?1/h:2E3;r.transpose(A,B);w[0]=a[0];w[1]=a[1];w[2]=a[2];l.transformMat3(w,A,w);l.transformMat3(w,g,w);l.transformMat3(w,B,w);e=w[0];m=w[0];C=w[1];n=w[1];q=w[2];J=w[2];for(k=3;k<a.length;k+=3)w[0]=a[k],w[1]=a[k+1],w[2]=a[k+2],l.transformMat3(w,A,w),l.transformMat3(w,g,w),l.transformMat3(w,B,w),e=Math.max(e,w[0]),m=Math.min(m,w[0]),C=Math.max(C,w[1]),n=Math.min(n,w[1]),q=Math.max(q,w[2]),J=Math.min(J,w[2]);k=Math.sqrt((e-m)*(e-m)+(C-n)*(C-n)+(q-J)*
(q-J))/2;k=Math.min(k,1);y[0]=(e+m)/2;y[1]=(C+n)/2;y[2]=(q+J)/2;e=y;g=r.identity(M);g[0]=c;g[4]=f;g[8]=h;l.transformMat3(e,A,e);l.transformMat3(e,g,e);l.transformMat3(e,B,e);g=[A[0],A[3],A[6]];m=[A[1],A[4],A[7]];A=[A[2],A[5],A[8]];l.scale(g,c*k,g);l.scale(m,f*k,m);l.scale(A,h*k,A);return d(g,m,A,e)}function q(){return{ab:0,height:0,U:new Float32Array(3)}}function G(a,b,d){l.add(b,d,a.U);l.scale(a.U,.5,a.U);a.ab=l.distance(a.U,b);return a}var H=u("__tsr"),z=u("__util"),l=u("__vec3"),F=u("__math"),
r=u("__mat3"),E=new Float32Array(24),w=new Float32Array(3),f=new Float32Array(3),y=new Float32Array(3),D=new Float32Array(3),N=new Float32Array(9),M=new Float32Array(9),B=new Float32Array(9);a.HG=function(){return{Pe:e(),qf:v(),Qe:k()}};a.kF=function(a,b){c(a.Pe,b.Pe);h(a.qf,b.qf);x(a.Qe,b.Qe)};a.Se=e;a.mi=c;a.Au=b;a.zO=function(a,b){l.copy(a.U,b.U);l.copy(a.Sa,b.Sa);l.copy(a.Ta,b.Ta);l.copy(a.Ua,b.Ua)};a.JY=function(){return{max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12}};
a.CX=function(a){a.max_x=0;a.min_x=0;a.max_y=0;a.min_y=0;a.max_z=0;a.min_z=0};a.nu=function(a){var b=e();c(a,b);return b};a.JN=function(a){var b=a.max_x-a.min_x,d=a.max_y-a.min_y;d<b&&(b=d);a=a.max_z-a.min_z;a<b&&(b=a);return b};a.$u=n;a.gz=g;a.Xn=function(a,b,d){d||(d=e());a=p(a,E);H.transform_vectors(a,b,a);return g(a,0,a.length,d)};a.MF=p;a.B_=function(a,b,d){d||(d=e());var c=b.min_x,m=b.max_x,A=b.min_y,f=b.max_y,h=b.min_z;b=b.max_z;if(c>=a.max_x||m<=a.min_x||A>=a.max_y||f<=a.min_y||h>=a.max_z||
b<=a.min_z)return d.min_x=-.1,d.max_x=.1,d.min_y=-.1,d.max_y=.1,d.min_z=-.2,d.max_z=-.1,d;d.min_x=Math.max(a.min_x,c);d.max_x=Math.min(a.max_x,m);d.min_y=Math.max(a.min_y,A);d.max_y=Math.min(a.max_y,f);d.min_z=Math.max(a.min_z,h);d.max_z=Math.min(a.max_z,b);return d};a.G_=function(a,b,d){d||(d=e());var c=a.max_x-a.min_x,m=a.max_y-a.min_y,A=a.max_z-a.min_z;d.min_x=a.min_x-.5*(b-1)*c;d.max_x=a.max_x+.5*(b-1)*c;d.min_y=a.min_y-.5*(b-1)*m;d.max_y=a.max_y+.5*(b-1)*m;d.min_z=a.min_z-.5*(b-1)*A;d.max_z=
a.max_z+.5*(b-1)*A;return d};a.cu=function(a,b,d){d||(d=k());H.transform_vec3(a.U,b,d.U);b=H.get_scale(b);d.ab=a.ab*(0>b?-b:b);return d};a.nz=function(a,b,d){d||(d=v());H.transform_vec3(a.U,b,d.U);l.copy(a.Sa,d.Sa);l.copy(a.Ta,d.Ta);l.copy(a.Ua,d.Ua);H.transform_dir_vec3(d.Sa,b,d.Sa);H.transform_dir_vec3(d.Ta,b,d.Ta);H.transform_dir_vec3(d.Ua,b,d.Ua);return d};a.oz=function(a,d,c){c||(c=b());H.transform_vec3(a.U,d,c.U);l.copy(a.Sa,c.Sa);l.copy(a.Ta,c.Ta);l.copy(a.Ua,c.Ua);H.transform_dir_vec3(c.Sa,
d,c.Sa);H.transform_dir_vec3(c.Ta,d,c.Ta);H.transform_dir_vec3(c.Ua,d,c.Ua);return c};a.zE=function(a,b){var d=k();l.copy(b,d.U);d.ab=a;return d};a.CU=function(a,d,c,f,m){var A=b();l.copy(a,A.U);l.copy(d,A.Sa);l.copy(c,A.Ta);l.copy(f,A.Ua);l.scale(A.Sa,m[0],A.Sa);l.scale(A.Ta,m[1],A.Ta);l.scale(A.Ua,m[2],A.Ua);return A};a.wu=k;a.Dk=x;a.Zq=v;a.Yn=h;a.RY=function(a){var b=v();h(a,b);return b};a.SY=function(a){var b=k();x(a,b);return b};a.hz=d;a.sN=function(){var a;a||(a=k());l.set(0,0,0,a.U);a.ab=1E12;
return a};a.pQ=function(a,b){var d=l.subtract(b.U,a.U,l.create());0==l.length(d)&&l.set(1,0,0,d);var c=l.normalize(d,l.create()),d=l.scale(c,a.ab,l.create());l.add(d,a.U,d);var m=l.scale(c,-a.ab,l.create());l.add(m,a.U,m);var f=l.scale(c,b.ab,l.create());l.add(f,b.U,f);var e=l.scale(c,-b.ab,l.create());l.add(e,b.U,e);d=[d,m,f,e];c=l.normalize(c,l.create());m=d[0];f=d[0];for(e=1;e<d.length;e++){var h=l.dot(d[e],c);h<l.dot(m,c)&&(m=d[e]);h>l.dot(f,c)&&(f=d[e])}c=[m,f];d=c[0];c=c[1];a.U=l.scale(l.add(d,
c,l.create()),.5,l.create());a.ab=l.length(l.subtract(c,d,l.create()))/2};a.bA=function(a,b){l.add(a.U,a.Ta,w);l.add(w,a.Sa,w);l.add(w,a.Ua,w);b.push(w[0],w[1],w[2]);l.add(a.U,a.Ta,w);l.add(w,a.Sa,w);l.subtract(w,a.Ua,w);b.push(w[0],w[1],w[2]);l.add(a.U,a.Ta,w);l.subtract(w,a.Sa,w);l.add(w,a.Ua,w);b.push(w[0],w[1],w[2]);l.add(a.U,a.Ta,w);l.subtract(w,a.Sa,w);l.subtract(w,a.Ua,w);b.push(w[0],w[1],w[2]);l.subtract(a.U,a.Ta,w);l.add(w,a.Sa,w);l.add(w,a.Ua,w);b.push(w[0],w[1],w[2]);l.subtract(a.U,a.Ta,
w);l.add(w,a.Sa,w);l.subtract(w,a.Ua,w);b.push(w[0],w[1],w[2]);l.subtract(a.U,a.Ta,w);l.subtract(w,a.Sa,w);l.add(w,a.Ua,w);b.push(w[0],w[1],w[2]);l.subtract(a.U,a.Ta,w);l.subtract(w,a.Sa,w);l.subtract(w,a.Ua,w);b.push(w[0],w[1],w[2])};a.vu=t;a.FO=function(a){var d=b();l.copy(a.Sa,d.Sa);l.copy(a.Ta,d.Ta);l.copy(a.Ua,d.Ua);l.copy(a.U,d.U);return d};a.xu=function(a){var b=k(),d;d=l.length(a.Sa);var c=l.length(a.Ta),m=l.length(a.Ua);d=d>c?d:c;b.U=a.U;b.ab=m>d?m:d;return b};a.LG=function(a,b){var d=l.length(a.Sa),
c=l.length(a.Ta),m=l.length(a.Ua);return.75*b.ab*b.ab*b.ab>d*c*m};a.kS=a.mS=a.lS=q;a.mE=function(a,b){var d=b.max_z,c=b.min_z,m=Math.max(0,d-c-2*a),f=q();f.ab=a;f.height=m;f.U[0]=0;f.U[1]=0;f.U[2]=(d+c)/2;return f};a.oE=function(a,b){var d=b.max_z,c=b.min_z,m=Math.max(0,d-c),f=q();f.ab=a;f.height=m;f.U[0]=0;f.U[1]=0;f.U[2]=(d+c)/2;return f};a.nE=function(a,b){var d=b.max_z,c=b.min_z,m=Math.max(0,d-c),f=q();f.ab=a;f.height=m;f.U[0]=0;f.U[1]=0;f.U[2]=(d+c)/2;return f};a.wO=a.yO=a.xO=function(a,b){b.ab=
a.ab;b.height=a.height;b.U.set(a.U);return b};a.OY=function(a,b){return a.min_x>b.max_x||a.max_x<b.min_x?!1:a.min_y>b.max_y||a.max_y<b.min_y?!1:a.min_z>b.max_z||a.max_z<b.min_z?!1:!0};a.jU=function(a){for(var b=0,d=0,f=e(),m=0;m<a.submeshes.length;m++){for(var h=a.submeshes[m],l=h.position,r=0;r<l.length/3;r++)var S=l[3*r],w=l[3*r+1],y=l[3*r+2],b=Math.max(Math.sqrt(S*S+w*w+y*y),b),d=Math.max(Math.sqrt(S*S+w*w),d);r=h.boundings.bb;l=g(l,0,l.length,e());r.max_x=l.max_x;r.min_x=l.min_x;r.max_y=l.max_y;
r.min_y=l.min_y;r.max_z=l.max_z;r.min_z=l.min_z;r=p(l,E);r=t(r,!1);h.boundings.be_cen=r.U;h.boundings.be_ax=[r.Sa[0],r.Ta[1],r.Ua[2]];m?n(f,l):c(l,f)}m=a.b4w_boundings.bb;m.max_x=f.max_x;m.min_x=f.min_x;m.max_y=f.max_y;m.min_y=f.min_y;m.max_z=f.max_z;m.min_z=f.min_z;m=a.b4w_boundings.bb_src;m.max_x=f.max_x;m.min_x=f.min_x;m.max_y=f.max_y;m.min_y=f.min_y;m.max_z=f.max_z;m.min_z=f.min_z;a.b4w_boundings.bs_rad=b;a.b4w_boundings.bc_rad=d;r=p(f,E);r=t(r,!1);a.b4w_boundings.be_cen=r.U;a.b4w_boundings.be_ax=
[r.Sa[0],r.Ta[1],r.Ua[2]]};a.yR=function(a){var b=a.subarray(0,3),d=a.subarray(6,9),c=a.subarray(12,15),m=a.subarray(18,21);a=l.subtract(d,b,w);l.normalize(a,a);var e=z.KR(b,d,c,f),e=l.cross(e,a,e);l.normalize(e,e);var h=l.create(),g=l.create();l.subtract(d,b,y);g[0]=l.dot(y,a);g[1]=l.dot(y,e);d=l.create();l.subtract(c,b,y);d[0]=l.dot(y,a);d[1]=l.dot(y,e);c=l.create();l.subtract(m,b,y);c[0]=l.dot(y,a);c[1]=l.dot(y,e);m=k();c=[h,g,d,c];h=G(m,c[0],c[1]);for(m=2;m<c.length;m++)if(l.distance(h.U,c[m])>
h.ab){for(var r=h,h=c,g=c[m],d=m-1,r=G(r,g,h[0]),n=1;n<=d;n++)if(l.distance(r.U,h[n])>r.ab){for(var q=r,r=h,t=g,D=h[n],B=n-1,q=G(q,t,D),E=0;E<=B;E++)if(l.distance(q.U,r[E])>q.ab){var J=t,x=D,p=r[E],v=l.subtract(x,p,y),v=l.squaredLength(v),H=l.subtract(J,p,y),M=l.squaredLength(H),H=l.subtract(J,x,y),W=l.squaredLength(H),H=v*(M+W-v),F=M*(W+v-M),v=W*(v+M-W),M=H+F+v;l.copy(J,q.U);l.scale(q.U,H/M,q.U);l.scaleAndAdd(q.U,x,F/M,q.U);l.scaleAndAdd(q.U,p,v/M,q.U);q.ab=l.distance(q.U,J)}r=q}h=r}m=h;a=l.scale(a,
m.U[0],y);l.scaleAndAdd(a,e,m.U[1],a);l.add(a,b,m.U);return m}};b4w.module.__compat=function(a,u){function e(a){return-1<navigator.userAgent.indexOf(a)?!0:!1}function c(){return navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)}function b(){return!window.ActiveXObject&&"ActiveXObject"in window}var n=u("__config"),g=u("__debug"),p=u("__extensions"),
k=u("__print"),x=u("__renderer"),v="R600;RV610;RV630;RV620;RV635;RV670;RS780;RS880;RV770;RV730;RV710;RV740;CEDAR;REDWOOD;JUNIPER;CYPRESS;PALM (Wrestler/Ontario);SUMO (Llano);SUMO2 (Llano);ARUBA (Trinity/Richland);BARTS;TURKS;CAICOS;CAYMAN".split(";");a.CD=256;var h=n.$l,d=n.L,t=n.rm,q=n.context,G=n.zh,H=n.ka,z=n.N,l=n.ae;a.YP=function(a){a.getError()==a.INVALID_ENUM&&k.warn("Possible Tegra invalid enum issue detected, ignoring")};a.DI=function(F,r){function E(a){r&&k.warn(a)}G.nT=F.getParameter(F.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
G.aB=F.getParameter(F.MAX_FRAGMENT_UNIFORM_VECTORS);G.eB=F.getParameter(F.MAX_TEXTURE_IMAGE_UNITS);G.uw=F.getParameter(F.MAX_VARYING_VECTORS);G.fB=F.getParameter(F.MAX_VERTEX_ATTRIBS);G.yH=F.getParameter(F.MAX_VERTEX_TEXTURE_IMAGE_UNITS);G.vw=F.getParameter(F.MAX_VERTEX_UNIFORM_VECTORS);G.rg=F.getParameter(F.MAX_CUBE_MAP_TEXTURE_SIZE);G.bB=F.getParameter(F.MAX_RENDERBUFFER_SIZE);G.dc=F.getParameter(F.MAX_TEXTURE_SIZE);G.gB=F.getParameter(F.MAX_VIEWPORT_DIMS);var w=p.get_renderer_info();if(w){var f=
F.getParameter(w.UNMASKED_VENDOR_WEBGL),y=F.getParameter(w.UNMASKED_RENDERER_WEBGL);-1<f.indexOf("Qualcomm")&&-1<y.indexOf("330")&&(e("Chrome")||e("Firefox"))&&(E("Chrome/Firefox and Qualcomm 330 detected, force enable WebGL 1, disable blending cascaded shadow maps."),d.gb=!1,d.QE=!0)}G.fo=d.gb?24:16;d.gb&&!t.enabled&&(d.Tq=!0);d.gb?(d.ec=Math.min(d.ec,F.getParameter(F.MAX_SAMPLES)),e("Firefox")&&(E("Firefox and WebGL 2 detected, applying framebuffer hack."),d.KE=!0),e("Windows")&&e("Chrome")&&(E("Windows, Chrome and WebGL 2 detected, applying multisample hack, disabling MSAA."),
d.ec=1)):d.ec=1;e("Firefox")&&"NONE"!==d.stereo&&(E("Firefox and Stereo rendering detected, disable texture reusage"),d.OF=!0);if(d.gb&&g.fO()||e("Firefox"))E("Firefox detected, disabling multisample"),d.ec=1;e("Mac OS X")&&e("Chrome/60")&&(E("macOS and Chrome 60 detected, disabling multisample"),d.ec=1);x.$U();var D=!!p.pR();e("Firefox/28.0")&&(e("Linux")||e("Macintosh"))&&(E("Firefox 28 detected, applying depth hack"),D=!1);e("Windows Phone")||(e("iPad")||e("iPhone")?(E("iOS detected, applying alpha hack, applying vertex animation mix normals hack, disable smaa. Disable ssao for performance. Initialize WebAudio context with empty sound. Applying glow hack."),
q.alpha||(d.background_color[3]=1),d.Vv=!0,d.hK=!0,d.smaa=!1,d.ssao=!1,d.HA=!0,p.nG()&&l.$w&&(d.lm="pvr")):e("Mac OS X")&&e("Safari")&&!e("Chrome")&&(E("OS X / Safari detected, force to wait complete loading. Applying playback rate hack for video textures. Applying canvas alpha hack."),d.rI=!0,H.iE=!0,H.UE=!0));e("Windows")&&(e("Chrome/40")||e("Firefox/33")||e("Firefox/34")||e("Firefox/35")||e("Firefox/36"))&&(E("Windows/Chrome40 or Firefox33-36 detected. Applying clear procedural skydome hack."),
d.yz=!0);e("Chrome")&&!c()&&n.OG()&&(E('Chrome (non-mobile) was detected for a single HTML-exported file. "Background Music" speakers were changed to "Background Sound".'),d.RE=!0);e("Mac OS X")&&(d.rw=!0,E("OS X detected, applying shadows hack"));c()&&(E("Mobile detected, applying various hacks for video textures."),d.is_mobile_device=!0,e("iPad")||e("iPhone")||e("Windows Phone")||(E("Mobile (not iOS) detected, disable playback rate for video textures."),H.DF=!0));e("iPad")&&(E('iPad detected, use "autoplay" hack for video textures.'),
d.KG=!0);(e("Firefox/35.0")||e("Firefox/36.0"))&&e("Windows")&&(E("Windows/Firefox 35/36 detected, applying shadows slink hack"),d.VI=!0);if(e("iPhone")||b())E("iPhone or IE11 detected. Enable sequential video fallback for video textures."),d.Es=!0;10>G.uw&&(E("Not enough varyings, disable shadows on blend objects"),d.Sz=!0);e("Windows Phone")&&(E("Windows Phone detected. Disable debug view mode, glow materials, ssao, smaa, shadows, reflections, refractions."),d.debug_view=!1,d.glow_materials=!1,
d.ssao=!1,d.smaa=!1,d.shadows=!1,d.reflections=!1,d.refractions=!1,d.cI=!1);if(e("UCBrowser")||e("Chrome")&&e("Nexus")&&d.is_mobile_device)E("Mobile Nexus Chrome or UCBrowser detected, disable workers."),z.xn=!1;e("Firefox")&&(E("Firefox detected, disabling workers"),z.xn=!1);if(b()||e("Edge"))E("IE11 or Edge detected, disabling workers"),z.xn=!1;e("Chrome")&&e("Linux")&&(E("Chrome and Linux detected, disabling wasm physics."),z.jt=!1);if(w){f=F.getParameter(w.UNMASKED_VENDOR_WEBGL);y=F.getParameter(w.UNMASKED_RENDERER_WEBGL);
w=/\b4\d{2}\b/;f.indexOf("Intel")&&(-1<y.indexOf("3000")||-1<y.indexOf("2000"))&&(d.hp=!1,E("Intel HD Graphics 2000/3000 detected, disable depth reuse."));e("Chrome")&&-1<y.indexOf("Mali-T720")&&(E('Chrome and ARM Mali-T720 detected, changing "Alpha Anti-Aliasing" materials to "Alpha Clip".'),d.tH=!0);-1<y.indexOf("AMD")&&e("Windows")&&e("Firefox")&&(E("AMD, Windows and Firefox detected, disabling depth textures."),D=!1);-1<f.indexOf("ARM")&&w.test(y)&&(E("ARM Mali-400 series detected, applying lamps, depth and frames blending hacks"),
D=!1,h.TF=!0,d.sH=!0);-1<f.indexOf("ARM")&&-1<y.indexOf("Mali-T604")&&(E("ARM Mali-T604 detected, disabling shadows."),d.shadows=!1);-1<f.indexOf("ARM")&&-1<y.indexOf("Mali-T760")&&(E("ARM Mali-T760 detected, disabling SSAO."),d.ssao=!1,d.ux=!0,d.gb&&(d.ec=1,E("ARM Mali-T760 and WebGL 2 detected, switching MSAA samples to 1.")));-1<f.indexOf("ARM")&&-1<y.indexOf("Mali-T720")&&(E("ARM Mali-T720 detected, disabling depth textures."),D=!1,d.gb&&(d.ec=1,E("ARM Mali-T720 and WebGL 2 detected, switching MSAA samples to 1.")));
-1<f.indexOf("Qualcomm")&&-1<y.indexOf("Adreno")&&(E("Qualcomm Adreno detected, applying shader constants hack."),d.jC=!0,-1<y.indexOf("420")&&(E("Qualcomm Adreno420 detected, setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),G.dc=Math.min(G.dc,4096),G.rg=Math.min(G.rg,4096)),e("Chrome")&&(y.match(/4../)||y.match(/5../))&&(E("Qualcomm Adreno 4xx or 5xx detected, switch MSAA samples to 1."),d.ec=1));-1<f.indexOf("NVIDIA")&&-1<y.indexOf("Tegra 3")&&(E("NVIDIA Tegra 3 detected, force low quality for B4W_LEVELS_OF_QUALITY nodes."),
d.RF=!0);e("Windows")&&e("Chrome")&&!e("Edge")&&(y.match(/NVIDIA GeForce 8..0/)||y.match(/NVIDIA GeForce 9..0/)||y.match(/NVIDIA GeForce( (G|GT|GTS|GTX))? 2../))&&(E("Chrome / Windows / NVIDIA GeForce 8/9/200 series detected, setting max cubemap size to 768x512, use canvas for resizing."),G.rg=a.CD,d.zs=!0);-1<y.indexOf("PowerVR")&&-1<y.indexOf("SGX")&&(E("PowerVR SGX series detected, use canvas for resizing. Disable shadows. Apply skinning hack, disable skin blending between frames."),d.zs=!0,d.ux=
!0,d.shadows=!1);e("Windows")&&-1<y.indexOf("Direct3D9")&&(E("DirectX 9.0 detected, using canvas for resizing textures/cubemap textures."),d.vF=!0,d.zs=!0,d.mI=!0);f="";for(w=0;w<v.length;w++)if(-1<y.indexOf(v[w])){f=v[w];break}f&&(E("Architecture "+f+" detected. Blending between frames and shadows on blend objects will be disabled."),d.ux=!0,d.Sz=!0)}0==G.yH&&(E("Vertex textures are not allowed. Disabling vertex textures"),d.Lt=!1);D||(d.po=!1,d.Nc=!1,d.water_dynamic=!1,d.shore_smoothing=!1,d.lp=
!1,d.smaa=!1,d.ssao=!1,d.As=!0);d.UJ=!!p.oG()||"pvr"==d.lm;d.Ju=D;if(F.getShaderPrecisionFormat)var N=F.getShaderPrecisionFormat(F.FRAGMENT_SHADER,F.HIGH_FLOAT);F.getShaderPrecisionFormat&&0!==N.precision||(d.precision="mediump");if(b()&&e("Touch")||e("Edge"))E("IE11 and touchscreen or Edge detected. Behaviour of the mouse move sensor will be changed."),d.Rv=!0;if(b()||e("Edge"))d.FG=!0,d.EG=!0,d.zs=!0;c()&&e("Firefox")&&(k.log("Mobile firefox detected. Applying autoplay media hack.Setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),
d.iB=!0,G.dc=Math.min(G.dc,4096),G.rg=Math.min(G.rg,4096));y=!!p.jA();d.cz=y;y=!!p.qG();d.Yx=y;y=!!p.NR();d.uJ=y;y=!!p.PR();d.eW=y;y=!!p.OR();d.dW=y;y=!!p.QR();d.fW=y;y=!!p.hR();d.HE=y;y=!!p.iR();d.TN=y};a.wz=e;a.detect_mobile=c;a.cN=function(){e("Firefox/35.0")&&e("Windows")&&(k.warn("Windows/Firefox 35 detected, forcing context's alpha"),n.context.alpha=!0)};a.is_ie11=b};b4w.module.__constraints=function(a,u){function e(a){return{type:a,Ra:null,target:null,Pp:!1,rd:null,Ea:null,vi:null,axes:null,xJ:null,pe:null,bK:!1,influence:0,yk:"",$I:0,TE:0,VE:0,WE:0,SE:0,Tz:0,dist_max:0,hw:!1,Tr:0,dy:!1,Us:0,distance:0,hor_units:"",vert_units:""}}function c(a,d){a.uc&&a.uc.Ra&&b(a.uc.Ra,a);if(d.Ra){var c=d.Ra;-1==c.ve.indexOf(a)?c.ve.push(a):F.K("Descendant object override is forbidden")}a.uc=d}function b(a,b){var d=a.ve.indexOf(b);-1!=d?a.ve.splice(d,1):F.K("No descendant object")}
function n(a,b,f,m,h,g){var A=e(3);A.Ra=b;A.xJ=new Float32Array(f);A.pe=new Float32Array(m);A.bK=h;A.rd=new Float32Array(a.A.D);A.influence=g;c(a,A);d(a,A,0)}function g(a,b,f,m,h,g){var A=e(8);A.Ra=b;A.Ea=l.create();l.set_trans(f,A.Ea);A.axes=new Float32Array(m);A.influence=g;A.Pp=h;A.rd=new Float32Array(a.A.D);c(a,A);d(a,A,0)}function p(a,b,f,m,h){var A=e(9);A.Ra=b;b=l.vb(a.A.D,M);A.vi=F.quat_to_euler(b,new Float32Array(3));A.axes=new Float32Array(f);A.influence=h;A.Pp=m;A.rd=new Float32Array(a.A.D);
c(a,A);d(a,A,0)}function k(a,b,f){var m=e(11);m.Ra=b;m.Ea=l.create();l.copy(a.A.D,m.Ea);m.rd=new Float32Array(a.A.D);m.influence=f;c(a,m);d(a,m,0)}function x(a,b,f){var m=e(13);m.Ra=b;m.Ea=new Float32Array(f);c(a,m);d(a,m,0)}function v(a,b,f,m){var A=e(14);A.Ra=b;A.yk=f;A.Ea=new Float32Array(m);c(a,A);d(a,A,0)}function h(a,b,f){var m=e(17);m.Ra=b;m.rd=new Float32Array(a.A.D);m.Ea=l.create();F.fe(f.right)?(m.hw=!1,m.Tr=f.right):F.fe(f.left)?(m.hw=!0,m.Tr=f.left):(m.hw=!0,m.Tr=0);F.fe(f.bottom)?(m.dy=
!1,m.Us=f.bottom):F.fe(f.top)?(m.dy=!0,m.Us=f.top):(m.dy=!0,m.Us=0);F.fe(f.distance)?m.distance=f.distance:m.distance=0;b=F.fe(f.rotation)?new Float32Array(f.rotation):r.create();l.set_quat(b,m.Ea);F.fe(f.hor_units)?m.hor_units=f.hor_units:m.hor_units="widths";F.fe(f.vert_units)?m.vert_units=f.vert_units:m.vert_units="heights";c(a,m);d(a,m,0)}function d(a,b,d){switch(b.type){case 1:l.multiply(b.Ra.A.D,b.Ea,a.A.D);break;case 12:var m=l.get_trans_view(a.A.D),c=l.get_quat_view(a.A.D),e=l.Lb(b.Ea,y),
h=b.Ra.A.D;d=l.get_quat_view(b.Ra.A.D);r.multiply(r.invert(b.DB,b.DB),c,c);r.multiply(d,c,c);l.transform_vec3(e,h,m);r.copy(d,b.DB);m=l.get_quat_view(a.A.D);c=l.get_quat_view(b.Ra.A.D);h=l.vb(b.Ea,M);c=r.multiply(c,h,N);c=z.kA(c,w);h=z.kA(m,f);F.FU(m,a.A.pe,F.gm(h[0],c[0]+b.VE,c[0]+b.TE),F.gm(h[1],c[1]+b.SE,c[1]+b.WE),m);break;case 15:var m=l.get_trans_view(a.A.D),c=l.get_quat_view(a.A.D),h=b.Ra.A.D,A=l.get_trans_view(h),g=b.$I,n=y,q=r.copy(c,N),e=l.Lb(b.Ea,D);l.transform_vec3(e,h,n);F.smooth_v(n,
m,d,g,m);F.bx(m,q,A,F.AXIS_MZ);F.ZI(q,c,d,.16*g,c);break;case 2:c=l.get_quat_view(a.A.D);h=B;e=l.Lb(b.Ea,D);A=l.get_scale(b.Ea);m=l.vb(b.Ea,N);H.get_bone_tsr(b.Ra,b.yk,!0,!1,h);l.multiply(b.Ra.A.D,h,h);c[0]=h[4];c[1]=h[5];c[2]=h[6];c[3]=h[7];r.multiply(c,m,c);l.set_scale(A*h[3],a.A.D);m=l.get_trans_view(a.A.D);l.transform_vec3(e,h,m);break;case 3:m=l.get_trans_view(a.A.D);c=l.get_quat_view(a.A.D);e=l.get_trans_view(b.Ra.A.D);h=b.influence;b.bK?(A=l.vb(b.Ra.A.D,N),A=E.transformQuat(F.AXIS_Z,A,y)):
A=F.AXIS_Z;F.bx(m,c,e,b.xJ);e=E.subtract(e,m,D);E.normalize(e,e);F.fU(c,b.pe,A,e);e=l.vb(b.rd,N);r.slerp(e,c,h,c);l.set_trans(m,b.rd);break;case 5:m=l.get_trans_view(a.A.D);c=l.get_quat_view(a.A.D);e=l.get_trans_view(b.Ra.A.D);F.bx(m,c,e,F.AXIS_MZ);c=E.dist(m,e);if(c=c>b.dist_max?c-b.dist_max:c<b.Tz?c-b.Tz:0)E.sub(e,m,y),E.normalize(y,y),E.scale(y,c,y),E.add(m,y,m);break;case 7:h=b.Ra.A.D;m=l.get_trans_view(a.A.D);e=l.Lb(b.Ea,y);l.transform_vec3(e,h,m);l.set_quat(l.get_quat_view(a.A.D),b.rd);break;
case 8:A=l.get_trans_view(b.Ra.A.D);m=l.get_trans_view(a.A.D);c=b.axes;d=l.Lb(b.Ea,y);e=E.set(0,0,0,D);b.Pp&&E.add(e,d,e);h=b.influence;c[0]&&(m[0]=(1-h)*d[0]+h*(F.sign(c[0])*A[0]+e[0]));c[1]&&(m[1]=(1-h)*d[1]+h*(F.sign(c[1])*A[1]+e[1]));c[2]&&(m[2]=(1-h)*d[2]+h*(F.sign(c[2])*A[2]+e[2]));l.set_quat(l.get_quat_view(a.A.D),b.rd);break;case 9:c=b.axes;d=l.vb(b.Ra.A.D,N);m=F.gU(d,b.vi,D);F.bF(m,b.vi);c[0]?(b.Pp&&(h=E.set(b.vi[0],0,0,y),F.YB(m,h,m)),m[0]*=F.sign(c[0])):m[0]=b.vi[0];c[1]?(b.Pp&&(h=E.set(0,
b.vi[1],0,y),F.YB(m,h,m)),m[1]*=F.sign(c[1])):m[1]=b.vi[1];c[2]?(b.Pp&&(h=E.set(0,0,b.vi[2],y),F.YB(m,h,m)),m[2]*=F.sign(c[2])):m[2]=b.vi[2];F.bF(m,b.vi);h=b.influence;m=F.euler_to_quat(m,N);e=l.vb(b.rd,M);r.slerp(e,m,h,l.get_quat_view(a.A.D));l.set_trans(l.get_trans_view(a.A.D),b.rd);break;case 11:h=b.influence;A=l.Lb(b.Ra.A.D,y);d=l.vb(b.Ra.A.D,N);m=l.Lb(b.Ea,D);e=l.vb(b.Ea,M);F.$t(m,A,h,l.get_trans_view(a.A.D));r.slerp(e,d,h,l.get_quat_view(a.A.D));l.set_trans(l.get_trans_view(a.A.D),b.rd);break;
case 16:c=l.get_quat_view(a.A.D);h=b.Ra.A.D;d=l.get_quat_view(b.Ra.A.D);e=l.Lb(b.Ea,D);m=l.vb(b.Ea,N);r.multiply(d,m,c);m=l.get_trans_view(a.A.D);l.transform_vec3(e,h,m);break;case 13:l.multiply(b.Ra.A.D,b.Ea,a.A.D);break;case 14:m=b.Ea;h=B;H.get_bone_tsr(b.Ra,b.yk,!0,!1,h);l.multiply(b.Ra.A.D,h,h);l.multiply(h,m,a.A.D);break;case 17:c=b.Ra,h=z.sR(c),m=l.get_trans_view(a.A.D),d=z.qv(h,"LEFT"),g=z.qv(h,"RIGHT"),e=z.qv(h,"TOP"),A=z.qv(h,"BOTTOM"),n="heights"==b.hor_units?e-A:g-d,m[0]=b.hw?d+n*b.Tr:
g-n*b.Tr,d="heights"==b.vert_units?e-A:g-d,m[1]=b.dy?e-d*b.Us:A+d*b.Us,z.CS(h)?m[2]=-b.distance:(m[2]=-1,E.normalize(m,m),E.scale(m,b.distance/Math.abs(m[2]),m)),l.transform_dir_vec3(m,c.A.D,m),h=l.get_trans_view(c.A.D),E.add(h,m,m),e=l.get_quat_view(a.A.D),c=l.get_quat_view(c.A.D),m=l.vb(b.Ea,M),r.multiply(c,m,e)}"CAMERA"==a.A.type&&a.A.pb!=z.MS_STATIC&&(m=a.A.pe,12==b.type&&(d=l.get_quat_view(b.Ra.A.D),m=E.transformQuat(m,d,J)),z.IJ(a),z.correct_up(a,m))}function t(a,b){switch(b.type){case 18:var d=
b.target.A.D,c=B;l.invert(a.A.D,c);l.multiply(c,d,c);H.set_bone_tsr(a,b.yk,c,!1)}a.rB=!0}function q(a,b){for(var d=0;d<a.length;d++){var c=a[d];if(!q(c.ve,b)||c.name==b.name)return!1}return!0}var G=u("__physics"),H=u("__armature"),z=u("__camera"),l=u("__tsr"),F=u("__util"),r=u("__quat"),E=u("__vec3");a.LX=1;a.KX=2;a.PX=3;a.HX=5;a.MX=7;a.GX=8;a.JX=12;a.EX=13;a.FX=14;a.IX=15;a.NX=16;a.OX=17;a.DX=18;var w=new Float32Array(2),f=new Float32Array(2),y=new Float32Array(3),D=new Float32Array(3),N=new Float32Array(4),
M=new Float32Array(4),B=l.create(),J=new Float32Array(3);a.bE=function(a,b,f,m,h){var A=e(1);A.Ra=b;A.Ea=l.create();m=m?m:r.create();l.set_trans(f,A.Ea);l.set_scale(h,A.Ea);l.set_quat(m,A.Ea);A.rd=new Float32Array(a.A.D);c(a,A);d(a,A,0)};a.XM=function(a,b,f,m,h,g){var A=e(2);A.Ra=b;A.yk=f;A.rd=new Float32Array(a.A.D);A.Ea=l.create();l.set_trans(new Float32Array(m),A.Ea);l.set_quat(new Float32Array(h),A.Ea);l.set_scale(g,A.Ea);c(a,A);d(a,A,0)};a.VM=function(a,b,f,m,h,g,n,S){var A=e(12),w=l.get_quat_view(a.A.D),
y=l.get_quat_view(b.A.D);m?(r.copy(m,w),r.multiply(y,w,w)):m=r.create();A.Ra=b;A.Ea=l.create();l.set_trans(f,A.Ea);l.set_quat(m,A.Ea);A.DB=new Float32Array(y);A.TE=F.angle_wrap_0_2pi(h);A.VE=F.angle_wrap_0_2pi(g);A.WE=F.angle_wrap_periodic(n,-Math.PI,Math.PI);A.SE=F.angle_wrap_periodic(S,-Math.PI,Math.PI);A.rd=new Float32Array(a.A.D);c(a,A);d(a,A,0)};a.UM=function(a,b,f,m){var h=e(15);h.Ra=b;h.$I=m;h.rd=new Float32Array(a.A.D);h.Ea=l.create();l.set_trans(new Float32Array(f),h.Ea);c(a,h);d(a,h,0)};
a.ZM=function(a,b,f,m){var h=e(16);h.Ra=b;h.rd=new Float32Array(a.A.D);h.Ea=l.create();l.set_trans(new Float32Array(f),h.Ea);l.set_quat(new Float32Array(m),h.Ea);l.set_scale(1,h.Ea);c(a,h);d(a,h,0)};a.m_=b;a.$M=n;a.RM=function(a,b,f,m){var h=e(5);h.Ra=b;h.Tz=f;h.dist_max=m;h.rd=new Float32Array(a.A.D);c(a,h);d(a,h,0)};a.YM=function(a,b,f){var m=e(7);m.Ra=b;m.Ea=l.create();m.rd=new Float32Array(a.A.D);l.set_trans(new Float32Array(f),m.Ea);c(a,m);d(a,m,0)};a.MM=g;a.NM=p;a.OM=k;a.zY=x;a.AY=v;a.append_stiff_viewport=
h;a.DW=function(a,b){a.uc&&d(a,a.uc,b)};a.xW=function(a,b){var d=a.A.fg[b];d.uc&&t(a,d.uc)};a.$N=function(a){return a.uc?!0:!1};a.remove=function(a,d){a.uc.Ra&&b(a.uc.Ra,a);d&&l.copy(a.uc.rd,a.A.D);a.uc=null};a.DZ=function(a){return a.uc?a.uc.type:null};a.Vg=function(a){a=a.uc;return!a||13!=a.type&&14!=a.type?!1:!0};a.pv=function(a){if((a=a.uc)&&13==a.type)return a.Ra.A.D;if(a&&14==a.type){var b=B;H.get_bone_tsr(a.Ra,a.yk,!0,!1,b);l.multiply(a.Ra.A.D,b,b);return b}return null};a.Tg=function(a){a=
a.uc;return!a||13!=a.type&&14!=a.type?null:a.Ea};a.bU=function(a,b){for(var d=b.A,c=0;c<a.constraints.length;c++){var f=a.constraints[c],A=f.type;if(f.target){var r=f.target.Ha;if("COPY_LOCATION"==A){var A=new Float32Array(l.get_trans_view(b.A.D)),S=new Float32Array(f.axes);g(b,r,A,S,f.use_offset,f.influence)}else if("COPY_ROTATION"==A)S=new Float32Array(f.axes),p(b,r,S,f.use_offset,f.influence);else if("COPY_TRANSFORMS"==A)k(b,r,f.influence);else if("TRACK_TO"==A){A=f.track_axis;if("TRACK_Y"==A)var w=
F.AXIS_Y;else"TRACK_NEGATIVE_Y"==A?w=F.AXIS_MY:"TRACK_X"==A?w=F.AXIS_X:"TRACK_NEGATIVE_X"==A?w=F.AXIS_MX:"TRACK_Z"==A?w=F.AXIS_Z:"TRACK_NEGATIVE_Z"==A&&(w=F.AXIS_MZ);A=f.up_axis;if("UP_X"==A)var y=F.AXIS_X;else"UP_Y"==A?y=F.AXIS_Y:"UP_Z"==A&&(y=F.AXIS_Z);n(b,r,w,y,f.use_target_z,f.influence)}}}if(b.parent){!b.ml&&b.pd.et&&b.parent.pd.et&&(b.Op=!1);f=!1;for(c=0;c<b.S.length;c++)if(b.S[c].lb.Ac){f=!0;break}if(f&&G.aS(b))c=b.ml?l.copy(d.D,l.create()):d.D,l.multiply(b.parent.A.D,c,d.D);else if(b.ml||
!b.es)if(c=l.copy(d.D,l.create()),b.wy&&"CAMERA"==b.parent.type){c={distance:b.wy.distance,rotation:l.get_quat_view(c)};switch(b.wy.HM){case "TOP_LEFT":c.top=0;c.left=0;break;case "TOP":c.top=0;c.left=.5;break;case "TOP_RIGHT":c.top=0;c.right=0;break;case "LEFT":c.top=.5;c.left=0;break;case "CENTER":c.top=.5;c.left=.5;break;case "RIGHT":c.top=.5;c.right=0;break;case "BOTTOM_LEFT":c.bottom=0;c.left=0;break;case "BOTTOM":c.bottom=0;c.left=.5;break;case "BOTTOM_RIGHT":c.bottom=0,c.right=0}h(b,b.parent,
c)}else x(b,b.parent,c);else c=l.copy(d.D,l.create()),v(b,b.parent,b.es,c)}if("ARMATURE"==b.type)for(d=a.pose.bones,c=0;c<d.length;c++)if(f=d[c],w=f.constraints)for(y=0;y<w.length;y++)if(A=w[y],"COPY_TRANSFORMS"==A.type&&!A.subtarget&&!A.mute){var r=A.target.Ha,A=b,S=r,q=F.Wy,D=F.xt,r=e(18);r.yk=f.name;r.target=S;r.Ea=l.create();l.set_trans(new Float32Array(q),r.Ea);l.set_quat(new Float32Array(D),r.Ea);l.set_scale(1,r.Ea);for(var S=A,q=r,D=q.target,B=q.yk,E=S.A.fg[B],C=D.Ez,J=0;J<C;J++){var z=C[J];
if(z[0]==S&&z[1]==B){C.splice(J,1);break}}D.Ez.push([S,B]);E.uc=q;t(A,r)}};a.xh=function(a,b){return q(a.ve,b)};a.yh=function(a,b){return a.name!=b.name}};b4w.module.__container=function(a,u){var e,c,b;function n(){w.getBoundingClientRect()}function g(a,b,d,c){F.EG?(d=d.getBoundingClientRect(),c[0]=a-d.left,c[1]=b-d.top):(D.clientX=a,D.clientY=b,D.view=window,a=new MouseEvent("b4w_convert",D),d.dispatchEvent(a),c[0]=a.offsetX,c[1]=a.offsetY);return c}function p(a,b,d,c){a.style.width=d+"px";a.style.height=c+"px";b&&(b.style.width=d+"px",b.style.height=c+"px")}function k(a,b,c){var e=w,g=f;c&&p(e,g,a,b);g&&(g.width=a,g.height=b,d.rn());c=Math.floor(a*
F.canvas_resolution_factor);b=Math.floor(b*F.canvas_resolution_factor);e.width=c;e.height=b;var g=Math.min(E.drawingBufferWidth,r.bB,r.gB[0]),A=Math.min(E.drawingBufferHeight,r.bB,r.gB[1]);if(c>g||b>A)t.warn("Canvas size exceeds platform limits, downscaling"),g=Math.min(g/c,g/b),c*=g,b*=g;e.width=Math.floor(c);e.height=Math.floor(b);q.MI(e.width,e.height,a?c/a:1);q.Pa()&&z.V(q.get_active().bj);h.MW(e.width,e.height);h.is_primary_loaded()&&(x.update(),q.update(H.get_timeline(),0),x.RJ())}var x=u("__anchors"),
v=u("__config"),h=u("__data"),d=u("__hud"),t=u("__print"),q=u("__scenes"),G=u("__subscene"),H=u("__time"),z=u("__transform"),l=u("__util"),F=v.L,r=v.zh,E=null,w=null,f=null,y=null,D={clientX:0,clientY:0};c=e=0;b=1;a.yg=function(a){E=a};a.get_canvas=function(){return w};a.get_canvas_hud=function(){return f};a.get_container=function(){return y};a.init=function(a,b){a&&a.parentNode?(w=a,f=b,y=a.parentNode):l.K("canvas container is not available")};a.insert_to_container=function(a,b){b=b||"LAST";switch(b){case "FIRST":y.insertBefore(a,
y.firstElementChild);break;case "JUST_BEFORE_CANVAS":y.insertBefore(a,w);break;case "JUST_AFTER_CANVAS":w.nextElementSibling?y.insertBefore(a,w.nextElementSibling):y.appendChild(a,w);break;case "LAST":y.appendChild(a,w);break;default:t.error(b+" invalid stack order")}};a.tG=function(){return e};a.sG=function(){return c};a.set_canvas_offsets=function(){};a.update_canvas_offsets=n;a.yV=function(a,d,f){e=a;c=d;b=f;n()};a.force_offsets_updating=function(){};a.client_to_canvas_coords=function(a,b,d){return g(a,
b,w,d)};a.get_coords_target_space=function(a,b,d){a.constructor==MouseEvent?(d[0]=a.offsetX,d[1]=a.offsetY):a.constructor==TouchEvent?(b="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches,g(b[0].clientX,b[0].clientY,a.target,d)):(d[0]=-1,d[1]=-1);return d};a.client_to_element_coords=g;a.Iq=function(a,d,c,f){c||(c=new Float32Array(2));c[0]=a*b;c[1]=d*b;f&&(a=f.width/e,c[0]*=a,c[1]*=a);return c};a.qX=function(a,d,c,f){c||(c=new Float32Array(2));c[0]=a/b;c[1]=d/b;f&&(a=f.width/e,c[0]/=a,
c[1]/=a)};a.PG=function(b){return b&&b.parentNode?b.parentNode==y?!0:a.PG(b.parentNode):!1};a.UG=function(){return F.allow_hidpi&&2<=window.devicePixelRatio?!0:!1};a.DQ=function(a){var b=document.getElementsByTagName("script");a=l.Ii(a);for(var d=0;d<b.length;d++)if(b[d].src==a)return b[d];return null};a.resize=k;a.resize_to_container=function(a){var b=y,d=w,c=b.clientWidth,b=b.clientHeight;if(a||c!=d.clientWidth||b!=d.clientHeight){a=d.width;d=d.height;p(w,f,c,b);if(q.Pa()){var h=q.get_active();
if((h=q.Tb(h,G.Hg))&&h.enable_hmd_stereo){k(a,d,!1);return}}k(c,b,!1)}};a.reset=function(){y=f=w=E=null}};b4w.module.__controls=function(a,u){function e(a,b){b||(b=t.get_container());return{type:a,value:0,ea:null,element:b,Va:!1,key:0,Jb:"",ii:!1,Cz:null,Bz:function(){},Az:null,aF:function(){},Qi:null,from:new Float32Array(3),to:new Float32Array(3),MG:!1,Sv:!1,ts:0,fI:function(){},axis:"",Dg:0,Hp:new Float32Array(3),ax:new Float32Array(4),threshold:0,dI:new Float32Array(4),Vt:0,Ut:0,pI:0,Wt:0,wg:0,repeat:!1,JF:!1,gamepad_id:0,position:w.create(),orientation:l.create(),callback:function(){}}}function c(a){function b(){return{Ck:new Float32Array(2),
Io:!0,obj:null,identifier:-1,Si:0}}a||(a=t.get_container());for(var d=0;d<J.length;d++){var c=J[d];if(a==c.element)return c}c={element:a,Nr:!0,Ef:0,NA:!0,Aw:0,Bw:0,Xm:0,Ym:0,ls:0,ms:0,Uh:new Float32Array(2),Je:new Float32Array(2),Vh:new Float32Array(2),df:new Float32Array(2),ey:0,LC:0,wJ:0,zf:new Uint8Array(256),Cy:0,vA:null,Hi:b(),hk:Array(10),OA:!1,vG:l.create(),Iv:0,Hv:0,Gv:0,yA:0,xA:0,Fv:Infinity,zB:null,yB:null,nB:null,jB:null,lB:null,JC:null,IC:null,mB:null,kB:null,IB:null,b_:null,KC:null,HC:null,
GC:null,Tj:{}};for(d=0;10>d;++d)c.hk[d]=b();c.zB=function(a){c.OA||(q.XR(a,c.vG),c.OA=!0)};c.yB=function(a){a=w.copy(a,X);c.Gv=a[0];c.Hv=a[1];c.Iv=a[2];Infinity==c.Fv&&(c.Fv=a[0],c.xA=a[1],c.yA=a[2])};c.nB=function(a){c.Cy+=a*f.uT};c.jB=function(a){var b=q.get_device_by_type_element(q.DEVICE_MOUSE,c.element),b=q.get_vector_param(b,q.MOUSE_LOCATION,C);c.Aw=b[0];c.Bw=b[1];c.Xm=b[0];c.Ym=b[1];if(3==c.Ef||0==c.Ef)c.Ef=1;c.which=a};c.lB=function(){var a=q.get_device_by_type_element(q.DEVICE_MOUSE,c.element),
a=q.get_vector_param(a,q.MOUSE_LOCATION,C),a=t.client_to_canvas_coords(a[0],a[1],C);c.Hi.Io=!1;c.Hi.Ck[0]=a[0];c.Hi.Ck[1]=a[1]};c.JC=function(a){for(var b=0;b<a.length;++b){for(var d=a[b],m=null,f=null,h=0;h<c.hk.length;h++){var e=c.hk[h],g=3==e.Si||0==e.Si;if(e.identifier==d.identifier){g&&(f=e);break}else!m&&g&&(m=e,m.identifier=d.identifier)}if(d=f||m)m=t.client_to_canvas_coords(a[b].clientX,a[b].clientY,C),d.Io=!1,d.Si=1,d.Ck[0]=m[0],d.Ck[1]=m[1]}};c.IC=function(a){for(var b=0;b<c.hk.length;++b){for(var d=
c.hk[b],m=!1,f=0;f<a.length;++f)if(a[f].identifier==d.identifier){m=!0;break}m||(0!=d.Si&&(d.Si=3),d.obj=null)}};c.mB=function(a){var b=q.get_device_by_type_element(q.DEVICE_MOUSE,c.element),b=q.get_vector_param(b,q.MOUSE_LOCATION,C);c.Aw=b[0];c.Bw=b[1];c.Xm=b[0];c.Ym=b[1];0!=c.Ef&&(c.Ef=3);c.which=a};c.kB=function(a){y.Rv&&0==c.Ef||(c.Xm=a[0],c.Ym=a[1])};c.IB=function(a){c.ls+=a[0];c.ms+=a[1]};c.$G=function(a){2!=c.zf[a]&&(c.zf[a]=1,c.Nr=!1)};c.bH=function(){for(var a=0;a<c.zf.length;a++)0!=c.zf[a]&&
(c.zf[a]=3,c.Nr=!1)};c.cH=function(a){c.Nr=!1;c.zf[a]=3};c.KC=function(a){c.NA=!1;if(1==a.length)c.Uh[0]=a[0].clientX,c.Uh[1]=-1,c.Vh[0]=a[0].clientY,c.Vh[1]=-1;else if(1<a.length){c.ey=c.LC=v(a);c.Uh[0]=a[0].clientX;c.Uh[1]=a[1].clientX;c.Vh[0]=a[0].clientY;c.Vh[1]=a[1].clientY;var b=a[0];a=a[1];c.wJ=Math.atan2(b.clientY-a.clientY,b.clientX-a.clientX)}c.Je.set(c.Uh);c.df.set(c.Vh)};c.HC=function(a){1===a.length?(c.Je[0]=a[0].clientX,c.Je[1]=-1,c.df[0]=a[0].clientY,c.df[1]=-1):1<a.length&&(c.Je[0]=
a[0].clientX,c.Je[1]=a[1].clientX,c.df[0]=a[0].clientY,c.df[1]=a[1].clientY,c.ey=v(a))};c.GC=function(a){0==a.length&&(c.NA=!0)};J.push(c);return c}function b(a,b){if(b in a.Tj&&0<a.Tj[b])a.Tj[b]+=1;else switch(a.Tj[b]=1,b){case "orientation_quat":var d=q.get_device_by_type_element(q.DEVICE_GYRO);d&&q.attach_param_cb(d,q.GYRO_ORIENTATION_ANGLES,a.zB);break;case "orientation_angles":(d=q.get_device_by_type_element(q.DEVICE_GYRO))&&q.attach_param_cb(d,q.GYRO_ORIENTATION_ANGLES,a.yB);break;case "mouse_wheel":(d=
q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.attach_param_cb(d,q.MOUSE_WHEEL,a.nB);break;case "mouse_down_which":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.attach_param_cb(d,q.MOUSE_DOWN_WHICH,a.jB);break;case "mouse_select":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.attach_param_cb(d,q.MOUSE_DOWN_WHICH,a.lB);break;case "touch_select":if(d=q.get_device_by_type_element(q.DEVICE_TOUCH,a.element))q.attach_param_cb(d,q.TOUCH_START,a.JC),q.attach_param_cb(d,
q.TOUCH_END,a.IC);break;case "mouse_up_which":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.attach_param_cb(d,q.MOUSE_UP_WHICH,a.mB);break;case "mouse_location":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.attach_param_cb(d,q.MOUSE_LOCATION,a.kB);break;case "mouse_pointerlock":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.attach_param_cb(d,q.tD,a.IB);break;case "keyboard_downed_keys":if(d=q.get_device_by_type_element(q.DEVICE_KEYBOARD,a.element))q.attach_param_cb(d,
q.KEYBOARD_DOWN,a.$G),q.attach_param_cb(d,q.sD,a.bH),q.attach_param_cb(d,q.KEYBOARD_UP,a.cH);break;case "touch_start":(d=q.get_device_by_type_element(q.DEVICE_TOUCH,a.element))&&q.attach_param_cb(d,q.TOUCH_START,a.KC);break;case "touch_move":(d=q.get_device_by_type_element(q.DEVICE_TOUCH,a.element))&&q.attach_param_cb(d,q.TOUCH_MOVE,a.HC);break;case "touch_end":(d=q.get_device_by_type_element(q.DEVICE_TOUCH,a.element))&&q.attach_param_cb(d,q.TOUCH_END,a.GC)}}function n(a,b){if(b in a.Tj&&0<a.Tj[b]&&
(--a.Tj[b],!a.Tj[b]))switch(b){case "orientation_quat":var d=q.get_device_by_type_element(q.DEVICE_GYRO);d&&q.detach_param_cb(d,q.GYRO_ORIENTATION_QUAT,a.zB);break;case "orientation_angles":(d=q.get_device_by_type_element(q.DEVICE_GYRO))&&q.detach_param_cb(d,q.GYRO_ORIENTATION_ANGLES,a.yB);break;case "mouse_wheel":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.detach_param_cb(d,q.MOUSE_WHEEL,a.nB);break;case "mouse_down_which":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&
q.detach_param_cb(d,q.MOUSE_DOWN_WHICH,a.jB);break;case "mouse_select":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.detach_param_cb(d,q.MOUSE_DOWN_WHICH,a.lB);break;case "touch_select":if(d=q.get_device_by_type_element(q.DEVICE_TOUCH,a.element))q.detach_param_cb(d,q.TOUCH_START,a.JC),q.detach_param_cb(d,q.TOUCH_END,a.IC);break;case "mouse_up_which":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.detach_param_cb(d,q.MOUSE_UP_WHICH,a.mB);break;case "mouse_location":(d=
q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.detach_param_cb(d,q.MOUSE_LOCATION,a.kB);break;case "mouse_pointerlock":(d=q.get_device_by_type_element(q.DEVICE_MOUSE,a.element))&&q.detach_param_cb(d,q.tD,a.IB);break;case "keyboard_downed_keys":if(d=q.get_device_by_type_element(q.DEVICE_KEYBOARD,a.element))q.detach_param_cb(d,q.KEYBOARD_DOWN,a.$G),q.detach_param_cb(d,q.sD,a.bH),q.detach_param_cb(d,q.KEYBOARD_UP,a.cH);break;case "touch_start":(d=q.get_device_by_type_element(q.DEVICE_TOUCH,
a.element))&&q.detach_param_cb(d,q.TOUCH_START,a.KC);break;case "touch_move":(d=q.get_device_by_type_element(q.DEVICE_TOUCH,a.element))&&q.detach_param_cb(d,q.TOUCH_MOVE,a.HC);break;case "touch_end":(d=q.get_device_by_type_element(q.DEVICE_TOUCH,a.element))&&q.detach_param_cb(d,q.TOUCH_END,a.GC)}}function g(a,b){a.value=Number(b)}function p(a){for(var b=a.Wj,d=a.PU,c=0;c<b.length;c++)d[c]=b[c].value;return a.hT(d)}function k(a,b){a=a||N;var d=a.Th;if(d){var c=a.ln;if(b){var m=d[b];if(m){for(var f=
m.Wj,h=0;h<f.length;h++){var e=f[h],g;g=M.indexOf(e);g=-1<g?B[g]:[];1==g.length?(x(e),e=M.indexOf(e),-1<e?(M.splice(e,1),B.splice(e,1)):E.K("Sensors cache is corrupted")):1<g.length&&g.splice(g.indexOf(m),1)}delete d[b];h=c.indexOf(m);-1<h?c.splice(h,1):E.K("Incorrect manifolds array");Object.getOwnPropertyNames(d).length||(d=D.indexOf(a),-1<d?D.splice(d,1):H.error("Wrong object"))}}else{c=[];for(h in d)c.push(h);for(h=0;h<c.length;h++)k(a,c[h])}K=!0}}function x(a){switch(a.type){case 90:z.remove_collision_test(a.Cz,
a.Jb,a.Bz);a.Va=!0;break;case 100:z.clear_collision_impulse_test(a.Az);a.Va=!0;break;case 110:z.remove_ray_test(a.ts);a.Va=!0;break;case 140:a.Va=!0;break;case 20:var b=c(a.element);n(b,"keyboard_downed_keys");a.Va=!0;break;case 30:b=c(a.element);n(b,"mouse_wheel");a.Va=!0;break;case 40:b=c(a.element);n(b,"mouse_down_which");n(b,"mouse_up_which");n(b,"mouse_location");a.Va=!0;break;case 280:b=c(a.element);n(b,"mouse_pointerlock");a.Va=!0;break;case 50:b=c(a.element);n(b,"mouse_down_which");n(b,"mouse_up_which");
a.Va=!0;break;case 60:b=c(a.element);n(b,"touch_start");n(b,"touch_move");n(b,"touch_end");a.Va=!0;break;case 70:b=c(a.element);n(b,"touch_start");n(b,"touch_move");a.Va=!0;break;case 75:b=c(a.element);n(b,"touch_start");n(b,"touch_move");a.Va=!0;break;case 80:b=c(a.element);n(b,"touch_start");n(b,"touch_end");a.Va=!0;break;case 170:b=c(a.element);n(b,"mouse_select");n(b,"touch_select");n(b,"touch_start");n(b,"touch_end");n(b,"mouse_down_which");n(b,"mouse_up_which");a.Va=!0;break;case 180:case 190:b=
c(a.element);n(b,"orientation_angles");a.Va=!0;break;case 200:b=c(a.element);n(b,"orientation_quat");a.Va=!0;break;case 210:case 220:a.Va=!0}}function v(a){var b=a[0],d=a[1];a=b.clientX-d.clientX;b=b.clientY-d.clientY;return Math.sqrt(a*a+b*b)}function h(a){return 0==a?q.get_device_by_type_element(q.tt):1==a?q.get_device_by_type_element(q.Ky):2==a?q.get_device_by_type_element(q.Ly):q.get_device_by_type_element(q.My)}var d=u("__config"),t=u("__container"),q=u("__input"),G=u("__objects"),H=u("__print"),
z=u("__physics"),l=u("__quat"),F=u("__time"),r=u("__tsr"),E=u("__util"),w=u("__vec3"),f=d.controls,y=d.L,D=[],N={},M=[],B=[],J=[],C=new Float32Array(2),A=new Float32Array(2),X=w.create(),m=l.create(),K=!1,R=0;a.CT_POSITIVE=10;a.CT_CONTINUOUS=20;a.CT_TRIGGER=30;a.CT_SHOT=40;a.CT_LEVEL=50;a.CT_CHANGE=60;a.PL_SINGLE_TOUCH_MOVE=0;a.PL_MULTITOUCH_MOVE_ZOOM=1;a.PL_MULTITOUCH_MOVE_PAN=2;a.PL_MULTITOUCH_MOVE_ROTATE=3;var O=1;a.update=function(b,d){for(var f=0;f<J.length;f++){var e=J[f];e.Hi.Io||(e.Hi.obj=
G.pick_object(e.Hi.Ck[0],e.Hi.Ck[1]),e.Hi.Io=!0,e.vA=e.Hi.obj);for(var n=0;10>n;++n){var k=e.hk[n];k.Io||(k.obj=G.pick_object(k.Ck[0],k.Ck[1]),k.Io=!0,e.vA=k.obj)}}for(f=0;f<M.length;f++)if(e=M[f],k=b,n=d)switch(e.type){case 120:var t=e.Qi,S=r.Lb(t.A.D,X),t=r.vb(t.A.D,m),B=w.dist(e.Hp,S),z=e.dI;l.invert(e.ax,z);l.multiply(t,z,z);l.normalize(z,z);z=Math.abs(2*Math.acos(z[3]));B/=n;e.Vt=E.smooth(B,e.Vt,n,.3);e.ea[0]=B;B=z/n;e.Ut=E.smooth(B,e.Ut,n,.3);e.ea[1]=B;e.Vt>=e.threshold||e.Ut>=e.pI?g(e,1):g(e,
0);w.copy(S,e.Hp);l.copy(t,e.ax);e.Dg=k;break;case 130:t=e.Qi;S=r.Lb(t.A.D,X);t=Math.abs(S[1]-e.Hp[1])/n;e.Wt=E.smooth(t,e.Wt,n,.3);e.ea=t;e.Wt>=e.threshold?g(e,1):g(e,0);w.copy(S,e.Hp);e.Dg=k;break;case 140:!e.Va&&0<=e.wg&&k-e.Dg>=e.wg&&(g(e,1),e.repeat?e.Dg=k:e.wg=-e.wg);break;case 150:e.Dg||(e.Dg=k);g(e,k-e.Dg);e.Dg=k;break;case 160:g(e,k);break;case 180:k=c(e.element);e.ea[0]=k.Iv-k.yA;e.ea[1]=k.Hv-k.xA;e.ea[2]=k.Gv-k.Fv;break;case 190:k=c(e.element);e.ea[0]=k.Iv;e.ea[1]=k.Hv;e.ea[2]=k.Gv;break;
case 200:k=c(e.element);l.copy(k.vG,e.ea);break;case 210:n=q.get_device_by_type_element(q.DEVICE_HMD);q.get_vector_param(n,q.HMD_ORIENTATION_QUAT,e.ea);break;case 220:n=q.get_device_by_type_element(q.DEVICE_HMD);q.get_vector_param(n,q.HMD_POSITION,e.ea);break;case 240:n=h(e.gamepad_id);e.value=q.AR(n,e.key);break;case 250:n=h(e.gamepad_id);e.value=q.zR(n,e.key);break;case 260:n=h(e.gamepad_id);q.get_gamepad_position(n,e.ea);g(e,1);break;case 270:n=h(e.gamepad_id);q.get_gamepad_orientation(n,e.ea);
g(e,1);break;case 230:g(e,e.callback());break;case 30:k=c(e.element);g(e,k.Cy);break;case 40:k=c(e.element);if(!y.Rv||1==k.Ef||2==k.Ef)switch(S=k.Xm-k.Aw,t=k.Ym-k.Bw,e.ea.coords[0]=k.Xm,e.ea.coords[1]=k.Ym,e.axis){case "X":g(e,S);break;case "Y":g(e,t);break;case "XY":n=Math.sqrt(S*S+t*t),g(e,n)}break;case 280:k=c(e.element);S=k.ls;t=k.ms;B=E.smooth(S,0,n,.1*O);n=E.smooth(t,0,n,.1*O);.01<Math.abs(S)||.01<Math.abs(t)?(k.ls-=B,k.ms-=n,e.ea.coords[0]=B,e.ea.coords[1]=n):(e.ea.coords[0]=0,e.ea.coords[1]=
0);g(e,Math.sqrt(S*S+t*t));break;case 50:k=c(e.element);g(e,0!=k.Ef|0);e.ea.which=k.which;e.ea.coords[0]=k.Xm;e.ea.coords[1]=k.Ym;break;case 170:k=c(e.element);g(e,0);if(e.JF)k.vA==e.Qi&&g(e,1);else if(0!=k.Ef&&k.Hi.obj==e.Qi)g(e,1);else for(n=0;10>n;++n)if(S=k.hk[n],0!=S.Si&&S.obj==e.Qi){g(e,1);break}break;case 20:k=c(e.element);e.ea=k.zf[e.key];1==e.ea||k.zf[0]&&16==e.key?g(e,1):e.ea||g(e,0);break;case 60:k=c(e.element);if(-1==k.Je[1]&&-1==k.df[1]){S=k.Je[0]-k.Uh[0];t=k.df[0]-k.Vh[0];n=Math.sqrt(S*
S+t*t);if(-1!=k.Uh[1]&&-1!=k.Vh[1]){var B=k.Je[0]-k.Uh[1],z=k.df[0]-k.Vh[1],x=Math.sqrt(B*B+z*z);x<n&&(S=B,t=z,n=x)}e.ea.gesture=a.PL_SINGLE_TOUCH_MOVE}else n=C,n[0]=(k.Je[0]+k.Je[1])/2,n[1]=(k.df[0]+k.df[1])/2,t=A,t[0]=(k.Uh[0]+k.Uh[1])/2,t[1]=(k.Vh[0]+k.Vh[1])/2,S=n[0]-t[0],t=n[1]-t[1],n=Math.sqrt(S*S+t*t),e.ea.gesture=a.PL_MULTITOUCH_MOVE_PAN;e.ea.coords[0]=k.Je[0];e.ea.coords[1]=k.df[0];switch(e.axis){case "X":g(e,S);break;case "Y":g(e,t);break;case "XY":g(e,n)}break;case 70:k=c(e.element);n=
k.ey-k.LC;e.ea=a.PL_MULTITOUCH_MOVE_ZOOM;g(e,n);break;case 75:k=c(e.element);-1!=k.Je[1]&&(n=Math.atan2(k.df[0]-k.df[1],k.Je[0]-k.Je[1]),e.ea=a.PL_MULTITOUCH_MOVE_ROTATE,g(e,n-k.wJ));break;case 80:k=c(e.element),e.ea.coords[0]=k.Je[0],e.ea.coords[1]=k.df[0],k.NA?g(e,0):g(e,1)}for(f=0;f<D.length;f++)for(k=D[f],e=k.ln,n=0;n<e.length;n++)if(S=e[n],S.Il!=R){S.Il=R;z=S;t=0;switch(z.type){case a.CT_POSITIVE:t=(B=p(z))?1:0;break;case a.CT_CONTINUOUS:t=z.Hj;(B=p(z))?(t=1,z.Hj=1):1==t?(t=-1,z.Hj=-1):t=0;break;
case a.CT_TRIGGER:t=z.Hj;(B=p(z))&&-1==t?(t=1,z.Hj=1):B||1!=t?t=0:(t=-1,z.Hj=-1);break;case a.CT_SHOT:t=z.Hj;(B=p(z))&&-1==t?(t=1,z.Hj=1):B||1!=t?t=0:(t=0,z.Hj=-1);break;case a.CT_LEVEL:B=p(z);z.eH!=B?(t=1,z.eH=B):t=0;break;case a.CT_CHANGE:B=z.Wj;z=z.KS;for(x=0;x<B.length;x++){var v=B[x].value;t||v==z[x]||(t=1);z[x]=v}break;default:E.K("Wrong sensor manifold type: "+z.type)}if(t&&(B=k==N?null:k,K=!1,S.callback(B,S.id,t,S.NN),K)){f=-1;break}}for(f=0;f<D.length;f++)for(k=D[f],e=k.ln,n=0;n<e.length;n++)for(S=
e[n],k=S.Wj,S=0;S<k.length;S++)switch(t=k[S],t.type){case 30:g(t,0);break;case 40:g(t,0);break;case 60:g(t,0);break;case 70:g(t,0);break;case 75:g(t,0);break;case 80:g(t,0);break;case 140:g(t,0)}for(f=0;f<J.length;f++){e=J[f];if(!e.Nr){for(n=0;n<e.zf.length;n++)1==e.zf[n]?e.zf[n]=2:3==e.zf[n]&&(e.zf[n]=0);e.Nr=!0}1==e.Ef?e.Ef=2:3==e.Ef&&(e.Ef=0);for(n=0;n<e.hk.length;n++)k=e.hk[n],1==k.Si?k.Si=2:3==k.Si&&(k.Si=0);e.Cy=0;e.Aw=e.Xm;e.Bw=e.Ym;e.zf[0]=0;e.Uh.set(e.Je);e.Vh.set(e.df);e.LC=e.ey;e.yA=e.Iv;
e.xA=e.Hv;e.Fv=e.Gv;e.OA=!1}R++};a.create_custom_sensor=function(a){var b=e(10);g(b,a);return b};a.create_keyboard_sensor=function(a){var b=e(20,document);b.key=a;b.Va=!0;return b};a.create_gamepad_btn_sensor=function(a,b){var d=e(240,document);b=b||q.sv();d.gamepad_id=b;d.key=a;d.Va=!0;return d};a.create_gamepad_axis_sensor=function(a,b){var d=e(250,document);b=void 0==b?q.sv():b;d.gamepad_id=b;d.key=a;d.Va=!0;return d};a.create_gamepad_position_sensor=function(a){var b=e(260,document);a=void 0===
a?q.sv():a;b.gamepad_id=a;b.Va=!0;b.ea=w.create();return b};a.create_gamepad_orientation_sensor=function(a){var b=e(270,document);a=void 0===a?q.sv():a;b.gamepad_id=a;b.Va=!0;b.ea=l.create();return b};a.create_collision_sensor=function(a,b,d){if(!a||!z.sa(a))return H.error("Wrong collision object"),null;var c=e(90);c.Cz=a;c.Jb=b;c.ii=d;c.ea={coll_obj:null,coll_pos:d?new Float32Array(3):null,coll_norm:d?new Float32Array(3):null,coll_dist:0};c.Bz=function(a,b,d,e,m){g(c,a);a=c.ea;a.coll_obj=b;c.ii&&
(a.coll_pos.set(d),a.coll_norm.set(e),a.coll_dist=m)};c.Va=!0;return c};a.create_collision_impulse_sensor=function(a){if(!a||!a.N)return H.error("Wrong collision impulse object"),null;var b=e(100);b.Az=a;b.aF=function(a){g(b,a)};b.Va=!0;return b};a.create_ray_sensor=function(a,b,d,c,m,f,h){var A=e(110);A.Qi=a;A.from=b;A.to=d;A.Jb=c;A.MG=m;A.ii=f;A.Sv=h;A.ea={hit_fract:0,obj_hit:null,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),ts:0};A.fI=function(a,b,d,c,e,m){A.MG?g(A,-1==b?
0:1):g(A,b);A.ea.hit_fract=b;A.ea.obj_hit=d;A.ea.hit_time=c;A.ii&&(A.ea.hit_pos.set(e),A.ea.hit_norm.set(m))};A.Va=!0;return A};a.create_mouse_click_sensor=function(a){a=e(50,a);a.Va=!0;a.ea={coords:new Float32Array(2),which:null};return a};a.create_mouse_wheel_sensor=function(a){a=e(30,a);a.Va=!0;return a};a.create_mouse_move_sensor=function(a,b){var d=e(40,b);d.axis=a||"XY";d.ea={coords:new Float32Array(2)};d.Va=!0;return d};a.create_touch_move_sensor=function(a,b){var d=e(60,b);d.axis=a||"XY";
d.ea={coords:new Float32Array(2),gesture:0};d.Va=!0;return d};a.create_touch_zoom_sensor=function(a){a=e(70,a);a.ea=0;a.Va=!0;return a};a.create_touch_rotate_sensor=function(a){a=e(75,a);a.ea=0;a.Va=!0;return a};a.create_touch_click_sensor=function(a){a=e(80,a);a.ea={coords:new Float32Array(2)};a.Va=!0;return a};a.create_motion_sensor=function(a,b,d){if(!a)return H.error("Wrong collision object"),null;var c=e(120);c.Qi=a;var m=r.get_trans_view(a.A.D);a=r.get_quat_view(a.A.D);c.dI=new Float32Array(4);
c.Hp=new Float32Array(m);c.ax=new Float32Array(a);c.Vt=0;c.Ut=0;c.threshold=b||.1;c.pI=d||.1;c.Dg=0;c.ea=new Float32Array([0,0]);return c};a.create_vertical_velocity_sensor=function(a,b){if(!a)return H.error("Wrong collision object"),null;var d=e(130);d.Qi=a;var c=r.get_trans_view(a.A.D),m=r.get_quat_view(a.A.D);d.Hp=new Float32Array(c);d.ax=new Float32Array(m);d.Wt=0;d.threshold=b||1;d.Dg=0;d.ea=0;return d};a.create_timer_sensor=function(a,b){var d=e(140);d.wg=a;d.repeat=b;d.Va=!0;return d};a.reset_timer_sensor=
function(a,b,d,c){a=a||N;a=a.Th;if(!a||!a[b])return H.error("reset_timer_sensor(): wrong object"),null;b=a[b].Wj[d];if(!b)return H.error("reset_timer_sensor(): sensor not found"),null;b.Dg=F.get_timeline();b.wg=c};a.create_elapsed_sensor=function(){var a=e(150);a.Dg=0;return a};a.create_gyro_delta_sensor=function(){var a=e(180,window);a.ea=new Float32Array(3);q.get_device_by_type_element(q.DEVICE_GYRO)?g(a,1):g(a,0);a.Va=!0;return a};a.create_gyro_angles_sensor=function(){var a=e(190,window);a.ea=
new Float32Array(3);q.get_device_by_type_element(q.DEVICE_GYRO)?g(a,1):g(a,0);a.Va=!0;return a};a.create_gyro_quat_sensor=function(){var a=e(200,window);a.ea=l.create();q.get_device_by_type_element(q.DEVICE_GYRO)?g(a,1):g(a,0);a.Va=!0;return a};a.create_hmd_quat_sensor=function(){var a=e(210,window);a.ea=l.create();q.get_device_by_type_element(q.DEVICE_HMD)?g(a,1):g(a,0);a.Va=!0;return a};a.create_hmd_position_sensor=function(){var a=e(220,window);a.ea=w.create();q.get_device_by_type_element(q.DEVICE_HMD)?
g(a,1):g(a,0);a.Va=!0;return a};a.create_timeline_sensor=function(){return e(160)};a.create_selection_sensor=function(a,b){var d=e(170);d.Qi=a;d.JF=b;d.Va=!0;return d};a.create_callback_sensor=function(a,b){var d=e(230);d.callback=a;g(d,b);return d};a.create_plock_mouse_sensor=function(a){a=e(280,a);a.ea={coords:new Float32Array(2)};a.Va=!0;return a};a.create_plock_sensor=function(a){a=e(290,a);a.Va=!0;return a};a.OU=g;a.get_sensor_value=function(a,b,d){a=a||N;a=a.Th;if(!a||!a[b])return H.error("get_sensor_value(): wrong object"),
null;b=a[b].Wj[d];return b?b.value:(H.error("get_sensor_value(): sensor not found"),null)};a.get_sensor_payload=function(a,b,d){a=a||N;a=a.Th;if(!a||!a[b])return H.error("get_sensor_payload(): wrong object"),null;b=a[b].Wj[d];return b?b.ea:(H.error("get_sensor_payload(): sensor not found"),null)};a.cleanup=function(){D=[];N={};for(var a=0;a<M.length;a++)x(M[a]);M.length=0;B.length=0};a.check_sensor_manifold=function(a,b){a=a||N;if(!a.Th)return!1;if(b&&a.Th[b])return!0;if(!b)for(var d in a.Th)return!0;
return!1};a.create_sensor_manifold=function(a,d,e,m,f,h,g){a=a||N;a.ln=a.ln||[];a.Th=a.Th||{};var A=a.Th,n=a.ln;A[d]&&k(a,d);e={id:d,type:e,Wj:m.slice(0),hT:f,PU:Array(m.length),callback:h,NN:g,Hj:-1,eH:0,KS:Array(m.length),Il:-1};A[d]=e;n.push(e);-1==D.indexOf(a)&&D.push(a);for(a=0;a<e.Wj.length;a++){A=d=e.Wj[a];if(A.Va){switch(A.type){case 90:z.append_collision_test(A.Cz,A.Jb,A.Bz,A.ii);break;case 100:z.apply_collision_impulse_test(A.Az,A.aF);break;case 110:A.ts=z.append_ray_test(A.Qi,A.from,A.to,
A.Jb,A.fI,!1,!1,A.ii,A.Sv);A.ea.ts=A.ts;break;case 140:A.Dg=F.get_timeline();0>A.wg&&(A.wg=-A.wg);break;case 20:n=c(A.element);b(n,"keyboard_downed_keys");break;case 30:n=c(A.element);b(n,"mouse_wheel");break;case 40:n=c(A.element);b(n,"mouse_down_which");b(n,"mouse_up_which");b(n,"mouse_location");break;case 280:n=c(A.element);b(n,"mouse_pointerlock");break;case 290:q.GM(A);break;case 50:n=c(A.element);b(n,"mouse_down_which");b(n,"mouse_up_which");break;case 60:n=c(A.element);b(n,"touch_start");
b(n,"touch_move");b(n,"touch_end");break;case 70:n=c(A.element);b(n,"touch_start");b(n,"touch_move");break;case 75:n=c(A.element);b(n,"touch_start");b(n,"touch_move");break;case 80:n=c(A.element);b(n,"touch_start");b(n,"touch_end");break;case 170:n=c(A.element);b(n,"mouse_select");b(n,"touch_select");b(n,"touch_start");b(n,"touch_end");b(n,"mouse_down_which");b(n,"mouse_up_which");break;case 180:case 190:n=c(A.element);b(n,"orientation_angles");break;case 200:n=c(A.element);b(n,"orientation_quat");
break;case 240:case 260:case 270:0==A.gamepad_id?q.get_device_by_type_element(q.tt):1==A.gamepad_id?q.get_device_by_type_element(q.Ky):2==A.gamepad_id?q.get_device_by_type_element(q.Ly):q.get_device_by_type_element(q.My)}A.Va=!1}A=M.indexOf(d);-1==A?(M.push(d),B.push([e])):B[A].push(e)}K=!0};a.default_AND_logic_fun=function(a){for(var b=0;b<a.length;b++)if(!a[b])return a[b];return a[a.length-1]};a.default_OR_logic_fun=function(a){for(var b=0;b<a.length;b++)if(a[b])return a[b];return a[a.length-1]};
a.remove_sensor_manifold=k;a.reset=function(){for(var a=0;a<D.length;a++){var b=D[a],d=b.Th,b=b.ln,c;for(c in d)delete d[c];b.length=0}for(a=0;a<M.length;a++)x(M[a]);D.length=0;M.length=0;B.length=0};a.debug=function(){H.log(String(D.length)+" objects with manifolds",D);H.log(String(M.length)+" sensors",M);for(var a=[],b=[],d=0;d<M.length;d++){var c=M[d];90==c.type&&a.push(c);110==c.type&&b.push(c)}H.log(String(a.length)+" collision sensors",a);H.log(String(b.length)+" ray sensors",b)};a.set_plock_smooth_factor=
function(a){O=a}};b4w.module.__curve=function(a,u){function e(a,b,c,d,e){var h=d.length;e||(e=new Float32Array(h));for(var g=h+a,n=new Float32Array(g),k=1;k<=g-1;k++)n[k-1]=b>=c[k-1]&&b<c[k+1-1]?1:0;for(var l=2;l<=a;l++)for(k=1;k<=g-l;k++)n[k-1]=(n[k-1]?(b-c[k-1])*n[k-1]/(c[k+l-1-1]-c[k-1]):0)+(n[k+1-1]?(c[k+l-1]-b)*n[k+1-1]/(c[k+l-1]-c[k+1-1]):0);b==c[g-1]&&(n[h-1]=1);a=0;for(k=1;k<=h;k++)a+=n[k-1]*d[k-1];for(k=1;k<=h;k++)e[k-1]=a?n[k-1]*d[k-1]/a:0;return e}function c(a){a=a.ew;return a[a.length-1]}function b(a){a=
a.tF;return a[a.length-1]}function n(a,b,c,d,e,k,G,p){var h=a+(b-a)/2,l=g(h,d,e,k,G)-c;p=p?p:.01;return Math.abs(l)<p?h:0<l?n(a,h,c,d,e,k,G,p):n(h,b,c,d,e,k,G,p)}function g(a,b,c,d,e){var h=1-a;return b*h*h*h+3*c*h*h*a+3*d*h*a*a+e*a*a*a}var p=u("__util"),k=u("__vec3");a.hP=function(a){var b={},c=a.data;a=c.splines[0];if(!a||"NURBS"!=a.type||!a.use_endpoint_u)return null;var d=a.order_u;b.order=d;a=a.points;var g=a.length/5,n=[],k=g+d,g=g+2;n[0]=0;for(var x=2;x<=k;x++)n[x-1]=x>d&&x<g?n[x-2]+1:n[x-
2];b.ew=n;"2D"==c.dimensions?b.Uk=!1:"3D"==c.dimensions?b.Uk=!0:p.K("Wrong curve dimensions");d=[];n=[];for(c=0;c<a.length;c+=5)d.push(a[c]),d.push(a[c+1]),d.push(a[c+2]),b.Uk&&d.push(a[c+3]),n.push(a[c+4]);b.Fz=d;b.bD=n;a=[];for(var c=b.Fz,d=b.Uk?4:3,n=b.bD,k=b.ew,g=b.order,x=c.length/d,z=x+g,l=0,F=k[z-1]/999,r=0;1E3>r;r++){5E-6>k[z-1]-l&&(l=k[z-1]);for(var E=e(g,l,k,n),w=0;w<d;w++)for(var f=a[d*r+w]=0;f<x;f++)a[d*r+w]+=E[f]*c[d*f+w];l+=F}d=b.Uk?4:3;n=new Float32Array(1E3);n[0]=0;for(c=1;1E3>c;c+=
1)k=a[(c-1)*d],g=a[(c-1)*d+1],x=a[(c-1)*d+2],z=a[c*d],l=a[c*d+1],F=a[c*d+2],n[c]=n[c-1]+Math.sqrt((z-k)*(z-k)+(l-g)*(l-g)+(F-x)*(F-x));b.tF=n;return b};a.TV=function(a,b,h){h||(h=[]);b=Math.min(b,c(a));var d=a.Fz,g=a.Uk?4:3,n=a.bD,k=a.ew,p=a.order;a=d.length/g;var z=a+p;5E-6>k[z-1]-b&&(b=k[z-1]);z=new Float32Array(a);e(p,b,k,n,z);for(b=0;b<g;b++)for(n=h[b]=0;n<a;n++)h[b]+=z[n]*d[g*n+b]};a.QV=function(a,b,c){c||(c=[]);var d=a.Fz,e=a.Uk?4:3,h=a.bD,g=a.ew,n=a.order;a=d.length/e;var k=a+n;5E-6>g[k-1]-
b&&(b=g[k-1]);var k=new Float32Array(a),l=b;b=k;var p=h.length;b||(b=new Float32Array(p));var r=new Float32Array(p),E=new Float32Array(p),w=r,f=E;w||(w=new Float32Array(p));f||(f=new Float32Array(p));for(var y=p+n,D=new Float32Array(y),x=new Float32Array(y),v=1;v<=y-1;v++)D[v-1]=l>=g[v-1]&&l<g[v+1-1]?1:0;l==g[y-1]&&(D[p-1]=1);for(var B=2;B<=n;B++)for(v=1;v<=y-B;v++){var J=D[v-1]?D[v-1]/(g[v+B-1-1]-g[v-1]):0,C=D[v+1-1]?-D[v+1-1]/(g[v+B-1]-g[v+1-1]):0,A=x[v-1]?(l-g[v-1])*x[v-1]/(g[v+B-1-1]-g[v-1]):
0,u=x[v+1-1]?(g[v+B-1]-l)*x[v+1-1]/(g[v+B-1]-g[v+1-1]):0;D[v-1]=(D[v-1]?(l-g[v-1])*D[v-1]/(g[v+B-1-1]-g[v-1]):0)+(D[v+1-1]?(g[v+B-1]-l)*D[v+1-1]/(g[v+B-1]-g[v+1-1]):0);x[v-1]=J+C+A+u}for(v=1;v<=p;v++)w[v-1]=D[v-1],f[v-1]=x[v-1];g=0;for(n=1;n<=p;n++)g+=r[n-1]*h[n-1];l=0;for(n=1;n<=p;n++)l+=E[n-1]*h[n-1];for(n=1;n<=p;n++)b[n-1]=g?E[n-1]*h[n-1]/g+r[n-1]*h[n-1]*l/(g*g):0;for(h=0;h<e;h++)for(g=c[h]=0;g<a;g++)c[h]+=k[g]*d[e*g+h]};a.D_=c;a.SV=b;a.RV=function(a,e){if(0>=e)return 0;var h=c(a);if(e>=b(a))return h;
var d=a.tF,g=p.Zt(d,e,0,d.length-1);return h*(g+(e-d[g])/(d[g+1]-d[g]))/1E3};a.kw=function(a,b,c,d,e){return c+(e-d)*(a-c)/(b-d)};a.hH=function(a,b,c){var d=b[0];b=b[1];c=(c[1]-b)/(c[0]-d);return c*a+(b-c*d)};a.pE=function(a,b,c,d,e,k){return g(n(0,1,a,b[0],c[0],d[0],e[0],k),b[1],c[1],d[1],e[1])};a.rz=function(a,b,c,d,e){var h=new Float32Array(3),g=new Float32Array(3),n=new Float32Array(3),t=new Float32Array(3),l=new Float32Array(3),p=new Float32Array(3);k.copy(a[1],g);null==b?(k.copy(c[1],n),h[0]=
2*g[0]-n[0],h[1]=2*g[1]-n[1]):k.copy(b[1],h);null==c?(k.copy(b[1],h),n[0]=2*g[0]-h[0],n[1]=2*g[1]-h[1]):k.copy(c[1],n);k.subtract(g,h,t);k.subtract(n,g,l);b=k.length(t);c=k.length(l);0==b&&(b=1);0==c&&(c=1);if("AUTO"==d||"AUTO"==e)if(p[0]=l[0]/c+t[0]/b,p[1]=l[1]/c+t[1]/b,h=2.5614*k.length(p))"AUTO"==d&&k.scaleAndAdd(g,p,-(b/h),a[0]),"AUTO"==e&&k.scaleAndAdd(g,p,c/h,a[2]);"VECTOR"==d&&k.scaleAndAdd(g,t,-1/3,a[0]);"VECTOR"==e&&k.scaleAndAdd(g,l,1/3,a[2])};a.AO=function(a,b,c,d){var e=[],h=[],g,n,k;
e[0]=a[0]-b[0];e[1]=a[1]-b[1];h[0]=d[0]-c[0];h[1]=d[1]-c[1];k=d[0]-a[0];g=Math.abs(e[0]);n=Math.abs(h[0]);g+n&&g+n>k&&(g=k/(g+n),b[0]=a[0]-g*e[0],b[1]=a[1]-g*e[1],c[0]=d[0]-g*h[0],c[1]=d[1]-g*h[1])}};b4w.module.__debug=function(a,u){function e(a,b,d){var e=[],m;for(m in a)1<w.Bj(a[m])&&e.push([m,a[m]]);e.sort(function(a,b){var d=w.Bj(a[1]),c=w.Bj(b[1]);return c!=d?c-d:a<b?-1:b<a?1:0});if(e.length){z.groupCollapsed(b+" "+d);z.md("Property different variants (>1) | Property name");for(a=0;a<e.length;a++)z.groupCollapsed(w.Bj(e[a][1]),e[a][0]),c(e[a][1]);z.groupEnd()}}function c(a){z.md("Batches count for this property value | Property value");var b=[],d;for(d in a)b.push([d,a[d]]);b.sort(function(a,
b){return b[1]!=a[1]?b[1]-a[1]:a[0]<b[0]?-1:b[0]<a[0]?1:0});for(a=0;a<b.length;a++)z.md(b[a][1],b[a][0]);z.groupEnd()}function b(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+" "+a[b];return a=a.join("\n")}function n(){var a=q.nA();if(a){var b=a.createQuery();a.beginQuery(b)}else b=performance.now();return b}function g(){var b=C;return b&&b.debug_view_mode==a.DV_RENDER_TIME}function p(a,b,d){var c=q.nA(),e=0;if(c)for(d&&c.endQuery(),d=0;d<a.length;d++){var m=a[d],f=c.dG(m),h=D.getParameter(c.cG());
f&&!h&&(e=c.eG(m)/1E6,b&&(e=w.smooth(e,b,1,10)),a.splice(d,1),d--)}else e=performance.now()-a.pop(),b&&(e=w.smooth(e,b,1,10));return e}function k(a,b){x(a)||w.K("Structure assertion failed: invalid first object value");x(b)||w.K("Structure assertion failed: invalid second object value");v(a,b)||w.K("Structure assertion failed: incompatible types");if(!(null==a||null==b||"object"!=typeof a||w.LA(a)||a instanceof Array)){for(var d in a)x(a[d])||w.K("Structure assertion failed: invalid value for key in the first object: "+
d),d in b||w.K("Structure assertion failed: missing key in the first object: "+d);for(d in b)x(b[d])||w.K("Structure assertion failed: invalid value for key in the second object: "+d),d in a||w.K("Structure assertion failed: missing key in the second object: "+d),v(a[d],b[d])||w.K("Structure assertion failed: incompatible types for key "+d)}}function x(a){return"undefined"==typeof a?!1:"number"==typeof a&&isNaN(a)?!1:!0}function v(a,b){if(typeof a!=typeof b)return!1;if(null!=a&&null!=b&&"object"==
typeof a){var d=a instanceof Array,c=b instanceof Array;if(d&&!c||!d&&c)return!1;d=w.LA(a);c=w.LA(b);if(d&&!c||!d&&c)return!1}return!0}var h=u("__batch"),d=u("__compat"),t=u("__config"),q=u("__extensions"),G=u("__graph"),H=u("__objects"),z=u("__print"),l=u("__scenes"),F=u("__subscene"),r=u("__textures"),E=u("__time"),w=u("__util"),f=t.L,y={},D=null,N={},M=[],B=-1,J=-1,C=null,A=null,X=!1,m={};a.DV_NONE=0;a.DV_OPAQUE_WIREFRAME=1;a.DV_TRANSPARENT_WIREFRAME=2;a.DV_FRONT_BACK_VIEW=3;a.DV_BOUNDINGS=4;a.DV_CLUSTERS_VIEW=
5;a.DV_BATCHES_VIEW=6;a.DV_RENDER_TIME=7;a.yg=function(a){for(var b="INVALID_ENUM INVALID_VALUE INVALID_OPERATION OUT_OF_MEMORY INVALID_FRAMEBUFFER_OPERATION CONTEXT_LOST_WEBGL".split(" "),d=0;d<b.length;d++){var c=b[d];c in a&&(y[a[c]]=c)}D=a};a.XU=function(a){C=a};a.vZ=function(){return C};a.zQ=function(a,b,d,c,e){m[a]||(m[a]={AV:b,pf:{}});d in m[a].pf||(m[a].pf[d]=c);e&&(m[a].pf[d]=0)};a.calc_vbo_garbage_byte_size=function(){var a=0,b;for(b in m)for(var d in m[b].pf)a+=m[b].pf[d];return a};a.show_vbo_garbage_info=
function(){var a={},b;for(b in m)for(var d in m[b].pf){var c=m[b].pf[d];if(c){var e=m[b].AV;e in a||(a[e]={FC:0,pf:{}});d in a[e].pf||(a[e].pf[d]=0);a[e].pf[d]+=c;a[e].FC+=c}}for(e in a){z.groupCollapsed(e,a[e].FC);for(d in a[e].pf)z.md(d,a[e].pf[d]);z.groupEnd()}};a.print_batches_stat=function(){for(var a={},b="bounds_local bufs_data id attribute_setters num_vertices num_triangles material_names shader bpy_tex_names".split(" "),d=0,c=0,m=H.Sb(l.Gh(),"MESH",H.DATA_ID_ALL),f=0;f<m.length;f++)for(var g=
0;g<m[f].S.length;g++)for(var n=0;n<m[f].S[g].$.length;n++){var A=h.pO(m[f].S[g].$[n]),k=A.eb.Pf+"/"+A.eb.ye;A["shaders_info.directives"]=A.eb.Ah;A["shaders_info.node_elements"]=A.eb.$e;delete A.eb;for(var r=0;r<b.length;r++)delete A[b[r]];if(m[f].is_dynamic)c++;else{d++;A.type in a||(a[A.type]={});k in a[A.type]||(a[A.type][k]={});for(var w in A)w in a[A.type][k]||(a[A.type][k][w]={}),r=JSON.stringify(A[w]),r in a[A.type][k][w]||(a[A.type][k][w][r]=0),a[A.type][k][w][r]++}}z.group("Batches statistics:");
z.md("STATIC/DYNAMIC count:",d+"/"+c);z.group("STATIC batches diversity:");for(var y in a)for(k in a[y])e(a[y][k],y,k);z.groupEnd();z.groupEnd()};a.vz=function(a){if(f.gl_debug){var b=D.getError();b!=D.NO_ERROR&&(b in y?w.K("GL Error: "+b+", gl."+y[b]+" ("+a+")"):w.K("Unknown GL error: "+b+" ("+a+")"))}};a.XN=function(){if(f.gl_debug||f.KE)switch(D.checkFramebufferStatus(D.FRAMEBUFFER)){case D.FRAMEBUFFER_COMPLETE:break;case D.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:z.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");
break;case D.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:z.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case D.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:z.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case D.FRAMEBUFFER_UNSUPPORTED:z.error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;case D.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:z.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");break;default:z.error("FRAMEBUFFER CHECK FAILED")}};
a.aO=function(){if(-1!=B)return B;var a=D.createFramebuffer();D.bindFramebuffer(D.FRAMEBUFFER,a);var b=r.rj(r.Sl,!1);r.resize(b,1,1);D.framebufferTexture2D(D.FRAMEBUFFER,D.DEPTH_ATTACHMENT,b.rb,b.Cb,0);D.checkFramebufferStatus(D.FRAMEBUFFER)!=D.FRAMEBUFFER_COMPLETE?(B=!0,z.warn("depth-only issue was found")):B=!1;D.bindFramebuffer(D.FRAMEBUFFER,null);D.deleteFramebuffer(a);return B};a.fO=function(){if(1==f.ec)return!1;if(-1!=J)return J;D.bindRenderbuffer(D.RENDERBUFFER,D.createRenderbuffer());D.renderbufferStorageMultisample(D.RENDERBUFFER,
f.ec,D.RGBA8,1,1);var a=D.getRenderbufferParameter(D.RENDERBUFFER,D.RENDERBUFFER_SAMPLES);a!=f.ec?(J=!0,z.warn("multisample issue was found: requested "+f.ec+", got "+a),D.getError()==D.INVALID_OPERATION&&z.warn("the error from multisample issue detected, ignoring")):J=!1;D.bindRenderbuffer(D.RENDERBUFFER,null);return J};a.cO=function(){return d.wz("Firefox")&&D.getError()==D.OUT_OF_MEMORY?(z.warn("Firefox/old GPUs cubemap issue was found."),!0):!1};a.kI=function(a,d,c){f.gl_debug&&(c=b(c),z.error("shader compilation failed:\n"+
c+"\n"+D.getShaderInfoLog(a)+" ("+d+")"))};a.xU=function(a,d,c,e){f.gl_debug&&(c=b(c),e=b(e),z.error("shader linking failed:\n"+c+"\n\n\n"+e+"\n"+D.getProgramInfoLog(a)+" ("+d+")"))};a.SB=function(a){if(f.show_hud_debug_info||a.type==F.kq)a.ir||a.Hk.push(n())};a.sU=function(a){"MAIN"==a.type&&g()&&a.Hk.push(n())};a.TB=function(a){if((f.show_hud_debug_info||a.type==F.kq)&&!a.ir){var b=p(a.Hk,a.vf,!0);b&&(a.vf=b)}};a.tU=function(a){if("MAIN"==a.type&&g()){var b=p(a.Hk,a.vf,!0);b&&(a.vf=b)}};a.SG=g;
a.dU=function(a){var b=p(a.Hk,a.vf,!1);b&&(a.vf=b)};a.fZ=function(a){N[a]=a in N?N[a]+1:1};a.update=function(){for(var a in N)z.log(a,N[a]),N[a]=0};a.fbmsg=function(){for(var a=[performance.now()],b=0;b<arguments.length;b++){var d=arguments[b];if(w.is_vector(d))for(var c=0;c<d.length;c++)a.push(d[c]);else a.push(arguments[b])}M.push(a)};a.msg=function(){for(var a=1,b=0;b<M.length;b++){var d=M[b];d[1]==arguments[0]&&a++}d=[a];for(b=0;b<arguments.length;b++)if(a=arguments[b],w.is_vector(a))for(var c=
0;c<a.length;c++)d.push(a[c]);else d.push(arguments[b]);M.push(d)};var K=["color: #3366FF","color: #CC33FF","color: #FF3366","color: #33FF66","color: #FFCC33"];a.print_telemetry=function(a){a||(a=1);for(var b=0,d={},c=Math.max(0,performance.now()-1E3*a),e=0;e<M.length;e++){var m=M[e];a=m[0];if(!(a<c)){var f=String(m[1]);d[f]||(d[f]=K[b++%K.length]);a=["%c"+(a/1E3).toFixed(6),d[f],f];for(f=2;f<m.length;f++)a.push(m[f]);z.log.apply(this,a)}}M.splice(0)};a.plot_telemetry=function(a){a||(a=1);for(var b=
{},d=Math.max(0,performance.now()-1E3*a),c=0;c<M.length;c++){var e=M[c];a=e[0];if(!(a<d))for(var m=2;m<e.length;m++){var f=String(e[1]);3<e.length&&(f+="_"+String(m-2));b[f]||(b[f]=f+"\n");b[f]+=String(a)+" "+e[m]+"\n"}}a="";for(f in b)a+=b[f]+"\n\n";z.log(a);M.splice(0)};a.PY=function(a){function b(a){return-1<d.indexOf(a)?!0:!1}var d=navigator.userAgent.toLowerCase();switch(a.toLowerCase()){case "chrome":return b("mozilla")&&b("applewebkit")&&b("chrome");case "firefox":return b("mozilla")&&b("gecko")&&
b("firefox");case "msie":return b("mozilla")&&b("trident")&&b("msie");case "opera":return b("opera")&&b("presto");case "safari":return b("mozilla")&&b("applewebkit")&&b("safari")&&!b("chrome");default:return!1}};a.check_finite=function(a){if(w.is_vector(a)){for(var b=0;b<a.length;b++)if(!isFinite(a[b]))return!1;return!!a.length}return isFinite(a)?!0:!1};a.EY=function(a,b){a.constructor!=b&&w.K("Type assertion failed: value <"+a+"> has type <"+a.constructor+">, required <"+b+">")};a.FY=k;a.GY=function(a){X?
k(a,A):X=!0;A=null!=a&&"object"==typeof a?w.Pq(a):a};a.fake_load=function(a,b,d,c,e){(a=a||null)||w.K("Stage load callback is undefined");b=b||5E3;d=d||0;c=c||100;100<c&&w.K("Max percentage must be less than 100");0>d&&w.K("Min percentage must be greater than 0");d>c&&w.K("Max percentage must be greater than min percentage");var m=E.animate(d,c,b,function(b){b=b.toFixed();a(b);100==b&&(E.clear_animation(m),e&&e())})};a.DT=function(a){return G.xF(a,function(a,b){var d=b.type+"("+b.name+")",c=b.inputs,
d=d+"\n\nINPUTS:";if(c.length)for(var e=0;e<c.length;e++)d+="\n"+c[e].identifier+": ",d=c[e].Ma?d+"linked":d+c[e].Ia;else d+="\n---";c=b.outputs;d+="\n\nOUTPUTS:";if(c.length)for(e=0;e<c.length;e++)d+="\n"+c[e].identifier+": ",d=c[e].Ma?d+("linked(default "+c[e].Ia+")"):d+"not used";else d+="\n---";e="";switch(b.type){case "GEOMETRY_UV":e="\nuv_layer: "+b.data.value;break;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":e="\ntexture: "+b.data.value.name+"\n("+b.data.value.Bo+")"}""==e&&(e="\n---");return d+
"\n\nDATA:"+e},function(b,d,c){b=G.$a(a,b);d=G.$a(a,d);return b.outputs[c[0]].identifier+"\n==>\n"+d.inputs[c[1]].identifier})};a.tv=function(){return D};a.cleanup=function(){C=null;m={}};a.reset=function(){D=null}};b4w.module.__extensions=function(a,u){function e(){return k.gb?n("OES_texture_float_linear"):b("OES_texture_float_linear")}function c(){return k.gb?n("EXT_color_buffer_float"):b("WEBGL_color_buffer_float")}function b(a){if(a in v)return v[a];var b=x.getExtension(a)||null;v[a]=b;p.log("%cGET EXTENSION","color: #"+(b?"0a0":"a00"),a);return b}function n(a){if(a in v)return v[a];switch(a){case "WEBGL_depth_texture":case "OES_element_index_uint":case "OES_standard_derivatives":case "EXT_shader_texture_lod":case "OES_texture_float":case "OES_texture_half_float":var b=
{};break;case "ANGLE_instanced_arrays":case "OES_vertex_array_object":b=x;break;default:b=x.getExtension(a)||null}v[a]=b;p.log("%cGET EXTENSION (WebGL 2)","color: #"+(b?"0a0":"a00"),a);return b}var g=u("__config"),p=u("__print"),k=g.L,x=null,v={};a.yg=function(a){x=a};a.oG=function(){return b("WEBGL_compressed_texture_s3tc")||b("WEBKIT_WEBGL_compressed_texture_s3tc")};a.nG=function(){return b("WEBKIT_WEBGL_compressed_texture_pvrtc")||b("WEBGL_compressed_texture_pvrtc")};a.pR=function(){return k.gb?
n("WEBGL_depth_texture"):b("WEBGL_depth_texture")||b("WEBKIT_WEBGL_depth_texture")};a.NR=function(){return k.gb?n("OES_texture_float"):b("OES_texture_float")};a.PR=function(){return k.gb?n("OES_texture_half_float"):b("OES_texture_half_float")};a.OR=e;a.QR=function(){return k.gb?e():b("OES_texture_half_float_linear")};a.hR=c;a.iR=function(){return k.gb?c():b("EXT_color_buffer_half_float")};a.jA=function(){return b("EXT_texture_filter_anisotropic")||b("WEBKIT_EXT_texture_filter_anisotropic")};a.qG=
function(){return k.gb?n("EXT_shader_texture_lod"):b("EXT_shader_texture_lod")};a.nR=function(){return b("WEBGL_debug_shaders")};a.get_renderer_info=function(){return b("WEBGL_debug_renderer_info")};a.jG=function(){return k.gb?n("OES_element_index_uint"):b("OES_element_index_uint")};a.rA=function(){return k.gb?n("OES_standard_derivatives"):b("OES_standard_derivatives")};a.nA=function(){var a=k.gb?n("EXT_disjoint_timer_query_webgl2"):b("EXT_disjoint_timer_query");return null==a?a:a.createQueryEXT?
{createQuery:function(){return a.createQueryEXT()},beginQuery:function(b){a.beginQueryEXT(a.TIME_ELAPSED_EXT,b)},endQuery:function(){a.endQueryEXT(a.TIME_ELAPSED_EXT)},dG:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_AVAILABLE_EXT)},eG:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_EXT)},cG:function(){return a.GPU_DISJOINT_EXT}}:{createQuery:function(){return x.createQuery()},beginQuery:function(b){x.beginQuery(a.TIME_ELAPSED_EXT,b)},endQuery:function(){x.endQuery(a.TIME_ELAPSED_EXT)},
dG:function(a){return x.getQueryParameter(a,x.QUERY_RESULT_AVAILABLE)},eG:function(a){return x.getQueryParameter(a,x.QUERY_RESULT)},cG:function(){return a.GPU_DISJOINT_EXT}}};a.ER=function(){if(k.gb)return n("ANGLE_instanced_arrays");var a=b("ANGLE_instanced_arrays");return null==a?a:{drawElementsInstanced:function(b,c,e,g,h){a.drawElementsInstancedANGLE(b,c,e,g,h)},vertexAttribDivisor:function(b,c){a.vertexAttribDivisorANGLE(b,c)},drawArraysInstanced:function(b,c,e,g){a.drawArraysInstancedANGLE(b,
c,e,g)}}};a.tA=function(){if(k.gb)return n("OES_vertex_array_object");var a=b("OES_vertex_array_object");return null==a?a:{bindVertexArray:function(b){a.bindVertexArrayOES(b)},createVertexArray:function(){return a.createVertexArrayOES()},deleteVertexArray:function(b){a.deleteVertexArrayOES(b)},isVertexArray:function(b){return a.isVertexArrayOES(b)}}};a.cleanup=function(){v={}};a.reset=function(){x=null}};b4w.module.__graph=function(a,u){function e(a,b,d){d||(d=null);c(a,b)?J.K("Graph already has node with given ID"):a.Z.push(b,d)}function c(a,b){for(var d=a.Z,c=0;c<d.length;c+=2)if(d[c]==b)return!0;return!1}function b(a,b,d,e){e||(e=null);c(a,b)&&c(a,d)?a.Ca.push(b,d,e):J.K("Wrong node IDs")}function n(a,b){c(a,b)||J.K("Node not found");for(var d=a.Z,e=0;e<d.length;e+=2)d[e]==b&&(d.splice(e,2),e-=2)}function g(a,b,d,c){D(a,b,d)||J.K("Edge not found");a=a.Ca;for(var e=0,m=0;m<a.length;m+=3)if(a[m]==
b&&a[m+1]==d){if(-1==c)a.splice(m,3);else{if(c==e){a.splice(m,3);break}e++}m-=3}}function p(a){a=a.Z;for(var b=-1,d=0;d<a.length;d+=2)b=Math.max(b,a[d]);return++b}function k(a,b){for(var d=a.Z,c=0;c<d.length;c+=2)if(d[c+1]==b)return d[c];return-1}function x(a){var b=[],d={};v(a,d);for(var c=a.Z,e=0;e<c.length;e+=2)0==w(a,c[e])&&h(a,c[e],d,b);return{Z:b,Ca:a.Ca.slice(0)}}function v(a,b){for(var d=a.Z,c=0;c<d.length;c+=2)b[d[c]]=!1}function h(a,b,d,c){if(!d[b]){d[b]=!0;for(var e=0;e<E(a,b);e++)h(a,
f(a,b,e),d,c);c.unshift(b,r(a,b))}}function d(a,b,c,e){if(!c[b]){c[b]=!0;if(10==e||30==e)for(var m=0;m<E(a,b);m++){var g=f(a,b,m);d(a,g,c,e)}if(20==e||30==e)for(m=0;m<w(a,b);m++)g=y(a,b,m),d(a,g,c,e)}}function t(a){for(var b=a.Ca,d=0;d<b.length;d+=3){var e=b[d+1];c(a,b[d])&&c(a,e)||(b.splice(d,3),d-=3)}}function q(a){for(var b=[],d=a.Z,c=0;c<d.length;c+=2){var e=d[c];E(a,e)||b.push(e)}return b}function G(a){var b=a.Z;a=a.Ca;for(var d=[],c=[],e=[],f=0;f<b.length;f++)e[b[2*f]]=f,d.push(f,b[2*f+1]);
for(f=0;f<a.length;f+=3)c.push(e[a[f]],e[a[f+1]],a[f+2]);return{Z:d,Ca:c}}function H(a,b,d){if(d.ni==d.cl){for(var c=0,e=0;c<d.cl;c++)-1!=d.qj[c]&&(a[e]=c,b[e]=d.qj[c],e++);return!0}if(d.cl>d.Po||d.Al>d.Bl||d.Dp>d.Fp||d.Cp>d.Ep)return!1;for(var e=c=-1,m=!1;!m&&z(d,C,c,e);)if(c=C[0],e=C[1],l(d,c,e)){var g;g=d;m={};m.yr=g.yr;m.zr=g.zr;m.sB=g.sB;m.Uu=g.Uu;m.cl=g.cl;m.Po=g.Po;m.order=g.order;m.ni=m.Lw=g.ni;m.Cp=g.Cp;m.Dp=g.Dp;m.Al=g.Al;m.Ep=g.Ep;m.Fp=g.Fp;m.Bl=g.Bl;m.pq=-1;m.qj=g.qj;m.nm=g.nm;m.Im=g.Im;
m.Jm=g.Jm;m.$m=g.$m;m.an=g.an;m.qx=g.qx;g.qx[0]+=1;var m=g=m,h=c,n=e,A=m.yr,k=m.zr,r=m.cl,t=m.Po,q=m.qj,D=m.nm,B=m.Im,G=m.Jm,p=m.$m,J=m.an;F(h<r);F(n<t);F(m.ni<r);F(m.ni<t);r=++m.ni;m.pq=h;B[h]||(B[h]=r,m.Cp++,p[h]&&m.Al++);p[h]||(p[h]=r,m.Dp++,B[h]&&m.Al++);G[n]||(G[n]=r,m.Ep++,J[n]&&m.Bl++);J[n]||(J[n]=r,m.Fp++,G[n]&&m.Bl++);q[h]=n;D[n]=h;for(q=0;q<w(A,h);q++)D=y(A,h,q),B[D]||(B[D]=r,m.Cp++,p[D]&&m.Al++);for(q=0;q<E(A,h);q++)D=f(A,h,q),p[D]||(p[D]=r,m.Dp++,B[D]&&m.Al++);for(q=0;q<w(k,n);q++)D=y(k,
n,q),G[D]||(G[D]=r,m.Ep++,J[D]&&m.Bl++);for(q=0;q<E(k,n);q++)D=f(k,n,q),J[D]||(J[D]=r,m.Fp++,G[D]&&m.Bl++);m=H(a,b,g);F(1>=g.ni-g.Lw);F(-1!=g.pq);D=g.yr;h=g.zr;n=g.ni;A=g.pq;k=g.qj;B=g.nm;r=g.Im;G=g.Jm;t=g.$m;p=g.an;if(g.Lw<n){r[A]==n&&(r[A]=0);for(J=0;J<w(D,A);J++)q=y(D,A,J),r[q]==n&&(r[q]=0);t[A]==n&&(t[A]=0);for(J=0;J<E(D,A);J++)q=f(D,A,J),t[q]==n&&(t[q]=0);D=k[A];G[D]==n&&(G[D]=0);for(J=0;J<w(h,D);J++)q=y(h,D,J),G[q]==n&&(G[q]=0);p[D]==n&&(p[D]=0);for(J=0;J<E(h,D);J++)q=f(h,D,J),p[q]==n&&(p[q]=
0);k[A]=-1;B[D]=-1;g.ni=g.Lw;g.pq=-1}}return m}function z(a,b,d,c){-1==d&&(d=0);-1==c?c=0:c++;var e=a.Al,m=a.Bl,f=a.Dp,g=a.Fp,n=a.Cp,h=a.Ep,A=a.ni,k=a.cl,r=a.Po,l=a.qj,w=a.nm,y=a.Im,q=a.Jm,t=a.$m,D=a.an;if(e>A&&m>A)for(;d<k&&(-1!=l[d]||0==t[d]||0==y[d]);)d++,c=0;else if(f>A&&g>A)for(;d<k&&(-1!=l[d]||0==t[d]);)d++,c=0;else if(n>A&&h>A)for(;d<k&&(-1!=l[d]||0==y[d]);)d++,c=0;else if(0==d&&0!=a.order){for(y=0;y<k&&-1!=l[d=a.order[y]];)y++;y==k&&(d=k)}else for(;d<k&&-1!=l[d];)d++,c=0;if(e>A&&m>A)for(;c<
r&&(-1!=w[c]||0==D[c]||0==q[c]);)c++;else if(f>A&&g>A)for(;c<r&&(-1!=w[c]||0==D[c]);)c++;else if(n>A&&h>A)for(;c<r&&(-1!=w[c]||0==q[c]);)c++;else for(;c<r&&-1!=w[c];)c++;return d<k&&c<r?(b[0]=d,b[1]=c,!0):!1}function l(a,b,d){var c=a.yr,e=a.zr,m=a.Po,g=a.qj,n=a.nm,h=a.Im,A=a.Jm,k=a.$m,l=a.an;F(b<a.cl);F(d<m);F(-1==g[b]);F(-1==n[d]);if(!(0,a.sB)(r(c,b),r(e,d)))return!1;for(var q=m=0,t=0,B=0,G=0,C=0,J=0;J<E(c,b);J++){var p=f(c,b,J);if(-1!=g[p]){var z=g[p];if(!D(e,d,z)||!N(a.Uu,c,b,p,e,d,z))return!1}else h[p]&&
t++,k[p]&&m++,h[p]||k[p]||G++}for(J=0;J<w(c,b);J++)if(p=y(c,b,J),-1!=g[p]){if(z=g[p],!D(e,z,d)||!N(a.Uu,c,p,b,e,z,d))return!1}else h[p]&&t++,k[p]&&m++,h[p]||k[p]||G++;for(J=0;J<E(e,d);J++)if(z=f(e,d,J),-1!=n[z]){if(p=n[z],!D(c,b,p))return!1}else A[z]&&B++,l[z]&&q++,A[z]||l[z]||C++;for(J=0;J<w(e,d);J++)if(z=y(e,d,J),-1!=n[z]){if(p=n[z],!D(c,p,b))return!1}else A[z]&&B++,l[z]&&q++,A[z]||l[z]||C++;return t<=B&&m<=q&&G<=C}function F(a){a||J.K("Assertion failed")}function r(a,b){for(var d=a.Z,c=0;c<d.length;c+=
2)if(d[c]==b)return d[c+1];return null}function E(a,b){for(var d=a.Ca,c=0,e=0;e<d.length;e+=3)d[e]==b&&c++;return c}function w(a,b){for(var d=a.Ca,c=0,e=0;e<d.length;e+=3)d[e+1]==b&&c++;return c}function f(a,b,d){a=a.Ca;for(var c=0,e=0;e<a.length;e+=3)if(a[e]==b){if(c==d)return a[e+1];c++}return-1}function y(a,b,d){a=a.Ca;for(var c=0,e=0;e<a.length;e+=3)if(a[e+1]==b){if(c==d)return a[e];c++}return-1}function D(a,b,d){a=a.Ca;for(var c=0;c<a.length;c+=3)if(a[c]==b&&a[c+1]==d)return!0;return!1}function N(a,
b,d,c,e,f,g){for(var m=M(b,d,c),n=M(e,f,g),h=0;h<m;h++){for(var k=!1,A=0;A<n;A++)if(a(B(b,d,c,h),B(e,f,g,A))){k=!0;break}if(!k)return!1}return!0}function M(a,b,d){var c=0;a=a.Ca;for(var e=0;e<a.length;e+=3)a[e]==b&&a[e+1]==d&&c++;return c}function B(a,b,d,c){a=a.Ca;for(var e=0,f=0;f<a.length;f+=3)if(a[f]==b&&a[f+1]==d){if(e==c)return a[f+2];e++}return null}var J=u("__util"),C=[-1,-1];a.Sy=-1;a.QX=10;a.rk=20;a.ZX=30;a.create=function(){for(var a=arguments,b=[],d=[],c=0;c<a.length;c++){var e=a[c];switch(e.length){case 2:b.push(e[0],
e[1]);break;case 3:d.push(e[0],e[1],e[2]);break;default:J.K("Wrong graph constructor params")}}return{Z:b,Ca:d}};a.clone=function(a,b,d){if(b)for(var c=Array(a.Z.length),e=0;e<a.Z.length;e+=2)c[e]=a.Z[e],c[e+1]=b(a.Z[e+1]);else c=J.W(a.Z);if(d)for(b=Array(a.Ca.length),e=0;e<a.Ca.length;e+=3)b[e]=a.Ca[e],b[e+1]=a.Ca[e+1],b[e+2]=d(a.Ca[e+2]);else b=J.W(a.Ca);return a={Z:c,Ca:b}};a.YY=function(a,b){for(var d=[],c=[],e=0;e<a.length;e++)d.push(a[e][0],a[e][1]);for(e=0;e<b.length;e++)c.push(b[e][0],b[e][1],
b[e][2]);return{Z:d,Ca:c}};a.uh=e;a.IZ=c;a.Ec=b;a.If=n;a.ql=g;a.Rh=function(a,b,d,c){D(a,b,d)||J.K("Edge not found");a=a.Ca;for(var e=0;e<a.length;e+=3)if(a[e]==b&&a[e+1]==d&&a[e+2][0]==c[0]&&a[e+2][1]==c[1]){a.splice(e,3);break}};a.Y=function(a,b){if(-1==k(a,b)){var d=p(a);e(a,d,b);return d}J.K("Non-unique attribute")};a.vU=function(a,b,d,c,e){a=a.Ca;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&a[f+2]==c&&(a[f+2]=e)};a.cE=function(a,d,c,f){c=c||[];f=f||[];for(var m={},g=0;g<a.Z.length;g+=2){var n=
a.Z[g],h=p(d);e(d,h,a.Z[g+1]);m[n]=h}for(g=0;g<a.Ca.length;g+=3){var h=m[a.Ca[g]],k=m[a.Ca[g+1]],n=a.Ca[g+2];b(d,h,k,n)}for(g=0;g<c.length;g+=3)h=m[c[g]],a=c[g+1],n=c[g+2],b(d,h,a,n);for(g=0;g<f.length;g+=3)c=f[g],k=m[f[g+1]],n=f[g+2],b(d,c,k,n)};a.Aj=p;a.Pj=k;a.I=function(a,d,c,e){d=k(a,d);c=k(a,c);-1!=d&&-1!=c?b(a,d,c,e):J.K("Attributes not found")};a.fa=function(a,b){for(var d=a.Z,c=0;c<d.length&&!b(d[c],d[c+1]);c+=2);};a.oh=function(a,b){for(var d=a.Ca,c=0;c<d.length&&!b(d[c],d[c+1],d[c+2]);c+=
3);};a.jk=function(a,b,d){for(var c=a.Ca,e=0;e<c.length;e+=3)if(c[e+1]==b){var f=c[e];if(d(f,r(a,f),c[e+2]))break}};a.El=function(a,b,d){for(var c=a.Ca,e=0;e<c.length;e+=3)if(c[e]==b){var f=c[e+1];if(d(f,r(a,f),c[e+2]))break}};a.DC=x;a.iW=function(a){a=x(a).Z;for(var b=[],d=0;d<a.length;d+=2)b.push(a[d+1]);return b};a.WZ=function(){};a.yl=function(a,b,e){c(a,b)||J.K("No such node");var f={};v(a,f);d(a,b,f,e);b=[];for(var m in f)f[m]&&(m=Number(m),b.push(m,r(a,m)));a={Z:b,Ca:a.Ca.slice(0)};t(a);return a};
a.xz=t;a.LR=function(a){for(var b=[],d=a.Z,c=0;c<d.length;c+=2){var e=d[c];w(a,e)||b.push(e)}return b};a.Er=q;a.match=function(a,b,d,c){var e={};e.yr=G(a);e.zr=G(b);e.sB=d||function(a,b){return a==b};e.Uu=c||function(a,b){return a==b};c=a.Z.length/2;var f=b.Z.length/2;e.cl=c;e.Po=f;e.order=0;e.ni=e.Lw=0;e.Al=e.Cp=e.Dp=0;e.Bl=e.Ep=e.Fp=0;e.pq=-1;e.qj=Array(c);e.nm=Array(f);e.Im=Array(c);e.Jm=Array(f);e.$m=Array(c);e.an=Array(f);e.qx=[1];for(d=0;d<c;d++)e.qj[d]=-1,e.Im[d]=0,e.$m[d]=0;for(d=0;d<f;d++)e.nm[d]=
-1,e.Jm[d]=0,e.an[d]=0;f=Array(c);c=Array(c);if(H(f,c,e)){for(d=0;d<f.length;d++)f[d]=a.Z[2*f[d]],c[d]=b.Z[2*c[d]];return[f,c]}return null};a.HR=function(a,b){for(var d=a.Z,c=1;c<d.length;c+=2)if(d[c]==b)return d[c-1];return null};a.$a=r;a.vg=E;a.zi=w;a.Ug=f;a.ng=y;a.wZ=M;a.Oc=B;a.replace=function(a,b,d){for(var c=a.Ca,f=p(a),g=0;g<b.length;g++){var m=b[g];n(a,m);for(var h=0;h<c.length;h+=3)c[h]==m&&(c[h]=f),c[h+1]==m&&(c[h+1]=f),c[h]==c[h+1]&&(c.splice(h,3),h-=3)}e(a,f,d)};a.kU=function(a,b,d,c,
e){D(a,b,d)||J.K("Edge not found");a=a.Ca;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&(a[f]=c,a[f+1]=e)};a.nQ=function(a,b){function d(a,b){if(-1!=n.indexOf(a)){var c=n.slice(n.indexOf(a));if(-1!=e[c[c.length-1]].indexOf(c[0])){k.push([a,c[c.length-1]]);return}}n.push(a);for(c=0;c<b.length;c++)b[c]in e&&d(b[c],e[b[c]])}b||(b=q(a)[0]);var c=a.Ca;if(c.length&&-1!=c.indexOf(b)){for(var e={},f=0,h=0;h<c.length;h+=3)c[h+1]in e?e[c[h+1]].push(c[h]):e[c[h+1]]=[c[h]],f++;var n=[],k=[];d(b,e[b]);for(h=
0;h<k.length;h++)for(var r=f=0;r<c.length;r+=3)k[h][1]==c[r+1]&&k[h][0]==c[r]&&g(a,c[r],c[r+1],f),f++}};a.xF=function(a,b,d){var c=a.Z;a=a.Ca;var e;e="digraph debug {\n    node [shape=box];\n";for(var f=0;f<c.length;f+=2){var g=c[f],m=c[f+1],m=b?b(g,m):String(g);e+="    ";e+=String(g)+' [label="'+m.replace(/\"/g,'\\"')+'"];\n'}for(f=0;f<a.length;f+=3)b=a[f],c=a[f+1],m=a[f+2],e+="    ",e+=String(b)+" -> "+String(c),d&&(e+=' [label="'+d(b,c,m)+'"]'),e+=";\n";return e+"}"}};b4w.module.__ipc=function(a,u){function e(a,b,c){for(var e=0;e<t.length;e+=2)t[e+1]==a&&(d[e+Number(!b)]=c)}function c(a){for(var b=0;b<a.length;b++){var d=a[b],c=0,e;for(e in d){var g=d[e];switch(g.constructor){case Float32Array:c+=g.length;break;case Number:c+=1}}--c;d.len=c}}var b=!0;a.MK=0;a.nD=1;a.oD=2;a.GK=3;a.IK=4;a.JK=5;a.KK=6;a.NK=7;a.pD=8;a.Py=9;a.qD=10;a.PK=11;a.rD=12;a.QK=13;a.OK=14;a.LK=15;a.HK=16;var n=a.nD,g=a.oD,p=a.pD,k=a.Py,x=a.qD,v=a.rD;a.$L=100;a.BL=101;a.CL=102;a.DL=103;a.EL=
104;a.GL=105;a.FL=106;a.HL=107;a.IL=108;a.JL=109;a.KL=110;a.LL=111;a.ML=112;a.OL=113;a.PL=114;a.cM=115;a.QL=116;a.RL=117;a.SL=118;a.UL=119;a.VL=120;a.WL=121;a.YL=122;a.ZL=123;a.aM=124;a.NL=125;a.eM=126;a.TL=127;a.ED=128;a.dM=129;a.fM=130;a.hM=131;a.iM=132;a.jM=133;a.kM=134;a.lM=135;a.mM=136;a.oM=137;a.pM=138;a.qM=139;a.FD=140;a.jq=141;a.rM=142;a.DD=143;a.sM=144;a.tM=145;a.bM=146;a.XL=147;a.uM=148;a.gM=149;a.nM=150;var h=a.jq,d=b4w.worker_listeners,t=b4w.worker_namespaces,q={sg:v,ia:0,time:0,trans:new Float32Array(3),
quat:new Float32Array(4),Fi:new Float32Array(3),bi:new Float32Array(3),len:0},G={sg:p,uz:0,LB:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},H={sg:k,id:0,Wn:0,hit_fract:0,hit_time:0,len:0},z={sg:x,id:0,Wn:0,hit_fract:0,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),len:0},l={sg:n,em:0,fm:0,result:0,len:0},F={sg:g,em:0,fm:0,result:0,km:new Float32Array(3),coll_norm:new Float32Array(3),coll_dist:0,len:0},r={sg:h,ia:0,trans:new Float32Array(3),quat:new Float32Array(4),
len:0},E=[q,G,H,z,l,F,r];a.MP=function(a,c){var f={$v:a?!0:!1,nk:null,hi:[],Pg:""};if(c){var g=u("__util"),h=u("__container");f.nk={addEventListener:function(a,b){"message"!=a&&g.K("Wrong web worker event");e(f.Pg,f.$v,b)},removeEventListener:function(a){"message"!=a&&g.K("Wrong web worker event");e(f.Pg,f.$v,null)},postMessage:function(a){var b;a:{for(b=0;b<t.length;b+=2)if(t[b+1]==f.Pg){b=d[b+Number(!!f.$v)];break a}b=null}b({data:a})},terminate:function(){for(var a=0;a<t.length;a+=2)if(t[a+1]==
f.Pg){d.splice(a,2);t.splice(a,2);break}}};if(f.$v){var n=b4w.get_namespace(u),k=g.Zs(n+"_worker");t.push(n);t.push(k);d.push(null);d.push(null);f.Pg=k;(h=h.DQ(a))?b?h.addEventListener("load",function(){b4w.require("__bindings",f.Pg)},!1):(b4w.cleanup("__bindings",f.Pg),b4w.cleanup("__ipc",f.Pg),b4w.require("__bindings",f.Pg)):(h=document.createElement("script"),h.src=a,h.defer="defer",h.async="async",h.addEventListener("load",function(){b=!1;b4w.require("__bindings",f.Pg)},!1),document.head.appendChild(h))}else f.Pg=
b4w.get_namespace(u)}else a?f.nk=new Worker(a):f.nk=self;return f};a.lN=function(a,b){function d(c){if(c.constructor==ArrayBuffer)c=new Float32Array(c);else if(c[0].constructor==ArrayBuffer){for(var e=0;e<c.length;e++)d(c[e]);return}e=c[0]|0;switch(e){case v:var f=q;f.ia=c[1]|0;f.time=c[2];f.trans[0]=c[3];f.trans[1]=c[4];f.trans[2]=c[5];f.quat[0]=c[6];f.quat[1]=c[7];f.quat[2]=c[8];f.quat[3]=c[9];f.Fi[0]=c[10];f.Fi[1]=c[11];f.Fi[2]=c[12];f.bi[0]=c[13];f.bi[1]=c[14];f.bi[2]=c[15];break;case p:f=G;f.uz=
c[1]|0;f.LB=c[2]|0;f.trans[0]=c[3];f.trans[1]=c[4];f.trans[2]=c[5];f.quat[0]=c[6];f.quat[1]=c[7];f.quat[2]=c[8];f.quat[3]=c[9];break;case k:f=H;f.id=c[1]|0;f.Wn=c[2]|0;f.hit_fract=c[3];f.hit_time=c[4];break;case x:f=z;f.id=c[1]|0;f.Wn=c[2]|0;f.hit_fract=c[3];f.hit_time=c[4];f.hit_pos[0]=c[5];f.hit_pos[1]=c[6];f.hit_pos[2]=c[7];f.hit_norm[0]=c[8];f.hit_norm[1]=c[9];f.hit_norm[2]=c[10];break;case n:f=l;f.em=c[1]|0;f.fm=c[2]|0;f.result=!!c[3];break;case g:f=F;f.em=c[1]|0;f.fm=c[2]|0;f.result=!!c[3];
f.km[0]=c[4];f.km[1]=c[5];f.km[2]=c[6];f.coll_norm[0]=c[7];f.coll_norm[1]=c[8];f.coll_norm[2]=c[9];f.coll_dist=c[10];break;case h:f=r;f.ia=c[1]|0;f.trans[0]=c[2];f.trans[1]=c[3];f.trans[2]=c[4];f.quat[0]=c[5];f.quat[1]=c[6];f.quat[2]=c[7];f.quat[3]=c[8];break;default:f=c}b(a,e,f)}c(E);a.nk.addEventListener("message",function(a){d(a.data)},!1)};a.cleanup=function(){};a.oa=function(a,b){if(a)switch(b){case v:var c=q,d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.ia;d[2]=c.time;d[3]=c.trans[0];d[4]=c.trans[1];
d[5]=c.trans[2];d[6]=c.quat[0];d[7]=c.quat[1];d[8]=c.quat[2];d[9]=c.quat[3];d[10]=c.Fi[0];d[11]=c.Fi[1];d[12]=c.Fi[2];d[13]=c.bi[0];d[14]=c.bi[1];d[15]=c.bi[2];a.hi.push(d.buffer);break;case p:c=G;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.uz;d[2]=c.LB;d[3]=c.trans[0];d[4]=c.trans[1];d[5]=c.trans[2];d[6]=c.quat[0];d[7]=c.quat[1];d[8]=c.quat[2];d[9]=c.quat[3];a.hi.push(d.buffer);break;case k:c=H;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.id;d[2]=c.Wn;d[3]=c.hit_fract;d[4]=c.hit_time;a.hi.push(d.buffer);
break;case x:c=z;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.id;d[2]=c.Wn;d[3]=c.hit_fract;d[4]=c.hit_time;d[5]=c.hit_pos[0];d[6]=c.hit_pos[1];d[7]=c.hit_pos[2];d[8]=c.hit_norm[0];d[9]=c.hit_norm[1];d[10]=c.hit_norm[2];a.hi.push(d.buffer);break;case n:c=l;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.em;d[2]=c.fm;d[3]=c.result;a.hi.push(d.buffer);break;case g:c=F;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.em;d[2]=c.fm;d[3]=c.result;d[4]=c.km[0];d[5]=c.km[1];d[6]=c.km[2];d[7]=c.coll_norm[0];d[8]=c.coll_norm[1];
d[9]=c.coll_norm[2];d[10]=c.coll_dist;a.hi.push(d.buffer);break;case h:c=r;d=new Float32Array(c.len);d[0]=c.sg;d[1]=c.ia;d[2]=c.trans[0];d[3]=c.trans[1];d[4]=c.trans[2];d[5]=c.quat[0];d[6]=c.quat[1];d[7]=c.quat[2];d[8]=c.quat[3];a.hi.push(d.buffer);break;default:d=[];for(c=1;c<arguments.length;c++)d.push(arguments[c]);a.nk.postMessage(d)}};a.ZT=function(a){a&&a.hi.length&&(a.nk.postMessage(a.hi),a.hi.length=0)};a.mG=function(a){switch(a){case v:return q;case p:return G;case k:return H;case x:return z;
case n:return l;case g:return F;case h:return r;default:return null}};a.terminate=function(a){a.nk.terminate();a.nk=null};a.Wv=function(a){return!!a.nk};a.TG=function(a){return!!a.Pg}};b4w.module.__hud=function(a,u){function e(a){a.font="bold 15px Courier New";a.textBaseline="middle";a.shadowBlur=0;a.shadowColor=null}function c(a){b(' SCENE "'+a.name+'"');b(" Active                 Subscene   Lamps   Size   RenderCalls   Time");if(a.J){var c=0,d=0,e=0;k.fa(a.J.wa,function(a,g){if(g.type!=x.uk){for(var h=Math.round(g.H.width)+"x"+Math.round(g.H.height),n=0,k=0;k<g.Za.length;k++)n+=g.Za[k].La.length;k=g.Gk;if(g.type==x.wd||g.type==x.jf)n*=6;var l=g.$b&&!g.ym,f=l?g.vf:0;g.enqueue||
(g.vf=0);var q=l?" (\u2713)":" (\u2715)",t=x.Sx(g);b(q,t,g.Xo,h,k,"of",n,"  ",f.toFixed(3));g.Gk=0;c+=n;l&&(d+=k,e+=f)}});return[c,d,e]}b("No INFO")}function b(){for(var a=80+20*d[0],b=arguments[0],c=1;c<arguments.length;c++){for(var e="",g=0;g<v[c]-String(arguments[c]).length;g++)e+=" ";b+=e+arguments[c]}d[0]++;h.fillText(b,30,a)}function n(a,b,c){b=a.zc*b;c.x=a.x+b;c.y=a.y;c.zc=a.zc-2*b;c.Ub=a.Ub}function g(a){return a.x+a.zc/2}function p(a){var b=h,c={x:0,y:0,zc:0,Ub:0},d=b.canvas.width,b=b.canvas.height;
c.x=0;c.y=0;c.zc=d;c.Ub=b;n(c,.01,c);d=.02*c.Ub;c.x=c.x;c.y+=d;c.zc=c.zc;c.Ub=c.Ub-2*d;d=c.zc/8;c.x+=d*a;c.y=c.y;c.zc=d;c.Ub=c.Ub;n(c,.02,c);return c}var k=u("__graph"),x=u("__subscene"),v=[5,30,4,10,5,3,5],h=null,d=[0,0];a.init=function(a){a=a.getContext("2d");e(a);return h=a};a.rn=function(){h&&e(h)};a.reset=function(){var a=h;a&&(a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,0,a.canvas.width,a.canvas.height),d[0]=0,d[1]=0)};a.DV=function(a,e){var g=
h;if(g){g.textAlign="left";g.fillStyle="rgba(0,255,0,255)";b(" FPS",(1/e).toFixed(2));d[0]++;for(var n=g=0,k=0,l=0;l<a.length;l++){var q=c(a[l]),g=g+q[0],n=n+q[1],k=k+q[2];d[0]++}b(" ----------------------------------------------------------------");b("    ","TOTAL ACTIVE","","",n,"of",g,"  ",k.toFixed(3))}};a.print=function(){var a=h;a&&(a.textAlign="left",a.fillStyle="rgba(0,255,0,255)",b.apply(Math,arguments))};a.plot_array=function(a,b,c,d,e,n,k){var r=h;if(r){b=p(b);var l=b.Ub/5;b.x=b.x;b.y+=
4*l;b.zc=b.zc;b.Ub=l;r.textAlign="center";r.fillStyle="#00FF00";h.fillText(a,g(b),b.y-10);r.strokeStyle="#00FF00";r.lineWidth=.5;r.beginPath();r.moveTo(b.x,b.y);r.lineTo(b.x+b.zc,b.y);r.lineTo(b.x+b.zc,b.y+b.Ub);r.lineTo(b.x,b.y+b.Ub);r.closePath();r.stroke();if(!n&&!k)for(n=1E6,k=-1E6,a=0;a<c.length;a++)n=Math.min(n,c[a]),k=Math.max(k,c[a]);r.textAlign="right";h.fillText(String(n),b.x-10,b.y+b.Ub);h.fillText(String(k),b.x-10,b.y);r.textAlign="center";h.fillText(String(d),b.x,b.y+b.Ub+15);h.fillText(String(e),
b.x+b.zc,b.y+b.Ub+15);r.strokeStyle="#FF0000";r.lineWidth=1.5;r.beginPath();d=b.zc/(c.length-1);k=b.Ub/(k-n);for(a=0;a<c.length;a++)e=b.x+d*a,l=b.y+b.Ub-(c[a]-n)*k,a?r.lineTo(e,l):r.moveTo(e,l);r.stroke()}};a.draw_mixer_strip=function(a,b,c,d,e,n,k){var r=h;if(r)for(r.textAlign="center",r.fillStyle="#00FF00",r.font="bold 12px Courier",c=p(c),h.fillText(b?"["+a+"]":a,g(c),c.y),0<=n&&h.fillText(n?"[M]":"[ ]",g(c)-15,c.y+30),0<=k&&h.fillText(k?"[S]":"[ ]",g(c)+15,c.y+30),a={x:0,y:0,zc:0,Ub:0},b=0;b<
d.length;b++){n=d[b];var l="VOLUME"==n[0];if(l){k=c.y+350;var w=c.zc,f=a;f.x=c.x;f.y=k;f.zc=w;f.Ub=250}else{k=c.y+50+50*b;var w=c.zc,f=c.Ub,y=a;y.x=c.x;y.y=k;y.zc=w;y.Ub=f}k=r;var w=a,y=b==e,q=n[0],f=n[1],t=n[2],z=n[3],B=(z-t)/n[4],B=1>B?Math.floor(1/B-1E-5).toFixed(0).length:0;n=n[5]?Math.log(f/t)/Math.log(z/t):(f-t)/(z-t);k.textAlign="center";y?k.fillText("["+q+"]",g(w),w.y):k.fillText(q,g(w),w.y);k.strokeStyle="#00FF00";k.lineWidth=l?3:1;l?(k.textAlign="right",k.fillText(z.toFixed(B),g(w)-10,w.y+
15),k.textAlign="right",k.fillText(t.toFixed(B),g(w)-10,w.y+w.Ub-15)):(k.textAlign="right",k.fillText(t.toFixed(B),w.x+28,w.y+15),k.textAlign="left",k.fillText(z.toFixed(B),w.x+w.zc-28,w.y+15));k.beginPath();if(l){var J=w.y+15+(w.Ub-30)*(1-n);k.moveTo(g(w),w.y+15);k.lineTo(g(w),w.y+w.Ub-15);k.moveTo(g(w)-5,w.y+15);k.lineTo(g(w)+5,w.y+15);k.moveTo(g(w)-5,w.y+w.Ub-15);k.lineTo(g(w)+5,w.y+w.Ub-15);k.moveTo(g(w)-5,J);k.lineTo(g(w)+5,J)}else{var C=w.x+30+(w.zc-60)*n;k.moveTo(w.x+30,w.y+15);k.lineTo(w.x+
w.zc-30,w.y+15);k.moveTo(w.x+30,w.y+15-5);k.lineTo(w.x+30,w.y+15+5);k.moveTo(w.x+w.zc-30,w.y+15-5);k.lineTo(w.x+w.zc-30,w.y+15+5);k.moveTo(C,w.y+15-5);k.lineTo(C,w.y+15+5)}k.stroke();"EQ_Q"==q?(n=Math.log(1+1/(2*f*f)+Math.sqrt((2+1/(f*f))*(2+1/(f*f))/4-1))/Math.log(2),l?(k.textAlign="left",k.fillText(f.toFixed(B),g(w)+10,J),k.textAlign="left",k.fillText("("+n.toFixed(B+1)+")",g(w)+10,J+10)):(k.textAlign="right",k.fillText(f.toFixed(B),C,w.y+30),k.textAlign="left",k.fillText("("+n.toFixed(B+1)+")",
C,w.y+30))):l?(k.textAlign="left",k.fillText(f.toFixed(B),g(w)+10,J)):(k.textAlign="center",k.fillText(f.toFixed(B),C,w.y+30))}}};b4w.module.__material=function(a,u){function e(){return{name:"",type:"",Jc:"",Eg:!1,Nd:null,Cg:[],jb:"",yc:!1,oy:!1,Fa:!1,oe:!1,ny:!1,it:!1,Np:!1,we:!1,Uj:!1,Bi:!1,Or:!1,Pm:!1,ih:0,Li:0,od:0,Ue:"",lc:new Float32Array(3),de:0,Ou:0,Pu:0,gx:0,Mu:0,Nu:0,Fu:0,alpha:0,cf:"",me:new Float32Array(3),Ms:0,Jx:0,Kx:0,nn:0,Hx:0,Ix:0,Jf:0,Bd:0,yd:0,ha:{Di:!1,shore_smoothing:!1,absorb_factor:0,foam_factor:0,ox:new Float32Array(3),rx:new Float32Array(3),px:0,sx:0,xm:new Float32Array(3),hv:0,sss_strength:0,sss_width:0,
norm_uv_velocity:0,is_dynamic:!1,waves_height:0,waves_length:0,dst_noise_scale0:0,dst_noise_scale1:0,dst_noise_freq0:0,dst_noise_freq1:0,dir_min_shore_fac:0,dir_freq:0,dir_noise_scale:0,dir_noise_freq:0,dir_min_noise_fac:0,dst_min_fac:0,waves_hor_fac:0,Yv:!1,Iw:0,Jw:0,Lu:0,Wu:!1,mj:0,lj:0},Ri:{Go:!1,mr:"",lr:""},hn:{reflect_factor:0,fresnel:0,fresnel_factor:0},xo:{size:0,Hr:0,fx:new Float32Array(3),lw:new Float32Array(3),ex:0,jw:0,Nx:0,aw:!1,Ox:0,Px:0},pd:{Mp:!1,Ui:!1,Sg:0,Og:0,Jb:"",ki:0,ji:0,li:0}}}
var c=u("__util");a.pS=e;a.OO=function(){var a=e();a.name="DEFAULT";a.type="SURFACE";a.Jc=c.nv();a.Eg=!1;a.Nd=null;a.Cg=[];a.jb="OPAQUE";a.yc=!1;a.oy=!1;a.Fa=!0;a.it=!1;a.Np=!1;a.Uj=!1;a.Pm=!1;a.ih=0;a.Li=0;a.od=0;a.Ue="LAMBERT";a.lc.set([.8,.8,.8]);a.de=.8;a.alpha=1;a.cf="COOKTORR";a.me.set([1,1,1]);a.Ms=.5;a.nn=50;a.Jf=1;a.Bd=0;a.yd=1;a.ha.Di=!1;a.Ri.Go=!1;a.hn.reflect_factor=0;a.hn.fresnel=0;a.hn.fresnel_factor=1.25;a.pd.Mp=!1;return a};a.LW=function(a,c){c.name=a.name;c.type=a.type;c.Jc=a.uuid;
c.Eg=a.use_nodes;c.Nd=a.node_tree;c.Cg=a.texture_slots;c.jb=a.game_settings.alpha_blend;c.yc=a.use_shadeless;c.oy=a.use_transparency;c.Fa=a.game_settings.use_backface_culling;c.oe=a.use_tangent_shading;c.ny=a.use_orco_tex_coord;c.it=a.use_vertex_color_paint;c.Np=a.b4w_double_sided_lighting;c.we=a.b4w_do_not_render;c.Uj=a.b4w_render_above_all;c.Bi=a.b4w_lens_flares;c.Or=a.b4w_wettable;c.Pm=a.b4w_refractive;c.ih=a.b4w_refr_bump;c.Li=a.pass_index;c.od=a.offset_z;c.Ue=a.diffuse_shader;c.lc.set(a.diffuse_color);
c.de=a.diffuse_intensity;c.Ou=a.diffuse_toon_size;c.Pu=a.diffuse_toon_smooth;c.gx=a.roughness;c.Mu=a.diffuse_fresnel;c.Nu=a.diffuse_fresnel_factor;c.Fu=a.darkness;c.alpha=a.alpha;c.cf=a.specular_shader;c.me.set(a.specular_color);c.Ms=a.specular_intensity;c.Jx=a.specular_toon_size;c.Kx=a.specular_toon_smooth;c.nn=a.specular_hardness;c.Hx=a.specular_ior;c.Ix=a.specular_slope;c.Jf=a.specular_alpha;c.Bd=a.emit;c.yd=a.ambient;var b=c.ha;b.Di=a.b4w_water;b.shore_smoothing=a.b4w_water_shore_smoothing;b.absorb_factor=
a.b4w_water_absorb_factor;b.foam_factor=a.b4w_foam_factor;b.ox.set(a.b4w_shallow_water_col);b.rx.set(a.b4w_shore_water_col);b.px=a.b4w_shallow_water_col_fac;b.sx=a.b4w_shore_water_col_fac;b.xm.set(a.b4w_water_fog_color);b.hv=a.b4w_water_fog_density;b.sss_strength=a.b4w_water_sss_strength;b.sss_width=a.b4w_water_sss_width;b.norm_uv_velocity=a.b4w_water_norm_uv_velocity;b.is_dynamic=a.b4w_water_dynamic;b.waves_height=a.b4w_waves_height;b.waves_length=a.b4w_waves_length;b.dst_noise_scale0=a.b4w_water_dst_noise_scale0;
b.dst_noise_scale1=a.b4w_water_dst_noise_scale1;b.dst_noise_freq0=a.b4w_water_dst_noise_freq0;b.dst_noise_freq1=a.b4w_water_dst_noise_freq1;b.dir_min_shore_fac=a.b4w_water_dir_min_shore_fac;b.dir_freq=a.b4w_water_dir_freq;b.dir_noise_scale=a.b4w_water_dir_noise_scale;b.dir_noise_freq=a.b4w_water_dir_noise_freq;b.dir_min_noise_fac=a.b4w_water_dir_min_noise_fac;b.dst_min_fac=a.b4w_water_dst_min_fac;b.waves_hor_fac=a.b4w_water_waves_hor_fac;b.Yv=a.b4w_generated_mesh;b.Iw=a.b4w_water_num_cascads;b.Jw=
a.b4w_water_subdivs;b.Lu=a.b4w_water_detailed_dist;b.Wu=a.b4w_water_enable_caust;b.mj=a.b4w_water_caust_scale;b.lj=a.b4w_water_caust_brightness;b=c.Ri;b.Go=a.b4w_terrain;b.mr=a.b4w_dynamic_grass_size;b.lr=a.b4w_dynamic_grass_color;b=c.hn;b.reflect_factor=a.raytrace_mirror.reflect_factor;b.fresnel=a.raytrace_mirror.fresnel;b.fresnel_factor=a.raytrace_mirror.fresnel_factor;b=c.xo;b.size=a.halo.size;b.Hr=a.halo.hardness;b.fx.set(a.halo.b4w_halo_rings_color);b.lw.set(a.halo.b4w_halo_lines_color);b.ex=
a.halo.ring_count;b.jw=a.halo.line_count;b.Nx=a.halo.star_tip_count;b.aw=a.b4w_halo_sky_stars;b.Ox=a.b4w_halo_stars_blend_height;b.Px=a.b4w_halo_stars_min_height;b=c.pd;b.Mp=a.b4w_collision;b.Ui=a.b4w_use_ghost;b.Sg=a.physics.friction;b.Og=a.physics.elasticity;b.Jb=a.b4w_collision_id;b.ki=a.b4w_collision_margin;b.ji=a.b4w_collision_group;b.li=a.b4w_collision_mask};a.rO=function(a){a.name=a.name;a.type=a.type;a.Jc=a.Jc;a.Eg=a.Eg;a.Nd=a.Nd;a.Cg=a.Cg.slice();a.jb=a.jb;a.yc=a.yc;a.oy=a.oy;a.Fa=a.Fa;a.oe=
a.oe;a.ny=a.ny;a.it=a.it;a.Np=a.Np;a.we=a.we;a.Uj=a.Uj;a.Bi=a.Bi;a.Or=a.Or;a.Pm=a.Pm;a.ih=a.ih;a.Li=a.Li;a.od=a.od;a.Ue=a.Ue;a.lc.set(a.lc);a.de=a.de;a.Ou=a.Ou;a.Pu=a.Pu;a.gx=a.gx;a.Mu=a.Mu;a.Nu=a.Nu;a.Fu=a.Fu;a.alpha=a.alpha;a.cf=a.cf;a.me.set(a.me);a.Ms=a.Ms;a.Jx=a.Jx;a.Kx=a.Kx;a.nn=a.nn;a.Hx=a.Hx;a.Ix=a.Ix;a.Jf=a.Jf;a.Bd=a.Bd;a.yd=a.yd;var b=a.ha,c=a.ha;c.Di=b.Di;c.shore_smoothing=b.shore_smoothing;c.absorb_factor=b.absorb_factor;c.foam_factor=b.foam_factor;c.ox.set(b.ox);c.rx.set(b.rx);c.px=b.px;
c.sx=b.sx;c.xm=b.xm;c.hv=b.hv;c.sss_strength=b.sss_strength;c.sss_width=b.sss_width;c.norm_uv_velocity=b.norm_uv_velocity;c.is_dynamic=b.is_dynamic;c.waves_height=b.waves_height;c.waves_length=b.waves_length;c.dst_noise_scale0=b.dst_noise_scale0;c.dst_noise_scale1=b.dst_noise_scale1;c.dst_noise_freq0=b.dst_noise_freq0;c.dst_noise_freq1=b.dst_noise_freq1;c.dir_min_shore_fac=b.dir_min_shore_fac;c.dir_freq=b.dir_freq;c.dir_noise_scale=b.dir_noise_scale;c.dir_noise_freq=b.dir_noise_freq;c.dir_min_noise_fac=
b.dir_min_noise_fac;c.dst_min_fac=b.dst_min_fac;c.waves_hor_fac=b.waves_hor_fac;c.Yv=b.Yv;c.Iw=b.Iw;c.Jw=b.Jw;c.Lu=b.Lu;c.Wu=b.Wu;c.mj=b.mj;c.lj=b.lj;c=b=a.Ri;c.Go=b.Go;c.mr=b.mr;c.lr=b.lr;c=b=a.hn;c.reflect_factor=b.reflect_factor;c.fresnel=b.fresnel;c.fresnel_factor=b.fresnel_factor;c=b=a.xo;c.size=b.size;c.Hr=b.Hr;c.fx.set(b.fx);c.lw.set(b.lw);c.ex=b.ex;c.jw=b.jw;c.Nx=b.Nx;c.aw=b.aw;c.Ox=b.Ox;c.Px=b.Px;c=b=a.pd;c.Mp=b.Mp;c.Ui=b.Ui;c.Sg=b.Sg;c.Og=b.Og;c.Jb=b.Jb;c.ki=b.ki;c.ji=b.ji;c.li=b.li;return a}};b4w.module.__renderer=function(a,u){function e(a){for(var c=a.H,e=a.Za,f=null,h=H.Lb(c.D,A),k=0;k<e.length;k++){var n=e[k];if(n.$b){var r=n.zb,l=n.La;if(r.Oi!=f){D.useProgram(r.Oi);for(var f=a,w=c,t=r,B=t.BJ,E=B.length;E--;){var J=B[E];J.ro(D,J.Ce,f,w)}if(t.Ro&&!t.Hw)for(t.FB.length||g(t),t=t.FB,B=t.length;B--;)J=t[B],J.ro(D,J.Ce,f,w);f=r.Oi}n.mf?(D.enable(D.SAMPLE_ALPHA_TO_COVERAGE),a.mb||D.enable(D.BLEND)):(D.disable(D.SAMPLE_ALPHA_TO_COVERAGE),a.mb||D.disable(D.BLEND));for(n=0;n<l.length;n++)if(B=
l[n],B.$b){t=B.ug;w=B.ya;v.sU(w);v.SG()&&"DEBUG_VIEW"==w.type&&(w.dr=z.smooth(p.oN(w.bo),w.dr,1,15));if(K.alpha_sort&&w.hf){var J=t,B=B.Tv,E=h,x=w.ra;if(F.dist(E,B.wK)>K.alpha_sort_threshold*Math.min(B.rN,1)||J.ur)d.zW(x,B,J.D,E),F.copy(E,B.wK),J.ur=!1}for(var J=a,B=w,E=r,W=E.CJ,R=W.length;R--;)x=W[R],x.ro(D,x.Ce,t,B);if(E.Ro&&!E.Hw){E.gs.length||g(E);W=E.gs;for(R=W.length;R--;)x=W[R],x.ro(D,x.Ce,t,B);E.Ro=!1}D.depthMask(B.Qa);B.Fa?D.enable(D.CULL_FACE):D.disable(D.CULL_FACE);x=B.na;W=D;for(R=0;R<
x.length;R++){var P=x[R];W.activeTexture(W.TEXTURE0+R);W.bindTexture(P.rb,P.Cb);P.ne&&W.generateMipmap(P.rb)}if(J.type==q.re||J.type==q.tk){t=J;E=E.Gl;W=t.H.Qb;x=W.Cb;W=W.rb;R=t.Ng;for(P=0;6>P;P++){var M=b(P);K.yz?(D.bindTexture(D.TEXTURE_CUBE_MAP,x),D.texImage2D(M,0,D.RGBA,1,1,0,D.RGBA,D.UNSIGNED_BYTE,y)):(D.uniformMatrix4fv(E.u_cube_view_matrix,!1,R[P]),D.uniform4fv(E.u_sky_tex_fac,t.rp),D.uniform3fv(E.u_sky_tex_color,t.pp),D.uniform1f(E.u_sky_tex_dvar,t.qp),D.uniform3fv(E.u_horizon_color,t.Md),
D.uniform3fv(E.u_zenith_color,t.Xd),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,M,x,0),C(B,0));if(t.Qo&&5!=P){var M=t,u=P,N=m;K.yz?N.set(y):(D.readPixels(191,191,1,1,D.RGBA,D.UNSIGNED_BYTE,N),255!=N[0]&&255!=N[1]&&255!=N[2]||D.readPixels(191,220,1,1,D.RGBA,D.UNSIGNED_BYTE,N));var X=N[0],Ca=N[1],N=N[2],X=X/255,Ca=Ca/255,N=N/255;4===u?(M.uf[3]=X,M.uf[7]=Ca,M.uf[11]=N):(M.uf[4*u]=X,M.uf[4*u+1]=Ca,M.uf[4*u+2]=N)}}K.Yx&&(D.bindTexture(W,x),D.generateMipmap(W),D.texParameteri(W,D.TEXTURE_MIN_FILTER,
G.$i));J.Gk+=6}else if(J.type==q.Kn){t=B;B=E.Gl;x=J.H.Qb;E=x.Cb;W=x.rb;x=J.Ng;K.Yx&&(D.activeTexture(D.TEXTURE7),D.bindTexture(W,E),D.generateMipmap(W),D.texParameteri(W,D.TEXTURE_MIN_FILTER,G.$i));for(W=0;5>W;++W)for(D.viewport(0,0,128*Math.pow(.5,W),128*Math.pow(.5,W)),R=W/4,P=0;6>P;P++)M=b(P),D.uniformMatrix4fv(B.u_cube_view_matrix,!1,x[P]),D.uniform1f(B.u_roughness,R),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,M,E,W),C(t,0);J.Gk+=30}else C(B,t.py),J.Gk++;v.tU(w);v.SG()&&"MAIN"==
w.type&&p.pN(w.id,w.vf)}}}}function c(a){if(a){var b=(a.nb?D.COLOR_BUFFER_BIT:0)|(a.ub?D.DEPTH_BUFFER_BIT:0);if(!b)return;switch(a.type){case q.Yd:a=f;break;case q.xd:a=r;break;case q.Yf:a=E;break;case q.Ne:case q.ph:case q.Gn:a=w;break;case q.rh:case q.mq:case q.zt:a=f;break;default:a=K.background_color}}else b=D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT,a=K.background_color;D.colorMask(!0,!0,!0,!0);D.depthMask(!0);D.clearColor(a[0],a[1],a[2],a[3]);D.clear(b)}function b(a){switch(a){case 0:return D.TEXTURE_CUBE_MAP_POSITIVE_X;
case 1:return D.TEXTURE_CUBE_MAP_NEGATIVE_X;case 2:return D.TEXTURE_CUBE_MAP_POSITIVE_Y;case 3:return D.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return D.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return D.TEXTURE_CUBE_MAP_NEGATIVE_Z}}function n(a){var b=h.tA(),c=a.vq,d=a.ra,e=d.Fb;a.ff.length=0;var f=1,m;for(m in e)f=Math.max(f,e[m].frames);for(e=0;e<f;e++){m=b.createVertexArray();J(m);d.Xg&&D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,d.Xg);for(var g=0;g<d.sd.length;g++){D.bindBuffer(D.ARRAY_BUFFER,d.sd[g].lk);for(var k=
0;k<c.length;k++){var n=c[k];n.sy==d.sd[g].type&&(D.enableVertexAttribArray(n.Ce),D.vertexAttribPointer(n.Ce,n.oc,n.wo,n.wo==D.FLOAT?!1:!0,0,n.Xt+n.iv*e),M(n.Ce,n.um))}}J(null);a.ff.push(m)}}function g(a){var b=a.Gl,c=a.CJ,d=a.gs,e=a.BJ,f=a.FB;c.length=0;d.length=0;e.length=0;f.length=0;for(var m in b){var h=!1,g=null,k=null;switch(m){case "u_proj_matrix":g=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.Bb)};h=!0;break;case "u_view_refl_matrix":g=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.Zp)};h=!0;
break;case "u_view_tsr":case "u_view_tsr_frag":g=function(a,b,c,d){d.xc?a.uniformMatrix3fv(b,!1,d.us):a.uniformMatrix3fv(b,!1,d.Rf)};h=!0;break;case "u_view_tsr_inverse":g=function(a,b,c,d){d.xc?a.uniformMatrix3fv(b,!1,d.dx):a.uniformMatrix3fv(b,!1,d.vy)};h=!0;break;case "u_shadow_cast_billboard_view_tsr":g=function(a,b,c,d){a.uniformMatrix3fv(b,!1,d.Gs)};h=!0;break;case "u_view_proj_prev":g=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.JB)};h=!0;break;case "u_view_proj_matrix":g=function(a,b,c,d){a.uniformMatrix4fv(b,
!1,d.Qf)};h=!0;break;case "u_view_proj_inverse":g=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.uy)};h=!0;break;case "u_sky_vp_inverse":g=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.jh)};h=!0;break;case "u_camera_eye":case "u_camera_eye_frag":g=function(a,b,c,d){a.uniform3fv(b,H.Lb(d.D,A))};h=!0;break;case "u_camera_quat":g=function(a,b,c,d){a.uniform4fv(b,H.vb(d.D,X))};h=!0;break;case "u_view_max_depth":g=function(a,b,c,d){a.uniform1f(b,d.far)};h=!0;break;case "u_camera_range":g=function(a,b,c,d){a.uniform2f(b,
d.near,d.far)};h=!0;break;case "u_csm_center_dists":g=function(a,b,c,d){a.uniform4fv(b,d.Bu)};break;case "u_height":g=function(a,b,c,d){a.uniform1f(b,d.height)};h=!0;break;case "u_pcf_blur_radii":g=function(a,b,c,d){a.uniform4fv(b,d.bp)};break;case "u_dof_dist":g=function(a,b,c,d){d.dof_on?a.uniform1f(b,d.dof_distance):a.uniform1f(b,0)};h=!0;break;case "u_dof_front_start":g=function(a,b,c,d){a.uniform1f(b,d.dof_front_start)};h=!0;break;case "u_dof_front_end":g=function(a,b,c,d){a.uniform1f(b,d.dof_front_end)};
h=!0;break;case "u_dof_rear_start":g=function(a,b,c,d){a.uniform1f(b,d.dof_rear_start)};h=!0;break;case "u_dof_rear_end":g=function(a,b,c,d){a.uniform1f(b,d.dof_rear_end)};h=!0;break;case "u_dof_bokeh_intensity":g=function(a,b,c,d){a.uniform1f(b,d.dof_bokeh_intensity)};h=!0;break;case "u_camera_direction":g=function(a,b,c,d){a.uniform3fv(b,d.direction)};h=!0;break;case "u_cam_water_depth":g=function(a,b,c){a.uniform1f(b,c.Hq)};h=!0;break;case "u_fog_color_density":g=function(a,b,c){a.uniform4fv(b,
c.Ld)};break;case "u_fog_params":g=function(a,b,c){a.uniform4fv(b,c.Af)};break;case "u_underwater_fog_color_density":g=function(a,b,c){a.uniform4fv(b,c.Xh)};break;case "u_bloom_key":g=function(a,b,c){a.uniform1f(b,c.Vn)};break;case "u_average_lum_val":g=function(a,b,c){a.uniform1f(b,c.average_luminance)};break;case "u_mipmap_1x1":g=function(a,b,c){a.uniform1f(b,c.gw)};break;case "u_bloom_edge_lum":g=function(a,b,c){a.uniform1f(b,c.Un)};break;case "u_time":g=function(a,b,c){a.uniform1f(b,c.time)};
h=!0;break;case "u_wind":g=function(a,b,c){a.uniform3fv(b,c.Yh)};h=!0;break;case "u_sky_tex_dvar":g=function(a,b,c){a.uniform1f(b,c.qp)};break;case "u_sky_tex_fac":g=function(a,b,c){a.uniform4fv(b,c.rp)};break;case "u_sky_tex_color":g=function(a,b,c){a.uniform3fv(b,c.pp)};break;case "u_horizon_color":g=function(a,b,c){a.uniform3fv(b,c.Md)};break;case "u_zenith_color":g=function(a,b,c){a.uniform3fv(b,c.Xd)};break;case "u_environment_energy":g=function(a,b,c){a.uniform1f(b,c.kg)};break;case "u_bsdf_cube_sky_dim":g=
function(a,b,c){a.uniform1f(b,c.eu)};h=!0;break;case "u_sky_color":g=function(a,b,c){a.uniform3fv(b,c.vl)};break;case "u_rayleigh_brightness":g=function(a,b,c){a.uniform1f(b,c.rayleigh_brightness)};break;case "u_mie_brightness":g=function(a,b,c){a.uniform1f(b,c.mie_brightness)};break;case "u_spot_brightness":g=function(a,b,c){a.uniform1f(b,c.spot_brightness)};break;case "u_scatter_strength":g=function(a,b,c){a.uniform1f(b,c.scatter_strength)};break;case "u_rayleigh_strength":g=function(a,b,c){a.uniform1f(b,
c.rayleigh_strength)};break;case "u_mie_strength":g=function(a,b,c){a.uniform1f(b,c.mie_strength)};break;case "u_rayleigh_collection_power":g=function(a,b,c){a.uniform1f(b,c.rayleigh_collection_power)};break;case "u_mie_collection_power":g=function(a,b,c){a.uniform1f(b,c.mie_collection_power)};break;case "u_mie_distribution":g=function(a,b,c){a.uniform1f(b,c.mie_distribution)};break;case "u_light_positions":g=function(a,b,c){a.uniform4fv(b,c.Sm)};break;case "u_light_directions":g=function(a,b,c){a.uniform3fv(b,
c.Vr)};break;case "u_light_color_intensities":g=function(a,b,c){a.uniform4fv(b,c.Rm)};break;case "u_sun_quaternion":g=function(a,b,c){a.uniform4fv(b,c.Vx)};break;case "u_sun_intensity":g=function(a,b,c){a.uniform3fv(b,c.Ux)};break;case "u_sun_direction":g=function(a,b,c){a.uniform3fv(b,c.Tx)};break;case "u_debug_view_mode":g=function(a,b,c){a.uniform1i(b,c.debug_view_mode)};break;case "u_debug_colors_seed":g=function(a,b,c){a.uniform1f(b,c.debug_colors_seed)};break;case "u_debug_render_time_threshold":g=
function(a,b,c){a.uniform1f(b,c.Hu)};break;case "u_subpixel_jitter":g=function(a,b,c){a.uniform2fv(b,c.RA)};h=!0;break;case "u_subsample_indices":g=function(a,b,c){a.uniform4fv(b,c.ES)};h=!0;break;case "u_radial_blur_step":g=function(a,b,c){a.uniform1f(b,c.fp)};break;case "u_god_rays_intensity":g=function(a,b,c){a.uniform1f(b,c.god_rays_intensity)};break;case "u_ssao_radius_increase":g=function(a,b,c){a.uniform1f(b,c.yp)};break;case "u_ssao_blur_discard_value":g=function(a,b,c){a.uniform1f(b,c.tp)};
h=!0;break;case "u_ssao_influence":g=function(a,b,c){a.uniform1f(b,c.xp)};break;case "u_ssao_dist_factor":g=function(a,b,c){a.uniform1f(b,c.vp)};break;case "u_texel_size":g=function(a,b,c){a.uniform2fv(b,c.Ss)};h=!0;break;case "u_normal_offset":g=function(a,b,c){a.uniform1f(b,c.self_shadow_normal_offset)};break;case "u_v_light_ts":g=function(a,b,c){a.uniform4fv(b,c.Sp)};h=!0;break;case "u_v_light_r":g=function(a,b,c){a.uniform4fv(b,c.Rp)};h=!0;break;case "u_v_light_tsr":g=function(a,b,c){a.uniformMatrix3fv(b,
!1,c.kt)};h=!0;break;case "u_p_light_matrix0":g=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Rj[0])};h=!0;break;case "u_p_light_matrix1":g=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Rj[1])};h=!0;break;case "u_p_light_matrix2":g=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Rj[2])};h=!0;break;case "u_p_light_matrix3":g=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Rj[3])};h=!0;break;case "u_outline_color":g=function(a,b,c){a.uniform3fv(b,c.Nh)};break;case "u_draw_outline":g=function(a,b,c){a.uniform1f(b,c.jr)};
h=!0;break;case "u_glow_mask_small_coeff":g=function(a,b,c){a.uniform1f(b,c.small_glow_mask_coeff)};h=!0;break;case "u_glow_mask_large_coeff":g=function(a,b,c){a.uniform1f(b,c.large_glow_mask_coeff)};h=!0;break;case "u_brightness":g=function(a,b,c){a.uniform1f(b,c.brightness)};break;case "u_contrast":g=function(a,b,c){a.uniform1f(b,c.contrast)};break;case "u_exposure":g=function(a,b,c){a.uniform1f(b,c.exposure)};break;case "u_saturation":g=function(a,b,c){a.uniform1f(b,c.saturation)};break;case "u_enable_hmd_stereo":g=
function(a,b,c){a.uniform1i(b,c.enable_hmd_stereo)};break;case "u_distortion_params":g=function(a,b,c){a.uniform4fv(b,c.uj)};break;case "u_chromatic_aberration_coefs":g=function(a,b,c){a.uniform4fv(b,c.chromatic_aberration_coefs)};break;case "u_motion_blur_exp":g=function(a,b,c){a.uniform1f(b,c.zw)};h=!0;break;case "u_motion_blur_decay_threshold":g=function(a,b,c){a.uniform1f(b,c.mb_decay_threshold)};h=!0;break;case "u_model_tsr":k=function(a,b,c){a.uniformMatrix3fv(b,!1,c.D)};h=!0;break;case "u_model_tsr_inverse":k=
function(a,b,c){a.uniformMatrix3fv(b,!1,c.Ey)};h=!0;break;case "u_transb":k=function(a,b,c){a.uniform4fv(b,c.Wd)};h=!0;break;case "u_transa":k=function(a,b,c){a.uniform4fv(b,c.Ke)};h=!0;break;case "u_arm_rel_trans":k=function(a,b,c){a.uniform4fv(b,c.sq)};h=!0;break;case "u_arm_rel_quat":k=function(a,b,c){a.uniform4fv(b,c.rq)};h=!0;break;case "u_quat":k=function(a,b,c){a.uniform4fv(b,H.vb(c.D,X))};h=!0;break;case "u_quatsb":k=function(a,b,c){a.uniform4fv(b,c.Qd)};h=!0;break;case "u_quatsa":k=function(a,
b,c){a.uniform4fv(b,c.Fe)};h=!0;break;case "u_frame_factor":k=function(a,b,c){a.uniform1f(b,c.Bf)};h=!0;break;case "au_center_pos":k=function(a,b,c){a.uniform3fv(b,c.ju)};h=!0;break;case "au_wind_bending_amp":k=function(a,b,c){a.uniform1f(b,c.Tf)};h=!0;break;case "au_wind_bending_freq":k=function(a,b,c){a.uniform1f(b,c.Uf)};h=!0;break;case "au_detail_bending_freq":k=function(a,b,c){a.uniform1f(b,c.yf)};h=!0;break;case "au_detail_bending_amp":k=function(a,b,c){a.uniform1f(b,c.xf)};h=!0;break;case "au_branch_bending_amp":k=
function(a,b,c){a.uniform1f(b,c.sf)};h=!0;break;case "u_node_values":k=function(a,b,c,d){a.uniform4fv(b,d.Lh)};h=!0;break;case "u_node_rgbs":k=function(a,b,c,d){a.uniform3fv(b,d.ie)};h=!0;break;case "u_lod_coverage":k=function(a,b,c,d){a.uniform1f(b,d.Zk.Re)};h=!0;break;case "u_lod_cmp_logic":k=function(a,b,c,d){a.uniform1f(b,d.Zk.ou)};h=!0;break;case "u_diffuse_color":k=function(a,b,c,d){a.uniform4fv(b,d.lc)};h=!0;break;case "u_diffuse_intensity":k=function(a,b,c,d){a.uniform1f(b,d.de)};h=!0;break;
case "u_diffuse_params":k=function(a,b,c,d){a.uniform2fv(b,d.Ad)};h=!0;break;case "u_emit":k=function(a,b,c,d){a.uniform1f(b,d.Bd)};h=!0;break;case "u_ambient":k=function(a,b,c,d){a.uniform1f(b,d.yd)};h=!0;break;case "u_specular_color":k=function(a,b,c,d){a.uniform3fv(b,d.me)};h=!0;break;case "u_specular_alpha":k=function(a,b,c,d){a.uniform1f(b,d.Jf)};h=!0;break;case "u_specular_params":k=function(a,b,c,d){a.uniform3fv(b,d.He)};h=!0;break;case "u_reflect_factor":k=function(a,b,c,d){a.uniform1f(b,
d.reflect_factor)};h=!0;break;case "u_mirror_factor":k=function(a,b,c,d){a.uniform1f(b,d.Wm)};h=!0;break;case "u_grass_map_dim":k=function(a,b,c,d){a.uniform3fv(b,d.kd)};h=!0;break;case "u_grass_size":k=function(a,b,c,d){a.uniform1f(b,d.Cj)};h=!0;break;case "u_scale_threshold":k=function(a,b,c,d){a.uniform1f(b,d.Dv)};h=!0;break;case "u_cube_fog":k=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.uf)};break;case "u_jitter_amp":k=function(a,b,c,d){a.uniform1f(b,d.cw)};h=!0;break;case "u_jitter_freq":k=function(a,
b,c,d){a.uniform1f(b,d.dw)};h=!0;break;case "u_wireframe_edge_color":k=function(a,b,c,d){a.uniform3fv(b,d.wireframe_edge_color)};break;case "u_cluster_id":k=function(a,b,c,d){a.uniform1f(b,d.Qq)};h=!0;break;case "u_batch_debug_id_color":k=function(a,b,c,d){a.uniform1f(b,d.Gu)};h=!0;break;case "u_batch_debug_main_render_time":k=function(a,b,c,d){a.uniform1f(b,d.dr)};h=!0;break;case "u_refr_bump":k=function(a,b,c,d){a.uniform1f(b,d.ih)};h=!0;break;case "u_line_width":k=function(a,b,c,d){a.uniform1f(b,
d.Tm)};h=!0;break;case "u_lamp_light_positions":k=function(a,b,c,d){a.uniform3fv(b,d.Jo)};break;case "u_lamp_light_directions":k=function(a,b,c,d){a.uniform3fv(b,d.Rr)};break;case "u_lamp_light_color_intensities":k=function(a,b,c,d){a.uniform3fv(b,d.Qr)};break;case "u_halo_size":k=function(a,b,c,d){a.uniform1f(b,d.Nv)};h=!0;break;case "u_halo_hardness":k=function(a,b,c,d){a.uniform1f(b,d.Kv)};h=!0;break;case "u_halo_rings_color":k=function(a,b,c,d){a.uniform3fv(b,d.Mv)};h=!0;break;case "u_halo_lines_color":k=
function(a,b,c,d){a.uniform3fv(b,d.Lv)};h=!0;break;case "u_halo_stars_blend":k=function(a,b,c,d){a.uniform1f(b,d.Ov)};h=!0;break;case "u_halo_stars_height":k=function(a,b,c,d){a.uniform1f(b,d.Pv)};h=!0;break;case "u_fresnel_params":k=function(a,b,c,d){a.uniform2fv(b,d.Fh)};h=!0;break;case "u_texture_scale":k=function(a,b,c,d){a.uniform3fv(b,d.mh)};h=!0;break;case "u_parallax_scale":k=function(a,b,c,d){a.uniform1f(b,d.parallax_scale)};h=!0;break;case "u_color_id":k=function(a,b,c){a.uniform3fv(b,c.Bk)};
h=!0;break;case "u_diffuse_color_factor":k=function(a,b,c,d){a.uniform1f(b,d.ti)};h=!0;break;case "u_alpha_factor":k=function(a,b,c,d){a.uniform1f(b,d.Jg)};h=!0;break;case "u_specular_color_factor":k=function(a,b,c,d){a.uniform1f(b,d.bk)};h=!0;break;case "u_normal_factor":k=function(a,b,c,d){a.uniform1f(b,d.Wo)};h=!0;break;case "u_normalmap0_scale":k=function(a,b,c,d){a.uniform2fv(b,d.Qj[0])};h=!0;break;case "u_normalmap1_scale":k=function(a,b,c,d){a.uniform2fv(b,d.Qj[1])};h=!0;break;case "u_normalmap2_scale":k=
function(a,b,c,d){a.uniform2fv(b,d.Qj[2])};h=!0;break;case "u_normalmap3_scale":k=function(a,b,c,d){a.uniform2fv(b,d.Qj[3])};h=!0;break;case "u_foam_factor":k=function(a,b,c,d){a.uniform1f(b,d.foam_factor)};h=!0;break;case "u_foam_uv_freq":k=function(a,b,c,d){a.uniform2fv(b,d.gv)};h=!0;break;case "u_foam_mag":k=function(a,b,c,d){a.uniform2fv(b,d.fv)};h=!0;break;case "u_foam_scale":k=function(a,b,c,d){a.uniform2fv(b,d.rr)};h=!0;break;case "u_water_norm_uv_velocity":k=function(a,b,c,d){a.uniform1f(b,
d.Ol)};h=!0;break;case "u_shallow_water_col":k=function(a,b,c,d){a.uniform3fv(b,d.shallow_water_col)};h=!0;break;case "u_shore_water_col":k=function(a,b,c,d){a.uniform3fv(b,d.shore_water_col)};h=!0;break;case "u_water_shallow_col_fac":k=function(a,b,c,d){a.uniform1f(b,d.shallow_water_col_fac)};h=!0;break;case "u_water_shore_col_fac":k=function(a,b,c,d){a.uniform1f(b,d.shore_water_col_fac)};h=!0;break;case "u_p_length":k=function(a,b,c,d){a.uniform1f(b,d.Ja.ay)};h=!0;break;case "u_p_cyclic":k=function(a,
b,c,d){a.uniform1i(b,d.Ja.cyclic)};h=!0;break;case "u_p_max_lifetime":k=function(a,b,c,d){a.uniform1f(b,d.Ja.iw)};h=!0;break;case "u_p_fade_in":k=function(a,b,c,d){a.uniform1f(b,d.Ja.xj)};h=!0;break;case "u_p_fade_out":k=function(a,b,c,d){a.uniform1f(b,d.Ja.Ve)};h=!0;break;case "u_p_size":k=function(a,b,c,d){a.uniform1f(b,d.Ja.size)};h=!0;break;case "u_p_alpha_start":k=function(a,b,c,d){a.uniform1f(b,d.Ja.Nt)};h=!0;break;case "u_p_alpha_end":k=function(a,b,c,d){a.uniform1f(b,d.Ja.Mt)};h=!0;break;
case "u_p_nfactor":k=function(a,b,c,d){a.uniform1f(b,d.Ja.So)};h=!0;break;case "u_p_gravity":k=function(a,b,c,d){a.uniform1f(b,d.Ja.Ev)};h=!0;break;case "u_p_mass":k=function(a,b,c,d){a.uniform1f(b,d.Ja.ah)};h=!0;break;case "u_p_color_ramp":k=function(a,b,c,d){a.uniform4fv(b,d.Ja.ru)};h=!0;break;case "u_p_wind_fac":k=function(a,b,c,d){a.uniform1f(b,d.Ja.Dy)};h=!0;break;case "u_p_time":k=function(a,b,c,d){a.uniform1f(b,d.Ja.time)};h=!0;break;case "u_p_tilt":k=function(a,b,c,d){a.uniform1f(b,d.Ja.Zx)};
h=!0;break;case "u_p_tilt_rand":k=function(a,b,c,d){a.uniform1f(b,d.Ja.$x)};h=!0;break;case "u_position":k=function(a,b,c,d){a.uniform3fv(b,d.Yl)};h=!0;break;case "u_va_frame_factor":k=function(a,b,c){a.uniform1f(b,c.qy)};h=!0;break;case "u_refl_plane":k=function(a,b,c){a.uniform4fv(b,c.xc)};h=!0;break;case "u_outline_intensity":k=function(a,b,c){a.uniform1f(b,c.Ki)};h=!0;break;case "u_obj_info":k=function(a,b,c,d){a.uniform3fv(b,d.Yo)},h=!0}k&&(k={name:m,ro:k,Ce:b[m]},h?c.push(k):d.push(k));g&&(k=
{name:m,ro:g,Ce:b[m]},h?e.push(k):f.push(k))}if(d.length||f.length){a=a.GB;for(var n in a)delete a[n];for(n=0;n<d.length;n++)k=d[n],a[k.name]=k;for(n=0;n<f.length;n++)k=f[n],a[k.name]=k}else a.Hw=!0}var p=u("__batch"),k=u("__camera"),x=u("__config"),v=u("__debug"),h=u("__extensions"),d=u("__geometry"),t=u("__quat"),q=u("__subscene"),G=u("__textures"),H=u("__tsr"),z=u("__util"),l=u("__version"),F=u("__vec3"),r=[1,0,0,1],E=[1,1,1,1],w=[0,0,0,1],f=[0,0,0,0],y=new Uint8Array([91.8,142.8,.96*255,255]),
D=null,N=null,M=null,B=null,J=null,C=null,A=new Float32Array(3),X=t.create(),m=new Uint8Array(4),K=x.L;a.yg=function(a){var b=K.background_color;a.clearColor(b[0],b[1],b[2],b[3]);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);a.frontFace(a.CCW);a.cullFace(a.BACK);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);D=a};a.wj=function(a){if(a.$b&&!a.ym)if(a.type==q.yt){v.SB(a);var d=a.H;D.bindFramebuffer(D.READ_FRAMEBUFFER,d.vr);D.bindFramebuffer(D.DRAW_FRAMEBUFFER,
d.We);var f=0;d.Qb&&(f|=D.COLOR_BUFFER_BIT);d.wf&&(f|=D.DEPTH_BUFFER_BIT);D.blitFramebuffer(0,0,d.width,d.height,0,0,d.width,d.height,f,D.NEAREST);v.TB(a);v.vz("draw resolve")}else if(a.type==q.Jy)v.SB(a),d=a.H,D.bindFramebuffer(D.FRAMEBUFFER,d.vr),D.bindTexture(D.TEXTURE_2D,d.Qb.Cb),D.copyTexSubImage2D(D.TEXTURE_2D,0,0,0,0,0,d.width,d.height,0),v.TB(a),v.vz("draw copy");else{v.SB(a);d=a.H;D.bindFramebuffer(D.FRAMEBUFFER,d.We);a.uq&&(f=d.Qb,D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,
f.rb,f.Cb,0));D.viewport(0,0,d.width,d.height);a.type!=q.wd&&a.type!=q.jf&&c(a);a.mb?D.enable(D.BLEND):D.disable(D.BLEND);a.Sc?D.enable(D.DEPTH_TEST):D.disable(D.DEPTH_TEST);switch(a.type){case q.xd:D.enable(D.POLYGON_OFFSET_FILL);D.polygonOffset(a.self_shadow_polygon_offset,a.self_shadow_polygon_offset);D.cullFace(D.BACK);break;case q.Zd:case q.Xf:D.disable(D.POLYGON_OFFSET_FILL);D.cullFace(D.FRONT);break;case q.qh:D.enable(D.POLYGON_OFFSET_FILL);D.polygonOffset(-4,-4);D.cullFace(D.BACK);break;case q.Yd:if(1<
K.ec||K.JU){D.enable(D.POLYGON_OFFSET_FILL);D.polygonOffset(-2,-2);break}default:D.disable(D.POLYGON_OFFSET_FILL),D.cullFace(D.BACK)}if(a.type==q.wd||a.type==q.jf)for(var d=a.H,f=d.Qb.Cb,h=0;6>h;h++){var g=b(h);d.fc=a.Ng[h];H.from_mat4(d.fc,d.Rf);k.LN(d);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,g,f,0);c(a);for(var g=a.Za,m=0;m<g.length;m++)for(var n=0;n<g[m].La.length;n++){var r=g[m].La[n];r.$b=r.Uz[h]}e(a)}else e(a);v.TB(a);v.vz("draw subscene: "+q.Sx(a))}};a.clear=function(a){D.bindFramebuffer(D.FRAMEBUFFER,
a.H.We);c(a)};a.St=function(a){var b=a.vq;b.length=0;var c=a.ra,e=c.Fb,f=a.zb.attributes,h;for(h in f){var g=e[h],k=d.vo(h),m=d.BR(h),r=d.rG(h);b.push({sy:k,wo:m,Ce:f[h],Xt:g.offset*r,iv:1<g.frames?g.length*r:0,oc:g.oc,um:g.um})}if("DEBUG"==l.type())for(h in e)k=d.vo(h),b=d.MU(c.sd,k),b=c.sd[b],g=a.eb.Pf+" | "+a.eb.ye,k=e[h].length*e[h].frames*d.rG(h),v.zQ(b.TP,g,h,k,h in f);K.$y&&n(a)};a.kN=n;a.mO=function(a){for(var b=h.tA(),c=0;c<a.ff.length;c++)b.deleteVertexArray(a.ff[c]);a.ff.length=0};a.oO=
function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({sy:d.sy,wo:d.wo,Ce:d.Ce,Xt:d.Xt,iv:d.iv,oc:d.oc,um:d.um})}return b};a.jN=g;a.hE=function(a){var b=a.zb,c=a.na;a=a.Mf;D.useProgram(b.Oi);for(var d=0;d<c.length;d++)D.uniform1i(b.Gl[a[d]],d)};a.cx=function(a,b,c,d,e,f){D.bindFramebuffer(D.FRAMEBUFFER,a);D.readPixels(b,c,d,e,D.RGBA,D.UNSIGNED_BYTE,f);D.bindFramebuffer(D.FRAMEBUFFER,null);return f};a.wW=function(a){var b=a.zb;b.Hw||(D.useProgram(b.Oi),b.gs.length||g(b),b=b.GB.u_cube_fog,
b.ro(D,b.Ce,null,a))};a.rU=function(a,b){var c=D.createFramebuffer();D.bindFramebuffer(D.FRAMEBUFFER,c);if(G.Fo(a)){var d=a.gf;D.framebufferRenderbuffer(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.RENDERBUFFER,d)}else if(G.Ho(a)){var e=a,d=e.Cb,e=e.rb==D.TEXTURE_CUBE_MAP?D.TEXTURE_CUBE_MAP_NEGATIVE_Z:e.rb;D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,e,d,0)}G.Fo(b)?(d=b.gf,D.framebufferRenderbuffer(D.FRAMEBUFFER,D.DEPTH_ATTACHMENT,D.RENDERBUFFER,d)):G.Ho(b)&&(e=b,d=e.Cb,e=e.rb,D.framebufferTexture2D(D.FRAMEBUFFER,
D.DEPTH_ATTACHMENT,e,d,0));v.XN();D.bindFramebuffer(D.FRAMEBUFFER,null);return c};a.qU=function(a,b,c,d,e){null==a?(D.bindFramebuffer(D.FRAMEBUFFER,a),D.viewport(0,0,d,e),D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT)):(G.Fo(b)?D.deleteRenderbuffer(b.gf):G.Ho(b)&&D.deleteTexture(b.Cb),G.Fo(c)?D.deleteRenderbuffer(c.gf):G.Ho(c)&&D.deleteTexture(c.Cb),D.deleteFramebuffer(a))};a.MZ=function(){};a.dQ=function(a,b,c,d,e,f){a=a.Cb;D.viewport(0,0,c,c);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,
b,a,0);b=p.zu("FLIP_CUBEMAP_COORDS");a=b.zb;D.activeTexture(D.TEXTURE0);D.bindTexture(D.TEXTURE_2D,e);var h=e=0;c!=d&&(e=1/(6*d),h=1/(4*d));D.uniform1i(a.Gl.u_tex_number,f);D.uniform2fv(a.Gl.u_delta,[e,h]);D.useProgram(a.Oi);C(b,0);D.bindTexture(D.TEXTURE_2D,null)};a.eQ=function(a,b,c,d,e){D.bindFramebuffer(D.FRAMEBUFFER,d);d=a.Cb;a=a.rb;D.bindTexture(a,d);D.viewport(0,0,b,c);D.texImage2D(a,0,D.RGBA,b,c,0,D.RGBA,D.UNSIGNED_BYTE,null);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,a,d,0);
b=p.zu("NONE");c=b.zb;D.activeTexture(D.TEXTURE0);D.bindTexture(a,e);D.useProgram(c.Oi);C(b,0);D.bindFramebuffer(D.FRAMEBUFFER,null);D.bindTexture(a,null)};a.cleanup=function(){};a.$U=function(){var a=h.ER(),b=h.tA();K.$D=a?!0:!1;K.$y=b?!0:!1;a?(N=function(b,c,d,e){a.drawElementsInstanced(D.TRIANGLES,b,c,d,e)},M=function(b,c){a.vertexAttribDivisor(b,c)},B=function(b,c,d){a.drawArraysInstanced(D.TRIANGLES,b,c,d)}):(N=function(a,b,c){D.drawElements(D.TRIANGLES,a,b,c)},M=function(){},B=function(a,b){D.drawArrays(D.TRIANGLES,
a,b)});b?(J=function(a){b.bindVertexArray(a)},C=function(a,b){var c=a.ra;J(a.ff[b]);c.Xg?N(c.count,c.Gm,0,c.Km):B(0,c.count,c.Km);J(null)}):C=function(a,b){for(var c=a.ra,d=a.vq,e=0;e<c.sd.length;e++){D.bindBuffer(D.ARRAY_BUFFER,c.sd[e].lk);for(var f=0;f<d.length;f++){var h=d[f];h.sy==c.sd[e].type&&(D.enableVertexAttribArray(h.Ce),D.vertexAttribPointer(h.Ce,h.oc,h.wo,h.wo==D.FLOAT?!1:!0,0,h.Xt+h.iv*b),M(h.Ce,h.um))}}c.Xg?(D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,c.Xg),N(c.count,c.Gm,0,c.Km)):B(0,c.count,
c.Km);for(e=0;e<d.length;e++)h=d[e],D.disableVertexAttribArray(h.Ce)}};a.reset=function(){J=B=M=N=D=null}};b4w.module.__shaders=function(a,u){function e(){return{Pf:"",ye:"",Ah:[],$e:[],status:0,Tt:0,Xx:0}}function c(a){var b=e();b.Pf=a.Pf;b.ye=a.ye;b.Ah=J.W(a.Ah);b.$e=J.W(a.$e);b.status=a.status;b.Tt=a.Tt;b.Xx=a.Xx;return b}function b(a,b,c){var d=a.Ah;"string"==typeof c?(a=n(a,c))&&(c=a[1]):c=String(c);for(a=0;a<d.length;a++)if(d[a][0]==b){d[a][1]=c;break}}function n(a,b){for(var c=a.Ah,d=0;d<c.length;d++)if(c[d][0]==b)return c[d];return!1}function g(a,b){var c=a+b;if(!(c in O)){var d=H(X.shaders_path,
a),e=H(X.shaders_path,b),d=l(d),e=l(e),f;for(f in e)d[f]=e[f];e=[];for(f in d)e.push([f,d[f]]);O[c]=e}return O[c]}function p(a,b){return a+b}function k(a,b){return(a.split(";").map(function(a){return(a=a.match(b))&&(a[3]?parseInt(a[3],10):1)}).filter(function(a){return a})||[]).reduce(p,0)}function x(a,b){var c=G(a.type),d=G(b.type),e=a.cm,f=b.cm;return c>d?-1:c<d?1:e>f?-1:e<f?1:0}function v(a){if(C.gb){a=a.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2");var b=U}else b=ia;a=a.split(";").map(function(a){return(a=
a.match(b))&&{type:a[2],cm:a[4]?parseInt(a[4],10):1}}).filter(function(a){return a});return d(a,Z,A.uw)}function h(a,b,c){a=a.split(";");for(var e=[],f=0;f<a.length;f++){var h=a[f].match(sa);h&&e.push({type:h[2],cm:h[4]?parseInt(h[4],10):1})}return d(e,b,c)}function d(a,b,c){function d(){for(var c=0;m<a.length;){var d=a[m];if(3!=G(d.type))break;c+=q(d.type)*d.cm;m++}g=k+c;if(g>wa)return!1;t(b,k,c,0,3);return!0}function e(){for(var c=wa-g,d=c,e=c;m<a.length;){var f=a[m];if(2!=G(f.type))break;f=q(f.type)*
f.cm;if(f<=d)d-=f;else if(f<=e)e-=f;else return!1;m++}e=c-e;t(b,g,c-d,0,2);t(b,wa-e,e,2,2);return!0}function f(){for(;m<a.length;){for(var d=a[m],d=q(d.type)*d.cm,e=-1,f=c+1,h=-1,g=0;4>g;g++){var k=pa;k[0]=0;k[1]=1;var n;n=b;for(var r=g,l=d,A=k;ea<n.length&&15===n[ea];)ea++;for(;0<wa&&15===n[wa];)wa--;if(wa-ea<l)n=!1;else{for(var r=1<<r,w=0,V=-1,y=n.length+1,L=!1,ha=ea;ha<=wa;ha++)ha<wa&&!(n[ha]&r)?L||(w=ha,L=!0):(L&&(L=ha-w,L>=l&&L<y&&(y=L,V=w)),L=!1);0>V?n=!1:(A[0]=V,A[1]=y,n=!0)}n&&k[1]<f&&(h=
k[0],f=k[1],e=g)}if(0>e)return!1;t(b,h,d,e,1);m++}return!0}if(!a.length)return!0;for(var h=0;h<c;h++)b[h]=0;wa=c;a.sort(x);var g=0,k=0,m=0;return function(){for(;m<a.length;){var c=a[m];if(4!=G(c.type))break;k+=q(c.type)*c.cm;m++}if(k>wa)return!1;ea=k;t(b,0,k,0,4);return!0}()&&d()&&e()&&f()}function t(a,b,c,d,e){for(var f=0,h=0;h<e;h++)f|=1<<d+h;for(h=0;h<c;h++)a[b+h]|=f}function q(a){switch(a){case "mat4":a=4;break;case "mat3":a=3;break;case "mat2":a=2;break;default:a=1}return a}function G(a){switch(a){case "mat4":case "vec4":case "ivec4":case "bvec4":case "mat2":a=
4;break;case "mat3":case "vec3":case "ivec3":case "bvec3":a=3;break;case "vec2":case "ivec2":case "bvec2":a=2;break;default:a=1}return a}function H(a,b){var c=a+b;if(K[c])return K[c];if(R){var d=R[b];if(!d)return null;d=u("__gpp_parser").j_.parse(d)}else if(d=u("shader_texts")[b],!d)return null;return K[c]=d}function z(a,b){for(var c={},d=b.Ah||[],e=0;e<d.length;e++)c[d[e][0]]=[d[e][1]];for(e=0;e<b.$e.length;e++)c["USE_NODE_"+b.$e[e].id]=["1"];C.gb?(c.GLSL1=["0"],c.GLSL3=["1"],c.GLSL_VERSION=["300 es"],
c.GLSL_IN=["in"],c.GLSL_OUT=["out"],c.GLSL_OUT_FRAG_COLOR=["glsl_out_frag_color"],c.GLSL_TEXTURE=["texture"],c.GLSL_TEXTURE_CUBE=["texture"],c.GLSL_TEXTURE_PROJ=["textureProj"],c.GLSL_TEXTURE_LOD=["textureLod"],c.GLSL_TEXTURE_CUBE_LOD=["textureLod"]):(c.GLSL1=["1"],c.GLSL3=["0"],c.GLSL_VERSION=["100"],c.GLSL_IN="vert"==a?["attribute"]:["varying"],c.GLSL_OUT="vert"==a?["varying"]:[""],c.GLSL_OUT_FRAG_COLOR=["gl_FragColor"],c.GLSL_TEXTURE=["texture2D"],c.GLSL_TEXTURE_CUBE=["textureCube"],c.GLSL_TEXTURE_PROJ=
["texture2DProj"],c.GLSL_TEXTURE_LOD=["textureLod"],C.Yx?(c.GLSL_TEXTURE_LOD=["texture2DLodEXT"],c.GLSL_TEXTURE_CUBE_LOD=["textureCubeLodEXT"]):(c.GLSL_TEXTURE_LOD=["texture2D"],c.GLSL_TEXTURE_CUBE_LOD=["textureCube"]));c.GLSL_SMPLR2D_SHDW=C.Tq&&!C.As?["sampler2DShadow"]:["sampler2D"];for(var f in c)c[f][0].constructor!=String&&B.warn("Warning! The value of a directive '"+f+"' is not of type string.");return c}function l(a){function b(a){"var"==a.a?d[a.c]=a.b.join(""):"include"==a.a&&(a=H(X.shaders_path,
X.TI+a.F),c(a,b))}function c(a,b,d){if(a instanceof Array)for(var e=0;e<a.length;e++)c(a[e],b,d);else if(a instanceof Object&&a){b&&b(a);for(e in a)c(a[e],b,d);d&&d(a)}}var d={};c(a,b);return d}function F(a,b,c){function d(b){b=b.f;for(var c=0;c<b.length;c++){var m=b[c];switch(m.a){case "cond":a:for(var m=m.f,V=0;V<m.length;V++){var t=m[V];switch(t.a){case "if":case "elif":if(e(t.j)){d(t.l);break a}break;case "else":d(t.l);break a;case "ifdef":t.c in l&&d(t.l);break;case "ifndef":t.c in l||d(t.l)}}break;
case "include":m=m.F;V=H(X.shaders_path,X.TI+m);w.push("include/"+m);d(V);w.pop();break;case "var":break;case "define":l[m.c]=m.b;break;case "error":J.K("Shader error: #error "+m.b.join(" "));break;case "line":break;case "pragma":r.push("#pragma "+m.c+" "+m.b.join(" "));break;case "undef":delete l[m.c];break;case "warning":B.warn("Shader warning: #warning "+m.b.join(" "));break;case "extension":m=k(m.b,l,A,!1);r.push("#extension "+m.join(" "));break;case "version":m=k(m.b,l,A,!1),r.push("#version "+
m.join(" "));case "#":break;case "node":q[m.c]=m;break;case "nodes_global":m=n;for(V=0;V<m.length;V++){var t=m[V],ha=q[t.id];if(ha)for(var C=0,ya=0;ya<ha.B.length;ya++){var p=ha.B[ya];if("node_param"==p.a){var z;if("PARTICLE_INFO"==t.id&&p.g)if(1==l.PARTICLE_BATCH)switch(z=!1,C){case 0:z=y(t.Ya,"PART_INFO_IND")||y(t.Ya,"PART_INFO_AGE")||y(t.Ya,"PART_INFO_LT")||y(t.Ya,"PART_INFO_SIZE");break;case 1:z=y(t.Ya,"PART_INFO_LOC");break;case 2:z=y(t.Ya,"PART_INFO_VEL");break;case 3:z=y(t.Ya,"PART_INFO_A_VEL");
break;case 4:z=y(t.Ya,"PART_INFO_IND")}else z=!1;else z=!0;z&&(p=p.i.join(" ")+" ","vert"==a?p+=t.Le[C]:"frag"==a&&(p+=t.da[C],null!==t.$o[C]&&(p+="="+t.$o[C])),p+=";",g(h(p)));C++}}}break;case "nodes_main":m=n;for(V=0;V<m.length;V++)if(t=m[V],ha=q[t.id]){C={};L=x=W=0;ya=ha;p=t;z=ya;for(var D={},G=0;G<z.C.length;G++){var ka=z.C[G];D[ka.c]=[ka.b.join("")]}z=D;for(D=0;D<p.Ya.length;D++)G=p.Ya[D][0],G in z&&(z[G]=[p.Ya[D][1]]);for(D=G=0;D<ya.B.length;D++)ka=ya.B[D],"node_out"==ka.a&&(z["USE_OUT_"+ka.c]=
[-1<E.indexOf(p.outputs[G])|0],G++);ya=z;p=t;z=ha.B;D=C;G=ya;for(ka=0;ka<z.length;ka++){var la=z[ka];switch(la.a){case "node_in":var v=p.inputs[W];if(null!==p.IA[W]){if(("MATERIAL_BEGIN"==p.id&&3===W||!G.MATERIAL_EXT&&("MATERIAL_BEGIN"==p.id&&4===W||"MATERIAL_END"==p.id&&3===W||"MATERIAL_END"==p.id&&4===W||"MATERIAL_END"==p.id&&5===W)||"TEXTURE_COLOR"==p.id||"TEXTURE_NORMAL"==p.id)&&la.g){D[la.c]=p.IA[W];W++;continue}var va=la.i.join(" ")+" ",va=va+(v+"="+p.IA[W]+";");g(h(va))}D[la.c]=v;W++;break;
case "node_out":v=p.outputs[x];if(!la.g||-1<E.indexOf(v))va=la.i.join(" ")+" ",va+=v+";",g(h(va)),D[la.c]=v;x++;break;case "node_param":"vert"==a?v=p.Le[L]:"frag"==a&&(v=p.da[L]),D[la.c]=v,L++}}r.push("{");f(t,ha.u,C,ya);r.push("}")}break;case "txt":g(m.b);break;default:J.K("Unknown element type: "+m.a)}}}function e(a,b){var c;c=k(a,l,A,!0,b);for(var d=[],e=0;e<c.length;e++)if(c[e]instanceof Object)switch(c[e].a){case "conditional_expr":var f=d.pop(),h=d.pop();d.pop()?d.push(h):d.push(f);break;case "logical_or_expr":for(var h=
d.pop(),L=0;L<c[e].o-1;L++)f=d.pop(),h=h||f;d.push(h);break;case "logical_and_expr":h=d.pop();for(L=0;L<c[e].o-1;L++)f=d.pop(),h=h&&f;d.push(h);break;case "logical_bitor_expr":h=d.pop();for(L=0;L<c[e].o-1;L++)h|=d.pop();d.push(h);break;case "logical_bitxor_expr":h=d.pop();for(L=0;L<c[e].o-1;L++)h^=d.pop();d.push(h);break;case "logical_bitand_expr":h=d.pop();for(L=0;L<c[e].o-1;L++)h&=d.pop();d.push(h);break;case "equal_expr":f=d.pop();h=d.pop();d.push(h==f);break;case "non_equal_expr":f=d.pop();h=
d.pop();d.push(h!=f);break;case "le_expr":f=d.pop();h=d.pop();d.push(h<=f);break;case "ge_expr":f=d.pop();h=d.pop();d.push(h>=f);break;case "l_expr":f=d.pop();h=d.pop();d.push(h<f);break;case "g_expr":f=d.pop();h=d.pop();d.push(h>f);break;case "left_shift_expr":h=d.pop();f=d.pop();d.push(h<<f);break;case "right_shift_expr":h=d.pop();f=d.pop();d.push(h>>f);break;case "add_expr":h=d.pop();f=d.pop();d.push(h+f);break;case "sub_expr":h=d.pop();f=d.pop();d.push(h-f);break;case "mul_expr":h=d.pop();f=d.pop();
d.push(h*f);break;case "div_expr":h=d.pop();f=d.pop();d.push(h/f);break;case "mod_expr":h=d.pop();f=d.pop();d.push(h%f);break;case "pre_inc_expr":case "post_inc_expr":f=d.pop();d.push(++f);break;case "pre_dec_expr":case "post_dec_expr":f=d.pop();d.push(--f);break;case "positive_expr":f=d.pop();d.push(+f);break;case "negative_expr":f=d.pop();d.push(-f);break;case "one_compl_expr":f=d.pop();d.push(~f);break;case "logic_negative_expr":f=d.pop();d.push(!f);break;default:J.K("Unknown operation type: "+
c[e].a)}else f=c[e],/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(f)?(d.push(0),0!=f.indexOf("USE_NODE_")&&(h=w[w.length-1],h in t||(t[h]=[]),-1==t[h].indexOf(f)&&(t[h].push(f),B.error("Undefined directive '"+f+"' in shader '"+h+"'. Should it be defined with #var/#node_var or #define?")))):d.push(parseFloat(c[e]));1==d.length?c=d[0]:(J.K("Incorrect expression: "+c.join(" ")),c=void 0);return c}function f(a,b,c,d){for(var h=0;h<b.length;h++){var L=b[h];switch(L.a){case "node_cond":a:for(var m=a,L=L.f,k=c,n=d,
r=0;r<L.length;r++){var A=L[r];switch(A.a){case "node_if":case "node_elif":if(e(A.j,n)){f(m,A.u,k,n);break a}break;case "node_else":f(m,A.u,k,n);break a;case "node_ifdef":(A.c in l||A.c in n)&&f(m,A.u,k,n);break;case "node_ifndef":A.c in l||A.c in n||f(m,A.u,k,n)}}break;case "txt":m=[];for(k=0;k<L.b.length;k++)n=L.b[k],n in c?m.push(c[n]):m.push(n);g(m,d)}}}function h(a){return a.match(/([\d]+\.[\d]+|[\w]+|[^\s])/g)}function g(b,c){var d=b;if(!C.gb&&"frag"==a){var e=d.join(" ");G&&(e.match(/[^;]*;/)?
(e=e.replace(/[^;]*;/,""),G=!1):e="");e=e.replace(/GLSL_OUT [^;]*;/g,"");e.match(/GLSL_OUT(?:$| [^;]*)/)&&(e=e.replace(/GLSL_OUT(?:$| [^;]*)/,""),G=!0);e=e.replace(/ {2,}/g," ");(e=e.trim())?d=e.split(" "):d=[]}b=d;b.length&&(d=k(b,l,A,!1,c),r.push(d.join(" ")))}function k(a,b,c,d,e){var f=[];m(a,b,c,d,f,e);return f}function m(a,b,c,d,e,f){for(var h=0;h<a.length;h++){var L=a[h];if(f&&L in f)L=f[L];else if(L in b)L=b[L];else{e.push(L);continue}0==L.length&&d?e.push(0):m(L,b,c,d,e,f)}}var n=c.$e,r=
[],l=z(a,c),A={},w=[c[a]],t={},q={},E=[],p;for(p in n)for(var D in n[p].inputs)E.push(n[p].inputs[D]);var G=!1;d(b);var W=0,x=0,L=0;return r.join("\n")}function r(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);return c}function E(a){W.deleteProgram(a.Oi);W.deleteShader(a.xy);W.deleteShader(a.kv);delete m[a.zV]}function w(a,b){!b&&a.length?b=a.length:b||(b=1);switch(b){case 1:return f(a);case 2:return"vec2("+f(a[0])+","+f(a[1])+")";case 3:return"vec3("+f(a[0])+","+f(a[1])+","+f(a[2])+
")";case 4:return"vec4("+f(a[0])+","+f(a[1])+","+f(a[2])+","+f(a[3])+")";case 9:return"mat3("+f(a[0])+","+f(a[1])+","+f(a[2])+","+f(a[3])+","+f(a[4])+","+f(a[5])+","+f(a[6])+","+f(a[7])+","+f(a[8])+")";case 16:return"mat4("+f(a[0])+","+f(a[1])+","+f(a[2])+","+f(a[3])+","+f(a[4])+","+f(a[5])+","+f(a[6])+","+f(a[7])+","+f(a[8])+","+f(a[9])+","+f(a[10])+","+f(a[11])+","+f(a[12])+","+f(a[13])+","+f(a[14])+","+f(a[15])+")";default:J.K("Wrong glsl value dimension")}}function f(a){return a%1?String(a):String(a)+
".0"}function y(a,b){for(var c=0;c<a.length;c++)if(a[c][0]==b)return!0;return!1}var D=u("__assets"),N=u("__config"),M=u("__debug"),B=u("__print"),J=u("__util"),C=N.L,A=N.zh,X=N.af,m={},K={},R=null,O={},S="anchors.glslf anchors.glslv color_id.glslf color_id.glslv shadow.glslf shadow.glslv error.glslf error.glslv grass_map.glslf grass_map.glslv halo.glslf halo.glslv line.glslf line.glslv main.glslf main.glslv main_stack.glslf particle_system.glslf particle_system_stack.glslf particle_system.glslv proc_skybox.glslf skybox.glslv lens_flares.glslf lens_flares.glslv sky.glslf sky.glslv water.glslf water.glslv tex_skybox.glslf debug_view.glslf debug_view.glslv node_skybox.glslf irradiance_skybox.glslf r_convolution_skybox.glslf postprocessing/antialiasing.glslf postprocessing/bloom_combine.glslf postprocessing/coc.glslf postprocessing/compositing.glslf postprocessing/depth_pack.glslf postprocessing/dof.glslf postprocessing/glow.glslf postprocessing/god_rays.glslf postprocessing/god_rays.glslv postprocessing/god_rays_combine.glslf postprocessing/luminance.glslf postprocessing/luminance_av.glslf postprocessing/luminance_truncated.glslf postprocessing/motion_blur.glslf postprocessing/outline.glslf postprocessing/performance.glslf postprocessing/postprocessing.glslf postprocessing/postprocessing.glslv postprocessing/smaa.glslf postprocessing/smaa.glslv postprocessing/ssao.glslf postprocessing/ssao_blur.glslf postprocessing/stereo.glslf postprocessing/precompute_brdf.glslf include/blending.glslf include/caustics.glslf include/color_util.glslf include/coverage.glslf include/depth_fetch.glslf include/dynamic_grass.glslv include/environment.glslf include/fog.glslf include/fxaa.glslf include/halo_color.glslf include/lighting_nodes.glslf include/math.glslv include/mirror.glslf include/nodes.glslf include/nodes.glslv include/pack.glslf include/particles.glslv include/particles_nodes.glslf include/particles_nodes.glslv include/precision_statement.glslf include/procedural.glslf include/refraction.glslf include/scale_texcoord.glslv include/shadow.glslf include/shadow.glslv include/skin.glslv include/sky_blending.glslf include/std.glsl include/to_world.glslv include/wind_bending.glslv".split(" ");
a.JD=0;a.BK=1;a.AK=2;a.EK=4;a.DK=8;a.CK=16;a.yK=32;var ga=/(?:^|[^a-zA-Z_])uniform.*?(sampler2D|samplerCube)(?=\s)(.*?\[\s*([0-9]*)\s*\])?/,sa=/(?:^|[^a-zA-Z_])(uniform)(?=\s)\s*(float|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4|sampler2D|samplerCube)\s*(.*?\[\s*([0-9]*)\s*\])?/,U=/(?:^|[^a-zA-Z_])(in)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,ia=/(?:^|[^a-zA-Z_])(varying)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,
fa=/(?:\W|^)discard(\W|$)/,pa=new Int16Array(2),Z=null,ma=null,aa=null,ea=0,wa=0,da=[],W=null,Ga=!1;a.yg=function(a){W=a};a.rS=e;a.sO=c;a.ma=b;a.qR=n;a.YU=function(a){a.Ah=J.W(g(a.Pf,a.ye));b(a,"PRECISION",N.L.precision);"highp"==N.L.precision?b(a,"EPSILON",w(1E-6)):b(a,"EPSILON",w(1E-4));b(a,"CONSTANTS_HACK",C.jC|0);b(a,"SRGB",C.srgb_type);b(a,"COMPARED_MODE",C.Tq|0)};a.FZ=function(a){return a.Pf};a.yZ=function(a){return a.ye};a.jR=function(a){var b=JSON.stringify(a.Pf)+JSON.stringify(a.ye)+JSON.stringify(a.Ah)+
JSON.stringify(a.$e),d=m[b];if(d)return d;var e=a.ye,f=H(X.shaders_path,a.Pf),e=H(X.shaders_path,e);if(!f||!e)return null;var f=F("vert",f,a),e=F("frag",e,a),d=0,g=k(e,ga);a.Xx=g;g>A.eB&&(d|=1);Z||(Z=new Uint32Array(A.uw));ma||(ma=new Uint32Array(A.aB));aa||(aa=new Uint32Array(A.vw));h(e,ma,A.aB)||(d|=2);h(f,aa,A.vw)||(d|=4);g=C.gb?(f.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2").match(/(?:^|[^a-zA-Z_])in(?=\s)/g)||[]).length:(f.match(/(?:^|[^a-zA-Z_])attribute(?=\s)/g)||[]).length;a.Tt=g;g>A.fB&&(d|=
8);v(e)||(d|=16);a.status=d;if(0===a.status){var d=W,n=r(d,f,d.VERTEX_SHADER),l=r(d,e,d.FRAGMENT_SHADER),g=d.createProgram();d.attachShader(g,n);d.attachShader(g,l);d.linkProgram(g);for(var n={xy:n,kv:l,Oi:g,attributes:{},Gl:{},gs:J.Ek(),FB:J.Ek(),GB:{},Ro:!0,Hw:!1,CJ:J.Ek(),BJ:J.Ek(),eb:c(a),zV:b,yG:!!e.match(fa),Mg:!0},w=d.getProgramParameter(g,d.ACTIVE_ATTRIBUTES),l=0;l<w;l++){var t=d.getActiveAttrib(g,l).name;n.attributes[t]=d.getAttribLocation(g,t)}w=d.getProgramParameter(g,d.ACTIVE_UNIFORMS);
for(l=0;l<w;l++)t=d.getActiveUniform(g,l).name.split("[0]").join(""),n.Gl[t]=d.getUniformLocation(g,t);m[b]=d=n;g=!W.getShaderParameter(d.kv,W.COMPILE_STATUS);n=!W.getShaderParameter(d.xy,W.COMPILE_STATUS);l=!W.getProgramParameter(d.Oi,W.LINK_STATUS);g?M.kI(d.kv,b,e):n?M.kI(d.xy,b,f):l&&M.xU(d.Oi,b,f,e);if(g||n||l)a.status|=32,d=null}else d=null;return d};a.$S=function(){Ga=!1;if(b4w.module_check("shader_texts"))Ga=!0;else{for(var a=[],b=D.AT_TEXT,c=0;c<S.length;c++){var d=J.Ii(X.shaders_path+S[c]);
a.push({id:S[c],type:b,url:d})}b=function(a,b){R||(R={});R[b]=a};a.length?D.enqueue(a,b,function(){Ga=!0}):B.error("Shaders have not been found.")}};a.OE=function(){return Ga};a.bZ=function(){return da};a.iG=function(){return m};a.cleanup=function(){for(var a in m)E(m[a]);for(var b in K)delete K[b];for(var c in da)delete da[c];aa=ma=Z=null;O={}};a.lO=E;a.cZ=function(a){var b=a.Ah;B.log("Shader: "+a.Pf+" "+a.ye+", "+String(b.length)+" directives: ");for(a=0;a<b.length;a++)B.log("  "+b[a][0],b[a][1])};
a.X=w;a.PE=function(a,b){return b in a.Gl?!0:!1};a.reset=function(){W=null}};b4w.module.__geometry=function(a,u){function e(){return{length:0,frames:1,oc:0,offset:0,um:0}}function c(a,b){for(var c=b.a_tbn,d=b.a_position,e=d.length,f=1;f<a.wb.length;f++)for(var h=a.wb[f].Ir,g=a.wb[f].mg.a_position,m=0;m<e;m++)d[m]+=h*g[m];d=Z.wv(c);for(f=0;f<d;f++){e=Z.identity(wa);for(m=1;m<a.wb.length;m++)if(g=a.wb[m].mg.a_tbn,h=a.wb[m].Ir)g=Z.Fm(g,f,da),h=Z.slerp(Z.identity(W),g,h,da),Z.Ew(h,e,e);m=Z.Fm(c,f,da);m=Z.Ew(e,m,da);Z.Pi(c,m,f)}}function b(a){return 65536<a.Wa?ia.jG()?!1:!0:!1}
function n(a){return 0<a.Aa.length?!0:!1}function g(a,b,c){if(!n(a))return a;c||fa.log('%cDEBUG max vertices exceeded for indexed submesh "'+a.name+'": '+a.Wa*(b||1)+", will use drawArrays","color: #aa0");b=a.Aa;c=a.Wa;var d=a.xa,e=a.la,f;for(f in d){var h=d[f],g=w(h,c);d[f]=p(b,h,g)}for(d=0;d<e.length;d++){var m=e[d];for(f in m)h=m[f],g=w(h,c),m[f]=p(b,h,g)}for(d=0;d<a.wb.length;d++){f=a.wb[d].mg;for(var k in f)h=f[k],g=w(h,c),f[k]=p(b,h,g)}a.Wa=b.length;a.Aa=new Uint16Array(0);return a}function p(a,
b,c){if(0==b.length)return new Float32Array(0);for(var d=new Float32Array(a.length*c),e=0;e<a.length;e++)for(var f=a[e],h=0;h<c;h++)d[c*e+h]=b[c*f+h];return d}function k(){return{ee:null,kc:C(),Gm:0,count:0,Fb:{},usage:0,ao:0,co:0,sd:[],Xg:null,wb:null,Km:1,Mg:!0}}function x(a,b,c,d){if("a_normal"==b)return d=Z.Bm(d),x(a,"a_tbn",c,d);var f=a.Fb,h=f[b],g=O(b);if(h)c&&h.oc!=c&&aa.K('invalid num_comp for "'+b+'"'),S(a.kc,b,d,h.offset);else{h=X(a.kc,g);-1==h&&(a.kc.push(A(g,0)),h=a.kc.length-1);var g=
a.kc[h].Ll,m=new g.constructor(g.length+d.length);m.set(g);a.kc[h].Ll=m;S(a.kc,b,d,g.length);b=f[b]=e();b.oc=c;b.offset=g.length;b.length=d.length}t(a);return a}function v(a,b){if("a_normal"==b){for(var c=v(a,"a_tbn"),d=Z.wv(c),e=new Float32Array(3*d),f=0;f<d;f++){var h=Z.IR(c,f,Ga);e.set(h,3*f)}return e}if(c=a.Fb[b])return d=O(b),ga(b,K(a.kc,d).subarray(c.offset,c.offset+c.length),new Float32Array(c.length));aa.K("extract_array_float() failed; invalid name: "+b)}function h(b,c){var d;switch(c){case a.Hn:case a.gq:d=
ca.STATIC_DRAW;break;case a.ut:d=ca.DYNAMIC_DRAW;break;default:aa.K("Wrong draw_mode")}b.usage=d}function d(a,b,c){function d(a,b){e[a]||(e[a]=0);e[a]+=b}var e={},f;for(f in a[0]){var h=a[0][f],g=O(f);d(g,h.length*a.length)}for(f in b)h=b[f],g=O(f),d(g,h.length);if(c){a=c.Ws.length;g=O("a_part_ts");d(g,4*a);g=O("a_part_r");d(g,4*a);b=c.ap;for(f in b)g=O(f),d(g,b[f].oc*a);c=c.Rx;for(f in c)g=O(f),d(g,a)}return e}function t(a){a.ee?(a.Xg||(a.Xg=ca.createBuffer()),ca.bindBuffer(ca.ELEMENT_ARRAY_BUFFER,
a.Xg),ca.bufferData(ca.ELEMENT_ARRAY_BUFFER,a.ee,a.usage),a.ao=a.ee.byteLength):a.ao=0;for(var b=a.co=0;b<a.kc.length;b++){var c=a.kc[b].type,d=X(a.sd,c);-1==d&&(a.sd.push({lk:null,type:c,TP:aa.FJ()}),d=a.sd.length-1);c=a.sd[d];c.lk||(c.lk=ca.createBuffer());ca.bindBuffer(ca.ARRAY_BUFFER,c.lk);ca.bufferData(ca.ARRAY_BUFFER,a.kc[b].Ll,a.usage);a.co+=a.kc[b].Ll.byteLength}}function q(a,b){a.va=U.Xn(a.va,b);a.Db=U.nz(a.Db,b);a.tc=U.cu(a.tc,b);a.dd=U.oz(a.dd,b)}function G(a){for(var b=a[0],c=a[0],d=J("JOIN_"+
a.length+"_SUBMESHES"),e=0,f=0;f<a.length;f++)e+=a[f].Aa.length;d.Aa=new Uint32Array(e);var h=e=0;if(0<a[0].wb.length)for(var g=0;g<a[0].wb.length;g++){for(f=0;f<a.length;f++)e+=a[f].wb[g].mg.a_position.length,h+=Z.wv(a[f].wb[g].mg.a_tbn);f={a_position:new Float32Array(e),a_tbn:Z.create(h)};d.wb.push({Ir:a[0].wb[g].Ir,mg:f})}for(f=e=0;f<a.length;f++)e+=a[f].Wa;d.Wa=e;for(var m in c.xa){for(f=e=0;f<a.length;f++)e+=a[f].xa[m].length;d.xa[m]=new Float32Array(e)}for(m in c.la[0]){for(f=e=0;f<a.length;f++)e+=
a[f].la[0][m].length;for(f=0;f<c.la.length;f++)d.la[f]=d.la[f]||{},d.la[f][m]=new Float32Array(e)}f=d.$c;f.va=U.nu(b.$c.va);h=e=0;g=[];for(c=0;c<a.length;c++){var k=a[c],n=k.Aa,r=k.Wa,l=k.xa;m=k.$c.tc;U.$u(f.va,k.$c.va);U.pQ(f.tc,m);U.bA(k.$c.dd,g);for(m=0;m<n.length;m++)d.Aa[e+m]=n[m]+h;var e=e+n.length,A;for(A in l){var n=l[A],t=h*w(n,r);d.xa[A].set(n,t)}for(m=0;m<k.la.length;m++){var l=k.la[m],q=d.la[m];for(A in l)n=l[A],t=h*w(n,r),q[A].set(n,t)}h+=r}f.Db=U.vu(aa.f32(g),!0);if(0<d.wb.length)for(c=
0;c<d.wb.length;c++)for(A=d.wb[c].mg,m=e=f=0;m<a.length;m++)h=a[m].wb[c].mg,A.a_position.set(h.a_position,f),A.a_tbn.set(h.a_tbn,e),f+=h.a_position.length,e+=h.a_tbn.length;a[0].Xe&&(d.Xe={Ws:b.Xe.Ws,tC:b.Xe.tC,fJ:!0,Rx:b.Xe.Rx,ap:b.Xe.ap,Tu:b.Xe.Tu});return d}function H(a,b,c){b=b.$c;for(var d=U.Se(),e=U.Au(),f=[],h=0;h<c.length;h++)U.Xn(a.$c.va,c[h],d),U.$u(b.va,d),U.oz(a.$c.dd,c[h],e),U.bA(e,f);b.Db=U.vu(aa.f32(f),!0);b.dd=U.FO(b.Db);b.tc=U.xu(b.Db)}function z(a,b,c,d,e,f){var h=a.submeshes[b],
m=h.base_length,k=J("SUBMESH_"+a.name+"_"+a.materials[b].name);k.Wa=m;var n=!1;if(r(c,"a_texcoord")){var A=null,w=a.materials[b];b=a.submeshes[b];if(w.Cg.length)switch(w=w.Cg[0],w.texture_coords){case "UV":A=F(b,w.uv_layer||a.active_uv_name,a.name);break;case "ORCO":for(var t=a.b4w_boundings.bb_src,A=new Float32Array(2*b.base_length),w=(t.max_x+t.min_x)/2,q=(t.max_y+t.min_y)/2,y=t.max_x-t.min_x,t=t.max_y-t.min_y,B=0,V=0;V<b.position.length;V+=3)A[B++]=(b.position[V]-w)/y+.5,A[B++]=(b.position[V+1]-
q)/t+.5}null===A&&(A=new Float32Array(2*b.base_length));b=A}else b=new Float32Array(0);if(r(c,"a_orco_tex_coord")){for(var A=a.b4w_boundings.bb_src,w=new Float32Array(3*h.base_length),q=h.position,y=A.max_x-A.min_x,t=A.max_y-A.min_y,B=A.max_z-A.min_z,C=V=0;C<q.length;C+=3)y?w[V++]=aa.clamp(parseFloat(((q[C]-A.min_x)/y).toFixed(5)),0,1):w[V++]=.5,t?w[V++]=aa.clamp(parseFloat(((q[C+1]-A.min_y)/t).toFixed(5)),0,1):w[V++]=.5,B?w[V++]=aa.clamp(parseFloat(((q[C+2]-A.min_z)/B).toFixed(5)),0,1):w[V++]=.5;
A=w}else A=new Float32Array(0);w=h.group;if(r(c,"a_influence")&&d){q=new Float32Array(4*m);y=w.length/m;t=new Float32Array(y);for(B=0;B<y;B++){t[B]=-1;for(var L in d)if(V=d[L],V.iK===B){t[B]=V.Qz;break}}C=3<y?y:4;d=new Float32Array(C);L=new Uint32Array(C);for(var B=new Float32Array(4),V=new Float32Array(C),C=new Uint32Array(C),ha=new Float32Array(4),p=0;p<m;p++)d.set(V),L.set(C),B.set(ha),q.set(E(w,y,p,m,t,d,L,B),4*p)}else q=new Float32Array(0);d=q;e=e?aa.W(e):{};e.a_color={Em:!0};e.a_color.src=r(c,
"a_color")&&a.active_vcol_name?[{name:a.active_vcol_name,$g:7}]:[];k.xa.a_texcoord=b;k.xa.a_influence=d;k.xa.a_orco_tex_coord=A;d=k.xa;L=h.vertex_colors;b=h.color;A=a.name;w=[];for(q=0;q<L.length;q++)w.push(L[q].name);for(var z in e)if(q=e[z].src,q.length){for(t=y=0;t<q.length;t++)y+=aa.jn(q[t].$g);d[z]=new Float32Array(y*m);for(t=B=0;t<q.length;t++){var D=q[t].name,V=q[t].$g,C=aa.nI(V),ha=w.indexOf(D);if(-1==ha)fa.warn('vertex color "'+D+'" for mesh "'+A+'" not found'),p=7;else{for(var p=L[ha].mask,
G,W=G=0;W<ha;W++)G+=aa.jn(L[W].mask);G*=m}W=aa.jn(p);(V&p)!==V&&fa.error("Wrong color extraction from "+D+" to "+z+' for the mesh "'+A+'".');for(D=0;D<m;D++)for(var x=0;3>x;x++)if(C[x]){var v=aa.ip(p,x);d[z][D*y+(B+aa.ip(V,x))]=-1==ha?0:b[G+D*W+v]}B+=W}}else d[z]=new Float32Array(0);z=a.name;G=k.xa;if(f)for(var la in f)G[f[la]]=F(h,la,z);k.Aa=new Uint32Array(h.indices);la=h.position.length/m/3;z=r(c,"a_tbn")&&h.tbn.length?!0:!1;G=r(c,"a_shade_tangs")&&h.shade_tangs.length?!0:!1;0<a.b4w_shape_keys.length&&
(n=!0);for(e=0;e<la;e++){f=l(h,m,z,G,e);if(n)if(d={},d.name=a.b4w_shape_keys[e].name,k.wb.push(d),e){d.mg=f;d.Ir=a.b4w_shape_keys[e].value;continue}else d.mg=l(h,m,z,G,e),d.Ir=1;k.la.push(f)}if(1<la&&!n){a=k.la[0];f={};for(var H in a)f[H]=new Float32Array(a[H]);k.la.push(f)}r(c,"a_polyindex")&&(g(k,1,!0),k.xa.a_polyindex=N(k));h=h.boundings;c=k.$c;c.va=U.Se();c.va.max_x=h.bb.max_x;c.va.max_y=h.bb.max_y;c.va.max_z=h.bb.max_z;c.va.min_x=h.bb.min_x;c.va.min_y=h.bb.min_y;c.va.min_z=h.bb.min_z;H=h.rbb;
a=h.caxis_x;m=h.caxis_y;n=h.caxis_z;f=h.be_ax;c.Db=U.hz(a,m,n,h.be_cen);ea.scale(c.Db.Sa,f[0],c.Db.Sa);ea.scale(c.Db.Ta,f[1],c.Db.Ta);ea.scale(c.Db.Ua,f[2],c.Db.Ua);c.tc=U.xu(c.Db);ea.copy(H.rbb_c,c.dd.U);ea.copy(a,c.dd.Sa);ea.copy(m,c.dd.Ta);ea.copy(n,c.dd.Ua);h=H.rbb_s;ea.scale(c.dd.Sa,h[0],c.dd.Sa);ea.scale(c.dd.Ta,h[1],c.dd.Ta);ea.scale(c.dd.Ua,h[2],c.dd.Ua);return k}function l(a,b,c,d,e){var f={},h=new Float32Array(3*b),m=Z.create(c?b:0),g=e*b*3;h.set(a.position.subarray(g,g+3*b),0);c&&Z.copy(a.tbn,
e*b,b,m);d&&(c=new Float32Array(3*b),c.set(a.shade_tangs.subarray(0,3*b),0),f.a_shade_tangs=c);f.a_position=h;f.a_tbn=m;return f}function F(a,b,c){var d=2*a.base_length,e=a.uv_layers.indexOf(b);if(-1==e)return fa.warn('uv layer "'+b+'" for mesh "'+c+'" not found'),new Float32Array(d);b=e*d;return a.texcoord.subarray(b,b+d)}function r(a,b){return-1<a.indexOf(b)?!0:!1}function E(b,c,d,e,h,m,g,k){for(var n=!0,r=0;r<c;r++){var l=b[r*e+d];if(-1!==l){var A=h[r];-1!==A&&(m[r]=l,g[r]=A,n=!1)}}if(n)return k;
f(m,g,a.Uy,!1);for(r=b=0;4>r;r++)b+=m[r];if(.01>b)return k;for(r=0;4>r;r++)m[r]/=b;if(.01>Math.abs(m[0]-1))k[0]=g[0]+1;else for(r=0;4>r;r++)k[r]=g[r]+m[r];return k}function w(a,b){if(0==b)return 0;var c=a.length,d=c/b;d!=Math.floor(d)&&aa.K("Array size mismatch during geometry calculation: array length="+c+", base length="+b);return d}function f(b,c,d,e){for(var f=b.length,h=f,m=!1,g=e?-1:1;1<h||m;){1<h&&(h=Math.floor(h/1.247330950103979));for(var m=!1,k=0;h+k<f;k++)if(d==a.Uy?0>g*(b[k]-b[k+h]):b[k]<
b[k+h]&&e)m=b[k],b[k]=b[k+h],b[k+h]=m,m=c[k],c[k]=c[k+h],c[k+h]=m,m=!0}}function y(a,b,c){var d=[],e=[];ea.subtract(b,a,d);ea.subtract(c,a,e);ea.normalize(d,d);ea.normalize(e,e);a=aa.clamp(ea.dot(d,e),-1,1);return Math.acos(a)}function D(a,b){var c=[];if(n(b))for(var d=b.Aa,e=d.length/3,f=0;f<e;f++){var h=new Float32Array(9),m=d[3*f];h[0]=a[3*m];h[1]=a[3*m+1];h[2]=a[3*m+2];m=d[3*f+1];h[3]=a[3*m];h[4]=a[3*m+1];h[5]=a[3*m+2];m=d[3*f+2];h[6]=a[3*m];h[7]=a[3*m+1];h[8]=a[3*m+2];c[f]=h}else for(f=0;f<a.length;f++)h=
new Float32Array(9),h[0]=a[9*f],h[1]=a[9*f+1],h[2]=a[9*f+2],h[3]=a[9*f+3],h[4]=a[9*f+4],h[5]=a[9*f+5],h[6]=a[9*f+6],h[7]=a[9*f+7],h[8]=a[9*f+8],c[f]=h;return c}function N(a){for(var b=new Float32Array(a.Wa),c=0;c<a.Wa;c++)b[c]=c%3/2;return b}function M(a,b,c){var d=ea.dist(a,b);a=ea.dist(a,c);b=ea.dist(b,c);c=(d+a+b)/2;return c*(c-d)*(c-a)*(c-b)}function B(a){for(var b=new Float32Array([0,0,0,1,1,1,1,0]),c=new Float32Array(8*a),d=0;d<a;d++)c.set(b,8*d);return c}function J(a){return{name:a,Wa:0,Aa:null,
la:[],xa:{a_influence:new Float32Array(0),a_color:new Float32Array(0),a_texcoord:new Float32Array(0)},wb:[],$c:{va:U.Se(),Db:U.Zq(),tc:U.wu(),dd:U.Au()},Xe:null}}function C(a){var b=[],c;for(c in a)b.push(A(c,a[c]));return b}function A(a,b){return{Ll:new (R(a))(b),type:a}}function X(a,b){for(var c=0;c<a.length;c++)if(a[c].type==b)return c;return-1}function m(a,b){var c=X(a,b);return-1==c?null:a[c].lk}function K(a,b){var c=X(a,b);return-1==c?null:a[c].Ll}function R(a){switch(a){case "float":return Float32Array;
case "short":return Int16Array;case "unsigned_byte":return Uint8Array;default:return Float32Array}}function O(a){a=a.replace(/_next$/,"");a=a.replace(/param_GEOMETRY_VC_a_\w+/,"param_GEOMETRY_VC_a");switch(a){case "a_tbn":case "a_shade_tangs":return"short";case "a_color":case "a_bending_col_main":case "a_bending_col_detail":case "a_grass_size":case "a_grass_color":case "param_GEOMETRY_VC_a":case "a_polyindex":case "a_p_bb_vertex":case "a_halo_bb_vertex":case "a_bb_vertex":return"unsigned_byte";default:return"float"}}
function S(a,b,c,d){var e=O(b);sa(b,c,a[X(a,e)].Ll.subarray(d))}function ga(a,b,c){switch(O(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=aa.WI(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=aa.DJ(b[a])}return c}function sa(a,b,c){switch(O(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=aa.no(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=aa.EJ(b[a])}return c}var U=u("__boundings"),ia=u("__extensions"),fa=u("__print"),
pa=u("__quat"),Z=u("__tbn"),ma=u("__tsr"),aa=u("__util"),ea=u("__vec3"),wa=Z.create(),da=Z.create(),W=Z.create(),Ga=new Float32Array(3),P=new Float32Array(3),ua=new Float32Array(3),ba=pa.create(),ja=new Float32Array(8);a.gq=10;a.ut=20;a.Uy=0;a.XX=1;a.Hn=a.gq;var ca=null;a.Ln="float";a.$X="short";a.aY="unsigned_byte";a.yg=function(a){ca=a};a.nJ=function(a,f,m){b(a)&&g(a);var n=a.Aa,r=a.Wa,l=a.la,A={},q;for(q in a.xa)q in m&&!m[q].Em||(A[q]=a.xa[q]);m=k();0<a.wb.length&&c(a,l[0]);q=a.Xe;if(n.length){var y=
n.length;if(65536>=r)var n=new Uint16Array(n),B=ca.UNSIGNED_SHORT;else n=new Uint32Array(n),B=ca.UNSIGNED_INT}else y=r,n=null;for(var E=d(l,A,q),E=C(E),p={},J=0;J<E.length;J++)p[E[J].type]=0;var z={},D;for(D in A){var V=A[D],G=V.length;if(G){var W=O(D),J=z[D]=e();J.length=G;J.oc=w(V,r);J.offset=p[W];S(E,D,V,p[W]);p[W]+=G}}A=l.length;for(D in l[0])if(V=l[0][D],W=O(D),G=V.length,V=w(V,r),G)for(J=z[D]=e(),J.length=G,J.frames=A,J.oc=V,J.offset=p[W],1<A&&(J=z[D+"_next"]=e(),J.length=G,J.frames=A,J.oc=
V,J.offset=p[W]+G),J=0;J<A;J++)V=l[J][D],W=O(D),S(E,D,V,p[W]),p[W]+=G;if(q){l=q.Ws;D=q.tC;var A=q.ap,G=q.Rx,W=q.fJ,r={a_part_ts:{data:[],oc:4},a_part_r:{data:[],oc:4}},L;for(L in A)r[L]={data:[],oc:A[L].oc};for(L in G)r[L]={data:[],oc:1};for(V=0;V<l.length;V++){J=l[V];W&&D&&!q.Tu&&(J=ma.multiply(D,l[V],ja));!W&&q.Tu&&ea.subtract(l[V],D,l[V]);r.a_part_ts.data.push(J[0],J[1],J[2],J[3]);r.a_part_r.data.push(J[4],J[5],J[6],J[7]);for(L in A)for(var J=A[L].oc,ha=0;ha<J;ha++)r[L].data.push(A[L].data[V*J+
ha]);for(L in G)r[L].data.push(G[L][0])}for(L in r)l=O(L),S(E,L,r[L].data,p[l]),D=e(),D.oc=r[L].oc,D.offset=p[l],D.um=1,D.length=r[L].data.length,z[L]=D,p[l]+=D.length;m.Km=q.Ws.length}m.count=y;m.ee=n;m.kc=E;m.Gm=B;m.Fb=z;h(m,f);t(m);m.wb=a.wb;return m};a.aW=c;a.AS=b;a.zS=n;a.Qx=g;a.HJ=function(a,b,c){h(a,b);a.count=c.length;a.ee=c;a.Gm=c instanceof Uint16Array?ca.UNSIGNED_SHORT:ca.UNSIGNED_INT};a.GJ=x;a.$z=v;a.f_=function(a){a.usage=ca.STATIC_DRAW};a.iT=function(a){a.usage=ca.DYNAMIC_DRAW};a.RC=
t;a.$s=function(a,b,c,d){ca.bindBuffer(ca.ARRAY_BUFFER,a.sd[X(a.sd,b)].lk);ca.bufferSubData(ca.ARRAY_BUFFER,aa.Yi*d,c)};a.jO=function(a){a.Xg&&ca.deleteBuffer(a.Xg);for(var b=0;b<a.sd.length;b++)a.sd[b].lk&&ca.deleteBuffer(a.sd[b].lk);a.sd.length=0};a.zG=function(a,b){return a.submeshes[b].base_length?!1:!0};a.wC=function(a,b){for(var c=0;c<a.la.length;c++){var d=a.la[c].a_position;ma.transform_vectors(d,b,d,0);d=a.la[c].a_tbn;Z.CH(d,b,d);(d=a.la[c].a_shade_tangs)&&0<d.length&&ma.transform_dir_vectors(d,
b,d,0)}(c=a.xa.au_center_pos)&&c.length&&ma.transform_vectors(c,b,c,0);q(a.$c,b)};a.$V=function(a,b){var c=a.xa.au_center_pos;if(c&&c.length){var d=new Float32Array(c);ma.transform_vectors(d,b,d,0);for(var e=0;e<a.la.length;e++)for(var f=0;f<d.length;f++)a.la[e].a_position[f]+=d[f]-c[f];c.set(d)}else aa.K('Attribute "au_center_pos" is missing in particle submesh');q(a.$c,b)};a.zN=q;a.ZV=function(a,b){var c=a.Wa,d;for(d in b){var e=b[d].length;a.xa[d]=new Float32Array(e*c);for(var f=0;f<c;f++)for(var h=
0;h<e;h++)a.xa[d][f*e+h]=b[d][h]}};a.mJ=G;a.jT=function(a,b,c){if(!a.Wa)return J("EMPTY");var d=c.length;65536<a.Wa*d&&!ia.jG()&&g(a,d);var e=a.Aa,f=a.Wa,h=a.xa,m=a.la,k;for(k in b){var n=b[k].length,r=n*f;h[k]=new Float32Array(r);for(var l=0;l<f;l++)for(r=0;r<n;r++)h[k][l*n+r]=b[k][r]}b=J("CLONE_"+d+"_SUBMESHES");b.Wa=f*d;b.Aa=new Uint32Array(e.length*d);for(l=0;l<d;l++)for(n=e.length*l,k=f*l,r=0;r<e.length;r++)b.Aa[n+r]=e[r]+k;for(var A in h)for(e=h[A],r=e.length*d,n=w(e,f),b.xa[A]=new Float32Array(r),
l=0;l<d;l++)k=f*n*l,b.xa[A].set(e,k);for(A in m[0])for(l=0;l<m.length;l++)for(e=m[l][A],r=e.length*d,n=w(e,f),b.la[l]=b.la[l]||{},b.la[l][A]=new Float32Array(r),r=0;r<d;r++)switch(h=c[r],k=f*n*r,A){case "a_position":ma.transform_vectors(e,h,b.la[l][A],k);break;case "a_tbn":ma.nW(e,h,b.la[l][A],k);break;case "a_shade_tangs":ma.transform_tangents(e,h,b.la[l][A],k);break;default:aa.K("Wrong attribute name: "+A)}H(a,b,c);return b};a.CE=H;a.bv=z;a.uQ=function(a){var b=a.Wa,c=a.la[0].a_position,d=new Float32Array(12*
b);a=new Uint32Array(4*a.Aa.length);for(var e=new Float32Array(4*b),f=0;f<b;f++){d[12*f]=c[3*f];d[12*f+1]=c[3*f+1];d[12*f+2]=c[3*f+2];d[12*f+3]=c[3*f];d[12*f+4]=c[3*f+1];d[12*f+5]=c[3*f+2];d[12*f+6]=c[3*f];d[12*f+7]=c[3*f+1];d[12*f+8]=c[3*f+2];d[12*f+9]=c[3*f];d[12*f+10]=c[3*f+1];d[12*f+11]=c[3*f+2];a[6*f]=4*f+2;a[6*f+1]=4*f+1;a[6*f+2]=4*f;a[6*f+3]=4*f+2;a[6*f+4]=4*f;a[6*f+5]=4*f+3;var h=Math.random();e[4*f]=h;e[4*f+1]=h;e[4*f+2]=h;e[4*f+3]=h}c=J("HALO");c.la[0]={};c.Wa=4*b;c.la[0].a_position=d;c.xa.a_halo_bb_vertex=
B(b);c.xa.a_random_vals=e;c.Aa=a;return c};a.YR=r;a.NF=function(a,b,c){for(var d=[],e=0;e<a.submeshes.length;e++){var f=z(a,e,b,null,c,null);f.Wa&&d.push(f)}return d.length?1==d.length?d[0]:G(d):J("EMPTY")};a.zW=function(a,b,c,d){var e=a.ee,f=v(a,"a_position"),h=b.rT,m=b.sT;b=b.aQ;for(var g=e,k=g.length/3,n=0;n<k;n++){var r=g[3*n],l=g[3*n+1],A=g[3*n+2],w=f[3*r+1],t=f[3*r+2],q=f[3*l+1],y=f[3*l+2],L=f[3*A+1],ha=f[3*A+2];h[3*n]=(f[3*r]+f[3*l]+f[3*A])/3;h[3*n+1]=(w+q+L)/3;h[3*n+2]=(t+y+ha)/3}ma.transform_vectors(h,
c,m);c=m.length/3;for(f=0;f<c;f++)h=m[3*f]-d[0],g=m[3*f+1]-d[1],k=m[3*f+2]-d[2],b[f]=h*h+g*g+k*k;d=e;e=b.length;if(!(2>e))for(m=e,f=!1;1<m||f;)for(1<m&&(m=Math.floor(m/1.247330950103979)),f=!1,c=0;m+c<e;c++)0>b[c]-b[c+m]&&(f=b[c],b[c]=b[c+m],b[c+m]=f,f=d,h=c,g=c+m,k=f[3*h],n=f[3*h+1],r=f[3*h+2],f[3*h]=f[3*g],f[3*h+1]=f[3*g+1],f[3*h+2]=f[3*g+2],f[3*g]=k,f[3*g+1]=n,f[3*g+2]=r,f=!0);e=d;ca.bindBuffer(ca.ELEMENT_ARRAY_BUFFER,a.Xg);ca.bufferData(ca.ELEMENT_ARRAY_BUFFER,e,ca.DYNAMIC_DRAW)};a.JV=f;a.AE=
function(a,b,c){for(var d=b.length/3,e=a.length/3,f=[],h=Array(3),m=Array(3),g=Array(3),k=0;k<e;k++){for(var n=a[3*k],r=a[3*k+1],l=a[3*k+2],A=0;3>A;A++)h[A]=b[3*n+A],m[A]=b[3*r+A],g[A]=b[3*l+A];if(c)var A=y(h,m,g),w=y(m,g,h),t=Math.PI-A-w;else t=w=A=1;var q=f,B;B=h;var L=g,ha=[],E=[],p=[];ea.subtract(m,B,ha);ea.subtract(L,B,E);ea.cross(ha,E,p);ea.normalize(p,p);B=p;for(L=0;3>L;L++)ha=3*r+L,E=3*l+L,q[3*n+L]=A*B[L],q[ha]=w*B[L],q[E]=t*B[L]}if(c)for(var C in c)for(k=c[C],a=0;3>a;a++){b=3*k[0]+a;for(e=
1;e<k.length;e++)h=3*k[e]+a,f[b]+=f[h];for(e=1;e<k.length;e++)h=3*k[e]+a,f[h]=f[b]}for(k=0;k<d;k++){c=k;C=f;a=new Float32Array(3);for(b=0;3>b;b++)e=3*c+b,a[b]=C[e];ea.normalize(a,a);for(b=0;3>b;b++)e=3*c+b,C[e]=a[b]}return f};a.BE=function(a,b,c){for(var d={},e=b.length/3,f=0;f<e;f++){var h=String(b[3*f])+String(b[3*f+1])+String(b[3*f+2]);d[h]=[]}b=a.length;for(f=0;f<b;f++)e=a[f],h=String(c[3*e])+String(c[3*e+1])+String(c[3*e+2]),h in d&&d[h].push(e);return d};a.hA=function(a,b,c,d){var e;e=D(a.la[0].a_position,
a);if(c){var f;f=a.la[0].a_tbn;for(var h=Z.wv(f),m=new Float32Array(3*h),g=0;g<h;g++){var k=Z.vb(f,g,ba),k=ea.transformQuat(aa.AXIS_Y,k,Ga);m[3*g]=k[0];m[3*g+1]=k[1];m[3*g+2]=k[2]}f=D(m,a)}m=e.length;g=new Float32Array(m);h=Ga;for(a=0;a<m;a++){var n=e[a];h.set(n.subarray(0,3));P.set(n.subarray(3,6));ua.set(n.subarray(6));g[a]=Math.sqrt(M(h,P,ua))}h=new Float32Array(m);h[0]=g[0];for(a=1;a<m;a++)h[a]=h[a-1]+g[a];m=h[g.length-1];g=[];for(a=0;a<b;a++){var k=m*aa.gh(d),k=aa.Zt(h,k,0,h.length-1),n=c?f[k]:
e[k],r=d;(k=Ga)||(k=new Float32Array(3));var l=n[0],A=n[1],w=n[2],t=n[3],q=n[4],y=n[5],L=n[6],B=n[7],n=n[8],E=aa.gh(r),r=aa.gh(r);1<E+r&&(E=1-E,r=1-r);var p=1-E-r;k[0]=p*l+E*t+r*L;k[1]=p*A+E*q+r*B;k[2]=p*w+E*y+r*n;c?(g[a]=new Float32Array(4),ea.normalize(k,k),k=pa.rotationTo(aa.AXIS_Y,k,ba),g[a][0]=k[0],g[a][1]=k[1],g[a][2]=k[2],g[a][3]=k[3]):(g[a]=new Float32Array(3),g[a][0]=k[0],g[a][1]=k[1],g[a][2]=k[2])}return g};a.av=N;a.L_=M;a.VF=B;a.sI=function(a,b,c){a=a.la[0].a_position;for(var d=0;d<a.length;d+=
3)a[d]=(a[d]-c[0])*b[0]+c[0],a[d+1]=(a[d+1]-c[1])*b[1]+c[1],a[d+2]=(a[d+2]-c[2])*b[2]+c[2]};a.dz=function(a,b,c){var d=a.S[0].$;a=a.A.Ag;for(var e=1;e<a.length;e++)a[e].name==b&&(a[e].value=c);for(e=0;e<d.length;e++)if(!d[e].Rg&&d[e].ef&&!d[e].tj){b=d[e].ra;c=O("a_position");var f=K(b.kc,c);ca.bindBuffer(ca.ARRAY_BUFFER,m(b.sd,c));var h=b.Fb.a_position;c=d[e];var g=a;if(h){for(var k=h.offset,h=h.length+k,n=c.ra.wb[0].mg.a_position,r=k;r<h;r++)f[r]=n[r-k];for(r=1;r<c.ra.wb.length;r++){var n=c.ra.wb[r].mg.a_position,
l=g[r].value;if(l)for(var A=k;A<h;A++)f[A]+=l*n[A-k]}ca.bufferSubData(ca.ARRAY_BUFFER,aa.Yi*k,f.subarray(k))}f=O("a_tbn");c=K(b.kc,f);ca.bindBuffer(ca.ARRAY_BUFFER,m(b.sd,f));g=b.Fb.a_tbn;b=c;c=a;if(g){f=g.offset;g=g.length+f;k=d[e].ra.wb;h=k[0].mg.a_tbn;r=Z.identity(wa);for(n=f;n<g;n+=Z.ID){for(var l=Z.identity(W),A=(n-f)/Z.ID,w=1;w<k.length;w++){var t=c[w].value;if(t){var q=Z.Fm(k[w].mg.a_tbn,A,da),t=Z.slerp(r,q,t,da);Z.Ew(t,r,l)}}A=Z.Fm(h,A,da);l=Z.Ew(l,A,da);b[n]=aa.no(l[0]);b[n+1]=aa.no(l[1]);
b[n+2]=aa.no(l[2]);b[n+3]=aa.no(l[3])}ca.bufferSubData(ca.ARRAY_BUFFER,aa.Yi*f,b.subarray(f))}}};a.check_shape_keys=function(a){return a.A.ef};a.get_shape_keys_names=function(a){var b=[];if(a.A)for(var c=1;c<a.A.Ag.length;c++)b.push(a.A.Ag[c].name);return b};a.get_shape_key_value=function(a,b){if(a.A)for(var c=1;c<a.A.Ag.length;c++)if(b==a.A.Ag[c].name)return a.A.Ag[c].value;return 0};a.BA=function(a,b){var c=a.A.Ag;if(c)for(var d=1;d<c.length;d++)if(c[d].name==b)return!0;return!1};a.Dj=function(a){return a&&
a.A&&a.A.xe?!0:!1};a.draw_line=function(b,c,d){var e=b.ra;if(e){for(var f=d?c.length/3/2:c.length/3-1,h=new Float32Array(12*f),m=new Float32Array(12*f),g=new Uint16Array(6*f),k=0;k<f;k++){if(d)var n=6*k,r=6*k+3;else n=3*k,r=3*(k+1);var l=c[n],A=c[n+1],n=c[n+2],w=c[r],q=c[r+1],r=c[r+2],y=w-l,B=q-A,E=r-n;h[12*k]=l;h[12*k+1]=A;h[12*k+2]=n;m[12*k]=y;m[12*k+1]=B;m[12*k+2]=E;h[12*k+3]=w;h[12*k+4]=q;h[12*k+5]=r;m[12*k+3]=-y;m[12*k+4]=-B;m[12*k+5]=-E;h[12*k+6]=l;h[12*k+7]=A;h[12*k+8]=n;m[12*k+6]=-y;m[12*
k+7]=-B;m[12*k+8]=-E;h[12*k+9]=w;h[12*k+10]=q;h[12*k+11]=r;m[12*k+9]=y;m[12*k+10]=B;m[12*k+11]=E;g[6*k]=4*k;g[6*k+1]=4*k+1;g[6*k+2]=4*k+2;g[6*k+3]=4*k;g[6*k+4]=4*k+3;g[6*k+5]=4*k+1}d=0;for(var L in e.Fb)c=e.Fb[L],d+=h.length/3*c.oc;c={};c["float"]=d;d=e.kc=C(c);a.HJ(e,b.Bh,g);b=0;for(L in e.Fb)switch(c=e.Fb[L],L){case "a_position":S(d,L,h,b);c.offset=b;c.length=h.length;b+=c.length;break;case "a_direction":S(d,L,m,b);c.offset=b;c.length=m.length;b+=c.length;break;default:c.offset=b,c.length=h.length/
3*c.oc,g=new Float32Array(c.length),S(d,L,g,b),b+=c.length}t(e)}};a.qO=function(a){if(a){var b=k();if(a.ee)switch(a.Gm){case ca.UNSIGNED_SHORT:b.ee=new Uint16Array(a.ee);break;case ca.UNSIGNED_INT:b.ee=new Uint32Array(a.ee)}else b.ee=null;for(var c=b,d=a.kc,e=[],f=0;f<d.length;f++){var h=d[f].Ll,m=d[f].type;e.push({Ll:new h.constructor(h),type:m})}c.kc=e;b.Gm=a.Gm;b.count=a.count;b.Fb=aa.W(a.Fb);b.usage=a.usage;b.ao=a.ao;b.co=a.co;b.Xg=null;b.Tv=aa.W(a.Tv);b.wb=aa.W(a.wb);b.Km=a.Km;b.Mg=a.Mg}else b=
null;return b};a.Zg=J;a.tO=function(a){var b=J(a.name);b.Wa=a.Wa;b.Aa=aa.W(a.Aa);b.la=aa.W(a.la);b.xa=aa.W(a.xa);b.wb=aa.W(a.wb);U.mi(a.$c.va,b.$c.va);U.Yn(a.$c.Db,b.$c.Db);U.Dk(a.$c.tc,b.$c.tc);U.zO(a.$c.dd,b.$c.dd);b.Xe=aa.W(a.Xe);return b};a.reset=function(){ca=null};a.sS=C;a.MU=X;a.EZ=m;a.sA=K;a.lR=R;a.vo=O;a.rG=function(a){switch(O(a)){case "float":return aa.Yi;case "short":return aa.lq;case "unsigned_byte":return aa.Gy;default:return aa.Yi}};a.BR=function(a){switch(O(a)){case "float":return ca.FLOAT;
case "short":return ca.SHORT;case "unsigned_byte":return ca.UNSIGNED_BYTE;default:return ca.FLOAT}};a.lt=S;a.Q_=function(a,b){switch(O(a)){case "short":return aa.WI(b);case "unsigned_byte":return aa.DJ(b)}return b};a.P_=function(a,b){switch(O(a)){case "short":return aa.no(b);case "unsigned_byte":return aa.EJ(b)}return b};a.DY=ga;a.BY=sa};b4w.module.__objects=function(a,u){function e(a){var b=a.S;a=a.A;for(var c=0;c<b.length;c++){var d=b[c].lb;d.J.outline&&a.Ki&&fa.yU(d)}}function c(a){a.A.Ki=0;a=ta.indexOf(a);-1!=a&&ta.splice(a,1)}function b(a){if(a.lo)for(var b=a.S,c=0;c<b.length;c++)fa.KJ(b[c].lb,a)}function n(a,b){for(var c=a.S,d=b.S,e=0;e<c.length;e++){for(var f=!1,h=0;h<d.length;h++)if(c[e].lb==d[h].lb){f=!0;break}f||g(b,c[e].lb)&&O.Ot(b,c[e].lb)}}function g(a,b){return!b.TD&&"SPEAKER"==a.type||!b.DM&&"LAMP"==a.type?!1:!0}function p(a){var b=
a.b4w_do_not_batch,c=a.b4w_collision,d=a.b4w_vehicle,e=a.b4w_floating,f=a.b4w_character,h=S.$R(a),m=K.xE(a),g=0<a.data.b4w_shape_keys.length,n=a.b4w_dynamic_geometry,r=k(a);if(!(b=y.wE(a)||b||c||d||g||e||h||f||m||n))a:{a=a.data;for(b=0;b<a.materials.length;b++)if(c=a.materials[b],c.ha.Di||c.Bi||v(c.Nd)){b=!0;break a}b=!1}return b||r}function k(a){var b=!1,c=a.constraints.length;if(c){for(var d=null,c=c-1;0<=c;c--){var e=a.constraints[c];if("LOCKED_TRACK"!=e.type||"REFLECTION PLANE"!=e.name){d=e;break}}if(!d||
!d.target)return!1;a=d.target;d=a.type;if(a.parent)return d=a.parent.type,"MESH"==d?b=b||p(a.parent):"EMPTY"==d?b=b||x(a.parent):b=!0,b;"MESH"==d?b=b||p(a):"EMPTY"==d?b=b||x(a):b=!0}return b}function x(a){var b=K.xE(a),c=a.b4w_do_not_batch,d=!!a.b4w_anchor,e=k(a);return y.wE(a)||b||c||d||e}function v(a){if(!a)return!1;a=a.nodes;for(var b=0;b<a.length;b++){var c=a[b];if("VECT_TRANSFORM"==c.type){var d=c.convert_from,e=c.convert_to,f=c.outputs[0];if(!(!f.is_linked||"WORLD"==d&&"CAMERA"==e||"CAMERA"==
d&&"WORLD"==e||"OBJECT"==d&&"OBJECT"==e))return!0}if("NORMAL_MAP"==c.type&&(d=c.space,f=c.outputs[0],f.is_linked&&("OBJECT"==d||"BLENDER_OBJECT"==d))||"TEX_COORD"==c.type&&c.outputs[3].is_linked||"OBJECT_INFO"==c.type&&(f=c.outputs[1],d=c.outputs[3],c.outputs[0].is_linked||f.is_linked||d.is_linked))return!0}return!1}function h(a){if(G(a,ca.ALL,!1,-1)){for(var b=1,c;;){c="."+(3>String(b).length?("000"+String(b)).slice(-3):String(b));if(!G(a+c,ca.ALL,!1,-1))break;b++}sa.error('Object "'+a+'" already exists. Name was replaced by "'+
a+c+'".');return c}return""}function d(a,b,c){b=ca[b]||[];for(var d=[],e=0;e<b.length;e++){var f=b[e];if(f.A.ce==c||-1==c)for(var h=f.S,m=0;m<h.length;m++)h[m].lb==a&&d.push(f)}return d}function t(a,b){var c=ca[a]||[];if(-1==b)return c;for(var d=[],e=0;e<c.length;e++){var f=c[e];f.A.ce==b&&d.push(f)}return d}function q(a,b,c,d){for(var e=0;e<a.S.length;e++)for(var f=a.S[e].$,h=0;h<f.length;h++){var m=f[h];m.ra&&(m.ra.Mg=b);m.Mg=b;m.zb&&(m.zb.Mg=c);""!==m.he&&(m=R.xv(m.he))&&(m.XE=d)}}function G(a,
b,c,d,e){for(var f=null,h=0;h<b.length;h++){var m=b[h];if(!((c?m.Gd:m.name)!=a||m.A.ce!=d&&-1!=d||e&&m.Wk||(f=m,O.get_dg_parent(f))))break}return f}function H(a){ca.ALL.push(a);ca[a.type]||(ca[a.type]=[]);ca[a.type].push(a);var b=a.A.Od;if(null!=b)for(var c=0;c<V.length;c++){var d=V[c];d.A.Od==b&&d.xs.push(a)}}function z(a,b,c){if(!b.Ej)return!0;a=a.Zk;if(a.si!=a.Re)if(a.ht){var d=da.sign(a.si-a.Re);a.Re+=d*aa.oR()/.4;a.Re=da.clamp(a.Re,0,1)}else a.Re=a.si;d="STATIC"==b.type?b.Xr:W.add(b.ue.U,b.sw,
xa);c=W.dist(d,c);0==a.Ao?(d=Math.max(b.qg-a.zo/2,0),b=b.pg+a.yo/2):-1==a.Ao?(d=b.qg+a.zo/2,b=b.pg+a.yo/2):(d=Math.max(b.qg-a.zo/2,0),b=Math.max(b.pg-a.yo/2,0));a.Ao=c<d?-1:c<b?0:1;a.si=c<d||c>b?0:1;a.ou=a.si?1:-1;Math.abs(c-a.Xw)>ba.lod_leap_smooth_threshold&&(0==a.Re||1==a.Re)&&(a.Re=a.si);a.Xw=c;return!!a.si||0!=a.Re}function l(a,b){q(a,!0,!1,!0);for(var c=t("ALL",-1),d=0;d<c.length;d++){var e=c[d];e!=a&&q(e,!1,!1,!1)}fa.jI(a,b);for(d=0;d<a.S.length;d++)for(e=a.S[d].$.length-1;0<=e;e--){var f=
a.S[d].$[e];0!=f.cc.length&&-1==f.cc.indexOf(b)||O.tI(a.S[d],e)}ga.sa(a)&&ga.remove_object(a);for(d=0;d<c.length;d++)c[d]!=a&&q(c[d],!0,!0,!0);y.WP(a,b);c=a.vk.Ha;a.vk.Ha=a;return c}function F(a,b){a.vk.Ha=b;q(a,!0,!0,!0)}function r(a,b,c,d){var e=c.Ye.hl.indexOf(d);b=a.nc[a.Ye.hl.indexOf(b)];c.nc[e]=b;a=b.name;b.name=d;for(d=0;d<c.nc.length;d++)c.Ye.Lm[d]=d!=e;return a}function E(a,b,c,d){for(var e=0;e<c.nc.length;e++)c.Ye.Lm[e]=!1;a.nc[a.Ye.hl.indexOf(b)].name=d}function w(a,b,c,d,e){for(var f=
1;f<a.A.Ag.length;f++)A.dz(a,a.A.Ag[f].name,a.A.Ag[f].value);if(y.is_animated(a))for(f=0;f<a.pa.length;f++){var h=a.pa[f];if(h)switch(h.type){case y.OBJ_ANIM_TYPE_PARTICLES:y.set_frame(a,y.lA(a,f),f);break;case y.OBJ_ANIM_TYPE_MATERIAL:if(h.Vo)for(var m=h.Vo.length-1;0<=m;m--)-1!=h.Vo[m].cc.indexOf(b)&&h.Vo.splice(m,1)}}d&&D.QA(a,b,function(b){if(b.Ja){var c=b.Ja.name;if(d[c]){var e=b.Ja.Zn!=d[c].Zn;b.Ja=S.$E(d[c]);e&&S.set_factor(a,c,b.Ja.Zn)}}},"PARTICLES");e&&(f=D.hb(a,b,"MAIN"))&&(f.lc.set(e.lc),
f.de=e.de,f.ti=e.ti,f.Ad.set(e.Ad),f.me.set(e.me),f.bk=e.bk,f.He.set(e.He),f.Jf=e.Jf,f.Bd=e.Bd,f.yd=e.yd,f.Jg=e.Jg,f.Wm=e.Wm,f.Wo=e.Wo,f.reflect_factor=e.reflect_factor,f.ih=e.ih,f.Fh.set(e.Fh),f.parallax_scale=e.parallax_scale,f.mh.set(e.mh),f.shallow_water_col.set(e.shallow_water_col),f.shallow_water_col_fac=e.shallow_water_col_fac,f.shore_water_col.set(e.shore_water_col),f.shore_water_col_fac=e.shore_water_col_fac,f.foam_factor=e.foam_factor,f.Ol=e.Ol,f.Lh=e.Lh.slice(),f.ie=e.ie.slice());D.QA(a,
b,function(b){for(var d=0;d<b.rf.length;d++){var e=b.rf[d],f=b.na[d];if("IMAGE"==f.source||"ENVIRONMENT"==f.source){var h=ma.Av(c,e);h&&f.Rk!=h.Rk&&ma.sV(a,e,h)}}})}function f(a,b){for(var c=a[b],d=b+1;d<a.length;d++)c+="%join%"+a[d];return c}var y=u("__animation"),D=u("__batch"),N=u("__boundings"),M=u("__camera"),B=u("__config"),J=u("__constraints"),C=u("__container"),A=u("__geometry"),X=u("__lights"),m=u("__material"),K=u("__nla"),R=u("__nodemat"),O=u("__obj_util"),S=u("__particles"),ga=u("__physics"),
sa=u("__print"),U=u("__primitives"),ia=u("__quat"),fa=u("__scenes"),pa=u("__subscene"),Z=u("__sfx"),ma=u("__textures"),aa=u("__time"),ea=u("__transform"),wa=u("__tsr"),da=u("__util"),W=u("__vec3"),Ga=u("__armature"),P=u("__anchors"),ua=u("__renderer"),ba=B.L,ja=B.Xc,ca={ALL:[]},Ca=0,la=0,V=[],ta=[],xa=new Float32Array(3),I=new Float32Array(4);a.Oy=0;a.Ny=1;a.Id=2;a.DATA_ID_ALL=-1;a.update=function(a){for(var b=0;b<ta.length;b++){var d=ta[b],f=d,h=a,m=0,k=f.SH;0==k.by&&(k.by=h);h-=k.by;if(k.QB&&h/
k.wg>=k.QB)c(f);else{h%=k.wg;if(h<k.AB)switch(k=h/(k.AB/5),h=Math.floor(k),h){case 0:m=(k-h)/2;break;case 1:m=(k-h)/2+.5;break;case 2:m=1;break;case 3:m=1-(k-h)/2;break;case 4:m=.5-(k-h)/2}f.A.Ki=m}d.A.Ki&&e(d)}if(a=ca.ARMATURE)for(b=0;b<a.length;b++)d=a[b],d.rB&&(ea.V(d),d.rB=!1)};a.set_outline_intensity=function(a,b){a.A.Ki=b;e(a)};a.apply_outline_anim=function(a,b,c,d){var e=a.SH;e.by=0;e.AB=b;e.wg=c;e.QB=d;-1==ta.indexOf(a)&&ta.push(a)};a.clear_outline_anim=c;a.mF=function(a,b){var c=O.$q(b?"%meta_world%"+
a.name:a.name,b?"WORLD":a.type,b?"%meta_world%"+a.name:a.origin_name);if("MESH"==c.type)for(var d=0;d<a.data.materials.length;d++)c.nc.push(a.data.materials[d]);for(d=0;d<a.Jd.length;d++)O.Ot(c,a.Jd[d]);a.Ha=c;if(b)c.Jc=a.uuid,c.Wk=!1,c.sm=a.On,c.is_dynamic=a.cj,c.A=O.$n(c.type),c.ft=a.b4w_use_default_animation,c.Zl=y.bz(a.b4w_anim_behavior);else{c.Jc=a.uuid;c.Wk=!1;c.sm=a.On;c.is_dynamic=a.cj;c.Mr=a.SD||!1;c.Cf=a.b4w_vehicle;c.is_character=a.b4w_character;c.Nm=a.b4w_floating;c.Op=a.b4w_collision;
c.Jb=a.b4w_collision_id;c.uu=a.b4w_correct_bounding_offset;d=a.game;c.pd={hs:d.physics_type,Ui:d.use_ghost,aK:d.use_sleep,ah:d.mass,fK:d.velocity_min,eK:d.velocity_max,wF:d.damping,oI:d.rotation_damping,aT:d.lock_location_x,bT:d.lock_location_y,cT:d.lock_location_z,dT:d.lock_rotation_x,eT:d.lock_rotation_y,fT:d.lock_rotation_z,ki:d.collision_margin,ji:d.collision_group,li:d.collision_mask,UC:d.use_collision_bounds,qu:d.collision_bounds_type,et:d.use_collision_compound};if(d=a.b4w_vehicle_settings)c.Of=
{name:d.name,Hf:d.part,cW:d.suspension_rest_length,xC:d.suspension_compression,zC:d.suspension_stiffness,yC:d.suspension_damping,cD:d.wheel_friction,XB:d.roll_influence,dB:d.max_suspension_travel_cm,sr:d.force_max,Fq:d.brake_max,Ap:d.steering_max,Mo:d.max_speed_angle,fr:d.delta_tach_angle,Ns:d.speed_ratio,Ps:d.steering_ratio,Lr:d.inverse_control,wm:d.floating_factor,Bn:d.water_lin_damp,Cn:d.water_rot_damp,pJ:d.synchronize_position};if(d=a.b4w_floating_settings)c.oo={name:d.name,Hf:d.part,wm:d.floating_factor,
Bn:d.water_lin_damp,Cn:d.water_rot_damp,pJ:d.synchronize_position};if(d=a.b4w_character_settings)c.JE={vX:d.walk_speed,IU:d.run_speed,WV:d.step_height,HS:d.jump_strength,yX:d.waterline};for(d=0;d<a.constraints.length;d++){var e=a.constraints[d];"RIGID_BODY_JOINT"==e.type&&c.HB.push({target:e.target.Ha,RT:e.pivot_type,ST:e.pivot_x,TT:e.pivot_y,UT:e.pivot_z,Sa:e.axis_x,Ta:e.axis_y,Ua:e.axis_z,iX:e.use_limit_x,jX:e.use_limit_y,kX:e.use_limit_z,eX:e.use_angular_limit_x,fX:e.use_angular_limit_y,gX:e.use_angular_limit_z,
TS:e.limit_max_x,US:e.limit_max_y,VS:e.limit_max_z,WS:e.limit_min_x,XS:e.limit_min_y,YS:e.limit_min_z,NS:e.limit_angle_max_x,OS:e.limit_angle_max_y,PS:e.limit_angle_max_z,QS:e.limit_angle_min_x,RS:e.limit_angle_min_y,SS:e.limit_angle_min_z})}d=c.A=O.$n("MESH"===c.type?c.is_dynamic?"DYNAMIC":"STATIC":c.type);a.parent?(c.parent=a.parent.Ha,"BONE"==a.parent_type&&"ARMATURE"==a.parent.type&&(c.es=a.parent_bone),a.pinverse_tsr&&(c.Vw=wa.create(),wa.copy(a.pinverse_tsr,c.Vw))):a.dg_parent&&(c.parent=a.dg_parent.Ha,
c.ml=!0);var e=a.location,f=a.scale[0];da.MB(a.rotation_quaternion,I);ea.set_translation(c,e);ea.set_rotation(c,I);ea.set_scale(c,f);c.ft=a.b4w_use_default_animation;c.Zl=y.bz(a.b4w_anim_behavior);a.b4w_object_tags&&(c.xw={title:a.b4w_object_tags.title,description:a.b4w_object_tags.description,category:a.b4w_object_tags.category});c.Eu=a.b4w_custom_prop;a.b4w_viewport_alignment&&(c.wy={HM:a.b4w_viewport_alignment.alignment,distance:a.b4w_viewport_alignment.distance});d.hide=a.b4w_hidden_on_load;d.BG=
a.b4w_hide_chldr_on_load;switch(a.type){case "ARMATURE":Ga.Lp(a,c);e=d.fg;f=y.KN(e);a.b4w_animation_mixing?(d.Qd=new Float32Array(f.Nb),d.Fe=new Float32Array(f.Nb),d.Wd=new Float32Array(f.trans),d.Ke=new Float32Array(f.trans)):(d.Qd=f.Nb,d.Fe=f.Nb,d.Wd=f.trans,d.Ke=f.trans);for(var h in e){var m=e[h];1==m.ku.length&&Ga.yW(m,!0,f.trans,f.Nb)}d.ns=f;d.Bf=0;d.fj=a.b4w_animation_mixing;break;case "MESH":d.ij=D.qN(a.data.b4w_boundings.bb);c.NG=a.data.is_boundings_overridden;d.we=a.b4w_do_not_render;d.rl=
ja.outlining_overview_mode||a.b4w_selectable;d.Nw=a.b4w_selectable;d.Xc=ja.outlining_overview_mode||a.b4w_outlining;d.Mw=a.b4w_outlining;d.Ow=ja.outlining_overview_mode||a.b4w_outline_on_select;d.Kg=a.b4w_billboard;d.zq=a.b4w_pres_glob_orientation;d.Bq="BASIC";d.Aq="SPHERICAL"==a.b4w_billboard_geometry;h=d.Ji;h.il=a.b4w_outline_settings.outline_duration;h.jl=a.b4w_outline_settings.outline_period;h.kl=a.b4w_outline_settings.outline_relapses;d.rl&&(d.Bk=da.WF(Ca),Ca++);for(h=0;h<a.data.b4w_vertex_anim.length;h++)e=
a.data.b4w_vertex_anim[h],c.bd.push({name:e.name,Ba:e.frame_start,kb:e.frame_end,HY:e.averaging,IY:e.averaging_interval,IM:e.allow_nla});c.A.bd=c.bd.length?!0:!1;"MESH"!=a.type&&da.K("Wrong object type: "+a.name);h=c.A;if(a.data.b4w_shape_keys.length)for(h.ef=!0,e=0;e<a.data.b4w_shape_keys.length;e++)f={},f.value=a.data.b4w_shape_keys[e].value,f.name=a.data.b4w_shape_keys[e].name,h.Ag.push(f);else h.ef=!1;d.bf=a.b4w_shadow_cast;d.Td=a.b4w_shadow_receive;d.Ge=a.b4w_shadow_cast_only&&d.bf;d.ke=a.b4w_reflexible;
d.Rd=a.b4w_reflexible_only&&d.ke;d.Yc=a.b4w_reflective;d.hh=a.b4w_reflection_type;if(!d.Yc)for(h=c.nc,e=0;e<h.length;e++)f=h[e],!f.Eg||-1==f.Nd.Jt.indexOf("BSDF_GLOSSY")&&-1==f.Nd.Jt.indexOf("BSDF_DIFFUSE")||(c.A.Yc=!0,c.A.hh="PBR");d.gg=a.b4w_caustics;if(d.Me=a.b4w_wind_bending)d.Fn=a.b4w_wind_bending_angle,h=D.rK(da.deg_to_rad(a.b4w_wind_bending_angle),d.ij,a.scale[0]),d.Tf=h,d.Uf=a.b4w_wind_bending_freq,d.yf=a.b4w_detail_bending_freq,d.xf=a.b4w_detail_bending_amp,d.sf=a.b4w_branch_bending_amp,
d.Lj=a.b4w_main_bend_stiffness_col,h=a.b4w_detail_bend_colors,d.Te.UA=h.leaves_stiffness_col,d.Te.TA=h.leaves_phase_col,d.Te.BB=h.overall_stiffness_col;d.xe=a.b4w_dynamic_geometry;if(d.xe)for(c.vk=a,h=0;h<c.nc.length;h++)c.Ye.hl.push(c.nc[h].name),c.Ye.Lm.push(!1);h=c.nc[0];d.Sg=h.pd.Sg;d.Og=h.pd.Og;d.qg=0;d.pg=O.Qy;d.Li=a.pass_index;break;case "LINE":d.va=N.Se();d.Db=N.Zq();d.wh=N.Se();d.xk=N.Zq();break;case "CAMERA":M.PN(a,c);M.hN(c);break;case "LAMP":X.IS(a,c);break;case "SPEAKER":c.ka=Z.eP();
d=!1;for(h=0;h<c.S.length;h++)if(c.S[h].lb.Qc){d=!0;break}d&&Z.Lp(a,c);break;case "EMPTY":h=N.Se(),d.va=h,h=N.wu(),d.tc=h,a.field&&(c.lo={type:a.field.type,jJ:a.field.strength}),a.b4w_anchor&&(c.anchor={type:a.b4w_anchor.type,ho:a.b4w_anchor.detect_visibility,Ik:a.b4w_anchor.element_id,pT:a.b4w_anchor.max_width})}}H(c);return c};a.OW=function(a,b){var c=b.A;if("MESH"==b.type){var d=y.gG(a);if(d){var e=d.Ha,f=e.A.ns,h=b.A,m=a.data;b.Rt=e;m=m.vertex_groups;if(m.length){var e=e.A.fg,k=0,g={},r;for(r in e){var l=
da.keysearch("name",r,m);l&&(g[r]={iK:l.index,fi:e[r].fi,Qz:k++})}h.gi=g;r=k;m=y.lG();h.Jh=r;r>2*m?(h.Xk=!1,sa.error('too many bones for "'+a.name+'" / '+h.Jh+" bones (max "+m+" with blending, "+2*m+" without blending). Skinning will be disabled.")):h.Xk=!0}f=y.vQ(f.trans,f.Nb,c.gi);d.b4w_animation_mixing?(c.Qd=new Float32Array(f.Nb),c.Fe=new Float32Array(f.Nb),c.Wd=new Float32Array(f.trans),c.Ke=new Float32Array(f.trans)):(c.Qd=f.Nb,c.Fe=f.Nb,c.Wd=f.trans,c.Ke=f.trans);c.sq=new Float32Array(4);c.rq=
ia.create();c.ns=f;c.Bf=0}if(c.Yc)if(c=b.A,"CUBE"==c.hh)c.be=la++;else if("PLANE"==c.hh){a:{d=a.constraints;for(f=0;f<d.length;f++)if(h=d[f],"LOCKED_TRACK"==h.type&&"REFLECTION PLANE"==h.name){if(h.target&&h.target.Ha){d=h.target.Ha;break a}sa.warn('Reflection plane target for object: "'+b.name+"\" is not present on the scene. Using object's Z-axis.")}d=null}d||(d=da.Zs("%reflection%"),d=O.$q(d,"EMPTY"),f=O.$n("EMPTY"),d.A=f,n(b,d),J.bE(d,b,[0,0,0],null,1),H(d));f=null;for(h=0;h<V.length;h++)if(V[h]==
d){f=h;break}null==f&&(f=V.length,V.push(d));d.A.Od=f;c.Od=f;d.xs.push(b)}}};a.FW=b;a.XY=n;a.ZN=g;a.PW=function(a){for(var b=0;b<a.length;b++){var c=a[b];!c.A||"DYNAMIC"!=c.A.type&&"CAMERA"!=c.A.type||ea.V(c);c.ft&&y.PH(c)&&(y.apply_def(c),c.pa.length&&y.play(c,null,y.SLOT_ALL))}};a.yE=function(a){if(a.b4w_hidden_on_load||a.dg_parent&&a.dg_parent.cj||a.parent&&a.parent.cj)return!0;switch(a.type){case "MESH":return p(a);case "EMPTY":return x(a);default:return!0}};a.get_meta_tags=function(a){return da.W(a.xw)};
a.get_custom_prop=function(a){return a.Eu};a.cleanup=function(){la=Ca=0;V.length=0;ta.length=0;ca={ALL:[]}};a.copy=function(a,b,c){var d=O.get_dg_parent(a),d=d?O.XF(d.name,b):b,e=h(d);b=O.$q(d+e,a.type,b+e);b.Wk=a.Wk;b.vk=a.vk;b.Ye.hl=O.Xq(a.Ye.hl);b.Ye.Lm=O.Xq(a.Ye.Lm);b.is_dynamic=a.is_dynamic;b.Mr=a.Mr;b.ft=a.ft;b.sm=a.sm;b.A=O.zz(a.A);b.A.Ej=!1;b.xw=O.Yq(a.xw);b.Eu=O.Yq(a.Eu);n(a,b);b.Pn=O.Xq(a.Pn);b.parent=O.Xq(a.parent);b.ml=a.ml;b.es=a.es;b.bd=O.Xq(a.bd);b.Zl=a.Zl;!a.N||a.Cf||a.is_character||
a.Nm||(b.Op=a.Op,b.N=null);b.Jb=a.Jb;b.uu=a.uu;b.pd=O.Yq(a.pd);d=[];for(e=0;e<a.S.length;e++){var f=b.S[e],k=a.S[e].$;if(c){for(var g=f.$,r=0;r<k.length;r++)if(!k[r].Rg){var l=O.Yq(k[r]);l.ra=A.qO(k[r].ra);O.bg(b,f.lb,l);d.push(k[r].ra)}for(r=0;r<k.length;r++)if(k[r].Rg){l=O.Yq(k[r]);O.bg(b,f.lb,l);for(var w=0;w<d.length;w++)d[w]==k[r].ra&&(l.ra=g[w].ra)}for(r=0;r<g.length;r++)g[r].ra&&A.RC(g[r].ra),ba.$y&&g[r].ra&&ua.kN(g[r]),g[r].fl=D.YQ(g[r],b.A,b.Jc),D.tW(g[r]);ma.CV(g)}else for(r=0;r<k.length;r++)O.bg(b,
f.lb,k[r])}for(d=0;d<a.nc.length;d++)b.nc.push(m.rO(a.nc[d]));O.cC(b,!1);H(b);b.A.MA=!0;b.A.Xv=c;b.A.Bk=da.WF(Ca);Ca++;return b};a.hG=function(a,b){var c=[],d=a.animation_data,e=a.data?a.data.animation_data:null;d&&d.action&&(d=d.action,(d.J.type==y.OBJ_ANIM_TYPE_OBJECT||d.J.type==y.OBJ_ANIM_TYPE_ARMATURE&&"ARMATURE"==a.type||d.J.type==y.AL&&"LAMP"==a.type||d.J.type==y.zL&&b)&&c.push(y.GG(null,d)));e&&e.action&&("SPEAKER"==a.type||"LAMP"==a.type)&&c.push(y.GG(null,e.action));"MESH"==a.type&&c.push.apply(c,
y.dR(a));b&&c.push.apply(c,y.eR(a));return c};a.update_boundings=function(a){for(var b=a.A,c=null,d=a.S[0].$,e=0;e<d.length;e++){var f=d[e],h=a.S[0].eg[e];if(f.ra&&h.qf&&h.Pe){var m=A.vo("a_position");if(m=A.sA(f.ra.kc,m)){var k=f.ra.Fb.a_position.offset,g=f.ra.Fb.a_position.length+k;D.IW(f,m.subarray(k,g));O.SJ(f,b.D,h);"MAIN"==f.type&&(c?N.$u(c,f.tb.Pe):c=N.nu(f.tb.Pe))}}}c=c||N.Se();if(b.Kg)O.NJ(a,c);else{h=[];for(e=0;e<d.length;e++)if(f=d[e],"MAIN"==f.type&&(m=A.vo("a_position"),m=A.sA(f.ra.kc,
m)))f=d[e].ra.Fb,k=f.a_position.offset,g=f.a_position.length+k,h.push(m.subarray(k,g));O.UW(a,c,h)}if(ba.debug_view)for(e=0;e<d.length;e++)if("DEBUG_VIEW"===d[e].type&&d[e].tj){a=b.Db;b=U.gA(1,a.U);A.sI(b,[a.Sa[0],a.Ta[1],a.Ua[2]],a.U);A.Qx(b,1,!0);b.xa.a_polyindex=A.av(b);D.sW(d[e],b);break}};a.Sb=d;a.pG=function(a,b,c){b=ca[b]||[];for(var d=[],e=0;e<b.length;e++){var f=b[e];if(!(f.A.ce!=c&&-1!=c||f.Wk))for(var h=f.S,m=0;m<h.length;m++)h[m].lb==a&&d.push(f)}return d};a.get_all_objects=t;a.get_first_character=
function(a){var b=ca.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(ga.xG(d))for(var e=d.S,f=0;f<e.length;f++)if(e[f].lb==a)return d}return null};a.Zo=q;a.get_selectable_objects=function(){var a=[],b=ca.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.A.rl&&!d.Wk&&a.push(d)}return a};a.get_outlining_objects=function(){var a=[],b=ca.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.A.Xc&&!d.Wk&&a.push(d)}return a};a.Vc=function(b,c,d,e){var f=null,h=ca.ALL;switch(b){case a.Oy:f=G(c,h,!0,d,
e);break;case a.Ny:a:{for(b=0;b<h.length;b++)if(f=h[b],f.Gd==d&&(f.A.ce==e||-1==e)){var m=O.get_dg_parent(f);if(m&&m.Gd==c)break a}f=null}break;case a.Id:a:{for(e=0;e<h.length;e++){b=h[e];for(var f=c.length-1,m=b,k=!0;0<=f&&k;)k=m&&m.Gd==c[f]&&(m.A.ce==d||-1==d),m&&(m=O.get_dg_parent(m)),f--;if(k&&!m){f=b;break a}}f=null}}return f};a.get_world_by_name=function(a,b){return G("%meta_world%"+a,ca.WORLD,!0,b)};a.Bv=function(a){return a.Gd.replace("%meta_world%","")};a.pick_object=function(b,c){var e=
fa.Gh();if(!e)return sa.error("No active scene"),null;var f=fa.Tb(e,pa.Hg);f&&f.enable_hmd_stereo&&(f=C.get_canvas(),b=f.clientHeight/2,c=f.clientWidth/2);if(f=P.PT(b,c))return f;f=fa.QT(e,b,c);if(!f)return null;for(var e=d(e,"MESH",-1),h=0;h<e.length;h++){var m=e[h].A,k=m.Bk;if(k&&3>Math.abs(255*k[0]-f[0])&&3>Math.abs(255*k[1]-f[1])&&3>Math.abs(255*k[2]-f[2]))return m.Xc&&m.Ow&&(ja.outlining_overview_mode?a.apply_outline_anim(e[h],ja.il,ja.jl,ja.kl):(f=m.Ji,a.apply_outline_anim(e[h],f.il,f.jl,f.kl))),
e[h]}return null};a.set_wind_params=function(a,c){for(var e=d(a,"EMPTY",-1),f=0;f<e.length;f++){var h=e[f];if(h.lo&&"WIND"===h.lo.type){var m=h;break}}if(!m)return sa.error("There is no wind on the scene"),0;"number"==typeof c.wind_dir&&(e=da.deg_to_rad(c.wind_dir),W.set(Math.sin(e),-Math.cos(e),0,xa),da.dir_to_quat(xa,da.AXIS_Z,I),ea.set_rotation(m,I));"number"==typeof c.wind_strength&&(m.lo.jJ=c.wind_strength);b(m)};a.remove_object=function(a){J.$N(a)&&J.remove(a);var b=ca.ALL,c=ca[a.type],d=b.indexOf(a);
a=c.indexOf(a);-1!=d&&b.splice(d,1);-1!=a&&c.splice(a,1)};a.ET=H;a.i_=function(a){return ca[a.type]&&-1<ca[a.type].indexOf(a)};a.JW=function(a,b){if(a.A.Ej){var c=a.A,d=b.J;if(c.Ej)for(var e=ea.get_translation(b.bj,xa),f=0;f<a.S.length;f++)if(a.S[f].lb==b)for(var h=0;h<a.S[f].$.length;h++){var m=a.S[f].$[h],k=m.Zk,g="SHADOW"==m.type&&"RECEIVE"==m.Ab&&!ba.hp;ba.lod_smooth_transitions&&!g&&(g=d.gT,"ALL"==g||"NON-OPAQUE"==g&&(m.mb||m.dj))&&(k.ht=!0);z(m,c,e);k.Re=k.si;k.zo=Math.min(d.mH,.6*c.Jj);k.yo=
Math.min(d.mH,.6*c.Kj)}}};a.KW=z;a.dV=function(a){var b=a.A,c=b.Tf,d=b.Uf,e=b.yf,f=b.xf,h=b.sf;a=a.S;for(b=0;b<a.length;b++)for(var m=a[b].$,k=0;k<m.length;k++){var g=m[k].ra,n=g.Fb,r=n.au_wind_bending_amp,L=n.au_wind_bending_freq,l=n.au_detail_bending_amp,w=n.au_detail_bending_freq,n=n.au_branch_bending_amp;if(L){var t=Array.apply(null,Array(L.length)).map(function(){return d});A.$s(g,A.Ln,new Float32Array(t),L.offset)}r&&(t=Array.apply(null,Array(r.length)).map(function(){return c}),A.$s(g,A.Ln,
new Float32Array(t),r.offset));l&&(t=Array.apply(null,Array(l.length)).map(function(){return f}),A.$s(g,A.Ln,new Float32Array(t),l.offset));w&&(t=Array.apply(null,Array(w.length)).map(function(){return e}),A.$s(g,A.Ln,new Float32Array(t),w.offset));n&&(t=Array.apply(null,Array(n.length)).map(function(){return h}),A.$s(g,A.Ln,new Float32Array(t),n.offset))}};a.inherit_material=function(a,b,c,e){if(a.A.xe&&c.A.xe){var f=D.hb(a,b,"MAIN"),h=null;D.QA(c,e,function(a){h||(h={});a.Ja&&(h[a.Ja.name]=a.Ja)},
"PARTICLES");for(var m=l(c,e),k=r(a,b,c,e),g=fa.get_active(),n=0;n<c.S.length;n++){var A=c.S[n].lb;fa.set_active(A);var t=d(A,"LAMP",0),L=c.S[n].$;c.S[n].$=[];c.S[n].eg=[];D.aG(A,[c.vk],t,[]);D.yu(c,fa.uv(A),A);fa.fE(A,[c]);fa.append_object(A,c,!1,!0);for(t=0;t<L.length;t++)O.bg(c,A,L[t])}E(a,b,c,k);F(c,m);w(c,e,a,h,f);fa.set_active(g)}};a.create_line=function(a){a=a||"";a+=h(a);a=O.$q(a,"LINE");a.A=O.$n("EMPTY");a.is_dynamic=!0;D.$F(fa.Gh(),[a]);fa.append_object(fa.Gh(),a);H(a);return a};a.XQ=function(a,
b){var c=b.A,d=N.nu(c.ij);c.Kg?O.NJ(b,d):O.TW(b,d,a.data.b4w_boundings)};a.set_nodemat_value=function(a,b,c,d){for(var e=O.is_world(a),f=0;f<a.S.length;f++)for(var h=a.S[f].$,m=0;m<h.length;m++){var k=h[m];if(e||-1!=k.cc.indexOf(b))k.Lh[c]=d}e&&fa.iy(a)};a.set_nodemat_rgb=function(a,b,c,d,e,f){for(var h=O.is_world(a),m=0;m<a.S.length;m++)for(var k=a.S[m].$,g=0;g<k.length;g++){var n=k[g];if(h||-1!=n.cc.indexOf(b))n.ie[3*c]=d,n.ie[3*c+1]=e,n.ie[3*c+2]=f}h&&fa.iy(a)};a.get_nodemat_value=function(a,b){return a.Lh[b]};
a.get_nodemat_rgb=function(a,b,c){c[0]=a.ie[3*b];c[1]=a.ie[3*b+1];c[2]=a.ie[3*b+2];return c};a.Dr=function(a,b,c){b=f(b,c);for(c=0;c<a.length;c+=3)if(a[c]==b)return 4*a[c+1]+a[c+2];return null};a.Cr=function(a,b,c){b=f(b,c);for(c=0;c<a.length;c+=2)if(a[c]==b)return a[c+1];return null}};b4w.module.__obj_util=function(a,u){function e(a){a={type:a,ce:0,D:G.om(),Ey:G.om(),pivot:new Float32Array(3),wc:new Float32Array(3),Sk:0,Tk:0,MA:!1,Xv:!1,Bk:null,Ki:0,Cl:!1,pe:z.create(),use_panning:!1,pb:0,Up:1,Tp:1,Vp:1,dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_bokeh:!1,Kd:!1,dof_object:null,Vb:null,Xa:null,Kb:null,Fd:null,Ed:null,je:null,ui:!0,Ji:{il:1,jl:1,kl:0},be:-1,Od:-1,xc:new Float32Array(4),Sg:0,Og:0,Ej:!1,Xr:new Float32Array(3),
sw:new Float32Array(3),qg:0,pg:Infinity,Jj:0,Kj:0,we:!1,bf:!1,Td:!1,Ge:!1,ke:!1,Rd:!1,Yc:!1,hh:"",Me:!1,xe:!1,Nc:!1,hide:!1,BG:!1,rl:!1,Nw:!1,Xc:!1,Mw:!1,Ow:!1,Vk:!1,is_visible:!1,ur:!1,Fn:0,Tf:0,Uf:0,yf:0,xf:0,sf:0,Lj:"",Te:{UA:"",TA:"",BB:""},dm:!1,ju:new Float32Array(3),Kg:!1,zq:!1,Bq:"",Aq:!1,Bf:0,py:0,qy:0,Jh:0,Am:!1,bd:!1,ef:!1,Ag:[],Xk:!1,fj:!1,nf:1,Rn:0,Qn:1,ej:null,Kh:!1,ei:new Int8Array([-1,-1]),op:[],ww:[],tx:[],Qd:null,Fe:null,Wd:null,Ke:null,Dl:null,nl:null,fg:null,gi:null,ns:null,sq:null,
rq:null,ij:t.Se(),va:t.Se(),wh:t.Se(),tc:t.wu(),ue:t.wu(),Db:t.Zq(),xk:t.Zq(),dd:t.Au(),lE:t.Au(),yq:t.mS(),wq:t.kS(),xq:t.lS(),Li:0};z.copy(H.AXIS_Z,a.pe);return a}function c(a){return{lb:a,Wv:!1,$:[],eg:[],Mi:[],sj:null,kC:[],Wr:0,OH:!1,ja:[],UI:[]}}function b(a){if(!(a instanceof Object))return a;var c=null,d=null,e=null,h=null,k=null,g=null;a.na&&(c=a.na,a.na=null);a.Mf&&(d=a.Mf,a.Mf=null);a.rf&&(e=a.rf,a.rf=null);a.wb&&(h=a.wb,a.wb=null);a.zb&&(k=a.zb,a.zb=null);a.ff&&(g=a.ff,a.ff=null);var n;
n=a.constructor;switch(n){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:n=new n(a);break;case Array:n=new n(a.length);for(var r=0;r<a.length;r++)n[r]=b(a[r]);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:n=a;break;case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:n=null;break;case Function:n=a;break;default:for(r in n=new n,a)n[r]=b(a[r])}c&&
(n.na=c,a.na=c);d&&(n.Mf=d,a.Mf=d);e&&(n.rf=e,a.rf=e);h&&(n.wb=h,a.wb=h);k&&(n.zb=k,a.zb=k);g&&(n.ff=H.Ek(),a.ff=g);return n}function n(a,b){t.mi(b,a.va);t.Xn(a.va,a.D,a.wh)}function g(a,b,c){a.tc=t.zE(b,c);t.cu(a.tc,a.D,a.ue)}function p(a,b,c,d,e,h){a.Db=t.hz(b,c,d,h);z.scale(a.Db.Sa,e[0],a.Db.Sa);z.scale(a.Db.Ta,e[1],a.Db.Ta);z.scale(a.Db.Ua,e[2],a.Db.Ua);t.nz(a.Db,a.D,a.xk)}function k(a,b,c,d){a.yq=t.oE(b,d);a.wq=t.mE(c,d);a.xq=t.nE(b,d)}function x(a,b,c,d,e,h){a.dd=t.CU(h,b,c,d,e);t.oz(a.dd,a.D,
a.lE)}function v(a,b,c){t.Xn(a.tb.Pe,b,c.Pe);a.Jl&&t.nz(a.tb.qf,b,c.qf);t.cu(a.tb.Qe,b,c.Qe)}function h(a,b){for(var c=a.S,d=0;d<c.length;d++){var e=c[d];if(e.lb==b)return e}return null}function d(a){return a.ml?a.parent:a.parent?d(a.parent):null}var t=u("__boundings"),q=u("__config"),G=u("__tsr"),H=u("__util"),z=u("__vec3"),l=u("__vec4"),F=q.L;a.Qy=Infinity;a.$n=e;a.zz=function(a){var b=e(a.type);b.ce=a.ce;G.copy(a.D,b.D);G.copy(a.Ey,b.Ey);z.copy(a.pivot,b.pivot);z.copy(a.wc,b.wc);b.Sk=a.Sk;b.Tk=
a.Tk;b.MA=a.MA;b.Xv=a.Xv;a.Bk&&(b.Bk=z.clone(a.Bk));b.Ki=a.Ki;b.Cl=a.Cl;z.copy(a.pe,b.pe);b.use_panning=a.use_panning;b.pb=a.pb;b.Up=a.Up;b.Tp=a.Tp;b.Vp=a.Vp;b.dof_distance=a.dof_distance;b.dof_front_start=a.dof_front_start;b.dof_front_end=a.dof_front_end;b.dof_rear_start=a.dof_rear_start;b.dof_rear_end=a.dof_rear_end;b.dof_power=a.dof_power;b.dof_bokeh_intensity=a.dof_bokeh_intensity;b.dof_bokeh=a.dof_bokeh;b.Kd=a.Kd;b.dof_object=a.dof_object;b.Vb=H.W(a.Vb);b.Xa=H.W(a.Xa);b.Kb=H.W(a.Kb);b.Fd=H.W(a.Fd);
b.Ed=H.W(a.Ed);b.je=a.je;b.ui=a.ui;b.Ji.il=a.Ji.il;b.Ji.jl=a.Ji.jl;b.Ji.kl=a.Ji.kl;b.be=a.be;b.Od=a.Od;b.xc=a.xc;b.Sg=a.Sg;b.Og=a.Og;b.Ej=a.Ej;z.copy(a.Xr,b.Xr);z.copy(a.sw,b.sw);b.qg=a.qg;b.pg=a.pg;b.Jj=a.Jj;b.Kj=a.Kj;b.we=a.we;b.bf=a.bf;b.Td=a.Td;b.Ge=a.Ge;b.ke=a.ke;b.Rd=a.Rd;b.Yc=a.Yc;b.hh=a.hh;b.Me=a.Me;b.xe=a.xe;b.Nc=a.Nc;b.hide=a.hide;b.rl=a.rl;b.Nw=a.Nw;b.Xc=a.Xc;b.Mw=a.Mw;b.Ow=a.Ow;b.Vk=a.Vk;b.is_visible=a.is_visible;b.ur=a.ur;b.Fn=a.Fn;b.Tf=a.Tf;b.Uf=a.Uf;b.yf=a.yf;b.xf=a.xf;b.sf=a.sf;b.Lj=
a.Lj;b.Te=a.Te;b.dm=a.dm;z.copy(a.ju,b.ju);b.Kg=a.Kg;b.zq=a.zq;b.Bq=a.Bq;b.Aq=a.Aq;b.Bf=a.Bf;b.py=a.py;b.qy=a.qy;b.Jh=a.Jh;b.Am=a.Am;b.bd=a.bd;b.ef=a.ef;b.Ag=H.W(a.Ag);b.Xk=a.Xk;b.fj=a.fj;b.nf=a.nf;b.Rn=a.Rn;b.Qn=a.Qn;b.ei.set(a.ei);b.op=H.W(a.op);b.ww=H.W(a.ww);b.tx=H.W(a.tx);b.Qd=H.W(a.Qd);b.Fe=H.W(a.Fe);b.Wd=H.W(a.Wd);b.Ke=H.W(a.Ke);b.fg=H.W(a.fg);b.gi=H.W(a.gi);b.ns=H.W(a.ns);b.sq=H.W(a.sq);b.rq=H.W(a.rq);t.mi(a.ij,b.ij);t.mi(a.va,b.va);t.mi(a.wh,b.wh);t.Dk(a.tc,b.tc);t.Dk(a.ue,b.ue);t.Yn(a.Db,
b.Db);t.Yn(a.xk,b.xk);t.wO(a.wq,b.wq);t.yO(a.yq,b.yq);t.xO(a.xq,b.xq);b.Li=a.Li;return b};a.$q=function(a,b,c){c||(c=a);return{name:a,Jc:H.nv(),Gd:c,type:b,nc:[],Wk:!0,vk:null,Ye:{hl:[],Lm:[]},is_dynamic:!1,Mr:!1,ft:!1,NG:!1,A:null,uc:null,ka:null,Eb:null,Rt:null,anchor:null,lo:null,xw:null,Eu:null,S:[],bd:[],ve:H.Ek(),Ez:H.Ek(),pa:[],xs:[],Ze:[],Pn:[],Th:null,ln:[],parent:null,ml:!1,es:"",wy:null,Vw:null,Op:!1,Jb:"",uu:"AUTO",Cf:!1,is_character:!1,Nm:!1,kz:!1,N:null,R:null,Qg:null,Of:null,oo:null,
JE:null,HB:[],pd:{hs:"NO_COLLISION",Ui:!1,aK:!1,ah:0,fK:0,eK:0,wF:0,oI:0,aT:!1,bT:!1,cT:!1,dT:!1,eT:!1,fT:!1,ki:0,ji:0,li:0,UC:!1,qu:"BOX",et:!1},SH:{by:0,AB:0,wg:0,QB:0},Zl:0,sm:[],rB:!1,EH:!1,Yr:[]}};a.TZ=c;a.Xq=function(a){return a instanceof Array?a.slice():a};a.Yq=b;a.is_dynamic=function(a){return a.is_dynamic};a.ob=function(a){return"MESH"==a.type&&a.is_dynamic};a.Ot=function(a,b){a.S.push(c(b))};a.bg=function(a,b,c){var d=a.A;a=h(a,b);a.$.push(c);b=t.HG();v(c,d.D,b);a.eg.push(b)};a.NJ=function(a,
b){var c=a.A,d=Math.max(Math.abs(b.max_x),Math.abs(b.min_x)),e=Math.max(Math.abs(b.max_y),Math.abs(b.min_y)),h=Math.max(Math.abs(b.max_z),Math.abs(b.min_z)),h=Math.sqrt(d*d+e*e+h*h),d=Math.sqrt(d*d+e*e),e=t.Se();e.max_x=e.max_y=e.max_z=h;e.min_x=e.min_y=e.min_z=-h;n(c,e);g(c,h,[0,0,0]);p(c,[1,0,0],[0,1,0],[0,0,1],[h,h,h],[0,0,0]);a.is_dynamic?k(c,d,d,e):x(c,[1,0,0],[0,1,0],[0,0,1],[h,h,h],[0,0,0])};a.TW=function(a,b,c){var d=a.A,e=c.bs_rad,h=c.bc_rad,l=c.bs_cen,r=c.be_cen,t=c.caxis_x,w=c.caxis_y,
q=c.caxis_z,A=c.be_ax,z=c.rbb.rbb_c;c=c.rbb.rbb_s;n(d,b);g(d,e,l);b=a.is_dynamic;p(d,b?t:[1,0,0],b?w:[0,1,0],b?q:[0,0,1],A,r);a.is_dynamic?k(d,h,h,d.va):x(d,t,w,q,c,z)};a.UW=function(a,b,c){for(var d=a.A,e=b.max_x-b.min_x,h=b.max_y-b.min_y,l=b.max_z-b.min_z,r=(b.max_x+b.min_x)/2,t=(b.max_y+b.min_y)/2,w=(b.max_z+b.min_z)/2,q=r,A=w,z=Math.max(e,Math.max(h,l))/2,m=Math.max(e,l)/2,G=[r/(e?e:1),t/(h?h:1),w/(l?l:1)],E=.5,v=0;v<c.length;v++)for(var H=c[v],F=0;F<H.length;F+=3){var u=H[F],U=H[F+1],ia=H[F+
2],fa=Math.sqrt((r-u)*(r-u)+(t-U)*(t-U)+(w-ia)*(w-ia));if(fa>z)var pa=r-z*(u-r)/fa,Z=t-z*(U-t)/fa,fa=w-z*(ia-w)/fa,r=(pa+u)/2,t=(Z+U)/2,w=(fa+ia)/2,z=Math.sqrt((r-u)*(r-u)+(t-U)*(t-U)+(w-ia)*(w-ia));Z=Math.sqrt((q-u)*(q-u)+(A-ia)*(A-ia));Z>m&&(pa=q-m*(u-q)/Z,fa=A-m*(ia-A)/Z,q=(pa+u)/2,A=(fa+ia)/2,m=Math.sqrt((q-u)*(q-u)+(A-ia)*(A-ia)));u/=e?e:1;U/=h?h:1;ia/=l?l:1;fa=Math.sqrt((G[0]-u)*(G[0]-u)+(G[1]-U)*(G[1]-U)+(G[2]-ia)*(G[2]-ia));fa>E&&(pa=G[0]-E*(u-G[0])/fa,Z=G[1]-E*(U-G[1])/fa,fa=G[2]-E*(ia-G[2])/
fa,G[0]=(pa+u)/2,G[1]=(Z+U)/2,G[2]=(fa+ia)/2,E=Math.sqrt((G[0]-u)*(G[0]-u)+(G[1]-U)*(G[1]-U)+(G[2]-ia)*(G[2]-ia)))}c=e?e*G[0]:b.max_x;q=h?h*G[1]:b.max_y;G=l?l*G[2]:b.max_z;e*=E;h*=E;l*=E;n(d,b);g(d,z,[r,t,w]);p(d,[1,0,0],[0,1,0],[0,0,1],[e,h,l],[c,q,G]);a.is_dynamic?k(d,m,m,d.va):x(d,[(d.va.max_x-d.va.min_x)/2,0,0],[0,(d.va.max_y-d.va.min_y)/2,0],[0,0,(d.va.max_z-d.va.min_z)/2],[1,1,1],[(d.va.max_x+d.va.min_x)/2,(d.va.max_y+d.va.min_y)/2,(d.va.max_z+d.va.min_z)/2])};a.SJ=v;a.n_=function(a,b){for(var c=
a.S,d=0;d<c.length;d++)if(c[d].lb==b){c.splice(d,1);break}};a.Da=h;a.MJ=function(a,b){for(var c=0;c<a.length;c++)l.copy(b,a[c].A.xc)};a.cC=function(a,b,c){for(var d=0;d<a.S.length;d++){var e=a.S[d];c&&e.lb!=c||(e.Wv=b)}};a.tI=function(a,b){a.$.splice(b,1);a.eg.splice(b,1)};a.zv=function(a,b){for(var c=[],d=b?F.wH-1:F.wH,e=0;e<a.length;e++){var h=a[e];h.Eb.bG&&c.length<d&&c.push(h)}return c.length?c:a[0]?[a[0]]:[]};a.tT=function(a,b){G.identity(b.D);b.Bk=null;a.A=b};a.ME=function(a,b){if(b.b4w_enable_soft_particles&&
0<b.b4w_particles_softness){var c=b.material-1,d=a.nc;if(0<=c&&c<d.length&&("ADD"==d[c].jb||"ALPHA"==d[c].jb||"ALPHA_SORT"==d[c].jb))return!0}return!1};a.eO=function(a){a=a.S;for(var b=0;b<a.length;b++)for(var c=a[b].$,d=0;d<c.length;d++)for(var e=c[d].eb.Ah,h=0;h<e.length;h++){var k=e[h];if("USE_MODEL_TSR_INVERSE"==k[0]&&"1"==k[1])return!0}return!1};a.XF=function(a,b){return a+"*"+b};a.get_parent=function(a){return a.ml?null:a.parent};a.get_dg_parent=d;a.mA=function(a,b){for(var c=[],e=0;e<b.length;e++){var h=
b[e];d(h)==a&&c.push(h)}return c};a.get_object_data_id=function(a){return a.A.ce};a.is_mesh=function(a){return"MESH"===a.type};a.is_armature=function(a){return"ARMATURE"===a.type};a.is_speaker=function(a){return"SPEAKER"===a.type};a.is_camera=function(a){return"CAMERA"===a.type};a.is_lamp=function(a){return"LAMP"===a.type};a.is_empty=function(a){return"EMPTY"===a.type};a.is_line=function(a){return"LINE"===a.type};a.is_world=function(a){return"WORLD"===a.type}};b4w.module.__particles=function(a,u){function e(){t.K("_rand() undefined")}function c(a,b){return{name:a,Qw:b,time:0,Yw:-1,Qp:!1,Zn:1,Ba:0,kb:0,ay:0,Ur:0,iw:0,cyclic:0,ah:0,So:0,Ev:0,xj:0,Ve:0,Dy:0,size:0,Nt:0,Mt:0,su:0,ru:new Float32Array(16),Fw:!1,positions:null,os:null,Wx:null,Rs:null,eo:null,er:null,ig:null,Pw:null,Zx:0,$x:0}}function b(a,b,c,e,h,k){var f=a.eo,g=a.ig,n=a.time;a=a.Yw;for(var r=0;r<f.length;r+=4){var t=f[r];if(n>a&&n>=t&&t>a||n<a&&(t>a||n>=t))for(t=0;8>t;t++)g[8*r+t]=e[t],z[t]=
e[t];else for(t=0;8>t;t++)z[t]=g[8*r+t];t=l;t[0]=b[3*r];t[1]=b[3*r+1];t[2]=b[3*r+2];d.transform_vec3(t,z,t);h[3*r]=t[0];h[3*r+1]=t[1];h[3*r+2]=t[2];var A=x.Fm(c,r,H);x.CH(A,z,A);x.Pi(k,A,r);for(t=1;4>t;t++)h[3*(r+t)]=h[3*r],h[3*(r+t)+1]=h[3*r+1],h[3*(r+t)+2]=h[3*r+2],x.Pi(k,A,r+t)}}function n(a){a?(t.UV(a),e=function(){return t.iU()}):e=function(){return Math.random()}}var g=u("__config"),p=u("__batch"),k=u("__geometry"),x=u("__tbn"),v=u("__textures"),h=u("__time"),d=u("__tsr"),t=u("__util"),q=u("__vec3"),
G=g.L,H=x.create(),z=new Float32Array(8),l=new Float32Array(3),F=[];a.$E=function(a){var b=c(a.name,a.type);b.time=a.time;b.Yw=a.Yw;b.Qp=a.Qp;b.Zn=a.Zn;b.Ba=a.Ba;b.kb=a.kb;b.ay=a.ay;b.Ur=a.Ur;b.iw=a.iw;b.cyclic=a.cyclic;b.ah=a.ah;b.So=a.So;b.Ev=a.Ev;b.xj=a.xj;b.Ve=a.Ve;b.Dy=a.Dy;b.size=a.size;b.Nt=a.Nt;b.Mt=a.Mt;b.su=a.su;b.ru.set(a.ru);b.Fw=a.Fw;b.positions=t.W(a.positions);b.os=t.W(a.os);b.Wx=t.W(a.Wx);b.Rs=t.W(a.Rs);b.eo=t.W(a.eo);b.er=t.W(a.er);b.ig=t.W(a.ig);b.Pw=t.W(a.Pw);b.Zx=a.Zx;b.$x=a.$x;
return b};a.update=function(){for(var a=0;a<F.length;a++)for(var c=F[a],d=c.S,e=0;e<d.length;e++)for(var h=c,k=d[e].$,g=0;g<k.length;g++){var n=k[g],l=n.Ja;l&&l.Qp&&!n.Rg&&(b(l,l.positions,l.Wx,h.A.D,l.os,l.Rs),l.Fw=!0)}};a.uB=function(a){a=a.S;for(var b=0;b<a.length;b++)for(var c=a[b].$,d=0;d<c.length;d++)if(c[d].Ja)return!0;return!1};a.vB=function(a,b){for(var c=a.S,d=0;d<c.length;d++)for(var e=c[d].$,h=0;h<e.length;h++){var k=e[h].Ja;if(k&&k.name==b)return!0}return!1};a.NH=function(a){a=a.S;for(var b=
0;b<a.length;b++)for(var c=a[b].$,d=0;d<c.length;d++){var e=c[d].Ja;if(e&&"EMITTER"==e.Qw)return!0}return!1};a.BN=function(a){return 0<a.particle_systems.length};a.AN=function(a){for(var b=0;b<a.particle_systems.length;b++)if("EMITTER"==a.particle_systems[b].settings.type)return!0;return!1};a.$R=function(a){for(var b=0;b<a.particle_systems.length;b++){var c=a.particle_systems[b].settings;if("HAIR"==c.type&&c.b4w_dynamic_grass)return!0}return!1};a.ZO=function(a,b,d){var e=a.Ja=c(b.name,b.settings.type);
e.Ba=b.settings.frame_start;e.kb=b.settings.frame_end;e.ay=(e.kb-e.Ba)/h.Dd();e.Ur=b.settings.lifetime;e.iw=e.Ur/h.Dd();e.cyclic=b.settings.b4w_cyclic?1:0;e.ah=b.settings.mass;e.So=b.settings.normal_factor;e.Ev=9.81*b.settings.effector_weights.gravity;e.xj=b.settings.b4w_fade_in/h.Dd();e.Ve=b.settings.b4w_fade_out/h.Dd();e.Dy=b.settings.effector_weights.wind;e.Qp="WORLD"==b.settings.b4w_coordinate_system?!0:!1;var k,g,n;a.Gr?(k=d.xo.size,g=d.xo.Hr,30>g?(g=.5,n=.9):40>g?(g=.1,n=1):50>g?(g=0,n=.8):
(g=0,n=.5)):(k=b.settings.particle_size,n=g=1);e.size=k;e.Nt=g;e.Mt=n;d.Eg&&"BILLBOARD"==b.settings.render_type&&(p.yb(a,"NODES",1),p.yb(a,"PARTICLE_BATCH",1),a.xb=!0);b=b.settings.texture_slots;b[0]&&b[0].use_map_size&&b[0].texture&&"BLEND"==b[0].texture.type&&b[0].texture.use_color_ramp&&G.Lt&&(b=b[0].texture,k=[],v.HN(b.color_ramp,v.GD,k),k=new Uint8Array(k.map(function(a){return t.clamp(255*a,0,255)})),k=v.lF(k,v.GD),p.vh(a,k,"u_color_ramp_tex",b.name),p.yb(a,"USE_COLOR_RAMP",1));d=d.Cg;a=[-1,
0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];if(d[0]&&"STRAND"==d[0].texture_coords&&d[0].texture&&"BLEND"==d[0].texture.type&&d[0].texture.use_color_ramp){d=d[0].texture.color_ramp.elements;b=Math.min(4*d.length,a.length);for(k=0;k<b;k+=4)g=d[k/4],a[k]=g.position,a[k+1]=g.color[0],a[k+2]=g.color[1],a[k+3]=g.color[2];e.su=d.length}e.ru.set(a)};a.SQ=function(a,c,d,f){var g=a.Ja,l=f.D;f=d.settings.count;var r=d.settings.frame_start/h.Dd(),w=d.settings.frame_end/h.Dd(),B=d.settings.lifetime/h.Dd(),p=d.settings.lifetime_random,
G=d.settings.emit_from,A=d.settings.factor_random;if(d.settings.use_rotations)var z=d.settings.angular_velocity_mode,m=d.settings.angular_velocity_factor;else z="NONE",m=0;var v=d.settings.b4w_randomize_emission,E=d.settings.b4w_cyclic;g.Zx=d.settings.billboard_tilt;g.$x=d.settings.billboard_tilt_random;n(d.seed);var F;c=k.NF(c,["a_position","a_tbn"],null);switch(G){case "VERT":var S=c.la[0].a_position;F=c.la[0].a_tbn;d=S.length/3;c=[];for(G=0;G<f;G++){var u=Math.round((d-1)*e());c.push(u);c.push(u);
c.push(u);c.push(u)}d=[];for(G=0;G<c.length;G++)d.push(S[3*c[G]]),d.push(S[3*c[G]+1]),d.push(S[3*c[G]+2]);S=new Float32Array(d);d=x.create(c.length);for(G=0;G<c.length;G++)u=x.Fm(F,c[G],H),x.Pi(d,u,G);F=d;break;case "FACE":S=[];F=[];t.Uv(0,F);d=k.hA(c,f,!1,F);t.Uv(0,F);c=k.hA(c,f,!0,F);F=x.create(4*d.length);for(G=0;G<d.length;G++)S.push(d[G][0],d[G][1],d[G][2]),S.push(d[G][0],d[G][1],d[G][2]),S.push(d[G][0],d[G][1],d[G][2]),S.push(d[G][0],d[G][1],d[G][2]),x.Pi(F,c[G],4*G),x.Pi(F,c[G],4*G+1),x.Pi(F,
c[G],4*G+2),x.Pi(F,c[G],4*G+3);S=new Float32Array(S);break;case "VOLUME":t.K("Particle emission from volume is not supported");break;default:t.K("Wrong emit from option")}F=[S,F];S=F[0];F=F[1];g.positions=new Float32Array(S);g.Wx=new Float32Array(F);g.os=new Float32Array(S.length);g.Rs=new Float32Array(F.length);c=[];w=(w-r)/f;for(d=0;d<f;d++)G=v?w*d+10*w*(.5-e()):w*d,E||(G+=r),c.push(G),c.push(G),c.push(G),c.push(G);r=new Float32Array(c);g.eo=new Float32Array(r);g.er=new Float32Array(r);if(g.Qp){g.ig=
new Float32Array(8*r.length);for(v=0;v<8*r.length;v++)for(E=0;8>E;E++)g.ig[8*v+E]=l[E];b(g,S,F,l,S,F)}l=k.Zg("EMITTER_PARTICLES");v=t.oi();v.a_position=S;v.a_tbn=F;l.la[0]=v;a.Bh=k.ut;a=[];for(v=0;v<f;v++)a.push(4*v,4*v+2,4*v+1,4*v,4*v+3,4*v+2);a=new Uint16Array(a);l.Aa=a;l.xa.a_p_bb_vertex=k.VF(f);l.Wa=S.length/3;a=[];p=B*p;for(v=0;v<f;v++)E=p*e(),a.push(B-E),a.push(B-E),a.push(B-E),a.push(B-E);B=l.xa;p=[];for(v=0;v<f;v++)E=Math.random(),p.push(a[4*v],r[4*v],E),p.push(a[4*v+1],r[4*v+1],E),p.push(a[4*
v+2],r[4*v+2],E),p.push(a[4*v+3],r[4*v+3],E);p=new Float32Array(p);B.a_p_data=p;B=l.xa;p=[];for(a=0;a<f;a++){r=[e()-.5,e()-.5,e()-.5];q.normalize(r,r);p.push(A*r[0]);p.push(A*r[1]);p.push(A*r[2]);switch(z){case "NONE":p.push(0);break;case "SPIN":case "VELOCITY":p.push(m);break;case "RAND":p.push(2*m*(e()-.5));break;default:t.K("Undefined velocity factor")}r=p.slice(-4);for(v=0;12>v;v++)p.push(r[v%4])}f=new Float32Array(p);B.a_p_vels=f;g.Pw=new Float32Array(l.xa.a_p_data);return l};a.tV=function(a,
b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,h=0;h<e.length;h++){var k=e[h].Ja;k&&k.name==b&&!e[h].Rg&&(k.Yw=k.time,k.time=c)}};a.aU=function(a){for(var b=a.Wa,c=a.la[0].a_position,d=[],e=[],h=0;h<b;h++)e.push(c[3*h]),d.push(c[3*h+1]),e.push(c[3*h+2]);d=new Float32Array(d);e=new Float32Array(e);a.xa.a_lf_dist=d;a.xa.a_lf_bb_vertex=e;return a};a.set_size=function(a,b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,h=0;h<e.length;h++){var k=e[h].Ja;k&&k.name==b&&(k.size=c)}};a.set_normal_factor=
function(a,b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,h=0;h<e.length;h++){var k=e[h].Ja;k&&k.name==b&&(k.So=c)}};a.AZ=function(a,b){for(var c=a.S,d=0;d<c.length;d++)for(var e=c[d].$,h=0;h<e.length;h++){var k=e[h].Ja;if(k&&k.name==b)return k.So}return 0};a.set_factor=function(a,b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,h=0;h<e.length;h++){var g=e[h],n=g.Ja;if(n&&n.name==b){n.Zn=c;var l=n.eo;if(1==c)var t=l;else if(0==c)for(var t=n.er,q=0;q<t.length;q+=4)t[q]=1E4,t[q+1]=t[q],
t[q+2]=t[q],t[q+3]=t[q];else for(var A=4/c,t=n.er,r=0,q=0;q<t.length;q+=4)q>=r?(t[q]=l[q],r+=A):t[q]=1E4,t[q+1]=t[q],t[q+2]=t[q],t[q+3]=t[q];g=g.ra;if(g.Fb.a_p_data){n=n.Pw;for(q=0;q<n.length;q+=3)n[q+1]=t[Math.round(q/3)];k.GJ(g,"a_p_data",3,n)}}}};a.aX=function(a,b,c){a=a.S;for(var d=0;d<a.length;d++)for(var e=a[d].$,h=0;h<e.length;h++){var k=e[h].Ja;if(k&&k.Qp)for(var g=0;g<8*k.eo.length;g++)k.ig[8*g]=b[0],k.ig[8*g+1]=b[1],k.ig[8*g+2]=b[2],k.ig[8*g+3]=b[3],k.ig[8*g+4]=c[0],k.ig[8*g+5]=c[1],k.ig[8*
g+6]=c[2],k.ig[8*g+7]=c[3]}};a.SW=function(a,b,c){a.xa.a_tbn=x.create(4*c);x.identity(a.xa.a_tbn);if(b.fs){for(var d=[],e=0;e<c;e++)d.push(e,e,e,e);a.xa[b.fs.name]=new Float32Array(d)}};a.RW=function(a){-1==F.indexOf(a)&&F.push(a)};a.nU=function(a){a=F.indexOf(a);-1!=a&&F.splice(a,1)};a.cleanup=function(){F.length=0}};b4w.module.__primitives=function(a,u){function e(a,b,c,e){for(var d=[],h=[],g=[],n=a*b,t=2*c/(a-1),q=2*e/(b-1),v=0;v<a;v++)for(var w=-c+v*t,f=0;f<b;f++)if(h.push(w,-e+f*q,0),g.push(v/(a-1),f/(b-1)),v&&f){var y=v*b+f,D=y-1,u=(v-1)*b+f,M=u-1;d.push(y,D,u);d.push(D,M,u)}a=x.oi();a.a_position=new Float32Array(h);a.a_tbn=k.create(n);n=p.Zg("GRID_PLANE");n.la[0]=a;n.xa.a_texcoord=new Float32Array(g);n.Aa=new Uint32Array(d);n.Wa=h.length/3;return n}function c(a){var b=a.length;b%4&&x.K("Wrong array");for(var c=
[],e=[],h=0;h<b;h+=4){var g=a[h+1],z=a[h+2],l=a[h+3];n(a[h],e);n(g,e);n(z,e);n(l,e);c.push(h,h+1,h+2);c.push(h,h+2,h+3)}a=x.oi();a.a_position=new Float32Array(e);a.a_tbn=k.create(b/4);b=p.Zg("FROM_QUADS");b.la[0]=a;b.Aa=new Uint32Array(c);b.Wa=e.length/3;return b}function b(a,b){var c=3*b;return[a[c],a[c+1],a[c+2]]}function n(a,b){b.push(a[0],a[1],a[2])}var g=u("__config"),p=u("__geometry"),k=u("__tbn"),x=u("__util"),v=g.L;a.WQ=function(){var a=p.Zg("LINE"),b=x.oi();b.a_position=new Float32Array(3);
b.a_direction=new Float32Array(3);a.la[0]=b;a.Aa=new Uint32Array(1);a.Wa=1;return a};a.ov=function(){var a=e(2,2,1,1);a.name="PLANE";return a};a.rZ=e;a.RQ=function(a,b,c){function d(a,b){return 1==a%2&&(0==b||b==n-1)||1==b%2&&(0==a||a==g-1)?!0:!1}var e=c/=Math.pow(2,a-1),h=c,g=b+1,n=b+1;b=[];c=[];for(var t=0,r=0,E=0,w=-1,f=[],y=0;y<a;y++){for(var D=2*e/(g-1),u=2*h/(n-1),M=[],B=[],J=0,C=0;C<g;C++){for(var A=-e+C*D,X=[],m=0;m<n;m++){var K=-h+m*u;if(A>-r&&A<r&&K>-E&&K<E)X.push(-1),J++;else{for(var R=
null,O=0;O<f.length;O+=3)if(A==f[O]&&K==f[O+1]){R=f[O+2];break}O=null!==R?R:w+1;d(C,m)?(X.push(-2),J++):(null==R&&(m&&m!=n-1&&C&&C!=g-1?R=D:(R=y==a-1?D:2*D,M.push(A,K,O)),c.push(A,K,R),t++,w++),X.push(O));if(C&&m)if(1==C)if(d(C-1,m)){if(1<m){var K=O-1,R=B[C-1][m+1],S=R-1;b.push(S,K,O)}else R=B[C-1][m+1],S=R-1;b.push(R,S,O)}else d(C,m)||(K=O-1,R=B[C-1][m],b.push(R,K,O));else if(C==g-1){if(!d(C,m))if(m==n-1)K=O-1,R=B[C-1][m-1],S=B[C-2][m],b.push(R,K,O),b.push(S,R,O);else{var K=O-1,R=B[C-1][m],S=R-1,
ga=R+1;b.push(S,K,O);b.push(R,S,O);b.push(ga,R,O);2==m&&(ga=B[C-2][m-2],b.push(S,ga,K))}}else 1==m?d(C,m-1)?(K=B[C-1][m],R=B[C-1][m-1],b.push(K,R,O)):(K=X[m-1],R=B[C-1][m],S=B[C-2][m-1],b.push(R,K,O),b.push(R,S,K)):m==n-1?d(C,m)||(K=X[m-1],R=B[C-1][m-1],S=B[C-2][m],b.push(R,K,O),b.push(S,R,O)):-1!=B[C-1][m]&&-1!=B[C-1][m-1]&&-1!=X[m-1]?(K=X[m-1],R=B[C-1][m],S=B[C-1][m-1],b.push(R,K,O),b.push(R,S,K),m==n-2&&d(C,m+1)&&(ga=B[C-1][m+1],b.push(ga,R,O))):m==n-2&&d(C,m+1)&&(R=B[C-1][m],ga=B[C-1][m+1],b.push(ga,
R,O))}}B.push(X)}f=M;r=e;E=h;e*=2;h*=2}2E4>r&&(a=-(2*r)/(g-1),c.push(-2E4,-2E4,a),c.push(-2E4,2E4,a),c.push(-r,-E,a),c.push(-r,E,a),c.push(2E4,-2E4,a),c.push(2E4,2E4,a),c.push(r,-E,a),c.push(r,E,a),O=w+1,b.push(O+1,O+2,O+3,O+1,O+0,O+2,O+2,O+4,O+6,O+2,O+0,O+4,O+1,O+7,O+5,O+1,O+3,O+7,O+7,O+4,O+5,O+6,O+4,O+7),t+=8);a=x.oi();a.a_position=new Float32Array(c);a.a_tbn=k.create(t);k.oB(a.a_tbn,[.707,0,0,.707],a.a_tbn);e=p.Zg("MULTIGRID_PLANE");e.la[0]=a;e.Aa=new Uint32Array(b);e.Wa=c.length/3;v.qK&&(p.Qx(e,
1,!0),a.a_polyindex=p.av(e));return e};a.qZ=function(a){var b=a.length;b%3&&x.K("Wrong array");for(var c=[],e=[],h=0;h<b;h+=3){var k=a[h+1],g=a[h+2];n(a[h],e);n(k,e);n(g,e);c.push(h,h+1,h+2)}a=x.oi();a.a_position=new Float32Array(e);b=p.Zg("FROM_TRIANGLES");b.la[0]=a;b.Aa=new Uint32Array(c);b.Wa=e.length/3;return b};a.pZ=c;a.TQ=function(a){a=x.nX(a);var b=[];b.push(a[0],a[1],a[2],a[3]);b.push(a[0],a[3],a[5],a[4]);b.push(a[3],a[2],a[6],a[5]);b.push(a[1],a[7],a[6],a[2]);b.push(a[0],a[4],a[7],a[1]);
b.push(a[4],a[5],a[6],a[7]);a=c(b);a.name="FRUSTUM";return a};a.hd=function(){var a=p.Zg("FULLSCREEN_TRI"),b=x.oi();b.a_position=new Float32Array([0,0,1,0,0,1]);a.la[0]=b;a.Aa=new Uint32Array([0,1,2]);a.Wa=3;return a};a.UQ=function(){var a=p.Zg("FULLSCREEN_QUAD"),b=x.oi();b.a_position=new Float32Array([-1,1,1,1,-1,-1,1,-1]);a.la[0]=b;a.Aa=new Uint32Array([0,2,1,1,2,3]);a.Wa=4;return a};a.QQ=function(){var a=p.Zg("BILLBOARD"),b=x.oi();b.a_bb_vertex=p.VF(1);a.la[0]=b;a.Aa=new Uint32Array([0,2,1,0,3,
2]);a.Wa=4;return a};a.gA=function(a,c){var d=p.Zg("UV_SPHERE"),e,h,g=[],z=[],l=[];for(h=0;8>=h;h++)for(e=0;16>=e;e++){var v=e/16,r=h/8;z.push(-a*Math.cos(2*v*Math.PI)*Math.sin(r*Math.PI)+c[0],a*Math.cos(r*Math.PI)+c[1],a*Math.sin(2*v*Math.PI)*Math.sin(r*Math.PI)+c[2])}for(h=v=0;8>h;h++)for(e=0;16>e;e++){var r=b(z,17*h+e+1),x=b(z,17*h+e),w=b(z,17*(h+1)+e),f=b(z,17*(h+1)+e+1);Math.abs(r[1])==a+c[1]?(n(r,g),n(w,g),n(f,g),l.push(v,v+1,v+2),v+=3):Math.abs(w[1])==a+c[1]?(n(r,g),n(x,g),n(w,g),l.push(v,
v+1,v+2),v+=3):(n(r,g),n(x,g),n(w,g),n(f,g),l.push(v,v+1,v+2),l.push(v,v+2,v+3),v+=4)}e={};e.a_position=g;z=p.BE(l,z,g);z=p.AE(l,g,z);e.a_tbn=k.Bm(z);d.la[0]=e;d.Aa=l;d.Wa=g.length/3;return d};a.ZF=function(a){var b=p.Zg("INDEX"),c=x.oi();c.a_index=new Float32Array(3*a);for(var e=new Uint16Array(3*a),h=0;h<3*a;h++)c.a_index[h]=h,e[h]=h;b.la[0]=c;b.Aa=e;b.Wa=3*a;return b}};b4w.module.__prerender=function(a,u){function e(a,b){return a.qk-b.qk}function c(a,b){var c=a.ug;c.is_visible=!1;if(c.hide)return!1;var d=b.H,e=b.type==x.xd?d.nw:v.Lb(d.D,q),k=a.ya;if(!p.KW(k,c,e))return!1;c.is_visible=!0;if(b.type==x.qh)k=b.debug_view_mode==n.DV_BOUNDINGS?k.tj:!k.tj;else{if(!(c=b.type==x.rh&&0==c.Ki)&&(c=!k.vj&&a.st)){var d=d.Cm,e=a.st.Qe,c=a.st.qf,g=k.Jl,k=e.U;if(h.PV(k,d,e.ab))c=!0;else if(g)var e=c.Sa,g=c.Ta,t=c.Ua,k=c.U,c=h.kQ(k,d,e,g,t);else c=!1}k=c?!1:!0}return k}function b(a){var b=
a.Ja;if(b&&b.Fw){a=a.ra;g.iT(a);var c=a.Fb;g.lt(a.kc,"a_position",b.os,c.a_position.offset);g.lt(a.kc,"a_tbn",b.Rs,c.a_tbn.offset);g.RC(a)}}var n=u("__debug"),g=u("__geometry"),p=u("__objects"),k=u("__renderer"),x=u("__subscene"),v=u("__tsr"),h=u("__util"),d=u("__vec3"),t=[x.Hb,x.cd,x.Zd,x.wd,x.Xf,x.jf,x.Yd,x.Gg,x.xd,x.Yf,x.rh,x.qh,x.Ne,x.ph],q=new Float32Array(3);a.en=function(a){if(-1<t.indexOf(a.type)){for(var h=!1,g=a.type==x.wd||a.type==x.jf,n=a.Za,p=0;p<n.length;p++){for(var r=n[p],G=r.La,w=
!1,f=0;f<G.length;f++){var y=G[f],D=y.ya;if(g)for(var u=0;6>u;u++)a.H.Cm=a.qm[u],y.Uz[u]=c(y,a),y.Uz[u]&&(w=h=!0,b(D));else y.$b=c(y,a),y.$b&&(w=h=!0,b(D));a.Na&&(D.zb.Ro=!0);y.$b?(D=v.Lb(a.H.D,q),y.st?(u=y.st.Qe,D=d.squaredDistance(u.U,D)+u.ab*u.ab):D=Infinity,y.qk=D):y.qk=Infinity}0<G.length&&!G[0].ya.mb&&(G.sort(e),n.qk=G[0].qk);r.$b=w}a.Na=!1;switch(a.type){case x.qh:break;default:a.type==x.Hb||a.type==x.Yf||a.type==x.Yd||a.type==x.Zd||a.type==x.wd||h?a.$b=!0:(a.$b&&k.clear(a),a.$b=!1)}}else if(a.Na){n=
a.Za;for(p=0;p<n.length;p++)for(G=n[p].La,f=0;f<G.length;f++)y=G[f],D=y.ya,D.zb.Ro=!0;a.Na=!1}a.as&&x.IV(a)}};b4w.module.__print=function(a){function u(a,b){var c=[];-1<a[0].indexOf("%c")?c.push(a[0].replace("%c","%c"+b+": ")):c.push(b+": "+a[0]);for(var d=1;d<a.length;d++)c.push(a[d]);return c}function e(){g++;var a=u(arguments,"B4W ERROR");console.error.apply(console,a)}function c(a){a in k||(k[a]=a,e([a]))}function b(a,b){c(a+"() is deprecated, use "+b+"() instead.")}var n=!1,g=0,p=0,k={};a.uV=function(a){n=a};a.md=function(){console.log.apply(console,arguments)};a.log=function(){if(n){var a=u(arguments,
"B4W LOG");console.log.apply(console,a)}};a.dF=u;a.error=e;a.ga=c;a.gd=b;a.eZ=function(a,e){switch(1<e.length){case !0:c(a+"() is deprecated, use "+e.slice(0,-1).join("(), ")+"() or "+e[e.length-1]+"() instead.");break;case !1:b(a,e[0])}};a.Zu=function(a,b){void 0===b?c('Config option "'+a+'" is deprecated.'):c('Config option "'+a+'" is deprecated, use "'+b+'" instead.')};a.warn=function(){p++;var a=u(arguments,"B4W WARN");console.warn.apply(console,a)};a.info=function(){var a=u(arguments,"B4W INFO");
console.info.apply(console,a)};a.qQ=function(){g++;var a=u(arguments,"B4W EXPORT ERROR");console.error.apply(console,a)};a.rQ=function(){p++;var a=u(arguments,"B4W EXPORT WARNING");console.warn.apply(console,a)};a.time=function(){n&&console.time.apply(console,arguments)};a.timeEnd=function(){n&&console.timeEnd.apply(console,arguments)};a.group=function(){console.group.apply(console,arguments)};a.groupCollapsed=function(){console.groupCollapsed.apply(console,arguments)};a.groupEnd=function(){console.groupEnd.apply(console,
arguments)};a.clear=function(){"function"==typeof console.clear&&console.clear.apply(console,arguments)};a.TR=function(){return p};a.rR=function(){return g};a.clear_errors_warnings=function(){g=p=0}};b4w.module.print=b4w.module.__print;b4w.module.__reformer=function(a,u){function e(a){switch(a.type){case "VALTORGB":a.color_ramp||(a.color_ramp={elements:[{position:.5,color:[1,1,1,1]}]},b("node Color Ramp",a,"color_ramp"));break;case "CURVE_RGB":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node RGB Curves",a,
"curve_mapping"));break;case "CURVE_VEC":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node Vector Curves",a,"curve_mapping"));break;case "MAPPING":a.vector_type||(a.vector_type="POINT",b("node Mapping",a,"vector_type"));break;case "MATERIAL":case "MATERIAL_EXT":"alpha"in a||(a.alpha=1,b("node material",a,"alpha"));"darkness"in
a||(a.darkness=1,b("node material",a,"darkness"));"diffuse_toon_size"in a||(a.diffuse_toon_size=.5,b("node material",a,"diffuse_toon_size"));"diffuse_toon_smooth"in a||(a.diffuse_toon_smooth=.1,b("node material",a,"diffuse_toon_smooth"));"diffuse_intensity"in a||(a.diffuse_intensity=1,b("node material",a,"diffuse_intensity"));"use_tangent_shading"in a||(a.use_tangent_shading=!1,b("node material",a,"use_tangent_shading"));"specular_shader"in a||(a.specular_shader="COOKTORR",b("node material",a,"specular_shader"));
"specular_ior"in a||(a.specular_ior=4,b("node material",a,"specular_ior"));"specular_hardness"in a||(a.specular_hardness=50,b("node material",a,"specular_hardness"));"specular_slope"in a||(a.specular_slope=.1,b("node material",a,"specular_slope"));"specular_toon_size"in a||(a.specular_toon_size=.5,b("node material",a,"specular_toon_size"));"specular_toon_smooth"in a||(a.specular_toon_smooth=.1,b("node material",a,"specular_toon_smooth"));"specular_intensity"in a||(a.specular_intensity=.5,b("node material",
a,"specular_intensity"));"diffuse_shader"in a||(a.diffuse_shader="LAMBERT",b("node material",a,"diffuse_shader"));"roughness"in a||(a.roughness=.5,b("node material",a,"roughness"));"diffuse_fresnel"in a||(a.diffuse_fresnel=.1,b("node material",a,"diffuse_fresnel"));"diffuse_fresnel_factor"in a||(a.diffuse_fresnel_factor=.5,b("node material",a,"diffuse_fresnel_factor"));break;case "MATH":case "MIX_RGB":"use_clamp"in a||(a.use_clamp=!1,b("node "+a.type,a,"use_clamp"));break;case "GROUP":a.node_tree_name=
a.node_tree_name.replace(/\.[0-9]{3,}$/g,"");switch(a.node_tree_name){case "CLAMP":case "LEVELS_OF_QUALITY":case "LINEAR_TO_SRGB":case "NORMAL_VIEW":case "PARALLAX":case "REFLECT":case "REFRACTION":case "REPLACE":case "SMOOTHSTEP":case "SRGB_TO_LINEAR":case "TIME":case "TRANSLUCENCY":case "VECTOR_VIEW":a.node_tree_name="B4W_"+a.node_tree_name}break;case "VECT_TRANSFORM":"convert_from"in a||(a.convert_from="WORLD",b("node "+a.type,a,"convert_from")),"convert_to"in a||(a.convert_to="WORLD",b("node "+
a.type,a,"convert_to")),"vector_type"in a||(a.vector_type="POINT",b("node "+a.type,a,"vector_type"))}}function c(a){if(a=a.nla_tracks)for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.strips.length;e++){var f=d.strips[e];"action"in f||(f.action=null,b("strip",f,"action"));"action_frame_start"in f||(f.action_frame_start=0,b("strip",f,"action_frame_start"));"action_frame_end"in f||(f.action_frame_end=f.frame_end-f.frame_start,b("strip",f,"action_frame_end"));"repeat"in f||(f.repeat=1,b("strip",f,"repeat"));
"use_reverse"in f||(f.use_reverse=!1,b("strip",f,"use_reverse"));"scale"in f||(f.scale=1,b("strip",f,"scale"))}}function b(a,b,c){c=c+">>"+a;c in f||(f[c]={vC:[],lI:"undefined",type:a});f[c].vC.push(b.name)}function n(a,b,c){c=c+">>"+a;c in f||(f[c]={vC:[],lI:"deprecated",type:a});f[c].vC.push(b.name)}function g(a){t.warn(a)}function p(a,b){b||(b=a.name+"_COPY");var c=a.materials,d=a.submeshes;a.materials=null;a.submeshes=null;var e=H.W(a);a.materials=c;a.submeshes=d;e.name=b;e.materials=a.materials.slice(0);
e.submeshes=[];for(c=0;c<d.length;c++){var f=H.Pq(d[c]);e.submeshes.push(f)}return e}function k(a,b,c){if(1<c){for(var d=a.length/c,e=b.length/c,f=new Float32Array(a.length+b.length),h=0,k=0;k<c;k++)f.set(a.subarray(d*k,d*(k+1)),h),h+=d,f.set(b.subarray(e*k,e*(k+1)),h),h+=e;return f}return H.QF(a,b)}var x=u("__boundings"),v=u("__config"),h=u("__curve"),d=u("__mat4"),t=u("__print"),q=u("__quat"),G=u("__tbn"),H=u("__util"),z=u("__vec3"),l=u("__mat3"),F=u("__logic_nodes"),r=u("__animation"),E=v.L,w=
[5,4],f={},y=l.create(),D=G.create(),N=q.create();a.NE=function(a){return-1!=H.gK(a,w)};a.YN=function(a){f={};var d=a.worlds;if(0==d.length){t.warn('WARNING Datablock world is missing, reexport "'+a.b4w_filepath_blend+'" scene');var h={name:"DEFAULT",horizon_color:new Float32Array([0,0,0]),zenith_color:new Float32Array([0,0,0]),light_settings:{use_environment_light:!1,environment_energy:1,environment_color:"PLAIN"},fog_settings:{use_fog:!1,intensity:0,depth:25,start:5,height:0,falloff:"INVERSE_QUADRATIC",
use_custom_color:!0,color:[.5,.5,.5]},use_sky_paper:!1,use_sky_blend:!1,use_sky_real:!1,use_nodes:!1,node_tree:null,texture_slots:[]};d.push(h)}for(var k=0;k<d.length;k++){h=d[k];"use_sky_blend"in h||(b("world",h,"use_sky_blend"),h.use_sky_blend=!1);"use_sky_paper"in h||(b("world",h,"use_sky_paper"),h.use_sky_paper=!1);"use_sky_real"in h||(b("world",h,"use_sky_real"),h.use_sky_real=!1);"b4w_sky_settings"in h&&"rayleigh_brightness"in h.b4w_sky_settings||(b("world",h,"rayleigh_brightness"),h.b4w_sky_settings=
{render_sky:!1,procedural_skydome:!1,use_as_enviroment_map:!1,color:[.24,.43,.75],rayleigh_brightness:3.3,mie_brightness:.1,spot_brightness:10,scatter_strength:.2,rayleigh_strength:.2,mie_strength:.006,rayleigh_collection_power:.5,mie_collection_power:.5,mie_distribution:.4});"fog_settings"in h||(b("world",h,"fog_settings"),h.fog_settings={use_fog:!1,intensity:0,depth:25,start:0,height:0,falloff:"QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},"b4w_fog_color"in h&&(h.fog_settings.use_custom_color=
!0,h.fog_settings.color=h.b4w_fog_color),"b4w_fog_density"in h&&0<h.b4w_fog_density&&(h.fog_settings.depth=1/h.b4w_fog_density));"render_sky"in h.b4w_sky_settings||(b("world",h,"render_sky"),h.b4w_sky_settings.render_sky=!1);for(var l=h.texture_slots,q=0;q<l.length;q++){var m=l[q];"blend_type"in m||(m.blend_type="MIX",b("world_texture_slot",m,"blend_type"));"use_map_blend"in m||(m.use_map_blend=!1,b("world_texture_slot",m,"use_map_blend"));"use_map_horizon"in m||(m.use_map_horizon=!0,b("world_texture_slot",
m,"use_map_horizon"));"use_map_zenith_up"in m||(m.use_map_zenith_up=!1,b("world_texture_slot",m,"use_map_zenith_up"));"use_rgb_to_intensity"in m||(m.use_rgb_to_intensity=!1,b("world_texture_slot",m,"use_rgb_to_intensity"));"invert"in m||(m.invert=!1,b("world_texture_slot",m,"invert"));"color"in m||(m.color=[1,0,1],b("world_texture_slot",m,"color"));"blend_factor"in m||(m.blend_factor=0,b("world_texture_slot",m,"blend_factor"));"horizon_factor"in m||(m.horizon_factor=1,b("world_texture_slot",m,"horizon_factor"));
"zenith_up_factor"in m||(m.zenith_up_factor=0,b("world_texture_slot",m,"zenith_up_factor"));"zenith_down_factor"in m||(m.zenith_down_factor=0,b("world_texture_slot",m,"zenith_down_factor"));"default_value"in m||(m.default_value=1,b("world_texture_slot",m,"default_value"))}"b4w_use_default_animation"in h||(b("world",h,"b4w_use_default_animation"),h.b4w_use_default_animation=!1);"b4w_anim_behavior"in h||(b("world",h,"b4w_anim_behavior"),h.b4w_anim_behavior="CYCLIC")}q=a.scenes;for(k=0;k<q.length;k++)l=
q[k],m=l.world,"timeline_markers"in l||(l.timeline_markers=null,b("scene",l,"timeline_markers")),"boolean"==typeof l.b4w_enable_physics&&(l.b4w_enable_physics="AUTO"),"b4w_reflection_quality"in l||(l.b4w_reflection_quality="MEDIUM",b("scene",l,"b4w_reflection_quality")),"b4w_use_nla"in l||(l.b4w_use_nla=!1,b("scene",l,"b4w_use_nla")),"fps"in l||(l.fps=24,b("scene",l,"fps")),"b4w_nla_cyclic"in l||(l.b4w_nla_cyclic=!1,b("scene",l,"b4w_nla_cyclic")),"b4w_logic_nodes"in l||(l.b4w_logic_nodes=[],b("scene",
l,"b4w_logic_nodes")),"b4w_detect_collisions"in l&&(n("scene",l,"b4w_detect_collisions"),delete l.b4w_detect_collisions),"audio_doppler_speed"in l||(l.audio_doppler_speed=343.3),"audio_doppler_factor"in l||(l.audio_doppler_factor=1),"b4w_dynamic_compressor_settings"in l||(l.b4w_dynamic_compressor_settings={threshold:-24,knee:30,ratio:12,attack:.003,release:.25},b("scene",l,"b4w_dynamic_compressor_settings")),"b4w_enable_convolution_engine"in l||(l.b4w_enable_convolution_engine=!1),"b4w_enable_bloom"in
l||(l.b4w_enable_bloom=!1,b("scene",l,"b4w_enable_bloom")),"b4w_enable_motion_blur"in l||(l.b4w_enable_motion_blur=!1,b("scene",l,"b4w_enable_motion_blur")),"b4w_enable_color_correction"in l||(l.b4w_enable_color_correction=!1,b("scene",l,"b4w_enable_color_correction")),"b4w_antialiasing_quality"in l||(l.b4w_antialiasing_quality="MEDIUM",b("scene",l,"b4w_antialiasing_quality")),"b4w_tags"in l||(l.b4w_tags={title:"",description:""},b("scene",l,"b4w_tags")),"b4w_lod_smooth_type"in l||(l.b4w_lod_smooth_type=
"OFF",b("scene",l,"b4w_lod_smooth_type")),"b4w_lod_hyst_interval"in l||(l.b4w_lod_hyst_interval=0,b("scene",l,"b4w_lod_hyst_interval")),"b4w_enable_object_selection"in l||(l.b4w_enable_object_selection="AUTO",b("scene",l,"b4w_enable_object_selection")),"b4w_enable_outlining"in l||(l.b4w_enable_outlining="AUTO",b("scene",l,"b4w_enable_outlining")),"b4w_enable_glow_materials"in l||(l.b4w_enable_glow_materials="AUTO",b("scene",l,"b4w_enable_glow_materials")),"b4w_enable_anchors_visibility"in l||(l.b4w_enable_anchors_visibility=
"AUTO",b("scene",l,"b4w_enable_anchors_visibility")),"b4w_outline_color"in l||(l.b4w_outline_color=[1,1,1],b("scene",l,"b4w_outline_color")),"b4w_outline_factor"in l||(l.b4w_outline_factor="b4w_glow_factor"in l?l.b4w_glow_factor:1,b("scene",l,"b4w_outline_factor")),"b4w_shadow_settings"in l||(b("scene",l,"b4w_shadow_settings"),d=m.b4w_shadow_settings,l.b4w_shadow_settings=d?d:{csm_resolution:2048,blur_samples:"16x",self_shadow_polygon_offset:1,b4w_enable_csm:!1,csm_num:1,csm_first_cascade_border:10,
first_cascade_blur_radius:3,csm_last_cascade_border:100,last_cascade_blur_radius:1.5,fade_last_cascade:!0,blend_between_cascades:!0}),d=l.b4w_shadow_settings,"csm_resolution"in d||(b("scene",l,"b4w_shadow_settings.csm_resolution"),d.csm_resolution=2048),"blur_samples"in d||(b("scene",l,"b4w_shadow_settings.blur_samples"),d.blur_samples="16x"),"soft_shadows"in d||(b("scene",l,"b4w_shadow_settings.soft_shadows"),d.soft_shadows=!0),"self_shadow_polygon_offset"in d||(b("scene",l,"b4w_shadow_settings.self_shadow_polygon_offset"),
d.self_shadow_polygon_offset=1),"self_shadow_normal_offset"in d||(b("scene",l,"b4w_shadow_settings.self_shadow_normal_offset"),d.self_shadow_normal_offset=.01),"b4w_enable_csm"in d||(b("scene",l,"b4w_shadow_settings.b4w_enable_csm"),d.b4w_enable_csm=!1),"csm_num"in d||(b("scene",l,"b4w_shadow_settings.csm_num"),d.csm_num=1),"csm_first_cascade_border"in d||(b("scene",l,"b4w_shadow_settings.csm_first_cascade_border"),d.csm_first_cascade_border=10),"first_cascade_blur_radius"in d||(b("scene",l,"b4w_shadow_settings.first_cascade_blur_radius"),
d.first_cascade_blur_radius=3),"csm_last_cascade_border"in d||(b("scene",l,"b4w_shadow_settings.csm_last_cascade_border"),d.csm_last_cascade_border=100),"last_cascade_blur_radius"in d||(b("scene",l,"b4w_shadow_settings.last_cascade_blur_radius"),d.last_cascade_blur_radius=1.5),"fade_last_cascade"in d||(b("scene",l,"b4w_shadow_settings.fade_last_cascade"),d.fade_last_cascade=!0),"blend_between_cascades"in d||(b("scene",l,"b4w_shadow_settings.blend_between_cascades"),d.blend_between_cascades=!0),"b4w_ssao_settings"in
l||(b("scene",l,"b4w_ssao_settings"),d=m.b4w_ssao_settings,l.b4w_ssao_settings=d?d:{dist_factor:0,samples:16,hemisphere:!1,blur_depth:!1,blur_discard_value:1}),d=l.b4w_ssao_settings,"dist_factor"in d||(b("scene",l,"b4w_ssao_settings.dist_factor"),d.dist_factor=0),"samples"in d||(b("scene",l,"b4w_ssao_settings.samples"),d.samples=16),"hemisphere"in d||(b("scene",l,"b4w_ssao_settings.hemisphere"),d.hemisphere=!1),"blur_depth"in d||(b("scene",l,"b4w_ssao_settings.blur_depth"),d.blur_depth=!1),"blur_discard_value"in
d||(b("scene",l,"b4w_ssao_settings.blur_discard_value"),d.blur_discard_value=1),"b4w_bloom_settings"in l||(b("scene",l,"b4w_bloom_settings"),d=m.b4w_bloom_settings,l.b4w_bloom_settings=d?d:{key:.2,blur:4,edge_lum:1}),"key"in l.b4w_bloom_settings||(b("scene",l,"b4w_bloom_settings.key"),l.b4w_bloom_settings.key=.2),"blur"in l.b4w_bloom_settings||(b("scene",l,"b4w_bloom_settings.blur"),l.b4w_bloom_settings.blur=4),"edge_lum"in l.b4w_bloom_settings||(b("scene",l,"b4w_bloom_settings.edge_lum"),l.b4w_bloom_settings.edge_lum=
1),"adaptive"in l.b4w_bloom_settings||(b("scene",l,"b4w_bloom_settings.adaptive"),l.b4w_bloom_settings.adaptive=!0),"average_luminance"in l.b4w_bloom_settings||(b("scene",l,"b4w_bloom_settings.average_luminance"),l.b4w_bloom_settings.average_luminance=.5),"b4w_motion_blur_settings"in l||(b("scene",l,"b4w_motion_blur_settings"),d=m.b4w_motion_blur_settings,l.b4w_motion_blur_settings=d?d:{motion_blur_factor:.01,motion_blur_decay_threshold:.01}),"motion_blur_factor"in l.b4w_motion_blur_settings||(b("scene",
l,"b4w_motion_blur_settings.motion_blur_factor"),l.b4w_motion_blur_settings.motion_blur_factor=.01),"motion_blur_decay_threshold"in l.b4w_motion_blur_settings||(b("scene",l,"b4w_motion_blur_settings.motion_blur_decay_threshold"),l.b4w_motion_blur_settings.motion_blur_decay_threshold=.01),"b4w_color_correction_settings"in l||(b("scene",l,"b4w_color_correction_settings"),d=m.b4w_color_correction_settings,l.b4w_color_correction_settings=d?d:{brightness:0,contrast:0,exposure:1,saturation:1}),"b4w_god_rays_settings"in
l||(b("scene",l,"b4w_god_rays_settings"),d=m.b4w_god_rays_settings,l.b4w_god_rays_settings=d?d:{intensity:.7,max_ray_length:1,steps_per_pass:10}),"steps_per_pass"in l.b4w_god_rays_settings||(b("scene",l,"b4w_god_rays_settings.steps_per_pass"),l.b4w_god_rays_settings.steps_per_pass=10),"b4w_glow_settings"in l||(b("scene",l,"b4w_glow_settings"),l.b4w_glow_settings={render_glow_over_blend:!1,small_glow_mask_coeff:2,large_glow_mask_coeff:2,small_glow_mask_width:2,large_glow_mask_width:6},d=l.b4w_glow_settings,
"b4w_render_glow_over_blend"in m&&(d.render_glow_over_blend=m.b4w_render_glow_over_blend),"b4w_small_glow_mask_coeff"in m&&(d.small_glow_mask_coeff=m.b4w_small_glow_mask_coeff),"b4w_large_glow_mask_coeff"in m&&(d.large_glow_mask_coeff=m.b4w_large_glow_mask_coeff),"b4w_small_glow_mask_width"in m&&(d.small_glow_mask_width=m.b4w_small_glow_mask_width),"b4w_large_glow_mask_width"in m&&(d.large_glow_mask_width=m.b4w_large_glow_mask_width)),m=l.b4w_render_shadows,"AUTO"!=m&&"OFF"!=m&&"ON"!=m&&(l.b4w_render_shadows=
m?"ON":"OFF"),m=l.b4w_render_reflections,"OFF"!=m&&"ON"!=m&&(l.b4w_render_reflections=m?"ON":"OFF"),m=l.b4w_render_refractions,"AUTO"!=m&&"OFF"!=m&&"ON"!=m&&(l.b4w_render_refractions=m?"ON":"OFF"),"b4w_render_dynamic_grass"in l||(b("scene",l,"b4w_render_dynamic_grass"),l.b4w_render_dynamic_grass="AUTO"),l.b4w_nla_script&&n("scene",l,"b4w_nla_script"),"audio_distance_model"in l||(b("scene",l,"audio_distance_model"),l.audio_distance_model="INVERSE_CLAMPED"),"b4w_custom_prop"in l||(b("scene",l,"b4w_custom_prop"),
l.b4w_custom_prop=null);l=a.meshes;for(k=0;k<l.length;k++){m=l[k];m.b4w_boundings||(b("mesh",m,"b4w_boundings"),m.b4w_boundings={},d=m.b4w_boundings,d.bb=m.b4w_bounding_box?m.b4w_bounding_box:{max_x:0,max_y:0,max_z:0,min_x:0,min_y:0,min_z:0},d.bb_src=m.b4w_bounding_box_source?m.b4w_bounding_box_source:m.b4w_bounding_box,d.bs_cen=m.b4w_bounding_sphere_center?m.b4w_bounding_sphere_center:[0,0,0],d.bc_cen=m.b4w_bounding_cylinder_center?m.b4w_bounding_cylinder_center:[0,0,0],d.be_cen=m.b4w_bounding_ellipsoid_center?
m.b4w_bounding_ellipsoid_center:[0,0,0],m.b4w_bounding_ellipsoid_axes?d.be_ax=m.b4w_bounding_ellipsoid_axes:(q=d.bb,d.be_ax=[(q.max_x-q.min_x)/2,(q.max_y-q.min_y)/2,(q.max_z-q.min_z)/2]),m.b4w_rotated_bounding_box?d.rbb=m.b4w_rotated_bounding_box:(q=d.bb,d.rbb={rbb_c:[(q.max_x+q.min_x)/2,(q.max_y+q.min_y)/2,(q.max_z+q.min_z)/2],rbb_s:[1,1,1]}),d.caxis_x=m.b4w_cov_axis_x?m.b4w_cov_axis_x:[1,0,0],d.caxis_y=m.b4w_cov_axis_y?m.b4w_cov_axis_y:[0,1,0],d.caxis_z=m.b4w_cov_axis_z?m.b4w_cov_axis_z:[0,0,1]);
"is_boundings_overridden"in m||(b("mesh",m,"is_boundings_overridden"),m.is_boundings_overridden=!1);"b4w_shape_keys"in m||(m.b4w_shape_keys=[],b("mesh",m,"b4w_shape_keys"));d=!0;for(h=0;h<m.submeshes.length;h++){var r=m.submeshes[h];"boundings"in r||(d=!1,r.boundings={be_ax:m.b4w_bounding_ellipsoid_axes,be_cen:m.b4w_bounding_ellipsoid_center,bb:{max_x:m.b4w_bounding_box.max_x,max_y:m.b4w_bounding_box.max_y,max_z:m.b4w_bounding_box.max_z,min_x:m.b4w_bounding_box.min_x,min_y:m.b4w_bounding_box.min_y,
min_z:m.b4w_bounding_box.min_z}});"uv_layers"in r||(b("submesh",m,"uv_layers"),r.uv_layers=m.uv_textures);"be_ax"in r.boundings||(r.boundings.be_ax=m.b4w_bounding_ellipsoid_axes);"be_cen"in r.boundings||(r.boundings.be_cen=m.b4w_bounding_ellipsoid_center);"bb"in r.boundings||(r.boundings.bb=m.b4w_bounding_box);"rbb"in r.boundings||(q=m.b4w_bounding_box,r.boundings.rbb={rbb_c:[(q.max_x+q.min_x)/2,(q.max_y+q.min_y)/2,(q.max_z+q.min_z)/2],rbb_s:[1,1,1]});"caxis_x"in r.boundings||(r.boundings.caxis_x=
[1,0,0]);"caxis_y"in r.boundings||(r.boundings.caxis_y=[0,1,0]);"caxis_z"in r.boundings||(r.boundings.caxis_z=[0,0,1])}d||b("mesh",m,"submesh_bd");q=m;d=["b4w_apply_scale","b4w_apply_modifiers","b4w_export_edited_normals","b4w_loc_export_vertex_anim","b4w_shape_keys"];h=null;for(r=0;r<d.length;r++)q[d[r]]&&(h?(q[d[r]]=!1,t.warn('WARNING property "'+d[r]+'" of object "'+q.name+'" has been set to "false". Foreground property "'+h+'" already exists.')):h=d[r]);for(q=0;q<m.b4w_vertex_anim.length;q++)d=
m.b4w_vertex_anim[q],"allow_nla"in d||(b('mesh["b4w_vertex_anim"]',m,"allow_nla"),d.allow_nla=!0);"active_uv_name"in m||(b("mesh",m,"active_uv_name"),m.active_uv_name="")}q=a.cameras;for(k=0;k<q.length;k++)l=q[k],l.type||(l.type="PERSP",b("camera",l,"type")),"b4w_eye_target_dist"in l&&(delete l.b4w_eye_target_dist,n("camera",l,"b4w_eye_target_dist")),"b4w_hover_zero_level"in l||(l.b4w_hover_zero_level=0,b("camera",l,"b4w_hover_zero_level")),"b4w_trans_velocity"in l||(l.b4w_trans_velocity=1,b("camera",
l,"b4w_trans_velocity")),"b4w_rot_velocity"in l||(l.b4w_rot_velocity=1,b("camera",l,"b4w_rot_velocity")),"b4w_zoom_velocity"in l||(l.b4w_zoom_velocity=.1,b("camera",l,"b4w_zoom_velocity")),"b4w_use_target_distance_limits"in l||(l.b4w_use_target_distance_limits=l.b4w_use_distance_limits||!1,b("camera",l,"b4w_use_target_distance_limits")),"b4w_use_zooming"in l||(l.b4w_use_zooming=l.b4w_use_distance_limits||!1,b("camera",l,"b4w_use_zooming")),"b4w_distance_min"in l||(l.b4w_distance_min=1,b("camera",
l,"b4w_distance_min")),"b4w_distance_max"in l||(l.b4w_distance_max=100,b("camera",l,"b4w_distance_max")),"b4w_horizontal_translation_min"in l||(l.b4w_horizontal_translation_min=-100,b("camera",l,"b4w_horizontal_translation_min")),"b4w_horizontal_translation_max"in l||(l.b4w_horizontal_translation_max=100,b("camera",l,"b4w_horizontal_translation_max")),"b4w_vertical_translation_min"in l||(l.b4w_vertical_translation_min=-100,b("camera",l,"b4w_vertical_translation_min")),"b4w_vertical_translation_max"in
l||(l.b4w_vertical_translation_max=100,b("camera",l,"b4w_vertical_translation_max")),"b4w_use_horizontal_clamping"in l||(l.b4w_use_horizontal_clamping=!1,b("camera",l,"b4w_use_horizontal_clamping")),"b4w_rotation_left_limit"in l||(l.b4w_rotation_left_limit=-Math.PI,b("camera",l,"b4w_rotation_left_limit")),"b4w_rotation_right_limit"in l||(l.b4w_rotation_right_limit=Math.PI,b("camera",l,"b4w_rotation_right_limit")),"b4w_horizontal_clamping_type"in l||(l.b4w_horizontal_clamping_type="LOCAL",b("camera",
l,"b4w_horizontal_clamping_type")),"b4w_use_vertical_clamping"in l||(l.b4w_use_vertical_clamping=!1,b("camera",l,"b4w_use_vertical_clamping")),"b4w_rotation_down_limit"in l||(l.b4w_rotation_down_limit=-Math.PI/2,b("camera",l,"b4w_rotation_down_limit")),"b4w_rotation_up_limit"in l||(l.b4w_rotation_up_limit=Math.PI/2,b("camera",l,"b4w_rotation_up_limit")),"b4w_vertical_clamping_type"in l||(l.b4w_vertical_clamping_type="LOCAL",b("camera",l,"b4w_vertical_clamping_type")),"b4w_hover_angle_min"in l||(l.b4w_hover_angle_min=
Math.PI/6,b("camera",l,"b4w_hover_angle_min")),"b4w_hover_angle_max"in l||(l.b4w_hover_angle_max=Math.PI/6,b("camera",l,"b4w_hover_angle_max")),"b4w_enable_hover_hor_rotation"in l||(l.b4w_enable_hover_hor_rotation=!0,b("camera",l,"b4w_enable_hover_hor_rotation")),"b4w_use_panning"in l||(l.b4w_use_panning=!0,b("camera",l,"b4w_use_panning")),"b4w_use_pivot_limits"in l||(l.b4w_use_pivot_limits=!1,l.b4w_pivot_z_min=0,l.b4w_pivot_z_max=10,b("camera",l,"b4w_use_pivot_limits")),"b4w_dof_bokeh"in l||(l.b4w_dof_bokeh=
!1,b("camera",l,"b4w_dof_bokeh")),"b4w_dof_bokeh_intensity"in l||(l.b4w_dof_bokeh_intensity=.3,b("camera",l,"b4w_dof_bokeh_intensity")),"b4w_dof_foreground_blur"in l||(l.b4w_dof_foreground_blur=!1,b("camera",l,"b4w_dof_foreground_blur")),"b4w_dof_front_start"in l||(l.b4w_dof_front_start=0,b("camera",l,"b4w_dof_front_start")),"b4w_dof_front_end"in l||(l.b4w_dof_front_end=l.b4w_dof_front,b("camera",l,"b4w_dof_front_end")),"b4w_dof_rear_start"in l||(l.b4w_dof_rear_start=0,b("camera",l,"b4w_dof_rear_start")),
"b4w_dof_rear_end"in l||(l.b4w_dof_rear_end=l.b4w_dof_rear,b("camera",l,"b4w_dof_rear_end")),"sensor_fit"in l||(l.sensor_fit="VERTICAL",b("camera",l,"sensor_fit"));q=a.lamps;for(k=0;k<q.length;k++)if(l=q[k],"b4w_generate_shadows"in l||(l.b4w_generate_shadows=!1,b("lamp",l,"b4w_generate_shadows")),"b4w_dynamic_intensity"in l||(l.b4w_dynamic_intensity=!1,b("lamp",l,"b4w_dynamic_intensity")),"use_diffuse"in l||(l.use_diffuse=!0,b("lamp",l,"use_diffuse")),"use_specular"in l||(l.use_specular=!0,b("lamp",
l,"use_specular")),"clip_start"in l||(l.clip_start=.1,b("lamp",l,"clip_start")),"clip_end"in l||(l.clip_end=30,b("lamp",l,"clip_end")),"POINT"==l.type||"SPOT"==l.type)"use_sphere"in l||(l.use_sphere=!1,b("lamp",l,"use_sphere")),E.sH&&(l.type="SUN");q=a.speakers;for(k=0;k<q.length;k++)l=q[k],"b4w_behavior"in l||(l.b4w_behavior=l.b4w_background_music?"BACKGROUND_SOUND":"POSITIONAL"),"b4w_auto_play"in l||(l.b4w_auto_play=!1,b("speaker",l,"b4w_auto_play")),"b4w_enable_doppler"in l||(l.b4w_enable_doppler=
!1,b("speaker",l,"b4w_enable_doppler")),"b4w_delay"in l||(l.b4w_delay=0),"b4w_delay_random"in l||(l.b4w_delay_random=0),"b4w_volume_random"in l||(l.b4w_volume_random=0),"b4w_pitch_random"in l||(l.b4w_pitch_random=0),"b4w_fade_in"in l||(l.b4w_fade_in=0),"b4w_fade_out"in l||(l.b4w_fade_out=0),"b4w_loop"in l||(l.b4w_loop=!1),"b4w_loop_start"in l||(l.b4w_loop_start=0,b("speaker",l,"b4w_loop_start")),"b4w_loop_end"in l||(l.b4w_loop_end=0,b("speaker",l,"b4w_loop_end")),l.animation_data&&c(l.animation_data);
q=a.textures;for(k=0;k<q.length;k++)l=q[k],"b4w_anisotropic_filtering"in l||(l.b4w_anisotropic_filtering="OFF",b("texture",l,"b4w_anisotropic_filtering")),"b4w_water_foam"in l||(l.b4w_water_foam=!1,b("texture",l,"b4w_water_foam")),"b4w_foam_uv_freq"in l||(l.b4w_foam_uv_freq=[1,1],b("texture",l,"b4w_foam_uv_freq")),"b4w_foam_uv_magnitude"in l||(l.b4w_foam_uv_magnitude=[1,1],b("texture",l,"b4w_foam_uv_magnitude")),"b4w_parallax_steps"in l||(l.b4w_parallax_steps=5,b("material",l,"b4w_parallax_steps")),
"b4w_parallax_lod_dist"in l||(l.b4w_parallax_lod_dist=10,b("material",l,"b4w_parallax_lod_dist")),"b4w_shore_dist_map"in l||(l.b4w_shore_dist_map=!1,b("texture",l,"b4w_shore_dist_map")),"b4w_shore_boundings"in l||(l.b4w_shore_boundings=[1E3,-1E3,1E3,-1E3],b("texture",l,"b4w_shore_boundings")),"b4w_max_shore_dist"in l||(l.b4w_max_shore_dist=100,b("texture",l,"b4w_max_shore_dist")),"b4w_disable_compression"in l||(l.b4w_disable_compression=!1,b("texture",l,"b4w_disable_compression")),"b4w_source_type"in
l||(l.b4w_source_type="",b("texture",l,"b4w_source_type")),"b4w_source_id"in l||(l.b4w_source_id="",b("texture",l,"b4w_source_id")),"b4w_source_size"in l||(l.b4w_source_size=1024,b("texture",l,"b4w_source_size")),"b4w_enable_canvas_mipmapping"in l||(l.b4w_enable_canvas_mipmapping=!0,b("texture",l,"b4w_enable_canvas_mipmapping")),"b4w_nla_video"in l||(l.b4w_nla_video=!1,b("texture",l,"b4w_nla_video"));q=a.images;for(k=0;k<q.length;k++)l=q[k],"colorspace_settings_name"in l||(l.colorspace_settings_name=
"sRGB",b("image",l,"colorspace_settings_name"));d=a.materials;for(k=0;k<d.length;k++){h=d[k];"ALPHA_ANTIALIASING"==h.game_settings.alpha_blend&&(E.tH?h.game_settings.alpha_blend="CLIP":2>E.ec&&(t.warn('Material "'+h.name+'" has the "Alpha Anti-Aliasing" transparency type, but multisampling is disabled. Changed to "Alpha Clip".'),h.game_settings.alpha_blend="CLIP"));"use_tangent_shading"in h||(h.use_tangent_shading=!1,b("material",h,"use_tangent_shading"));"b4w_node_mat_type"in h&&n("material",h,"b4w_node_mat_type");
"b4w_skydome"in h&&n("material",h,"b4w_skydome");"b4w_procedural_skydome"in h&&n("material",h,"b4w_procedural_skydome");"b4w_lens_flares"in h||(h.b4w_lens_flares=!1,b("material",h,"b4w_lens_flares"));"LENS_FLARES"===h.name&&(h.b4w_lens_flares||t.warn('"LENS_FLARES" material name has been found. Enable the "Lens Flare" property for this material.'),h.b4w_lens_flares=!0);h.b4w_water&&("b4w_water_shore_smoothing"in h||(h.b4w_water_shore_smoothing=!1,b("material",h,"b4w_water_shore_smoothing")),"b4w_water_dynamic"in
h||(h.b4w_water_dynamic=!1,b("material",h,"b4w_water_dynamic")),"b4w_waves_height"in h||(h.b4w_waves_height=1,b("material",h,"b4w_waves_height")),"b4w_waves_length"in h||(h.b4w_waves_length=1,b("material",h,"b4w_waves_length")),"b4w_water_dst_noise_scale0"in h||(h.b4w_water_dst_noise_scale0=.05,b("material",h,"b4w_water_dst_noise_scale0")),"b4w_water_dst_noise_scale1"in h||(h.b4w_water_dst_noise_scale1=.03,b("material",h,"b4w_water_dst_noise_scale1")),"b4w_water_dst_noise_freq0"in h||(h.b4w_water_dst_noise_freq0=
1.3,b("material",h,"b4w_water_dst_noise_freq0")),"b4w_water_dst_noise_freq1"in h||(h.b4w_water_dst_noise_freq1=1,b("material",h,"b4w_water_dst_noise_freq1")),"b4w_water_dir_min_shore_fac"in h||(h.b4w_water_dir_min_shore_fac=.4,b("material",h,"b4w_water_dir_min_shore_fac")),"b4w_water_dir_freq"in h||(h.b4w_water_dir_freq=.5,b("material",h,"b4w_water_dir_freq")),"b4w_water_dir_noise_scale"in h||(h.b4w_water_dir_noise_scale=.05,b("material",h,"b4w_water_dir_noise_scale")),"b4w_water_dir_noise_freq"in
h||(h.b4w_water_dir_noise_freq=.07,b("material",h,"b4w_water_dir_noise_freq")),"b4w_water_dir_min_noise_fac"in h||(h.b4w_water_dir_min_noise_fac=.5,b("material",h,"b4w_water_dir_min_noise_fac")),"b4w_water_dst_min_fac"in h||(h.b4w_water_dst_min_fac=.2,b("material",h,"b4w_water_dst_min_fac")),"b4w_water_waves_hor_fac"in h||(h.b4w_water_waves_hor_fac=5,b("material",h,"b4w_water_waves_hor_fac")),"b4w_water_absorb_factor"in h||(h.b4w_water_absorb_factor=6,b("material",h,"b4w_water_absorb_factor")),"b4w_water_fog_color"in
h||(h.b4w_water_fog_color=[.5,.7,.7],b("material",h,"b4w_water_fog_color")),"b4w_foam_factor"in h||(h.b4w_foam_factor=5,b("material",h,"b4w_foam_factor")),"b4w_generated_mesh"in h||(h.b4w_generated_mesh=!1,b("material",h,"b4w_generated_mesh")),"b4w_water_num_cascads"in h||(h.b4w_water_num_cascads=5,b("material",h,"b4w_water_num_cascads")),"b4w_water_subdivs"in h||(h.b4w_water_subdivs=64,b("material",h,"b4w_water_subdivs")),"b4w_water_detailed_dist"in h||(h.b4w_water_detailed_dist=1E3,b("material",
h,"b4w_water_detailed_dist")),"b4w_water_enable_caust"in h||(h.b4w_water_enable_caust=!1,b("material",h,"b4w_water_enable_caust")),"b4w_water_caust_scale"in h||(h.b4w_water_caust_scale=.25,b("material",h,"b4w_water_caust_scale")),"b4w_water_caust_brightness"in h||(h.b4w_water_caust_brightness=.5,b("material",h,"b4w_water_caust_brightness")));"b4w_dynamic_grass_size"in h||(h.b4w_dynamic_grass_size="");"b4w_dynamic_grass_color"in h||(h.b4w_dynamic_grass_color="");"diffuse_intensity"in h||(h.diffuse_intensity=
1,b("material",h,"diffuse_intensity"));"b4w_use_ghost"in h||(h.b4w_use_ghost=!1);"b4w_collision_margin"in h||(h.b4w_collision_margin=.04,b("material",h,"b4w_collision_margin"));"b4w_collision_group"in h||(h.b4w_collision_group=128,b("material",h,"b4w_collision_group"));"b4w_collision_mask"in h||(h.b4w_collision_mask=127,b("material",h,"b4w_collision_mask"));"b4w_do_not_render"in h||(h.b4w_do_not_render=!1,b("material",h,"b4w_do_not_render"));"HALO"!=h.type||"b4w_halo_sky_stars"in h||(h.b4w_halo_sky_stars=
!1,b("material",h,"b4w_halo_sky_stars"));"HALO"!=h.type||"b4w_halo_stars_blend_height"in h||(h.b4w_halo_stars_blend_height=10,b("material",h,"b4w_halo_stars_blend_height"));"HALO"!=h.type||"b4w_halo_stars_min_height"in h||(h.b4w_halo_stars_min_height=0,b("material",h,"b4w_halo_stars_min_height"));"specular_shader"in h||(h.specular_shader="COOKTORR",b("material",h,"specular_shader"));"diffuse_shader"in h||(h.diffuse_shader="LAMBERT",b("material",h,"diffuse_shader"));"roughness"in h||(h.roughness=.5,
b("material",h,"roughness"));"diffuse_fresnel"in h||(h.diffuse_fresnel=.1,b("material",h,"diffuse_fresnel"));"diffuse_fresnel_factor"in h||(h.diffuse_fresnel_factor=.5,b("material",h,"diffuse_fresnel_factor"));"specular_slope"in h||(h.specular_slope=.2,b("material",h,"specular_slope"));"specular_toon_size"in h||(h.specular_toon_size=.5,b("material",h,"specular_toon_size"));"specular_toon_smooth"in h||(h.specular_toon_smooth=.1,b("material",h,"specular_toon_smooth"));"specular_alpha"in h||(h.specular_alpha=
1,b("material",h,"specular_alpha"));"b4w_wettable"in h||(h.b4w_wettable=!1,b("material",h,"b4w_wettable"));"b4w_refractive"in h||(h.b4w_refractive=!1,b("material",h,"b4w_refractive"));"b4w_refr_bump"in h||(h.b4w_refr_bump=0,b("material",h,"b4w_refr_bump"));"b4w_shallow_water_col"in h||(h.b4w_shallow_water_col=[0,.8,.3],b("material",h,"b4w_shallow_water_col"));"b4w_shore_water_col"in h||(h.b4w_shore_water_col=[0,.9,.2],b("material",h,"b4w_shore_water_col"));"b4w_shallow_water_col_fac"in h||(h.b4w_shallow_water_col_fac=
1,b("material",h,"b4w_shallow_water_col_fac"));"b4w_shore_water_col_fac"in h||(h.b4w_shore_water_col_fac=.5,b("material",h,"b4w_shore_water_col_fac"));"b4w_water_sss_strength"in h||(h.b4w_water_sss_strength=5.9,b("material",h,"b4w_water_sss_strength"));"b4w_water_sss_width"in h||(h.b4w_water_sss_width=.45,b("material",h,"b4w_water_sss_width"));"b4w_render_above_all"in h||(h.b4w_render_above_all=!1,b("material",h,"b4w_render_above_all"));"b4w_water_norm_uv_velocity"in h||(h.b4w_water_norm_uv_velocity=
.05,b("material",h,"b4w_water_norm_uv_velocity"));"specular_ior"in h||(h.specular_ior=1,b("material",h,"specular_ior"));"darkness"in h||(h.darkness=0,b("material",h,"darkness"));"diffuse_toon_size"in h||(h.diffuse_toon_size=0,b("material",h,"diffuse_toon_size"));"diffuse_toon_smooth"in h||(h.diffuse_toon_smooth=0,b("material",h,"diffuse_toon_smooth"));"pass_index"in h||(h.pass_index=0,b("material",h,"pass_index"));l=h.texture_slots;for(q=0;q<l.length;q++)m=l[q],"blend_type"in m||(m.blend_type="MIX",
b("texture_slot",m,"blend_type"));if(h.node_tree){l=h.node_tree.nodes;for(q=0;q<l.length;q++)e(l[q]);h.node_tree.animation_data&&c(h.node_tree.animation_data)}}m=a.node_groups;for(k=0;k<m.length;k++)for(l=m[k].node_tree.nodes,q=0;q<l.length;q++)e(l[q]);l=a.objects;for(k=0;k<l.length;k++){m=l[k];switch(m.type){case "MESH":"b4w_dynamic_geometry"in m||(m.b4w_dynamic_geometry=!1);"b4w_reflexible"in m||(m.b4w_reflexible=!1);"b4w_reflexible_only"in m||(m.b4w_reflexible_only=!1);"b4w_reflective"in m||(m.b4w_reflective=
!1);"b4w_reflection_type"in m||(m.b4w_reflection_type="PLANE",b("object",m,"b4w_reflection_type"));"b4w_wind_bending"in m||(m.b4w_wind_bending=!1,b("object",m,"b4w_wind_bending"));"b4w_wind_bending_angle"in m||(m.b4w_wind_bending_angle=10,m.b4w_wind_bending_freq=.25,b("object",m,"wind bending params"));"b4w_detail_bending_amp"in m||(m.b4w_detail_bending_amp=.1,m.b4w_branch_bending_amp=.3,b("object",m,"detail bending params"));"b4w_detail_bending_freq"in m||(m.b4w_detail_bending_freq=1,b("object",
m,"b4w_detail_bending_freq"));"b4w_main_bend_stiffness_col"in m||(m.b4w_main_bend_stiffness_col="",b("object",m,"b4w_main_bend_stiffness_col"));"b4w_detail_bend_colors"in m||(m.b4w_detail_bend_colors={leaves_stiffness_col:"",leaves_phase_col:"",overall_stiffness_col:""},b("object",m,"b4w_detail_bend_colors"));"b4w_caustics"in m||(m.b4w_caustics=!1);"vertex_groups"in m&&m.vertex_groups.length&&m.data&&0==m.data.vertex_groups.length&&(m.data.vertex_groups=m.vertex_groups,delete m.vertex_groups,b("object",
m,"vertex_groups"));"b4w_vertex_anim"in m&&m.b4w_vertex_anim.length&&m.data&&0==m.data.b4w_vertex_anim.length&&(m.data.b4w_vertex_anim=m.b4w_vertex_anim,delete m.b4w_vertex_anim,b("object",m,"b4w_vertex_anim"));"b4w_do_not_render"in m||(m.b4w_do_not_render=!1);"b4w_hidden_on_load"in m||(m.b4w_hidden_on_load=!1);"b4w_hide_chldr_on_load"in m||(m.b4w_hide_chldr_on_load=!1);"use_ghost"in m.game||(m.game.use_ghost=!1);"use_sleep"in m.game||(m.game.use_sleep=!1);"velocity_min"in m.game||(m.game.velocity_min=
0);"velocity_max"in m.game||(m.game.velocity_max=0);"collision_group"in m.game||(m.game.collision_group=1);"collision_mask"in m.game||(m.game.collision_mask=255);q=m;d=q.game;h=d.collision_bounds_type;d.use_collision_bounds&&"BOX"!=h&&"CYLINDER"!=h&&"CONE"!=h&&"SPHERE"!=h&&"CAPSULE"!=h&&"EMPTY"!=h&&(t.error("Wrong collision bounds type "+h+". Disable physics for object "+q.name),q.b4w_collision=!1,q.b4w_floating=!1,q.b4w_vehicle=!1,q.b4w_character=!1);"b4w_vehicle_settings"in m?m.b4w_vehicle_settings&&
("steering_ratio"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.steering_ratio=10),"steering_max"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.steering_max=1),"inverse_control"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.inverse_control=!1),"force_max"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.force_max=1500),"brake_max"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.brake_max=100),"speed_ratio"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.speed_ratio=.027),"max_speed_angle"in
m.b4w_vehicle_settings||(m.b4w_vehicle_settings.max_speed_angle=Math.PI),"delta_tach_angle"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.delta_tach_angle=4.43),"suspension_compression"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.suspension_compression=4.4),"suspension_stiffness"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.suspension_stiffness=20),"suspension_damping"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.suspension_damping=2.3),"wheel_friction"in m.b4w_vehicle_settings||
(m.b4w_vehicle_settings.wheel_friction=1E3),"roll_influence"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.roll_influence=.1),"max_suspension_travel_cm"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.max_suspension_travel_cm=30),"floating_factor"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.floating_factor=3),"floating_factor"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.floating_factor=3),"water_lin_damp"in m.b4w_vehicle_settings||(m.b4w_vehicle_settings.water_lin_damp=.9),"water_rot_damp"in
m.b4w_vehicle_settings||(m.b4w_vehicle_settings.water_rot_damp=.9)):(m.b4w_vehicle_settings=null,b("object",m,"b4w_vehicle_settings"));"b4w_floating_settings"in m?m.b4w_floating_settings&&("floating_factor"in m.b4w_floating_settings||(m.b4w_floating_settings.floating_factor=3),"water_lin_damp"in m.b4w_floating_settings||(m.b4w_floating_settings.water_lin_damp=.8),"water_rot_damp"in m.b4w_floating_settings||(m.b4w_floating_settings.water_rot_damp=.8)):(m.b4w_floating_settings=null,b("object",m,"b4w_floating_settings"));
"b4w_character_settings"in m?m.b4w_character_settings&&("walk_speed"in m.b4w_character_settings||(m.b4w_character_settings.walk_speed=4),"run_speed"in m.b4w_character_settings||(m.b4w_character_settings.run_speed=8),"step_height"in m.b4w_character_settings||(m.b4w_character_settings.step_height=.25),"jump_strength"in m.b4w_character_settings||(m.b4w_character_settings.jump_strength=5),"waterline"in m.b4w_character_settings||(m.b4w_character_settings.waterline=0)):(m.b4w_character_settings=null,b("object",
m,"b4w_character_settings"));"b4w_selectable"in m||(m.b4w_selectable=!1,b("object",m,"b4w_selectable"));"b4w_outlining"in m||(m.b4w_outlining=!1,b("object",m,"b4w_outlining"));"b4w_outline_on_select"in m||(m.b4w_outline_on_select=!1,b("object",m,"b4w_outline_on_select"));"b4w_billboard"in m||(m.b4w_billboard=!1,b("object",m,"b4w_billboard"));"b4w_billboard_geometry"in m||(m.b4w_billboard_geometry="SPHERICAL",b("object",m,"b4w_billboard_geometry"));"b4w_pres_glob_orientation"in m||(m.b4w_pres_glob_orientation=
!1,b("object",m,"b4w_pres_glob_orientation"));"b4w_outline_settings"in m||("b4w_glow_settings"in m?m.b4w_outline_settings=m.b4w_glow_settings:(m.b4w_outline_settings={},m.b4w_outline_settings.outline_duration=1,m.b4w_outline_settings.outline_period=1,m.b4w_outline_settings.outline_relapses=0),b("object",m,"b4w_outline_settings"));"lod_levels"in m||(m.lod_levels=[],b("object",m,"lod_levels"));"b4w_animation_mixing"in m||(m.b4w_animation_mixing=!1,b("object",m,"b4w_animation_mixing"));break;case "EMPTY":"b4w_anchor"in
m||(m.b4w_anchor=null,b("object",m,"b4w_anchor")),!m.b4w_anchor||"max_width"in m.b4w_anchor||(m.b4w_anchor.max_width=250)}"collision_margin"in m.game||(m.game.collision_margin=.04,b("object",m,"collision_margin"));"b4w_anim_behavior"in m||(m.b4w_anim_behavior=m.b4w_cyclic_animation?"CYCLIC":"FINISH_STOP",b("object",m,"b4w_anim_behavior"));if(!("rotation_quaternion"in m)){q=[0,0,0,1];H.euler_to_quat(m.rotation_euler,q);var d=q,h=q[0],r=q[1],w=q[2];d[0]=q[3];d[1]=h;d[2]=r;d[3]=w;m.rotation_quaternion=
q;b("object",m,"rotation_quaternion")}"webgl_do_not_batch"in m&&(m.b4w_do_not_batch=m.webgl_do_not_batch)&&n("object",m,"webgl_do_not_batch");"b4w_shadow_cast_only"in m||(m.b4w_shadow_cast_only=!1,b("object",m,"b4w_shadow_cast_only"));"b4w_correct_bounding_offset"in m||(m.b4w_correct_bounding_offset="AUTO",b("object",m,"b4w_correct_bounding_offset"));d=m.particle_systems;for(q=0;q<d.length;q++)h=d[q],r=h.settings,"use_rotation_dupli"in r||(r.use_rotation_dupli=!1,b("particle_settings",r,"use_rotation_dupli")),
"use_whole_group"in r||(r.use_whole_group=!1,b("particle_settings",r,"use_whole_group")),h.transforms||(h.transforms=new Float32Array,b("particle_system",h,"transforms")),"b4w_billboard_align"in r||(r.b4w_billboard_align="VIEW",b("particle_settings",r,"b4w_billboard_align")),"b4w_dynamic_grass"in r||(r.b4w_dynamic_grass=!1,b("object",r,"b4w_dynamic_grass")),"b4w_dynamic_grass_scale_threshold"in r||(r.b4w_dynamic_grass_scale_threshold=.01,b("object",r,"b4w_dynamic_grass_scale_threshold")),"b4w_initial_rand_rotation"in
r||(r.b4w_initial_rand_rotation=!1,b("particle_settings",r,"b4w_initial_rand_rotation")),"b4w_rotation_type"in r||(r.b4w_rotation_type="Z",b("particle_settings",r,"b4w_rotation_type")),"b4w_rand_rotation_strength"in r||(r.b4w_rand_rotation_strength=1,b("particle_settings",r,"b4w_rand_rotation_strength")),"b4w_hair_billboard"in r||(r.b4w_hair_billboard=!1,b("particle_settings",r,"b4w_hair_billboard")),"b4w_hair_billboard_type"in r||(r.b4w_hair_billboard_type="BASIC",b("particle_settings",r,"b4w_hair_billboard_type")),
"b4w_hair_billboard_jitter_amp"in r||(r.b4w_hair_billboard_jitter_amp=0,b("particle_settings",r,"b4w_hair_billboard_jitter_amp")),"b4w_hair_billboard_jitter_freq"in r||(r.b4w_hair_billboard_jitter_freq=0,b("particle_settings",r,"b4w_hair_billboard_jitter_freq")),"b4w_hair_billboard_geometry"in r||(r.b4w_hair_billboard_geometry="SPHERICAL",b("particle_settings",r,"b4w_hair_billboard_geometry")),"b4w_wind_bend_inheritance"in r||(r.b4w_wind_bend_inheritance="PARENT",b("particle_settings",r,"b4w_wind_bend_inheritance")),
"b4w_shadow_inheritance"in r||(r.b4w_shadow_inheritance="PARENT",b("particle_settings",r,"b4w_shadow_inheritance")),"b4w_reflection_inheritance"in r||(r.b4w_reflection_inheritance="PARENT",b("particle_settings",r,"b4w_reflection_inheritance")),"b4w_vcol_from_name"in r||(r.b4w_vcol_from_name="",b("particle_settings",r,"b4w_vcol_from_name")),"b4w_vcol_to_name"in r||(r.b4w_vcol_to_name="",b("particle_settings",r,"b4w_vcol_to_name")),"b4w_coordinate_system"in r||(r.b4w_coordinate_system="LOCAL",b("particle_settings",
r,"b4w_coordinate_system")),"b4w_allow_nla"in r||(r.b4w_allow_nla=!0,b("particle_settings",r,"b4w_allow_nla")),"b4w_enable_soft_particles"in r||(r.b4w_enable_soft_particles=!1,b("particle_settings",r,"b4w_enable_soft_particles")),"b4w_particles_softness"in r||(r.b4w_particles_softness=1,b("particle_settings",r,"b4w_particles_softness")),"billboard_tilt"in r||(r.billboard_tilt=0,b("particle_settings",r,"billboard_tilt")),"billboard_tilt_random"in r||(r.billboard_tilt_random=0,b("particle_settings",
r,"billboard_tilt_random")),"use_rotations"in r||(r.use_rotations=!1,b("particle_settings",r,"use_rotations"));"constraints"in m||(m.constraints=[],b("object",m,"constraints"));d=m.constraints;for(q=0;q<d.length;q++)h=d[q],"influence"in h||(h.influence=1),"axes"in h||(h.axes=[1,1,1]);d=m.modifiers;for(q=0;q<d.length;q++){a:{h=d[q];switch(h.type){case "ARRAY":if(!("fit_type"in h)){t.error("WARNING Incomplete modifier "+String(h.type)+' for "'+m.name+'", reexport "'+a.b4w_filepath_blend+'" scene');
h=!1;break a}}h=!0}h||(d.splice(q,1),q--)}"animation_data"in m||(m.animation_data={action:null,nla_tracks:[]},b("object",m,"animation_data"));m.animation_data&&("action"in m.animation_data||(m.animation_data.action=null,g("no action in animation data "+m.name)),"nla_tracks"in m.animation_data||(m.animation_data.nla_tracks=[],g("no NLA in animation data "+m.name)),c(m.animation_data));"b4w_collision_id"in m||(m.b4w_collision_id="",b("object",m,"b4w_collision_id"));"b4w_viewport_alignment"in m||(m.b4w_viewport_alignment=
null,b("object",m,"b4w_viewport_alignment"));"pinverse_tsr"in m||(m.pinverse_tsr=null,b("object",m,"pinverse_tsr"));"b4w_cluster_data"in m||(m.b4w_cluster_data={cluster_id:-1,cluster_center:null},b("object",m,"b4w_cluster_data"));"pass_index"in m||(m.pass_index=0,b("object",m,"pass_index"));"b4w_custom_prop"in m||(b("object",m,"b4w_custom_prop"),m.b4w_custom_prop=null);(0>m.scale[0]||0>m.scale[1]||0>m.scale[2])&&g('negative scale for object "'+m.name+'", can lead to some errors');q=m.scale;0==q[0]&&
0==q[1]&&0==q[2]?q=!0:(d=Math.abs((q[1]-q[2])/q[1]),q=.005>Math.abs((q[0]-q[1])/q[0])&&.005>d);q||g("non-uniform scale for object "+m.name)}for(var p in f)k=f[p],q=p.match(/.*?(?=>>|$)/i)[0],t.warn('Property "'+String(q)+'" is '+k.lI+' for "'+k.type+'". To fix this, reexport '+a.b4w_filepath_blend)};a.VN=function(a,b){"num_channels"in a||(a.num_channels=1,g('B4W Warning: no channels number in animation fcurve for "'+b.name+'" action, reexport scene'))};a.dN=function(a){var b;a:{b=a.modifiers;for(var c=
0;c<b.length;c++){var e=b[c].type;if("ARRAY"==e||"CURVE"==e){b=!0;break a}}b=!1}if(!b)return null;b=p(a.data,a.data.name+"_MOD");a=a.modifiers;for(c=0;c<a.length;c++){var f=a[c];switch(f.type){case "ARRAY":for(var e=b,g=f,m=0,n=0,r=0,w=new Float32Array(16),f=[],v=1;v<g.count;v++){g.use_constant_offset&&(m+=g.constant_offset_displace[0],n+=g.constant_offset_displace[1],r+=g.constant_offset_displace[2]);if(g.use_relative_offset)var E=e.b4w_boundings.bb,m=m+(E.max_x-E.min_x)*g.relative_offset_displace[0],
n=n+(E.max_y-E.min_y)*g.relative_offset_displace[1],r=r+(E.max_z-E.min_z)*g.relative_offset_displace[2];H.jW(m,n,r,w);for(var F=E=p(e),u=w,M=l.fromMat4(u,y),M=q.fromMat3(M,N),fa=0;fa<F.submeshes.length;fa++){var pa=F.submeshes[fa];H.ep(pa.position,u,pa.position,0);G.oB(pa.tbn,M,pa.tbn)}f.push(E)}for(v=0;v<f.length;v++)for(g=e,m=f[v],n=0;n<g.submeshes.length;n++)if(r=g.submeshes[n],w=m.submeshes[n],E=r.base_length,F=r.indices.length,E)for(var Z in r)switch(Z){case "base_length":r[Z]+=w[Z];break;case "boundings":break;
case "indices":r[Z]=H.oW(r[Z],w[Z]);for(u=F;u<r[Z].length;u++)r[Z][u]+=E;break;case "position":r[Z]=k(r[Z],w[Z],r[Z].length/E/3);break;case "tbn":r[Z]=k(r[Z],w[Z],r[Z].length/E/4);break;case "shade_tangs":r[Z]=k(r[Z],w[Z],r[Z].length/E/3);break;case "group":r[Z]=k(r[Z],w[Z],r[Z].length/E);break;case "texcoord":r[Z]=k(r[Z],w[Z],r.uv_layers.length);break;case "color":r[Z]=k(r[Z],w[Z],r.vertex_colors.length);break;case "uv_layers":case "vertex_colors":break;default:t.warn('array_mesh_join(): unknown submesh property "'+
Z+'"'),r[Z]=H.QF(r[Z],w[Z])}break;case "CURVE":for(e=b,v=h.hP(f.object),g=new Float32Array(16),n=v.Uk?4:3,m=new Float32Array(n),n=new Float32Array(n),r=new Float32Array(3),w=new Float32Array(4),E=new Float32Array(4),F=new Float32Array(3),u=new Float32Array(3),M=new Float32Array(3),fa=0;fa<e.submeshes.length;fa++){var ma=e.submeshes[fa],pa=ma.position,ma=ma.tbn,aa;a:{aa=f.deform_axis;switch(aa){case "POS_X":case "NEG_X":aa=0;break a;case "POS_Y":case "NEG_Y":aa=1;break a;case "POS_Z":case "NEG_Z":aa=
2;break a;default:H.K("Wrong deform axis value "+aa)}aa=void 0}F[0]=0;F[1]=0;F[2]=0;F[aa]=1;for(var ea=h.SV(v),wa=0;wa<pa.length/3;wa++){M[0]=pa[3*wa];M[1]=pa[3*wa+1];M[2]=pa[3*wa+2];var da=M[aa],W=h.RV(v,da);h.TV(v,W,m);r[0]=m[0];r[1]=m[1];r[2]=m[2];h.QV(v,W,n);u[0]=n[0];u[1]=0;u[2]=n[2];z.normalize(u,u);q.rotationTo(F,u,w);0>da?(m[0]=u[0],m[1]=u[1],m[2]=u[2],z.scale(m,da,m),z.add(r,m,r)):da>ea&&(m[0]=u[0],m[1]=u[1],m[2]=u[2],z.scale(m,da-ea,m),z.add(r,m,r));d.fromRotationTranslation(w,r,g);v.Uk&&
(q.setAxisAngle(F,m[3],E),z.transformQuat(M,E,M));M[aa]=0;z.transformMat4(M,g,M);pa[3*wa]=M[0];pa[3*wa+1]=M[1];pa[3*wa+2]=M[2];da=G.Fm(ma,wa,D);G.oB(da,w,da);G.Pi(ma,da,wa)}}}x.jU(b)}return b};a.iN=function(a,b){function c(b,c){var d=b[0];if(1<b.length)for(var e=1;e<b.length;e++)d+="*"+b[e];for(e=0;e<a.length;e++){var h=a[e];if(h.name==d)for(var f in c)h[f]=c[f]}}function d(a,b){for(var d in a)c(a[d],b)}for(var e=b.b4w_logic_nodes,h=0;h<e.length;h++)for(var f=e[h],k=0;k<f.length;k++){var l=f[k],n=
{register1:"variable1",register2:"variable2",registerd:"variabled"},q;for(q in n)q in l&&(l[n[q]]=l[q]);for(var t in l.variables)"boolean"!=typeof l.variables[t][0]&&(l.variables[t]=[!1,l.variables[t]]);0<=["MATH","CONDJUMP","PAGEPARAM","REGSTORE"].indexOf(l.type)&&("variable1"in l&&(l.variables.id0=[!1,l.variable1]),"variable2"in l&&(l.variables.id1=[!1,l.variable2]),"variabled"in l&&(l.variables.vd=[!1,l.variabled]));for(var w in l.links)w.startsWith("id")||delete l.links[w];var n=l.common_usage_names,
p=l.variables;switch(l.type){case "SELECT":for(var y=0;y<a.length;y++)n=a[y],n.name==l.object&&(n.b4w_selectable=!0);l.bools||(l.bools={});l.bools.not_wait||(l.bools.not_wait=!1);g('Logic nodes type "SELECT" is deprecated');break;case "SWITCH_SELECT":d(l.objects_paths,{b4w_selectable:!0});if(l.links instanceof Array){g('Format of a "SWITCH_SELECT" node is outdated. It is recommended to reexport the scene "'+b.name+'"');n={};p=0;for(y in l.objects_paths)n[y]=l.links[p],p++;l.links=n}break;case "SELECT_PLAY":g('Logic nodes type "SELECT_PLAY" is deprecated, node will be muted. To fix this, reexport the scene "'+
b.name+'"');l.mute=!0;break;case "SELECT_PLAY_ANIM":g('Logic nodes type "SELECT_PLAY_ANIM" is deprecated');break;case "SHOW":case "HIDE":l.bools||(l.bools={});void 0===l.bools.ch&&(l.bools.ch=!1);l.bools.id0||d(l.objects_paths,{b4w_do_not_batch:!0});break;case "SET_SHADER_NODE_PARAM":case "INHERIT_MAT":d(l.objects_paths,{b4w_do_not_batch:!0});break;case "PLAY":b.b4w_use_nla=!0;break;case "MOVE_TO":d(l.objects_paths,{b4w_do_not_batch:!0});break;case "TRANSFORM_OBJECT":d(l.objects_paths,{b4w_do_not_batch:!0});
switch(n.space_type){case "WORLD":n.space_type=F.yL;break;case "PARENT":n.space_type=F.xL;break;case "LOCAL":n.space_type=F.wL}break;case "OUTLINE":d(l.objects_paths,{b4w_outlining:!0});break;case "CONDJUMP":l.condition&&(n.condition=l.condition);if("cnd"in l.floats)n.condition=l.floats.cnd;else switch(n.condition){case "GEQUAL":n.condition=F.vD;break;case "LEQUAL":n.condition=F.xD;break;case "GREATER":n.condition=F.wD;break;case "LESS":n.condition=F.yD;break;case "NOTEQUAL":n.condition=F.zD;break;
case "EQUAL":n.condition=F.uD}void 0!=l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);l.bools||(l.bools={});l.bools.str&&(n.variable_type="STRING");switch(n.variable_type){case "NUMBER":n.variable_type=F.Ry;break;case "STRING":n.variable_type=F.BD;break;case "OBJECT":n.variable_type=F.AD}void 0===n.variable_type&&(n.variable_type=F.Ry,l.floats.inp1=l.input1,l.floats.inp2=l.input2);void 0===p.id0&&(p.id0=p.v1,p.id1=p.v2);break;case "SEND_REQ":l.bools||(l.bools={});l.strings||
(l.strings={});void 0===l.bools.ct&&(l.bools.ct=!1);void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "MATH":void 0!=l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);void 0!=l.input1&&(l.floats.inp1=l.input1);void 0!=l.input2&&(l.floats.inp2=l.input2);switch(l.operation){case "DIV":l.operation=F.dL;break;case "SUB":l.operation=F.mL;break;case "MUL":l.operation=F.iL;break;case "ADD":l.operation=F.ZK;break;case "RAND":l.operation=F.jL;break;case "SIN":l.operation=
F.lL;break;case "COS":l.operation=F.cL;break;case "TAN":l.operation=F.nL;break;case "ARCSIN":l.operation=F.aL;break;case "ARCCOS":l.operation=F.$K;break;case "ARCTAN":l.operation=F.bL;break;case "LOG":l.operation=F.eL;break;case "MIN":l.operation=F.gL;break;case "MAX":l.operation=F.fL;break;case "ROUND":l.operation=F.kL;break;case "MOD":l.operation=F.hL;break;case "ABS":l.operation=F.YK}void 0===p.id0&&(p.id0=p.v1,p.id1=p.v2);break;case "REGSTORE":l.floats||(l.floats={});l.strings||(l.strings={});
void 0!=l.number1&&(l.input1=l.number1);if(void 0!=l.input1)switch(typeof l.input1){case "number":l.floats.inp1=l.input1;n.variable_type="NUMBER";break;default:l.strings.inp1=l.input1,n.variable_type="STRING"}switch(n.variable_type){case "NUMBER":n.variable_type=F.Ry;break;case "STRING":n.variable_type=F.BD;break;case "OBJECT":n.variable_type=F.AD,d(l.objects_paths,{b4w_do_not_batch:!0})}break;case "PAGEPARAM":l.bools||(l.bools={});void 0===l.bools.hsh&&(l.bools.hsh=!1);l.floats||(l.floats={});void 0===
l.floats.ptp&&(l.floats.ptp=0);break;case "STOP_ANIM":case "PLAY_ANIM":l.bools||(l.bools={});void 0===l.bools.env&&(l.bools.env=!1);void 0===l.bools.id0&&(l.bools.id0=!1);l.bools.id0||c(l.objects_paths.id0,{b4w_do_not_batch:!0});"PLAY_ANIM"==l.type&&((l=n.param_anim_behavior)||(l="FINISH_STOP"),n.param_anim_behavior=r.bz(l));break;case "STRING":switch(n.string_operation){case "JOIN":n.string_operation=F.tL;break;case "FIND":n.string_operation=F.sL;break;case "REPLACE":n.string_operation=F.uL;break;
case "SPLIT":n.string_operation=F.vL;break;case "COMPARE":n.string_operation=F.rL}if("cnd"in l.floats)n.condition=l.floats.cnd;else switch(n.condition){case "GEQUAL":n.condition=F.vD;break;case "LEQUAL":n.condition=F.xD;break;case "GREATER":n.condition=F.wD;break;case "LESS":n.condition=F.yD;break;case "NOTEQUAL":n.condition=F.zD;break;case "EQUAL":n.condition=F.uD}break;case "REDIRECT":void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "SET_CAMERA_MOVE_STYLE":switch(n.camera_move_style){case "STATIC":n.camera_move_style=
F.UK;break;case "TARGET":n.camera_move_style=F.VK;break;case "EYE":n.camera_move_style=F.SK;break;case "HOVER":n.camera_move_style=F.TK}break;case "ENTRYPOINT":l.bools||(l.bools={});void 0===l.bools.js&&(l.bools.js=!1);l.bools.js&&(l.mute=!0);break;case "JS_CALLBACK":for(q in l=n.js_cb_params,l)switch(l[q]){case "OBJECT":l[q]=F.WK;break;case "VARIABLE":l[q]=F.XK}}}}};b4w.module.__scenegraph=function(a,u){function e(a,b){var c=[];C.oh(a,function(b,d,e){-1<c.indexOf(e)?C.vU(a,b,d,e,F(e)):c.push(e)});C.fa(a,function(a,d){for(var e=0;e<d.fb.length;e++){var h=d.fb[e];b||d.type!=m.Zd&&d.type!=m.wd&&d.type!=m.Gg||(h.ad=!0);-1<c.indexOf(h)?d.fb[e]=F(h):c.push(h)}})}function c(a,c){C.fa(a,function(b,d){d.type==m.dD&&C.jk(a,b,function(a,b){if(b.type==m.ai)for(var c=0;c<b.fb.length;c++){var d=b.fb[c];d.aa=K.T;d.ba=K.T}});c||C.jk(a,b,function(a,b,c){"DEPTH"==c.from&&(c.ad=
!0)})});C.fa(a,function(c){var d={};b(a,c,d);for(var e in d){c=d[e];for(var h=c[0],f=0;f<c.length;f++)if(c[f].aa==K.T){h=c[f];break}for(var k=c[0],f=0;f<c.length;f++)if(c[f].ba==K.T){k=c[f];break}for(var l=c[0],f=0;f<c.length;f++)if(!c[f].ad){l=c[f];break}for(f=0;f<c.length;f++)c[f].aa=h.aa,c[f].ba=k.ba,c[f].ad=l.ad}})}function b(a,c,d){C.jk(a,c,function(c,e,h){h.active&&h.from==h.to&&(d[h.from]=d[h.from]||[],-1==d[h.from].indexOf(h)&&d[h.from].push(h),b(a,c,d))});C.El(a,c,function(a,b,c){c.active&&
(d[c.from]=d[c.from]||[],-1==d[c.from].indexOf(c)&&d[c.from].push(c))});c=C.$a(a,c);if(c.type==m.ai)for(var e=0;e<c.fb.length;e++){var h=c.fb[e];d[h.from].push(h)}}function n(a){var b=[m.ai,m.Ty,m.At,m.Zd,m.wd,m.kq];S.gb||b.push(m.gD);var c=C.DC(a),d=[];C.fa(c,function(a,e){for(var h=0;h<e.fb.length;h++){var f=e.fb[h];-1<b.indexOf(e.type)&&(f.Hl=!0);var l=v(d,f,g(f));f.Oa=l;e.nh[h]=l}for(h=0;h<e.nh.length;h++)l=e.nh[h],x(d,l);C.El(c,a,function(h,f,l){if(!l.Oa){if(-1<b.indexOf(e.type))l.Hl=!0;else if((h=
p(c,a,l.from))&&l.active&&!l.Oa){k(d,h);l.Oa=h;return}h=v(d,l,g(l));l.Oa=h}});C.jk(c,a,function(a,b,c){x(d,c.Oa)});C.El(c,a,function(a,b,c){c.Oa&&"NONE"==c.to&&x(d,c.Oa)})})}function g(a){var b=a.to,c=a.active,d=a.Oa;a.to="";a.active=!1;a.Oa=null;var e=R.DE(a);a.to=b;a.active=c;a.Oa=d;return e}function p(a,b,c){var d=null;C.jk(a,b,function(a,b,e){if(e.active&&e.from==e.to&&e.from==c&&e.Oa)return d=e.Oa,!0});C.El(a,b,function(a,b,e){if(e.active&&e.from==c&&e.Oa)return d=e.Oa,!0});return d}function k(a,
b){for(var c=0;c<a.length;c++){var d=a[c];d.CC===b&&d.ws++}}function x(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.CC===b&&d.ws&&d.ws--}}function v(a,b,c){if(b.dn)return k(a,b.dn.Oa),b.dn.Oa;if(b.Hl)return h(b);for(var d=null,e=0;e<a.length;e++){var f=a[e];if(f.id==c&&0===f.ws){d=f;break}}if(d&&!S.OF)return d.ws++,d.CC;b=h(b);a.push({id:c,ws:1,CC:b});return b}function h(a){var b=a.Yj*a.size,c=a.Zj*a.size,d=a.my,e=a.ne;switch(a.from){case "COLOR":return a.ad?(d=K.rj(a.tg?K.Ft:K.Et,d,e),K.resize(d,
b,c)):(d=a.qr?K.rj(K.Tl,d,e):K.rj(K.sh,d,e),K.resize(d,b,c),K.fC(d,a.aa,a.ba)),d;case "DEPTH":return a.ad?(d=K.rj(a.tg?K.Dt:K.Ct,d,e),K.resize(d,b,c)):(d=K.rj(K.Sl,d,e),K.resize(d,b,c),K.fC(d,a.aa,a.ba)),d;case "CUBEMAP":return d=K.NO(b,e);case "SCREEN":case "NONE":return null;default:R.K("Wrong slink param: "+a.from)}}function d(a,b){var c=!1;C.oh(a,function(d,e,h){if(h&&(d=C.$a(a,d),e=C.$a(a,e),b(h,!1,d,e)))return c=!0});c||C.fa(a,function(a,c){for(var d=0;d<c.fb.length;d++)if(b(c.fb[d],!0,c,null))return!0})}
function t(a){C.fa(a,function(b,c){if(c.type!=m.uk){var d=c.H;C.El(a,b,function(a,b,c){c.Oa&&c.active&&c.Oa&&(M.kx(d,c.from,c.Oa),c.from==c.to&&b.H&&M.kx(b.H,c.from,c.Oa))});for(var e=0;e<c.fb.length;e++){var h=c.fb[e];h.active&&h.from==h.to&&M.kx(d,h.from,c.nh[e])}!d.Qb&&!d.wf||d.We||(d.We=A.rU(d.Qb,d.wf))}});C.fa(a,function(b,c){if(c.type==m.yt||c.type==m.Jy){var d=w(a,c);c.H.vr=d[0].H.We}})}function q(a){var b=null,c=0;C.fa(a,function(a,d){if(d.type==O.Qs){if(c==O.bW)return b=d,!0;c++}});return b}
function G(a,b){var c=C.Pj(a,b),d=m.Hc("NONE"),e=C.Y(a,d),h=C.Er(a)[0];C.oh(a,function(b,c){c==h&&C.kU(a,b,h,b,e)});var f=H(b,a);C.oh(a,function(e,h,k){if(e==c){if(f){e=m.ar();C.Y(a,e);h=l("COLOR","RESOLVE",1,1,1,!0,!0);h.tg=!0;h.ad=!0;var g=l("DEPTH","RESOLVE",1,1,1,!0,!0);g.tg=!0;g.ad=!0;C.I(a,b,e,h);C.I(a,b,e,g);b=e}C.I(a,b,d,l(O.EV,"u_color",k.size,k.Yj,k.Zj,k.rn,k.Pt));return!0}});C.Ec(a,e,h,l("SCREEN","NONE",.5,.5,.5,!0,!0))}function H(a,b){var c=!1,d=C.Pj(b,a);C.vg(b,d)&&(c=C.Ug(b,d,0),d=C.Oc(b,
d,c,0),"COLOR"==d.from&&"COLOR"==d.to||"DEPTH"==d.from&&"DEPTH"==d.to?(d=C.$a(b,c),c=H(d,b)):c="RESOLVE"==d.to);return c}function z(a,b,c,d){var e=c.ja,h=b.Qv,f=b.anaglyph_use,k=b.Qh.Mi,g=b.Qh.Ww;b=C.yl(a,C.HR(a,d),C.rk);var n=[],r=[],q=[];b=C.clone(b,function(b){var d;if(-1<sa.indexOf(b.type))r.push(b),d=b;else{d=m.uO(b);if(d.type==m.Zd)for(var f=0;f<k.length;f++)if(k[f][0]==b){k[f]=[b,d];d.H.xc=b.H.xc;c.ja.push(d.H);break}if(b.type==m.Xf)for(f=0;f<k.length;f++){if(g[f][0]==b){g[f]=[b,d];d.H=k[f][1].H;
break}}else-1<e.indexOf(b.H)&&(h?(M.tw(b.H,M.kf),M.tw(d.H,M.Oe),d.ym=!0):(M.tw(b.H,M.Dc),M.tw(d.H,M.Lc)),e.push(d.H));var l=C.Pj(a,b);C.jk(a,l,function(a,b,c){-1<sa.indexOf(b.type)&&n.push([b,d,c])});if(b.type!==m.ai)for(f=0;f<b.fb.length;f++)d.fb[f].dn=b.fb[f];b=!0;for(f=0;f<C.zi(a,l);f++){var t=C.ng(a,l,f),t=C.$a(a,t);-1==sa.indexOf(t.type)&&(b=!1)}b&&q.push(d)}return d},function(a){var b=F(a,!0);b.dn=a;return b});for(var t=0;t<r.length;t++)C.If(b,C.Pj(b,r[t]));C.xz(b);f=m.JP(h,f);t=C.Y(a,f);if(S.Vv)var w=
m.Hc("NONE"),p=l("COLOR","u_color",1,1,1,!0,!0);else w=m.Iz(),p=l("COLOR","COPY",1,1,1,!0,!0);p.aa=K.T;p.ba=K.T;C.Y(a,w);C.I(a,d,w,p);var y=l("COLOR","u_sampler_left",1,1,1,!0,!0);y.Hl=!0;y.aa=K.T;y.ba=K.T;C.I(a,w,f,y);if(!d.bc){if(S.Vv)var y=m.Hc("NONE"),z=l("COLOR","u_color",1,1,1,!0,!0);else y=m.Iz(),z=l("COLOR","COPY",1,1,1,!0,!0);C.Y(b,y);z.dn=p;var G=C.Er(b)[0],G=C.$a(b,G);C.I(b,G,y,z)}y=l("COLOR","u_sampler_right",1,1,1,!0,!0);d.bc&&(y.dn=p);y.aa=K.T;y.ba=K.T;C.cE(b,a,[C.Er(b)[0],t,y]);for(t=
0;t<n.length;t++)C.I(a,n[t][0],n[t][1],n[t][2]);d=l("SCREEN","NONE",0,0,0,!1,!1);for(t=0;t<q.length;t++)C.I(a,w,q[t],d);C.oh(a,function(b,c,d){C.$a(a,b).type===m.ai&&(d.dn=null)});return f}function l(a,b,c,d,e,h,f){return{from:a,to:b,size:c,Yj:d,Zj:e,rn:h,Pt:f,active:!0,Oa:null,tg:!1,qr:!1,ad:!1,aa:K.se,ba:K.se,Hl:!1,my:!1,ne:!1}}function F(a,b){var c=l(a.from,a.to,a.size,a.Yj,a.Zj,a.rn,a.Pt);c.active=a.active;!b&&a.Oa&&R.K("Failed to clone slink with attached texture");c.Oa=a.Oa;c.tg=a.tg;c.ad=a.ad;
c.aa=a.aa;c.ba=a.ba;c.Hl=a.Hl;c.my=a.my;c.ne=a.ne;return c}function r(a,b,c){if(b.type==c)return!0;b=f(a,b);for(var d=0;d<b.length;d++)if(r(a,b[d],c))return!0;return!1}function E(a,b,c){if(b.type==c)return!0;b=w(a,b);for(var d=0;d<b.length;d++)if(E(a,b[d],c))return!0;return!1}function w(a,b){var c=C.Pj(a,b);c==C.Sy&&R.K("Subscene not in graph");for(var d=[],e=C.zi(a,c),h=0;h<e;h++){var f=C.ng(a,c,h);f!=c&&d.push(C.$a(a,f))}return d}function f(a,b){var c=C.Pj(a,b);c==C.Sy&&R.K("Subscene not in graph");
for(var d=[],e=C.vg(a,c),h=0;h<e;h++){var f=C.Ug(a,c,h);f!=c&&d.push(C.$a(a,f))}return d}function y(a){var b=[],c=[];d(a,function(a){a.Oa&&-1==b.indexOf(a.Oa)&&(b.push(a.Oa),c.push(a.Oa,b.length-1))});return c}function D(a,b){var c;c=""+(a.from+"\\n");c+="NONE"!=a.to?a.to+"\\n":"";c+="(";if(a.rn){var d=a.Yj,e=a.Zj;Math.round(d)!=d&&(d=d.toFixed(2));Math.round(e)!=e&&(e=e.toFixed(2));c=c+((1==d?"":d)+"Sx"+((1==e?"":e)+"S"))+(a.Pt?" FACT":" VIEW")}else d=a.Yj,e=a.Zj,c+=a.size*d+"x"+a.size*e;if("SCREEN"!=
a.from){c+=" ";if(a.ad)c+="RR";else{var d=a.aa,e=a.ba,h="";d==K.T?h+="L":d==K.se&&(h+="N");e==K.T?h+="L":e==K.se&&(h+="N");c+=h}for(d=0;d<b.length;d+=2)b[d]==a.Oa&&(c+=" "+b[d+1])}return c+")\\n"}var N=u("__batch"),M=u("__camera"),B=u("__config"),J=u("__debug"),C=u("__graph"),A=u("__renderer"),X=u("__shaders"),m=u("__subscene"),K=u("__textures"),R=u("__util"),O=B.rm,S=B.L,ga=B.kp,sa=[m.Zi,m.xd,m.wd,m.jf];a.gO=function(a){switch(a.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "NONE":return!1;
default:return!0}};a.Ip=d;a.bP=function(a,b,d,h){function k(c){var d=M.Mc(ia,!0);b.ja.push(d);d=m.pm(c,d,!1,H,E,Y,na,ya,a.zl);C.Y(g,d);c==m.Gg?(C.I(g,r[0],d,l("COLOR","COLOR",1,1,1,!0,!0)),d.fb.push(l("DEPTH","DEPTH",1,1,1,!0,!0))):(c=Aa&&r[0].type==m.yt?Wa:r[0],C.I(g,Wa,d,za),C.I(g,c,d,Za));La&&(C.I(g,La,d,Sa),C.I(g,La,d,Ja));for(c=0;c<y.length;c++)C.I(g,y[c],d,A[c]);rb&&C.I(g,rb,d,wb);if(W.length){var e=W.length;for(c=0;c<e;c++)C.I(g,W[c],d,v[c])}if(B.length)for(c=0;c<B.length;c++)C.I(g,B[c],d,
D[c]);ic&&C.I(g,ic,d,Ud);return d}var g=C.create(),r=[],p=[],y=[],A=[],W=[],v=[],B=[],D=[],x=[],E=a.JS,H=a.td,u=a.shore_smoothing,la=a.GV,V=a.ssao,ta=a.god_rays,N=a.Qh,I=a.uH,U=a.xN,X=a.motion_blur,sa=a.compositing,va=a.antialiasing,na=a.Ql,Y=a.tK,ya=a.Zc,Na=a.qT,oa=a.UN,T=a.VR,Ea=a.HT,Fa=a.dof,L=a.XP,ha=a.refractions,ra=!!h.length,Aa=1<S.ec;S.hp=S.hp&&!!ya&&!(Aa&&V);var Qa=S.hp,Za=l("COLOR","COLOR",1,1,1,!0,!0),za=l("DEPTH","DEPTH",1,1,1,!0,!0);if(Aa){var fa=F(za);Za.tg=!0;Za.ad=!0;za.tg=!0;za.ad=
!0}var ia=b.ja[0];if(a.Nc){var La=m.vP();C.Y(g,La);var pa=ga.Fr;La.H.width=pa;La.H.height=pa;var Sa=l("DEPTH","u_grass_map_depth",pa,1,1,!1,!1);S.gb||(Sa.aa=K.T,Sa.ba=K.T);var Ja=l("COLOR","u_grass_map_color",pa,1,1,!1,!1);Ja.aa=K.T;Ja.ba=K.T}else Ja=Sa=La=null;if(ya){M.QC(ia,ya);for(var ka=0;ka<ya.Ih.length;ka++)for(var hc=ya.csm_num,qa=0;qa<hc;qa++){var Q=m.EP(qa,ka,ya,E);C.Y(g,Q);y.push(Q);var pa=ya.csm_resolution,Ha=Q.H;b.UI.push(Ha);Ha.width=pa;Ha.height=pa;Q.nb=!0;var $a=0<ka?ka:qa;if(S.As){A.push(l("COLOR",
"u_shadow_map"+$a,pa,1,1,!1,!1));var Xa=l("DEPTH","DEPTH",pa,1,1,!1,!1);Xa.ad=!0;Q.fb.push(Xa)}else{var Da=l("DEPTH","u_shadow_map"+$a,pa,1,1,!1,!1);S.Tq&&(Da.aa=K.T,Da.ba=K.T,Da.my=!0);A.push(Da);(J.aO()||S.VI)&&Q.fb.push(l("COLOR","COLOR",pa,1,1,!1,!1))}La&&(C.I(g,La,Q,Sa),C.I(g,La,Q,Ja))}}if(N&&N.KH&&!ra)for(qa=0;qa<N.KH;qa++){Ha=M.Gc(M.Kc);Ha.width=a.ri;Ha.height=a.ri;M.BI(Ha,Math.PI/2,.1,100);M.set_projection(Ha,!1);var Ya=m.pm(m.wd,Ha,!1,H,E,Y,na,null,a.zl);Ya.Ng=R.VQ();for(ka=0;6>ka;ka++)Ya.qm.push(M.RO());
C.Y(g,Ya);var Cb=l("CUBEMAP","u_cube_reflection",a.ri,1,1,!1,!1);Cb.aa=K.T;Cb.ba=K.T;D.push(Cb);if(!N.AA){var Gb=l("CUBEMAP","u_sky_reflection",1,1,1,!1);Gb.ne=!0;Gb.aa=K.$i;Gb.ba=K.T;x.push(Gb)}La&&(C.I(g,La,Ya,Sa),C.I(g,La,Ya,Ja));if(N.wG){var Ba=m.pm(m.jf,Ha,!1,H,E,Y,na,null,a.zl);Ba.Ng=Ya.Ng;Ba.qm=Ya.qm;C.Y(g,Ba);var ib=l("DEPTH","DEPTH",a.ri,1,1,!1,!1),Wb=l("COLOR","COLOR",a.ri,1,1,!1,!1);C.I(g,Ya,Ba,ib);C.I(g,Ya,Ba,Wb);B.push(Ba);N.Lz.push(Ba);La&&(C.I(g,La,Ba,Sa),C.I(g,La,Ba,Ja))}else{var ab=
l("DEPTH","DEPTH",a.ri,1,1,!1,!1);Ya.fb.push(ab);B.push(Ya)}N.sj.push(Ya)}if(N&&0<N.hI.length&&!ra)for(ka=0;ka<N.hI.length;ka++)Ha=M.Mc(ia,!0),Ha.xc=new Float32Array(4),b.ja.push(Ha),Ya=m.pm(m.Zd,Ha,!1,H,E,Y,na,null,a.zl),C.Y(g,Ya),Cb=l("COLOR","u_plane_reflection",1,a.Ph,a.Ph,!0,!0),Cb.aa=K.T,Cb.ba=K.T,v.push(Cb),La&&(C.I(g,La,Ya,Sa),C.I(g,La,Ya,Ja)),N.wG?(Ba=m.pm(m.Xf,Ha,!1,H,E,Y,na,null,a.zl),C.Y(g,Ba),ib=l("DEPTH","DEPTH",1,a.Ph,a.Ph,!0,!0),Wb=l("COLOR","COLOR",1,a.Ph,a.Ph,!0,!0),Wb.aa=K.se,Wb.ba=
K.se,C.I(g,Ya,Ba,ib),C.I(g,Ya,Ba,Wb),N.Ww.push([Ba]),W.push(Ba),La&&(C.I(g,La,Ba,Sa),C.I(g,La,Ba,Ja))):(ab=l("DEPTH","DEPTH",1,a.Ph,a.Ph,!0,!0),Ya.fb.push(ab),W.push(Ya)),N.Mi.push([Ya]);if(ya){var Xb=M.Mc(ia,!0);b.ja.push(Xb);var mb=m.FP(Xb,E);C.Y(g,mb);mb.self_shadow_normal_offset=ya.self_shadow_normal_offset;for(qa=0;qa<y.length;qa++)Q=y[qa],C.I(g,Q,mb,A[qa]);if(Qa){if(Da=l("DEPTH","DEPTH",1,1,1,!0,!0),Aa){Da.tg=!0;Da.ad=!0;var Lb=m.ar();C.Y(g,Lb);var $c=l("COLOR","RESOLVE",1,1,1,!0,!0);$c.tg=
!0;$c.ad=!0;var Fc=l("DEPTH","RESOLVE",1,1,1,!0,!0);Fc.tg=!0;Fc.ad=!0;C.I(g,mb,Lb,$c);C.I(g,mb,Lb,Fc)}}else Aa?Da=l("DEPTH","DEPTH",1,1,1,!0,!0):S.As?(Da=l("DEPTH","DEPTH",1,1,1,!0,!0),Da.ad=!0):Da=za;if(V){var Ua=l("COLOR","u_color",1,1,1,!0,!0),jb=l("DEPTH","u_depth",1,1,1,!0,!0),bb=M.Mc(ia,!0);b.ja.push(bb);var Hb=a.VV,$b=m.HP(bb,Y,Hb);C.Y(g,$b);var Gc=l("COLOR","u_ssao_mask",1,1,1,!0,!0);C.I(g,mb,$b,Ua);C.I(g,mb,$b,jb);var ac=M.Mc(ia,!0);b.ja.push(ac);var Mb=m.IP(ac,Hb);C.Y(g,Mb);var sb=l("COLOR",
"u_shadow_mask",1,1,1,!0,!0);C.I(g,$b,Mb,Gc);C.I(g,mb,Mb,jb)}La&&(C.I(g,La,mb,Sa),C.I(g,La,mb,Ja))}else mb=null;var Wa=m.pm(m.Hb,ia,!Qa,H,E,Y,na,null,a.zl);C.Y(g,Wa);ya&&(Qa?C.I(g,mb,Wa,Da):mb.fb.push(Da));if(Aa){var Ab=m.ar();C.Y(g,Ab);p.push(Ab);var Ib=l("COLOR","RESOLVE",1,1,1,!0,!0);Ib.tg=!0;Ib.ad=!0;var Db=l("DEPTH","RESOLVE",1,1,1,!0,!0);Db.tg=!0;Db.ad=!0;C.I(g,Wa,Ab,Ib);C.I(g,Wa,Ab,Db)}else p.push(Wa);mb&&(Gc?C.I(g,Mb,Wa,sb):C.I(g,Qa&&Aa?Lb:mb,Wa,l("COLOR","u_shadow_mask",1,1,1,!0,!0)));La&&
(C.I(g,La,Wa,Sa),C.I(g,La,Wa,Ja));if(W.length)for(var jc=W.length,ka=0;ka<jc;ka++)C.I(g,W[ka],Wa,v[ka]);if(B.length)for(ka=0;ka<B.length;ka++)C.I(g,B[ka],Wa,D[ka]);r=p;p=[];if(!ra&&a.vO){var uc=O.enabled&&(O.Qs===m.Ne||O.Qs===m.ph),Ha=M.Mc(ia,!0);uc||(Ha.width=Ha.height=1);b.ja.push(Ha);var vc=m.oF(Ha,!1,E);C.Y(g,vc);if(a.$h){Ha=M.Mc(ia,!0);uc||(Ha.width=Ha.height=1);b.ja.push(Ha);var wc=m.oF(Ha,!0,E);C.Y(g,wc);C.I(g,vc,wc,l("COLOR","COLOR",1,1,1,uc,!0));C.I(g,vc,wc,l("DEPTH","DEPTH",1,1,1,uc,!0))}}else vc=
null;if(!I.refractions&&!ha||ra)ic=null;else{if(Aa)ic=Ab;else{if(S.Vv)var ic=m.Hc("NONE"),kc=l("COLOR","u_color",1,1,1,!0,!0);else ic=m.Iz(),kc=l("COLOR","COPY",1,1,1,!0,!0);C.Y(g,ic);C.I(g,r[0],ic,kc)}var Ud=l("COLOR","u_refractmap",1,1,1,!0,!0)}if(L&&(ha||u||la)){var Md=M.Mc(ia,!0);b.ja.push(Md);var rb=m.sP(Md);C.Y(g,rb);C.I(g,Aa?Ab:Wa,rb,l("DEPTH","u_depth",1,1,1,!0,!0));var wb=l("COLOR","u_scene_depth",1,1,1,!0,!0);wb.aa=K.se;wb.ba=K.se}else rb=null;if(a.Cv){var eb=k(m.cd);p.push(eb);r=p;p=[]}if(a.glow_materials){var Sb=
M.Mc(ia,!0);b.ja.push(Sb);var kb=m.pm(m.Yd,Sb,!1,H,E,Y,na);C.Y(g,kb);rb&&C.I(g,rb,kb,wb);ic&&C.I(g,ic,kb,Ud);La&&(C.I(g,La,kb,Sa),C.I(g,La,kb,Ja));if(W.length)for(jc=W.length,ka=0;ka<jc;ka++)C.I(g,W[ka],kb,v[ka]);if(B.length)for(ka=0;ka<B.length;ka++)C.I(g,B[ka],kb,D[ka]);a.Cv&&C.I(g,kb,eb,l("SCREEN","NONE",0,0,0,!1,!1));C.I(g,Aa?Ab:Wa,kb,Aa?fa:za);var cb=m.Hc("X_GLOW_BLUR");cb.Ab="GLOW_MASK_SMALL";cb.Ie=a.xi.small_glow_mask_width;var lc=l("COLOR","u_color",1,1,1,!0,!0);lc.aa=K.T;lc.ba=K.T;C.Y(g,
cb);C.I(g,kb,cb,lc);var Nb=m.Hc("Y_GLOW_BLUR");Nb.Ab="GLOW_MASK_SMALL";Nb.Ie=a.xi.small_glow_mask_width;var mc=l("COLOR","u_color",1,.5,.5,!0,!0);mc.aa=K.T;mc.ba=K.T;C.Y(g,Nb);C.I(g,cb,Nb,mc);var Pc=m.Hc("X_GLOW_BLUR");Pc.Ab="GLOW_MASK_LARGE";Pc.Ie=a.xi.large_glow_mask_width;var ad=l("COLOR","u_color",1,.5,.5,!0,!0);ad.aa=K.T;ad.ba=K.T;C.Y(g,Pc);C.I(g,Nb,Pc,ad);var kd=m.Hc("Y_GLOW_BLUR");kd.Ab="GLOW_MASK_LARGE";kd.Ie=a.xi.large_glow_mask_width;var ld=l("COLOR","u_color",1,.25,.25,!0,!0);ld.aa=K.T;
ld.ba=K.T;C.Y(g,kd);C.I(g,Pc,kd,ld);var gd=M.Mc(ia,!0);b.ja.push(gd);var Hc=m.tP(gd,a);C.Y(g,Hc);var xb=l("COLOR","u_src_color",1,1,1,!0,!0);xb.aa=K.T;xb.ba=K.T;if(a.Cv)if(Aa){var xc=m.ar();C.Y(g,xc);C.I(g,eb,xc,Ib);C.I(g,eb,xc,Db);C.I(g,xc,Hc,xb)}else C.I(g,eb,Hc,xb);else C.I(g,Aa?Ab:Wa,Hc,xb);var nc=l("COLOR","u_glow_mask_small",1,.5,.5,!0,!0);nc.aa=K.T;nc.ba=K.T;C.I(g,Nb,Hc,nc);var Ic=l("COLOR","u_glow_mask_large",1,.25,.25,!0,!0);Ic.aa=K.T;Ic.ba=K.T;C.I(g,kd,Hc,Ic);r=[Hc];p=[]}a.Cv||(eb=k(m.cd),
p.push(eb),r=p,p=[]);if(S.debug_view){Ha=M.Mc(ia,!0);b.ja.push(Ha);var yb=m.rP(Ha);p.push(yb);C.Y(g,yb);C.I(g,r[0],yb,Za);C.I(g,r[0],yb,za);La&&(C.I(g,La,yb,Sa),C.I(g,La,yb,Ja));J.XU(yb);r=p;p=[]}if(Aa){var Eb=m.ar();C.Y(g,Eb);p.push(Eb);C.I(g,r[0],Eb,Ib);C.I(g,r[0],Eb,Db);r=p;p=[]}var tb=r.slice(0);if(!ra&&a.JM){Ha=M.Mc(ia,!0);b.ja.push(Ha);var nb=m.mP(Ha);C.Y(g,nb);C.I(g,r[0],nb,Aa?fa:za)}if(ta&&L&&!ra){var Jb=T.al,md=T.intensity,Qc=T.wl,gb=r[0],Rc=H?!0:!1,bc=l("DEPTH","u_input",1,1,1,!0,!0),Jc=
l("COLOR","u_input",1,.25,.25,!0,!0);Jc.aa=K.T;Jc.ba=K.T;var cc=Jb/Qc,bd=M.Mc(ia,!0);b.ja.push(bd);var Tb=m.Jz(bd,Rc,Jb,!0,cc,E,Qc);C.Y(g,Tb);C.I(g,gb,Tb,bc);var cc=Jb/Qc*.5,Ob=M.Mc(ia,!0);b.ja.push(Ob);var zb=m.Jz(Ob,Rc,Jb,!1,cc,E,Qc);C.Y(g,zb);C.I(g,Tb,zb,Jc);var cc=Jb/Qc*.25,yc=M.Mc(ia,!0);b.ja.push(yc);var lb=m.Jz(yc,Rc,Jb,!1,cc,E,Qc);C.Y(g,lb);C.I(g,zb,lb,Jc);var Kc=m.uP(md,E);p.push(Kc);C.Y(g,Kc);var oc=l("COLOR","u_main",1,1,1,!0,!0);oc.aa=K.T;oc.ba=K.T;C.I(g,gb,Kc,oc);var Sc=l("COLOR","u_god_rays",
1,1,1,!0,!0);Sc.aa=K.T;Sc.ba=K.T;C.I(g,lb,Kc,Sc);r=p;p=[]}if(U&&!ra){var gb=r[0],Fb=m.xP();C.Y(g,Fb);oc=l("COLOR","u_input",1,1,1,!0,!0);oc.aa=K.T;oc.ba=K.T;C.I(g,gb,Fb,oc);var Kb=U.key,zc=U.edge_lum,pc=M.Mc(ia,!0);b.ja.push(pc);var qb=m.yP(Kb,zc,E,pc);C.Y(g,qb);var Pb=l("COLOR","u_luminance",1,.25,.25,!0,!0);Pb.aa=K.T;Pb.ba=K.T;if(U.adaptive){var ub=m.nP();C.Y(g,ub);ub.H.width=1;ub.H.height=1;var Bb=l("COLOR","u_input",1,.25,.25,!0,!0);Bb.ne=!0;Bb.aa=K.$i;Bb.ba=K.T;if(S.gb)Pb.ne=!0,Pb.aa=K.$i,C.I(g,
Fb,ub,Bb);else{var Ta=m.dP(),qc=l("COLOR","u_color",1,.25,.25,!0,!0);C.Y(g,Ta);C.I(g,Fb,Ta,qc);C.I(g,Ta,ub,Bb)}C.I(g,ub,qb,l("COLOR","u_average_lum",1,1,1,!1,!1));qb.Wl=!0}else qb.Wl=!1,qb.average_luminance=U.average_luminance;C.I(g,gb,qb,l("COLOR","u_main",1,1,1,!0,!0));C.I(g,Fb,qb,Pb);for(var Qb=qb,dc=1,db=[],qa=0;5>qa;qa++)cb=m.Hc("X_BLOOM_BLUR"),cb.Ie=a.xi.small_glow_mask_width,lc=l("COLOR","u_color",1,dc,dc,!0,!0),lc.aa=K.T,lc.ba=K.T,C.Y(g,cb),C.I(g,Qb,cb,lc),dc/=2,Nb=m.Hc("Y_BLOOM_BLUR"),Nb.Ie=
a.xi.small_glow_mask_width,mc=l("COLOR","u_color",1,dc,dc,!0,!0),mc.aa=K.T,mc.ba=K.T,C.Y(g,Nb),C.I(g,cb,Nb,mc),Qb=Nb,Nb.Tn=dc,cb.Tn=dc,db.push(Nb,dc);var Ub=m.oP(U.blur);C.Y(g,Ub);for(qa=0;qa<db.length;qa+=2){var Nb=db[qa],Ac=db[qa+1],nc=l("COLOR","u_bloom_level_"+(qa/2).toString(),1,Ac,Ac,!0,!0);nc.aa=K.T;nc.ba=K.T;C.I(g,Nb,Ub,nc)}C.I(g,gb,Ub,l("COLOR","u_main",1,1,1,!0,!0));p.push(Ub);r=p;p=[]}if(Fa&&L&&!ra){var gb=r[0],hb=M.Mc(ia,!0);b.ja.push(hb);var qd=S.uJ&&S.HE,Lc=d.dof_bokeh&&qd;if(Lc){var ec=
K.se,Rb=l("COLOR","u_color",1,1,1,!0,!0);Rb.aa=ec;Rb.ba=ec;var Tc=l("DEPTH","u_depth",1,1,1,!0,!0),Uc=l("COLOR","u_color",1,.5,.5,!0,!0);Uc.qr=!0;Uc.aa=K.se;Uc.ba=K.se;var Mc=l("COLOR","u_color",1,.5,.5,!0,!0);Mc.qr=!0;Mc.aa=K.se;Mc.ba=K.se;var Nc=l("COLOR","u_blurred1",1,.5,.5,!0,!0);Nc.qr=!0;Nc.aa=ec;Nc.ba=ec;var Bc=l("COLOR","u_blurred2",1,.5,.5,!0,!0);Bc.qr=!0;Bc.aa=ec;Bc.ba=ec;var zd=tb[0];if(d.Kd){var ob=M.Mc(ia,!0);b.ja.push(ob);var Vc=m.Hz(ob,"COC_FOREGROUND");ob.dof_distance=d.dof_distance;
ob.dof_object=d.dof_object;ob.dof_front_start=d.dof_front_start;ob.dof_front_end=d.dof_front_end;ob.dof_rear_start=d.dof_rear_start;ob.dof_rear_end=d.dof_rear_end;ob.dof_power=d.dof_power;ob.dof_bokeh=d.dof_bokeh;ob.dof_bokeh_intensity=d.dof_bokeh_intensity;ob.Kd=d.Kd;ob.dof_on=!0;C.Y(g,Vc);C.I(g,gb,Vc,Rb);C.I(g,zd,Vc,Tc);var cd=m.Hc("X_ALPHA_BLUR");C.Y(g,cd);C.I(g,Vc,cd,Uc);var rd=m.Hc("Y_ALPHA_BLUR");C.Y(g,rd);C.I(g,cd,rd,Mc);var Ma=M.Mc(ia,!0),fb=m.Hz(Ma,"COC_COMBINE");b.ja.push(Ma);Ma.dof_distance=
d.dof_distance;Ma.dof_object=d.dof_object;Ma.dof_front_start=d.dof_front_start;Ma.dof_front_end=d.dof_front_end;Ma.dof_rear_start=d.dof_rear_start;Ma.dof_rear_end=d.dof_rear_end;Ma.dof_power=d.dof_power;Ma.dof_bokeh=d.dof_bokeh;Ma.dof_bokeh_intensity=d.dof_bokeh_intensity;Ma.Kd=d.Kd;Ma.dof_on=!0;C.Y(g,fb);C.I(g,gb,fb,Rb);C.I(g,zd,fb,Tc);C.I(g,rd,fb,l("COLOR","u_coc_fg",1,.5,.5,!0,!0))}else Ma=M.Mc(ia,!0),b.ja.push(Ma),fb=m.Hz(Ma,"COC_ALL"),Ma.dof_distance=d.dof_distance,Ma.dof_object=d.dof_object,
Ma.dof_front_start=d.dof_front_start,Ma.dof_front_end=d.dof_front_end,Ma.dof_rear_start=d.dof_rear_start,Ma.dof_rear_end=d.dof_rear_end,Ma.dof_power=d.dof_power,Ma.dof_bokeh=d.dof_bokeh,Ma.dof_bokeh_intensity=d.dof_bokeh_intensity,Ma.Kd=d.Kd,Ma.dof_on=!0,C.Y(g,fb),C.I(g,gb,fb,Rb),C.I(g,zd,fb,Tc);var Vb=m.Hc("X_DOF_BLUR");Vb.H.dof_bokeh_intensity=d.dof_bokeh_intensity;C.Y(g,Vb);C.I(g,fb,Vb,Uc);var Wc=m.Hc("Y_DOF_BLUR");Wc.H.dof_bokeh_intensity=d.dof_bokeh_intensity;C.Y(g,Wc);C.I(g,Vb,Wc,Mc);var fc=
m.Hc("Y_DOF_BLUR");fc.H.dof_bokeh_intensity=d.dof_bokeh_intensity;C.Y(g,fc);C.I(g,Vb,fc,Mc);var Cc=m.pF(hb,Lc);hb.dof_distance=d.dof_distance;hb.dof_object=d.dof_object;hb.dof_front_start=d.dof_front_start;hb.dof_front_end=d.dof_front_end;hb.dof_rear_start=d.dof_rear_start;hb.dof_rear_end=d.dof_rear_end;hb.dof_power=d.dof_power;hb.dof_bokeh=d.dof_bokeh;hb.dof_bokeh_intensity=d.dof_bokeh_intensity;hb.Kd=d.Kd;hb.dof_on=!0;p.push(Cc);C.Y(g,Cc);C.I(g,gb,Cc,l("COLOR","u_sharp",1,1,1,!0,!0));C.I(g,Wc,Cc,
Nc);C.I(g,fc,Cc,Bc)}else{var Vd=l("COLOR","u_color",1,1,1,!0,!0);Vd.aa=K.T;Vd.ba=K.T;var Nd=l("COLOR","u_color",1,1,1,!0,!0);Nd.aa=K.T;Nd.ba=K.T;Vb=m.Hc("X_BLUR");C.Y(g,Vb);C.I(g,gb,Vb,Vd);var Oc=m.Hc("Y_BLUR");C.Y(g,Oc);C.I(g,Vb,Oc,Nd);var Od=tb[0],Cc=m.pF(hb,Lc);hb.dof_distance=d.dof_distance;hb.dof_object=d.dof_object;hb.dof_front_start=d.dof_front_start;hb.dof_front_end=d.dof_front_end;hb.dof_rear_start=d.dof_rear_start;hb.dof_rear_end=d.dof_rear_end;hb.dof_power=d.dof_power;hb.dof_bokeh=d.dof_bokeh;
hb.dof_bokeh_intensity=d.dof_bokeh_intensity;hb.Kd=d.Kd;hb.dof_on=!0;p.push(Cc);C.Y(g,Cc);C.I(g,gb,Cc,l("COLOR","u_sharp",1,1,1,!0,!0));C.I(g,Oc,Cc,l("COLOR","u_blurred",1,1,1,!0,!0));C.I(g,Od,Cc,l("DEPTH","u_depth",1,1,1,!0,!0))}r=p;p=[]}if(a.$h){var rc=k(m.Gg);p.push(rc);r=p;p=[]}if(X&&!ra){var de=r[0],sd=m.zP(Na.mb_decay_threshold,Na.mb_factor);p.push(sd);C.Y(g,sd);C.I(g,de,sd,l("COLOR","u_mb_tex_curr",1,1,1,!0,!0));sd.fb.push(l("COLOR","u_mb_tex_accum",1,1,1,!0,!0));r=p;p=[]}if(!ra&&a.outline){var gb=
r[0],$d=M.Mc(ia,!0);b.ja.push($d);var Yb=m.BP($d,E);C.Y(g,Yb);var dd=m.Hc("X_EXTEND"),ae=l("COLOR","u_color",1,1,1,!0,!0),Wd=l("COLOR","u_outline_mask",1,1,1,!0,!0);Wd.aa=K.T;Wd.ba=K.T;dd.Om=!0;C.Y(g,dd);C.I(g,Yb,dd,ae);var td=l("COLOR","u_color",1,.5,.5,!0,!0);td.aa=K.T;td.ba=K.T;var Dc=m.Hc("Y_EXTEND");Dc.Om=!0;C.Y(g,Dc);C.I(g,dd,Dc,td);Vb=m.Hc("X_BLUR");Vb.Om=!0;C.Y(g,Vb);C.I(g,Dc,Vb,td);var Ad=l("COLOR","u_color",1,.25,.25,!0,!0);Ad.aa=K.T;Ad.ba=K.T;var Bd=l("COLOR","u_outline_mask_blurred",1,
.25,.25,!0,!0);Bd.aa=K.T;Bd.ba=K.T;Oc=m.Hc("Y_BLUR");Oc.Om=!0;C.Y(g,Oc);C.I(g,Vb,Oc,Ad);var ed=m.AP(Ea);C.Y(g,ed);var Cd=l("COLOR","u_outline_src",1,1,1,!0,!0);Cd.aa=K.T;Cd.ba=K.T;C.I(g,gb,ed,Cd);C.I(g,Yb,ed,Wd);C.I(g,Oc,ed,Bd);p.push(ed);r=p;p=[]}e(g,L);if((a.anaglyph_use||a.Qv||a.Hs)&&!ra){var Pd=z(g,a,b,r[0]);p.push(Pd);r=p;p=[]}if(sa&&!ra){var gb=r[0],Dd=m.qP(oa.brightness,oa.contrast,oa.exposure,oa.saturation),ud=l("COLOR","u_color",1,1,1,!0,!0);ud.aa=K.T;ud.ba=K.T;(a.anaglyph_use||a.Qv||a.Hs)&&
!ra&&(ud.Hl=!0);C.Y(g,Dd);C.I(g,gb,Dd,ud);p.push(Dd);r=p;p=[]}if(!r[0].bc||r[0].type==m.ai||r[0].type==m.yt){var Ed=m.Hc("NONE");C.Y(g,Ed);var Fd=l("COLOR","u_color",1,1,1,!0,!0);Fd.aa=K.T;Fd.ba=K.T;C.I(g,r[0],Ed,Fd);p.push(Ed);r=p;p=[]}if(va){gb=r[0];if(S.smaa){var Gd=l("COLOR","u_color",1,1,1,!0,!1);Gd.aa=K.T;Gd.ba=K.T;var sc=m.Kz(m.zt,a);C.Y(g,sc);C.I(g,gb,sc,Gd);var nd=m.Kz(m.mq,a);C.Y(g,nd);C.I(g,sc,nd,Gd);var Hd=l("COLOR","u_search_tex",1,1,1,!1,!1),tc=l("COLOR","u_area_tex",1,1,1,!1,!1);Hd.aa=
K.T;Hd.ba=K.T;tc.aa=K.T;tc.ba=K.T;nd.fb.push(Hd);nd.fb.push(tc);var pb=m.Kz(m.At,a);C.Y(g,pb);C.I(g,gb,pb,Gd);var Qd=l("COLOR","u_blend",1,1,1,!0,!1);Qd.aa=K.T;Qd.ba=K.T;C.I(g,nd,pb,Qd);p.push(pb)}else{var Id=m.lP(a);C.Y(g,Id);var hd=l("COLOR","u_color",1,1,1,!0,!1);hd.aa=K.T;hd.ba=K.T;(a.anaglyph_use||a.Qv||a.Hs)&&!ra&&(hd.Hl=!0);C.I(g,gb,Id,hd);p.push(Id)}r=p;p=[]}p.push(r[0]);vc&&(wc?p.push(wc):p.push(vc));nb&&p.push(nb);pa=1;if(a.zx.RB){var be=a.zx,Rd=a.Ql,vd=Rd.mn,pa=vd?vd.vJ:pa,Zb=m.GP(Rd,E,
be,pa);C.Y(g,Zb);p.push(Zb);x.length&&(C.I(g,Zb,Wa,x[0]),eb&&C.I(g,Zb,eb,x[0]),kb&&C.I(g,Zb,kb,x[0]),rc&&C.I(g,Zb,rc,x[0]));if(N.bS)if(S.gb){var fd=m.wP(E,pa);C.Y(g,fd);var gc=l("CUBEMAP","u_sky_reflection",pa,1,1,!1);gc.ne=!0;gc.aa=K.$i;gc.ba=K.T;C.I(g,Zb,fd,gc);var id=l("CUBEMAP","u_irradiance",a.ri,1,1,!1);id.ne=!1;id.aa=K.T;id.ba=K.T;C.I(g,fd,Wa,id);eb&&C.I(g,fd,eb,id);kb&&C.I(g,fd,kb,id);rc&&C.I(g,fd,rc,id);p.push(fd);var jd=m.DP(E);C.Y(g,jd);C.I(g,Zb,jd,gc);var vb=l("CUBEMAP","u_cube_r_convolution",
128,1,1,!1);vb.ne=!1;vb.aa=K.$i;vb.ba=K.T;C.I(g,jd,Wa,vb);eb&&C.I(g,jd,eb,vb);kb&&C.I(g,jd,kb,vb);rc&&C.I(g,jd,rc,vb);var wd=m.pP();C.Y(g,wd);var Ec=l("COLOR","u_brdf",512,1,1,!1);Ec.aa=K.T;Ec.ba=K.T;C.I(g,wd,Wa,Ec);eb&&C.I(g,wd,eb,Ec);kb&&C.I(g,wd,kb,Ec);rc&&C.I(g,wd,rc,Ec)}else gc=l("CUBEMAP","u_sky_reflection",pa,1,1,!1),gc.ne=!0,gc.aa=K.$i,gc.ba=K.T,C.I(g,Zb,Wa,gc),eb&&C.I(g,Zb,eb,gc),kb&&C.I(g,Zb,kb,gc),rc&&C.I(g,Zb,rc,gc)}var Xc=m.qF();C.Y(g,Xc);for(qa=0;qa<p.length;qa++){var od=p[qa];switch(od.type){case m.Ne:case m.ph:C.I(g,
od,Xc,l("COLOR","NONE",1,1,1,uc,!1));C.I(g,od,Xc,l("DEPTH","NONE",1,1,1,uc,!1));break;case m.re:C.I(g,od,Xc,l("CUBEMAP","u_sky",pa,1,1,!1));break;case m.tk:var xd=l("CUBEMAP","u_irradiance",pa,1,1,!1);xd.ne=!0;xd.aa=K.se;xd.ba=K.se;C.I(g,fd,Xc,xd);break;case m.Gn:C.I(g,od,Xc,l("COLOR","NONE",1,1,1,!0,!1));break;default:if(ra){var pd=h[0],yd=l("COLOR","OFFSCREEN",1,1,1,!0,!0);yd.Oa=pd;C.I(g,p[qa],Xc,yd);for(ka=1;ka<h.length;ka++){var Xd=h[ka],Jd=m.Hc("NONE");C.Y(g,Jd);C.I(g,p[qa],Jd,l("COLOR","SCALE",
1,1,1,!0,!0));var Kd=Xd.$j/pd.$j,yd=l("COLOR","OFFSCREEN",1,Kd,Kd,!0,!0);yd.Oa=Xd;C.I(g,Jd,Xc,yd)}}else C.I(g,p[qa],Xc,l("SCREEN","NONE",1,1,1,!0,!1))}}Ab&&!f(g,Ab).length&&(C.If(g,C.Pj(g,Ab)),C.xz(g));e(g,L);c(g,L);if(O.enabled){var Sd=q(g);Sd&&G(g,Sd)}n(g);t(g);ya&&C.fa(g,function(a,b){if(b.type==m.Yf||b.type==m.cd||b.type==m.Gg){for(var c=0,d=w(g,b),e=0,h=0;h<d.length;h++){var f=d[h];f.type==m.xd&&(e++,b.Rj=b.Rj||[],b.Rj[0<f.zg?f.zg:c]=f.H.Bb,c++)}b.Sp&&b.Rp||(S.rw?b.kt=new Float32Array(9*e):(b.Sp=
new Float32Array(4*e),b.Rp=new Float32Array(4*e)))}});if(!N.AA)for(qa=0;qa<D.length;qa++)D[qa].active=!1;return g};a.wT=function(a,b,c){var d=[];C.fa(a,function(b,c){if(-1==sa.indexOf(c.type)&&c.fb.length&&r(a,c,m.Hg))for(var e=0;e<c.fb.length;e++){var h=c.fb[e];-1==d.indexOf(h)&&d.push(h)}});C.oh(a,function(b,c,e){b=C.$a(a,b);c=C.$a(a,c);-1==sa.indexOf(b.type)&&r(a,c,m.Hg)&&-1==d.indexOf(e)&&d.push(e)});for(var e=0;e<d.length;e++)d[e].Yj*=b,d[e].Zj*=c};a.Sd=function(a,b,c){var d=a.Ie;a.Ss[0]=b*a.Gb[0]*
d;a.Ss[1]=c*a.Gb[1]*d};a.qd=function(a,b){a.Ie=b};a.aP=function(){var a=C.create(),b=m.CP(),c=M.Gc(M.rc);c.width=512;c.height=512;b.H=c;C.Y(a,b);b.fb.push(l("COLOR","u_color",512,1,1,!1,!1));c=m.qF();C.Y(a,c);C.I(a,b,c,l("COLOR","NONE",512,1,1,!1,!1));n(a);t(a);return a};a.CQ=function(a){var b=null;C.fa(a,function(a,c){return c.H&&null===c.H.We?(b=c,!0):!1});return b};a.Tc=function(a,b,c){a=w(a,b);for(b=0;b<a.length;b++)if(a[b].type==c)return a[b];return null};a.vv=function(a,b,c){a=w(a,b);b=[];for(var d=
0;d<a.length;d++)a[d].type==c&&b.push(a[d]);return b};a.HZ=r;a.JZ=E;a.DR=w;a.JR=f;a.Rb=function(a,b){var c=null;C.fa(a,function(a,d){return d.type==b?(c=d,!0):!1});return c};a.SP=function(a){var b="digraph scenegraph {\n",b=b+"    ",b=b+'size="11.7,16.5";\n',b=b+"    ",b=b+'ratio="fill";\n',b=b+"    ",b=b+'node [shape=box margin="0.25,0.055"];\n',c=y(a);C.fa(a,function(a,d){var e=b+="    ",h=m.Sx(d);if(d.H){for(var h=h+"\\n",f=0;f<c.length;f+=2){var g=d.H.Qb;c[f]==g&&(h=K.Fo(g)?h+("CR"+c[f+1]+" "):
h+("C"+c[f+1]+" "))}for(f=0;f<c.length;f+=2)g=d.H.wf,c[f]==g&&(h=K.Fo(g)?h+("DR"+c[f+1]):h+("D"+c[f+1]))}d.fb.length&&(h+="\\n-----\\n");for(f=0;f<d.fb.length;f++)h+=D(d.fb[f],c);b=e+(String(a)+' [label="'+h+'" color="black" style="'+((d.type==m.uk?"dotted":d.enqueue?"solid":"dashed")+",bold")+'"];\n')});C.oh(a,function(a,d,e){b+="    ";b+=String(a)+" -> "+String(d)+' [label="'+D(e,c)+'" style="'+(e.active?"solid":"dotted")+'"];\n'});return b+="}"};a.cP=function(a){a=C.iW(a);for(var b=[],c=0;c<a.length;c++){var d=
a[c];d.enqueue&&b.push(d)}return b};a.mm=function(a,b,c){var d=C.Pj(a,b);C.jk(a,d,function(a,b,d){if(d.active){switch(d.from){case "COLOR":case "CUBEMAP":var e=b.H.Qb;break;case "DEPTH":e=b.H.wf;break;case "SCREEN":e=null;break;case m.wd:return;default:R.K("Wrong slink")}switch(d.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "u_cube_reflection":case "u_plane_reflection":break;default:e||R.K("Connection of SCREEN is forbidden"),
e.gf&&R.K("Batch texture can't use renderbuffer"),X.PE(c.zb,d.to)&&N.vh(c,e,d.to)}}});for(a=0;a<b.fb.length;a++){var d=b.fb[a],e=b.nh[a];switch(d.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":break;default:e.gf&&R.K("Batch texture can't use renderbuffer"),X.PE(c.zb,d.to)&&N.vh(c,e,d.to)}}}};b4w.module.__subscene=function(a,u){function e(a,b){a.Xo=b;a.Vr=new Float32Array(3*b);a.Sm=new Float32Array(4*b);a.Rm=new Float32Array(4*b)}function c(a){a={type:a,Ab:"",ym:!1,mb:!1,Rw:!1,uq:!1,Qo:!1,Gk:0,vf:0,Hk:[],debug_view_mode:0,debug_colors_seed:0,Hu:1,ir:!1,time:0,H:null,Ng:null,qm:[],Za:[],fb:[],nh:[],Yh:new Float32Array(3),kd:new Float32Array(3),Ld:new Float32Array(4),Af:new Float32Array(4),uf:new Float32Array(16),qp:0,kg:0,Xo:0,Vr:null,Sm:null,Rm:null,gH:null,Md:new Float32Array(3),Xd:new Float32Array(3),
rp:new Float32Array(4),Ux:new Float32Array(3),Tx:new Float32Array([0,0,1]),Vx:new Float32Array(4),pp:new Float32Array(3),yx:"",eu:0,bn:0,jr:0,Om:!1,Nh:new Float32Array(3),Sf:!1,Hq:0,Xh:new Float32Array(4),Wi:0,gg:!1,mj:0,iu:new Float32Array(2),lj:0,procedural_skydome:!1,use_as_environment_lighting:!1,mie_brightness:0,rayleigh_brightness:0,spot_brightness:0,mie_strength:0,rayleigh_strength:0,scatter_strength:0,mie_collection_power:0,rayleigh_collection_power:0,mie_distribution:0,vl:new Float32Array(3),
wp:!1,sp:!1,tp:0,yp:0,xp:0,vp:0,pn:0,ssao_only:!1,ssao_white:!1,brightness:0,contrast:0,exposure:0,saturation:0,god_rays_intensity:0,al:0,fp:0,wl:0,br:0,self_shadow_polygon_offset:0,self_shadow_normal_offset:0,Sp:null,Rp:null,kt:null,Rj:null,bc:!1,lv:"",Vn:0,Sn:0,Un:0,Wl:!0,average_luminance:0,Cq:0,pr:0,mb_decay_threshold:0,mb_factor:0,zw:0,ps:"",dof_bokeh:!1,pu:"",RA:new Float32Array(2),gw:0,au:2,Tn:.5,small_glow_mask_width:0,large_glow_mask_width:0,small_glow_mask_coeff:0,large_glow_mask_coeff:0,
Ss:new Float32Array(2),Gb:new Float32Array(2),uj:new Float32Array(4),chromatic_aberration_coefs:new Float32Array(4),enable_hmd_stereo:!1,zg:0,as:!0,xx:!1,Fx:!1,Bx:!1,Cx:!1,Ex:!1,Dx:!1,wx:"",tn:!1,un:!1,vn:!1,$b:!0,enqueue:!0,nb:!0,ub:!0,Sc:!0,Na:!0,Ie:1};a.Gb[0]=1;a.Gb[1]=1;a.uj[2]=.5;a.uj[3]=.5;a.pn=8;return a}function b(a,b){return a==b?0:a>b?1:-1}function n(a,c){return b(a.mf,c.mf)||b(a.Fj,c.Fj)||b(a.od,c.od)||b(a.zb.yG,c.zb.yG)||b(a.qk,c.qk)}var g=u("__camera"),p=u("__config"),k=u("__util"),x=
u("__boundings"),v=p.Xc;a.Hb=0;a.cd=1;a.Gg=2;a.Zd=3;a.wd=4;a.Xf=5;a.jf=6;a.Yd=7;a.xd=8;a.Yf=9;a.Zi=10;a.gc=11;a.iq=13;a.yt=14;a.Ne=15;a.ph=16;a.qh=17;a.Gn=18;a.jD=19;a.Bt=20;a.Vy=21;a.dD=22;a.mq=23;a.zt=24;a.Ty=25;a.At=26;a.Iy=27;a.ai=28;a.Hy=29;a.hq=30;a.rh=31;a.Jn=32;a.In=33;a.vt=34;a.re=35;a.Jy=36;a.Hg=37;a.LUMINANCE=38;a.gD=39;a.wt=40;a.bq=41;a.yM=42;a.uk=43;a.kq=44;a.HD=45;a.tk=46;a.Kn=47;a.hD=48;a.EP=function(a,b,k,n){var d=c(8);d.br=a;d.self_shadow_polygon_offset=k.self_shadow_polygon_offset;
d.zg=b;switch(k.Ih[b]){case "SPOT":case "POINT":d.H=g.Gc(g.Kc);g.BI(d.H,k.dJ[b],k.Oq[b],k.Nq[b]);break;default:d.H=g.Gc(g.aj)}e(d,n);return d};a.uO=function(a){var b=c(a.type);b.Ab=a.Ab;b.ym=a.ym;b.$b=a.$b;b.enqueue=a.enqueue;b.nb=a.nb;b.ub=a.ub;b.Sc=a.Sc;b.mb=a.mb;b.Rw=a.Rw;b.uq=a.uq;b.Qo=a.Qo;b.Na=a.Na;b.Gk=0;b.vf=0;b.Hk=[];b.debug_view_mode=a.debug_view_mode;b.debug_colors_seed=a.debug_colors_seed;b.Hu=a.Hu;b.ir=a.ir;b.time=a.time;b.H=g.Mc(a.H,!0);b.Ng=k.W(a.Ng);b.qm=k.W(a.qm);b.Za=k.W(a.Za);b.fb=
k.W(a.fb);b.nh=k.W(a.nh);b.Yh.set(a.Yh);b.kd.set(a.kd);b.Ld.set(a.Ld);b.Af.set(a.Af);b.uf.set(a.uf);b.qp=a.qp;b.kg=a.kg;b.Xo=a.Xo;b.Vr=k.W(a.Vr);b.Sm=k.W(a.Sm);b.Rm=k.W(a.Rm);b.gH=k.W(a.gH);b.Md.set(a.Md);b.Xd.set(a.Xd);b.rp.set(a.rp);b.Ux.set(a.Ux);b.Tx.set(a.Tx);b.Vx.set(a.Vx);b.pp.set(a.pp);b.yx=a.yx;b.eu=a.eu;b.bn=a.bn;b.jr=a.jr;b.Om=a.Om;b.Nh.set(a.Nh);b.Sf=a.Sf;b.Hq=a.Hq;b.Xh.set(a.Xh);b.Wi=a.Wi;b.gg=a.gg;b.mj=a.mj;b.iu.set(a.iu);b.lj=a.lj;b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=
a.use_as_environment_lighting;b.mie_brightness=a.mie_brightness;b.rayleigh_brightness=a.rayleigh_brightness;b.spot_brightness=a.spot_brightness;b.mie_strength=a.mie_strength;b.rayleigh_strength=a.rayleigh_strength;b.scatter_strength=a.scatter_strength;b.mie_collection_power=a.mie_collection_power;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_distribution=a.mie_distribution;b.vl.set(a.vl);b.wp=a.wp;b.sp=a.sp;b.tp=a.tp;b.yp=a.yp;b.xp=a.xp;b.vp=a.vp;b.pn=a.pn;b.ssao_only=a.ssao_only;
b.ssao_white=a.ssao_white;b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;b.god_rays_intensity=a.god_rays_intensity;b.al=a.al;b.fp=a.fp;b.wl=a.wl;b.br=a.br;b.self_shadow_polygon_offset=a.self_shadow_polygon_offset;b.self_shadow_normal_offset=a.self_shadow_normal_offset;b.Sp=k.W(a.Sp);b.Rp=k.W(a.Rp);b.kt=k.W(a.kt);b.Rj=k.W(a.Rj);b.bc=a.bc;b.lv=a.lv;b.Vn=a.Vn;b.Sn=a.Sn;b.Un=a.Un;b.Wl=a.Wl;b.average_luminance=a.average_luminance;b.Cq=a.Cq;b.pr=a.pr;b.mb_decay_threshold=
a.mb_decay_threshold;b.mb_factor=a.mb_factor;b.zw=a.zw;b.ps=a.ps;b.pu=a.pu;b.dof_bokeh=a.dof_bokeh;b.RA.set(a.RA);b.gw=a.gw;b.au=a.au;b.Tn=a.Tn;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.Ie=a.Ie;b.Ss.set(a.Ss);b.Gb.set(a.Gb);b.uj.set(a.uj);b.chromatic_aberration_coefs.set(a.chromatic_aberration_coefs);b.enable_hmd_stereo=a.enable_hmd_stereo;b.zg=a.zg;
b.as=a.as;b.xx=a.xx;b.Fx=a.Fx;b.Bx=a.Bx;b.Cx=a.Cx;b.Ex=a.Ex;b.Dx=a.Dx;b.wx=a.wx;b.tn=a.tn;b.un=a.un;b.vn=a.vn;return b};a.vP=function(){var a=c(10);a.H=g.Gc(g.th);return a};a.Hc=function(a){var b=c(11);b.nb=!1;b.ub=!1;b.Sc=!1;b.bc=!0;b.H=g.Gc(g.rc);b.ps=a;switch(a){case "NONE":b.Gb[0]=1;b.Gb[1]=1;break;case "GRAYSCALE":b.Gb[0]=1;b.Gb[1]=1;break;case "X_BLUR":b.Gb[0]=1;b.Gb[1]=0;break;case "Y_BLUR":b.Gb[0]=0;b.Gb[1]=1;break;case "X_GLOW_BLUR":b.Gb[0]=1;b.Gb[1]=0;break;case "Y_GLOW_BLUR":b.Gb[0]=0;
b.Gb[1]=1;break;case "X_BLOOM_BLUR":b.Gb[0]=1;b.Gb[1]=0;break;case "Y_BLOOM_BLUR":b.Gb[0]=0;b.Gb[1]=1;break;case "X_DOF_BLUR":b.Gb[0]=1;b.Gb[1]=1;break;case "Y_DOF_BLUR":b.Gb[0]=1;b.Gb[1]=1;break;case "X_ALPHA_BLUR":b.Gb[0]=1;b.Gb[1]=0;b.Ie=3;break;case "Y_ALPHA_BLUR":b.Gb[0]=0;b.Gb[1]=1;b.Ie=3;break;case "X_EXTEND":b.Gb[0]=1;b.Gb[1]=0;break;case "Y_EXTEND":b.Gb[0]=0;b.Gb[1]=1;break;default:k.K("Wrong postprocessing effect: "+a)}return b};a.tP=function(a,b){var d=c(13);d.nb=!1;d.ub=!1;d.Sc=!1;d.small_glow_mask_coeff=
b.xi.small_glow_mask_coeff;d.large_glow_mask_coeff=b.xi.large_glow_mask_coeff;d.small_glow_mask_width=b.xi.small_glow_mask_width;d.large_glow_mask_width=b.xi.large_glow_mask_width;d.H=a;d.bc=!0;return d};a.pm=function(a,b,g,n,p,v,z,l,x){var d=c(a);0==a?(d.nb=!0,d.ub=g,d.mb=!1):1==a?(d.nb=!1,d.ub=!1,d.mb=!0):2==a?(d.nb=!1,d.ub=!0,d.mb=!0):3==a||4==a?(d.nb=!0,d.ub=!0,d.mb=!1):5==a||6==a?(d.nb=!1,d.ub=!1,d.mb=!0):7==a?(d.nb=!0,d.ub=!1,d.mb=!0):k.K("wrong main subscene type");d.mb&&l&&(d.self_shadow_normal_offset=
l.self_shadow_normal_offset);d.H=b;if(a=z.mn)d.rp.set([a.tE,a.DG,a.vK,a.uK]),d.pp.set(a.color),d.qp=a.Ia;d.Md.set(z.Md);d.Xd.set(z.Xd);d.kg=z.kg;d.Ld=v.Ld;d.Af=v.Af;n&&(n.Ld&&d.Xh.set(n.Ld),d.Wi=n.Wi,n.gg&&x&&(d.gg=!0,d.mj=n.RN,d.lj=n.QN,d.iu.set(n.SN)));e(d,p);return d};a.ar=function(){var a=c(14);a.bc=!0;a.H=g.Gc(g.rc);return a};a.oF=function(a,b,g){var d=c(15);b&&(d.type=16,d.nb=!1,d.ub=!0);d.enqueue=!1;d.H=a;e(d,g);return d};a.rP=function(a){var b=c(17);b.$b=!1;b.nb=!1;b.ub=!1;b.H=a;return b};
a.mP=function(a){var b=c(18);b.nb=!0;b.ub=!1;b.H=a;return b};a.FP=function(a,b){var d=c(9);d.H=a;e(d,b);return d};a.sP=function(a){var b=c(19);b.nb=!1;b.ub=!1;b.H=a;b.bc=!0;return b};a.HP=function(a,b,e){var d=c(20);d.nb=!1;d.ub=!1;d.Sc=!1;d.H=a;d.Ld=b.Ld;d.Xh.set(b.Ld);d.yp=e.radius_increase;d.wp=e.eS;d.xp=e.influence;d.vp=e.dist_factor;d.pn=e.KU;d.bc=!0;return d};a.IP=function(a,b){var d=c(21);d.nb=!1;d.ub=!1;d.Sc=!1;d.H=a;d.sp=b.yN;d.tp=b.blur_discard_value;d.bc=!0;return d};a.lP=function(a){var b=
c(22);b.nb=!1;b.ub=!1;b.Sc=!1;b.Ie=1/a.gp;b.lv=a.UD;b.H=g.Gc(g.rc);b.bc=!0;return b};a.Kz=function(a,b){var d=c(a);d.nb=23==a||24==a?!0:!1;d.ub=!1;d.Sc=!1;d.Ie=1/b.gp;d.H=g.Gc(g.rc);23==a&&(d.ES=new Float32Array(4));d.bc=!0;return d};a.qP=function(a,b,e,k){var d=c(27);d.nb=!1;d.ub=!1;d.Sc=!1;d.H=g.Gc(g.rc);d.brightness=a;d.contrast=b;d.exposure=e;d.saturation=k;d.bc=!0;return d};a.zP=function(a,b){var d=c(28);d.nb=!1;d.ub=!1;d.Sc=!1;d.H=g.Gc(g.rc);d.uq=!0;d.mb_decay_threshold=a;d.mb_factor=b;d.bc=
!0;return d};a.Hz=function(a,b){var d=c(29);d.nb=!1;d.ub=!1;d.Sc=!1;d.H=a;d.Ie=d.H.dof_power;d.pu=b;d.bc=!0;return d};a.pF=function(a,b){var d=c(30);d.nb=!1;d.ub=!1;d.Sc=!1;d.H=a;d.Ie=a.dof_power;d.dof_bokeh=b;d.bc=!0;return d};a.BP=function(a,b){var d=c(31);d.Sc=!1;d.H=a;e(d,b);return d};a.AP=function(a){var b=c(32);v.outlining_overview_mode?b.Nh.set(v.Nh):b.Nh.set(a.Nh);b.bn=a.bn;b.pr=5;b.Cq=3;b.Sc=!1;b.H=g.Gc(g.rc);b.bc=!0;return b};a.Jz=function(a,b,g,k,n,p,z){var d=c(33);d.nb=!1;d.ub=!1;d.Sc=
!1;d.Md=new Float32Array([1,1,1]);d.Xd=new Float32Array([1,1,1]);d.kg=1;d.Rw=k;d.Sf=b;d.fp=n;d.al=g;d.wl=z;d.H=a;e(d,p);return d};a.uP=function(a,b){var d=c(34);d.nb=!1;d.ub=!1;d.Sc=!1;d.H=g.Gc(g.rc);d.god_rays_intensity=a;e(d,b);d.bc=!0;return d};a.GP=function(a,b,n,q){var d=c(35);d.enqueue=!1;d.nb=!1;d.ub=!1;d.Sc=!1;var h=g.Gc(g.rc);h.width=q;h.height=q;d.H=h;d.Ng=k.fA();e(d,b);d.Md=new Float32Array([1,1,1]);d.Xd=new Float32Array([1,1,1]);d.kg=1;d.vl.set(n.vl);d.procedural_skydome=n.procedural_skydome;
d.use_as_environment_lighting=n.use_as_environment_lighting;d.rayleigh_brightness=n.rayleigh_brightness;d.mie_brightness=n.mie_brightness;d.spot_brightness=n.spot_brightness;d.scatter_strength=n.scatter_strength;d.rayleigh_strength=n.rayleigh_strength;d.mie_strength=n.mie_strength;d.rayleigh_collection_power=n.rayleigh_collection_power;d.mie_collection_power=n.mie_collection_power;d.mie_distribution=n.mie_distribution;if(a){d.Md.set(a.Md);d.Xd.set(a.Xd);d.kg=a.kg;if(b=a.mn)d.rp.set([b.tE,b.DG,b.vK,
b.uK]),d.pp.set(b.color),d.qp=b.Ia,d.xx=b.invert,d.Fx=b.$J,d.Bx=b.VJ,d.Cx=b.WJ,d.Ex=b.YJ,d.Dx=b.XJ,d.wx=b.uE;d.tn=a.tn;d.un=a.un;d.vn=a.vn;d.yx=a.he}return d};a.wP=function(a,b){var d=c(46);d.enqueue=!1;d.nb=!1;d.ub=!1;d.Sc=!1;var h=g.Gc(g.rc);h.width=b;h.height=b;d.H=h;d.Ng=k.fA();e(d,a);return d};a.DP=function(a){var b=c(47);b.enqueue=!1;b.nb=!1;b.ub=!1;b.Sc=!1;var h=g.Gc(g.rc);h.width=128;h.height=128;b.H=h;b.Ng=k.fA();e(b,a);return b};a.pP=function(){var a=c(48);a.enqueue=!1;a.nb=!1;a.ub=!1;a.Sc=
!1;var b=g.Gc(g.rc);b.width=512;b.height=512;a.H=b;return a};a.Iz=function(){var a=c(36);a.nb=!1;a.ub=!1;a.H=g.Gc(g.rc);a.bc=!0;return a};a.JP=function(a,b){var d=c(37);d.nb=!1;d.ub=!1;d.Ab=a?"HMD":b?"ANAGLYPH":"SIDEBYSIDE";d.H=g.Gc(g.rc);d.bc=!0;return d};a.xP=function(){var a=c(38);a.nb=!1;a.ub=!1;a.H=g.Gc(g.rc);a.bc=!0;return a};a.nP=function(){var a=c(39);a.nb=!1;a.ub=!1;a.H=g.Gc(g.rc);a.bc=!0;return a};a.dP=function(){var a=c(45);a.nb=!1;a.ub=!1;a.H=g.Gc(g.rc);a.bc=!0;return a};a.yP=function(a,
b,g,k){var d=c(40);d.nb=!1;d.ub=!1;d.Vn=a;d.Un=b;d.H=k;e(d,g);d.bc=!0;return d};a.oP=function(a){var b=c(41);b.nb=!1;b.ub=!1;b.H=g.Gc(g.rc);b.Sn=a;b.au=5;b.bc=!0;return b};a.$Y=function(a){var b=c(42);b.nb=!1;b.ub=!1;b.H=a;b.bc=!0;return b};a.qF=function(){var a=c(43);a.enqueue=!1;return a};a.CP=function(){var a=c(44);a.bc=!0;return a};a.Sx=function(a){switch(a.type){case 0:return"MAIN OPAQUE";case 1:return"MAIN BLEND";case 2:return"MAIN XRAY";case 3:return"MAIN PLANE REFLECT";case 4:return"MAIN CUBE REFLECT";
case 5:return"MAIN PLANE REFLECT BLEND";case 6:return"MAIN CUBE REFLECT BLEND";case 7:return"MAIN GLOW";case 8:return"SHADOW CAST";case 9:return"SHADOW RECEIVE";case 10:return"GRASS MAP";case 11:return"POSTPROCESSING ("+a.ps.replace(/_/g," ")+")";case 13:return"GLOW COMBINE";case 14:return"RESOLVE";case 15:return"COLOR PICKING";case 16:return"COLOR PICKING XRAY";case 17:return"DEBUG VIEW";case 18:return"ANCHOR VISIBILITY";case 19:return"DEPTH PACK";case 20:return"SSAO";case 21:return"SSAO BLUR";case 22:return"ANTIALIASING";
case 23:return"SMAA BLENDING WEIGHT CALCULATION";case 24:return"SMAA EDGE DETECTION";case 25:return"SMAA RESOLVE";case 26:return"SMAA NEIGHBORHOOD BLENDING";case 27:return"COMPOSITING";case 28:return"MOTION BLUR";case 29:return"COC";case 30:return"DOF";case 31:return"OUTLINE MASK";case 32:return"OUTLINE";case 33:return"GOD RAYS";case 34:return"GOD RAYS COMBINE";case 35:return"SKY";case 46:return"IRRADIANCE";case 47:return"ROUGHNESS_CONVOLUTION";case 48:return"PRE-COMPUTE_BRDF";case 36:return"COPY";
case 37:return"STEREO";case 38:return"LUMINANCE";case 39:return"AVERAGE LUMINANCE";case 40:return"LUMINANCE TRUNCED";case 41:return"BLOOM";case 42:return"VELOCITY";case 44:return"PERFORMANCE";case 43:return"SINK";case 45:return"RESIZE";default:return"UNKNOWN"}};a.Rc=function(a,b){for(var c=b.ya,d=c.zb,e=c.mf,h=0;h<a.Za.length;h++){var g=a.Za[h].La,k=g.indexOf(b);if(-1!=k&&(g.splice(k,1),!g.length)){a.Za.splice(h,1);break}}h=a.mb?c.od:0;a:{g=a.Za;for(k=0;k<g.length;k++){var n=g[k];if(n.zb==d&&n.mf==
e&&n.od==h&&n.Fj==c.Fj){g=n;break a}}g=null}g?g.La.push(b):(a.Za.push({zb:d,La:[b],mf:e,od:h,Fj:c.Fj,$b:!0,qk:Infinity}),a.as=!0)};a.Ai=function(a,b,c){b={$b:!0,Uz:[!0,!0,!0,!0,!0,!0],ug:b,ya:a,st:c||null,Tv:null,qk:Infinity};a.hf&&a.ra.ee&&(c=a.ra.ee,b.Tv={rT:new Float32Array(c.length),sT:new Float32Array(c.length),aQ:new Float32Array(c.length/3),wK:new Float32Array(3),rN:x.JN(a.tb.Pe)});return b};a.IV=function(a){a.Za.sort(n);a.as=!1}};b4w.module.__texcomp=function(a,u){function e(a,b,c,e){var d=new Int32Array(c,0,31),h,q,l,p,r,t;if(542327876!=d[0])return g.error("Invalid magic number in DDS header"),0;if(!d[20]&4)return g.error("Unsupported format, must contain a FourCC code"),0;h=d[21];switch(h){case k:q=8;l=b?b.COMPRESSED_RGB_S3TC_DXT1_EXT:null;break;case x:q=16;l=b?b.COMPRESSED_RGBA_S3TC_DXT3_EXT:null;break;case v:q=16;l=b?b.COMPRESSED_RGBA_S3TC_DXT5_EXT:null;break;default:return g.error("Unsupported FourCC code:",n(h)),null}t=
1;d[2]&131072&&!1!==e&&(t=Math.max(1,d[7]));p=d[4];r=d[3];d=d[1]+4;if(b)for(h=0;h<t;++h)e=Math.max(4,p)/4*Math.max(4,r)/4*q,b=new Uint8Array(c,d,e),a.compressedTexImage2D(a.TEXTURE_2D,h,l,p,r,0,b),d+=e,p=Math.max(.5*p,1),r=Math.max(.5*r,1);else if(h==k){c=b=new Uint16Array(c);q=d/2;l=p;d=new Uint16Array(4);b=new Uint16Array(l*r);for(var w,f,y,D,u,M,B=l/4,J=r/4,C=0;C<J;C++)for(var A=0;A<B;A++)h=q+4*(C*B+A),d[0]=c[h],d[1]=c[h+1],w=d[0]&31,f=d[0]&2016,y=d[0]&63488,D=d[1]&31,u=d[1]&2016,M=d[1]&63488,
d[2]=5*w+3*D>>3|5*f+3*u>>3&2016|5*y+3*M>>3&63488,d[3]=5*D+3*w>>3|5*u+3*f>>3&2016|5*M+3*y>>3&63488,w=c[h+2],f=4*C*l+4*A,b[f]=d[w&3],b[f+1]=d[w>>2&3],b[f+2]=d[w>>4&3],b[f+3]=d[w>>6&3],f+=l,b[f]=d[w>>8&3],b[f+1]=d[w>>10&3],b[f+2]=d[w>>12&3],b[f+3]=d[w>>14],w=c[h+3],f+=l,b[f]=d[w&3],b[f+1]=d[w>>2&3],b[f+2]=d[w>>4&3],b[f+3]=d[w>>6&3],f+=l,b[f]=d[w>>8&3],b[f+1]=d[w>>10&3],b[f+2]=d[w>>12&3],b[f+3]=d[w>>14];a.texImage2D(a.TEXTURE_2D,0,a.RGB,p,r,0,a.RGB,a.UNSIGNED_SHORT_5_6_5,b);e&&a.generateMipmap(a.TEXTURE_2D)}else return g.error("No manual decoder for",
n(h),"and no native support"),0;return t}function c(a,b,c,g,k){var d=new XMLHttpRequest;d.open("GET",c,!0);d.responseType="arraybuffer";d.onload=function(){if(200==d.status){a.bindTexture(a.TEXTURE_2D,g);var c=e(a,b,d.response,!0);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,1<c?a.LINEAR_MIPMAP_LINEAR:a.LINEAR)}k&&k(g)};d.send(null)}function b(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}
function n(a){return String.fromCharCode(a&255,a>>8&255,a>>16&255,a>>24&255)}var g=u("__print"),p=u("__util"),k=b("DXT1"),x=b("DXT3"),v=b("DXT5");a.cX=e;a.dX=function(a,b,c){var d=new Uint32Array(c,0,13);if(55727696==d[0]){var e=d[7],h=d[6],g=d[11],k=52+d[12];switch(d[2]){case 0:var n=2,r=1;break;case 1:n=2;r=3;break;case 2:n=4;r=0;break;case 3:n=4;r=2;break;default:p.K("Unsupported PVR V3 format.")}}else if(559044176==d[11]){e=d[2];h=d[1];g=d[3];k=d[0];g++;var t=d[4]&255,d=0<d[10];25==t?(n=4,r=d?
2:0):24==t?(n=2,r=d?3:1):p.K("Unsupported PVR V2 format.")}else p.K("Unsupported PVR version.");t=2==n?8:4;d=4;switch(r){case 0:var w=b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 1:w=b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 2:w=b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;case 3:w=b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=t*d*n/8;for(n=0;n<g;n++){var r=Math.max(e>>n,1),f=Math.max(h>>n,1),y=r/t,v=f/d;2>y&&(y=2);2>v&&(v=2);y=y*v*b;v=new Uint8Array(c,k,y);a.compressedTexImage2D(a.TEXTURE_2D,n,w,r,f,0,v);
k+=y}};a.uG=function(a,b){switch(b){case "dds":var c=new Int32Array(a,0,31);return{width:c[4],height:c[3]};case "pvr":c=new Uint32Array(a,0,13);if(55727696==c[0])var d=c[7],c=c[6];else d=c[2],c=c[1];return{width:d,height:c}}};a.kR=function(a,b){var c=1;if("dds"==b){var d=new Int32Array(a,0,31),e=d[21];switch(e){case k:c=6;break;case x:case v:c=4;break;default:g.error("Unsupported FourCC code:",n(e))}}else if("pvr"==b)if(d=new Uint32Array(a,0,13),55727696==d[0])switch(d[2]){case 0:c=12;break;case 1:c=
16;break;case 2:c=6;break;case 3:c=8}else e=d[4]&255,d=0<d[10],25==e?c=d?8:6:24==e&&(c=d?16:12);return c};a.d_=function(a,b,e,g){var d=a.createTexture();c(a,b,e,d,g);return d}};b4w.module.__textures=function(a,u){function e(){la||(la=I.createFramebuffer());return la}function c(){Ca||(Ca=I.createTexture());return Ca}function b(){return{type:0,source:"",Ls:"",width:0,height:0,Vq:1,anisotropic_filtering:0,$j:1024,Jk:!1,Lg:null,rb:0,Cb:null,gf:null,Ci:!1,$p:-1,ib:null,mt:"",bl:0,Dh:0,Ba:0,hc:0,Mk:0,dh:!1,Sh:1,ne:!1,BH:0,Hd:null,Ds:0,Cs:0,Xj:-1,Fs:!1,sl:-1,nt:!1,TC:!1,kk:!1,Kl:!1,repeat:!0,Rk:"",Bo:"",Hm:"",FA:"",EA:"",Qk:""}}function n(a,b,c){a.Hm=b.uuid;a.Bo=b.filepath;a.FA=
b.source;a.EA=b.name;a.Rk=aa.Ii(c+b.filepath);a.Qk=b.Ig;-1==V.na.indexOf(a)&&(V.na.push(a),V.Lo.push(!1))}function g(a,b,c){var d=-1<b.indexOf(".pvr");a.Qk=-1<b.indexOf(".dds")?"dds":d?"pvr":"";a.Bo=b;a.Rk=c;a.Hm=aa.nv();V.na.push(a);V.Lo.push(!0)}function p(c,d,e){var f=b();f.type=c;f.source="NONE";f.ne=e;if(c==a.Et||c==a.Ct||c==a.Ft||c==a.Dt)f.gf=I.createRenderbuffer();else{var h=I.TEXTURE_2D,g=I.createTexture();I.bindTexture(h,g);I.texParameteri(h,I.TEXTURE_MAG_FILTER,I.LINEAR);e?I.texParameteri(h,
I.TEXTURE_MIN_FILTER,Ka[ua.ek]):I.texParameteri(h,I.TEXTURE_MIN_FILTER,I.LINEAR);I.texParameteri(h,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE);I.texParameteri(h,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE);e=l(f);var k=F(f),m=E(f);if(c==a.Sl)var n=null;else c==a.Tl?n=new Float32Array([204,204,204,255]):n=new Uint8Array([204,204,204,255]);I.texImage2D(h,0,k,1,1,0,e,m,n);ua.Tq&&d&&I.texParameterf(h,I.TEXTURE_COMPARE_MODE,I.COMPARE_REF_TO_TEXTURE);I.bindTexture(h,null);f.rb=h;f.Cb=g}return f}function k(a){var b=a.rb;I.bindTexture(b,
a.Cb);var c=l(a),d=F(a),e=E(a),f=a.Lg.canvas;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!0);I.texImage2D(b,0,d,c,e,f);I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!1);a.Jk&&I.generateMipmap(b);I.bindTexture(b,null);a.width=f.width;a.height=f.height}function x(a){var b=a.rb;I.bindTexture(b,a.Cb);I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!0);4!=a.ib.length?a.dh?d(a,a.ib,a.width*a.Sh,a.height*a.Sh,!1):I.texImage2D(b,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,a.ib):I.texImage2D(b,0,I.RGBA,1,1,0,I.RGBA,I.UNSIGNED_BYTE,a.ib);I.bindTexture(b,
null)}function v(a){var b=a.rb;I.bindTexture(b,a.Cb);I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!0);a.dh?d(a,a.Hd[a.Xj],a.width*a.Sh,a.height*a.Sh,!1):I.texImage2D(b,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,a.Hd[a.Xj]);I.bindTexture(b,null)}function h(){ca||(ca=document.createElement("canvas"));return ca}function d(a,b,d,f,h){h||(q(I.TEXTURE_2D),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,b));I.bindTexture(I.TEXTURE_2D,null);b=e();h=c();ea.eQ(a,d,f,b,h)}function t(a,b,c){for(var d=0;6>d;d++){var e=
Va[d],f=Ia[d],g=h();g.width=c;g.height=c;var k=g.getContext("2d");k.translate(c/2,c/2);"TEXTURE_CUBE_MAP_POSITIVE_X"==e?(k.rotate(Math.PI/2),k.scale(1,-1)):"TEXTURE_CUBE_MAP_NEGATIVE_X"==e?(k.rotate(Math.PI/2),k.scale(-1,1)):"TEXTURE_CUBE_MAP_POSITIVE_Y"==e||"TEXTURE_CUBE_MAP_POSITIVE_Z"==e?k.scale(1,-1):"TEXTURE_CUBE_MAP_NEGATIVE_Y"!=e&&"TEXTURE_CUBE_MAP_NEGATIVE_Z"!=e||k.scale(-1,1);k.drawImage(a,f[0]*b,f[1]*b,b,b,-c/2,-c/2,c,c);ua.vF?I.texImage2D(I[e],0,I.RGBA,c,c,0,I.RGBA,I.UNSIGNED_BYTE,new Uint8Array(k.getImageData(0,
0,c,c).data.buffer)):I.texImage2D(I[e],0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,g)}}function q(a){I.bindTexture(a,null);var b=c();I.bindTexture(a,b);I.texParameteri(a,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE);I.texParameteri(a,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE);I.texParameteri(a,I.TEXTURE_MAG_FILTER,I.LINEAR);I.texParameteri(a,I.TEXTURE_MIN_FILTER,I.LINEAR)}function G(a,b,f){var g=a.source,k=a.Cb,l=a.rb,m=a.Qk,n=a.Bo,r;I.bindTexture(l,k);a.repeat?(I.texParameteri(l,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(l,I.TEXTURE_WRAP_T,
I.REPEAT)):(I.texParameteri(l,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(l,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE));a.Ci||"NODE_TEX"==g?I.texParameteri(l,I.TEXTURE_MIN_FILTER,I.LINEAR):I.texParameteri(l,I.TEXTURE_MIN_FILTER,Ka[ua.ek]);a.anisotropic_filtering&&I.texParameterf(l,pa.jA().TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic_filtering);4==b.length&&(r=!0,b=new Uint8Array([255*b[0],255*b[1],255*b[2],255*b[3]]));if("IMAGE"==g)if(r)I.texImage2D(l,0,I.RGBA,1,1,0,I.RGBA,I.UNSIGNED_BYTE,b),a.width=1,a.height=
1;else if(m){r=ia.uG(b,m);f=aa.Mq(r.width)||aa.Mq(r.height);if(r.width>ba.dc||r.height>ba.dc){Z.error('Image "'+n+'" has unsupported size: '+r.width+"x"+r.height+". Max available: "+ba.dc+"x"+ba.dc+".");return}g=r.width;r=r.height;if(f||"pvr"==m)a.dh=!0,q(l),g=z(g*a.Sh),r=z(r*a.Sh);"dds"==m?ia.cX(I,pa.oG(),b,!0):"pvr"==m&&ia.dX(I,pa.nG(),b);a.dh&&(d(a,null,g,r,!0),I.bindTexture(l,k),I.generateMipmap(l));a.width=g;a.height=r;a.Vq=ia.kR(b,m)}else{I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!0);a.Ci?ua.Es?(g=
b[0].width,r=b[0].height):(g=b.videoWidth,r=b.videoHeight):(g=b.width,r=b.height);a.width=g;a.height=r;if(g>ba.dc||r>ba.dc)Z.warn('Image "'+n+'" has unsupported size: '+g+"x"+r+". Max available: "+ba.dc+"x"+ba.dc+". Reduced image size will be used."),a.Sh=Math.min(ba.dc/g,ba.dc/r),a.dh=!0;a.Ci&&(f in xa||(xa[f]={}),xa[f][a.mt]=a,ua.Es?(a.Hd=b,a.Ds=b.length,a.Dh=a.Cs*a.bl/b.length,b=b[0]):(a.ib=b,a.ib.loop=a.kk,a.Dh=b.duration?a.bl/b.duration:ma.Dd(),ja.DF||(b.playbackRate=ma.Dd()/a.Dh,ja.UE&&2<b.playbackRate&&
(b.playbackRate=2)),H(a)));g=z(a.width*a.Sh);r=z(a.height*a.Sh);a.dh||ua.mI?(n=h(),m=n.getContext("2d"),n.width=g,n.height=r,m.drawImage(b,0,0,a.width,a.height,0,0,g,r),ua.vF?I.texImage2D(l,0,I.RGBA,g,r,0,I.RGBA,I.UNSIGNED_BYTE,new Uint8Array(m.getImageData(0,0,g,r).data.buffer)):I.texImage2D(l,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,n)):ua.gb||!aa.Mq(a.width)&&!aa.Mq(a.height)?I.texImage2D(l,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,b):(d(a,b,g,r,!1),a.dh=!0);a.width=g;a.height=r;a.Ci||(I.bindTexture(l,k),I.generateMipmap(l))}else if("ENVIRONMENT_MAP"==
g)if(r){for(k=0;6>k;k++)I.texImage2D(I["TEXTURE_CUBE_MAP_"+Va[k]],0,I.RGBA,1,1,0,I.RGBA,I.UNSIGNED_BYTE,b);a.width=3;a.height=2}else{I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!1);if(b.width%3||b.height%2){Z.error('Cubemap Image "'+n+'" has unsupported size: '+b.width+"x"+b.height+". The width must be multiple of three and the height - multiple of two.");return}k=b.width/3;k>ba.rg?(Z.warn('Cubemap Image "'+n+'" has unsupported size: '+b.width+"x"+b.height+". Max available: "+3*ba.rg+"x"+2*ba.rg+". Reduced image size will be used."),
n=z(ba.rg/k*k),a.dh=!0):(n=z(k),!ua.gb&&(3*n>ba.dc||2*n>ba.dc)&&(a.dh=!0));if(a.dh||ua.zs)t(b,k,n);else{m=b;g=n;q(I.TEXTURE_2D);I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,m);I.bindTexture(I.TEXTURE_2D,null);for(m=0;6>m;m++)I.texImage2D(I.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,I.RGBA,g,g,0,I.RGBA,I.UNSIGNED_BYTE,null);I.bindTexture(a.rb,null);m=e();I.bindFramebuffer(I.FRAMEBUFFER,m);r=c();for(m=0;6>m;m++)ea.dQ(a,I[Va[m]],g,k,r,m);I.bindFramebuffer(I.FRAMEBUFFER,null);I.bindTexture(a.rb,a.Cb);
I.texParameteri(a.rb,I.TEXTURE_MIN_FILTER,Ka[ua.ek]);I.texParameteri(a.rb,I.TEXTURE_MAG_FILTER,I.LINEAR)}fa.cO()&&(Z.warn("Firefox detected, setting max cubemap size to 256, use canvas for resizing."),t(b,k,sa.CD));a.width=3*n;a.height=2*n;I.generateMipmap(l)}else"NODE_TEX"==g&&(I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,!1),I.texImage2D(l,0,I.RGBA,b.width,b.height,0,I.RGBA,I.UNSIGNED_BYTE,b.data),a.width=b.width,a.height=b.height);I.bindTexture(l,null)}function H(a){a.ib.oncanplay=function(){N(a)&&x(a)}}
function z(a){return aa.Mq(a)?aa.clamp(Math.pow(2,(a|0).toString(2).length),2,ba.dc):a}function l(b){var c;switch(b.type){case a.sh:c=I.RGBA;break;case a.Gt:c=I.RGB;break;case a.Tl:c=I.RGBA;break;case a.nq:c=I.RGB;break;case a.Sl:c=I.DEPTH_COMPONENT;break;default:aa.K("Wrong texture type")}return c}function F(b){var c;switch(b.type){case a.sh:c=ua.gb?I.RGBA8:I.RGBA;break;case a.Gt:c=ua.gb?I.RGB8:I.RGB;break;case a.Tl:c=ua.gb?I.RGBA32F:I.RGBA;break;case a.nq:c=ua.gb?I.RGB8:I.RGB;break;case a.Sl:c=
ua.gb?r(ba.fo):I.DEPTH_COMPONENT;break;default:aa.K("Wrong texture type")}return c}function r(a){switch(a){case 16:a=I.DEPTH_COMPONENT16;break;case 24:a=I.DEPTH_COMPONENT24;break;case 32:a=I.DEPTH_COMPONENT32F;break;default:a=I.DEPTH_COMPONENT24}return a}function E(b){var c;switch(b.type){case a.sh:c=I.UNSIGNED_BYTE;break;case a.Gt:c=I.UNSIGNED_BYTE;break;case a.Tl:c=I.FLOAT;break;case a.nq:c=I.FLOAT;break;case a.Sl:c=I.UNSIGNED_INT;break;default:aa.K("Wrong texture type")}return c}function w(a){a.ib?
a.ib.play():a.Hd&&(a.Fs=!0);a.nt=!1}function f(a){a.ib?a.ib.pause():a.Hd&&(a.Fs=!1);a.nt=!0}function y(a){a.ib?a.ib.currentTime=a.hc/a.Dh:a.Hd&&(a.Xj=M(a,a.hc),v(a))}function D(a){return a.ib?!a.ib.paused:a.Hd?a.Fs:!1}function N(a){return a.ib||a.Hd?a.ib?2<=a.ib.readyState:!0:0}function M(a,b){return Math.round(b*a.Ds/a.bl)}function B(a,b){if(da.is_dynamic(a))return C(a,b);for(var c=a.Yr,d=0;d<c.length;d++){var e=C(c[d],b);if(e)return e}return null}function J(a,b,c){if(da.is_dynamic(a))A(a,b,c);else{a=
a.Yr;for(var d=0;d<a.length;d++)A(a[d],b,c)}}function C(a,b){var c=a.S;if(c.length)for(var c=c[0].$,d=0;d<c.length;d++){var e=c[d];if("MAIN"==e.type||"SKY"==e.type)for(var f=0;f<e.na.length;f++)if(e.rf[f]==b)return e.na[f]}return null}function A(a,b,c){a=a.S;if(a.length){a=a[0].$;for(var d=0;d<a.length;d++){var e=a[d];if("MAIN"==e.type)for(var f=0;f<e.na.length;f++)if(e.rf[f]==b){var h=e.na[f];e.na[f]=c;O(h)}}}}function X(a,b){var c=a.S;if(c.length)for(var c=c[0].$,d=0;d<c.length;d++){var e=c[d];
if("MAIN"==e.type)for(var f=0;f<e.na.length;f++){var h=e.na[f],g=e.rf[f];-1==b.indexOf(g)&&"NODE_TEX"!=h.source&&b.push(g)}}}function m(a,b,c){var d=a.elements;a=a.interpolation;for(var e=0;e<b;e++){var f=e/(b-1),h=K(d,f,!0),g=R(d,f,!0);if(h&&g)if("CONSTANT"==a)c.push.apply(c,h.color);else{var k=c,l=h,m=g;l==m?k.push.apply(k,l.color):(k.push(W.kw(m.color[0],m.position,l.color[0],l.position,f)),k.push(W.kw(m.color[1],m.position,l.color[1],l.position,f)),k.push(W.kw(m.color[2],m.position,l.color[2],
l.position,f)),k.push(W.kw(m.color[3],m.position,l.color[3],l.position,f)))}g&&!h&&c.push.apply(c,g.color);h&&!g&&c.push.apply(c,h.color)}}function K(a,b,c){for(var d=null,e=0;e<a.length;e++){var f=c?b-a[e].position:b-a[e][1][0];0<=f&&(d?f<=(c?b-d.position:b-a[e][1][0])&&(d=a[e]):d=a[e])}return d}function R(a,b,c){for(var d=null,e=0;e<a.length;e++){var f=c?a[e].position-b:a[e][1][0]-b;0<=f&&(d?f<=(c?d.position-b:d[1][0]-b)&&(d=a[e]):d=a[e])}return d}function O(a){var b;if(!(b=ua.enable_texture_cache))a:{b=
wa.get_all_objects("ALL",wa.DATA_ID_ALL);for(var c=0;c<b.length;c++){var d=b[c];if(S(d,a)){b=!0;break a}for(var d=d.Yr,e=0;e<d.length;e++)if(S(d[e],a)){b=!0;break a}}b=!1}b||(a.Cb&&I.deleteTexture(a.Cb),a=V.na.indexOf(a),-1!=a&&(V.na.splice(a,1),V.Lo.splice(a,1)))}function S(a,b){for(var c=0;c<a.S.length;c++)for(var d=a.S[c].$,e=0;e<d.length;e++)for(var f=d[e].na,h=0;h<f.length;h++)if(f[h]==b)return!0}function ga(a,b){for(var c=0;c<V.na.length;c++){var d=V.na[c];if(d.Rk==a&&d.type==b.type&&d.source==
b.source&&d.repeat==b.repeat&&d.anisotropic_filtering==b.anisotropic_filtering&&d.Kl==b.Kl)return d}return null}var sa=u("__compat"),U=u("__config"),ia=u("__texcomp"),fa=u("__debug"),pa=u("__extensions"),Z=u("__print"),ma=u("__time"),aa=u("__util"),ea=u("__renderer"),wa=u("__objects"),da=u("__obj_util"),W=u("__curve"),Ga=u("__vec3"),P=u("__scenes"),ua=U.L,ba=U.zh,ja=U.ka,ca=null,Ca=null,la=null;a.se=0;a.T=0;a.xM=0;a.vM=0;a.wM=0;a.$i=0;a.sh=10;a.Gt=20;a.Tl=30;a.nq=40;a.Sl=50;a.Et=60;a.Ct=70;a.Ft=80;
a.Dt=90;a.iD=128;a.xK=128;a.GD=128;var V={na:[],Lo:[]},ta={},xa={},I=null,Ka,Va="TEXTURE_CUBE_MAP_POSITIVE_X TEXTURE_CUBE_MAP_NEGATIVE_X TEXTURE_CUBE_MAP_POSITIVE_Y TEXTURE_CUBE_MAP_NEGATIVE_Y TEXTURE_CUBE_MAP_POSITIVE_Z TEXTURE_CUBE_MAP_NEGATIVE_Z".split(" "),Ia=[[2,0],[0,0],[2,1],[1,0],[1,1],[0,1]];a.yg=function(b){Ka=[b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR];a.se=b.NEAREST;a.T=b.LINEAR;a.xM=b.NEAREST_MIPMAP_NEAREST;a.vM=b.LINEAR_MIPMAP_NEAREST;
a.wM=b.NEAREST_MIPMAP_LINEAR;a.$i=b.LINEAR_MIPMAP_LINEAR;I=b};a.uZ=function(a,b){return b in ta&&a in ta[b]?ta[b][a].Lg:null};a.N_=function(a,b){return b in ta&&a in ta[b]?(k(ta[b][a]),!0):!1};a.aE=n;a.rj=p;a.NO=function(c,d){var e=I.createTexture(),f=I.TEXTURE_CUBE_MAP;I.bindTexture(f,e);I.texParameteri(f,I.TEXTURE_MAG_FILTER,I.LINEAR);d?I.texParameteri(f,I.TEXTURE_MIN_FILTER,Ka[ua.ek]):I.texParameteri(f,I.TEXTURE_MIN_FILTER,I.LINEAR);I.texParameteri(f,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE);I.texParameteri(f,
I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE);for(var h=0;6>h;h++)I.texImage2D(I[Va[h]],0,I.RGBA,c,c,0,I.RGBA,I.UNSIGNED_BYTE,null);I.bindTexture(f,null);f=b();f.type=a.sh;f.source="NONE";f.width=3*c;f.height=2*c;f.Vq=1;f.ne=d;f.Cb=e;f.rb=I.TEXTURE_CUBE_MAP;return f};a.lx=function(a,b){var c=a.rb;I.bindTexture(c,a.Cb);for(var d=0;6>d;d++)I.texImage2D(I[Va[d]],0,I.RGBA,b,b,0,I.RGBA,I.UNSIGNED_BYTE,null);I.bindTexture(c,null);a.width=3*b;a.height=2*b};a.fC=function(a,b,c){var d=a.rb;I.bindTexture(d,a.Cb);b&&I.texParameteri(d,
I.TEXTURE_MIN_FILTER,b);c&&I.texParameteri(d,I.TEXTURE_MAG_FILTER,c);I.bindTexture(d,null)};a.resize=function(b,c,d){c=Math.max(c,1);d=Math.max(d,1);if(b.width!=c||b.height!=d){switch(b.type){case a.Et:I.bindRenderbuffer(I.RENDERBUFFER,b.gf);I.renderbufferStorage(I.RENDERBUFFER,I.RGB565,c,d);I.bindRenderbuffer(I.RENDERBUFFER,null);break;case a.Ct:I.bindRenderbuffer(I.RENDERBUFFER,b.gf);I.renderbufferStorage(I.RENDERBUFFER,r(ba.fo),c,d);I.bindRenderbuffer(I.RENDERBUFFER,null);break;case a.Ft:I.bindRenderbuffer(I.RENDERBUFFER,
b.gf);I.renderbufferStorageMultisample(I.RENDERBUFFER,ua.ec,I.RGBA8,c,d);I.bindRenderbuffer(I.RENDERBUFFER,null);break;case a.Dt:I.bindRenderbuffer(I.RENDERBUFFER,b.gf);I.renderbufferStorageMultisample(I.RENDERBUFFER,ua.ec,r(ba.fo),c,d);I.bindRenderbuffer(I.RENDERBUFFER,null);break;default:var e=b.rb;I.bindTexture(e,b.Cb);var f=l(b),h=F(b),g=E(b);b.ne&&(ua.gb||(d=Math.max(c,d),c=z(d),d=z(d)),b.BH=Math.round(Math.log(Math.max(c,d))/Math.log(2)+.5));I.texImage2D(e,0,h,c,d,0,f,g,null);I.bindTexture(e,
null)}c>ba.dc||d>ba.dc?aa.K('Slink texture "'+b.type+'" has unsupported size: '+c+"x"+d+". Max available: "+ba.dc+"x"+ba.dc+"."):(b.width=c,b.height=d)}};a.KP=function(c,d,e,f,h){var g=c.type;if("BLEND"==g)return null;var l=c.image,m=b();m.type=a.sh;m.width=1;m.height=1;if(ua.cz){var r=c.b4w_anisotropic_filtering;"DEFAULT"===r&&(r=d);"OFF"!==r&&ua.anisotropic_filtering&&(m.anisotropic_filtering=parseFloat(r.split("x")[0]))}if("REPEAT"!=c.extension||c.b4w_shore_dist_map)m.repeat=!1;if(l){"IMAGE"==
g&&"MOVIE"==l.source&&(m.Ci=!0,m.mt=c.name,m.Ba=c.frame_start,m.hc=c.frame_offset,m.Mk=c.frame_duration,m.TC=c.use_auto_refresh,m.kk=c.use_cyclic,m.bl=c.movie_length,m.Kl=c.b4w_nla_video,0!=m.hc&&Z.warn('Frame offset for texture "'+c.name+'" has a nonzero value. Can lead to undefined behaviour for mobile devices.'));m.source=g;d=aa.Ii(h+l.filepath);if(d=ga(d,m))return d;n(m,l,h)}d=new Uint8Array([204,204,204,255]);switch(g){case "IMAGE":h=I.createTexture();l=I.TEXTURE_2D;I.bindTexture(l,h);I.texImage2D(l,
0,I.RGBA,1,1,0,I.RGBA,I.UNSIGNED_BYTE,d);break;case "NONE":if("NONE"==c.b4w_source_type)return null;h=I.createTexture();l=I.TEXTURE_2D;m.source=c.b4w_source_type;if("SCENE"==m.source){if(!c.b4w_source_id)return null;f=aa.keysearch("name",c.b4w_source_id,e);if(!f)return null;m.Ls=c.b4w_source_id;m.$j=c.b4w_source_size;f.$f=f.$f||[];f.$f.push(m);I.bindTexture(l,h);I.texImage2D(l,0,I.RGBA,1,1,0,I.RGBA,I.UNSIGNED_BYTE,d)}else"CANVAS"==m.source&&(e=c.b4w_source_id,d=c.b4w_source_size,m.Ls=e,m.Jk=c.b4w_enable_canvas_mipmapping,
c=document.createElement("canvas"),c.width=d,c.height=d,m.Lg=c.getContext("2d"),f in ta||(ta[f]={}),ta[f][e]=m,I.bindTexture(l,h));break;case "ENVIRONMENT_MAP":h=I.createTexture();l=I.TEXTURE_CUBE_MAP;I.bindTexture(l,h);c="POSITIVE_X NEGATIVE_X POSITIVE_Y NEGATIVE_Y POSITIVE_Z NEGATIVE_Z".split(" ");for(f=0;6>f;f++)I.texImage2D(I["TEXTURE_CUBE_MAP_"+c[f]],0,I.RGBA,1,1,0,I.RGBA,I.UNSIGNED_BYTE,d);break;default:return Z.error('texture "'+c.name+'" has unsupported type "'+g+'"'),null}m.Cb=h;m.rb=l;"NONE"==
g?(m.Jk?I.texParameteri(l,I.TEXTURE_MIN_FILTER,Ka[ua.ek]):I.texParameteri(l,I.TEXTURE_MIN_FILTER,I.LINEAR),m.anisotropic_filtering&&I.texParameterf(l,pa.jA().TEXTURE_MAX_ANISOTROPY_EXT,m.anisotropic_filtering),"CANVAS"==m.source&&k(m)):(I.generateMipmap(l),I.bindTexture(l,null));return m};a.bX=k;a.QJ=x;a.PJ=v;a.bt=G;a.qz=z;a.Ho=function(a){return a&&(a.Cb||a.gf)?!0:!1};a.Fo=function(a){return a&&a.gf?!0:!1};a.XZ=function(b){return b.type==a.Tl||b.type==a.nq?!0:!1};a.RR=function(b){var c=0;switch(b.type){case a.sh:case a.Gt:c=
4;break;case a.Tl:case a.nq:c=32;break;case a.Sl:c=3;break;case a.Et:case a.Ct:c=2;break;case a.Ft:c=4*ua.ec;break;case a.Dt:c=3*ua.ec}return c};a.cleanup=function(){if(!ua.Es)for(var a in xa)for(var b in xa[a])xa[a][b].ib.pause(),xa[a][b].ib.src="",xa[a][b].ib.load();V.na.length=0;V.Lo.length=0;ta={};xa={}};a.pause=function(){for(var a in xa)for(var b in xa[a]){var c=xa[a][b];D(c)&&f(c)}};a.reset=function(){for(var a in xa)for(var b in xa[a])y(xa[a][b])};a.play=function(a){for(var b in xa)for(var c in xa[b]){var d=
xa[b][c];a&&!d.nt||w(d)}};a.uA=function(a,b){return b in xa&&a in xa[b]?xa[b][a]:null};a.ZC=function(a){return a.Kl};a.play_video=w;a.pause_video=f;a.reset_video=y;a.aV=function(a,b,c){c in xa&&a in xa[c]&&(a=xa[c][a],a.ib?a.ib.currentTime=b/a.Dh:a.Hd&&(a.Xj=b,v(a)))};a.mK=D;a.nK=N;a.jK=function(a){return a.ib||a.Hd?a.ib?Math.round(a.ib.currentTime*a.Dh):a.Xj:0};a.lK=function(a){return a.ib||a.Hd?a.ib?a.hc:M(a,a.hc):0};a.pX=function(a){if(!a.ib&&!a.Hd)return 0;var b=Math.min(a.Mk,a.bl-a.hc);return a.ib?
a.hc+b:M(a,a.hc+b)};a.jx=function(a,b){return Math.round(b*a.Cs*(ma.Dd()/a.Dh))};a.kK=function(a){return Math.min(a.Mk,a.bl-a.hc)};a.oX=M;a.gR=function(a,b){var c=B(a,b);return c&&"CANVAS"==c.source?c.Lg:null};a.Av=B;a.sV=J;a.get_texture_names=function(a){var b=[];if(da.is_dynamic(a))X(a,b);else{a=a.Yr;for(var c=0;c<a.length;c++)X(a[c],b)}return b};a.CV=function(a){for(var c={},d=0;d<a.length;d++){for(var e=a[d].na,f=a[d].Mf,h=[],g=[],l=0;l<e.length;l++){var m=e[l],n=f[l];if("CANVAS"==m.source)if(n in
c)m=c[n];else{var r=e[l],m=b();m.source="CANVAS";m.width=r.width;m.height=r.height;m.Jk=r.Jk;m.type=r.type;r=document.createElement("canvas");r.width=m.width;r.height=m.height;m.Lg=r.getContext("2d");m.rb=I.TEXTURE_2D;m.Cb=I.createTexture();I.bindTexture(I.TEXTURE_2D,m.Cb);m.Jk?I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,Ka[ua.ek]):I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR);I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR);I.bindTexture(I.TEXTURE_2D,null);r=m;r.Lg.drawImage(e[l].Lg.canvas,
0,0);k(r);c[n]=m}h.push(m);g.push(n)}a[d].na=h}};a.sQ=function(a,b){for(var c=[],d=0;d<a.length;d++)m(a[d].data.value.color_ramp,b,c);return new Uint8Array(c.map(function(a){return aa.clamp(255*a,0,255)}))};a.HN=m;a.wQ=function(a,b){for(var c=new Float32Array(3),d=new Float32Array(3),e=[],f=0;f<a.length;f++){for(var h=a[f].data.value,g=[],k=h.curve_mapping.curves_data,l=h.curve_mapping.curve_extend,m=h.curve_mapping.curves_handle_types,h=0;h<k.length;h++){for(var n=l[h],r=k[h],q=[],p=m[h],w=0;w<r.length;w++)q.push([new Float32Array(3),
new Float32Array(r[w].concat(0)),new Float32Array(3)]);W.rz(q[0],null,q[1],p[0],p[0]);for(w=1;w<q.length-1;w++)W.rz(q[w],q[w-1],q[w+1],p[w],p[w]);W.rz(q[q.length-1],q[q.length-2],null,p[q.length-1],p[q.length-1]);if(2<q.length){if("AUTO"==p[0]){Ga.subtract(q[0][2],q[0][1],c);w=Ga.length(c);Ga.copy(q[1][0],d);d[0]<q[0][1][0]&&(d[0]=q[0][1][0]);Ga.subtract(d,q[0][1],d);var t=Ga.length(d);1E-8<t&&(Ga.scale(d,w/t,d),Ga.add(q[0][1],d,q[0][2]),Ga.subtract(q[0][1],d,q[0][0]))}r=q.length-1;"AUTO"==p[0]&&
(Ga.subtract(q[r][0],q[r][1],c),w=Ga.length(c),Ga.copy(q[r-1][2],d),d[0]>q[r][1][0]&&(d[0]=q[r][1][0]),Ga.subtract(d,q[r][1],d),t=Ga.length(d),1E-8<t&&(Ga.scale(d,w/t,d),Ga.add(q[r][1],d,q[r][0]),Ga.subtract(q[r][1],d,q[r][2])))}for(r=0;r<q.length-1;r++)W.AO(q[r][1],q[r][2],q[r+1][0],q[r+1][1]);r=[];3>=k.length?(w=Math.round(-b/2),p=Math.round(b/2)):(w=0,p=b);for(;w<p;w++){var t=w/(p-1),y=K(q,t,!1),z=R(q,t,!1);y&&z?r.push(W.pE(t,y[1],y[2],z[0],z[1],.001)):z&&!y?"EXTRAPOLATED"==n?(t=z[1][0]==z[2][0]?
z[1][1]:W.hH(t,z[1],z[2]),r.push(t)):r.push(z[1][1]):y&&!z&&("EXTRAPOLATED"==n?(t=y[0][0]==y[1][0]?y[1][1]:W.hH(t,y[0],y[1]),r.push(t)):r.push(y[1][1]))}g.push(r)}e.push(g)}c=[];for(w=0;w<e.length;w++)for(g=e[w],h=0;h<g[0].length;h++)3>=g.length?(d=aa.clamp(127.5*(g[0][h]+1),0,255),f=aa.clamp(127.5*(g[1][h]+1),0,255),k=aa.clamp(127.5*(g[2][h]+1),0,255),r=255):(d=aa.clamp(255*g[0][h],0,255),f=aa.clamp(255*g[1][h],0,255),k=aa.clamp(255*g[2][h],0,255),r=aa.clamp(255*g[3][h],0,255)),c.push(d,f,k,r);return new Uint8Array(c)};
a.lF=function(b,c){var d=p(a.sh,!1);d.source="NODE_TEX";d.repeat=!1;G(d,{width:c,height:b.length/(4*c),data:b});return d};a.change_image=function(a,c,d,e,f){var h=aa.Ii(f);if("WORLD"!=a.type){var k=ga(h,c);if(!k){k=b();k.type=c.type;k.anisotropic_filtering=c.anisotropic_filtering;k.source=c.source;k.Ls=c.Ls;k.width=c.width;k.height=c.height;k.Vq=c.Vq;k.$j=c.$j;k.Jk=c.Jk;k.Lg=c.Lg;k.rb=c.rb;k.Cb=c.Cb;k.gf=c.gf;k.Ci=c.Ci;k.$p=c.$p;k.ib=c.ib;k.mt=c.mt;k.bl=c.bl;k.Dh=c.Dh;k.Ba=c.Ba;k.hc=c.hc;k.Mk=c.Mk;
k.dh=c.dh;k.Sh=c.Sh;k.Hd=c.Hd;k.Ds=c.Ds;k.Cs=c.Cs;k.Xj=c.Xj;k.Fs=c.Fs;k.sl=c.sl;k.nt=c.nt;k.TC=c.TC;k.kk=c.kk;k.Kl=c.Kl;k.repeat=c.repeat;k.Bo=c.Bo;k.Rk=c.Rk;k.Hm=c.Hm;k.FA=c.FA;k.EA=c.EA;k.Qk=c.Qk;var l=k;I.bindTexture(c.rb,c.Cb);var m=I.getTexParameter(c.rb,I.TEXTURE_MAG_FILTER),n=I.getTexParameter(c.rb,I.TEXTURE_MIN_FILTER),r=I.getTexParameter(c.rb,I.TEXTURE_WRAP_S);c=I.getTexParameter(c.rb,I.TEXTURE_WRAP_T);l.Cb=I.createTexture();I.bindTexture(l.rb,l.Cb);I.texParameteri(l.rb,I.TEXTURE_MAG_FILTER,
m);I.texParameteri(l.rb,I.TEXTURE_MIN_FILTER,n);I.texParameteri(l.rb,I.TEXTURE_WRAP_S,r);I.texParameteri(l.rb,I.TEXTURE_WRAP_T,c);I.bindTexture(l.rb,null);g(k,f,h);G(k,e,0)}J(a,d,k)}else k=c,g(k,f,h),G(k,e,0),P.EW(a,k),P.iy(a)};a.YE=O;a.ze=function(a){return a.texture.J};a.AU=function(){I=null};a.kG=function(){return V.na};a.fR=function(a){a=V.na.indexOf(a);return-1==a?!1:V.Lo[a]};a.TU=function(a){a=V.na.indexOf(a);-1!=a&&(V.Lo[a]=!0)}};b4w.module.__assets=function(a,u){function e(){return G.OG()?u(G.af.gu).data:null}function c(){var a={Kt:null,EM:function(b){switch(a.responseType){case "json":case "text":return b;case "arraybuffer":b=atob(b);for(var c=b.length,d=new Int8Array(c),e=0;e<c;e++)d[e]=b.charCodeAt(e);return d.buffer;default:return b}},status:0,readyState:0,response:"",responseType:"",onreadystatechange:null,overrideMimeType:function(){},addEventListener:function(){},open:function(b,c){a.Kt=c;a.readyState=1},send:function(){a.status=
404;a.readyState=4;var b=e();b&&a.Kt in b&&(a.status=200,b[a.Kt]&&(a.response=a.EM(b[a.Kt])));if("[object Function]"==={}.toString.call(a.onreadystatechange))a.onreadystatechange()}};return a}function b(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];20===e.state&&c++;if(c>=f.oT)break;if(10===e.state)switch(e.state=20,c++,e.type){case a.AT_JSON_ZIP:case a.AT_ARRAYBUFFER:case a.AT_ARRAYBUFFER_ZIP:n(e,"arraybuffer");break;case a.AT_JSON:n(e,"json");break;case a.AT_TEXT:n(e,"text");break;case a.AT_AUDIOBUFFER:g(e);
break;case a.AT_IMAGE_ELEMENT:p(e);break;case a.AT_AUDIO_ELEMENT:k(e);break;case a.AT_VIDEO_ELEMENT:x(e);break;case a.AT_SEQ_VIDEO_ELEMENT:v(e);break;default:r.K("Wrong asset type: "+e.type)}}}function n(b,d){var f=b.url.split("?v=")[0];if(f in M)"json"==d?b.Yb(r.W(M[f]),b.id,b.type,b.url,b.param):b.Yb(M[f],b.id,b.type,b.url,b.param);else{var h=e(),g=h&&b.url in h?new c:new XMLHttpRequest,h=null;if("GET"==b.request_method)g.open("GET",b.url,!0);else if("POST"==b.request_method)switch(g.open("POST",
b.url,!0),b.type){case a.AT_TEXT:h="text/plain";break;case a.AT_JSON:h="application/json"}if(b.overwrite_header)for(var k in b.overwrite_header)"Content-Type"==k?h=b.overwrite_header[k]:g.setRequestHeader(k,b.overwrite_header[k]);h&&g.setRequestHeader("Content-Type",h);"text"==d?(g.overrideMimeType("text/plain"),g.responseType="text"):"json"==d?(g.overrideMimeType("application/json"),g.responseType="text"):g.responseType=d;g.onreadystatechange=function(){if(40!=b.state&&4==g.readyState){if(200==g.status||
0==g.status){var c=g.response;if(!c||"arraybuffer"==d&&0==c.byteLength)l.error("empty responce when trying to get "+b.url),b.Yb(null,b.id,b.type,b.url,b.param);else{switch(b.type){case a.AT_JSON_ZIP:try{c=z.Co(c,{to:"string"})}catch(ga){l.error(ga+" (parsing gzipped file "+b.url+")");b.Yb(null,b.id,b.type,b.url,b.param);return}case a.AT_JSON:try{c=JSON.parse(c,b.FS)}catch(ga){l.error(ga+" (parsing JSON "+b.url+")");b.Yb(null,b.id,b.type,b.url,b.param);return}break;case a.AT_ARRAYBUFFER_ZIP:try{c=
z.Co(c).buffer}catch(ga){l.error(ga+" (parsing gzipped file "+b.url+")");b.Yb(null,b.id,b.type,b.url,b.param);return}}b.Ae&&(M[f]=b.type==a.AT_JSON||b.type==a.AT_JSON_ZIP?r.W(c):c);b.Yb(c,b.id,b.type,b.url,b.param)}}else l.error(g.status+" when trying to get "+b.url),b.Yb(null,b.id,b.type,b.url,b.param);b.state=30}};g.addEventListener("progress",function(a){a.lengthComputable&&b.bI(a.loaded/a.total)},!1);g.send(b.post_data)}}function g(a){var b=a.url.split("?v=")[0];if(b in C)a.Yb(C[b],a.id,a.type,
a.url,a.param),a.state=30;else{"GET"!=a.request_method&&r.K("Unsupported request type for audio buffer");var d=(b=e())&&a.url in b?new c:new XMLHttpRequest;d.open("GET",a.url,!0);d.responseType="arraybuffer";d.onreadystatechange=function(){if(40!=a.state&&4==d.readyState)if(200==d.status||0==d.status){var b=d.response;b?F.VP(b,function(b){a.Yb(b,a.id,a.type,a.url,a.param);a.state=30;a.Ae&&(C[a.url.split("?v=")[0]]=b)},function(){l.error("failed to decode "+a.url);a.Yb(null,a.id,a.type,a.url,a.param);
a.state=30}):(l.error("empty responce when trying to get "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30)}else l.error(d.status+" when trying to get "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30};d.send()}}function p(a){var b=a.url.split("?v=")[0];if(b in B)a.Yb(B[b],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&r.K("Unsupported request type for image element");var c=document.createElement("img");w.allow_cors&&(c.crossOrigin="Anonymous");c.onload=function(){40!=
a.state&&(a.Yb(c,a.id,a.type,a.url,a.param),a.state=30,a.Ae&&(B[a.url.split("?v=")[0]]=c))};c.addEventListener("error",function(){40!=a.state&&(l.error("could not load image: "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30)},!1);if((b=e())&&a.url in b)if(b[a.url]){var f=d(a.url);c.src="data:"+f+";base64,"+b[a.url]}else H.is_ie11()?(b=document.createEvent("CustomEvent"),b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),c.dispatchEvent(b);else c.src=a.url}}function k(a){var b=
a.url.split("?v=")[0];if(b in J)a.Yb(J[b],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&r.K("Unsupported request type for audio element");var c=document.createElement("audio");w.allow_cors&&(c.crossOrigin="Anonymous");c.addEventListener("loadeddata",function(){40!=a.state&&(a.Yb(c,a.id,a.type,a.url,a.param),a.state=30,a.Ae&&(J[a.url.split("?v=")[0]]=c))},!1);c.addEventListener("error",function(){40!=a.state&&(l.error("could not load sound: "+a.url),a.Yb(null,a.id,a.type,a.url,
a.param),a.state=30)},!1);c.addEventListener("stalled",function(){40!=a.state&&(l.error("could not load sound: "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30)},!1);if((b=e())&&a.url in b)if(b[a.url]){var d=t(a.url);c.src="data:"+d+";base64,"+b[a.url];40!=a.state&&(a.Yb(c,a.id,a.type,a.url,a.param),a.state=30)}else H.is_ie11()?(b=document.createEvent("CustomEvent"),b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),c.dispatchEvent(b);else c.src=a.url,w.is_mobile_device&&c.load();
w.iB&&(c.autoplay=!0,c.pause());setTimeout(function(){c.FM=1},5E3)}}function x(a){function b(){40!=a.state&&(l.error("could not load video: "+a.url,a.param),a.Yb(null,a.id,a.type,a.url),a.state=30)}var c=a.url.split("?v=")[0];if(c in B)a.Yb(B[c],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&r.K("Unsupported request type for video element");var d=document.createElement("video");d.muted=!0;w.allow_cors&&(d.crossOrigin="Anonymous");d.addEventListener("loadeddata",function(){d.removeEventListener("error",
b,!1);40!=a.state&&(a.Yb(d,a.id,a.type,a.url,a.param),a.state=30,a.Ae&&(B[a.url.split("?v=")[0]]=d))},!1);d.addEventListener("error",b,!1);if((c=e())&&a.url in c)if(c[a.url]){var f=q(a.url);d.src="data:"+f+";base64,"+c[a.url];40!=a.state&&d.addEventListener("loadeddata",function(){a.Yb(d,a.id,a.type,a.url,a.param);a.state=30},!1)}else H.is_ie11()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),d.dispatchEvent(c);else d.src=a.url,w.is_mobile_device&&
d.load();if(w.iB||w.KG)d.autoplay=!0,d.pause();setTimeout(function(){d.FM=1},1E4)}}function v(a){function b(b){a.Yb(b,a.id,a.type,a.url,a.param);a.state=30;a.Ae&&(B[a.url.split("?v=")[0]]=b)}var d=a.url.split("?v=")[0];if(d in B)a.Yb(B[d],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&r.K("Unsupported request type for seq video element");var f=(d=e())&&a.url in d?new c:new XMLHttpRequest;f.open("GET",a.url,!0);f.responseType="arraybuffer";f.onreadystatechange=function(){if(40!=
a.state&&4==f.readyState)if(200==f.status||0==f.status){var c=f.response;c?h(c,b):(l.error("empty responce when trying to get "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30)}else l.error(f.status+" when trying to get "+a.url),a.Yb(null,a.id,a.type,a.url,a.param),a.state=30};f.addEventListener("progress",function(b){b.lengthComputable&&a.bI(b.loaded/b.total)},!1);f.send()}}function h(a,b){for(var c=new Int32Array(a),d=new Int8Array(a),e=c[3],f={images:[],vE:[],Dh:c[4]},h=20,g=0;g<e;g++){var k=
c[h/4],l=new Blob([d.subarray(h+4,h+4+k)],{type:"image/jpg"}),n=document.createElement("img");n.src=window.URL.createObjectURL(l);f.images.push(n);f.vE.push(l);h+=k+8-k%4}n.onload=function(){for(var a=0;a<f.images.length;a++)window.URL.revokeObjectURL(f.images[a].src);delete f.vE;b(f)}}function d(a){var b="image";switch(r.oA(a).toLowerCase()){case "jpeg":case "jpg":b+="/jpeg";break;case "png":b+="/png"}return b}function t(a){var b="audio";switch(r.oA(a).toLowerCase()){case "ogv":case "ogg":b+="/ogg";
break;case "mp3":b+="/mpeg";break;case "m4v":case "mp4":b+="/mp4";break;case "webm":b+="/webm"}return b}function q(a){var b="video";switch(r.oA(a).toLowerCase()){case "ogv":b+="/ogg";break;case "webm":b+="/webm";break;case "m4v":case "mp4":b+="/mp4"}return b}var G=u("__config"),H=u("__compat"),z=u("__pako_inflate"),l=u("__print"),F=u("__sfx"),r=u("__util"),E=u("__version"),w=G.L,f=G.ae;a.AT_ARRAYBUFFER=10;a.AT_ARRAYBUFFER_ZIP=20;a.AT_JSON=30;a.AT_JSON_ZIP=40;a.AT_TEXT=50;a.AT_AUDIOBUFFER=60;a.AT_IMAGE_ELEMENT=
70;a.AT_AUDIO_ELEMENT=80;a.AT_VIDEO_ELEMENT=90;a.AT_SEQ_VIDEO_ELEMENT=100;var y=[],D=0,N={},M={},B={},J={},C={};a.Lx=function(a){a=a.split(".");var b=Array(2);b[0]=a.slice(0,-1).join(".");b[1]=String(a.slice(-1));return b};a.CZ=function(a){if(N[a])return N[a];var b=f.prevent_caching?a+"?v="+E.get_build_version():a,c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",b,!1);c.send(null);if(200!=c.status&&c.status)r.K("Error XHR: "+c.status+", GET "+a);else{b=c.responseText;if(b.length)return N[a]=
b;r.K("Error XHR: responce is empty, GET "+a)}};a.cleanup=function(){for(var a=0;a<y.length;a++)y[a].state=40;y=[];D=0;N={}};a.enqueue=function(a,c,d,h,g){for(var k=0;k<a.length;k++){var l=a[k],l={id:l.id,type:l.type,url:l.url,Ae:l.Ae,request_method:l.request_method?l.request_method:"GET",overwrite_header:l.overwrite_header?l.overwrite_header:null,post_data:l.post_data?l.post_data:null,param:l.param?l.param:null,state:10,Yb:c||function(){},TH:d||function(){},bI:h||function(){},FS:g||null,UH:D};if(f.prevent_caching){var m=
e();m&&l.url in m||(l.url+="?v="+E.get_build_version())}y.push(l)}b(y);D++};a.update=function(){b(y);for(var a=y,c=0,d=!0,e=0;e<a.length;e++){var f=a[e];f.UH===a[c].UH?30!==f.state&&(d=!1):(d&&(a[e-1].TH(),d=e-c,a.splice(c,d),e-=d),c=e,d=30===a[e].state?!0:!1);e===a.length-1&&d&&(f=a[e],a.splice(c),f.TH())}};a.dO=function(a){return"png"==a||"jpg"==a||"jpeg"==a||"gif"==a||"bmp"==a||"dds"==a||"pvr"==a?!0:!1};a.nO=function(){M={};B={};J={};C={}}};b4w.module.__loader=function(a,u){function e(b,d,e,f){var h=F,g=G.create(),k;for(k in d){var l=c(d[k]);if(f&&l.Wb||!b&&l.ic)l.Is=!0;G.Y(g,l)}for(k in d)for(l=d[k],l.name=k,b=0;b<l.inputs.length;b++)G.I(g,d[l.inputs[b]],l,null);d=c({name:"out",Ib:a.zK,Zb:function(a,b,c,d,e){b.Mb&&(h.sC=!0);q(b)||(b.status=2);b.lH(b.id,!0);e(b,c);H.log("%cTHREAD "+b.id+": LOADED CALLBACK","color: #f0f;")},Xb:5});if(e)e=G.Er(g);else{k=G.clone(g);do{e=G.Er(k);l=[];for(b=0;b<e.length;b++){f=e[b];var n=G.$a(k,f);n.Pb&&
l.push(f)}for(b=0;b<l.length;b++)G.If(k,l[b]);l.length&&G.xz(k)}while(l.length)}G.Y(g,d);for(b=0;b<e.length;b++)f=e[b],n=G.$a(g,f),d.inputs.push(n.name),G.I(g,n,d,null);return g}function c(a){a.Pb=a.Pb||!1;a.Ib||0===a.Ib||(a.Ib=a.$d);a.inputs=a.inputs||[];a.Mm=a.Mm||!1;a.Is=a.Is||!1;a.Xb=a.Xb||0;a.Wb=a.Wb||!1;a.ic=a.ic||!1;a.status=0;a.e_=0;a.kH=0;a.Kq=a.Kq||null;return a}function b(a,b,c){b.cF(c,b);b.status=3;a.Yy--;l.debug_loading&&H.log("%cTHREAD "+b.id+": 100% LOADING END "+Math.round(performance.now()-
b.Ts)+"ms","color: #f0f;");b.qC=null;b.cF=null;l.debug_loading||(b.lh=null);b.ck=null}function n(a,b){for(var c=[],d=[],e=0;e<b.length;e++){var h=b[e];G.$a(a.lh,h).Mm&&(G.El(a.lh,h,function(d){var e=!0;G.jk(a.lh,d,function(a,b){if(!b.Mm)return e=!1,1});e&&-1==c.indexOf(d)&&-1==b.indexOf(d)&&c.push(d)}),d.push(e))}for(e=d.length-1;0<=e;e--)b.splice(d[e],1);return c}function g(a){function b(b,c){var d=G.$a(a.lh,b),e=G.$a(a.lh,c),f=e.Ib-d.Ib;f||(f=d.Pb-e.Pb);return f}var c=[],d=a.ck,e=!1;do{var h=n(a,
d);c.push.apply(c,d);0<h.length&&(e=!0);d=h}while(0<h.length);e&&c.sort(b);a.ck=c;return a.ck.length}function p(a,b,c){if(b.Is)return b.Mm=!0,l.debug_loading&&H.log("%cTHREAD "+a.id+": SKIP STAGE "+b.name,"color: #f0f;"),x(a,b),!1;if(l.debug_loading&&0==b.status){var d=k(a);H.log("%cTHREAD "+a.id+": "+d+"% "+("LOADING START "+b.name)+" "+Math.round(performance.now()-a.Ts)+"ms ","color: #f0f;")}if(!b.Zb&&!b.zk&&!b.Jq)return x(a,b),!1;if(0==b.status&&(b.status++,b.Zb))return b.Zb(c,a,b,b.Kq,x,v),!0;
if(1==b.status){if(b.zk)return b.zk(c,a,b,b.Kq,x,v),!0;b.status++}return 2==b.status&&(b.status++,b.Jq)?(b.Jq(c,a,b,b.Kq,x,v),!0):!1}function k(a){if(0==a.Mx)return 100;var b=0;G.fa(a.lh,function(c,d){a.do_not_load_resources&&d.Wb||(b+=d.kH*d.Xb)});return z.trunc(100*b/a.Mx)}function x(a,b){b.Mm=!0;b.status=3;h(a,b,1);if(l.debug_loading){var c=k(a);H.log("%cTHREAD "+a.id+": "+c+"% "+("LOADING END "+b.name)+" "+Math.round(performance.now()-a.Ts)+"ms ","color: #f0f;")}}function v(a,b,c){1>c?h(a,b,c):
b.status++}function h(a,b,c){var d=F;if(b.Zb||b.zk||b.Jq)if(b.kH=c,b=k(a),a.uF!=b||1==c)a.qC(b,performance.now()-a.Ts,a.id),a.uF=b,d.YA=!0}function d(a,b){var c=null;G.fa(a.lh,function(a,d){if(d.name==b)return c=d,1});return c}function t(){return 0==F.Yy}function q(a){return a&&(3==a.status||4==a.status)}var G=u("__graph"),H=u("__print"),z=u("__util"),l=u("__config").L;a.$d=0;a.Fg=1;a.zK=2;var F=null;a.pA=function(){return F};a.nF=function(){var a={Nf:[],Oz:0,Yy:0,sC:!1,YA:!1};return F=a};a.rF=function(a,
b,c,d,h,g,k,l,n){var f=F,r=f.Nf.length,q={id:r,Mb:0==r,status:0,wi:b,sE:"",lH:c||function(){},jH:l||!1,S_:g,Ts:0,uF:0,Mx:0,VB:!1,qC:d||function(){},cF:h||function(){},lh:null,ck:null,CA:!1,zA:!1,GA:!1,og:n};a=e(q.Mb,a,g,k);q.lh=a;b=[];c=G.LR(a);for(d=0;d<c.length;d++)b.push(c[d]);q.ck=b;G.fa(a,function(a,b){!(b.Zb||b.zk||b.Jq)||q.do_not_load_resources&&b.Wb||(q.Mx+=b.Xb)});f.Nf.push(q);f.Yy++;return q.id};a.WW=function(c){var d=F;if(d&&!t())if(d.YA)d.YA=!1;else{var e=performance.now();do{var f=d.Nf[d.Oz],
h=c[f.id];if(!q(f))if(0==f.status&&(f.status=1,f.Ts=performance.now(),f.qC(0,0,f.id),l.debug_loading&&H.log("%cTHREAD "+f.id+": 0% LOADING START 0ms","color: #f0f;")),g(f)){var k=f,n=k.ck.length;do{var r=G.$a(k.lh,k.ck[0]),z=p(k,r,h);r.Ib==a.Fg&&(k.VB=!0);r=k.ck.shift();k.ck.push(r);n--}while(!z&&0!=n)}else b(d,f,h);d.sC&&(d.Oz=(d.Oz+1)%d.Nf.length);if(f.VB){f.VB=!1;break}}while(16>performance.now()-e)}};a.VD=function(a){var c=F;b(c,a,null);a.status=4;a.Mb&&(c.sC=!0);a.lH(a.id,!1)};a.F_=v;a.vx=function(a,
b){var c=d(a,b);null!==c&&(c.Is=!0)};a.Mm=t;a.hW=q;a.is_primary_loaded=function(a){var b=F;if(!b)return!1;a|=0;return b.Nf[a]&&(3==b.Nf[a].status||2==b.Nf[a].status)};a.WR=function(b){if(l.debug_loading){var c=F;return c&&c.Nf[b]&&c.Nf[b].lh?G.xF(c.Nf[b].lh,function(b,c){if(c.Is)return"SKIPPED\n("+c.name+")";var d=c.name+"\n",e=[];e.push(c.Ib==a.Fg?"ASYNC":"SYNC");c.Pb&&e.push("BKG");c.Wb&&e.push("RES");return d+e.join(" | ")},null):null}H.error("Debug mode isn't enabled. Can not retrieve the graph.")};
a.cleanup=function(){F=null}};b4w.module.__logic_nodes=function(a,u){function e(){return function(a,c,d,e){d=e[1];var f=e[2];e=b(e[0],f.Ob);if(-1==e.state){for(var h=0;h<e.NU;h++)if(N.get_sensor_value(a,c,h)){for(var g=0;g<e.ix.length;g++)if(e.ix[g]==h){d.To==e.gW?(E.is_play(d.Ga)&&(e.state=-3),f.Ob.Yg||(e.state=1,e.Js=e.WA[g])):(e.state=1,e.Js=e.WA[g]);e.eC=h;return}e.eC=h}e.state=0}}}function c(a,b){return{name:a.name,type:a.type,label:a.label,Ka:a.slot_idx_order,Js:a.slot_idx_jump,Ba:a.frame_range[0],kb:a.frame_range[1],JQ:a.frame_range_mask?
a.frame_range_mask[0]:!0,IQ:a.frame_range_mask?a.frame_range_mask[1]:!0,LT:a.param_name,FT:a.operation,mute:a.mute,GF:a.object,ag:a.anim_name,NT:a.parse_json_vars,MT:a.parse_json_paths,nd:a.objects_paths,JH:a.nodes_paths,za:a.floats,P:a.bools,O:a.variables,dk:a.strings,$k:a.logic_functions,pH:a.logic_node_trees,ZA:a.materials_names,SI:a.shader_nd_type,Fc:a.common_usage_names,mQ:a.encode_json_vars,lQ:a.encode_json_paths,gW:b,KB:aa[a.type]?aa[a.type]:k,Zw:!1,iH:a.links,Jr:[],eA:-1,mw:null,eC:-1}}function b(a,
b,c){var d=b.Gp+1-a.Jr.length;if(0<d){for(var e=0;e<d;e++)e==d-1?a.Jr.push({qb:{},Js:-1,state:-1,ix:[],cy:-1,Cc:{},Bc:l.SLOT_ALL,vc:null}):a.Jr.push(0);c&&c(a,a.Jr[b.Gp],b)}return a.Jr[b.Gp]}function n(a,b,c){return a[0]?b[a[1]]:c[a[1]]}function g(a,b,c,d){a[0]?b[a[1]]=d:c[a[1]]=d}function p(a,b,c){switch(b.state){case 2:c.qa=a.Ka}}function k(a,b,c){switch(b.state){case 1:f.error("Unknown node type: "+a.type);break;case 2:c.qa=a.Ka}}function x(a,c){for(var d=a.Z,e=0;e<d.length;e++){var f=d[e];"SWITCH_SELECT"==
f.type&&f!=c&&(b(f,a.Ob).state=-3)}}function v(a,c,d){var h=w.get_selectable_objects(),g=b(a,d.Ob);g.ix=[];g.WA=[];for(var k in a.nd){var l=a.P[k]?n(a.O[k],c.G,d.Ob.G):w.Vc(w.Id,a.nd[k],0),l=h.indexOf(l);if(-1==l){f.error("logic script error: non-selectable object:",a.nd[k][a.nd[k].length-1]);return}g.ix.push(l);g.WA.push(a.iH[k])}g.NU=h.length;g=[];for(k=0;k<h.length;k++)g.push(N.create_selection_sensor(h[k],!1));h=e();N.create_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+H(a.label),N.CT_SHOT,
g,N.default_OR_logic_fun,h,[a,c,d])}function h(a,b,c,d,e){return c?n(a.O[b],d,e):w.Vc(w.Id,a.nd[b],0)}function d(a){var b=a.Ob.hm;return 1>=b.length?a.Z:b[b.length-1].pw.wr.Z}function t(a,b){var d=a.b4w_logic_nodes,e=b.Df,f=b.$k;b.state=1;for(var h=-1,g=0;g<d.length;g++){for(var k={Z:[],Ob:{lb:a,qa:0,Yg:!1,SC:!1,Gp:g,hm:[],G:{R1:0,R2:0,R3:0,R4:0,R5:0,R6:0,R7:0,R8:0}}},l=d[g],m=0;m<l.length;m++){var n=c(l[m],k);k.Z.push(n)}switch(k.Z[0].type){case "ENTRYPOINT":h++;k.Ob.Gp=h;e.push(k);break;case "DEF_FUNC":n=
k.Z[0],k.Ob=null,f.push({id:[n.pH.id0,n.$k.id0],wr:k})}}for(g=0;g<e.length;g++)for(k=e[g],d=0;d<k.Z.length;d++)n=k.Z[d],n.mute||n.KB(n,b,k.Ob,0,0);for(g=0;g<f.length;g++)for(e=f[g].wr,d=0;d<e.Z.length;d++)n=e.Z[d],n.mute||n.KB(n,b,0,0,0);var f=a.timeline_markers,r;for(r in f)b.Ks.push(f[r]);b.Ks.sort(function(a,b){return a-b});b.state=2;ea.push(b)}function q(a,b){switch(b){case 0:return Number(a)?Number(a):0;case 1:return String(a);case 2:return a;default:return null}}function G(a){switch(typeof a){case "string":return q(a,
1);case "number":return q(a,0);default:return q(a,1)}}function H(a){da[a]||(da[a]=0);var b=a+"_"+da[a],b=b.replace(/ /g,"_").replace(/\//g,"_");da[a]++;return b}function z(a,b){switch(b){case 0:return a.za;case 1:return a.dk;case 2:return a.nd}}var l=u("__animation"),F=u("__assets"),r=u("__camera"),E=u("__nla"),w=u("__objects"),f=u("__print"),y=u("__scenes"),D=u("__config"),N=u("__controls"),M=u("__batch"),B=u("__geometry"),J=u("__mat3"),C=u("__mat4"),A=u("__physics"),X=u("__quat"),m=u("__sfx"),K=
u("__time"),R=u("__transform"),O=u("__tsr"),S=u("__util"),ga=u("__vec3"),sa=u("__obj_util"),U=new Float32Array(4),ia=new Float32Array(3),fa=new Float32Array(3),pa=new Float32Array(2),Z=new Float32Array(9),ma=new Float32Array(16);a.Ry=0;a.BD=1;a.AD=2;a.dL=0;a.mL=1;a.iL=2;a.ZK=3;a.jL=4;a.lL=5;a.cL=6;a.nL=7;a.aL=8;a.$K=9;a.bL=10;a.eL=11;a.gL=12;a.fL=13;a.kL=14;a.hL=15;a.YK=16;a.tL=0;a.sL=1;a.uL=2;a.vL=3;a.rL=4;a.vD=0;a.xD=1;a.wD=2;a.yD=3;a.zD=4;a.uD=5;a.yL=0;a.xL=1;a.wL=2;a.UK=0;a.VK=1;a.SK=2;a.TK=3;
a.WK=0;a.XK=1;var aa={ENTRYPOINT:function(a,b,c){switch(b.state){case 2:c.hm.push({GE:null,G:c.G,pw:null}),c.qa=a.Ka}},HIDE:function(a,c,d){function e(a,b){h||(b.obj=w.Vc(w.Id,a.nd.id0,0),b.obj||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var h=a.P.id0;switch(c.state){case 2:var g=b(a,d,e);c=h?n(a.O.id0,c.G,d.G):g.obj;a.P.ch?y.Lq(c,!0):y.im(c,!0);d.qa=a.Ka}},SHOW:function(a,c,d){function e(a,b){h||(b.obj=w.Vc(w.Id,a.nd.id0,0),b.obj||(f.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0))}var h=a.P.id0;switch(c.state){case 2:var g=b(a,d,e);c=h?n(a.O.id0,c.G,d.G):g.obj;a.P.ch?y.Lq(c,!1):y.im(c,!1);d.qa=a.Ka}},PAGEPARAM:function(a,b,c){switch(b.state){case 2:var d=a.O.vd;b=b.G;var e=c.G,f;a:{f=a.LT;var h=a.za.ptp,k=a.P.hsh,l=D.get("url_params");if(l&&f in l)f=Number(l[f]);else{if(k=k?location.hash:location.search)for(k=k.slice(1).split("&"),l=0;l<k.length;l++){var m=k[l].split("=");if(1<m.length&&m[0]==f){f=q(m[1],h);break a}}f=0}}g(d,b,e,f);c.qa=a.Ka}},SWITCH_SELECT:function(a,
c,d){function e(a,b){b.state=-3}switch(c.state){case 2:var f=b(a,d,e);if(-3==f.state)f.state=-2,x(c.Df[d.Gp],a),v(a,c,c.Df[d.Gp]);else if(-2==f.state)f.state=-1;else if(0==f.state||1==f.state){if(a.O.vd&&a.O.vd[1]){var h=w.get_selectable_objects();g(a.O.vd,c.G,d.G,h[f.eC])}d.qa=f.state?f.Js:a.Ka;f.state=-3;N.remove_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+H(a.label))}}},SELECT:function(a,b){switch(b.state){case 1:f.error("Logic script error: node is deprecated. Node: ",a.name),a.mute=!0}},
PLAY:function(a,c,e,f){switch(c.state){case 1:E.uC();a.P.not_wait||(a.P.not_wait=!1);break;case 2:var h=b(a,e);switch(h.state){case -1:if(E.is_play(c.Ga))if(c.Mz==c.To&&e.Yg)break;else{var g=c.To;if(g){g.Ob.qa=d(g)[g.Ob.qa].Ka;var g=c.To,k=g.Ob.hm,l=k.length,m=[];1>=l&&m.push(g.Z);for(var n=1;n<l;n++)m.push(k[n].pw.wr.Z);for(n=0;n<m.length;n++)for(k=0;k<m[n].length;k++)l=m[n][k],"PLAY"==l.type&&(b(l,g.Ob).state=-1)}}e.Yg=!a.P.not_wait;c.To=c.Mz;h.state=0;a.JQ&&(E.mV(a.Ba),E.HI(f));if(a.IQ)E.gC(a.kb);
else{f=E.get_frame(f);var g=-1,r;for(r in c.Ks)if(f<c.Ks[r]){g=r;break}0<=g?E.gC(c.Ks[g]):E.gC(E.get_frame_end())}E.ZH(null);a.P.not_wait&&(e.qa=a.Ka,h.state=-1,e.Yg=!1);break;case 0:E.is_play()||(e.qa=a.Ka,h.state=-1,e.Yg=!1);break;case 1:e.qa=a.Ka;h.state=-1;c.To=null;e.Yg=!1;break;default:S.K("Unknown state of "+a.name),h.state=-1}}},REDIRECT:function(a,b,c){switch(b.state){case 2:window.location.href=a.P.url?q(n(a.O.url,b.G,c.G),1):a.dk.url,b.state=3}},MATH:function(a,b,c){switch(b.state){case 2:var d=
-1==a.O.id0[1]?a.za.inp1:q(n(a.O.id0,b.G,c.G),0),e=-1==a.O.id1[1]?a.za.inp2:q(n(a.O.id1,b.G,c.G),0),f=0;switch(a.FT){case 3:f=d+e;break;case 2:f=d*e;break;case 1:f=d-e;break;case 0:0==e&&S.K("Division by zero in Logic script");f=d/e;break;case 4:f=Math.random()*(e-d)+d;break;case 5:f=Math.sin(d);break;case 6:f=Math.cos(d);break;case 7:f=Math.tan(d);break;case 8:f=Math.asin(d);break;case 9:f=Math.acos(d);break;case 10:f=Math.atan(d);break;case 11:f=Math.log(d);break;case 12:f=Math.min(d,e);break;case 13:f=
Math.max(d,e);break;case 14:f=Math.round(d);break;case 15:f=d%e;break;case 16:f=Math.abs(d)}g(a.O.vd,b.G,c.G,f);c.qa=a.Ka}},CONDJUMP:function(a,b,c){switch(b.state){case 2:var d=a.Fc.variable_type,e=z(a,d),f=!1;if(2==d){var h=a.P.id0?n(a.O.id0,b.G,c.G):w.Vc(w.Id,a.nd.id0,0);b=a.P.id1?n(a.O.id1,b.G,c.G):w.Vc(w.Id,a.nd.id1,0);switch(a.Fc.condition){case 5:h==b&&(f=!0);break;case 4:h!=b&&(f=!0)}}else switch(h=-1==a.O.id0[1]?e.inp1:q(n(a.O.id0,b.G,c.G),d),b=-1==a.O.id1[1]?e.inp2:q(n(a.O.id1,b.G,c.G),
d),a.Fc.condition){case 5:h==b&&(f=!0);break;case 4:h!=b&&(f=!0);break;case 3:h<b&&(f=!0);break;case 2:h>b&&(f=!0);break;case 1:h<=b&&(f=!0);break;case 0:h>=b&&(f=!0)}c.qa=f?a.Js:a.Ka}},REGSTORE:function(a,b,c){switch(b.state){case 2:if(a.P.vs)var d=n(a.O.vs,b.G,c.G);else var d=a.Fc.variable_type,e=z(a,d),d=2==d?w.Vc(w.Id,e.id0,0):e.inp1;g([a.P["new"]&&a.P.gl||a.O.vd[0],a.O.vd[1]],b.G,c.G,d);c.qa=a.Ka}},PLAY_ANIM:function(a,c,e){function g(a,b){for(var c=-1,d=0;8>d;d++){var e=a.pa[d];if(e&&e.gj&&
l.lJ(e.gj)==l.lJ(b))if(-1!=c)c=d;else return-1}return c}function k(a,b,d){b.obj=r?w.get_world_by_name(a.GF[0],0):h(a,"id0",m,c.G,d.G);b.obj||m||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var m=a.P.id0,r=a.P.env;switch(c.state){case 2:var q=b(a,e,k);r||(q.obj=m?n(a.O.id0,c.G,e.G):q.obj);0!=q.state||l.is_play(q.obj,q.Bc)||(q.state=1);switch(q.state){case -1:for(var p in c.Df){var t=c.Df[p],y=d(t),z=t.Ob.qa;-1!=z&&(y=y[z],t=b(y,t.Ob),"PLAY_ANIM"==y.type&&y!=a&&0==t.state&&
t.obj==q.obj&&(t.state=1))}p=a.Fc.param_anim_behavior;""==a.ag?(l.apply_def(q.obj),l.set_behavior(q.obj,p,l.SLOT_ALL)):(t=g(q.obj,a.ag),-1==t?(q.Bc=l.FV(q.obj,a.ag),l.apply(q.obj,null,a.ag,q.Bc)):q.Bc=t,l.set_behavior(q.obj,p,q.Bc));a.P.not_wait||(e.Yg=!0);l.play(q.obj,null,q.Bc);q.state=0;a.P.not_wait&&(e.qa=a.Ka,q.state=-1);break;case 0:break;case 1:a.P.not_wait||(e.Yg=!1);e.qa=a.Ka;q.state=-1;break;default:S.K("Unknown state of "+a.name),q.state=-1}}},SELECT_PLAY:p,SEND_REQ:function(a,c,d){function e(a,
d,e,f,h){a=JSON.stringify(a);d=h[1];e=b(h[0],d);g(h[0].O.dst,c.G,d.G,a);e.state=1}var f=b(a,d);switch(c.state){case 2:switch(f.state){case -1:f.state=0;var f=a.P.url?q(n(a.O.url,c.G,d.G),1):a.dk.url,h={};a.P.ct&&(h["Content-Type"]=a.dk.ct);"GET"==a.Fc.request_type?F.enqueue([{id:f,type:F.AT_JSON,url:f,overwrite_header:h,param:[a,d]}],e,null,null,null):"POST"==a.Fc.request_type&&F.enqueue([{id:f,type:F.AT_JSON,url:f,overwrite_header:h,request_method:"POST",post_data:q(n(a.O.dst1,c.G,d.G),1),param:[a,
d]}],e,null,null,null);break;case 1:f.state=-1,d.qa=a.Ka}}},INHERIT_MAT:function(a,c,d){function e(a,b){for(var c=0;2>c;c++)b.qb["id"+c]=w.Vc(w.Id,a.nd["id"+c],0),b.qb["id"+c]||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}switch(c.state){case 2:c=b(a,d,e),w.inherit_material(c.qb.id0,a.ZA.id0,c.qb.id1,a.ZA.id1),d.qa=a.Ka}},SET_SHADER_NODE_PARAM:function(a,c,d){function e(a,b){a.nd.id0&&(b.qb.id0=w.Vc(w.Id,a.nd.id0,0),a.nd.id0||(f.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0),a.JH.id0.unshift(a.ZA.id0))}switch(c.state){case 2:var h=b(a,d,e).qb.id0,g=a.JH.id0,k=g[0],l=M.hb(h,k,"MAIN");d.qa=a.Ka;if(null===l)f.error('Material "'+k+'" was not found in the object "'+h.name+'".');else{if("ShaderNodeRGB"==a.SI){var m=w.Cr(l.Ff,g,1);w.set_nodemat_rgb(h,k,m,a.P.id0?q(n(a.O.id0,c.G,d.G),0):a.za.id0,a.P.id1?q(n(a.O.id1,c.G,d.G),0):a.za.id1,a.P.id2?q(n(a.O.id2,c.G,d.G),0):a.za.id2)}"ShaderNodeValue"==a.SI&&(m=w.Dr(l.Gf,g,1),w.set_nodemat_value(h,k,m,a.P.id0?q(n(a.O.id0,
c.G,d.G),0):a.za.id0))}}},DELAY:function(a,c,d,e,f){e=b(a,d);switch(c.state){case 2:-1==e.state?(e.state=0,e.cy=0,d.Yg=!0):0==e.state&&(e.cy+=f,(a.P.dl?q(n(a.O.dl,c.G,d.G),0):a.za.dl)<e.cy&&(e.state=-1,d.qa=a.Ka,d.Yg=!1))}},APPLY_SHAPE_KEY:function(a,c,d){function e(a,b){var c=b.qb.id0=w.Vc(w.Id,a.nd.id0,0);c||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);var d=a.Fc.sk;B.check_shape_keys(c)?B.BA(c,d)||(f.error("Wrong key name:",d),a.mute=!0):(f.error("No shape keys in object:",
c.name),a.mute=!0)}switch(c.state){case 2:var h=b(a,d,e);B.dz(h.qb.id0,a.Fc.sk,a.P.skv?q(n(a.O.skv,c.G,d.G),0):a.za.skv);d.qa=a.Ka}},OUTLINE:function(a,c,d){function e(a,b){h||(b.obj=w.Vc(w.Id,a.nd.id0,0),b.obj||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0),b.obj&&b.obj.A&&b.obj.A.Xc||(f.error("Can't evaluate 'Outline' logic node: wrong object"),a.mute=!0))}var h=a.P.id0;switch(c.state){case 2:var g=b(a,d,e),g=h?n(a.O.id0,c.G,d.G):g.obj;switch(a.Fc.outline_operation){case "PLAY":c=
g.A.Ji;w.apply_outline_anim(g,c.il,c.jl,c.kl);break;case "STOP":w.clear_outline_anim(g);break;case "INTENSITY":w.set_outline_intensity(g,a.P["in"]?q(n(a.O["in"],c.G,d.G),0):a.za["in"])}d.qa=a.Ka}},MOVE_CAMERA:function(a,c,d){function e(a,b,c,d){switch(r.get_move_style(a)){case r.MS_TARGET_CONTROLS:r.hC(a,b,c);break;case r.MS_EYE_CONTROLS:case r.MS_STATIC:R.set_tsr(a,d);break;case r.MS_HOVER_CONTROLS:ga.sub(c,b,ia),ga.normalize(ia,ia),r.FI(a,c),fa[0]=ia[0],fa[1]=0,fa[2]=ia[2],b=ga.dot(fa,ia),c=Math.acos(b/
(ga.length(fa)*ga.length(ia))),b=ia[2]?Math.atan(ia[0]/ia[2]):0<ia[0]?0:Math.PI,0<ia[2]&&0<ia[0]?pa[1]=-(Math.PI+pa[1]):0<ia[2]&&0>ia[0]?pa[1]=-(Math.PI+pa[1]):0>ia[2]&&0>ia[0]?(pa[0]+=Math.PI,b=-(Math.PI-b)):0>ia[2]&&0<ia[0]&&(pa[0]+=Math.PI,b-=Math.PI),r.pV(a,b+Math.PI,-c)}R.V(a);A.sync_transform(a)}function g(a,b,c,d){C.lookAt(b,c,S.AXIS_Z,ma);C.invert(ma,ma);J.fromMat4(ma,Z);X.fromMat3(Z,U);X.normalize(U,U);a=O.get_scale(a.A.D);O.set_sep(b,a,U,d)}function k(a,b,d){(b.qb.ca=h(a,"id0",l,c.G,d.G))||
l||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.qb.tr=h(a,"id1",m,c.G,d.G);b.qb.tr||m||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.qb.ta=h(a,"id2",p,c.G,d.G);b.qb.ta||p||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.state=-1;b.Cc={zJ:new Float32Array(3),yJ:new Float32Array(3),KA:new Float32Array(3),BC:new Float32Array(3),tJ:new Float32Array(3),JA:new Float32Array(3),Fl:new Float32Array(8),Ti:new Float32Array(8),
Kr:new Float32Array(8)}}var l=a.P.id0,m=a.P.id1,p=a.P.id2;switch(c.state){case 2:var t=b(a,d,k),w=l?n(a.O.id0,c.G,d.G):t.qb.ca,z=p?n(a.O.id2,c.G,d.G):t.qb.ta,v=O.get_trans_view((m?n(a.O.id1,c.G,d.G):t.qb.tr).A.D),z=O.get_trans_view(z.A.D);switch(t.state){case -1:var B=a.P.dur?q(n(a.O.dur,c.G,d.G),0):a.za.dur;if(0==B){g(w,v,z,t.Cc.Ti);e(w,v,z,t.Cc.Ti);d.qa=a.Ka;break}a=O.get_trans_view(w.A.D);ga.copy(a,t.Cc.zJ);var D=r.get_move_style(w);D==r.MS_HOVER_CONTROLS?ga.copy(w.A.wc,t.Cc.BC):D==r.MS_STATIC||
D==r.MS_EYE_CONTROLS?(O.copy(w.A.D,t.Cc.Fl),g(w,v,z,t.Cc.Ti)):ga.copy(w.A.pivot,t.Cc.BC);ga.copy(v,t.Cc.yJ);ga.copy(z,t.Cc.tJ);t.state=0;B=K.animate(0,1,1E3*B,function(a){y.Pa()&&(D==r.MS_STATIC||D==r.MS_EYE_CONTROLS?O.interpolate(t.Cc.Fl,t.Cc.Ti,S.smooth_step(a),t.Cc.Kr):(t.Cc.JA=ga.lerp(t.Cc.BC,t.Cc.tJ,S.smooth_step(a),t.Cc.JA),t.Cc.KA=ga.lerp(t.Cc.zJ,t.Cc.yJ,S.smooth_step(a),t.Cc.KA)),e(w,t.Cc.KA,t.Cc.JA,t.Cc.Kr),1==a&&(t.state=1))});break;case 1:K.clear_animation(B),t.state=-1,d.qa=a.Ka}}},SET_CAMERA_MOVE_STYLE:function(a,
c,d){function e(a,b){h.id0||(b.qb.id0=w.Vc(w.Id,a.nd.id0,0))||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);h.pvo&&!h.id1&&(b.qb.id1=w.Vc(w.Id,a.nd.id1,0))}var h=a.P;switch(c.state){case 2:var g=b(a,d,e),k=h.id0?n(a.O.id0,c.G,d.G):g.qb.id0,l=k.A;g.ON={Cl:l.Cl,use_panning:l.use_panning,Vb:l.Vb,Xa:l.Xa,Kb:l.Kb,Ed:l.Ed,Fd:l.Fd,je:l.je,ui:l.ui};if(sa.is_camera(k)){var l=k.A,m=g.ON;r.qt(k);switch(a.Fc.camera_move_style){case 0:l.pb=r.MS_STATIC;break;case 2:l.pb=r.MS_EYE_CONTROLS;
var p=O.get_trans_view(l.D);r.NI(k,p,null,m.Vb,m.Xa);break;case 3:l.pb=r.MS_HOVER_CONTROLS;var p=O.get_trans_view(l.D),t=ia;a.P.pvo?(g=h.id1?n(a.O.id1,c.G,d.G):g.qb.id1,t=O.get_trans_view(g.A.D)):(t[0]=a.P.pvx?q(n(a.O.pvx,c.G,d.G),0):a.za.pvx,t[1]=a.P.pvy?q(n(a.O.pvy,c.G,d.G),0):a.za.pvy,t[2]=a.P.pvz?q(n(a.O.pvz,c.G,d.G),0):a.za.pvz);r.OI(k,p,t,m.Kb,m.Xa,m.Ed,m.Fd,m.ui);break;case 1:l.pb=r.MS_TARGET_CONTROLS,p=O.get_trans_view(l.D),t=ia,a.P.pvo?(g=h.id1?n(a.O.id1,c.G,d.G):g.qb.id1,t=O.get_trans_view(g.A.D)):
(t[0]=a.P.pvx?q(n(a.O.pvx,c.G,d.G),0):a.za.pvx,t[1]=a.P.pvy?q(n(a.O.pvy,c.G,d.G),0):a.za.pvy,t[2]=a.P.pvz?q(n(a.O.pvz,c.G,d.G),0):a.za.pvz),r.QI(k,p,t,m.Vb,m.Xa,m.Kb,m.je,m.use_panning)}fa[0]=a.P.vtr?q(n(a.O.vtr,c.G,d.G),0):a.za.vtr;fa[1]=a.P.vro?q(n(a.O.vro,c.G,d.G),0):a.za.vro;fa[2]=a.P.vzo?q(n(a.O.vzo,c.G,d.G),0):a.za.vzo;fa[0]=S.clamp(fa[0],0,Infinity);fa[1]=S.clamp(fa[1],0,Infinity);fa[2]=S.clamp(fa[2],0,.99);l.Up=fa[0];l.Tp=fa[1];l.Vp=fa[2];R.V(k);A.sync_transform(k);r.Do(k)}else f.error("Logic script error: object is not a Camera. Node: ",
a.name);d.qa=a.Ka}},SET_CAMERA_LIMITS:function(a,c,d){function e(a,b){var c;h.id0||(c=b.qb.id0=w.Vc(w.Id,a.nd.id0,0),c||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var h=a.P;switch(c.state){case 2:var g=b(a,d,e),g=h.id0?n(a.O.id0,c.G,d.G):g.qb.id0;if(sa.is_camera(g)){switch(g.A.pb){case r.MS_TARGET_CONTROLS:if(a.P.dsl){var k=a.P.dslmin?q(n(a.O.dslmin,c.G,d.G),0):a.za.dslmin,l=a.P.dslmax?q(n(a.O.dslmax,c.G,d.G),0):a.za.dslmax,m={};m.min=Math.max(k,0);m.max=Math.max(l,
0);r.wI(g,m)}a.P.vrl&&(k=a.P.vrldown?q(n(a.O.vrldown,c.G,d.G),0):a.za.vrldown,l=a.P.vrlup?q(n(a.O.vrlup,c.G,d.G),0):a.za.vrlup,m={},m.down=k,m.up=l,m.camera_space="CAMERA"==a.Fc.cam_lim_vert_rot_space_type,r.nx(g,m));a.P.hrl&&(k=a.P.hrlleft?q(n(a.O.hrlleft,c.G,d.G),0):a.za.hrlleft,l=a.P.hrlright?q(n(a.O.hrlright,c.G,d.G),0):a.za.hrlright,m={},m.left=k,m.right=l,m.camera_space="CAMERA"==a.Fc.cam_lim_hor_rot_space_type,r.mx(g,m));a.P.pvl&&(k=a.P.pvlmin?q(n(a.O.pvlmin,c.G,d.G),0):a.za.pvlmin,c=a.P.pvlmax?
q(n(a.O.pvlmax,c.G,d.G),0):a.za.pvlmax,m={},m.min_z=k,m.max_z=c,r.II(g,m));break;case r.MS_HOVER_CONTROLS:a.P.htl&&(k=a.P.htlmin?q(n(a.O.htlmin,c.G,d.G),0):a.za.htlmin,l=a.P.htlmax?q(n(a.O.htlmax,c.G,d.G),0):a.za.htlmax,m={},m.min=k,m.max=l,r.EI(g,m));a.P.vtl&&(k=a.P.vtlmin?q(n(a.O.vtlmin,c.G,d.G),0):a.za.vtlmin,l=a.P.vtlmax?q(n(a.O.vtlmax,c.G,d.G),0):a.za.vtlmax,m={},m.min=k,m.max=l,r.LI(g,m));a.P.vrl&&(k=a.P.vrldown?q(n(a.O.vrldown,c.G,d.G),0):a.za.vrldown,l=a.P.vrlup?q(n(a.O.vrlup,c.G,d.G),0):
a.za.vrlup,m={},m.down=k,m.up=l,m.camera_space="CAMERA"==a.Fc.cam_lim_vert_rot_space_type,r.hover_set_vertical_limits(g,m));a.P.dsl&&(k=a.P.dslmin?q(n(a.O.dslmin,c.G,d.G),0):a.za.dslmin,l=a.P.dslmax?q(n(a.O.dslmax,c.G,d.G),0):a.za.dslmax,m={},m.min=Math.max(k,0),m.max=Math.max(l,0),r.hover_set_distance_limits(g,m));break;case r.MS_EYE_CONTROLS:a.P.vrl&&(k=a.P.vrldown?q(n(a.O.vrldown,c.G,d.G),0):a.za.vrldown,l=a.P.vrlup?q(n(a.O.vrlup,c.G,d.G),0):a.za.vrlup,m={},m.down=k,m.up=l,m.camera_space="CAMERA"==
a.Fc.cam_lim_vert_rot_space_type,r.nx(g,m)),a.P.hrl&&(k=a.P.hrlleft?q(n(a.O.hrlleft,c.G,d.G),0):a.za.hrlleft,l=a.P.hrlright?q(n(a.O.hrlright,c.G,d.G),0):a.za.hrlright,m={},m.left=k,m.right=l,m.camera_space="CAMERA"==a.Fc.cam_lim_hor_rot_space_type,r.mx(g,m))}R.V(g);A.sync_transform(g)}else f.error("Logic script error: object is not a Camera. Node: ",a.name);d.qa=a.Ka}},MOVE_TO:function(a,c,d){function e(a,b){R.set_tsr(a,b);R.V(a);A.sync_transform(a)}function g(a,b,d){b.qb.id0=h(a,"id0",l,c.G,d.G);
b.qb.id0||l||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.qb.id1=h(a,"id1",m,c.G,d.G);b.qb.id1||m||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.state=-1;b.vc={CF:new Float32Array(8),Rz:new Float32Array(8),JG:new Float32Array(8)}}var k=a.P,l=k.id0,m=k.id1;switch(c.state){case 2:var r=b(a,d,g),p=k.id0?n(a.O.id0,c.G,d.G):r.qb.id0;if(p.is_dynamic)switch(O.copy(p.A.D,r.vc.CF),O.copy((k.id1?n(a.O.id1,c.G,d.G):r.qb.id1).A.D,r.vc.Rz),r.state){case -1:k=
a.P.dur?q(n(a.O.dur,c.G,d.G),0):a.za.dur;if(0==k){e(p,r.vc.Rz);d.qa=a.Ka;break}r.state=0;var t=K.animate(0,1,1E3*k,function(a){y.Pa()&&(r.vc.UZ=O.interpolate(r.vc.CF,r.vc.Rz,S.smooth_step(a),r.vc.JG),e(p,r.vc.JG),1==a&&(r.state=1))});break;case 1:K.clear_animation(t),r.state=-1,d.qa=a.Ka}else f.error("Logic script error: object '"+p.name+"' must be dynamic. Node: ",a.name),d.qa=a.Ka}},TRANSFORM_OBJECT:function(a,c,d){function e(a,b,c){0==c?R.set_tsr(a,b):R.set_tsr_rel(a,b);R.V(a);A.sync_transform(a)}
var g=a.P.id0,k=b(a,d,function(a,b,d){b.obj=h(a,"id0",g,c.G,d.G);b.obj||g||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);b.state=-1;b.vc={Gx:0,Fl:new Float32Array(8),Ti:new Float32Array(8),Kr:new Float32Array(8)}});switch(c.state){case 2:var l=g?n(a.O.id0,c.G,d.G):k.obj;switch(k.state){case -1:fa[0]=a.P.trx?q(n(a.O.trx,c.G,d.G),0):a.za.trx;fa[1]=a.P["try"]?q(n(a.O["try"],c.G,d.G),0):a.za["try"];fa[2]=a.P.trz?q(n(a.O.trz,c.G,d.G),0):a.za.trz;ia[0]=a.P.rox?q(n(a.O.rox,c.G,
d.G),0)*Math.PI/180:a.za.rox;ia[1]=a.P.roy?q(n(a.O.roy,c.G,d.G),0)*Math.PI/180:a.za.roy;ia[2]=a.P.roz?q(n(a.O.roz,c.G,d.G),0)*Math.PI/180:a.za.roz;var m=a.P.sc?n(a.O.sc,c.G,d.G):a.za.sc;S.euler_to_quat(ia,U);O.set_sep(fa,m,U,k.vc.Ti);k.vc.Gx=a.Fc.space_type;switch(k.vc.Gx){case 0:R.get_tsr(l,k.vc.Fl);break;case 1:R.get_tsr_rel(l,k.vc.Fl);break;case 2:R.get_tsr_rel(l,k.vc.Fl),O.multiply(k.vc.Fl,k.vc.Ti,k.vc.Ti)}m=a.P.dur?q(n(a.O.dur,c.G,d.G),0):a.za.dur;if(0==m){e(l,k.vc.Ti,k.vc.Gx);d.qa=a.Ka;break}k.state=
0;m=K.animate(0,1,1E3*m,function(a){y.Pa()&&(O.interpolate(k.vc.Fl,k.vc.Ti,S.smooth_step(a),k.vc.Kr),e(l,k.vc.Kr,k.vc.Gx),1==a&&(k.state=1))});break;case 1:K.clear_animation(m),k.state=-1,d.qa=a.Ka}}},SPEAKER_PLAY:function(a,c,d){function e(a,b,d){b.obj=h(a,"id0",g,c.G,d.G);b.obj||g||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var g=a.P.id0;switch(c.state){case 1:void 0==a.P.not_wait&&(a.P.not_wait=!0);break;case 2:var k=b(a,d,e);k.obj=g?n(a.O.id0,c.G,d.G):k.obj;m.is_playing(k.obj)||
0!=k.state||(k.state=1);switch(k.state){case -1:for(var l in c.Df){var r=c.Df[l].Ob.qa;-1!=r&&(r=c.Df[l].Z[r],"SPEAKER_PLAY"==r.type&&r!=a&&0==k.state&&r.obj==a.obj&&(r.state=1))}a.P.not_wait||(d.Yg=!0);m.play_def(k.obj);k.state=0;break;case 0:a.P.not_wait&&(d.qa=a.Ka,k.state=-1);break;case 1:a.P.not_wait||(d.Yg=!1);d.qa=a.Ka;k.state=-1;break;default:S.K("Unknown state of "+a.name),k.state=-1}}},SPEAKER_STOP:function(a,c,d){function e(a,b,d){b.obj=h(a,"id0",g,c.G,d.G);b.obj||g||(f.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0)}var g=a.P.id0;switch(c.state){case 2:var k=b(a,d,e);m.stop(g?n(a.O.id0,c.G,d.G):k.obj);d.qa=a.Ka}},STOP_ANIM:function(a,c,d){function e(a,b,d){b.obj=k?w.get_world_by_name(a.GF[0],0):h(a,"id0",g,c.G,d.G);b.obj||g||(f.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var g=a.P.id0,k=a.P.env;switch(c.state){case 2:var m=b(a,d,e);m.obj=g?n(a.O.id0,c.G,d.G):m.obj;l.stop(m.obj,l.SLOT_ALL);a.P.rst&&l.set_first_frame(m.obj,l.SLOT_ALL);d.qa=a.Ka}},STOP_TIMELINE:function(a,
b,c,d){switch(b.state){case 2:a.P.rst&&E.HI(d),E.uC(),c.qa=a.Ka}},CONSOLE_PRINT:function(a,b,c){switch(b.state){case 2:var d=0,e="{",h;for(h in a.O){0<d&&(e+=", ");var g=n(a.O[h],b.G,c.G),e=e+('"'+a.O[h][1]+'": ');try{e+=JSON.stringify(g)}catch(Ca){e=g?e+('{"name": "'+g.name+'", "type": "'+g.type+'"}'):e+"Object"}++d}f.log(a.Fc.msg,e+"}");c.qa=a.Ka}},STRING:function(a,b,c){switch(b.state){case 2:var d=a.P.id0?q(n(a.O.id0,b.G,c.G),1):a.dk.id0,e=a.P.id1?q(n(a.O.id1,b.G,c.G),1):a.dk.id1,f=0;switch(a.Fc.string_operation){case 0:f=
d+e;break;case 1:f=d.indexOf(e);break;case 2:f=d.replace(e,a.P.id2?q(n(a.O.id2,b.G,c.G),1):a.dk.id2);break;case 3:var h=a.O,f=d.substring(0,d.indexOf(e));g(h.dst1,b.G,c.G,d.substring(d.indexOf(e)+1,d.length));""==n(h.dst,b.G,c.G)&&(f=n(h.dst1,b.G,c.G),g(h.dst1,b.G,c.G,""));break;case 4:switch(a.Fc.condition){case 5:f=d==e?1:0;break;case 4:f=d!=e?1:0;break;case 3:f=d<e?1:0;break;case 2:f=d>e?1:0;break;case 1:f=d<=e?1:0;break;case 0:f=d>=e?1:0}}g(a.O.dst,b.G,c.G,f);c.qa=a.Ka}},GET_TIMELINE:function(a,
b,c,d){switch(b.state){case 2:d=a.P.nla?q(E.get_frame(d),0):q(K.get_frame(d),0),g(a.O.vd,b.G,c.G,d),c.qa=a.Ka}},JSON:function(a,b,c){function d(a,b,c,d){for(var e=0;e<b.length;e++){for(var f=b[e].split("."),h=a,g=c[e],k=0;k<f.length&&(h=h[f[k]],void 0!==h&&null!==h);k++);h=G(h);d[g]=h}}function e(a,b,c,d){d||(d={});for(var e=0;e<b.length;e++){var f=b[e].split("."),h=d,g=c[e];if(g in a){for(var k=0;k<f.length-1;k++)void 0===h[f[k]]&&(h[f[k]]=isNaN(f[k+1])?{}:[]),h=h[f[k]];h[f[f.length-1]]=G(a[g])}}}
switch(b.state){case 2:switch(a.Fc.json_operation){case "PARSE":try{var h=JSON.parse(q(n(a.O.jsn,b.G,c.G),1));d(h,a.MT,a.NT,c.G)}catch(ca){f.error("logic script error: non valid JSON string")}break;case "ENCODE":h={},e(c.G,a.lQ,a.mQ,h),h=q(JSON.stringify(h),1),g(a.O.jsn,b.G,c.G,h)}c.qa=a.Ka}},JS_CALLBACK:function(a,b,c){switch(b.state){case 2:for(var d=a.P.cb?q(n(a.O.cb,b.G,c.G),1):a.dk.cb,e=[],h=0,k="id"+h,l=a.Fc.js_cb_params;k in l;)k=0==l[k]?w.Vc(w.Id,a.nd[k],0):n(a.O[k],b.G,c.G),e.push(k),h++,
k="id"+h;l=[];h=0;for(k="out"+h;k in a.O;)k=n(a.O[k],b.G,c.G),l.push(k),h++,k="out"+h;h=1;if(d in wa){if(h=!wa[d](e,l))for(d=0;d<l.length;d++)k="out"+d,k in a.O&&g(a.O[k],b.G,c.G,G(l[d]))}else f.error("logic script error: no custom callback with id "+d);h&&(c.qa=a.Ka)}},EMPTY:p,DATE_TIME:function(a,b,c){switch(b.state){case 2:var d=new Date,e,f,h,k,l;"L"==a.Fc.time_type?(e=d.getFullYear(),f=d.getMonth(),h=d.getDate(),k=d.getHours(),l=d.getMinutes(),d=d.getSeconds()):(e=d.getUTCFullYear(),f=d.getUTCMonth(),
h=d.getUTCDate(),k=d.getUTCHours(),l=d.getUTCMinutes(),d=d.getUTCSeconds());a.P.y&&g(a.O.y,b.G,c.G,e);a.P.M&&g(a.O.M,b.G,c.G,f);a.P.d&&g(a.O.d,b.G,c.G,h);a.P.h&&g(a.O.h,b.G,c.G,k);a.P.m&&g(a.O.m,b.G,c.G,l);a.P.s&&g(a.O.s,b.G,c.G,d);c.qa=a.Ka}},ELAPSED:function(a,b,c,d,e){switch(b.state){case 2:g(a.O.s,b.G,c.G,e),c.qa=a.Ka}},CALL_FUNC:function(a,b,c){switch(b.state){case 1:c=a.pH.id0;for(var d=a.$k.id0,e=0;e<b.$k.length;e++){var f=b.$k[e];if(f.id[0][0]==c[0]&&f.id[0][1]==c[1]&&f.id[1]==d){a.eA=e;break}}break;
case 2:d={};c.ry={};for(e in a.O){var f=a.O[e][1],h=a.dk[e];d[h]=c.G[f];e.startsWith("out")&&(c.ry[f]=h)}c.hm.push({GE:a,G:d,pw:b.$k[a.eA]});c.G=d;c.SC=!0;c.qa=b.$k[a.eA].wr.Z[0].Ka}},DEF_FUNC:p,SWITCH:function(a,b,c){switch(b.state){case 1:b=Object.keys(a.O);for(var d in b)b[d].startsWith("id")||b.splice(d,1);a.mw=b;break;case 2:var e=n(a.O.v,b.G,c.G);for(d in a.mw)if(e==n(a.O[a.mw[d]],b.G,c.G)){c.qa=a.iH[a.mw[d]];return}c.qa=a.Ka}}},ea=[],wa={},da={};a.oS=function(a,b){var c={ce:b,uI:a.name,state:0,
To:null,lb:a,Mz:null,Df:[],$k:[],Ks:[],G:{},ry:{}};a.yY=c;t(a,c)};a.update=function(a,b){var c=E.MR();if(!(0>=c))for(var d=0;d<ea.length;d++)for(var e=d,f=a,h=b,g=c,k=ea[e],l=0;l<ea[e].Df.length;l++){k.Mz=ea[e].Df[l];a:{var m=ea[e].Df[l],n=k,r=f,q=h,p=g;m.Ob.SC=!1;var t=m.Ob.hm,w=1>=t.length?m.Z:t[t.length-1].pw.wr.Z;if(w.length){for(var y=0;y<w.length;y++)w[y].Zw=!1;for(y=0;y<w.length;y++){if(0<=m.Ob.qa)var z=w[m.Ob.qa];else{if(1<m.Ob.hm.length){n=m.Ob.hm.pop().GE;t=t[t.length-1];m.Ob.qa=n.Ka;n=
m.Ob.G;m.Ob.G=t.G;for(var v in m.Ob.ry)m.Ob.G[v]=n[m.Ob.ry[v]]}break a}if(z.Zw)break a;if(z.mute){if("ENTRYPOINT"==z.type)break a;m.Ob.qa=z.Ka;z.Zw=!0}else if(z.KB(z,n,m.Ob,r,q,p),z.Zw=!0,m.Ob.SC)break a}t.splice(0,t.length)}}}};a.QM=function(a,b){wa[a]=b};a.mU=function(a){delete wa[a]};a.GU=function(a,b){for(var c=0;c<ea.length;c++)if(ea[c].uI==a){for(var c=ea[c],d=0;d<c.Df.length;d++){var e=c.Df[d].Z[0];if(e.name==b){e.P.js&&(e.mute=!1);c.Df[d].Ob.qa=0;break}}break}};a.cleanup=function(){ea.length=
0;wa={};da={}}};b4w.module.__main=function(a,u){function e(a,b,d){var e=c.get_canvas();if(e.toBlob)e.toBlob(a,b,d);else{d=atob(e.toDataURL(b,d).split(",")[1]);for(var e=new Uint8Array(d.length),h=0;h<d.length;h++)e[h]=d.charCodeAt(h);a(new Blob([e],{type:b||"image/png"}))}}var c=u("__container"),b=null,n="image/png",g=1,p="",k=!1,x=!1;a.canvas_data_url=function(a,c,d,e){k=x="undefined"===typeof e?e:!0;b=a;n=c||n;g=d||g};a.frame=function(){var a=b;a&&(k&&p&&URL.revokeObjectURL(p),e(function(b){navigator.msSaveOrOpenBlob?
a(b):(p=URL.createObjectURL(b),a(p))},n,g),b=null,n="image/png",g=1)}};b4w.module.__math=function(a,u){function e(a,b){for(var c=a[1],d=1,e=2;e<a.length;e++)4!=e&&8!=e&&Math.abs(a[e])>Math.abs(c)&&(c=a[e],d=e);for(var h=Math.floor(d/3),d=d%3,c=.5*Math.atan(2*c/(a[3*h+h]-a[3*d+d])),e=0;e<b.length;e++)b[e]=e&&4!=e&&8!=e?0:1;b[d+3*h]=-Math.sin(c);b[h+3*d]=Math.sin(c);b[h+3*h]=Math.cos(c);b[d+3*d]=Math.cos(c);return b}function c(a){return Math.sqrt(a[1]*a[1]+a[2]*a[2]+a[5]*a[5])}function b(a,b){for(var c=a.content[b];0<b;){var d=(b+1>>1)-1,e=a.content[d];if(a.kn(c)<a.kn(e))a.content[d]=
c,a.content[b]=e,b=d;else break}}function n(a,b){for(var c=a.content.length,d=a.content[b],e=a.kn(d);;){var h=b+1<<1,g=h-1,k=null;if(g<c){var f=a.kn(a.content[g]);f<e&&(k=g)}h<c&&a.kn(a.content[h])<(null===k?e:f)&&(k=h);if(null!==k)a.content[b]=a.content[k],a.content[k]=d,b=k;else break}}function g(a,b,c,d){return c-p(d-a,0,c,d)+b}function p(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*
a+.984375)+b}var k=u("__mat3"),x=u("__vec3"),v=new Float32Array(3),h=new Float32Array(9),d=new Float32Array(9),t=new Float32Array(9),q=new Float32Array(9);a.get_pline_directional_vec=function(a,b){b=b||new Float32Array(3);b[0]=a[3];b[1]=a[4];b[2]=a[5];return b};a.get_pline_initial_point=function(a,b){b=b||new Float32Array(3);return x.copy(a,b)};a.set_pline_initial_point=function(a,b){x.copy(b,a)};a.set_pline_directional_vec=function(a,b){x.normalize(b,v);a[3]=v[0];a[4]=v[1];a[5]=v[2]};a.calc_pline_point=
function(a,b,c){c=c||new Float32Array(3);c[0]=a[0]+a[3]*b;c[1]=a[1]+a[4]*b;c[2]=a[2]+a[5]*b;return c};a.MN=function(a,b){b[0]=0;b[1]=0;for(var c=b[2]=0;c<a.length;c+=3)b[0]+=a[c],b[1]+=a[c+1],b[2]+=a[c+2];return x.scale(b,3/a.length,b)};a.IN=function(a,b,c){for(var d=0;d<c.length;d++)c[d]=0;for(d=0;d<a.length;d+=3){var e=a[d]-b[0],h=a[d+1]-b[1],g=a[d+2]-b[2];c[0]+=e*e;c[1]+=e*h;c[2]+=e*g;c[4]+=h*h;c[5]+=h*g;c[8]+=g*g}c[3]=c[1];c[6]=c[2];c[7]=c[5];for(d=0;d<c.length;d++)c[d]*=3/a.length;return c};
a.AQ=function(a,b){var g=k.copy(a,h);if(5E-4>c(g))return k.identity(b);var l=e(g,d),n=k.transpose(l,t);k.multiply(g,n,q);k.multiply(l,q,g);for(var r=k.copy(l,b),p=1;5E-4<=c(g)&&100>p;)l=e(g,d),n=k.transpose(l,t),k.multiply(g,n,q),k.multiply(l,q,g),k.multiply(l,r,r),p++;return r};a.point_plane_dist=function(a,b){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]};a.tN=function(a){return{content:[],kn:a}};a.rE=function(a,c){a.content.push(c);b(a,a.content.length-1)};a.uN=function(a){var b=a.content[0],c=a.content.pop();
0<a.content.length&&(a.content[0]=c,n(a,0));return b};a.KY=function(a,c){var d=a.content.indexOf(c),e=a.content.pop();d!==a.content.length-1&&(a.content[d]=e,a.kn(e)<a.kn(c)?b(d):n(d))};a.vN=function(a,c){b(a,a.content.indexOf(c))};a.linear_tween=function(a,b,c,d){return c*a/d+b};a.ease_in_quad=function(a,b,c,d){return c*(a/=d)*a+b};a.ease_out_quad=function(a,b,c,d){return-c*(a/=d)*(a-2)+b};a.ease_in_out_quad=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b};a.ease_in_cubic=function(a,
b,c,d){return c*(a/=d)*a*a+b};a.ease_out_cubic=function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b};a.ease_in_out_cubic=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b};a.ease_in_quart=function(a,b,c,d){return c*(a/=d)*a*a*a+b};a.ease_out_quart=function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b};a.ease_in_out_quart=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b};a.ease_in_quint=function(a,b,c,d){return c*(a/=d)*a*a*a*a+b};a.ease_out_quint=function(a,b,c,d){return c*
((a=a/d-1)*a*a*a*a+1)+b};a.ease_in_out_quint=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b};a.ease_in_sine=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b};a.ease_out_sine=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b};a.ease_in_out_sine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b};a.ease_in_expo=function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b};a.ease_out_expo=function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b};a.ease_in_out_expo=
function(a,b,c,d){return 0==a?b:a==d?b+c:1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b};a.ease_in_circ=function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b};a.ease_out_circ=function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b};a.ease_in_out_circ=function(a,b,c,d){return 1>(a/=d/2)?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b};a.ease_in_elastic=function(a,b,c,d){var e=0,h=c;if(0==a)return b;if(1==(a/=d))return b+c;e||(e=.3*d);h<Math.abs(c)?(h=c,c=e/4):c=e/(2*
Math.PI)*Math.asin(c/h);return-(h*Math.pow(2,10*--a)*Math.sin(2*(a*d-c)*Math.PI/e))+b};a.ease_out_elastic=function(a,b,c,d){var e,h=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;h||(h=.3*d);g<Math.abs(c)?(g=c,e=h/4):e=h/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/h)+c+b};a.ease_in_out_elastic=function(a,b,c,d){var e,h=0,g=c;if(0==a)return b;if(2==(a/=d/2))return b+c;h||(h=.3*d*1.5);g<Math.abs(c)?(g=c,e=h/4):e=h/(2*Math.PI)*Math.asin(c/g);return 1>a?-.5*g*Math.pow(2,
10*--a)*Math.sin(2*(a*d-e)*Math.PI/h)+b:g*Math.pow(2,-10*--a)*Math.sin(2*(a*d-e)*Math.PI/h)*.5+c+b};a.ease_in_back=function(a,b,c,d,e){void 0==e&&(e=1.70158);return c*(a/=d)*a*((e+1)*a-e)+b};a.ease_out_back=function(a,b,c,d,e){void 0==e&&(e=1.70158);return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b};a.ease_in_out_back=function(a,b,c,d,e){void 0==e&&(e=1.70158);return 1>(a/=d/2)?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b};a.ease_in_bounce=g;a.ease_out_bounce=p;a.ease_in_out_bounce=
function(a,b,c,d){return a<d/2?.5*g(2*a,0,c,d)+b:.5*p(2*a-d,0,c,d)+.5*c+b}};b4w.module.__navmesh=function(a,u){function e(a,c){function d(a){var b=a[0];a[0]=a[1];a[1]=a[2];a[2]=b}for(var e=a.Nl,f=c.Nl,h=[],g=0;g<e.length;g++)0<=b(f,e[g])&&h.push(e[g]);if(2>h.length)return[];0<=b(h,e[0])&&0<=b(h,e[e.length-1])&&d(e);0<=b(h,f[0])&&0<=b(h,f[f.length-1])&&d(f);h=[];for(g=0;g<e.length;g++)0<=b(f,e[g])&&h.push(e[g]);return h}function c(a){function b(a){for(var c=a.eh,d=0;d<c.length;d++){var e=c[d];void 0==e.island&&(e.island=a.island,b(e))}}a=a.XT;for(var c=[],d=0,e=0;e<a.length;e++){var f=
a[e];void 0==f.island&&(f.island=d++,b(f));c[f.island]||(c[f.island]=[]);c[f.island].push(a[e])}return c}function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function n(a){function b(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c}for(var d={},f=a.Xp,h=0;h<f.length;h++)f[h][0]=parseFloat(f[h][0].toFixed(2)),f[h][1]=parseFloat(f[h][1].toFixed(2)),f[h][2]=parseFloat(f[h][2].toFixed(2));d.Xp=a.Xp;a=c(a);d.PA=[];for(h=0;h<a.length;h++){for(var f=
[],g=a[h],k=0;k<g.length;k++){for(var l=[],m=g[k],n=0;n<m.eh.length;n++)l.push(b(g,m.eh[n]));for(var q=[],n=0;n<m.eh.length;n++)q.push(e(m,m.eh[n]));m.fd[0]=parseFloat(m.fd[0].toFixed(2));m.fd[1]=parseFloat(m.fd[1].toFixed(2));m.fd[2]=parseFloat(m.fd[2].toFixed(2));f.push({id:b(g,m),eh:l,Nl:m.Nl,fd:m.fd,Wc:m.Wc,YT:q,cA:0,xr:0,Ub:0,BO:1,$C:!1,closed:!1,parent:null})}d.PA.push(f)}return d}function g(a,b,c,d,e){function f(a,b){F.subtract(a,b,E);return F.dot(E,E)}function h(a,b){for(var c=[],d=0;d<b.eh.length;d++)c.push(a[b.eh[d]]);
return c}(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.cA=0;c.xr=0;c.Ub=0;c.BO=1;c.$C=!1;c.closed=!1;c.parent=null}})(a);var g=H.tN(function(a){return a.cA});for(H.rE(g,b);0<g.content.length;){var k=H.uN(g);if(k===c){a=k;for(c=[];a.parent;)c.push(a),a=a.parent;c.push(b);return c.reverse()}k.closed=!0;for(var l=h(a,k),m=0,n=l.length;m<n;m++){var q=l[m];if(!q.closed){var r=k.xr+F.dist(q.fd,k.fd),p=q.$C;if(!p||r<q.xr)q.$C=!0,q.parent=k,q.Ub=q.Ub||f(q.fd,e)+f(q.fd,d),q.xr=r,q.cA=q.xr+q.Ub,p?H.vN(g,
q):H.rE(g,q)}}}return[]}function p(a,b){a.push(b[0]);a.push(b[1]);a.push(b[2])}function k(a,b,c,d){b=F.subtract(b,a,E);a=F.subtract(c,a,w);a=F.cross(b,a,E);return l.sign(F.dot(d,a))}function x(a,b){F.subtract(a,b,E);return 1E-5>F.dot(E,E)}function v(a,b,c){var d=F.subtract(b.right,b.left,E),e=c.Wc,f=b.Wc;c=Math.acos(F.dot(e,f));e=l.sign(F.dot(d,F.cross(e,f,w)));c*=-e;e=z.identity(B);z.translate(e,b.left,e);z.rotate(e,c,d,e);z.translate(e,F.scale(b.left,-1,w),e);z.multiply(a,e,a)}function h(a,b,c,
d,e,h,g,k,l){for(var m=z.identity(N),n=e;n<c;n++)if(a[n].RG&&(n>e||!n)){var q,t=b,w=d;q=a[n].left;var B=a[n].right,x=h,C=m,u=F.create(),J=F.transformMat4(q,C,f);J[3]=1;C=F.transformMat4(B,C,E);C=F.subtract(C,J,y);t=F.subtract(w,t,E);x=F.cross(x,t,D);.01>Math.abs(F.dot(x,C))?w=.5:(F.normalize(x,x),x[3]=-F.dot(x,w),w=-r.dot(x,J)/r.dot(x,C));B=F.subtract(B,q,E);q=F.scaleAndAdd(q,B,w,u);p(g,q);k&&p(l,a[n].Wc);n&&v(m,a[n],a[n-1])}}function d(a,b){function c(b,c){y=w=t=c;l=g=f=b;F.copy(b,n);F.copy(b,q);
F.copy(a[t].Wc,r)}var d=[],e=[],f,g,l,n,q,r,t=0,w=0,y=0;f=a[0].right;g=a[0].left;l=a[0].right;n=F.copy(g,J);q=F.copy(l,C);r=F.copy(a[0].Wc,m);p(d,f);b&&p(e,a[0].Wc);for(var B=z.identity(M),D=1;D<a.length;D++){var u=a[D].left,E=a[D].right,G=F.transformMat4(u,B,A),H=F.transformMat4(E,B,X);a[D].RG&&v(B,a[D],a[D-1]);if(0>=k(f,q,H,r)){var N=x(f,l);if(N||0<k(f,n,H,r))l=E,F.copy(H,q),y=D;else{(u=x(n,f))||h(a,n,w,f,t,r,d,b,e);B=z.identity(B);c(g,w);D=t;u||(p(d,f),b&&p(e,a[D].Wc));continue}}0<=k(f,n,G,r)&&
((N=x(f,g))||0>k(f,q,G,r)?(g=u,F.copy(G,n),w=D):((u=x(q,f))||h(a,q,y,f,t,r,d,b,e),B=z.identity(B),c(l,y),D=t,u||(p(d,f),b&&p(e,a[D].Wc))))}B=a.length-1;D=a[B].left;(u=x(f,D))||h(a,n,B,f,t,r,d,b,e);u&&t||p(d,D);return b?(p(e,a[B].Wc),{positions:new Float32Array(d),normals:new Float32Array(e)}):{positions:new Float32Array(d),normals:null}}function t(a,b,c,d,e){for(var f=null,h=Number.MAX_VALUE,g=0;g<a.length;g++){var k=a[g],l=e(c,k.fd,k.Nl,b,h);l<h&&(f=k,h=l)}return 0<d&&h>d?null:f}function q(a,b,c,
d,e){a.push({left:b,right:c,RG:d,Wc:e})}var G=u("__geometry"),H=u("__math"),z=u("__mat4"),l=u("__util"),F=u("__vec3"),r=u("__vec4"),E=F.create(),w=F.create(),f=r.create(),y=r.create(),D=r.create(),N=z.create(),M=z.create(),B=z.create(),J=F.create(),C=F.create(),A=F.create(),X=F.create(),m=F.create();a.zT=function(a){var b=G.sA(a.kc,G.Ln),c=a.ee;a=[];for(var d=0;d<c.length;d+=3)a.push({Aa:new Uint32Array([c[d],c[d+1],c[d+2]]),fd:new Float32Array(3),Wc:new Float32Array(3)});c=[];for(d=0;d<b.length;d+=
3){var e=new Float32Array(3);e[0]=b[d];e[1]=b[d+1];e[2]=b[d+2];c.push(e)}for(b=0;b<a.length;b++)d=a[b],F.add(c[d.Aa[0]],c[d.Aa[1]],E),F.add(E,c[d.Aa[2]],E),F.scale(E,1/3,d.fd);for(b=0;b<a.length;b++){var d=a[b],e=F.subtract(c[d.Aa[1]],c[d.Aa[0]],E),f=F.subtract(c[d.Aa[2]],c[d.Aa[0]],w),e=F.cross(e,f,E);F.normalize(e,e);F.copy(e,d.Wc)}for(var h={},b=[],d=[],g,k,l=Math.pow(10,4),e=0,f=c.length;e<f;e++)g=c[e],k=Math.round(g[0]*l)+"_"+Math.round(g[1]*l)+"_"+Math.round(g[2]*l),void 0===h[k]?(h[k]=e,b.push(g),
d[e]=b.length-1):d[e]=d[h[k]];h=[];e=0;for(f=a.length;e<f;e++)for(g=a[e],g.Aa[0]=d[g.Aa[0]],g.Aa[1]=d[g.Aa[1]],g.Aa[2]=d[g.Aa[2]],g=[g.Aa[0],g.Aa[1],g.Aa[2]],k=0;3>k;k++)if(g[k]==g[(k+1)%3]){h.push(e);break}for(e=h.length-1;0<=e;e--)a.splice(h[e],1);for(e=c.length=0;e<b.length;e++)c.push(b[e]);d=[];for(b=e=0;b<a.length;b++)f=a[b],d.push({id:e++,Nl:f.Aa,fd:f.fd,Wc:f.Wc,eh:[]});a={XT:d,Xp:c};c={};for(b=0;b<d.length;b++)for(e=0;3>e;e++)f=d[b].Nl[e],h=d[b].Nl[(e+1)%3],f=f>h?h+"-"+f:f+"-"+h,f in c||(c[f]=
[]),c[f].push(d[b]);d=Object.keys(c);b=0;for(h=d.length;b<h;b++)for(f=d[b],e=0;e<c[f].length;e++)for(g=e+1;g<c[f].length;g++)c[f][e].eh.push(c[f][g]),c[f][g].eh.push(c[f][e]);return n(a)};a.navmesh_get_island=function(a,b,c){for(var d=null,e=Number.MAX_VALUE,f=a.PA,h=0;h<f.length;h++)for(var g=0;g<f[h].length;g++){var k=f[h][g];F.subtract(k.fd,b,E);k=c(b,k.fd,k.Nl,a.Xp,e);k<e&&(d=h,e=k)}return d};a.DS=function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(c[b[e]]);b=!1;c=-1;for(var e=d.length,f=e-
1;++c<e;f=c)(d[c][1]<=a[1]&&a[1]<d[f][1]||d[f][1]<=a[1]&&a[1]<d[c][1])&&a[0]<(d[f][0]-d[c][0])*(a[1]-d[c][1])/(d[f][1]-d[c][1])+d[c][0]&&(b=!b);return b?!0:!1};a.navmesh_find_path=function(a,b,c,e){var f;f=a.PA[e.island];var h=a.Xp,k=t(f,h,b,e.allowed_distance,e.distance_to_closest);f=k?(h=t(f,h,c,e.allowed_distance,e.distance_to_farthest))?g(f,k,h,b,c):null:null;if(f&&f.length)if(e.do_not_pull_string)if(c=f,e.return_normals){b=new Float32Array(3*c.length);for(f=0;f<c.length;f++)b.set(c[f].fd,3*f);
c={positions:b,normals:null}}else{b=new Float32Array(3*c.length);a=new Float32Array(3*c.length);for(f=0;f<c.length;f++)b.set(c[f].fd,3*f),a.set(c[f].Wc,3*f);c={positions:b,normals:a}}else{a=a.Xp;e=e.return_normals;k=[];q(k,b,b,!1,f[0]&&f[0].Wc||l.AXIS_Z);for(b=0;b<f.length;b++){var m=f[b];if(h=f[b+1]){var n=.999>Math.abs(F.dot(m.Wc,h.Wc));a:{for(var r=0;r<m.eh.length;r++)if(m.eh[r]===h.id){m=m.YT[r];break a}m=void 0}q(k,a[m[0]],a[m[1]],n,h.Wc)}}q(k,c,c,!1,k[k.length-1].Wc);c=d(k,e)}else c=null;return c}};b4w.module.__nla=function(a,u){function e(a,b){for(var c=d.$Q(),e=[],f=0,h=0;h<a.length;h++){var g=a[h];""!=g.qq?g=r.keysearch("uuid",g.qq,c):(g=g.ag,g=r.keysearch("name",g,c)||r.keysearch("name",g+"_B4W_BAKED",c));if(g){var g=g.fcurves,k=[],l;for(l in g)k.push(l);e.push(k)}}for(h=0;h<e.length;h++){c=!1;for(l=0;l<h;l++)if(r.gN(e[h],e[l])){a[h].Bc=a[l].Bc;c=!0;break}c||(a[h].Bc=b+f++)}return f}function c(){return{type:"CLIP",Ba:0,kb:0,Vj:!1,paused:!1,ag:"",qq:"",Bc:0,Zm:null,wk:0,Ul:0,LF:0,KF:0,ZJ:!1,
scale:1,repeat:1,XD:0}}function b(a,c,d){if(a.animation_data){var e=a.animation_data.nla_tracks;if(e)for(var f=0;f<e.length;f++)e[f].Zm=d,c.push(e[f])}a=a.nodes;for(f=0;f<a.length;f++)if(e=a[f],e.node_group){var h=e.node_group.node_tree;if(h){var g=d.slice();g.push(e.name);b(h,c,g)}}}function n(a,b){var c=Math.round(a)-b.Ba;b.kk&&(c%=b.Mk,0>c&&(c+=b.Mk));return b.hc+c}function g(a,b){var c=(b-w)*F.Dd()+a.hc;c>a.Ba?(c-=a.Ba,a.cyclic&&(c%=a.kb-a.Ba+1),c+=a.Ba):c=a.Ba;return c}function p(a,b){a=r.clamp(a,
b.Ba,b.kb);var c=a==b.kb?b.XD:b.wk+(a-b.Ba)/b.scale%(b.Ul-b.wk);b.ZJ&&(c=b.Ul-c+b.wk);return c}function k(a,b){for(var d=[],e=0;e<a.length;e++){var f=a[e],h=f.strips;if(h)for(var g=0;g<h.length;g++){var k=h[g],l=c();l.type=k.type;l.Ba=k.frame_start;l.kb=k.frame_end;l.Bc=b;l.wk=k.action_frame_start;l.Ul=k.action_frame_end;l.ZJ=k.use_reverse;l.scale=k.scale;l.repeat=k.repeat;k.action&&(l.ag=k.action.name,l.qq=k.action.uuid,l.Zm=f.Zm);d.push(l)}}return d}function x(a){return("SPEAKER"==a.type||"LAMP"==
a.type)&&a.data.animation_data&&a.data.animation_data.nla_tracks.length?!0:!1}function v(a){if("MESH"!=a.type||!a.data)return!1;a=a.data.materials;if(!a)return!1;for(var b=0;b<a.length;b++){var c=a[b],d=c.Nd;if(c=c.Eg&&d)a:{if(d.animation_data&&(c=d.animation_data.nla_tracks)&&c.length){c=!0;break a}d=d.nodes;for(c=0;c<d.length;c++);c=!1}if(c)return!0}return!1}function h(a,b){var c=H.get_active();if(c.Ga){var d=g(c.Ga,b);c.Ga.hc-=d-a;c.Ga.qo=!0}}var d=u("__animation"),t=u("__objects"),q=u("__obj_util"),
G=u("__print"),H=u("__scenes"),z=u("__sfx"),l=u("__textures"),F=u("__time"),r=u("__util"),E=[],w=-1;a.Lp=function(a,d){for(var f,h=null,g=d.S.length-1;0<=g&&(f=d.S[g],!f.lb.b4w_use_nla||(h=f,!f.lb.TD));g--);if(f=h){f.OH=!0;h=0;if((g=a.animation_data)&&g.nla_tracks.length){var l=g.nla_tracks;if(q.is_armature(d)||q.is_camera(d)||q.is_mesh(d)||q.is_empty(d)||q.is_line(d)||q.is_lamp(d)||q.is_speaker(d)||q.is_world(d))l=k(l,h),l.length&&(d.Ze=d.Ze.concat(l),h++)}x(a)&&(l=a.data.animation_data.nla_tracks,
l=k(l,h),l.length&&(d.Ze=d.Ze.concat(l),h++));if(q.is_mesh(d))for(var n=d.nc,g=0;g<n.length;g++){var r=n[g];r.Eg&&r.Nd&&(l=[],b(r.Nd,l,[r.name]),l=k(l,h),l.length&&(h+=e(l,h),d.Ze=d.Ze.concat(l)))}if(q.is_world(d))a.use_nodes&&a.node_tree&&(l=[],b(a.node_tree,l,[a.name]),l=k(l,h),l.length&&(e(l,h),d.Ze=d.Ze.concat(l)));else{for(g=0;g<a.particle_systems.length;g++)l=a.particle_systems[g],n=l.settings,"EMITTER"==n.type&&n.b4w_allow_nla&&(n=c(),n.type="CLIP",n.Ba=f.lb.frame_start,n.kb=f.lb.frame_end+
1,n.ag=l.name,n.Bc=h,n.wk=n.Ba,n.Ul=n.kb,d.Ze.push(n),h++);f=h+1;for(g=0;g<d.bd.length;g++)l=d.bd[g],l.IM&&(h=f,n=c(),n.type="CLIP",n.Ba=l.Ba,n.kb=l.kb,n.ag=l.name,n.Bc=h,n.wk=n.Ba,n.Ul=n.kb,d.Ze.push(n))}}};a.VW=function(a,b,d){a.Ga||(a.Ga={Ba:a.frame_start,kb:a.frame_end,hc:0,Sr:-1,rs:a.frame_end,ss:a.frame_start,yn:null,cyclic:b,qb:[],na:[],uI:a.name,Yk:!1,qo:!1,WB:!0},E.push(a.Ga));b=a.Ga;for(var e=t.pG(a,"ALL",d),f=0;f<e.length;f++){var h=e[f];if(h.Ze.length){b.qb[d]||(b.qb[d]=[]);for(var g=
0;g<h.S.length;g++){var k=h.S[g];k.lb==a&&k.OH&&b.qb[d].push(h)}for(var g=h.Ze,k=b,l=h.name,n=0;n<g.length;n++){var m=g[n];k.Ba>m.kb||k.kb<m.Ba?(G.warn("NLA: Strip is out of scene range: "+(l+" ["+m.Ba+":"+m.kb+"]")),g.splice(n,1),n--):m.ag||"CLIP"!=m.type||(G.warn('NLA: no action in strip for object "'+l+'".'),g.splice(n,1),n--)}h=h.Ze;g=b;for(k=0;k<h.length;k++){for(var l=h[k],n=g.Ba,m=g.kb+1,q=0;q<h.length;q++){var p=h[q];l.Bc==p.Bc&&(p.kb<=l.Ba&&(n=l.Ba),p.Ba>=l.kb&&(m=Math.min(m,p.Ba)))}l.LF=
n;l.KF=m;l.XD=l.repeat%1?l.wk+l.repeat%1*(l.Ul-l.wk):l.Ul}}}a=a.J.Yp;for(f=0;f<a.length;f++)e=a[f].J,e.Kl&&(e.ib||e.Hd)&&e.$p==d&&(h=c(),h.type="VIDEO",e.kk?(h.Ba=0,h.kb=b.kb):(h.Ba=r.clamp(e.Ba,0,b.kb),h.kb=r.clamp(e.Ba+e.Mk,0,b.kb)),h.ag=a[f].name,b.na.push(e))};a.$T=function(){for(var a=0;a<E.length;a++)for(var b=E[a],c=0;c<b.qb.length;c++){var e=b.qb[c];if(e)for(a=0;a<e.length;a++)for(var h=e[a],g=h.Ze,k=0;k<g.length;k++){var l=g[k];d.jS(h,l.Zm,l.Jc,l.ag,l.Bc)}}};a.start=function(){w=0};a.MR=
function(){return w};a.zZ=function(a){return a.Ga?a.Ga.hc:null};a.u_=function(a,b){return a.Ga?(a.Ga.hc=b,!0):!1};a.update=function(a,b){if(!(0>w)){0==w&&(w=a);for(var c=0;c<E.length;c++){var e=E[c];e.Yk&&(e.hc-=F.Dd()*b);var f=g(e,a);if((!e.Yk||e.qo)&&f>=e.rs)if(e.cyclic){var f=e,k=a;f.yn&&f.yn();h(f.ss,k);f.WB=!0;f=g(f,k)}else{var k=e,q=f;k.Yk=!0;k.hc-=q-k.rs;k.yn&&k.yn()}if(!e.Yk||e.qo){for(var k=e,q=f,t=0;t<k.qb.length;t++){var y=k.qb[t];if(y)for(var v=0;v<y.length;v++){for(var m=y[v],x=m.Ze,
u=0;u<x.length;u++){var G=x[u];"SOUND"==G.type&&q<k.Sr-1E-6&&(G.Vj=!1)}for(u=0;u<x.length;u++)switch(G=x[u],G.type){case "CLIP":if(G.LF<=q&&q<G.KF&&!G.Vj){var t=m,H=G,ga=H.Zm;""!=H.qq?d.bN(t,ga,H.qq,H.Bc):d.apply(t,ga,H.ag,H.Bc);d.set_behavior(t,d.AB_FINISH_STOP,H.Bc);ga=p(H.Ba,H);d.set_frame(t,ga,H.Bc);for(t=0;t<x.length;t++)x[t]!=G&&x[t].Bc==G.Bc&&(x[t].Vj=!1);G.Vj=!0}G.Vj&&(H=m,ga=p(q,G),1E-6<Math.abs(ga-d.lA(H,G.Bc))&&d.set_frame(H,ga,G.Bc));break;case "SOUND":if((q<k.Sr-1E-6||k.Sr<G.Ba)&&G.Ba<=
q&&q<G.kb&&!G.Vj){var H=m,sa=G,ga=(sa.Ba-q)/F.Dd(),sa=(sa.kb-sa.Ba)/F.Dd();z.play(H,ga,sa);G.Vj=!0}k.Sr<G.kb&&G.kb<=q&&G.Vj&&(G.Vj=!1)}}}k=a;q=e;y=f;for(v=0;v<q.na.length;v++)if(m=q.na[v],m.ib||m.Hd){x=l.jK(m);u=m;G=r.clamp(n(y,u),u.hc,u.hc+l.kK(u)-1);u.Hd&&(G=l.oX(u,G),G==u.Ds&&G--);u=G;G=l.lK(m);H=t=!1;if(q.qo||q.WB)H=!0;q.Yk||(ga=n(y,m),ga=m.hc<=ga&&ga<=m.hc+l.kK(m),sa=l.mK(m),m.kk&&u==G&&(H=!0),sa||x==u||(H=!0),ga&&!sa?l.play_video(m):ga&&sa?t=!0:!ga&&sa&&(m.ib&&x<u?t=!0:l.pause_video(m)));H?
(l.aV(m.mt,u,m.$p),m.Hd&&(m.sl=l.jx(m,k))):t&&l.nK(m)&&(m.ib?l.QJ(m):(x=l.jx(m,k),x!=m.sl&&(m.Xj=u,l.PJ(m)),m.sl=x))}e.Sr=f}e.qo=!1;e.WB=!1}}};a.cleanup=function(a){if(0==a)E.length=0,w=-1;else for(var b=0;b<E.length;b++)E[b].qb[a]=null};a.xE=function(a){var b=a.animation_data;return b&&b.nla_tracks.length||x(a)||v(a)?!0:!1};a.set_frame=h;a.get_frame=function(a){var b=H.get_active();return b.Ga?g(b.Ga,a):-1};a.uC=function(){var a=H.get_active();if(a.Ga){a.Ga.Yk=!0;for(var a=a.Ga.na,b=0;b<a.length;b++)l.pause_video(a[b])}};
a.ZH=function(a){var b=H.get_active();b.Ga&&(b.Ga.Yk=!1,a?b.Ga.yn=a:b.Ga.yn=null)};a.get_frame_start=function(){var a=H.get_active();return a.Ga?a.Ga.Ba:-1};a.get_frame_end=function(){var a=H.get_active();return a.Ga?a.Ga.kb:-1};a.is_play=function(){var a=H.get_active();return a.Ga?!a.Ga.Yk:!1};a.check_nla=function(){var a=H.get_active();return a.Ga?a.b4w_use_nla:!1};a.check_logic_nodes=function(){var a=H.get_active();return a.Ga?0<a.b4w_logic_nodes.length:!1};a.set_range=function(a,b){var c=H.get_active();
if(c.Ga)c.Ga.ss=a,c.Ga.rs=b;else return!1};a.gC=function(a){var b=H.get_active();b.Ga&&(b.Ga.rs=a)};a.mV=function(a){var b=H.get_active();b.Ga&&(b.Ga.ss=a)};a.reset_range=function(){var a=H.get_active();if(a.Ga)a=a.Ga,a.ss=a.Ba,a.rs=a.kb;else return!1};a.set_cyclic=function(a){var b=H.get_active();if(b.Ga)b.Ga.cyclic=a;else return!1};a.clear_callback=function(){var a=H.get_active();a.Ga&&(a.Ga.yn=null)};a.HI=function(a){var b=H.get_active().Ga;b&&(b.hc=-(a-w)*F.Dd()+b.ss,b.qo=!0)};a.get_frame_end=
function(){var a=H.get_active().Ga;return a?a.kb:null}};b4w.module.__camera=function(a,u){function e(a,b,c,d,e){Ia.set_translation(a,b);c&&r(a,b,c);D(a,d);N(a,e)}function c(a,b,c,d,e,f,h,g){var k=a.A;Ia.set_translation(a,b);k.pivot.set(c);r(a,b,c);D(a,d);N(a,e);C(a,f);A(a,h);k.use_panning=g}function b(a,b,c,d,e,f,h,g){var k=a.A;Ia.set_translation(a,b);k.wc.set(c);r(a,b,c);J(a,d);M(a,e);X(a,f);m(a,h);k.ui=g}function n(a,b,c){var d=a.A,e=va.get_trans_view(d.D),f=va.get_quat_view(d.D),d=Ra;d.set(na.AXIS_Z);d[3]=0;a=t(a,L)[1];f=na.quat_to_dir(f,na.AXIS_MZ,
Aa);V.set_pline_initial_point(Ja,e);V.set_pline_directional_vec(Ja,f);if(!na.line_plane_intersect(d,-b,Ja,c)||Math.abs(a)<oa)xa.warn("Active hover camera view vector and the supporting plane are parallel to each other. Hover pivot will be set based on the camera position."),c[0]=e[0],c[1]=e[1],c[2]=0;return c}function g(b){for(var c=b.A,d=0;d<b.S.length;d++){var e=b.S[d].ja[0];if(e.type==a.te)switch(c.pb){case a.MS_TARGET_CONTROLS:var f=va.get_trans_view(c.D);c.Sk=Y.dist(f,c.pivot);c.Tk=e.mc;break;
case a.MS_HOVER_CONTROLS:f=va.get_trans_view(c.D),c.Sk=Y.dist(f,c.wc),c.Tk=e.mc}}}function p(a){a={type:a,name:"",YI:1,width:0,height:0,We:null,vr:null,Qb:null,wf:null,sb:0,mc:0,mo:"VERTICAL",near:0,far:0,left:0,right:0,top:0,bottom:0,ld:ya.create(),D:new Float32Array(9),fc:new Float32Array(16),Zp:new Float32Array(16),ot:{trans:Y.create(),angle:0},Bb:new Float32Array(16),Qf:new Float32Array(16),uy:new Float32Array(16),JB:new Float32Array(16),jh:new Float32Array(16),direction:new Float32Array(3),Rf:va.om(),
vy:va.om(),us:va.om(),dx:va.om(),Gs:va.om(),dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_object:null,dof_bokeh:!1,Kd:!1,dof_on:!1,nw:new Float32Array(3),Cm:x(),xl:0,Lf:0,xc:null,pi:null,cr:null,Bu:new Float32Array(4),bp:new Float32Array(4)};a.ld[0]=a.ld[2]=0;a.ld[1]=a.ld[3]=0;return a}function k(a,b){var c=p(a.type);c.name=a.name;c.YI=a.YI;c.width=a.width;c.height=a.height;b||(c.We=a.We,c.vr=a.vr,c.Qb=a.Qb,c.wf=a.wf);c.sb=a.sb;
c.mo=a.mo;c.mc=a.mc;c.near=a.near;c.far=a.far;c.left=a.left;c.right=a.right;c.top=a.top;c.bottom=a.bottom;ya.copy(a.ld,c.ld);va.copy(a.D,c.D);la.copy(a.fc,c.fc);la.copy(a.Zp,c.Zp);c.ot=na.W(a.ot);la.copy(a.Bb,c.Bb);la.copy(a.Qf,c.Qf);la.copy(a.uy,c.uy);la.copy(a.JB,c.JB);la.copy(a.jh,c.jh);c.direction.set(a.direction);va.copy(a.Rf,c.Rf);va.copy(a.vy,c.vy);va.copy(a.us,c.us);va.copy(a.dx,c.dx);va.copy(a.Gs,c.Gs);c.dof_distance=a.dof_distance;c.dof_front_start=a.dof_front_start;c.dof_front_end=a.dof_front_end;
c.dof_rear_start=a.dof_rear_start;c.dof_rear_end=a.dof_rear_end;c.dof_power=a.dof_power;c.dof_bokeh_intensity=a.dof_bokeh_intensity;c.dof_object=a.dof_object;c.dof_bokeh=a.dof_bokeh;c.Kd=a.Kd;c.dof_on=a.dof_on;Y.copy(a.nw,c.nw);var d=a.Cm,e=c.Cm;ya.copy(d.left,e.left);ya.copy(d.right,e.right);ya.copy(d.top,e.top);ya.copy(d.bottom,e.bottom);ya.copy(d.near,e.near);ya.copy(d.far,e.far);c.xl=a.xl;c.Lf=a.Lf;a.xc&&(c.xc=ya.clone(a.xc));if(a.pi){d=a.pi.length;c.pi=Array(d);for(e=0;e<d;e++)c.pi[e]=Y.clone(a.pi[e]);
c.cr=new Float32Array(a.cr)}ya.copy(a.Bu,c.Bu);ya.copy(a.bp,c.bp);return c}function x(){return{left:new Float32Array([0,0,0,0]),right:new Float32Array([0,0,0,0]),top:new Float32Array([0,0,0,0]),bottom:new Float32Array([0,0,0,0]),near:new Float32Array([0,0,0,0]),far:new Float32Array([0,0,0,0])}}function v(b){switch(b){case "STATIC":return a.MS_STATIC;case "TARGET":return a.MS_TARGET_CONTROLS;case "EYE":return a.MS_EYE_CONTROLS;case "HOVER":return a.MS_HOVER_CONTROLS;default:na.K("Unknown move style")}}
function h(b){var c=p(b);if(b==a.rc)return c;switch(b){case a.Kc:H(c,Na,.1,1E3);break;case a.te:H(c,2.5,.1,1E3);break;case a.lf:break;case a.th:break;case a.aj:break;case a.Dc:case a.Lc:case a.kf:case a.Oe:na.K("Stereo camera may only be created from perspective one");break;default:na.K("Unknown camera type")}return c}function d(b,c,d){b.type!=a.Dc&&b.type!=a.Lc&&b.type!=a.kf&&b.type!=a.Oe&&na.K("set_stereo_params(): wrong camera type");if(b.type==a.Dc||b.type==a.Lc)b.xl=c;b.Lf=d;ma(b,!1);if(Ka.Pa()&&
(c=Ka.get_active(),b=c.J.Zc))for(c=ta.Da(Ka.Ok(c),c).ja,d=0;d<c.length;d++)Ga(c[d],b)}function t(a,b){var c=va.get_quat_view(a.A.D);return q(c,b)}function q(a,b){var c=na.quat_to_dir(a,na.AXIS_Z,Aa),d=na.quat_to_dir(a,na.AXIS_MY,Qa),e=-Math.asin(c[2]/Y.length(c)),c=Math.abs(e)>Math.PI/4?Y.scale(d,-na.sign(e),Za):Y.scale(c,-na.sign(d[2]),Za),f=Math.atan(Math.abs(c[0]/c[1]));0<d[2]&&(e=na.sign(e)*Math.PI-e);d=f;0<c[1]&&(d=Math.PI-d);0>c[0]&&(d=2*Math.PI-d);b[0]=d;b[1]=e;return b}function G(a){switch(a.mo){case "AUTO":return 1<
a.sb?ba(a)?a.mc/a.sb:2*Math.atan(Math.tan(a.mc/2)/a.sb):a.mc;case "HORIZONTAL":return ba(a)?a.mc/a.sb:2*Math.atan(Math.tan(a.mc/2)/a.sb);case "VERTICAL":return a.mc}}function H(b,c,d,e){switch(b.type){case a.Kc:case a.Dc:case a.Lc:b.mc=c;b.sb=1;break;case a.te:b.mc=c;b.sb=1;break;case a.kf:case a.Oe:break;default:na.K("set_frustum(): Unsupported camera type: "+b.type)}b.near=d;b.far=e}function z(b,c){var d=va.Lb(c.A.D,Aa),e=va.vb(c.A.D,za),f=la.fromRotationTranslation(e,d,Oa);la.invert(f,b.fc);if(Ka.Pa())var f=
Ka.get_active(),h=Ka.Tb(f,Va.Hg);if(b.type==a.Dc||h&&h.enable_hmd_stereo&&b.type==a.kf)b.fc[12]+=b.Lf/2;else if(b.type==a.Lc||h&&h.enable_hmd_stereo&&b.type==a.Oe)b.fc[12]-=b.Lf/2;if(b.xc){va.from_mat4(b.fc,b.us);va.invert(b.us,b.dx);var f=b.xc[0],h=b.xc[1],g=b.xc[2],k=b.xc[3],m=b.Zp;m[0]=1-2*f*f;m[1]=-2*f*h;m[2]=-2*f*g;m[3]=0;m[4]=-2*f*h;m[5]=1-2*h*h;m[6]=-2*h*g;m[7]=0;m[8]=-2*f*g;m[9]=-2*h*g;m[10]=1-2*g*g;m[11]=0;m[12]=-2*f*k;m[13]=-2*h*k;m[14]=-2*g*k;m[15]=1;la.multiply(b.fc,b.Zp,b.fc);l(b,!0);
Y.transformMat4(d,b.Zp,d)}va.from_mat4(b.fc,b.Rf);va.invert(b.Rf,b.vy);va.set_sep(d,1,e,b.D);ea(b)}function l(a,b){ma(a,!0);var c=Ra,d=Oa;la.invert(a.fc,d);la.transpose(d,d);ya.transformMat4(a.xc,d,c);d=La;d[0]=(na.sign(c[0])+a.Bb[8])/a.Bb[0];d[1]=(na.sign(c[1])+a.Bb[9])/a.Bb[5];d[2]=-1;d[3]=(1+a.Bb[10])/a.Bb[14];ya.scale(c,2/(c[0]*d[0]+c[1]*d[1]+c[2]*d[2]+c[3]*d[3]),c);a.Bb[2]=c[0];a.Bb[6]=c[1];a.Bb[10]=c[2]+1;a.Bb[14]=c[3];aa(a);b||ea(a)}function F(a,b,c){c=Y.subtract(c,b,Aa);Y.length(c)&&(Y.normalize(c,
c),c=na.qI(na.AXIS_MZ,c,za),Ia.set_rotation(a,c));Ia.set_translation(a,b)}function r(a,b,c){var d=a.A,e=y(a);F(a,b,c);e?(b=Y.copy(d.pe,Aa),Y.negate(b,b),w(a,b,!0)):w(a,d.pe,!0)}function E(a,b){for(var c=a.A,d=b.ja,e=va.vb(c.D,za),e=na.quat_to_dir(e,na.AXIS_MZ,Aa),f=va.Lb(c.D,Qa),h=b.UI,g=0;g<h.length;g++){var k=h[g];Y.copy(e,k.direction);va.Lb(c.D,k.nw)}for(g=0;g<d.length;g++)k=d[g],z(k,a),Y.copy(e,k.direction),k.dof_object&&k.dof_on&&(c=Ia.get_translation(k.dof_object,Za),c=Y.dist(f,c),k.dof_distance=
c)}function w(b,c,d){var e=b.A,h=va.get_quat_view(e.D),g=na.quat_to_dir(h,na.AXIS_Z,Aa);Y.normalize(g,g);if(.999999<Math.abs(Y.dot(c,g)))g=I.identity(za);else{var k=Y.cross(c,g,Qa);Y.normalize(k,k);e.pb==a.MS_TARGET_CONTROLS?e.Cl&&Y.negate(k,k):(e=na.quat_to_dir(h,na.AXIS_MY,Za),0<Y.dot(e,c)&&Y.negate(k,k));e=na.quat_to_dir(h,na.AXIS_X,Za);Y.normalize(e,e);var l=na.clamp(Y.dot(e,k),-1,1),g=-.999999>=l?I.setAxisAngle(g,Math.acos(l),za):I.rotationTo(e,k,za);I.normalize(g,g)}I.multiply(g,h,h);d&&(d=
na.quat_to_dir(h,na.AXIS_Y,Aa),0>Y.dot(c,d)&&I.rotateZ(h,Math.PI,h));f(b)}function f(b){var c=b.A;c.pb==a.MS_TARGET_CONTROLS&&(c.Cl=y(b))}function y(a){a=va.get_quat_view(a.A.D);return 0>na.quat_to_dir(a,na.AXIS_Y,Aa)[2]}function D(b,c){var d=b.A;if(c){d.Vb=d.Vb||{};d.Vb.left=c.left;d.Vb.right=c.right;d.Vb.Ko=c.left;d.Vb.jp=c.right;d.Vb.camera_space=!!c.camera_space;var e=b.A;!(d=e.Vb)||e.pb!=a.MS_EYE_CONTROLS&&e.pb!=a.MS_TARGET_CONTROLS||(e=t(b,L),d.camera_space?(d.left+=e[0],d.right+=e[0]):(d.Ko-=
e[0],d.jp-=e[0]),d.left=na.angle_wrap_0_2pi(d.left),d.right=na.angle_wrap_0_2pi(d.right),d.Ko=na.angle_wrap_0_2pi(d.Ko),d.jp=na.angle_wrap_0_2pi(d.jp))}else d.Vb=null}function N(a,b){var c=a.A;b?(c.Xa=c.Xa||{},c.Xa.down=b.down,c.Xa.up=b.up,c.Xa.jo=b.down,c.Xa.Kp=b.up,c.Xa.camera_space=!!b.camera_space,B(a)):c.Xa=null}function M(a,b){var c=a.A;if(!b){var d=t(a,L);b={down:d[1],up:d[1]}}c.Xa=c.Xa||{};c.Xa.down=b.down;c.Xa.up=b.up;B(a);c.Kb&&c.Xa&&Z(a)}function B(b){var c=b.A,d=c.Xa;if(d)switch(c.pb){case a.MS_EYE_CONTROLS:case a.MS_TARGET_CONTROLS:b=
t(b,L);d.camera_space?(d.up+=b[1],d.down+=b[1]):(d.Kp-=b[1],d.jo-=b[1]);d.up=na.angle_wrap_periodic(d.up,-Math.PI,Math.PI);d.down=na.angle_wrap_periodic(d.down,-Math.PI,Math.PI);d.Kp=na.angle_wrap_periodic(d.Kp,-Math.PI,Math.PI);d.jo=na.angle_wrap_periodic(d.jo,-Math.PI,Math.PI);break;case a.MS_HOVER_CONTROLS:d.up=na.angle_wrap_periodic(d.up,-Math.PI,Math.PI),d.down=na.angle_wrap_periodic(d.down,-Math.PI,Math.PI),d.up=na.clamp(d.up,-Math.PI/2,0),d.down=na.clamp(d.down,-Math.PI/2,0)}}function J(a,
b){var c=a.A;if(!b){var d=Ia.bs(a,c.wc);b={min:d,max:d}}c.Kb=c.Kb||{};c.Kb.min=b.min;c.Kb.max=b.max;c.Kb&&c.Xa&&Z(a)}function C(a,b){var c=a.A;b?(c.Kb=c.Kb||{},c.Kb.min=b.min,c.Kb.max=b.max):c.Kb=null}function A(a,b){var c=a.A;b?(c.je=c.je||{},c.je.min_z=b.min_z,c.je.max_z=b.max_z):c.je=null}function X(a,b){var c=a.A;b?(c.Ed=c.Ed||{},c.Ed.min=b.min,c.Ed.max=b.max):c.Ed=null}function m(a,b){var c=a.A;b?(c.Fd=c.Fd||{},c.Fd.min=b.min,c.Fd.max=b.max):c.Fd=null}function K(b){var c=b.A;if(ta.is_camera(b))for(var d=
b.S,e=0;e<d.length;e++){var f=d[e].ja;if(f[0].type===a.te){switch(c.pb){case a.MS_TARGET_CONTROLS:var h=va.get_trans_view(c.D),h=Y.dist(h,c.pivot),h=h/c.Sk*c.Tk;break;case a.MS_HOVER_CONTROLS:h=va.get_trans_view(c.D);h=Y.distance(h,c.wc);h=h/c.Sk*c.Tk;break;default:h=f[0].mc}for(var g=0;g<f.length;g++){var k=f[g];k.mc=h;ma(k,!0)}E(b,d[e])}}}function R(b){var c=b.A,d=c.pb;if(d===a.MS_TARGET_CONTROLS||d===a.MS_EYE_CONTROLS){if(c.Vb){var e=c.Vb.left,f=c.Vb.right,h=t(b,L);(h=d==a.MS_TARGET_CONTROLS?na.gm(h[0],
e,f):na.gm(h[0],f,e))&&(d==a.MS_TARGET_CONTROLS?S(b,h,0):sa(b,h,0))}c.Xa&&(e=c.Xa.down,f=c.Xa.up,h=t(b,L),(h=d==a.MS_TARGET_CONTROLS?na.gm(h[1],f,e):na.gm(h[1],e,f))&&(d==a.MS_TARGET_CONTROLS?S(b,0,h):sa(b,0,h)));if(d===a.MS_TARGET_CONTROLS&&c.Kb){var h=b.A,e=va.get_trans_view(h.D),f=Y.subtract(e,h.pivot,Aa),g=Y.length(f);g>h.Kb.max?(Y.scale(f,h.Kb.max/g,f),Y.add(h.pivot,f,e)):g<h.Kb.min&&(g=va.get_quat_view(h.D),g=na.quat_to_dir(g,na.AXIS_MZ,Qa),Y.scale(g,100*h.Kb.min,g),Y.add(f,g,f),Y.scale(f,-h.Kb.min/
Y.length(f),f),Y.add(h.pivot,f,e))}}d===a.MS_TARGET_CONTROLS&&c.je&&(c=b.A,h=c.pivot[2],e=na.clamp(c.pivot[2],c.je.min_z,c.je.max_z),e!=h&&(h=Y.set(0,0,e-h,Aa),Y.add(c.pivot,h,c.pivot),c=va.get_trans_view(c.D),Y.add(c,h,c)));d===a.MS_HOVER_CONTROLS&&(d=b.A,d.Ed&&(h=na.clamp(d.wc[0],d.Ed.min,d.Ed.max)-d.wc[0],d.wc[0]+=h,c=va.get_trans_view(d.D),c[0]+=h),d.Fd&&(h=na.clamp(d.wc[1],d.Fd.min,d.Fd.max)-d.wc[1],d.wc[1]+=h,c=va.get_trans_view(d.D),c[1]+=h),d=b.A,c=t(b,L)[1],(d=na.gm(c,d.Xa.up,d.Xa.down))&&
ia(b,0,d))}function O(a,b,c,d){a=t(a,ra);d[0]=b-a[0];d[1]=c-a[1];return d}function S(a,b,c){var d=a.A;pa(a,a.A.pivot,b,c);a=t(a,ha);a=na.angle_wrap_periodic(a[1],-Math.PI,Math.PI);d.Cl=Math.abs(a)>Math.PI/2}function ga(a,b,c){b=O(a,b,c,ha);S(a,b[0],b[1])}function sa(a,b,c){var d=a.A;if(b||c)a=I.identity(za),b&&(b=I.setAxisAngle(d.pe,b,Pa),I.multiply(a,b,a)),b=va.get_quat_view(d.D),c&&(d=na.quat_to_dir(b,na.AXIS_X,Aa),c=I.setAxisAngle(d,c,Pa),I.normalize(c,c),I.multiply(a,c,a)),I.multiply(a,b,b),I.normalize(b,
b)}function U(a,b,c){var d=va.vb(a.A.D,za),d=q(d,L);sa(a,b-d[0],c-d[1])}function ia(a,b,c){var d=a.A;d.ui||(b=0);pa(a,d.wc,b,c);c&&Z(a)}function fa(a,b,c){b=O(a,b,c,ha);ia(a,b[0],b[1])}function pa(a,b,c,d){var e=a.A;if(c||d){a=I.identity(za);c&&(c=I.setAxisAngle(na.AXIS_Z,c,Pa),I.multiply(a,c,a));c=va.get_quat_view(e.D);if(d){var h=na.quat_to_dir(c,na.AXIS_X,Aa);d=I.setAxisAngle(h,d,Pa);I.normalize(d,d);I.multiply(a,d,a)}d=va.get_trans_view(e.D);na.EU(d,b,a,d);I.multiply(a,c,c);I.normalize(c,c)}}
function Z(a){var b=a.A,c=t(a,L)[1],d=a.A;a=d.Xa;d=d.Kb;a.down-a.up?(c=(a.down-c)/(a.down-a.up),c=Math.max(c,0)):c=0;c=c*(d.max-d.min)+d.min;a=va.get_trans_view(b.D);d=va.get_quat_view(b.D);d=na.quat_to_dir(d,na.AXIS_MZ,Aa);Y.normalize(d,d);Y.scale(d,c,d);Y.subtract(b.wc,d,a)}function ma(b,c){switch(b.type){case a.Kc:case a.lf:la.perspective(G(b),b.sb,b.near,b.far,b.Bb);break;case a.te:case a.th:var d=G(b),e=d*b.sb;la.ortho(-e,e,-d,d,b.near,b.far,b.Bb);break;case a.aj:la.ortho(b.left,b.right,b.bottom,
b.top,b.near,b.far,b.Bb);break;case a.Dc:case a.Lc:var e=Math.tan(G(b)/2),d=b.near*e,h=b.sb*b.xl*e;b.type==a.Dc?(e=h-b.Lf/2,h+=b.Lf/2):(e=h+b.Lf/2,h-=b.Lf/2);e=-(b.near/b.xl*e);h*=b.near/b.xl;la.frustum(e,h,-d,d,b.near,b.far,b.Bb);b.left=e;b.right=h;break;case a.kf:case a.Oe:Ka.Pa()&&(d=Ka.get_active(),(d=Ka.Tb(d,Va.Hg))&&d.enable_hmd_stereo?(d=Math.tan(b.ld[1]),e=Math.tan(b.ld[2]),h=Math.tan(b.ld[3]),b.top=b.near*Math.tan(b.ld[0]),b.right=b.near*d,b.bottom=-b.near*e,b.left=-b.near*h,la.frustum(b.left,
b.right,b.bottom,b.top,b.near,b.far,b.Bb)):(b.top=b.near*Math.tan(G(b)/2),b.bottom=-b.top,b.right=b.top*b.sb,b.left=-b.right,la.perspective(G(b),b.sb,b.near,b.far,b.Bb)));break;case a.rc:return;default:na.K("Wrong camera type: "+b.type)}aa(b);c||ea(b)}function aa(a){la.translate(a.Bb,a.ot.trans,a.Bb);la.rotateZ(a.Bb,a.ot.angle,a.Bb)}function ea(a){wa(a);da(a);na.aA(a.Qf,a.Cm)}function wa(a){la.copy(a.fc,a.Qf);la.multiply(a.Bb,a.Qf,a.Qf);la.invert(a.Qf,a.uy)}function da(a){la.copy(a.fc,a.jh);a.jh[12]=
0;a.jh[13]=0;a.jh[14]=0;a.jh[15]=1;la.multiply(a.Bb,a.jh,a.jh);la.invert(a.jh,a.jh)}function W(b,c,d,e,h){e||(e=new Float32Array(24));c||(c=b.near);d||(d=b.far);var f,g,k,l,m,n,L,q;switch(b.type){case a.rc:na.K("Extraction from NONE camera is not possible");break;case a.Kc:case a.lf:f=c*Math.tan(G(b)/2);l=-f;g=f*b.sb;k=-g;m=d/c*f;q=-m;n=m*b.sb;L=-n;break;case a.te:case a.th:l=G(b);k=l*b.sb;f=m=l;g=n=k;l=q=-l;k=L=-k;break;case a.aj:f=m=b.top;g=n=b.right;l=q=b.bottom;k=L=b.left;break;case a.Dc:case a.Lc:m=
c/b.near;f=c*Math.tan(G(b)/2);l=-f;g=b.right*m;k=b.left*m;L=d/c;m=f*L;q=-m;n=g*L;L*=k;break;case a.kf:case a.Oe:m=c/b.near;f=b.top*m;l=b.bottom*m;g=b.right*m;k=b.left*m;L=d/c;m=f*L;q=l*L;n=g*L;L*=k;break;default:na.K("Wrong camera type: "+b.type)}e[0]=k;e[1]=l;e[2]=-c;e[3]=g;e[4]=l;e[5]=-c;e[6]=g;e[7]=f;e[8]=-c;e[9]=k;e[10]=f;e[11]=-c;e[12]=L;e[13]=q;e[14]=-d;e[15]=L;e[16]=m;e[17]=-d;e[18]=n;e[19]=m;e[20]=-d;e[21]=n;e[22]=q;e[23]=-d;h&&(c=Oa,la.invert(b.fc,c),na.ep(e,c,e,0));return e}function Ga(a,
b){if(b.enable_csm){var c=b.csm_num;if(!a.pi){var d=b.csm_num;a.pi=Array(d);for(var e=0;e<d;e++)a.pi[e]=new Float32Array(3);a.cr=new Float32Array(d)}for(d=0;d<c;d++){var e=d?P(b,a,d-1):a.near,h=P(b,a,d),e=W(a,e,h,Sa),e=ca.yR(e);a.pi[d].set(e.U);a.cr[d]=e.ab;a.Bu[d]=Y.length(e.U);a.bp[d]=ua(b.first_cascade_blur_radius,b.last_cascade_blur_radius,c,d)}}else a.bp[0]=b.first_cascade_blur_radius}function P(a,b,c){var d=a.csm_num,e=na.clamp(a.csm_first_cascade_border,b.near,b.far);a=na.clamp(a.csm_last_cascade_border,
b.near,b.far);return na.clamp(ua(e,a,d,c),b.near,b.far)}function ua(a,b,c,d){switch(d){case 0:break;case c-1:a=b;break;default:a=0==a?0:a*Math.pow(b/a,d/(c-1))}return a}function ba(b){switch(b.type){case a.te:case a.th:case a.aj:return!0;default:return!1}}function ja(a,b){b||(b=new Float32Array(3));var c=va.get_trans_view(a.A.D);Y.copy(c,b);return b}var ca=u("__boundings"),Ca=u("__container"),la=u("__mat4"),V=u("__math"),ta=u("__obj_util"),xa=u("__print"),I=u("__quat"),Ka=u("__scenes"),Va=u("__subscene"),
Ia=u("__transform"),va=u("__tsr"),na=u("__util"),Y=u("__vec3"),ya=u("__vec4");a.rc=10;a.Kc=20;a.te=30;a.lf=40;a.th=50;a.aj=60;a.Dc=70;a.Lc=80;a.kf=90;a.Oe=100;a.MS_STATIC=0;a.MS_TARGET_CONTROLS=2;a.MS_EYE_CONTROLS=3;a.MS_HOVER_CONTROLS=4;var Na=na.deg_to_rad(40),oa=na.deg_to_rad(.5),T=new Float32Array([1,1,1,1]),Ea=new Float32Array([-1,-1,1,1]),Fa=new Float32Array([0,0,-1,1]),L=new Float32Array(2),ha=new Float32Array(2),ra=new Float32Array(2),Aa=new Float32Array(3),Qa=new Float32Array(3),Za=new Float32Array(3),
za=new Float32Array(4),Pa=new Float32Array(4),Ra=new Float32Array(4),La=new Float32Array(4),Oa=new Float32Array(16),Sa=new Float32Array(24),Ja=new Float32Array(6);a.PN=function(d,f){var l=f.A,m=d.data;switch(m.type){case "PERSP":var L=h(a.Kc);L.mo=m.sensor_fit;H(L,m.angle,m.clip_start,m.clip_end);break;case "ORTHO":L=h(a.te),L.mo=m.sensor_fit,H(L,m.ortho_scale/2,m.clip_start,m.clip_end)}L.name=f.name;var q=f.S;q[0].ja.push(L);for(var r=1;r<q.length;r++){var p=k(L,!1);q[r].ja.push(p)}l.pb=v(m.b4w_move_style);
l.dof_distance=m.dof_distance;L=m.dof_object;l.dof_object=L?L.Ha:null;l.dof_front_start=m.b4w_dof_front_start;l.dof_front_end=m.b4w_dof_front_end;l.dof_rear_start=m.b4w_dof_rear_start;l.dof_rear_end=m.b4w_dof_rear_end;l.dof_power=m.b4w_dof_power;l.dof_bokeh=m.b4w_dof_bokeh;l.dof_bokeh_intensity=m.b4w_dof_bokeh_intensity;l.Kd=m.b4w_dof_foreground_blur;l.Up=m.b4w_trans_velocity;l.Tp=m.b4w_rot_velocity;l.Vp=m.b4w_zoom_velocity;L=f.A.pb;q=d.data;r=null;L!=a.MS_TARGET_CONTROLS&&L!=a.MS_EYE_CONTROLS||!q.b4w_use_horizontal_clamping||
(r={left:q.b4w_rotation_left_limit,right:q.b4w_rotation_right_limit,camera_space:"LOCAL"==q.b4w_horizontal_clamping_type},L==a.MS_EYE_CONTROLS&&(r.left*=-1,r.right*=-1));L=r;q=f.A.pb;r=d.data;p=null;q!=a.MS_TARGET_CONTROLS&&q!=a.MS_EYE_CONTROLS||!r.b4w_use_vertical_clamping?q==a.MS_HOVER_CONTROLS&&r.b4w_use_zooming&&(r.b4w_hover_angle_min<=r.b4w_hover_angle_max?(p={down:r.b4w_hover_angle_min,up:r.b4w_hover_angle_max},p.down*=-1,p.up*=-1):xa.error("Wrong angle limits for the HOVER camera. Disabling angle limits.")):
(p={down:r.b4w_rotation_down_limit,up:r.b4w_rotation_up_limit,camera_space:"LOCAL"==r.b4w_vertical_clamping_type},q==a.MS_TARGET_CONTROLS&&(p.down*=-1,p.up*=-1));var q=p,r=f.A.pb,p=d.data,t=null;r==a.MS_TARGET_CONTROLS&&p.b4w_use_target_distance_limits&&p.b4w_distance_min<=p.b4w_distance_max?t={min:p.b4w_distance_min,max:p.b4w_distance_max}:r===a.MS_HOVER_CONTROLS&&p.b4w_use_zooming&&(p.b4w_distance_min<=p.b4w_distance_max?t={min:p.b4w_distance_min,max:p.b4w_distance_max}:xa.error("Wrong distance limits for the HOVER camera. Disabling distance limits."));
r=t;p=d.data;t=null;f.A.pb==a.MS_HOVER_CONTROLS&&p.b4w_use_horizontal_clamping&&p.b4w_horizontal_translation_min<=p.b4w_horizontal_translation_max&&(t={min:p.b4w_horizontal_translation_min,max:p.b4w_horizontal_translation_max});var p=t,t=d.data,w=null;f.A.pb==a.MS_HOVER_CONTROLS&&t.b4w_use_vertical_clamping&&t.b4w_vertical_translation_min<=t.b4w_vertical_translation_max&&(w={min:t.b4w_vertical_translation_min,max:t.b4w_vertical_translation_max});var t=w,w=d.data,ha=null;f.A.pb==a.MS_TARGET_CONTROLS&&
w.b4w_use_pivot_limits&&(ha={min_z:w.b4w_pivot_z_min,max_z:w.b4w_pivot_z_max});w=ha;switch(l.pb){case a.MS_EYE_CONTROLS:l=va.get_trans_view(f.A.D);e(f,l,null,L,q);break;case a.MS_TARGET_CONTROLS:l=va.get_trans_view(f.A.D);c(f,l,m.b4w_target,L,q,r,w,m.b4w_use_panning);break;case a.MS_HOVER_CONTROLS:l=va.get_trans_view(f.A.D),L=n(f,d.data.b4w_hover_zero_level,Qa),b(f,l,L,r,q,p,t,m.b4w_enable_hover_hor_rotation)}R(f);g(f)};a.NI=e;a.QI=c;a.OI=b;a.Do=g;a.Mc=k;a.RO=x;a.h_=v;a.Gc=h;a.MY=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return!!a.Qb;
case "DEPTH":return!!a.wf;case "SCREEN":return!a.Qb&&!a.wf;default:na.K("Wrong attachment type: "+b)}};a.kx=function(a,b,c){switch(b){case "COLOR":case "CUBEMAP":a.Qb=c;break;case "DEPTH":a.wf=c;break;case "SCREEN":a.Qb=null;a.wf=null;break;default:na.K("Wrong attachment type: "+b)}};a.tZ=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return a.Qb;case "DEPTH":return a.wf;case "SCREEN":return null;default:na.K("Wrong attachment type: "+b)}};a.tw=function(b,c){(b.type!=a.Kc||c!=a.Dc&&c!=a.Lc&&
c!=a.kf&&c!=a.Oe)&&na.K("make_stereo(): wrong camera type");b.type=c;d(b,6,.065)};a.qV=d;a.get_camera_angles=t;a.kA=q;a.get_camera_angles_char=function(a,b){t(a,b);b[0]=na.angle_wrap_0_2pi(b[0]+Math.PI);b[1]*=-1;return b};a.set_fov=function(b,c){switch(b.type){case a.Kc:case a.lf:case a.Dc:case a.Lc:b.mc=c}};a.get_fov=function(b){switch(b.type){case a.Kc:case a.lf:case a.Dc:case a.Lc:return b.mc;default:return 0}};a.SR=G;a.BI=H;a.CI=function(b,c,d,e,f){switch(b.type){case a.Kc:case a.Dc:case a.Lc:case a.te:b.mc=
d;b.sb=1;break;case a.lf:case a.th:b.mc=d;b.sb=c/d;break;case a.kf:case a.Oe:break;default:na.K("set_frustum2(): Unsupported camera type: "+b.type)}b.near=e;b.far=f};a.cV=function(b,c,d,e,f,h,g){switch(b.type){case a.aj:b.left=c;b.right=d;b.bottom=e;b.top=f;b.near=h;b.far=g;break;default:na.K("set_frustum_asymmetric(): Unsupported camera type: "+b.type)}};a.get_move_style=function(a){return a.A.pb};a.vV=z;a.JI=l;a.iC=function(b,c,d){var e=Aa;e[0]=0;e[1]=0;e[2]=-1;Y.transformQuat(e,d,e);e[0]+=c[0];
e[1]+=c[1];e[2]+=c[2];var f=Qa;f[0]=0;f[1]=1;f[2]=0;Y.transformQuat(f,d,f);la.lookAt(c,e,f,b.fc);d=Ka.get_active();d=Ka.Tb(d,Va.Hg);if(b.type==a.Dc||d&&d.enable_hmd_stereo&&b.type==a.kf)b.fc[12]+=b.Lf/2;else if(b.type==a.Lc||d&&d.enable_hmd_stereo&&b.type==a.Oe)b.fc[12]-=b.Lf/2;va.from_mat4(b.fc,b.Rf);wa(b);da(b);va.set_trans(c,b.D)};a.GI=F;a.iV=r;a.BW=E;a.AW=function(b){var c=b.A;R(b);K(b);switch(c.pb){case a.MS_TARGET_CONTROLS:var e=va.get_trans_view(c.D),h=va.get_quat_view(c.D);na.bx(e,h,c.pivot,
na.AXIS_MZ);for(h=0;h<b.S.length;h++)for(var g=b.S[h].ja,k=0;k<g.length;k++){var l=g[k];l.type!=a.Dc&&l.type!=a.Lc||d(l,Y.dist(e,c.pivot),l.Lf)}w(b,c.pe);break;case a.MS_EYE_CONTROLS:b.uc||w(b,c.pe)}f(b)};a.correct_up=w;a.IJ=f;a.mx=D;a.nx=N;a.hover_set_vertical_limits=M;a.hover_set_distance_limits=J;a.wI=C;a.II=A;a.EI=X;a.LI=m;a.QW=K;a.r_=S;a.z_=ga;a.o_=function(a,b,c){sa(a,b,c)};a.x_=function(a,b,c){U(a,b,c)};a.q_=sa;a.y_=U;a.p_=ia;a.pV=fa;a.DU=function(b,c,d){var e=b.A.pb;e===a.MS_TARGET_CONTROLS?
S(b,c,d):e===a.MS_EYE_CONTROLS?sa(b,c,d):e===a.MS_HOVER_CONTROLS?ia(b,c,d):e===a.MS_STATIC&&sa(b,c,d)};a.oV=function(b,c,d){var e=b.A.pb;e===a.MS_TARGET_CONTROLS?ga(b,c,d):e===a.MS_EYE_CONTROLS?U(b,c,d):e===a.MS_HOVER_CONTROLS?fa(b,c,d):e===a.MS_STATIC&&U(b,c,d)};a.YZ=function(b){switch(b.type){case a.Kc:case a.te:case a.Dc:case a.Lc:return!0;default:return!1}};a.aR=function(b){switch(b.type){case a.Kc:case a.lf:case a.Dc:case a.Lc:var c;a:{switch(b.mo){case "AUTO":c=1<b.sb?b.mc:ba(b)?b.mc*b.sb:2*
Math.atan(Math.tan(b.mc/2)*b.sb);break a;case "HORIZONTAL":c=b.mc;break a;case "VERTICAL":c=ba(b)?b.mc*b.sb:2*Math.atan(Math.tan(b.mc/2)*b.sb);break a}c=void 0}return Math.min(G(b),c);default:return xa.error("get_angular_diameter(): Unsupported camera type: "+b.type),0}};a.SU=function(b,c){switch(b.type){case a.lf:case a.th:xa.error("set_aspect(): Unsupported camera type: "+b.type);break;default:b.sb=c}};a.sZ=function(a){return a.sb};a.set_projection=ma;a.UU=function(b,c,d,e,f){var h=1/Math.max(f,
e);switch(b.type){case a.rc:case a.Kc:case a.lf:f/=2;e/=2;d=-(d-f)/f*Math.tan(G(b)/2);c=(c-e)/e*Math.tan(G(b)/2)*b.sb;e=b.near*(d+h);f=b.near*(c+h);d=b.near*(d-h);c=b.near*(c-h);la.frustum(c,f,d,e,b.near,b.far,b.Bb);break;case a.te:case a.th:d=-d/f;c/=e;e=G(b);f=e*b.sb;la.ortho(-f+(c-h)*(f+f),-f+(c+h)*(f+f),e+(d-h)*(e+e),e+(d+h)*(e+e),b.near,b.far,b.Bb);break;case a.aj:d=-d/f,c/=e,e=b.top+(d+h)*(b.top-b.bottom),f=b.left+(c+h)*(b.right-b.left),d=b.top+(d-h)*(b.top-b.bottom),c=b.left+(c-h)*(b.right-
b.left),la.ortho(c,f,d,e,b.near,b.far,b.Bb)}aa(b);ea(b)};a.LN=da;a.tQ=W;a.hN=function(a){a=a.A;var b=ca.Se();b.min_x=-1;b.max_x=1;b.min_y=-1;b.max_y=1;b.min_z=-1;b.max_z=1;a.va=b;var c=ca.zE(1,na.f32([0,0,0]));a.tc=c;a.wq=ca.mE(1,b);a.yq=ca.oE(1,b);a.xq=ca.nE(1,b)};a.is_static_camera=function(b){return ta.is_camera(b)&&b.A&&b.A.pb==a.MS_STATIC};a.is_target_camera=function(b){return ta.is_camera(b)&&b.A&&b.A.pb==a.MS_TARGET_CONTROLS};a.is_eye_camera=function(b){return ta.is_camera(b)&&b.A&&b.A.pb==
a.MS_EYE_CONTROLS};a.is_hover_camera=function(b){return ta.is_camera(b)&&b.A&&b.A.pb==a.MS_HOVER_CONTROLS};a.is_ortho_camera=function(b){return ta.is_camera(b)&&b.A&&b.S[0].ja[0].type==a.te};a.QC=Ga;a.OP=P;a.project_point=function(b,c,d){b=b.S[0].ja[0];switch(b.type){case a.Kc:case a.lf:case a.te:case a.th:case a.Dc:case a.Lc:case a.kf:case a.Oe:case a.rc:var e=Ra;e.set(c);e[3]=1;ya.transformMat4(e,b.Qf,e);c=-e[1]/e[3];d[0]=(e[0]/e[3]+1)/2*b.width;d[1]=(c+1)/2*b.height;Ca.qX(d[0],d[1],d,b);2<d.length&&
(d[2]=(e[2]/Math.abs(e[3])+1)/2);return d;default:return xa.error("Non-compatible camera"),d}};a.sR=function(a){return a.S[0].ja[0]};a.qv=function(b,c){switch(b.type){case a.Kc:case a.lf:case a.Dc:case a.Lc:var d=Math.tan(G(b)/2);switch(c){case "LEFT":return-d*b.sb;case "RIGHT":return d*b.sb;case "TOP":return d;case "BOTTOM":return-d}break;case a.te:case a.th:switch(c){case "LEFT":return-G(b)*b.sb;case "RIGHT":return G(b)*b.sb;case "TOP":return G(b);case "BOTTOM":return-G(b)}break;case a.aj:switch(c){case "LEFT":return b.left;
case "RIGHT":return b.right;case "TOP":return b.top;case "BOTTOM":return b.bottom}break;case a.kf:case a.Oe:d=Ka.get_active();if((d=Ka.Tb(d,Va.Hg))&&d.enable_hmd_stereo)switch(c){case "LEFT":return-Math.tan(Math.min(b.ld[1],b.ld[3]));case "RIGHT":return Math.tan(Math.min(b.ld[1],b.ld[3]));case "TOP":return Math.tan(Math.min(b.ld[0],b.ld[2]));case "BOTTOM":return-Math.tan(Math.min(b.ld[0],b.ld[2]))}else switch(d=Math.tan(G(b)/2),c){case "LEFT":return-d*b.sb;case "RIGHT":return d*b.sb;case "TOP":return d;
case "BOTTOM":return-d}break;default:na.K("Unknown camera type")}};a.CS=ba;a.hC=function(a,b,c){a=a.A;va.set_trans(b,a.D);Y.copy(c,a.pivot)};a.FI=function(a,b){var c=a.A,d=Y.subtract(b,c.wc,Aa),e=va.get_trans_view(c.D),d=Y.add(d,e,d);Ia.set_translation(a,d);Y.copy(b,c.wc)};a.rV=function(a,b){var c=a.A,d=Y.subtract(b,c.pivot,Aa),e=va.get_trans_view(c.D),d=Y.add(d,e,d);Ia.set_translation(a,d);Y.copy(b,c.pivot)};a.xZ=ja;a.w_=function(c,d){c.A.pb=d;c.A.Vb=null;c.A.Xa=null;c.A.Kb=null;c.A.Ed=null;c.A.Fd=
null;g(c);switch(d){case a.MS_HOVER_CONTROLS:var e=va.get_trans_view(c.A.D),f=n(c,0,Qa);b(c,e,f,null,null,null,null,c.A.ui);break;case a.MS_TARGET_CONTROLS:e=ja(c,Aa),f=va.get_quat_view(c.A.D),f=na.quat_to_dir(f,na.AXIS_MZ,Qa),f=Y.scaleAndAdd(e,f,10,f),Y.copy(f,c.A.pivot)}};a.qt=function(a){a=a.A;a.pb=0;Y.set(0,0,0,a.pivot);Y.set(0,0,0,a.wc);a.Cl=!1;a.use_panning=!1;a.Vb=null;a.Xa=null;a.Kb=null;a.Ed=null;a.Fd=null;a.je=null;a.ui=!0};a.set_eye_distance=function(a,b){for(var c=0;c<a.length;c++){var e=
a[c];70!=e.type&&80!=e.type&&90!=e.type&&100!=e.type||d(e,e.xl,b)}};a.set_hmd_fov=function(a,b,c){var d=Ka.get_active();a=ta.Da(a,d).ja;for(d=0;d<a.length;d++){var e=a[d];if(90==e.type||100==e.type)90==e.type&&ya.copy(b,e.ld),100==e.type&&ya.copy(c,e.ld),e.xc?l(e,!1):ma(e,!1)}};a.v_=function(a,b,c){var d=Ka.get_active();a=ta.Da(a,d).ja;for(d=0;d<a.length;d++){var e=a[d];if(90==e.type||100==e.type)90==e.type&&b&&la.copy(b,e.Bb),100==e.type&&c&&la.copy(c,e.Bb),aa(e),ea(e)}};a.lV=function(b,c){for(var d=
Ka.get_active(),d=ta.Da(b,d).ja,e,f,h,g,k,l,m,n,L=0;L<d.length;L++){var q=d[L];if(q.type==a.rc&&q.near||q.type==a.Kc||q.type==a.lf){e=q.near;f=la.invert(c,Oa);g=ya.transformMat4(T,f,Ra);h=g[0]*e;g=g[1]*e;l=ya.transformMat4(Ea,f,Ra);k=l[0]*e;l=l[1]*e;f=ya.transformMat4(Fa,f,Ra);f=-f[2]*f[3];m=la.frustum(k,h,l,g,e,f,Oa);n=(h-k)/(g-l);break}}for(L=0;L<d.length;L++)if(q=d[L],q.type==a.rc||q.type==a.Kc||q.type==a.lf)q.far=f,q.near=e,q.right=h,q.top=g,q.left=k,q.bottom=l,q.sb=n,q.mc=Math.atan(g/e)-Math.atan(l/
e),la.copy(m,q.Bb),aa(q),ea(q)}};b4w.module.__lights=function(a,u){function e(a){n.scale(a.color,a.jg,a.Sq)}var c=u("__tsr"),b=u("__util"),n=u("__vec3"),g=new Float32Array(3);a.IS=function(a,k){var p=a.data,v=k.Eb={name:"",type:p.type,aI:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array(3),Sq:new Float32Array(3),zF:0,VC:!1,on:0,Os:0,Oq:.1,Nq:30,bG:!1,FH:!1,IF:!1,sn:!0,wn:!0,jg:1,distance:25,hZ:"INVERSE_SQUARE"};v.name=k.name;v.sn=p.use_diffuse;v.wn=p.use_specular;var h=c.get_quat_view(k.A.D),h=b.quat_to_dir(h,
b.AXIS_Z,g);n.normalize(h,h);v.direction.set(h);v.color[0]=p.color[0];v.color[1]=p.color[1];v.color[2]=p.color[2];v.jg=v.zF=p.energy;e(v);v.distance=p.distance;v.VC=p.use_sphere;v.Oq=p.clip_start;v.Nq=p.clip_end;if("POINT"===v.type||"SPOT"===v.type)v.distance=p.distance;"SPOT"===v.type?(v.Os=p.spot_blend,v.on=p.spot_size):"POINT"===v.type&&(v.on=Math.PI/2);v.bG=p.b4w_generate_shadows;v.IF=p.b4w_dynamic_intensity};a.set_light_color=function(a,b){a.color[0]=b[0];a.color[1]=b[1];a.color[2]=b[2];e(a)};
a.gV=function(a,b){a.Os=b};a.fV=function(a,b){a.distance=b};a.hV=function(a,b){a.on=b};a.set_light_energy=function(a,b){a.jg=b;e(a)};a.HW=function(a){var e=a.Eb;if(e){a=c.get_quat_view(a.A.D);b.quat_to_dir(a,b.AXIS_Z,e.direction);n.normalize(e.direction,e.direction);if("SUN"==e.type){a=Math.acos(n.dot(e.aI,b.oq));var g=Math.acos(n.dot(e.direction,b.oq));e.FH=Math.floor(a/.025)!=Math.floor(g/.025)?!0:!1}n.copy(e.direction,e.aI)}}};b4w.module.__scenes=function(a,u){function e(){Ua||(Ua=c(bb));return Ua}function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.$f||!c.$f.length)return c}return null}function b(){jb||Xa.K("No active scene available");return jb}function n(a,b,c){if(!g(a,b,c))return null;c=a.b4w_shadow_settings;var d={};c.csm_resolution>ib.dc?(d.csm_resolution=ib.dc,Oa.error("Shadow map texture has unsupported size. Changed to "+ib.dc+".")):d.csm_resolution=c.csm_resolution;Ba.shadow_blur_samples=Ba.shadow_blur_samples?
Ba.shadow_blur_samples:c.blur_samples;d.HV=c.soft_shadows;a=za.zv(b,Ba.ssao&&a.b4w_enable_ssao);d.self_shadow_polygon_offset=c.self_shadow_polygon_offset;d.self_shadow_normal_offset=c.self_shadow_normal_offset;d.enable_csm=c.b4w_enable_csm&&1==a.length;c.b4w_enable_csm&&1<c.csm_num&&1<a.length&&Oa.warn("Disabling Cascaded Shadow Maps because of multiple shadow casting lamps.");d.Ih=[];d.dJ=[];d.Oq=[];d.Nq=[];for(b=0;b<a.length;b++)d.Ih.push(a[b].Eb.type),d.dJ.push(a[b].Eb.on),d.Oq.push(a[b].Eb.Oq),
d.Nq.push(a[b].Eb.Nq),"SPOT"!=d.Ih[b]&&"POINT"!=d.Ih[b]||!d.enable_csm||(Oa.warn("Generating shadows for SPOT or POINT light. Disabling Cascaded Shadow Maps"),d.enable_csm=!1);d.enable_csm?(d.csm_num=c.csm_num,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=c.fade_last_cascade,d.blend_between_cascades=c.blend_between_cascades):
(d.csm_num=1,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=!1,d.blend_between_cascades=!1);return d}function g(a,b,c){if(0!=b.length&&Ba.shadows)switch(a.b4w_render_shadows){case "OFF":return!1;case "ON":return!0}else return!1;var d=!1,e=!1;a=Ba.ssao&&a.b4w_enable_ssao;if(0==b.length&&!a)return!1;for(b=0;b<c.length;b++){var f=
c[b];f.b4w_shadow_cast&&(d=!0);f.b4w_shadow_receive&&(e=!0);if((a||d)&&e)return!0}return!1}function p(a){for(var b=0;b<a.length;b++)if("SUN"==a[b].Eb.type)return!0;return!1}function k(a){if(!Ba.shore_smoothing)return!1;a=da(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.ha.Di&&c.ha.shore_smoothing)return!0}return!1}function x(a){for(var b=0;b<a.length;b++)for(var c=a[b].particle_systems,d=0;d<c.length;d++)if(za.ME(a[b].Ha,c[d].settings))return!0;return!1}function v(a){for(var b=da(a),c=[],d=0;d<b.length;d++){var e=
b[d];if(e.ha.Di){for(var f={},h=0;h<a.length;h++)for(var g=a[h],k=g.Ha.nc,l=0;l<k.length;l++)k[l]==e&&(f.Wi=g.location[2]);f.Ld=new Float32Array(4);f.Ld.set(e.ha.xm);f.Ld[3]=e.ha.hv;e.ha.is_dynamic?(f.kr=!0,f.waves_height=e.ha.waves_height,f.waves_length=e.ha.waves_length,f.dst_noise_scale0=e.ha.dst_noise_scale0,f.dst_noise_scale1=e.ha.dst_noise_scale1,f.dst_noise_freq0=e.ha.dst_noise_freq0,f.dst_noise_freq1=e.ha.dst_noise_freq1,f.dir_min_shore_fac=e.ha.dir_min_shore_fac,f.dir_freq=e.ha.dir_freq,
f.dir_noise_scale=e.ha.dir_noise_scale,f.dir_noise_freq=e.ha.dir_noise_freq,f.dir_min_noise_fac=e.ha.dir_min_noise_fac,f.dst_min_fac=e.ha.dst_min_fac,f.waves_hor_fac=e.ha.waves_hor_fac):(f.kr=!1,f.waves_height=0,f.waves_length=0);f.gg=e.ha.Wu;f.RN=e.ha.mj;f.QN=e.ha.lj;f.SN=new Float32Array([.3,.7]);f.tl=null;e=e.Cg;for(h=0;h<e.length;h++)g=e[h].texture,!0===g.b4w_shore_dist_map&&"FILE"==g.image.source&&(f.tl=g.image,f.mC=g.image.size[0],f.cB=g.b4w_max_shore_dist,g=g.b4w_shore_boundings,f.mp=[(g[0]+
g[1])/2,(g[2]+g[3])/2],f.np=[g[0]-g[1],g[2]-g[3]]);c.push(f)}}if(0<c.length){f=c[0];if(!f.kr)for(d=0;d<c.length;d++)c[d].kr&&(f=c[d]);return f}return null}function h(a){function b(a){if(a){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d];"GROUP"==e.type&&e.node_group&&b(e.node_group.node_tree);"GROUP"==e.type&&"B4W_REFRACTION"==e.node_tree_name&&(c.refractions=!0);"BSDF_TRANSPARENT"==e.type&&(c.refractions=!0)}}}var c={refractions:!1};a=da(a);for(var d=0;d<a.length;d++){var e=a[d];e.Pm&&(c.refractions=
!0);e.Nd&&b(e.Nd)}return c}function d(a,b,c){if(Ba.reflections)switch(a.b4w_render_reflections){case "OFF":return!1}else return!1;a=[];for(var d=0,e=!1,f=!1,h=!1,g=0;g<b.length;g++){var k=b[g];k.A.Yc&&"CUBE"==k.A.hh&&d++;k.A.Yc&&"PBR"==k.A.hh&&(f=!0);if(k.xs.length){for(var l=null,m=0;m<a.length;m++)if(a[m]==k){l=m;break}null==l&&a.push(k)}}for(g=0;g<c.length;g++){b=c[g];b.b4w_reflexible&&(e=!0);a:if(b.b4w_reflexible){b=b.Ha.nc;for(k=0;k<b.length;k++)if(l=b[k].jb,"OPAQUE"!=l&&"CLIP"!=l&&"ALPHA_ANTIALIASING"!=
l){b=!0;break a}b=!1}else b=void 0;b&&(h=!0)}return{hI:a,KH:d,sj:[],Lz:[],Mi:[],Ww:[],AA:e,bS:f,wG:h}}function t(a,b){var c=a.b4w_sky_settings,d={};d.RB=c.render_sky||c.procedural_skydome;d.procedural_skydome=c.procedural_skydome;d.use_as_environment_lighting=c.use_as_environment_lighting;d.vl=c.color;d.rayleigh_brightness=c.rayleigh_brightness;d.mie_brightness=c.mie_brightness;d.spot_brightness=c.spot_brightness;d.scatter_strength=c.scatter_strength;d.rayleigh_strength=c.rayleigh_strength;d.mie_strength=
c.mie_strength;d.rayleigh_collection_power=c.rayleigh_collection_power;d.mie_collection_power=c.mie_collection_power;d.mie_distribution=c.mie_distribution;d.ke=c.reflexible;d.Rd=c.reflexible_only;!b&&c.procedural_skydome&&Oa.warn("There is no sun on the scene. Procedural sky will use a default sun position.");return d}function q(a){var b={};a=a.b4w_ssao_settings;b.radius_increase=a.radius_increase;b.eS=a.hemisphere;b.yN=a.blur_depth;b.blur_discard_value=a.blur_discard_value;b.influence=a.influence;
b.dist_factor=a.dist_factor;b.KU=a.samples;return b}function G(a){if(!Ba.bloom||!a.b4w_enable_bloom)return null;var b={};a=a.b4w_bloom_settings;b.blur=a.blur;b.edge_lum=a.edge_lum;b.key=a.key;b.adaptive=a.adaptive;b.average_luminance=a.average_luminance;return b}function H(a){var b={};a=a.b4w_motion_blur_settings;b.mb_decay_threshold=a.motion_blur_decay_threshold;b.mb_factor=a.motion_blur_factor;return b}function z(a){var b={};a=a.b4w_color_correction_settings;b.brightness=a.brightness;b.contrast=
a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b}function l(a){var b={};a=a.b4w_god_rays_settings;b.intensity=a.intensity;b.al=a.max_ray_length;b.wl=a.steps_per_pass;return b}function F(a){var b={};b.Nh=a.b4w_outline_color;b.bn=a.b4w_outline_factor;return b}function r(a){var b={};a=a.b4w_glow_settings;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;
return b}function E(a,b){var c=a.light_settings,d={};d.kg=c.environment_energy;d.gt=c.use_environment_light;d.Wz=c.environment_color;d.Md=a.horizon_color.slice(0);d.Xd=a.zenith_color.slice(0);d.un=a.use_sky_paper;d.tn=a.use_sky_blend;d.vn=a.use_sky_real;d.Ax=null;d.mn=null;d.Yu=null;d.he="";b.RB&&a.use_nodes&&a.node_tree&&(c=Aa.eF(a.node_tree,a.uuid,"MAIN",null),d.he=c.id);c=!0;if(d.gt&&"SKY_TEXTURE"==d.Wz&&(!b.procedural_skydome||!b.use_as_environment_lighting)){for(var e=null,f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_environment_lighting&&
!a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];break}e?d.Yu=e:c=!1}for(f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];e.texture.image&&(c=!0,d.Ax=e,f=Math.min(ib.rg,Ha.qz(e.texture.image.size[0]/3)),d.mn={vJ:f,tE:e.blend_factor,DG:e.horizon_factor,vK:e.zenith_up_factor,uK:e.zenith_down_factor,color:e.color,Ia:e.default_value,invert:e.invert,$J:e.use_rgb_to_intensity,uE:e.blend_type,VJ:e.use_map_blend,WJ:e.use_map_horizon,
YJ:e.use_map_zenith_up,XJ:e.use_map_zenith_down});break}d.gt=d.gt?c:!1;return d}function w(a){var b=a.fog_settings,c={};c.hX=b.use_fog;c.intensity=b.intensity;c.depth=b.depth;c.start=b.start;c.height=b.height;c.xQ=b.falloff;c.color=b.use_custom_color?b.color.slice(0):a.horizon_color.slice(0);a=c.color;c.Ld=new Float32Array([a[0],a[1],a[2],1/c.depth]);c.Af=new Float32Array([c.intensity,c.depth,c.start,c.height]);return c}function f(a,b){if(!Ba.Nc)return!1;switch(a.b4w_render_dynamic_grass){case "OFF":return!1;
case "ON":return!0}for(var c=!1,d=!1,e=0;e<b.length;e++){for(var f=b[e],h=f.Ha.nc,g=0;g<h.length;g++)h[g].Ri.Go&&(c=!0);f=f.particle_systems;for(g=0;g<f.length;g++)h=f[g].settings,"HAIR"==h.type&&h.b4w_dynamic_grass&&(d=!0);if(c&&d)return!0}return!1}function y(a,b){if(Wb.outlining_overview_mode)return!0;if(Ba.enable_selectable)switch(a.b4w_enable_object_selection){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Ha.A.rl)return!0;return!1}else return!1}function D(a,
b){if(Wb.outlining_overview_mode)return!0;if(Ba.enable_outlining)switch(a.b4w_enable_outlining){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Ha.A.Xc)return!0;return!1}else return!1}function N(a,b){if(Ba.glow_materials)switch(a.b4w_enable_glow_materials){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)for(var d=b[c].Ha.nc,e=0;e<d.length;e++)if(Aa.LE(d[e]))return!0;return!1}else return!1}function M(a,b){if(Ba.refractions)switch(a.b4w_render_refractions){case "OFF":return!1;
case "ON":return!0;case "AUTO":return b.refractions}else return!1}function B(a){for(var b=0;b<a.length;b++)for(var c=a[b].Ha.nc,d=0;d<c.length;d++){var e=c[d];if(e.Uj&&"OPAQUE"!=e.jb&&"CLIP"!=e.jb&&"ALPHA_ANTIALIASING"!=e.jb)return!0}return!1}function J(a,b){switch(a.b4w_enable_anchors_visibility){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++){var d=b[c].Ha;if(d.anchor&&d.anchor.ho)return!0}return!1}}function C(a,b){for(var c=ba(a,[Q.Hb,Q.cd,Q.Yd]),d=0;d<c.length;d++)c[d].eu=
b}function A(a,b,c,d,e,f){for(var h=b.A,g=za.Da(b,e),k=g.$,l=0;l<k.length;l++){var n=k[l];if(!(n.Ge||n.Rd||"MAIN"!=n.type&&"NODES_GLOW"!=n.type&&"PARTICLES"!=n.type&&"LINE"!=n.type)&&("OPAQUE"==n.Ab&&"OPAQUE"==d||"BLEND"==n.Ab&&"BLEND"==d||"XRAY"==n.Ab&&"XRAY"==d||"NODES_GLOW"==n.type&&"GLOW"==d)){if(!f&&(m(n,a,b,c,d,e),!Y.Ic(n)))if("DEBUG"===Cb.type())Y.Qt(n,"error.glslv","error.glslf"),Y.Ic(n);else continue;var L=Q.Ai(n,h,g.eg[l]);Q.Rc(a,L);ka.mm(c,a,n);R(n)}}}function X(a){a.Zk.ht&&Y.yb(a,"USE_LOD_SMOOTHING",
1)}function m(a,b,c,d,e,f){var h=c.A,g=f.J,k=za.Da(c,f),l="NO_SHADOWS";c=ba(f,[Q.xd]);if(c.length&&a.Td){switch(e){case "OPAQUE":l="SHADOW_MAPPING_OPAQUE";break;case "BLEND":case "XRAY":l="SHADOW_MAPPING_BLEND";break;case "COLOR_ID":case "REFLECT":case "GLOW":l="NO_SHADOWS";break;case "SHADOW":l="SHADOW_MASK_GENERATION";break;default:Xa.K("Wrong subscene type")}for(var m=0;m<c.length;m++)Y.gE(a,f.J.Zc)}m="NO_SOFT_SHADOWS";if(g.Zc&&g.Zc.HV)switch(Ba.shadow_blur_samples){case "16x":m="POISSON_X_16";
break;case "8x":m="POISSON_X_8";break;case "4x":m="POISSON_X_4"}c=a.eb;qa.ma(c,"SHADOW_USAGE",l);qa.ma(c,"POISSON_DISK_NUM",m);X(a);a.Nc&&(m=ka.Rb(d,Q.Zi))&&O(a,m,h);K(c,b.H);if("SHADOW"!=a.type&&"COLOR_ID"!=e||a.xb){e=b.Xo;qa.ma(c,"NUM_LIGHTS",e);qa.ma(c,"NUM_LFACTORS",e%2?Math.floor(e/2)+1:e/2);qa.ma(c,"REFLECTION_PASS","REFL_PASS_NONE");qa.ma(c,"SSAO_ONLY",0);if(e=g.td)qa.ma(c,"WATER_EFFECTS",1),qa.ma(c,"WAVES_HEIGHT",qa.X(e.waves_height)),qa.ma(c,"WAVES_LENGTH",qa.X(e.waves_length)),qa.ma(c,"WATER_LEVEL",
qa.X(e.Wi));if(b.gg&&a.gg){qa.ma(c,"CAUSTICS",1);if(m=g.Zc){h=m.Ih;for(m=l=0;m<h.length;m++)"SUN"==h[m]&&(l=m);qa.ma(c,"SUN_NUM",l)}qa.ma(c,"CAUST_SCALE",qa.X(b.mj));qa.ma(c,"CAUST_SPEED",qa.X(b.iu,2));qa.ma(c,"CAUST_BRIGHT",qa.X(b.lj))}m=k.sj;h=k.Mi;k=ka.Rb(d,Q.re);b=ka.Rb(d,Q.tk);l=ka.Rb(d,Q.Kn);if(-1!==a.Mf.indexOf("u_mirrormap"))qa.ma(c,"REFLECTION_TYPE","REFL_MIRRORMAP");else if(a.Yc&&b&&l&&!m&&!h.length)Y.vh(a,b.H.Qb,"u_cube_irradiance"),Y.vh(a,l.H.Qb,"u_cube_r_convolution"),qa.ma(c,"REFLECTION_TYPE",
"REFL_PBR_STANDARD");else if(!a.Yc||m||h.length||Ba.quality==oa.P_LOW)if(a.Yc&&m)b=m.H.Qb,g.Qh.AA||(m.ym=!0,k&&(b=k.H.Qb)),Y.vh(a,b,"u_cube_reflection"),qa.ma(c,"REFLECTION_TYPE","REFL_CUBE");else if(a.Yc&&h)for(m=0;m<h.length;m++)b=h[m].H.Qb,Y.vh(a,b,"u_plane_reflection"),qa.ma(c,"REFLECTION_TYPE","REFL_PLANE");else qa.ma(c,"REFLECTION_TYPE","REFL_NONE");else k?(Y.vh(a,k.H.Qb,"u_sky_reflection"),qa.ma(c,"REFLECTION_TYPE","REFL_PBR_SIMPLE")):qa.ma(c,"REFLECTION_TYPE","REFL_NONE");k?a.Ru?(b=k.H.Qb,
Y.vh(a,b,"u_sky")):k.procedural_skydome&&(a.uf=k.uf,qa.ma(c,"PROCEDURAL_FOG",1)):qa.ma(c,"PROCEDURAL_FOG",0);b=g.Ql;b.gt&&(qa.ma(c,"USE_ENVIRONMENT_LIGHT",1),"SKY_TEXTURE"==b.Wz?(b.Yu?(k=b.Yu.texture,b=Ha.ze(b.Yu),Y.vh(a,b,"u_sky_texture",k.name)):k&&(b=k.H.Qb,Y.vh(a,b,"u_sky_texture")),qa.ma(c,"SKY_TEXTURE",1)):"SKY_COLOR"==b.Wz&&qa.ma(c,"SKY_COLOR",1));b=g.tK;b.hX&&(qa.ma(c,"USE_FOG",1),qa.ma(c,"FOG_TYPE",b.xQ));a.Sj&&a.mb?(Ba.Ju&&qa.ma(c,"USE_REFRACTION_CORRECTION",1),"MAIN"==a.type&&a.xb||"NODES_GLOW"==
a.type?(qa.ma(c,"REFRACTIVE",1),g.refractions?qa.ma(c,"USE_REFRACTION",1):qa.ma(c,"USE_REFRACTION",0)):g.refractions?qa.ma(c,"REFRACTIVE",1):qa.ma(c,"REFRACTIVE",0),(g.uH.refractions||g.refractions)&&qa.ma(c,"HAS_REFRACT_TEXTURE",1)):(qa.ma(c,"REFRACTIVE",0),qa.ma(c,"USE_REFRACTION",0),qa.ma(c,"USE_REFRACTION_CORRECTION",0));a.Sf&&(Ba.shore_smoothing&&a.Dn&&ka.Rb(d,Q.jD)?qa.ma(c,"SHORE_SMOOTHING",1):qa.ma(c,"SHORE_SMOOTHING",0),a.water_dynamic&&e&&e.waves_height?qa.ma(c,"DYNAMIC",1):qa.ma(c,"DYNAMIC",
0));"PARTICLES"==a.type&&qa.ma(c,"COLOR_RAMP_LENGTH",a.Ja.su);if(!a.Rg)for(a=a.na,d=0;d<a.length;d++)if(b=a[d],"SCENE"==b.source)for(g=0;g<bb.length;g++)for(c=bb[g],e=bb[g].$f,k=0;k<e.length;k++)e[k]==b&&Fa.I(Hb,c,f,null)}}function K(a,b){b.type==Na.te||b.type==Na.th||b.type==Na.aj?qa.ma(a,"CAMERA_TYPE","CAM_TYPE_ORTHO"):qa.ma(a,"CAMERA_TYPE","CAM_TYPE_PERSP")}function R(a){8<a.na.length&&Oa.warn(a.type,"too many textures used - "+a.na.length+' (max 8), materials "'+a.cc.join(", ")+'"')}function O(a,
b,c){a.kd=b.kd;var d=b.kd[0],e=b.kd[1],f=b.kd[2];c=c.va;c=Math.max(c.max_x-c.min_x,c.max_y-c.min_y);f=0==f?c:Math.max(f,c);b.kd[2]=f;b=b.H;Na.CI(b,f/2,f/2,-e,-d);Na.set_projection(b,!1);d=a.Cj||0;d=0==d?c:Math.max(d,c);a.Cj=d}function S(a,b,c,d,e,f){for(var h=b.A,g=za.Da(b,e),k=g.$,l=0;l<k.length;l++){var n=k[l];if(("MAIN"==n.type||"PARTICLES"==n.type||"LINE"==n.type)&&"REFLECT"==n.Ab&&n.mb==d){if(a.type==Q.Zd||a.type==Q.Xf){var L;a:{var q=e.J.Qh.Mi;for(L=0;L<q.length;L++)for(var r=0;r<q[L].length;r++)if(q[L][r]==
a)break a;q=e.J.Qh.Ww;for(L=0;L<q.length;L++)for(r=0;r<q[L].length;r++)if(q[L][r]==a)break a;L=null}if(L==h.Od)continue}else if(L=na(e,a),L==h.be)continue;if(!f&&(m(n,a,b,c,"REFLECT",e),L=n.eb,qa.ma(L,"WATER_EFFECTS",0),a.type==Q.Zd||a.type==Q.Xf?qa.ma(L,"REFLECTION_PASS","REFL_PASS_PLANE"):qa.ma(L,"REFLECTION_PASS","REFL_PASS_CUBE"),qa.ma(L,"TEXTURE_NORM",0),!Y.Ic(n)))if("DEBUG"===Cb.type())Y.Qt(n,"error.glslv","error.glslf"),Y.Ic(n);else continue;L=Q.Ai(n,h,g.eg[l]);Q.Rc(a,L);ka.mm(c,a,n);R(n)}}}
function ga(a){aa(a);var b=ja(a,Q.Hb),c=!0,d=a.J.Zc;Fa.fa(a.J.wa,function(e,f){f.type===Q.xd&&(U(f,a,b.H,d,c),c=!1)})}function sa(a){Fa.fa(a.J.wa,function(a,b){b.type===Q.Jn&&(b.jr=1)})}function U(a,b,c,d,e){if(0!=a.Za.length){var f=a.H;$a.copy(c.D,f.D);$a.copy(c.Rf,f.Gs);if("SUN"===d.Ih[a.zg]||"HEMI"===d.Ih[a.zg]){var h=c.D,g=jc;ya.CX(g);for(var k=0;k<a.Za.length;k++)for(var l=a.Za[k].La,m=0;m<l.length;m++){var n=l[m].ya,L=l[m].ug;if(n.Nc){var q=$a.vb(h,sb),r=Da.transformQuat(Xa.AXIS_MZ,q,Mb),q=
-r[0],r=r[1],p=$a.Lb(h,Mb),q=p[0]-n.Cj*(1+q)/2,r=p[1]-n.Cj*(1-r)/2,L=ya.Xn(n.tb.Pe,L.D,uc),L=L.max_z-L.min_z,p=uc;p.min_x=q;p.min_y=r;p.min_z=n.kd[0]-L;p.max_x=q+n.Cj;p.max_y=r+n.Cj;p.max_z=n.kd[1]+L}else p=L.wh;k||m?ya.$u(g,p):ya.mi(p,g)}h=ya.MF(g,Ib);Xa.ep(h,f.fc,h);if(d.enable_csm){b=Da.copy(c.pi[a.br],ac);d=ra.invert(c.fc,Ab);Xa.ep(b,d,b);Xa.ep(b,f.fc,b);a=c.cr[a.br];if(e)for(vc=0,wc=-Infinity,e=2;e<h.length;e+=3)vc=Math.min(vc,h[e]),wc=Math.max(wc,h[e]);e=jc;e.max_x=b[0]+a;e.max_y=b[1]+a;e.max_z=
wc;e.min_x=b[0]-a;e.min_y=b[1]-a;e.min_z=vc}else{c=e=jc;d=Db;d.set(h);h=$b/9;g=ra.identity(Ab);ra.rotate(g,h,Xa.AXIS_MZ,g);l=k=-1;for(m=0;10>m;m++){n=ya.gz(d,0,d.length,uc);L=(n.max_x-n.min_x)*(n.max_y-n.min_y);if(-1==k||.1<k-L)k=L,l=m,ya.mi(n,c);Xa.ep(d,g,d)}c=l*h;0<c&&(d=ra.identity(Ab),ra.rotate(d,c,Xa.AXIS_MZ,d),ra.multiply(d,f.fc,f.fc),$a.from_mat4(f.fc,f.Rf));c=e.max_x-e.min_x;d=e.max_y-e.min_y;c&&d&&(h=Math.abs(c-d)/2,2<c/d?(e.max_y+=h,e.min_y-=h):2<d/c&&(e.max_x+=h,e.min_x-=h));e.max_x+=.005;
e.max_y+=.005;e.max_z+=.005;e.min_x-=.005;e.min_y-=.005;e.min_z-=.005;ia(a,b.J.wa)}Na.cV(f,e.min_x,e.max_x,e.min_y,e.max_y,-e.max_z,-e.min_z);Na.set_projection(f,!1)}else"SPOT"!==d.Ih[a.zg]&&"POINT"!==d.Ih[a.zg]||Na.set_projection(f,!1)}}function ia(a,b){for(var c=a.H,d=ka.JR(b,a),e=0;e<d.length;e++){var f=d[e];if(f.type==Q.Hb||f.type==Q.Yf||f.type==Q.cd||f.type==Q.Gg)if(Ba.rw)f.kt.set(c.Rf,9*a.zg);else{var h=$a.get_trans_view(c.Rf),g=$a.get_scale(c.Rf),k=$a.get_quat_view(c.Rf);Ya.set(h[0],h[1],h[2],
g,Wa);f.Sp.set(Wa,4*a.zg);f.Rp.set(k,4*a.zg)}}}function fa(a,b,c,d,e){for(var f=b.A,h=za.Da(b,d),g=h.$,k=0;k<g.length;k++){var l=g[k];if("COLOR_ID"==l.type&&(a.type==Q.Ne&&"COLOR_ID"==l.Ab||a.type==Q.ph&&"COLOR_ID_XRAY"==l.Ab)){if(!e&&(m(l,a,b,c,"COLOR_ID",d),Y.yb(l,"USE_OUTLINE",0),!Y.Ic(l)))continue;l=Q.Ai(l,f,h.eg[k]);Q.Rc(a,l)}}}function pa(a,b){Z(a,b);for(var c=0;c<a.ve.length;c++)a.ve[c].parent==a&&pa(a.ve[c],b)}function Z(a,b){a.A.hide=b;if(za.is_lamp(a))for(var c=0;c<a.S.length;c++)for(var d=
a.S[c],e=ba(d.lb,mb),f=0;f<e.length;f++){var h=e[f],g=a.A,k=a.Eb,l=d.Wr,m=k.sn&&!g.hide?1:0;h.Sm[4*l+3]=m;m=k.wn&&!g.hide?1:0;h.Rm[4*l+3]=m;h.Na=!0}}function ma(a,b){for(var c=ba(b,mb),d=a.Eb,e=a.A,f=za.Da(a,b),h=$a.get_trans_view(e.D),e=$a.get_quat_view(e.D),g=0;g<c.length;g++){var k=c[g],l=k,m=a.A,n=a.Eb,L=f.Wr,q=$a.get_trans_view(a.A.D),r=n.Sq;l.Vr.set(n.direction,3*L);Wa[0]=q[0];Wa[1]=q[1];Wa[2]=q[2];Wa[3]=n.sn&&!m.hide?1:0;l.Sm.set(Wa,4*L);Wa[0]=r[0];Wa[1]=r[1];Wa[2]=r[2];Wa[3]=n.wn&&!m.hide?
1:0;l.Rm.set(Wa,4*L);l.Na=!0;switch(d.type){case "SUN":k.Vx.set(e);k.Ux=d.Sq;Da.copy(d.direction,k.Tx);k.type==Q.re&&k.procedural_skydome&&(k.Qo=d.FH,wa(b,k));break;case "HEMI":case "POINT":case "SPOT":break;default:Oa.error("Unknown light type: "+d.type+'".')}k=k.Za;for(l=0;l<k.length;l++)for(m=k[l].La,n=0;n<m.length;n++)L=m[n].ya,L.Qm&&Y.eV(L,a)}c=ja(b,Q.Hb).H;f=f.kC;d=b.J.Zc;for(g=0;g<f.length;g++)k=f[g],Na.iC(k.H,h,e),U(k,b,c,d,!0),ia(k,b.J.wa)}function aa(a){var b=Qa.Sb(a,"LAMP",Qa.DATA_ID_ALL),
b=za.zv(b,Ba.ssao&&a.b4w_enable_ssao);if(b.length)for(var c=0;c<b.length;c++)for(var d=b[c],e=d.A,f=$a.Lb(e.D,ac),e=$a.vb(e.D,sb),h=0;h<d.S.length;h++){var g=d.S[h],k=g.kC;if(g.lb==a)for(g=0;g<k.length;g++)Na.iC(k[g].H,f,e)}}function ea(a){var b=ja(a,Q.re);b&&wa(a,b)}function wa(a,b){Ra.en(b);Ja.wj(b);if(b.Qo)for(var c=ba(a,Lb),d=0;d<c.length;d++)for(var e=c[d].Za,f=0;f<e.length;f++)for(var h=e[f].La,g=0;g<h.length;g++){var k=h[g];k.$b&&(k=k.ya,Y.WN(k)&&Ja.wW(k))}if(c=ja(a,Q.tk))Ra.en(c),Ja.wj(c);
if(c=ja(a,Q.Kn))Ra.en(c),Ja.wj(c);if(c=ja(a,Q.hD))Ra.en(c),Ja.wj(c)}function da(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].Ha.nc,e=0;e<d.length;e++){var f=d[e];-1==b.indexOf(f)&&b.push(f)}return b}function W(a,b,c,d){T.UG()&&(b*=window.devicePixelRatio,c*=window.devicePixelRatio);var f=e();f&&(f=f.J,b*=f.gp,c*=f.gp);b*=a.Yj;c*=a.Zj;d[0]=Math.floor(b);d[1]=Math.floor(c);return d}function Ga(a,b,c){a=W(a,b,c,Gc);return a[0]>ib.dc||a[1]>ib.dc?(Oa.warn("Texture size exceeds platform limits, downscaling"),
Math.min(ib.dc/a[0],ib.dc/a[0])):1}function P(a,b,c){for(var d=a.J,e=za.Da(a.bj,a).ja,f=0!=c?b/c:1,h=0;h<e.length;h++){var g=e[h];Na.SU(g,f);Na.set_projection(g,!1);d.Zc&&Na.QC(g,d.Zc)}if(d.Zc){d.Gw=!0;d=ba(a,[Q.Yf]);for(h=0;h<d.length;h++)d[h].Na=!0;d=ba(a,[Q.cd]);for(h=0;h<d.length;h++)d[h].Na=!0}ua(a,b,c)}function ua(a,b,c){var d=a.J.wa,e=Infinity;ka.Ip(d,function(a){a.rn&&(e=Math.min(e,Ga(a,b,c)))});ka.Ip(d,function(f,h,g,k){if(f.rn){var l,m;k&&k.type==Q.uk||g.bc&&!f.Pt?(l=b*f.Yj,m=c*f.Zj):(m=
W(f,b,c,Gc),l=m[0]*e,m=m[1]*e);if(h)for(h=0;h<g.fb.length;h++)g.fb[h]==f&&Ha.resize(f.Oa,l,m);else switch(Ha.Ho(f.Oa)&&(Ha.resize(f.Oa,l,m),f.Oa.ne&&(k.gw=f.Oa.BH)),f=g.H,f.width=l,f.height=m,g.type){case Q.hq:Ca(a,{dof_power:g.H.dof_power});break;case Q.iq:V(a,{small_glow_mask_width:g.small_glow_mask_width,large_glow_mask_width:g.large_glow_mask_width});break;case Q.bq:la(a,{blur:g.Sn});break;case Q.HD:f.width=f.Qb.width;f.height=f.Qb.height;break;case Q.Jn:g=ka.Tc(d,g,Q.gc);f=ka.Tc(d,g,Q.gc);m=
ka.Tc(d,f,Q.gc);h=ka.Tc(d,m,Q.gc);ka.Sd(g,1/l,1/l);ka.Sd(f,1/l,1/l);ka.Sd(m,1/l,1/l);ka.Sd(h,1/l,1/l);break;default:ka.Sd(g,1/l,1/m)}}})}function ba(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];a.J.wa&&Fa.fa(a.J.wa,function(a,b){b.type==e&&c.push(b)})}return c}function ja(a,b){return ka.Rb(a.J.wa,b)}function ca(a){var b=e();b&&Fa.fa(b.J.wa,function(b,c){var d=c.H;d&&d.type==Na.Oe&&(c.ym=a)})}function Ca(a,b){var c=ba(a,[Q.hq]);if(!c.length)return Oa.error("DOF is not enabled on the scene. Check camera settings"),
0;for(var d=0;d<c.length;d++){var e=c[d],f=b,h=a,g=e.dof_bokeh,k=g?ba(h,[Q.Hy]):[],h=h.J.wa;if("boolean"==typeof f.dof_on&&(e.H.dof_on=f.dof_on,g))for(var l=0;l<k.length;l++)k[l].H.dof_on=f.dof_on;if("number"==typeof f.dof_distance&&(e.H.dof_distance=f.dof_distance,g))for(l=0;l<k.length;l++)k[l].H.dof_distance=f.dof_distance;if("number"==typeof f.dof_front_start&&(e.H.dof_front_start=f.dof_front_start,g))for(l=0;l<k.length;l++)k[l].H.dof_front_start=f.dof_front_start;if("number"==typeof f.dof_front_end&&
(e.H.dof_front_end=f.dof_front_end,g))for(l=0;l<k.length;l++)k[l].H.dof_front_end=f.dof_front_end;if("number"==typeof f.dof_rear_start&&(e.H.dof_rear_start=f.dof_rear_start,g))for(l=0;l<k.length;l++)k[l].H.dof_rear_start=f.dof_rear_start;if("number"==typeof f.dof_rear_end&&(e.H.dof_rear_end=f.dof_rear_end,g))for(l=0;l<k.length;l++)k[l].H.dof_rear_end=f.dof_rear_end;"number"==typeof f.dof_bokeh_intensity&&(e.H.dof_bokeh_intensity=f.dof_bokeh_intensity,g&&(k=ka.vv(h,e,Q.gc),k[0].H.dof_bokeh_intensity=
f.dof_bokeh_intensity,k[1].H.dof_bokeh_intensity=f.dof_bokeh_intensity,k[0]=ka.Tc(h,k[0],Q.gc),k[0].H.dof_bokeh_intensity=f.dof_bokeh_intensity));if("number"==typeof f.dof_power)if(g){f=f.dof_power;e.H.dof_power=f;var f=f/2,g=e.H.width,l=e.H.height,m=[1/g,0],n=[1/g*.5,1/l*.866],L=[-1/g*.5,1/l*.866],k=ka.vv(h,e,Q.gc);ka.qd(k[0],f);ka.Sd(k[0],L[0],L[1]);ka.qd(k[1],f);ka.Sd(k[1],n[0],n[1]);k[0]=ka.Tc(h,k[0],Q.gc);ka.qd(k[0],f);ka.Sd(k[0],m[0],m[1]);e.H.Kd&&(k[0]=ka.Tc(h,k[0],Q.Hy),k[0]=ka.Tc(h,k[0],
Q.gc),ka.Sd(k[0],1/g,1/l),k[0]=ka.Tc(h,k[0],Q.gc),ka.Sd(k[0],1/g,1/l))}else e.H.dof_power=f.dof_power,k=ka.Tc(h,e,Q.gc),h=ka.Tc(h,k,Q.gc),ka.qd(k,e.H.dof_power),ka.Sd(k,1/e.H.width,1/e.H.height),ka.qd(h,e.H.dof_power),ka.Sd(h,1/e.H.width,1/e.H.height)}}function la(a,b){var c=ba(a,[Q.wt]),d=ba(a,[Q.bq]);if(!c.length||!d.length)return Oa.error("Bloom is not enabled on the scene"),0;if("number"==typeof b.key)for(var e=0;e<c.length;e++)c[e].Vn=b.key,c[e].Na=!0;if("number"==typeof b.edge_lum)for(e=0;e<
c.length;e++)c[e].Un=b.edge_lum,c[e].Na=!0;if("number"==typeof b.blur)for(e=0;e<d.length;e++){d[e].Sn=b.blur;for(var f=a.J.wa,h=d[e].H.width/.5,g=d[e].H.height/.5,k=ka.vv(f,d[e],Q.gc),l=0;l<k.length;++l){var m=k[l],n=ka.Tc(f,m,Q.gc),L=h*m.Tn,q=g*m.Tn;ka.qd(m,b.blur);ka.Sd(m,1/L,1/q);ka.qd(n,b.blur);ka.Sd(n,1/L,1/q)}}if("number"==typeof b.average_luminance)for(e=0;e<c.length;e++)c[e].Wl||(c[e].average_luminance=b.average_luminance,c[e].Na=!0)}function V(a,b){var c=ba(a,[Q.iq]);if(!c.length)return Oa.error("Glow is not enabled on the scene"),
null;for(var d=0;d<c.length;d++){for(var e=c[d],f=b,h=a.J.wa,g=ka.DR(h,e),k=0;k<g.length;++k){var l=g[k];if(l.type==Q.gc&&"GLOW_MASK_LARGE"==l.Ab)var m=l;if(l.type==Q.gc&&"GLOW_MASK_SMALL"==l.Ab)var n=l}g=ka.Tc(h,m,Q.gc);h=ka.Tc(h,n,Q.gc);"number"==typeof f.small_glow_mask_coeff&&(e.small_glow_mask_coeff=f.small_glow_mask_coeff,e.Na=!0);"number"==typeof f.large_glow_mask_coeff&&(e.large_glow_mask_coeff=f.large_glow_mask_coeff,e.Na=!0);"number"==typeof f.small_glow_mask_width&&(e.small_glow_mask_width=
f.small_glow_mask_width,ka.qd(n,f.small_glow_mask_width),ka.Sd(n,1/e.H.width,1/e.H.height),n.Na=!0,ka.qd(h,f.small_glow_mask_width),ka.Sd(h,1/e.H.width,1/e.H.height),h.Na=!0);"number"==typeof f.large_glow_mask_width&&(e.large_glow_mask_width=f.large_glow_mask_width,ka.qd(m,f.large_glow_mask_width),ka.Sd(m,1/e.H.width,1/e.H.height),m.Na=!0,ka.qd(g,f.large_glow_mask_width),ka.Sd(g,1/e.H.width,1/e.H.height),g.Na=!0)}}function ta(a,b,c){var d=a.J,e=d.td;if(!e.kr)return e.Wi;var f=e.waves_height,h=e.waves_length,
g=e.Wi,k=Da.length(d.Yh)||1;a=ja(a,Q.Hb).time;a*=k;k=Gc;k[0]=20/h*(b-.25*a);k[1]=20/h*(c-.25*a);var l=Xa.IE(k);k[0]=17/h*(c+.1*a);k[1]=17/h*(b+.1*a);var k=l+Xa.IE(k)-1,m=e.dst_noise_scale0,l=e.dst_noise_scale1,n=e.dst_noise_freq0,L=e.dst_noise_freq1,q=Gc;q[0]=m*(b+n*a);q[1]=m*(c+n*a);m=Xa.oC(q);q[0]=l*(c-L*a);q[1]=l*(b-L*a);l=f*m*Xa.oC(q);e.tl?(L=(b-e.mp[0])/e.np[0],q=(e.mp[1]+c)/e.np[1],L+=.5,q+=.5,1<L||0>L||1<q||0>q?b=l:(d=Xa.fG(d.lC,e.mC,L,q),L=e.dir_noise_scale,q=e.dir_noise_freq,m=Math.sqrt(d),
n=Math.max(m,e.dst_min_fac),b=f*Math.max(d,e.dir_min_shore_fac)*Math.sin(m/(h/e.cB/Math.PI)+e.dir_freq*a)*Math.max(Xa.oC([L/h*(b+q*a),L/h*(c+q*a)]),e.dir_min_noise_fac)*(1-n)+l*n,k*=d)):b=l;return g+(b+.05*k)}function xa(a,b){a.Om&&a.type==Q.gc&&b.$b!=a.$b&&(a.$b=b.$b);b.$b||a.type!=Q.Jn||(a.jr=0)}function I(a,b,c,d){var e=Fa.$a(a,b);Na.kx(e.H,c,d);e.uq=!0;Fa.El(a,b,function(b,e,f){f.active&&f.from==c&&ka.gO(f)&&Ka(a,b,f.to,d)});Fa.jk(a,b,function(b,e,f){f.active&&f.from==c&&f.from==f.to&&I(a,b,c,
d)})}function Ka(a,b,c,d){a=Fa.$a(a,b).Za;for(b=0;b<a.length;b++)for(var e=a[b].La,f=0;f<e.length;f++)Y.wU(e[f].ya,d,c)}function Va(a){for(var b=ba(a,[Q.Zi]),c=0;c<b.length;c++){var d=b[c],e=d.H,f=a.bj.A,h=$a.Lb(f.D,ac),g=Mb;g[0]=0;g[1]=0;g[2]=-d.kd[2]/2;d=$a.vb(f.D,sb);Da.transformQuat(g,d,g);g[0]+=h[0];g[1]+=h[1];g[2]=0;Sa.identity(d);Na.iC(e,g,d)}}function Ia(a,b){Fa.fa(a,function(c,d){if(d.type==Q.ai){d.fb[0]&&d.nh[0]||Xa.K("Wrong MOTION_BLUR subscene");var e=d.fb[0],f=d.nh[0];d.nh[0]=d.H.Qb;
Fa.El(a,c,function(b,c,d){d.active&&Ka(a,b,d.to,f)});I(a,c,e.from,f);Ka(a,c,e.to,d.nh[0]);d.zw=Math.exp(-b/d.mb_factor)}})}function va(a){return a.J.Yh}function na(a,b){if(!a.J.Qh)return null;for(var c=a.J.Qh.sj,d=0;d<c.length;d++)if(c[d]==b)return d;c=a.J.Qh.Lz;for(d=0;d<c.length;d++)if(c[d]==b)return d;return null}var Y=u("__batch"),ya=u("__boundings"),Na=u("__camera"),oa=u("__config"),T=u("__container"),Ea=u("__debug"),Fa=u("__graph"),L=u("__hud"),ha=u("__input"),ra=u("__mat4"),Aa=u("__nodemat"),
Qa=u("__objects"),Za=u("__textures"),za=u("__obj_util"),Pa=u("__physics"),Ra=u("__prerender"),La=u("__primitives"),Oa=u("__print"),Sa=u("__quat"),Ja=u("__renderer"),ka=u("__scenegraph"),hc=u("__sfx"),qa=u("__shaders"),Q=u("__subscene"),Ha=u("__textures"),$a=u("__tsr"),Xa=u("__util"),Da=u("__vec3"),Ya=u("__vec4"),Cb=u("__version"),Gb=oa.rm,Ba=oa.L,ib=oa.zh,Wb=oa.Xc,ab=oa.kp,Xb=[Q.Zi,Q.xd,Q.Hb,Q.cd,Q.Gg,Q.Yd,Q.Zd,Q.wd,Q.Xf,Q.jf,Q.Ne,Q.ph,Q.Yf,Q.rh,Q.qh];a.WX=Xb;var mb=[Q.Hb,Q.cd,Q.Gg,Q.Yd,Q.Zd,Q.wd,
Q.In,Q.vt,Q.re,Q.Xf,Q.jf,Q.wt,Q.Yf,Q.xd,Q.Ne,Q.ph,Q.rh],Lb=[Q.Hb,Q.Bt,Q.cd,Q.Gg,Q.Yd,Q.Zd,Q.wd,Q.Xf,Q.jf],$c=[Q.xd,Q.Hb,Q.cd,Q.Gg,Q.Yd,Q.Zd,Q.wd,Q.Xf,Q.jf,Q.Ne,Q.ph,Q.Yf,Q.In,Q.rh,Q.qh],Fc=[Q.Hb,Q.cd,Q.Gg,Q.Yd,Q.Zd,Q.wd,Q.Xf,Q.jf],Ua=null,jb=null,bb=[],Hb=null,$b=Math.PI/2,Gc=new Float32Array(2),ac=new Float32Array(3),Mb=new Float32Array(3),sb=new Float32Array(4),Wa=new Float32Array(4),Ab=new Float32Array(16),Ib=new Float32Array(24),Db=new Float32Array(24),jc=ya.Se(),uc=ya.Se(),vc=0,wc=-Infinity,
ic=new Uint8Array(4);a.ZY=function(){return{}};a.set_active=function(a){jb=a;hc.RU(a)};a.cU=function(a,b){var c=a.J,d=ka.cP(c.wa);if(a==b){P(a,T.tG(),T.sG());for(var e=0;e<d.length;e++)a.J.gn.push(d[e])}else for(e=a.$f[0],P(a,e.$j,e.$j),e=0;e<d.length;e++)b.J.gn.push(d[e]);d=ba(a,$c);for(e=0;e<d.length;e++)d[e].Yh.set(c.Yh);for(e=0;e<c.gn.length;e++)c.gn[e].type==Q.xd&&Ja.wj(c.gn[e])};a.Gh=e;a.cv=c;a.get_active=b;a.Pa=function(){return jb?!0:!1};a.Ok=function(a){return a.bj};a.Ar=function(){return bb};
a.yv=function(){if(1==bb.length)return bb;for(var a=0;a<bb.length;a++){var b=bb[a].J.wa;Fa.fa(b,function(b,c){for(var d=c.Za,e=0;e<d.length;e++)for(var f=d[e].La,h=0;h<f.length;h++){for(var g=f[h],k=g.ya.na,l=g.ya.rf,m=null,n=0;n<k.length;n++)if("SCENE"==k[n].source&&k[n].Ls==bb[a].name&&c.type!=Q.Jy){Oa.error('Texture-scene loop detected. A scene is rendered to texture "'+l[n]+'" yet this texture belongs to the same scene.');m=g.ya;break}if(m)for(k=m.na,m.na=[],m.Mf=[],Y.vW(m,null),Y.Ic(m),Q.Rc(c,
g),n=0;n<k.length;n++)Za.YE(k[n])}})}for(var c=[],a=0;a<bb.length;a++)if(b=bb[a],!b.$f.length){b=Fa.Pj(Hb,b);Fa.nQ(Hb,b);b=Fa.yl(Hb,b,Fa.rk);b=Fa.DC(b);Fa.fa(b,function(a,b){c.push(b)});break}return c};a.SM=function(a,b,c,e,g){a.$f=a.$f||[];a.Ga=null;var m=a.J,L=za.Da(a.bj,a),C=a.bj.A;m.Yp=[];var V=a.world;m.JS=c.length;m.zl=p(c);m.zx=t(V,m.zl);m.Ql=E(V,m.zx);m.tK=w(V);if(V=!a.$f.length)a:{if("HMD"==Ba.stereo){if(L.ja[0].type!=Na.Kc){Oa.warn("Head-mounted display stereo is disabled for the non-perspective camera");
Ba.stereo="NONE";V=!1;break a}if(!ha.can_use_device(ha.DEVICE_HMD)){Oa.warn("Head-mounted display stereo is disabled for the non-WebVR and non-mobile devices");Ba.stereo="NONE";V=!1;break a}}V="HMD"==Ba.stereo}m.Qv=V;if(V=!a.$f.length)L.ja[0].type!=Na.Kc&&"ANAGLYPH"==Ba.stereo?(Oa.warn("Anaglyph stereo is disabled for the non-perspective camera"),Ba.stereo="NONE",V=!1):V="ANAGLYPH"==Ba.stereo;m.anaglyph_use=V;if(V=!a.$f.length)L.ja[0].type!=Na.Kc&&"SIDEBYSIDE"==Ba.stereo?(Oa.warn("Side-by-side stereo is disabled for the non-perspective camera"),
Ba.stereo="NONE",V=!1):V="SIDEBYSIDE"==Ba.stereo;m.Hs=V;m.JM=!m.anaglyph_use&&!m.Hs&&J(a,g);m.Qh=d(a,b,e);m.xN=G(a);m.qT=H(a);m.UN=z(a);m.VR=l(a);m.HT=F(a);m.xi=r(a);m.dof=Ba.dof&&(0<C.dof_distance||C.dof_object);m.motion_blur=Ba.motion_blur&&a.b4w_enable_motion_blur;m.compositing=Ba.compositing&&a.b4w_enable_color_correction;m.antialiasing=Ba.antialiasing&&1==Ba.ec&&"NONE"!=a.b4w_antialiasing_quality;m.ssao=Ba.ssao&&a.b4w_enable_ssao;m.god_rays=Ba.god_rays&&a.b4w_enable_god_rays&&m.zl;m.XP=Ba.Ju;
m.Cv=a.b4w_glow_settings.render_glow_over_blend;m.VV=q(a);g=h(e);m.uH=g;m.refractions=M(a,g);m.Zc=n(a,c,e);m.td=v(e);m.$h=B(e);m.GV=x(e);m.shore_smoothing=k(e);m.Nc=f(a,e);m.vO=y(a,e);m.outline=D(a,e);m.glow_materials=N(a,e);m.gT=a.b4w_lod_smooth_type;m.mH=a.b4w_lod_hyst_interval;switch(Ba.reflection_quality?Ba.reflection_quality:a.b4w_reflection_quality){case "LOW":m.ri=ab.sF;m.Ph=ab.XH;break;case "MEDIUM":m.ri=ab.QP;m.Ph=ab.WT;break;case "HIGH":m.ri=ab.PP;m.Ph=ab.VT;break;default:m.ri=ab.sF,m.Ph=
ab.XH}T.UG()?(Oa.log("%cENABLE HIDPI MODE","color: #00a"),m.UD="AA_QUALITY_LOW",m.gp=1,Ba.ec=1):1<Ba.ec?(Oa.log("%cENABLE MSAA RENDERING: "+Ba.ec+"x","color: #00a"),m.gp=1):(m.UD="AA_QUALITY_"+a.b4w_antialiasing_quality,m.gp=Ba.quality===oa.P_ULTRA?1.33:1);c=a.$f.sort(function(a,b){return b.$j-a.$j});m.wa=ka.bP(m,L,C,c);m.gn=[];m.Gw=!1;m.pB=!1;m.qB=!1;m.Yh=new Float32Array(3);bb.push(a);Hb||(Hb=Fa.create());Fa.Y(Hb,a);for(m=0;m<b.length;m++)za.cC(b[m],!0,a);a=T.get_container();T.resize(a.clientWidth,
a.clientHeight,!0)};a.TM=function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d].J;e&&e.Ci&&(e.$p=c,a.J.Yp.push(b[d]))}};a.uv=function(a){return a.J.wa};a.YF=function(a,b){Fa.fa(b,function(c,d){var e=null;switch(d.type){case Q.gc:e=Y.zu(d.ps);break;case Q.Bt:e=Y.iP(d);break;case Q.Vy:e=Y.jP(d);break;case Q.jD:e=Y.PO();break;case Q.In:e=Y.TO(d.Rw,d.Sf,d.wl);break;case Q.vt:e=Y.UO();break;case Q.ai:e=Y.XO();break;case Q.Hy:e=Y.IO(d.pu);break;case Q.hq:var e=Y.QO(d),f=d.H.dof_power;if(d.dof_bokeh){var f=
f/2,h=ka.vv(b,d,Q.gc);ka.qd(h[0],f);ka.qd(h[1],f);h[0]=ka.Tc(b,h[0],Q.gc);ka.qd(h[0],f)}else{var h=ka.Tc(b,d,Q.gc),g=ka.Tc(b,h,Q.gc);ka.qd(h,f);ka.qd(g,f)}break;case Q.Jn:var e=Y.YO(),f=ka.Tc(b,d,Q.gc),h=ka.Tc(b,f,Q.gc),g=ka.Tc(b,h,Q.gc),k=ka.Tc(b,g,Q.gc);ka.qd(h,d.Cq);ka.qd(f,d.Cq);ka.qd(k,d.pr*d.bn);ka.qd(g,d.pr*d.bn);break;case Q.iq:e=Y.SO();break;case Q.Iy:e=Y.JO();break;case Q.dD:e=Y.DO(d);break;case Q.Ty:case Q.zt:case Q.mq:case Q.At:e=Y.gP(d.type);break;case Q.Hg:e=Y.kP(d.Ab);break;case Q.re:e=
Y.MO(a,d);break;case Q.tk:e=Y.KO();break;case Q.Kn:e=Y.LO();break;case Q.hD:e=Y.HO();break;case Q.LUMINANCE:e=Y.VO();break;case Q.gD:e=Y.EO();break;case Q.wt:e=Y.WO(d.Wl);break;case Q.bq:e=Y.GO(d.au);break;case Q.HD:e=Y.zu("NONE");break;case Q.yM:e=Y.LP();break;case Q.Gn:e=Y.CO();break;case Q.kq:e=Y.$O()}e&&(f=Q.Ai(e,za.$n("NONE")),Q.Rc(d,f),ka.mm(b,d,e),R(e))})};a.append_object=function(a,b,c,d){switch(b.type){case "MESH":case "LINE":case "WORLD":var e=a.J.wa,f=b.A;!ka.Rb(e,Q.xd)&&f.Td&&(f.Td=!1);
f=ba(a,Xb);(c||d)&&Pa.append_object(b,a);for(d=0;d<f.length;d++){var h=f[d],g=b,k=e,l=a,n=c;switch(h.type){case Q.Hb:A(h,g,k,"OPAQUE",l,n);break;case Q.cd:A(h,g,k,"BLEND",l,n);break;case Q.Gg:A(h,g,k,"XRAY",l,n);break;case Q.Yd:A(h,g,k,"GLOW",l,n);break;case Q.Zd:case Q.wd:S(h,g,k,!1,l,n);break;case Q.Xf:case Q.jf:S(h,g,k,!0,l,n);break;case Q.Yf:for(var L=za.Da(g,l),q=L.$,r=0;r<q.length;r++){var p=q[r];if("SHADOW"==p.type&&"RECEIVE"==p.Ab&&p.Td){if(!n&&(m(p,h,g,k,"SHADOW",l),!Y.Ic(p)))continue;var t=
Q.Ai(p,g.A,L.eg[r]);Q.Rc(h,t);ka.mm(k,h,p);R(p)}}break;case Q.xd:L=!1;q=g.A;g=za.Da(g,l);r=g.$;p=ka.Rb(k,Q.Zi);for(t=0;t<r.length;t++){var w=r[t];if("SHADOW"==w.type&&"CAST"==w.Ab){L=!0;if(!n){X(w);var ha=h.Xo;Y.yb(w,"NUM_LIGHTS",ha);Y.yb(w,"NUM_LFACTORS",ha%2?Math.floor(ha/2)+1:ha/2);K(w.eb,h.H);qa.ma(w.eb,"SHADOW_USAGE","SHADOW_CASTING");w.Nc&&p&&O(w,p,q);Y.yb(w,"SHADOW_TEX_RES",qa.X(l.J.Zc.csm_resolution));if(!Y.Ic(w))continue}w.Nc&&(l.J.Zc.gQ=!0);ha=Q.Ai(w,q,g.eg[t]);Q.Rc(h,ha);ka.mm(k,h,w);R(w)}}L&&
(g=l.J.Zc,n=ka.Rb(k,Q.Hb),U(h,l,n.H,g,!0));break;case Q.Ne:fa(h,g,k,l,n);break;case Q.ph:fa(h,g,k,l,n);break;case Q.rh:L=g.A;q=za.Da(g,l);r=q.$;for(p=0;p<r.length;p++)if(t=r[p],"COLOR_ID"==t.type&&"OUTLINE"==t.Ab){if(!n&&(m(t,h,g,k,"COLOR_ID",l),Y.yb(t,"USE_OUTLINE",1),!Y.Ic(t)))continue;t=Q.Ai(t,L,q.eg[p]);Q.Rc(h,t)}break;case Q.Zi:k=g.A;g=za.Da(g,l);l=g.$;for(L=0;L<l.length;L++)if(q=l[L],"GRASS_MAP"==q.type){if(!n&&!Y.Ic(q))if("DEBUG"===Cb.type())Y.Qt(q,"error.glslv","error.glslf"),Y.Ic(q);else continue;
q=Q.Ai(q,k,g.eg[L]);Q.Rc(h,q);q=h.H;w=k.wh;r=h.kd[0];p=h.kd[1];t=h.kd[2];0==r&&0==p?(r=w.min_z,p=w.max_z):(r=Math.min(r,w.min_z),p=Math.max(p,w.max_z));w=1E-4*(p-r);r-=w;p+=w;h.kd[0]=r;h.kd[1]=p;Na.CI(q,t/2,t/2,-p,-r);Na.set_projection(q,!1)}break;case Q.qh:for(L=g.A,g=za.Da(g,l),l=g.$,q=0;q<l.length;q++)if(r=l[q],"DEBUG_VIEW"==r.type){if(!n&&(r.Nc&&(p=ka.Rb(k,Q.Zi))&&O(r,p,L),!Y.Ic(r)))if("DEBUG"===Cb.type())Y.Qt(r,"error.glslv","error.glslf"),Y.Ic(r);else break;p=Q.Ai(r,L,g.eg[q]);Q.Rc(h,p);ka.mm(k,
h,r);R(r)}}}break;case "LAMP":ma(b,a)}c=za.Da(b,a);e=c.$;for(f=0;f<e.length;f++)null==e[f].zb&&"PHYSICS"!=e[f].type&&(za.tI(c,f),f--);za.cC(b,!0,a)};a.nS=function(a,b){if(a&&a.J&&a.J.wa){var c=a.J.wa,d=ka.Rb(a.J.wa,Q.re);if(d){var e=null;ka.Ip(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==Q.re&&d.type==Q.uk)return e=a.Oa,!0});if(e){var f=ab.Cu,h=Y.Br(b,a);if(h&&h.xb)h=Aa.GR(Aa.xv(h.he).wa),-1!=h&&(f=Za.qz(h/2));else if(h=a.J.Ql.mn)f=h.vJ;f=Math.min(f,ib.rg);d.H.width=f;d.H.height=f;Ha.lx(e,f);
C(a,f);if(d=ka.Rb(a.J.wa,Q.tk)){d.H.width=f;d.H.height=f;var g=null;ka.Ip(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==Q.tk&&d.type==Q.Hb)return g=a.Oa,!0});g&&Ha.lx(g,f)}if(f=ka.Rb(a.J.wa,Q.Kn)){f.H.width=128;f.H.height=128;var k=null;ka.Ip(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==Q.Kn&&d.type==Q.Hb)return k=a.Oa,!0});k&&Ha.lx(k,128)}}}}};a.EW=function(a,b){for(var c=a.S,d=0;d<c.length;d++){var e=c[d].lb,f=e.J.wa,h=ka.Rb(e.J.wa,Q.re);if(h){var g=null;ka.Ip(f,function(a,b,c,d){if("CUBEMAP"==
a.from&&c.type==Q.re&&d.type==Q.tk)return g=a.Oa,!0});g&&(f=Za.qz(b.height/2),f=Math.min(f,ib.rg),h.H.width=f,h.H.height=f,Ha.lx(g,f),C(e,f))}}};a.dC=function(a){a.J.Gw=!0};a.XW=function(a,b){Fa.fa(b,function(b,c){c.type===Q.xd&&($a.copy(a.D,c.H.D),$a.copy(a.Rf,c.H.Gs))})};a.O_=ia;a.mR=function(a,b){for(var c=a.J.Zc,d=new Float32Array(c.csm_num),e=0;e<c.csm_num;e++)d[e]=Na.OP(c,b,e);return d};a.Lq=pa;a.im=Z;a.is_hidden=function(a){return a.A.hide};a.jI=function(a,b){for(var c=0;c<a.S.length;c++)for(var d=
ba(a.S[c].lb,Xb),e=0;e<d.length;e++)for(var f=d[e].Za,h=0;h<f.length;h++)for(var g=f[h].La,k=g.length-1;0<=k;k--){var l=g[k];if(l.ug==a.A)if(l.ya){if("undefined"==typeof b||-1!=l.ya.cc.indexOf(b)||0==l.ya.cc.length)Y.ZE(l.ya),g.splice(k,1)}else g.splice(k,1)}};a.GW=function(a,b){for(var c=a.Eb,d=za.Da(a,b).Wr,e=ba(b,mb),f=0;f<e.length;f++){var h=e[f];h.Rm.set(c.Sq,4*d);h.Na=!0}};a.at=ma;a.iy=function(a){a=a.S;for(var b=0;b<a.length;b++)ea(a[b].lb)};a.jy=ea;a.ZW=wa;a.cleanup=function(){for(var a=0;a<
bb.length;a++){var b=bb[a];Fa.fa(b.J.wa,function(a,b){if(b.type!=Q.uk){var c=b.H;Ja.qU(c.We,c.Qb,c.wf,c.width,c.height);for(var c=b.Za,d=0;d<c.length;d++)for(var e=c[d].La,f=0;f<e.length;f++){var h=e[f].ya;h&&Y.ZE(h)}}});b.J.wa=null;b.J.gn=[]}jb=Ua=null;bb.length=0;Hb=null};a.rH=function(a,b,c){a=Na.tQ(a,a.near,a.far,null,!0);var d=La.TQ(a);a=za.$n("DYNAMIC");a.wh=a.va={max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12};a.ue=a.tc=ya.sN();var e=a.ue.ab;a.xk=a.Db=ya.hz([e,0,0],[0,
e,0],[0,0,e],a.ue.U);c=Y.fP(d,c);c.vj=!0;c=Q.Ai(c,a);Q.Rc(b,c)};a.BZ=function(a){return[a.frame_start,a.frame_end]};a.MI=function(a,b,c){T.yV(a,b,c);jb&&P(jb,a,b)};a.Bg=ba;a.Tb=ja;a.oU=function(){ca(!1)};a.pU=function(){ca(!0)};a.get_environment_colors=function(a){a=ja(a,Q.Hb);var b=a.Md,c=a.Xd,d=[],e=[];d[0]=b[0];d[1]=b[1];d[2]=b[2];e[0]=c[0];e[1]=c[1];e[2]=c[2];return[a.kg,d,e]};a.set_environment_colors=function(a,b,c,d){for(var e=ba(a,mb),f=0;f<e.length;f++){var h=e[f];h.Md.set(c);h.Xd.set(d);
h.kg=b;h.Na=!0}(b=ka.Rb(a.J.wa,Q.re))&&wa(a,b)};a.get_sky_params=function(a){if((a=ja(a,Q.re))&&a.procedural_skydome){var b={};b.color=Array(3);Da.copy(a.vl,b.color);b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=a.use_as_environment_lighting;b.rayleigh_brightness=a.rayleigh_brightness;b.mie_brightness=a.mie_brightness;b.spot_brightness=a.spot_brightness;b.scatter_strength=a.scatter_strength;b.rayleigh_strength=a.rayleigh_strength;b.mie_strength=a.mie_strength;b.rayleigh_collection_power=
a.rayleigh_collection_power;b.mie_collection_power=a.mie_collection_power;b.mie_distribution=a.mie_distribution;return b}return null};a.vR=function(a){return ba(a,Lb)[0].Af[0]};a.tR=function(a){return ba(a,Lb)[0].Af[1]};a.wR=function(a){return ba(a,Lb)[0].Af[2]};a.uR=function(a){return ba(a,Lb)[0].Af[3]};a.zI=function(a,b){for(var c=ba(a,Lb),d=0;d<c.length;d++){var e=c[d];e.Af[0]=b;e.Na=!0}};a.xI=function(a,b){for(var c=ba(a,Lb),d=0;d<c.length;d++){var e=c[d];e.Af[1]=b;e.Na=!0}};a.AI=function(a,b){for(var c=
ba(a,Lb),d=0;d<c.length;d++){var e=c[d];e.Af[2]=b;e.Na=!0}};a.yI=function(a,b){for(var c=ba(a,Lb),d=0;d<c.length;d++){var e=c[d];e.Af[3]=b;e.Na=!0}};a.get_fog_color_density=function(a,b){var c=b||[],d=ba(a,Lb)[0].Ld;c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];return c};a.set_fog_color_density=function(a,b){for(var c=ba(a,Lb),d=0;d<c.length;d++){var e=c[d];e.Ld.set(b);e.Na=!0}};a.get_ssao_params=function(a){var b=ja(a,Q.Bt),c=ja(a,Q.Vy);a=ja(a,Q.Hb);if(!b)return null;var d={};d.quality=b.pn;d.use_hemisphere=
b.wp;d.use_blur_depth=c.sp;d.blur_discard_value=c.tp;d.radius_increase=b.yp;d.influence=b.xp;d.dist_factor=b.vp;d.ssao_only=a.ssao_only;d.ssao_white=b.ssao_white;return d};a.get_dof_params=function(a){a=ja(a,Q.hq);if(!a)return null;var b={};b.dof_on=a.H.dof_on;b.dof_bokeh=a.dof_bokeh;b.dof_distance=a.H.dof_distance;b.dof_front_start=a.H.dof_front_start;b.dof_front_end=a.H.dof_front_end;b.dof_rear_start=a.H.dof_rear_start;b.dof_rear_end=a.H.dof_rear_end;b.dof_power=a.H.dof_power;b.dof_bokeh_intensity=
a.H.dof_bokeh_intensity;b.dof_object=a.H.dof_object;return b};a.set_dof_params=Ca;a.get_god_rays_params=function(a){var b=ba(a,[Q.In]);a=ja(a,Q.vt);if(!b||!a)return null;var c={};c.god_rays_max_ray_length=b[0].al;c.god_rays_intensity=a.god_rays_intensity;c.god_rays_steps=Y.jd(b[0].Za[0].La[0].ya,"STEPS_PER_PASS")[1];return c};a.set_god_rays_params=function(a,b){var c=ba(a,[Q.In]),d=ba(a,[Q.vt]);if(!c.length||!d.length)return Oa.error("God Rays are not enabled on the scene"),0;if("number"==typeof b.god_rays_intensity)for(var e=
0;e<d.length;e++)d[e].god_rays_intensity=b.god_rays_intensity;if("number"==typeof b.god_rays_max_ray_length)for(var f=b.god_rays_max_ray_length,e=0;e<c.length;e++)c[e].al=f,c[e].fp=f/c[e].wl/(e+1),c[e].Na=!0;if("number"==typeof b.god_rays_steps)for(var h=qa.X(b.god_rays_steps,1),f=c[0].al,e=0;e<c.length;e++){c[e].wl=h;c[e].fp=f/h/(e+1);c[e].Na=!0;var g=c[e].Za[0].La[0],k=g.ya;Y.yb(k,"STEPS_PER_PASS",h);Y.Ic(k);Q.Rc(c[e],g)}for(e=0;e<d.length;e++)d.Na=!0};a.get_bloom_params=function(a){var b=ja(a,
Q.wt);a=ja(a,Q.bq);if(!b||!a)return null;var c={};c.key=b.Vn;c.edge_lum=b.Un;c.blur=a.Sn;c.adaptive=b.Wl;c.average_luminance=b.average_luminance;return c};a.set_bloom_params=la;a.get_glow_material_params=function(a){a=ja(a,Q.iq);if(!a)return null;var b={};b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b};a.set_glow_material_params=V;a.get_wind_params=
function(a){var b=va(a);a=Da.length(b);if(0==a)return null;var b=Xa.rad_to_deg(Math.atan2(b[0],-b[1])),c={};c.wind_dir=b;c.wind_strength=a;return c};a.LU=function(a){a.J.pB=!0};a.get_water_surface_level=ta;a.get_water_mat_params=function(a,b){var c=a.J.td,d=ja(a,Q.Hb);d&&c&&(b.waves_height=c.waves_height,b.waves_length=c.waves_length,b.water_fog_density=d.Xh[3],c=b.water_fog_color=[],c[0]=d.Xh[0],c[1]=d.Xh[1],c[2]=d.Xh[2])};a.set_water_params=function(a,b){var c=a.J.td;if(!c)return Oa.error("set_water_params() - no water parameters on the scene"),
null;"number"==typeof b.dst_noise_scale0&&(c.dst_noise_scale0=b.dst_noise_scale0);"number"==typeof b.dst_noise_scale1&&(c.dst_noise_scale1=b.dst_noise_scale1);"number"==typeof b.dst_noise_freq0&&(c.dst_noise_freq0=b.dst_noise_freq0);"number"==typeof b.dst_noise_freq1&&(c.dst_noise_freq1=b.dst_noise_freq1);"number"==typeof b.dir_min_shore_fac&&(c.dir_min_shore_fac=b.dir_min_shore_fac);"number"==typeof b.dir_freq&&(c.dir_freq=b.dir_freq);"number"==typeof b.dir_noise_scale&&(c.dir_noise_scale=b.dir_noise_scale);
"number"==typeof b.dir_noise_freq&&(c.dir_noise_freq=b.dir_noise_freq);"number"==typeof b.dir_min_noise_fac&&(c.dir_min_noise_fac=b.dir_min_noise_fac);"number"==typeof b.dst_min_fac&&(c.dst_min_fac=b.dst_min_fac);"number"==typeof b.waves_hor_fac&&(c.waves_hor_fac=b.waves_hor_fac);"number"==typeof b.water_dynamic&&(c.kr=b.water_dynamic);for(var d=ba(a,Fc),e=0;e<d.length;e++){var f=d[e];"number"==typeof b.water_fog_density&&c.Ld&&(f.Xh[3]=b.water_fog_density);"object"==typeof b.water_fog_color&&c.Ld&&
f.Xh.set(b.water_fog_color);f.Na=!0}};a.get_shore_dist=function(a,b,c){var d=a.J.td;if(!d.tl)return 100;var e=d.cB;a=d.Wi;var f=(b[0]-d.mp[0])/d.np[0],h=(d.mp[1]+b[1])/d.np[1],f=f+.5,h=h+.5;if(!(1<f||0>f||1<h||0>h))return d=e*Xa.fG(jb.J.lC,d.mC,f,h),b=(a-b[2])*c,b=Math.sqrt(d*d+b*b)};a.update=function(a,c){for(var d=b().bj.A,e=0;e<bb.length;e++){var f=bb[e],h=f.J.wa,g=f.J;if(g.td)var k=$a.get_trans_view(d.D),l=k[2]-ta(f,k[0],k[1]);for(k=0;k<g.Yp.length;k++){var m=g.Yp[k].J,n=m.ib,q=m.Hd;if(!(f.b4w_use_nla&&
m.Kl||!n&&!q)&&Ha.mK(m)){var r=Ha.jK(m),p=Ha.lK(m);n&&Ba.is_mobile_device&&(p-=5);var t=Ha.pX(m);r>=t&&m.kk||r<p?(Ha.reset_video(m),q&&(m.sl=Ha.jx(m,a))):r>=t&&!m.kk?Ha.pause_video(m):Ha.nK(m)&&(n?Ha.QJ(m):(n=Ha.jx(m,a),n!=m.sl&&(Ha.PJ(m),m.Xj++),m.sl=n))}}Fa.fa(h,function(b,c){-1<$c.indexOf(c.type)&&(c.time=a);g.td&&(c.Hq=l)})}for(e=0;e<bb.length;e++)if(f=bb[e],g=f.J,h=g.wa,d=g.gn,d.length)for(g.Gw&&(ga(f),g.Gw=!1),g.pB&&(Va(f),g.pB=!1),g.qB&&(sa(f),g.qB=!1),g.motion_blur&&Ia(h,c),f=ka.Rb(h,Q.rh),
k=0;k<d.length;k++)h=d[k],Ra.en(h),f&&xa(h,f),Ja.wj(h);Ba.show_hud_debug_info&&L.DV(bb,c)};a.yU=function(a){a.J.qB=!0};a.iA=function(a){var b=[];Fa.fa(a.J.wa,function(a,c){b.push(c)});return b};a.get_cam_water_depth=function(){var a=ja(jb,Q.cd),b=jb;return a||b.J.td?a.Hq:null};a.OJ=function(a){Fa.fa(a.J.wa,function(a,b){b.Na=!0})};a.WU=function(a,c){a.debug_view_mode=c;a.$b=c!=Ea.DV_NONE;a.mb=c==Ea.DV_TRANSPARENT_WIREFRAME;a.Na=!0;for(var d=b(),e=0;e<Fc.length;e++)for(var f=ba(d,[Fc[e]]),h=0;h<f.length;h++)f[h].ir=
c==Ea.DV_RENDER_TIME};a.VU=function(a,b){a.debug_colors_seed=b;a.Na=!0};a.nV=function(a,b){a.Hu=b;a.Na=!0};a.wV=function(a,b){for(var c=a.Za,d=0;d<c.length;d++)for(var e=c[d].La,f=0;f<e.length;f++){var h=e[f].ya;Da.copy(b,h.wireframe_edge_color);h.zb.Ro=!0}};a.KJ=function(a,b){var c=b.lo,d=a.J.Yh;if(c&&"WIND"==c.type&&d){var e=$a.get_quat_view(b.A.D);Da.transformQuat(Xa.AXIS_Z,e,d);Da.normalize(d,d);Da.scale(d,c.jJ,d);c=ba(a,$c);for(e=0;e<c.length;e++)c[e].Yh.set(d);return!0}return!1};a.QT=function(a,
b,c){var d=ja(a,Q.Ne);if(d){var e=Gb.enabled&&(Gb.Qs===Q.Ne||Gb.Qs===Q.ph);if(e)var f=T.Iq(b,c,Gc,d.H);else{var h=T.get_canvas();Na.UU(d.H,b,c,h.clientWidth,h.clientHeight)}Ra.en(d);d.$b&&Ja.wj(d);(a=ja(a,Q.ph))?(ra.copy(d.H.Bb,a.H.Bb),ra.copy(d.H.Qf,a.H.Qf),Xa.aA(a.H.Qf,a.H.Cm),Ra.en(a),a.$b&&Ja.wj(a),b=a.H):b=d.H;if(d.$b||a&&a.$b)return e?(f[1]=b.height-f[1],Ja.cx(b.We,f[0],f[1],1,1,ic)):Ja.cx(a?a.H.We:d.H.We,0,0,1,1,ic)}else Oa.error("Object Selection is not available on the scene");return null};
a.set_outline_color=function(a){for(var c=b(),c=ba(c,[Q.Jn]),d=0;d<c.length;d++){var e=c[d];e.Nh.set(a);e.Na=!0}};a.GZ=va;a.get_meta_tags=function(a){var b={title:"",description:""};a.b4w_tags&&(b.title=a.b4w_tags.title,b.description=a.b4w_tags.description);return b};a.get_custom_prop=function(a){return a.b4w_custom_prop};a.JJ=function(a,b){var c=ac;Da.negate(b,c);for(var d=0;6>d;d++){var e=a.Ng[d],f=a.qm[d],h=a.H;ra.translate(Xa.FK[d],c,e);ra.multiply(h.Bb,e,h.Qf);Xa.aA(h.Qf,f)}};a.LJ=function(a,
b,c){Xa.kW(b,c,Xa.AXIS_Z,a.H.xc)};a.fE=function(a,b,c){var d=a.J.Qh;if(d&&b)for(var e=0;e<b.length;e++){var f=b[e],h=za.Da(f,a);if(-1!=f.A.Od){var g=d.Mi,k=d.Ww,f=f.A.Od;k.length&&f<k.length?h.Mi=k[f]:g.length&&f<g.length&&(h.Mi=g[f])}else-1!=f.A.be&&(g=d.sj,k=d.Lz,f=f.A.be,k.length?h.sj=k[f]:g.length&&(h.sj=g[f]))}if(c)for(b=za.zv(c,Ba.ssao&&a.b4w_enable_ssao),c=a.J.Zc,e=0;e<b.length;e++)if(h=za.Da(b[e],a),c)for(d=ba(a,[Q.xd]),f=0;f<d.length;f++)e==d[f].zg&&h.kC.push(d[f])};a.marker_frame=function(a,
b){return a.timeline_markers[b]};a.set_hmd_params=function(a){var c=b();if(c=ja(c,Q.Hg))a.distortion_coefs&&(c.uj[0]=a.distortion_coefs[0],c.uj[1]=a.distortion_coefs[1],c.Na=!0),a.chromatic_aberration_coefs&&(c.chromatic_aberration_coefs[0]=a.chromatic_aberration_coefs[0],c.chromatic_aberration_coefs[1]=a.chromatic_aberration_coefs[1],c.chromatic_aberration_coefs[2]=a.chromatic_aberration_coefs[2],c.chromatic_aberration_coefs[3]=a.chromatic_aberration_coefs[3],c.Na=!0),a.base_line_factor&&(c.uj[2]=
a.base_line_factor,c.Na=!0),a.inter_lens_factor&&(c.uj[3]=a.inter_lens_factor,c.Na=!0),null!=a.enable_hmd_stereo&&(c.enable_hmd_stereo=a.enable_hmd_stereo,c.Na=!0)};a.Dw=function(b,c){for(var d=bb,e=0;e<d.length;e++)ka.wT(a.uv(d[e]),b,c)};a.qW=function(a){for(var b=Qa.Sb(a,"LAMP",Qa.DATA_ID_ALL),c=ba(a,Xb),d=0;d<c.length;d++)for(var e=c[d],f=e.Za,h=0;h<f.length;h++)for(var g=f[h].La,k=0;k<g.length;k++){var l=g[k],m=l.ya;"MAIN"==m.type&&(Y.uW(m,b,a),Y.Ic(m),Q.Rc(e,l))}};a.gI=function(a){for(var b=
0;b<bb.length;b++)Fa.fa(bb[b].J.wa,function(b,c){for(var d=c.Za,e=0;e<d.length;e++)for(var f=d[e].La,h=0;h<f.length;h++){var g=f[h];g.ya==a&&Q.Rc(c,g)}})}};b4w.module.__physics=function(a,u){function e(a,b){for(var c=a.ve,d=0;d<c.length;d++)c[d].pd.et&&b.push(c[d]),e(c[d],b)}function c(a,b,c){for(var d=a.Ac.La,e=0;e<d.length;e++)for(var f=d[e].N,h=0;h<f.tf.length;h++){var g=f.tf[h];"ANY"!=g.Jb&&c!=g.Jb||r(g,a,b)}}function b(a,b,c){if(m.Wv(a))switch(b){case m.MK:var d=n(a);d.Ac.sK=!0;m.oa(a,m.$L,Date.now()-performance.now(),ma.max_fps,ma.pz?aa.SF:0);break;case m.NK:R.md("URANIUM:",c.slice(1));break;case m.IK:R.error(c);break;case m.JK:X.fbmsg.apply(this,
c.slice(1));break;case m.rD:if(a=g(c.ia)){var e=a;a=c.trans;d=c.quat;b=c.Fi;var h=c.bi,k=e.N;k.Du=c.time;c=U.get_scale(e.A.D);U.set_sep(a,c,d,k.Nz);fa.copy(b,k.Fi);fa.copy(h,k.bi)}break;case m.pD:(a=g(c.uz))&&U.set_sep(c.trans,1,c.quat,a.R.qs[c.LB]);break;case m.KK:if(d=g(c[1]))a=c[4],d=d.Qg.bu[c[2]],sa.set_translation(d,c[3]),sa.set_rotation(d,a),sa.V(d);break;case m.QK:if(a=g(c[1]))a.R.speed=c[2];break;case m.nD:d=n(a);p(d,c.em,c.fm,c.result,null,null,0);break;case m.oD:d=n(a);p(d,c.em,c.fm,c.result,
c.km,c.coll_norm,c.coll_dist);break;case m.GK:if(a=g(c[1]))a=a.N,a.jm&&a.jm(c[2]);break;case m.Py:case m.qD:d=n(a);if(a=d.Ac.ol[c.id])d=g(c.Wn),b==m.Py?(b=a.callback,b(a.id,c.hit_fract,d,c.hit_time)):(b=c.hit_fract,h=c.hit_time,k=c.hit_pos,e=a.callback,k?e(a.id,b,d,h,k,c.hit_norm):e(a.id,b,d,h));break;case m.PK:f(c.id);break;case m.OK:a=da.indexOf(a);R.log("Physics #"+a+" Ping: OUT "+(c[2]-c[1]).toFixed(3)+" ms, IN "+(performance.now()-c[2]).toFixed(3)+" ms, ALL "+(performance.now()-c[1]).toFixed(3)+
" ms");break;case m.LK:wa=c[1];break;case m.HK:a=da.indexOf(a);R.log("Worker: #"+String(a));R.log(c[1]);break;default:R.error("Wrong message: "+b)}}function n(a){for(var b=0;b<da.length;b++)if(da[b]==a)return W[b]}function g(a){return Ga[a]||null}function p(a,b,c,d,e,f,h){a=a.Ac.La;for(var l=0;l<a.length;l++)for(var m=a[l].N,n=0;n<m.tf.length;n++){for(var q=m.tf[n],r=q.ll,p=!1,t=0;t<r.length;t++){var w=r[t];if(w[0]===b&&w[1]===c){q.ds[t]=d;p=!0;break}}p&&(r=k(q),e&&q.lz!=b&&(p=e,t=f,w=h,p[0]+=t[0]*
w,p[1]+=t[1]*w,p[2]+=t[2]*w,t[0]*=-1,t[1]*=-1,t[2]*=-1),q.callback(r,r?q.lz==b?g(c):g(b):null,e,f,h))}}function k(a){a=a.ds;for(var b=!1,c=0;c<a.length;c++)b=b||a[c];return b}function x(){ba.body++;return ba.body}function v(a){var b=ua.indexOf(a);return-1==b?(ua.push(a),ua.length-1):b}function h(a,b){return{ia:a,type:b,ah:0,Zv:!1,ul:!0,Cf:!1,is_character:!1,xS:!1,tu:null,Jb:"",Rq:0,VY:{},tf:[],jm:null,Du:0,Nz:new Float32Array([0,0,0,1,0,0,0,1]),Fi:new Float32Array(3),bi:new Float32Array(3),hu:new Float32Array(3),
Gq:new Float32Array(4),Zr:null}}function d(a,b){switch(a){case "BOX":var c=b.va;break;case "CYLINDER":c=b.yq;break;case "CONE":c=b.xq;break;case "SPHERE":c=b.tc;break;case "CAPSULE":c=b.wq}return c}function t(a){if(!a)return null;var b={};"number"===typeof a.min_x&&(b.min_x=a.min_x);"number"===typeof a.min_y&&(b.min_y=a.min_y);"number"===typeof a.min_z&&(b.min_z=a.min_z);"number"===typeof a.max_x&&(b.max_x=a.max_x);"number"===typeof a.max_y&&(b.max_y=a.max_y);"number"===typeof a.max_z&&(b.max_z=a.max_z);
"object"===typeof a.U&&(b.center=a.U);"number"===typeof a.ab&&(b.radius=a.ab);"number"===typeof a.height&&(b.height=a.height);return b}function q(a,b,c,d,e){var f=U.get_trans_view(a.A.D),h=U.invert(b.A.D,Ca),g=new Float32Array(3);U.transform_vec3(f,h,g);switch(b.R.type){case 10:b=b.Of;a=a.A.va;m.oa(e,m.DL,c,g,b.cW,b.XB,(a.max_z-a.min_z)/2,d);break;case 20:m.oa(e,m.CL,c,g,a.kz)}}function G(a){return a.N&&a.N.tu}function H(a,b,c,d,e,f,h,g,k,l){var n;ba.uc++;n=ba.uc.toString(16);var q=b.N.ia;m.oa(z(q),
m.KL,n,a,g,q,c,d,e.N.ia,f,h,k,l);b.N.tu=n}function z(a){for(var b=0;b<W.length;b++)for(var c=W[b].Ac.La,d=0;d<c.length;d++)if(c[d].N.ia==a)return da[b];return null}function l(a){var b=a.N;if(b=b?0===b.ah?!0:!0===b.Zv?!0:!1===b.ul?!0:"RIGID_BODY"!==b.type&&"DYNAMIC"!==b.type?!0:!1:!1)var b=U.Lb(a.A.D,ja),c=U.vb(a.A.D,ca),b=b[0]!=a.N.hu[0]||b[1]!=a.N.hu[1]||b[2]!=a.N.hu[2]||c[0]!=a.N.Gq[0]||c[1]!=a.N.Gq[1]||c[2]!=a.N.Gq[2]||c[3]!=a.N.Gq[3];if(b){var b=a.N,d=a.A,c=m.mG(m.jq);c.ia=b.ia;var e=U.Lb(d.D,
c.trans),d=U.vb(d.D,c.quat);fa.copy(e,b.hu);O.copy(d,b.Gq);"DYNAMIC"==b.type&&O.identity(c.quat);m.oa(z(b.ia),m.jq)}a=a.ve;for(b=0;b<a.length;b++)l(a[b])}function F(a,b,c,d,e){e=e||new Float32Array(3);a=U.get_quat_view(a.A.D);e[0]=b;e[1]=c;e[2]=d;fa.transformQuat(e,a,e)}function r(a,b,c){var d=a.ll,e=a.ds,f=a.lz,h=[],g=a.Jb;h||ia.K("At least one destination required");for(var k=0;k<b.Ac.La.length;k++){var l=b.Ac.La[k];if("ANY"==g||l.N.Jb==g&&"NAVMESH"!=l.N.type)l=l.N.ia,h&&-1==h.indexOf(l)&&h.push(l)}for(b=
0;b<h.length;b++)g=h[b],f<g&&!E(d,f,g)?(d.push([f,g]),e.push(!1)):f>g&&!E(d,g,f)&&(d.push([g,f]),e.push(!1));m.oa(c,m.BL,f);m.oa(c,m.JL,d,a.ii)}function E(a,b,c){for(var d=0;d<a.length;d++)if(a[d][0]==b&&a[d][1]==c)return!0;return!1}function w(a){a.N&&a.N.jm&&(a=a.N,m.oa(z(a.ia),m.WL,a.ia),a.jm=null)}function f(a){var b=D(a),c=y(a).Ac;c.ol[a]&&(delete c.ol[a],c.PB.splice(c.PB.indexOf,1),m.oa(b,m.eM,a))}function y(a){for(var b=0;b<W.length;b++){var c=W[b];if(c.Ac.ol[a])return c}return null}function D(a){for(var b=
0;b<W.length;b++)if(W[b].Ac.ol[a])return da[b];return null}function N(a,b,c){if(b.Bp){a=a.N.ia;var d=b.ko*b.sr,e=b.Eq*b.Fq,f=-b.zp*b.Ap*2*Math.PI/b.Ps;b.Lr&&(f*=-1);switch(b.type){case 10:m.oa(c,m.tM,a,d,e,f);break;case 20:m.oa(c,m.sM,a,d,e,f)}}}function M(a){return a.Cf&&"CHASSIS"==a.Of.Hf}function B(a){return a.Cf&&"HULL"==a.Of.Hf}function J(a){return"NAVMESH"==a.pd.hs}function C(a){return a.Nm&&"MAIN_BODY"==a.oo.Hf}var A=u("__config"),X=u("__debug"),m=u("__ipc"),K=u("__obj_util"),R=u("__print"),
O=u("__quat"),S=u("__scenes"),ga=u("__subscene"),sa=u("__transform"),U=u("__tsr"),ia=u("__util"),fa=u("__vec3"),pa=u("__version"),Z=u("__navmesh"),ma=A.N,aa=A.L,ea=A.ae,wa=0,da=[],W=[],Ga={},P=[],ua=["ANY"],ba={body:0,uc:0,eI:0},ja=new Float32Array(3),ca=new Float32Array(4),Ca=U.create(),la=U.create();a.qS=function(a){a.Ac={sK:!1,La:[],ol:{},PB:[]};var c=ma.dt;ea.prevent_caching&&(c+="?v="+pa.get_build_version());R.log("%cLOAD PHYSICS","color: #0a0",ma.xn?"Using Separate Worker Thread,":"Using Same Thread,",
"Max FPS: "+ma.max_fps);R.log("%cPHYSICS PATH","color: #0a0",c);var d=m.MP(c,!ma.xn);m.lN(d,b);da.push(d);W.push(a);ma.ping&&setInterval(function(){m.oa(d,m.bM,performance.now())},1E3)};a.hO=function(a){return a.Ac?a.Ac.sK:!0};a.cleanup=function(){for(var a=0;a<da.length;a++)m.terminate(da[a]);da.length=0;W.length=0;Ga={};P.length=0;ua=["ANY"];for(var b in ba)ba[b]=0};a.append_object=function(a,b){if(b.Ac){var f;a:{for(var g=0;g<W.length;g++)if(W[g]==b){f=da[g];break a}f=void 0}var k=[];a.pd.et&&
e(a,k);var l=b.Ac.La;if(M(a)||B(a)||a.is_character||C(a)||a.Op){var n=J(a),r;if(n){var p=x(),w=h(p,"NAVMESH"),y=K.Da(a,b).$;w.Zr=null;for(var z=0;z<y.length;z++){var D=y[z];if("PHYSICS"==D.type){w.Zr=Z.zT(D.ra);break}}r=w}else{var u=f,E=a.A,F=a.pd,L=F.hs,ha=x();if("CAMERA"==a.type)var ra=F.UC?F.qu:"BOX",A=d(ra,E),V=.5,S=0;else if("EMPTY"==a.type)ra="EMPTY",A=null,S=V=0;else{var ra=F.UC?F.qu:"BOX",A=d(ra,E),ta=U.get_scale(E.D);if(1!=ta){var ga=A;switch(ra){case "BOX":ga.min_x*=ta;ga.max_x*=ta;ga.min_y*=
ta;ga.max_y*=ta;ga.min_z*=ta;ga.max_z*=ta;break;case "CYLINDER":case "CONE":case "CAPSULE":ga.height*=ta;ga.ab*=ta;break;case "SPHERE":ga.ab*=ta}}V=E.Sg;S=E.Og}var X=U.get_trans_view(E.D),ba=U.get_quat_view(E.D),sa=F.Ui,ua=F.aK,ja=F.ah,ka=F.fK,hc=F.eK,qa=F.wF,Q=F.oI,Ha=a.Jb,$a=v(Ha),Xa=F.ki,Da=F.ji,Ya=F.li,Cb=E.tc.ab,Gb=t(A),Ba=a.uu,ib;var Wb=ra;if(k.length){var fa=[],aa={};aa.quat=new Float32Array([0,0,0,1]);aa.trans=new Float32Array(3);aa.worker_bounding=Gb;aa.bounding_type=Wb;fa.push(aa);var mb=
U.invert(E.D,Ca),pa=ca,ea=U.get_quat_view(E.D);O.invert(ea,pa);for(var ma=0;ma<k.length;ma++){var Ua={},wa=k[ma],bb=wa.pd.qu,Hb=new Float32Array(4),$b=new Float32Array(3),Gc=U.get_trans_view(wa.A.D),ac=U.get_quat_view(wa.A.D);U.transform_vec3(Gc,mb,$b);O.multiply(pa,ac,Hb);Ua.trans=$b;Ua.quat=Hb;Ua.bounding_type=bb;Ua.worker_bounding=t(d(bb,wa.A));fa.push(Ua)}ib=fa}else ib=[];m.oa(u,m.GL,ha,X,ba,L,sa,ua,ja,ka,hc,qa,Q,$a,Xa,Da,Ya,ra,Gb,Cb,V,S,ib,Ba);Ga[ha]=a;P.push(a);var Mb=h(ha,"BOUNDING");Mb.type=
L;Mb.ah=ja;Mb.Zv=sa;Mb.Jb=Ha;Mb.Rq=$a;r=Mb}var sb=r;a.N=sb;var Wa={ya:null,N:sb};n||(l.push(Wa),c(b,f,sb.Jb))}else for(var Ab=K.Da(a,b).$,Ib=0;Ib<Ab.length;Ib++){var Db=Ab[Ib],jc;if(jc="PHYSICS"==Db.type){var uc;a:{for(var vc=b.Ac.La,wc=0;wc<vc.length;wc++){var ic=vc[wc].ya;if(ic&&ic.id==Db.id){uc=!0;break a}}uc=!1}jc=!uc}if(jc)if(Db.Vd.Wa)if(Db.Sf&&b.J.td){var kc=Db,Ud=b,Md=f,rb=Ud.J.td;m.oa(Md,m.PL,rb.Wi);if(kc.xX){var wb={};wb.dst_noise_scale0=kc.dst_noise_scale0;wb.dst_noise_scale1=kc.dst_noise_scale1;
wb.dst_noise_freq0=kc.dst_noise_freq0;wb.dst_noise_freq1=kc.dst_noise_freq1;wb.dir_min_shore_fac=kc.dir_min_shore_fac;wb.dir_freq=kc.dir_freq;wb.dir_noise_scale=kc.dir_noise_scale;wb.dir_noise_freq=kc.dir_noise_freq;wb.dir_min_noise_fac=kc.dir_min_noise_fac;wb.dst_min_fac=kc.dst_min_fac;wb.waves_hor_fac=kc.waves_hor_fac;var eb=rb.waves_height,Sb=rb.waves_length;rb.tl?m.oa(Md,m.DD,wb,rb.np[0],rb.np[1],rb.mp[0],rb.mp[1],rb.cB,eb,Sb,rb.mC,Ud.J.lC):m.oa(Md,m.DD,wb,0,0,0,0,0,eb,Sb,0,null)}}else{var kb;
if(Db.Ui){var cb=a,lc=Db,Nb=f,mc=x(),Pc=lc.Vd,ad=Pc.la[0].a_position,kd=Pc.Aa||null,ld=lc.Jb,gd=v(ld),Hc=lc.ki,xb=lc.ji,xc=lc.li,nc=U.get_trans_view(cb.A.D);m.oa(Nb,m.ML,mc,ad,kd,nc,gd,Hc,xb,xc);var Ic=h(mc,"STATIC_MESH");Ic.Zv=!0;Ic.Jb=ld;Ic.Rq=gd;kb=Ic}else{var yb=a,Eb=Db,tb=f,nb=x(),Jb=Eb.Vd,md=Jb.la[0].a_position,Qc=Jb.Aa||null,gb=U.get_trans_view(yb.A.D),Rc=Eb.Sg,bc=Eb.Og,Jc=Eb.Jb,cc=v(Jc);m.oa(tb,m.OL,nb,md,Qc,gb,Rc,bc,cc,Eb.ki,Eb.ji,Eb.li);var bd=h(nb,"STATIC_MESH");bd.Jb=Jc;bd.Rq=cc;kb=bd}sb=
kb;a.N=sb;Wa={ya:Db,N:sb};l.push(Wa);c(b,f,sb.Jb)}else R.error("Object "+a.name+" has collision material with no assigned vertices")}if(M(a)||B(a)){var Tb=f,Ob=a.N.ia;M(a)?(a.R.type=10,m.oa(Tb,m.HL,Ob,a.R.xC,a.R.zC,a.R.yC,a.R.cD,a.R.dB)):B(a)&&(a.R.type=20,m.oa(Tb,m.FL,Ob,a.R.wm,a.R.Bn,a.R.Cn));if(a.R.fn){var zb=a.R.fn;switch(a.R.type){case 10:q(zb[0],a,Ob,!0,Tb);q(zb[1],a,Ob,!0,Tb);q(zb[2],a,Ob,!1,Tb);q(zb[3],a,Ob,!1,Tb);break;case 20:for(var yc=0;yc<zb.length;yc++)q(zb[yc],a,Ob,!1,Tb)}}N(a,a.R,
f)}else if(a.is_character){var lb=f,Kc=a.A,oc=a.N,Sc=Kc.va.max_z-Kc.va.min_z,Fb=oc.ia,Kb=a.JE,zc=Kb.vX,pc=Kb.IU,qb=Kb.WV,Pb=Kb.HS,ub=Kb.yX,Bb=ia.ZP(a);m.oa(lb,m.IL,Fb,Bb,Sc,zc,pc,qb,Pb,ub);oc.is_character=!0}else if(C(a)){var Ta=f,qc=a.N.ia;m.oa(Ta,m.LL,qc,a.Qg.wm,a.Qg.Bn,a.Qg.Cn);if(a.Qg.bu)for(var Qb=a.Qg.bu,dc=0;dc<Qb.length;dc++){var db=Qb[dc],Ub=U.get_trans_view(db.A.D),Ac=U.invert(a.A.D,Ca),hb=new Float32Array(3);U.transform_vec3(Ub,Ac,hb);m.oa(Ta,m.EL,qc,hb,db.kz)}a.N.xS=!0}for(Ib=0;Ib<P.length;Ib++){var qd=
P[Ib];if(qd.N){var Lc=qd;if(!G(Lc))for(var ec=0;ec<Lc.HB.length;ec++){var Rb=Lc.HB[ec],Tc=Rb.target,Uc=Rb.RT;if(Tc.N){var Mc=new Float32Array([Rb.ST,Rb.TT,Rb.UT]),Nc=ia.euler_to_quat(new Float32Array([Rb.Sa,Rb.Ta,Rb.Ua]),new Float32Array(4));"HINGE"==Uc&&O.rotateY(Nc,Math.PI/2,Nc);var Bc=U.identity(Ca),Bc=U.set_trans(Mc,Bc),Bc=U.set_quat(Nc,Bc),zd=U.multiply(Lc.A.D,Bc,Ca),ob=U.invert(Tc.A.D,la),Vc=U.multiply(ob,zd,ob),cd=U.get_trans_view(Vc),rd=U.get_quat_view(Vc),Ma=Rb,fb={};fb.use_limit_x=Ma.iX;
fb.use_limit_y=Ma.jX;fb.use_limit_z=Ma.kX;fb.use_angular_limit_x=Ma.eX;fb.use_angular_limit_y=Ma.fX;fb.use_angular_limit_z=Ma.gX;fb.limit_max_x=Ma.TS;fb.limit_min_x=Ma.WS;fb.limit_max_y=Ma.US;fb.limit_min_y=Ma.XS;fb.limit_max_z=Ma.VS;fb.limit_min_z=Ma.YS;fb.limit_angle_max_x=Ma.NS;fb.limit_angle_min_x=Ma.QS;fb.limit_angle_max_y=Ma.OS;fb.limit_angle_min_y=Ma.RS;fb.limit_angle_max_z=Ma.PS;fb.limit_angle_min_z=Ma.SS;H(Uc,Lc,Mc,Nc,Tc,cd,rd,fb,null,null)}}}}}};a.BQ=g;a.update=function(a,b){for(var c=0;c<
da.length;c++){var d=da[c],e=a;d&&m.TG(d)&&m.oa(d,m.uM,e,b);for(var f=0;f<P.length;f++){var h=P[f],g=h.N;if(g.ul&&g.Du){var k=m.TG(d)?e-g.Du:performance.now()/1E3-g.Du,k=Math.min(k,10/ma.max_fps),k=k-1/ma.max_fps;aa.AT&&(k=0);var n=Ca;U.tS(g.Nz,k,g.Fi,g.bi,Ca);sa.set_tsr(h,n);sa.V(h);l(h);if(h.R)for(var g=h,k=g.R.fn,n=g.A.D,q=Ca,r=0;r<k.length;r++){var p=k[r];U.multiply(n,g.R.qs[r],q);sa.set_tsr(p,q);sa.V(p)}h.R&&h.R.Bp&&(q=h,k=q.R,g=k.Bp)&&(r=q.R.gJ,U.multiply(q.A.D,q.R.hJ,g.A.D),n=ja,U.transform_dir_vec3(r,
q.A.D,n),q=ca,O.setAxisAngle(n,-k.zp*k.Ap*2*Math.PI,q),k=U.get_quat_view(g.A.D),O.multiply(q,k,k),sa.V(g));h.R&&h.R.pC&&(q=h,k=q.R,g=k.pC)&&(r=q.R.bJ,U.multiply(q.A.D,q.R.cJ,g.A.D),n=ja,U.transform_dir_vec3(r,q.A.D,n),q=ca,r=Math.abs(k.speed)*k.Ns,r>k.Mo&&(r=k.Mo),O.setAxisAngle(n,-r,q),k=U.get_quat_view(g.A.D),O.multiply(q,k,k),O.normalize(k,k),sa.V(g));h.R&&h.R.AC&&(n=h,g=n.R,h=g.AC)&&(q=n.R.qJ,U.multiply(n.A.D,n.R.rJ,h.A.D),k=ja,U.transform_dir_vec3(q,n.A.D,k),n=ca,O.setAxisAngle(k,-Math.abs(g.ko)*
g.fr,n),g=U.get_quat_view(h.A.D),O.multiply(n,g,g),O.normalize(g,g),sa.V(h))}}m.ZT(d);d=W[c];(e=d.J.td)&&0<e.waves_height&&(d=S.Tb(d,ga.Hb),e=fa.length(d.Yh)||1,m.oa(da[c],m.rM,d.time*e))}};a.ZQ=function(){return W[0]};a.pause=function(){for(var a=0;a<da.length;a++)m.oa(da[a],m.aM)};a.resume=function(){for(var a=0;a<da.length;a++)m.oa(da[a],m.fM)};a.enable_simulation=function(a){(a=a.N)||ia.K("No object physics");if(!a.ul){var b=a.ia,c=z(b);a.ul=!0;m.oa(c,m.ZL,b)}};a.disable_simulation=function(a){(a=
a.N)||ia.K("No object physics");if(a.ul){var b=a.ia,c=z(b);a.ul=!1;m.oa(c,m.YL,b)}};a.hx=function(a){return!!a.Ac};a.sa=function(a){return!!a.N};a.has_dynamic_physics=function(a){return(a=a.N)&&a.ul&&("RIGID_BODY"==a.type||"DYNAMIC"==a.type)&&0<a.ah&&0==a.Zv?!0:!1};a.has_simulated_physics=function(a){return(a=a.N)&&a.ul?!0:!1};a.set_gravity=function(a,b,c,d){a=a.N.ia;m.oa(z(a),m.qM,a,b,c,d)};a.ZR=G;a.apply_constraint=H;a.clear_constraint=function(a){a=a.N;m.oa(z(a.ia),m.dM,a.tu);a.tu=null};a.pull_to_constraint_pivot=
function(b,c,d,e,f,h){c=U.set_sep(c,1,d,Ca);f=U.set_sep(f,1,h,la);U.invert(c,c);U.multiply(f,c,c);sa.get_tsr(e,f);U.multiply(f,c,c);sa.set_tsr(b,c);sa.V(b);e=U.get_trans_view(b.A.D);f=U.get_quat_view(b.A.D);a.set_transform(b,e,f)};a.set_transform=function(a,b,c){var d=a.N,e=m.mG(m.jq),f=U.Lb(a.A.D,e.trans);a=U.vb(a.A.D,e.quat);U.set_sep(f,1,a,d.Nz);e.ia=d.ia;fa.copy(b,e.trans);O.copy(c,e.quat);m.oa(z(d.ia),m.jq)};a.sync_transform=l;a.apply_velocity=function(a,b,c,d){var e=ja;F(a,b,c,d,e);a=a.N.ia;
b=Math.abs(0);c=Math.abs(0);d=Math.abs(0);var f=Math.abs(e[0]),h=Math.abs(e[1]),g=Math.abs(e[2]);e[0]=f?e[0]/f*Math.max(f,b):0;e[1]=h?e[1]/h*Math.max(h,c):0;e[2]=g?e[2]/g*Math.max(g,d):0;m.oa(z(a),m.FD,a,e[0],e[1],e[2])};a.apply_velocity_world=function(a,b,c,d){a=a.N.ia;m.oa(z(a),m.FD,a,b,c,d)};a.apply_force=function(a,b,c,d,e){var f=ja;e?(f[0]=b,f[1]=c,f[2]=d):F(a,b,c,d,f);a=a.N.ia;m.oa(z(a),m.QL,a,f[0],f[1],f[2])};a.apply_torque=function(a,b,c,d){var e=ja;F(a,b,c,d,e);a=a.N.ia;m.oa(z(a),m.SL,a,
e[0],e[1],e[2])};a.set_angular_velocity=function(a,b,c,d){a=a.N.ia;m.oa(z(a),m.gM,a,b,c,d)};a.set_character_move_dir=function(a,b,c){a=a.N.ia;m.oa(z(a),m.jM,a,b,c)};a.set_character_move_type=function(a,b){var c=a.N.ia;m.oa(z(c),m.kM,c,b)};a.set_character_walk_velocity=function(a,b){var c=a.N.ia;m.oa(z(c),m.pM,c,b)};a.set_character_run_velocity=function(a,b){var c=a.N.ia;m.oa(z(c),m.mM,c,b)};a.set_character_fly_velocity=function(a,b){var c=a.N.ia;m.oa(z(c),m.hM,c,b)};a.character_jump=function(a){a=
a.N.ia;m.oa(z(a),m.UL,a)};a.character_rotation_inc=function(a,b,c){a=a.N.ia;m.oa(z(a),m.VL,a,b,c)};a.set_character_rotation=function(a,b,c){a=a.N.ia;m.oa(z(a),m.lM,a,b,c)};a.set_character_rotation_h=function(a,b){var c=a.N.ia;m.oa(z(c),m.iM,c,b)};a.set_character_rotation_v=function(a,b){var c=a.N.ia;m.oa(z(c),m.oM,c,b)};a.set_character_vert_move_dir_angle=function(a,b){var c=a.N.ia;m.oa(z(c),m.nM,c,b)};a.append_collision_test=function(a,b,c,d){var e=a.N;if(!e.Zr){for(var f=e.ia,h=0;h<e.tf.length;h++)if(a=
e.tf[h],a.Jb==b&&a.callback==c)return;a={lz:f,ii:d||!1,Jb:b,callback:c,ll:[],ds:[]};e.tf.push(a);b=z(f);r(a,n(b),b)}};a.remove_collision_test=function(a,b,c){a=a.N;for(var d=z(a.ia),e=n(d),f=0;f<a.tf.length;f++){var h=a.tf[f];if(h.Jb==b&&h.callback==c){if(k(h)){var g=fa.set(0,0,0,ja);h.callback(!1,null,g,g,0)}a.tf.splice(f,1);f--;for(var g=d,h=h.ll,l=e.Ac.La,q=0;q<l.length;q++)for(var r=l[q].N,p=0;p<r.tf.length;p++)for(var t=r.tf[p],w=0;w<t.ll.length;w++)for(var v=t.ll[w],y=0;y<h.length;y++){var L=
h[y];v[0]==L[0]&&v[1]==L[1]&&(h.splice(y,1),y--)}h.length&&m.oa(g,m.ED,h)}}};a.apply_collision_impulse_test=function(a,b){a.N&&a.N.jm&&w(a);var c=a.N;m.oa(z(c.ia),m.RL,c.ia);c.jm=b};a.clear_collision_impulse_test=w;a.append_ray_test=function(a,b,c,d,e,f,h,g,k){var l;ba.eI++;l=ba.eI;a={id:l,ia:a?a.N.ia:0,from:new Float32Array(b),to:new Float32Array(c),Jb:d,Rq:v(d),jE:f,GN:h,ii:g,Sv:k,callback:e};b=z(a.ia)||da[0];c=n(b).Ac;c.ol[l]=a;c.PB.push(a);m.oa(b,m.NL,a.id,a.ia,a.from,a.to,a.Rq,a.jE,a.GN,a.ii,
a.Sv);return l};a.remove_ray_test=f;a.change_ray_test_from_to=function(a,b,c){var d=D(a),e=y(a).Ac.ol[a];e&&!e.jE&&(e.from.set(b),e.to.set(c),m.oa(d,m.TL,a,b,c))};a.VG=function(a){return y(a).Ac.ol[a]?!0:!1};a.vehicle_throttle=function(a,b){var c=a.R;c.ko=b;N(a,c,z(a.N.ia))};a.vehicle_steer=function(a,b){var c=a.R;c.zp=b;N(a,c,z(a.N.ia))};a.vehicle_brake=function(a,b){var c=a.R;c.Eq=b;N(a,c,z(a.N.ia))};a.is_vehicle_chassis=M;a.is_vehicle_hull=B;a.$Z=J;a.wS=function(a){if(!a.Cf)return!1;a=a.Of.Hf;
return"WHEEL_FRONT_LEFT"==a||"WHEEL_FRONT_RIGHT"==a||"WHEEL_BACK_LEFT"==a||"WHEEL_BACK_RIGHT"==a?!0:!1};a.vS=function(a){return a.Cf?"BOB"==a.Of.Hf?!0:!1:!1};a.yS=function(a){return a.Nm?"BOB"==a.oo.Hf?!0:!1:!1};a.XG=function(a){return a.Cf&&"STEERING_WHEEL"==a.Of.Hf?!0:!1};a.WG=function(a){return a.Cf&&"SPEEDOMETER"==a.Of.Hf?!0:!1};a.YG=function(a){return a.Cf&&"TACHOMETER"==a.Of.Hf?!0:!1};a.get_vehicle_speed=function(a){return a.R.speed};a.AX=function(a){switch(a){case "WHEEL_FRONT_RIGHT":return 0;
case "WHEEL_FRONT_LEFT":return 1;case "WHEEL_BACK_LEFT":return 2;case "WHEEL_BACK_RIGHT":return 3}};a.xG=function(a){return a.N&&a.N.is_character};a.ZZ=C;a.xR=function(){return wa};a.UP=function(){for(var a=0;a<da.length;a++)m.oa(da[a],m.XL)};a.remove_object=function(a){var b=a.N.ia;if("BOUNDING"==a.N.type){var c=P.indexOf(a);-1==c&&R.error("Object "+a.name+" doesn't have bounding physics");delete Ga[b];P.splice(c,1)}for(var c=z(b),d=n(c),e=d.Ac.La,f=[],h=0;h<e.length;h++)for(var g=e[h].N,l=0;l<g.tf.length;l++)for(var q=
g.tf[l],r=0;r<q.ll.length;r++){var p=q.ll[r],t=q.ds[r];if(p[0]==b||p[1]==b)q.ll.splice(r,1),q.ds.splice(r,1),r--,t&&!k(q)&&(t=fa.set(0,0,0,ja),q.callback(!1,null,t,t,0)),f.push(p)}f.length&&m.oa(c,m.ED,f);a.N&&a.N.jm&&w(a);a=d.Ac.La;for(d=0;d<a.length;d++)a[d].N.ia==b&&(a.splice(d,1),d--);m.oa(c,m.cM,b)};a.aS=function(a){var b=a.pd;return a.Cf||a.Nm||a.is_character||a.Op&&!b.Ui&&0<b.ah&&("DYNAMIC"==b.hs||"RIGID_BODY"==b.hs)}};b4w.module.__data=function(a,u){function e(a,b){Ba[b.id]=null;ib[b.id]=null}function c(a,b,c,d){a instanceof ArrayBuffer?(a=Va.uG(a,d),d=a.width,a=a.height):(d=a.width,a=a.height);Aa.log("%cLOAD IMAGE "+d+"x"+a,"color: #"+(2048<d||2048<a?"a00":1024<d||1024<a?"aa0":"0a0"),b);-1==b.indexOf(Wb)&&c&&Aa.warn("image",b,"is not from app root.")}function b(a,b,c,d,e,f){function h(a){f(b,c,a)}function g(d,f,l,m){if(d){Aa.log("%cLOAD METADATA","color: #616",m);f=Q.iJ(d.b4w_format_version);switch(Q.gK(f,Da.Vm)){case -1:f[0]<
Da.Vm[0]?Q.K("JSON version is too old relative to B4W engine: "+Q.Ml(f)+", required: "+Q.Ml(Da.Vm)+". Reexport scene with the latest B4W addon to fix it."):Aa.warn("JSON version is a bit old relative to B4W engine: "+Q.Ml(f)+", required: "+Q.Ml(Da.Vm)+". Some compatibility issues can occur. Reexport scene with the latest B4W addon to fix it.");break;case 1:f[0]>Da.Vm[0]?Q.K("B4W engine version is too old relative to JSON. Can't load the scene. Update your engine version to fix it."):Aa.error("B4W engine version is a bit old relative to JSON. Some compatibility issues can occur. Update your engine version to fix it.")}Da.XA=
f;for(var n in d)a[n]=d[n];b.Mb&&(ab=Pa.cv(a.scenes));(d=a.binaries[0].binfile)?b.sE=d:(Y.vx(b,"load_binaries"),Y.vx(b,"prepare_bindata"));Da.is_mobile_device||Y.vx(b,"mobile_media_start");Da.antialiasing&&Da.smaa||Y.vx(b,"load_smaa_textures");if(a.b4w_export_errors)for(d=0;d<a.b4w_export_errors.length;d++)n=a.b4w_export_errors[d],(b.Mb&&"PRIMARY"==n.type||"ALL"==n.type)&&Aa.qQ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#non-critical-export-errors");if(a.b4w_export_warnings)for(d=
0;d<a.b4w_export_warnings.length;d++)n=a.b4w_export_warnings[d],(b.Mb&&"PRIMARY"==n.type||"ALL"==n.type)&&Aa.rQ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#other-messages");b.og&&F(a);e(b,c)}else l==V.AT_JSON_ZIP?(Aa.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",k),V.enqueue([{id:k,type:V.AT_JSON,url:k,Ae:b.og}],g,null,h)):Y.VD(b)}var k=b.wi;k||Q.K("Nothing requested");if(Da.assets_gzip_available){d=k+".gz";var l=V.AT_JSON_ZIP}else d=
k,l=V.AT_JSON;V.enqueue([{id:d,type:l,url:d,Ae:b.og}],g,null,h)}function n(a,b,c,d,e,f){function h(a){f(b,c,a)}function g(d,f,l,m){d?(Aa.log("%cLOAD BINARY","color: #616",m),a.bin_data=d,f=(new Uint32Array(d,4,1))[0],d=(new Uint32Array(d,8,1))[0],d=[f,d],f=Q.iJ(a.b4w_format_version),d[0]!=f[0]&&Q.K("BIN version does not match to JSON version: "+Q.Ml(d)+", required: "+Q.Ml(Da.Vm)+". Couldn't load the scene. Reexport scene to fix it."),d[1]!=f[1]&&Aa.warn("BIN version does not match to JSON version: "+
+Q.Ml(d)+", required: "+Q.Ml(Da.Vm)+". Some compatibility issues can occur. Reexport scene to fix it."),e(b,c)):l==V.AT_ARRAYBUFFER_ZIP?(Aa.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",k),V.enqueue([{id:k,type:V.AT_ARRAYBUFFER,url:k,Ae:b.og}],g,null,h)):Y.VD(b)}var k=ba(b.wi)+b.sE;k||Q.K("Binary data is missing");if(Da.assets_gzip_available){d=k+".gz";var l=V.AT_ARRAYBUFFER_ZIP}else d=k,l=V.AT_ARRAYBUFFER;V.enqueue([{id:d,type:l,url:d,Ae:b.og}],g,null,h)}function g(a,
b,c,d,e){La.OE()&&e(b,c)}function p(a,b,c,d,e){d=a.bin_data;var f=a.binaries[0],h=a.objects,g=a.meshes;a=a.actions;for(var l=Q.bO(),m=["indices"],n=["position","texcoord","texcoord2","shade_tangs"],L=["normal","tangent"],q=["group"],r=["color"],p=0;p<g.length;p++)for(var t=g[p].submeshes,w=0;w<t.length;w++){for(var ha in t[w]){var v=t[w][ha][1];if(-1!=m.indexOf(ha)){var y=t[w][ha][0]*Q.mD+f["int"]+12,x=t[w],B=ha,z=d;if(l)var D=new Uint32Array(z,y,v);else for(var D=new Uint32Array(v),z=new DataView(z),
C=0;C<v;C++)D[C]=z.getUint32(y+C*Q.mD,!0);x[B]=D}else if(-1!=n.indexOf(ha))y=t[w][ha][0]*Q.Yi+f["float"]+12,t[w][ha]=k(d,y,v,l);else if(-1!=L.indexOf(ha)){y=t[w][ha][0]*Q.lq+f["short"]+12;x=t[w];B=ha;z=d;D=new Float32Array(v);z=new DataView(z);for(C=0;C<v;C++)D[C]=z.getInt16(y+C*Q.lq,!0)/32767;x[B]=D}else if(-1!=q.indexOf(ha)){y=t[w][ha][0]*Q.lq+f.ushort+12;x=t[w];B=ha;z=d;D=new Float32Array(v);z=new DataView(z);for(C=0;C<v;C++)D[C]=z.getUint16(y+C*Q.lq,!0)/65535;x[B]=D}else if(-1!=r.indexOf(ha)){y=
t[w][ha][0]*Q.Gy+f.uchar+12;x=t[w];B=ha;z=d;D=new Float32Array(v);z=new DataView(z);for(C=0;C<v;C++)D[C]=z.getUint8(y+C*Q.Gy)/255;x[B]=D}}v=t[w];if(g[p].b4w_shape_keys.length)for(y=v.base_length,x=v.normal.length/y/3,v.tbn=Sa.Bm(v.normal.subarray(0,3*y),v.tangent.subarray(0,4*y),Sa.create(v.normal.length/3)),B=1;B<x;B++)for(z=B*y,D=0;D<y;D++){var u=v.normal.subarray(3*D,3*(D+1)),ra=Ha.add(v.normal.subarray(3*(z+D),3*(z+D+1)),u,mb),C=Sa.identity(Fc);if(v.tangent.length){var E=v.tangent.subarray(4*
D,4*(D+1)),G=$a.add(v.tangent.subarray(4*(z+D),4*(z+D+1)),E,Lb),u=Sa.Bm(u,E),ra=Sa.Bm(ra,G);Sa.xT(ra,u,C)}else ra=Qa.rotationTo(u,ra,$c),Sa.set_quat(C,ra,0);Sa.Pi(v.tbn,C,z+D)}else v.tbn=Sa.Bm(v.normal,v.tangent);delete t[w].normal;delete t[w].tangent;"texcoord2"in t[w]&&(v=new Float32Array(t[w].texcoord.length+t[w].texcoord2.length),v.set(t[w].texcoord),v.set(t[w].texcoord2,t[w].texcoord.length),t[w].texcoord=v,delete t[w].texcoord2)}for(ha=0;ha<h.length;ha++)for(g=h[ha].particle_systems,m=0;m<g.length;m++)n=
g[m],n.transforms=k(d,n.transforms[0]*Q.Yi+f["float"]+12,n.transforms[1],l);for(h=0;h<a.length;h++){ha=a[h];g=ha.fcurves;m=ha.frame_range;L=m[0];q=m[1];r=la.cR(L,q);m=null;0>r&&(r=0);var t=p=!1,F;for(F in g)p|=-1<F.indexOf("rotation_euler"),t|=-1<F.indexOf("rotation_quaternion");n=[];for(F in g)if(p&&t&&-1<F.indexOf("rotation_euler"))delete g[F];else{var w=g[F],H;for(H in w)v=w[H],y=k(d,f["float"]+v.bin_data_pos[0]*Q.Yi+12,v.bin_data_pos[1],l),x=new Float32Array(r),m||(m=new Int8Array(r)),la.eN(v,
y,x,m,L,q),v.Zf=x;-1<F.indexOf("rotation_euler")&&(la.yQ(g[F]),n.push(F))}for(L=0;L<n.length;L++)q=n[L],r=q.replace("euler","quaternion"),g[r]=g[q],delete g[q];ha.BM=m}e(b,c)}function k(a,b,c,d){if(d)d=new Float32Array(a,b,c);else{d=new Float32Array(c);a=new DataView(a);for(var e=0;e<c;e++)d[e]=a.getFloat32(b+e*Q.Yi,!0)}return d}function x(a,b,c,e,f){var g=a.cameras,k=a.groups,l=a.materials,m=a.meshes,n=a.node_groups,r=a.objects,p=a.particles,t=a.scenes,w=a.speakers,ha=a.lamps,v=a.textures,x=a.worlds;
n||(Aa.warn('"node_groups" datablock undefined. reexport main scene.'),n=a.node_groups=[]);for(var B="actions armatures cameras curves groups images lamps materials meshes node_groups objects particles scenes sounds speakers textures worlds".split(" "),z={},C=0;C<B.length;C++)for(var u=a[B[C]],E=0;E<u.length;E++){var H=u[E];z[H.uuid]=H}for(var A=0;A<t.length;A++){for(var J=t[A],S=J.objects,oa=0;oa<S.length;oa++)N(S,oa,z);J.camera&&N(J,"camera",z);J.world&&N(J,"world",z)}for(A=0;A<k.length;A++)for(var hc=
k[A].objects,oa=0;oa<hc.length;oa++)N(hc,oa,z);for(A=0;A<r.length;A++){var T=r[A];T.dupli_group&&N(T,"dupli_group",z);T.parent&&N(T,"parent",z);T.dg_parent&&N(T,"dg_parent",z);var M=T.animation_data;M&&y(M,z);switch(T.type){case "MESH":T.data||Q.K("mesh not found for object "+T.name);N(T,"data",z);for(var W=!1,P=T.modifiers,oa=0;oa<P.length;oa++){var Na=P[oa];"ARMATURE"==Na.type?(W&&Aa.warn('Object "'+T.name+'" has more than one armature modifiers. Only the first one will be used.'),W=!0,N(Na,"object",
z)):"CURVE"==Na.type&&N(Na,"object",z)}var K=T.particle_systems;if(K)for(oa=0;oa<K.length;oa++)N(K[oa],"settings",z);break;case "ARMATURE":N(T,"data",z);for(var V=T.pose.bones,ga=T.data.bones,oa=0;oa<V.length;oa++){var qa=V[oa];qa.bone=ga[qa.bone];var I=qa.constraints;if(I)for(var R=0;R<I.length;R++){var Qa=I[R];Qa.target&&N(Qa,"target",z)}for(var O=qa.parent_recursive,R=0;R<O.length;R++)O[R]=V[O[R]]}break;case "LAMP":case "CAMERA":case "SPEAKER":case "CURVE":N(T,"data",z)}if(I=T.constraints)for(oa=
0;oa<I.length;oa++)Qa=I[oa],Qa.target&&N(Qa,"target",z);var X=T.lod_levels;if(X)for(oa=0;oa<X.length;oa++){var ta=X[oa];ta.object&&N(ta,"object",z)}}for(A=0;A<m.length;A++)for(var Ga=m[A].materials,oa=0;oa<Ga.length;oa++)N(Ga,oa,z);for(A=0;A<l.length;A++){for(var Ha=l[A],Da=Ha.texture_slots,oa=0;oa<Da.length;oa++)N(Da[oa],"texture",z);var Ba=Ha.node_tree;Ba&&D(Ba,z)}for(A=0;A<n.length;A++)(Ba=n[A].node_tree)&&D(Ba,z);for(A=0;A<v.length;A++){var Gb=v[A],ua=Gb.type;"IMAGE"!=ua&&"ENVIRONMENT_MAP"!=ua||
N(Gb,"image",z)}for(A=0;A<g.length;A++){var $a=g[A];$a.dof_object&&N($a,"dof_object",z)}for(A=0;A<w.length;A++){var za=w[A];za.sound&&N(za,"sound",z);(M=za.animation_data)&&y(M,z)}for(A=0;A<p.length;A++){for(var da=p[A],Da=da.texture_slots,oa=0;oa<Da.length;oa++)N(Da[oa],"texture",z);da.dupli_group&&N(da,"dupli_group",z);da.dupli_object&&N(da,"dupli_object",z)}for(A=0;A<ha.length;A++)(M=ha[A].animation_data)&&y(M,z);for(A=0;A<x.length;A++){var Wa=x[A];if(Da=Wa.texture_slots)for(oa=0;oa<Da.length;oa++)N(Da[oa],
"texture",z);(M=Wa.animation_data)&&y(M,z);(Ba=Wa.node_tree)&&D(Ba,z)}Za.YN(a);F(a);for(var Ea=ba(b.wi),Wb=a.textures,Fa=b.Mb?a.scenes[0].b4w_anisotropic_filtering:ab.b4w_anisotropic_filtering,ca=0;ca<Wb.length;ca++){var ja=Wb[ca];b.Mb||"SCENE"!=ja.b4w_source_type||(ja.b4w_source_id="");var Xa=Ja.KP(ja,Fa,a.scenes,b.id,Ea);ja.J=Xa}for(var Ya={},fa=a.objects,La=0;La<fa.length;La++){var Ab=fa[La];if("MESH"===Ab.type&&!Ab.particle_systems.length)for(var ia=Ab.data,Z=ia.name,Y=ia.submeshes,aa=ia.materials,
xa=0;xa<Y.length;xa++)0!==Y[xa].base_length||Ya[Z]||(aa[xa]&&Aa.warn('material "'+aa[xa].name+'" is not assigned to any face (object "'+Ab.name+'").'),Ya[Z]=!0)}var Db=[];a.materials=[];for(var mb=a.meshes,jc=0;jc<mb.length;jc++){var Ib=mb[jc];if(0==Ib.materials.length){var pa=ya.OO();Ib.materials.push(pa);-1==Db.indexOf(pa.Jc)&&(Db.push(pa.Jc),a.materials.push(pa))}else for(var ma=0;ma<Ib.materials.length;ma++){var ea=Ib.materials[ma],Oa=ya.pS();ya.LW(ea,Oa);Ib.materials[ma]=Oa;-1==Db.indexOf(Oa.Jc)&&
(Db.push(Oa.Jc),a.materials.push(Oa))}}for(var Ca=a.actions,Lb=b.id,Xb=0;Xb<Ca.length;Xb++){var na=Ca[Xb];na.CM=Lb;la.LM(na)}for(var Sa={oH:[],ow:[]},Ka=a.scenes,va=0;va<Ka.length;va++)for(var Va=Ka[va],wa=Ka[va].objects,Ua=0;Ua<wa.length;Ua++)sa(Va,wa,wa[Ua],null,Sa);for(va=0;va<Sa.ow.length;va++)for(var Ia=Sa.ow[va],Ua=0;Ua<Ia.Kw.length;Ua++){var $c=Ia.Kw[Ua],jb=Ia.GH[Ua],bb=Ia.bC[Ua],Hb=Ia.wB[Ua];Ia.nH[Ua].object=jb;for(var Fc=0;Fc<Hb.length;Fc++)Q.aN(Hb[Fc],jb);for(var sb=$c,Mb=bb,$b=0;$b<Mb.length;$b++){for(var ac=
Mb[$b].objects,Yb=0;Yb<ac.length;Yb++){var dd=ac[Yb].dupli_group;dd&&U(sb,dd)}var ae=ac.indexOf(sb);-1<ae&&ac.splice(ae,1)}}!b.Mb&&1<a.scenes.length&&(a.scenes=[Pa.cv(a.scenes)],Aa.warn("loading data contains multiple scenes.","Only the first one will be loaded."));var Wd=b.Mb?ab:Pa.cv(a.scenes);ka.bV(ab.fps);1<a.scenes.length&&(a.scenes.splice(a.scenes.indexOf(ab),1),a.scenes.unshift(ab));for(var td=0;td<a.scenes.length;td++){var Dc=a.scenes[td];Dc.J={};Dc.TD=Dc==Wd;Dc.DM=b.Mb;var Ad;if(Ad=Cb.enabled){var Bd;
if(Bd="OFF"!=Dc.b4w_enable_physics){var ed;if(!(ed="AUTO"!=Dc.b4w_enable_physics))a:{for(var Cd=d(Dc),Pd=0;Pd<Cd.length;Pd++){if(Cd[Pd].b4w_collision){ed=!0;break a}var Dd=Cd[Pd].data;if(Dd.materials)for(var ud=0;ud<Dd.materials.length;ud++)if(Dd.materials[ud].pd.Mp){ed=!0;break a}}ed=!1}Bd=ed}Ad=Bd}Ad&&(b.Mb||!ra.hx(ab)&&Dc==Pa.cv(a))&&ra.qS(Dc)}for(var Ed=0;Ed<a.scenes.length;Ed++){var Fd=a.scenes[Ed];if(Fd.b4w_use_logic_editor){var Gd=d(Fd);Za.iN(Gd,Fd)}}for(var sc=0;sc<a.scenes.length;sc++){for(var nd=
a.scenes[sc],Hd=d(nd),tc=0;tc<Hd.length;tc++){var pb=Hd[tc];L.ZN(pb,nd,a)&&(pb.Jd||(pb.Jd=[]),pb.Jd.push(b.Mb?nd:ab))}for(var Qd=Hd,Id=0;Id<Qd.length;Id++){var hd=Qd[Id];if(hd.Jd&&"WORLD"!=hd.type)for(var be=hd.particle_systems,Rd=0;Rd<be.length;Rd++){var vd=be[Rd].settings;if("HAIR"==vd.type)if("OBJECT"==vd.render_type){var Zb=vd.dupli_object;Zb.Jd||(Zb.Jd=hd.Jd.slice())}else if("GROUP"==vd.render_type)for(var fd=vd.dupli_group,gc=0;gc<fd.objects.length;gc++)Zb=fd.objects[gc],Zb.Jd||(Zb.Jd=hd.Jd.slice())}}}for(var id=
a.scenes,jd=[],vb=0;vb<id.length;vb++)q(id[vb].objects,0,b.Mb,jd);ib[b.id]=[];for(vb=0;vb<jd.length;vb++)for(var wd=jd[vb],Ec=0;Ec<wd.length;Ec++)for(var Xc=wd[Ec],od=0;od<Xc.length;od++)ib[b.id].push(Xc[od]);for(var xd=a.particles,vb=0;vb<xd.length;vb++){var pd=xd[vb].dupli_object;pd&&(pd.SD=!0,ib[b.id].push(pd));var yd=xd[vb].dupli_group;if(yd)for(var Xd=yd.objects,Ec=0;Ec<Xd.length;Ec++)pd=Xd[Ec],pd.SD=!0,ib[b.id].push(pd)}for(var Jd=ib[b.id],vb=Jd.length-1;0<=vb;vb--)Jd[vb].Jd||Jd.splice(vb,1);
for(var Kd=ib[b.id],sc=0;sc<Kd.length;sc++){pb=Kd[sc];!b.Mb&&pb.parent&&-1<Gc.indexOf(pb.parent.type)&&(pb.parent="");if("MESH"==pb.type){var Sd=Za.dN(pb);Sd&&(a.meshes.push(Sd),pb.data=Sd)}pb.On=L.hG(pb,!1);pb.cj=L.yE(pb)}for(sc=0;sc<Kd.length;sc++){for(var pb=Kd[sc],ce=pb.cj,tc=0;tc<pb.lod_levels.length;tc++){var Zd=pb.lod_levels[tc].object;Zd&&(ce=ce||Zd.cj)}if(ce)for(pb.cj=!0,tc=0;tc<pb.lod_levels.length;tc++)if(Zd=pb.lod_levels[tc].object)Zd.cj=!0}for(var Zc=0;Zc<a.scenes.length;Zc++){var he=
a.scenes[Zc],Yc=he.world;Yc.Jd||(Yc.Jd=[]);Yc.Jd.push(b.Mb?he:ab)}for(var ee=[],Zc=0;Zc<a.worlds.length;Zc++)Yc=a.worlds[Zc],Yc.Jd?(Yc.On=L.hG(Yc,!0),Yc.cj=L.yE(Yc)):ee.push(Yc);for(Zc=0;Zc<ee.length;Zc++)Yc=ee[Zc],a.worlds.splice(a.worlds.indexOf(Yc),1);for(var ie=a.node_groups,je=a.materials,Ld=0;Ld<ie.length;Ld++){var Td=ie[Ld].node_tree;if(Td){var Yd=[];h(Td,Yd,!0);Td.Jt=Yd}}for(Ld=0;Ld<je.length;Ld++)if(Td=je[Ld].Nd)Yd=[],h(Td,Yd,!1),Td.Jt=Yd;for(var fe=0;fe<a.scenes.length;fe++){var ke=a.scenes[fe],
ge=b.Mb?ke:ab;G(b.id,ge,"SPEAKER").length&&!ge.Qc&&Ra.mN(ge)}f(b,c)}function v(a,b,c,d,e){d=ba(b.wi);for(var f=[],h=[],g=0;g<a.speakers.length;g++){var k=a.speakers[g],l=k.sound.uuid;if(-1==h.indexOf(l)){h.push(l);switch(k.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":var n=V.AT_AUDIOBUFFER;break;case "BACKGROUND_MUSIC":n=V.AT_AUDIO_ELEMENT}k=Q.Ii(d+k.sound.filepath);m(f,l,n,k,b.og)}}f.length?V.enqueue(f,function(){},function(){e(b,c)}):e(b,c)}function h(a,b,c){a=a.nodes;for(var d=0;d<a.length;d++){var e=
a[d],f=e.type;if("GROUP"==f&&e.node_group){if(e=e.node_group.node_tree)if(c)h(e,b,!0);else for(e=e.Jt,f=0;f<e.length;f++){var g=e[f];-1==b.indexOf(g)&&b.push(g)}}else-1!=Mb.indexOf(f)&&-1==b.indexOf(f)&&b.push(f)}}function d(a){var b=[];-1==a.objects.indexOf(a.camera)&&a.objects.push(a.camera);t(a.objects,"ALL",b);return b}function t(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];"ALL"!=b&&b!=e.type||c.push(e);(e=e.dupli_group)&&t(e.objects,b,c)}}function q(a,b,c,d){d[b]=d[b]||[];for(var e=d[b],f=
0;f<a.length;f++){var h=a[f],g=ca(h);e[g]=e[g]||[];(c||-1==Gc.indexOf(h.type))&&-1==e[g].indexOf(h)&&e[g].push(h);(h=h.dupli_group)&&q(h.objects,b+1,c,d)}}function G(a,b,c){var d=[];a=ib[a];for(var e=0;e<a.length;e++){var f=a[e];if(f.type==c||"ALL"==c)for(var h=0;h<f.Jd.length;h++)b==f.Jd[h]&&d.push(f)}return d}function H(a,b,c,d,e){for(var f=ib[b.id],h=0;h<f.length;h++){var g=L.mF(f[h]);g.A.ce=b.id}for(var k=a.worlds,h=0;h<k.length;h++)L.mF(k[h],!0);d=L.get_all_objects("ALL",b.id);for(h=0;h<f.length;h++){var l=
f[h],g=l.Ha;oa.Lp(l,g)}for(h=0;h<k.length;h++)g=k[h],oa.Lp(g,g.Ha);b.Mb&&z(a,b.id);for(h=0;h<f.length;h++)l=f[h],g=l.Ha,g.Mr||(I.bU(l,g),L.OW(l,g),hc.V(g)),"MESH"==g.type&&L.XQ(l,g);for(a=0;a<f.length;a++){var m=f[a],k=m.Ha,h=k.A;if(ha.is_mesh(k)||ha.is_empty(k)){var n=m.lod_levels.length;if(n){for(var k=[m],g=[0],q=Infinity,l=0;l<n;l++){var r=m.lod_levels[l].object,p=m.lod_levels[l].distance;if(!r){q=p;break}k.push(r);g.push(p)}g.push(q);for(l=0;l<k.length;l++)r=k[l],m=r.Ha.A,m.Ej=!0,"DYNAMIC"==
h.type&&0<l&&Ha.subtract(h.ue.U,m.ue.U,m.sw),m.qg=g[l],m.pg=g[l+1],n=g[l+1]-g[l],q=l==k.length-1?Infinity:g[l+2]-g[l+1],m.Jj=Math.min(l?g[l]-g[l-1]:0,n),m.Kj=Math.min(n,q)}}}for(f=0;f<d.length;f++)if(a=d[f],"MESH"==a.type&&(h=a.Rt)){var h=h.A,k=a.A.gi,g=[],t;for(t in k)l=k[t],g.push(4*l.Qz,4*l.fi);h.ww.push(g);h.op.push(a.A)}f=t=-1;a=la.lG();for(h=0;h<d.length;h++)k=d[h],g=k.A,ha.is_mesh(k)&&g.Xk&&(k=g.Jh,k>t&&(t=k),a>=k&&k>f&&(f=k));for(h=0;h<d.length;h++)k=d[h],g=k.A,ha.is_mesh(k)&&g.Xk&&(g.Am=
!0,t<a?g.Jh=t:g.Jh<=a?g.Jh=f:(Aa.warn('too many bones for "'+k.name+'" / '+g.Jh+" bones (max "+a+" with blending, "+2*a+" without blending). Blending between frames will be disabled."),g.Jh=t,g.Am=!1),g.Am=g.Am&&!Xa.TF);for(t=0;t<d.length;t++)if(f=d[t],f.Cf)if(a=f.Of,"CHASSIS"==a.Hf){f.R={};f.R.sr=a.sr;f.R.Fq=a.Fq;f.R.xC=a.xC;f.R.zC=a.zC;f.R.yC=a.yC;f.R.cD=a.cD;f.R.XB=a.XB;f.R.dB=a.dB;f.R.ko=0;f.R.Eq=1;f.R.zp=0;f.R.speed=0;f.R.fn=[];f.R.qs=[];f.R.Bp=null;k=(h=ha.get_dg_parent(f))?ha.mA(h,d):d;for(h=
0;h<k.length;h++)g=k[h],g.Cf&&(l=g.Of,ra.wS(g)&&a.name==l.name?(l=ra.AX(g.Of.Hf),f.R.fn[l]=g,f.R.qs[l]=new Float32Array(8)):ra.XG(g)&&a.name==l.name?(f.R.Bp=g,f.R.Ap=l.Ap,f.R.Ps=l.Ps,f.R.Lr=l.Lr,l=qa.invert(f.A.D,qa.create()),g=qa.multiply(l,g.A.D,l),f.R.hJ=g,l=new Float32Array([1,0,0]),qa.transform_dir_vec3(l,g,l),f.R.gJ=l):ra.WG(g)&&a.name==l.name?(f.R.pC=g,f.R.Ns=l.Ns,f.R.Mo=l.Mo,l=qa.invert(f.A.D,qa.create()),g=qa.multiply(l,g.A.D,l),f.R.cJ=g,l=new Float32Array([1,0,0]),qa.transform_dir_vec3(l,
g,l),f.R.bJ=l):ra.YG(g)&&a.name==l.name&&(f.R.AC=g,f.R.fr=l.fr,l=qa.invert(f.A.D,qa.create()),g=qa.multiply(l,g.A.D,l),f.R.rJ=g,l=new Float32Array([1,0,0]),qa.transform_dir_vec3(l,g,l),f.R.qJ=l));4!=f.R.fn.length&&Q.K("Not enough wheels for chassis "+f.name)}else if("HULL"==a.Hf)for(f.R={},f.R.fn=[],f.R.qs=[],f.R.sr=a.sr,f.R.Fq=a.Fq,f.R.wm=a.wm,f.R.Bn=a.Bn,f.R.Cn=a.Cn,f.R.ko=0,f.R.Eq=1,f.R.zp=0,f.R.speed=0,f.R.Bp=null,k=(h=ha.get_dg_parent(f))?ha.mA(h,d):d,h=0;h<k.length;h++)g=k[h],g.Cf&&(l=g.Of,
ra.vS(g)&&a.name==l.name?(f.R.fn.push(g),f.R.qs.push(new Float32Array(8))):ra.XG(g)&&a.name==l.name?(f.R.Bp=g,f.R.Ap=l.Ap,f.R.Ps=l.Ps,f.R.Lr=l.Lr,l=qa.invert(f.A.D,qa.create()),g=qa.multiply(l,g.A.D,l),f.R.hJ=g,l=new Float32Array([1,0,0]),qa.transform_dir_vec3(l,g,l),f.R.gJ=l):ra.WG(g)&&a.name==l.name?(f.R.pC=g,f.R.Ns=l.Ns,f.R.Mo=l.Mo,l=qa.invert(f.A.D,qa.create()),g=qa.multiply(l,g.A.D,l),f.R.cJ=g,l=new Float32Array([1,0,0]),qa.transform_dir_vec3(l,g,l),f.R.bJ=l):ra.YG(g)&&a.name==l.name&&(f.R.AC=
g,f.R.fr=l.fr,l=qa.invert(f.A.D,qa.create()),g=qa.multiply(l,g.A.D,l),f.R.rJ=g,l=new Float32Array([1,0,0]),qa.transform_dir_vec3(l,g,l),f.R.qJ=l));for(t=0;t<d.length;t++)if(f=d[t],f.Nm&&(a=f.oo,"MAIN_BODY"==a.Hf))for(f.Qg={},f.Qg.wm=a.wm,f.Qg.Bn=a.Bn,f.Qg.Cn=a.Cn,f.Qg.bu=[],h=(h=ha.get_dg_parent(f))?ha.mA(h,d):d,k=0;k<h.length;k++)g=h[k],g.Nm&&(l=g.oo,ra.yS(g)&&a.name==l.name&&(f.Qg.bu.push(g),g.kz=g.oo.pJ));e(b,c)}function z(a,b){for(var c=0;c<a.scenes.length;c++){for(var d=a.scenes[c],e=L.Sb(d,
"LAMP",b),f=Array(e.length),h=0;h<e.length;h++)f[h]=h;f.sort(function(a,b){var c=e[a].Eb,d=e[b].Eb;return d.sn&&d.wn&&(!c.sn||!c.wn)||!c.sn&&(d.sn||!c.wn&&d.wn)?1:0});for(h=0;h<f.length;h++)ha.Da(e[f[h]],d).Wr=h}}function l(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];f.bj=f.camera.Ha}for(d=0;d<a.scenes.length;d++){var f=b.Mb?a.scenes[d]:ab,h=b.Mb?L.Sb(f,"LAMP",b.id):L.Sb(f,"LAMP",0),g=L.Sb(f,"ALL",b.id),k=G(b.id,f,"MESH"),l=G(b.id,f,"EMPTY");b.Mb&&Pa.SM(f,g,h,k,l);for(var g=!1,m=0;m<
l.length;m++)for(var n=l[m].Ha,q=n.S,r=0;r<q.length;r++){var p=q[r].lb,t=Pa.KJ(p,n);f.name==p.name&&(g=g||t)}b.Mb&&f.J.td&&!g&&Aa.warn('Scene "'+f.name+'" has water but has no wind. Using default settings.');l=[];Pa.set_active(f);ta.aG(f,k,h,l);m=L.Sb(f,"LINE",b.id);ta.$F(f,m);n=Pa.uv(f);if(b.Mb){g=f.J.zx;m=f.world;if(g.RB||g.procedural_skydome)q=m.Ha,ta.WM(f,g,q),ta.yu(q,n,f);Pa.YF(f,n);(g=f.J.Ql)&&(g.gt||g.he)&&ta.PM(f,m.Ha)}for(m=0;m<k.length;m++)ta.yu(k[m].Ha,n,f);for(m=0;m<l.length;m++)ta.yu(l[m],
n,f),L.ET(l[m]);g=L.Sb(f,"ALL",b.id);Pa.fE(f,g,h);for(m=0;m<g.length;m++)n=g[m],n.A.ef&&!n.NG&&L.update_boundings(n),ha.eO(n)&&(n.EH=!0),L.JW(n,f)}Pa.TM(ab,a.textures,b.id);b.Mb&&ab.J.Yp.length&&(b.CA=!0);e(b,c)}function F(a){var b=a.materials;a=a.images;for(var c=0;c<a.length;c++){var d=a[c];d.Ig="FILE"==d.source&&-1<d.filepath.indexOf(".dds")&&"dds"==Da.lm?"dds":""}if((Ya.Pz&&"dds"==Da.lm||Ya.$w&&"pvr"==Da.lm)&&Da.UJ)for(a=0;a<b.length;a++){for(var d=b[a],e=d.texture_slots,c=0;c<e.length;c++){var f=
e[c],h=f.texture;if("IMAGE"==h.type||"ENVIRONMENT_MAP"==h.type){var g=h.image;g&&!g.Ig&&(f=!h.b4w_disable_compression&&!f.use_map_normal&&"ENVIRONMENT_MAP"!=h.type&&!h.b4w_shore_dist_map&&"MOVIE"!=g.source,r(g,f))}}if(c=d.node_tree)for(d=c.nodes,c=0;c<d.length;c++){e=d[c];f=!1;if("TEXTURE"==e.type){if((h=e.texture)&&(g=h.image)&&!g.Ig&&(f=!h.b4w_disable_compression&&"MOVIE"!=h.image.source&&"ENVIRONMENT_MAP"!=h.type)){a:{f=e.outputs;for(e=0;e<f.length;e++)if(h=f[e],h.is_linked&&"Normal"==h.identifier){f=
!0;break a}f=!1}f=!f}}else"TEX_IMAGE"==e.type?(g=e.image)&&!g.Ig&&(f="MOVIE"!=g.source):"TEX_ENVIRONMENT"==e.type&&(f=!1);g&&!g.Ig&&r(g,f)}}}function r(a,b){-1<a.filepath.indexOf(".dds")?a.Ig="dds":b?(a.Ig=Da.lm,a.filepath="dds"==Da.lm?a.filepath+".dds":a.filepath+".pvr"):a.Ig=""}function E(a,b,c,d,e){d=a.groups;for(var f=a.objects,h={},g={},k={},l={},m=0;m<d.length;m++){var n=d[m];h[n.uuid]=n;k[n.uuid]=n}for(m=0;m<f.length;m++)n=f[m],g[n.uuid]=n,l[n.uuid]=n;a=a.scenes;for(m=0;m<a.length;m++)w(a[m].objects,
null,l,k,null);for(var L in k)L in h||d.push(k[L]);for(L in l)L in g||f.push(l[L]);e(b,c)}function w(a,b,c,d,e){for(var h=[],g=0;g<a.length;g++){var k=a[g],l=c[k.uuid];if(k=l.proxy){b&&-1==h.indexOf(k.uuid)&&h.push(k.uuid);for(var m=c[k.uuid],n=m.constraints,k=0;k<n.length;k++){var L=Q.W(n[k]);L.name=L.name+"_CLONE";l.constraints.push(L)}"b4w_proxy_inherit_anim"in l&&!l.b4w_proxy_inherit_anim||(l.animation_data&&(m.animation_data=Q.W(l.animation_data)),m.b4w_use_default_animation=l.b4w_use_default_animation,
m.b4w_auto_skel_anim=l.b4w_auto_skel_anim,m.b4w_anim_behavior=l.b4w_anim_behavior,m.b4w_cyclic_animation=l.b4w_cyclic_animation)}}for(g=0;g<h.length;g++)l=Q.CR(a,h[g]),-1<l&&a.splice(l,1);h={};if(b)for(g=0;g<a.length;g++)k=a[g],l=c[k.uuid],n=Q.W(l),m="origin_name"in l?l.origin_name:l.name,n.name=ha.XF(b.name,m),n.origin_name=m,n.dg_parent={uuid:b.uuid},f(n),c[n.uuid]=n,h[k.uuid]=n.uuid,k.uuid=n.uuid,e&&e[l.uuid]&&(n.b4w_cluster_data=e[l.uuid]);for(g=0;g<a.length;g++)k=a[g],l=c[k.uuid],l.dupli_group&&
(k=l.dupli_group,e=d[k.uuid],n=Q.W(e),n.name=Q.Zs(e.name+"_CLONE"),n.uuid=Na.AG("Group"+n.name),d[n.uuid]=n,k.uuid=n.uuid,w(n.objects,l,c,d,l.b4w_cluster_data));if(b)for(g=0;g<a.length;g++){k=a[g];l=c[k.uuid];l.parent&&l.parent.uuid in h?l.parent.uuid=h[l.parent.uuid]:l.parent&&(Aa.warn("Object's \""+l.name+'" parent is not in dupli group. Disabling parenting.'),l.parent=null);n=l.constraints;for(k=0;k<n.length;k++)b=n[k],b.target&&b.target.uuid in h&&(b.target.uuid=h[b.target.uuid]);if(b=l.pose)for(d=
b.bones,k=0;k<d.length;k++)if(e=d[k].constraints)for(n=0;n<e.length;n++)b=e[n],b.target&&b.target.uuid in h&&(b.target.uuid=h[b.target.uuid]);b=l.modifiers;for(k=0;k<b.length;k++)d=b[k],d.object&&d.object.uuid in h&&(d.object.uuid=h[d.object.uuid]);if((l=l.lod_levels)&&l.length)for(k=0;k<l.length;k++)b=l[k],b.object&&b.object.uuid in h&&(b.object.uuid=h[b.object.uuid])}for(var q in h)Xb[q]=h[q]}function f(a){a.uuid=Na.AG("Object"+a.name)}function y(a,b){a.action&&N(a,"action",b);if(a.nla_tracks)for(var c=
0;c<a.nla_tracks.length;c++)for(var d=a.nla_tracks[c],e=0;e<d.strips.length;e++)d.strips[e].action&&N(d.strips[e],"action",b)}function D(a,b){for(var c=a.nodes,d=0;d<c.length;d++){var e=c[d];"TEXTURE"==e.type&&e.texture&&N(e,"texture",b);"LAMP"==e.type&&e.lamp&&(e.lamp.uuid in Xb&&(e.lamp.uuid=Xb[e.lamp.uuid]),b[e.lamp.uuid]||(e.lamp=null));"GROUP"==e.type&&e.node_group&&N(e,"node_group",b);"TEX_IMAGE"!=e.type&&"TEX_ENVIRONMENT"!=e.type||!e.image||N(e,"image",b)}e=a.links;for(d=0;d<e.length;d++){var f=
e[d];M(f,"from_node",c);M(f,"to_node",c);B(f,"from_socket",f.from_node.outputs);B(f,"to_socket",f.to_node.inputs)}(c=a.animation_data)&&y(c,b)}function N(a,b,c){a[b]&&((c=c[a[b].uuid])||Aa.error("Dangling link found:",b,a),a[b]=c)}function M(a,b,c){c=Q.keysearch("name",a[b].name,c);a[b]=c}function B(a,b,c){c=Q.keysearch("identifier",a[b].identifier,c);a[b]=c}function J(a,b,d,e,f,h){var g=[],k=[],l={};e=a.images;for(var m=Ja.kG(),n=ba(b.wi),L=0;L<e.length;L++){var q=e[L],r=q.uuid;if(r){var p=Q.Ii(n+
q.filepath),t=V.Lx(p),w=t[1].toLowerCase(),ha=q.source;if("FILE"===ha){ha=q.Ig?V.AT_ARRAYBUFFER:V.AT_IMAGE_ELEMENT;if(!V.dO(w)){Aa.error('image "'+q.name+'" has unsupported format or broken path.');continue}Ya.hB&&Da.use_min50&&(p=C(t))}else if("MOVIE"===ha)if(Da.Es)p=t[0]+".altconv.seq",ha=V.AT_SEQ_VIDEO_ELEMENT;else{ha=Ra.detect_video_container(w);if(""==ha){Aa.error("failed to load video file (unsupported format)",p);continue}p=ha!=w?t[0]+".altconv."+ha:t[0]+"."+t[1];ha=V.AT_VIDEO_ELEMENT}else{Aa.error('Image "'+
q.name+'" has unsupported format "'+ha+'".');continue}r in l||(l[r]=[]);for(t=0;t<m.length;t++)w=m[t],(!Ja.fR(w)&&w.Qk==q.Ig&&w.Hm==r||b.og)&&l[r].push(w);q.Ig&&Da.assets_gzip_available&&(ha=V.AT_ARRAYBUFFER_ZIP,p+=".gz");l[r].length&&g.push({id:r,type:ha,url:p,Ae:b.og})}}if(g.length){var v=0,y=function(e,f,m,n){if(e){if(b.og)f=m;else{f=l[f];for(var L=0;L<f.length;L++){var q=f[L];if(m==V.AT_SEQ_VIDEO_ELEMENT)q.Cs=e.Dh,Ja.bt(q,e.images,b.id);else if(Ja.bt(q,e,b.id),"ENVIRONMENT_MAP"==q.source&&b.Mb)for(var r=
0;r<a.scenes.length;r++)Pa.jy(a.scenes[r]);Ja.TU(q)}f=f[0].Qk}m==V.AT_VIDEO_ELEMENT||m==V.AT_SEQ_VIDEO_ELEMENT?(m==V.AT_VIDEO_ELEMENT?(f=e.videoWidth,e=e.videoHeight):(f=e.images[0].width,e=e.images[0].height),Aa.log("%cLOAD VIDEO "+f+"x"+e,"color: #"+(2048<f||2048<e?"a00":1024<f||1024<e?"aa0":"0a0"),n),-1==n.indexOf(Wb)&&Aa.warn("video",n,"is not from app root.")):c(e,n,!0,f)}else{a:{e=b.og;n=n.split("?v")[0];m=V.Lx(n);if("gz"==m[1])n=m[0],m=V.AT_ARRAYBUFFER;else if("dds"==m[1]||"pvr"==m[1])for(n=
m[0],m=V.AT_IMAGE_ELEMENT,L=l[f],q=0;q<L.length;q++)L[q].Qk="";else if(-1!=n.indexOf(".min50"))n=n.split(".min50"),n=n[0]+n[1],m=V.AT_IMAGE_ELEMENT;else{f=null;break a}f={id:f,type:m,url:n,Ae:e}}f&&(Aa.warn("Trying to load fallback image",f.url),k.push(f))}f=++v/(g.length+k.length);h(b,d,f)},x=function(){k.length?(V.enqueue(k,y,x),k.length=0):(Aa.log("%cLOADED ALL IMAGES","color: #0a0"),f(b,d))};V.enqueue(g,y,x)}else f(b,d)}function C(a){return"dds"==a[1]?(a=V.Lx(a[0]),a[0]+".min50."+a[1]+".dds"):
a[0]+".min50."+a[1]}function A(a,b,c,d,e){a=Pa.yv();for(d=0;d<a.length;d++){var f=a[d];if(f.b4w_use_nla){var h=f.b4w_nla_cyclic;f.b4w_use_logic_editor&&(h=!1);oa.VW(f,h,b.id)}}e(b,c)}function X(a,b,c,d,e,f){a=ba(b.wi);var h=[],g={};d=L.get_all_objects("ALL",b.id);for(var k=0;k<d.length;k++){var l=d[k];if(K(l)){var n=l.ka.Jc;"BACKGROUND_MUSIC"==Ra.qA(l)?(n=Q.nv(),b.zA=!0):"NONE"!=Ra.qA(l)&&Da.HA&&(b.GA=!0);if(!(n in g)){g[n]=[];var q=Q.Ii(a+l.ka.wi);switch(Ra.aJ(l)){case Ra.Fy:var r=V.AT_AUDIOBUFFER;
break;case Ra.eD:r=V.AT_AUDIO_ELEMENT}m(h,n,r,q,b.og)}g[n].push(l)}}if(h.length){var t=0;V.enqueue(h,function(a,d,e,k){if(a)for(Aa.log("%cLOAD SOUND","color: #0aa",k),-1==k.indexOf(Wb)&&Aa.warn("sound",k,"is not from app root."),d=g[d],e=0;e<d.length;e++)Ra.$W(d[e],a);a=++t/h.length;f(b,c,a)},function(){Aa.log("%cLOADED ALL SOUNDS","color: #0aa");e(b,c)})}else e(b,c)}function m(a,b,c,d,e){var f=V.Lx(d),h=f[1].toLowerCase(),g=Ra.detect_audio_container(h);""!=g?(d=g!=h?f[0]+".altconv."+g:f[0]+"."+f[1],
a.push({id:b,type:c,url:d,Ae:e})):Aa.error("failed to load audio file (unsupported format)",d)}function K(a){return ha.is_speaker(a)&&Ra.aJ(a)!=Ra.fD}function R(a,b,c){a=L.Sb(a,"SPEAKER",b);for(b=0;b<a.length;b++){var d=a[b];ha.is_speaker(d)&&(Ra.uS(d)||c)&&Ra.play_def(d)}}function O(a,b){for(var c=a.J.Yp,d=0;d<c.length;d++){var e=c[d].J;a.b4w_use_nla&&c[d].b4w_nla_video||!c[d].use_auto_refresh||b!=e.$p||(Ja.reset_video(e),Ja.play_video(e))}}function S(a,b,c,d,e){oa.$T();e(b,c)}function ga(a,b,c,
d,e){oa.start();Aa.log("%cSTART NLA","color: #0a0");e(b,c)}function sa(a,b,c,d,e){for(var h=c.lod_levels.length,g=0;g<h;g++){var k=c.lod_levels[g],l=k.object;if(l){var m=e.oH.indexOf(c);if(-1==m){e.oH.push(c);var n={Kw:[],GH:[],nH:[],bC:[],wB:[]};e.ow.push(n)}else n=e.ow[m];var L=n.Kw.indexOf(l);-1!=m&&-1!=L?(n.bC[L].push(a),n.wB[L].push(b)):(m=Q.Pq(l),m.name=c.name+"_LOD_"+String(g+1),m.b4w_cluster_data=c.b4w_cluster_data,f(m),m.lod_levels=[],d&&(m.dg_parent=d),n.Kw.push(l),n.GH.push(m),n.nH.push(k),
n.bC.push([a]),n.wB.push([b]))}}if(b=c.dupli_group)for(b=b.objects,d=0;d<b.length;d++)sa(a,b,b[d],c,e)}function U(a,b){var c=b.objects,d=c.indexOf(a);-1<d&&c.splice(d,1);for(d=0;d<c.length;d++)(b=c[d].dupli_group)&&U(a,b)}function ia(a,b,c,d,e){d=!0;for(var f=0;f<a.scenes.length;f++)if(!ra.hO(a.scenes[f])){d=!1;break}d&&(e(b,c),Aa.log("%cPHYSICS READY","color: #0a0"))}function fa(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];if(b.Mb)var h=ra.hx(f);else h=ra.hx(ab)||ra.hx(f),f=ab;if(Cb.enabled&&
h)for(h=0;h<ac.length;h++)for(var g=L.Sb(f,ac[h],b.id),k=0;k<g.length;k++){var l=g[k];l.A.ce==b.id&&(ra.append_object(l,f),b.jH&&ra.sa(l)&&ra.disable_simulation(l))}}e(b,c)}function pa(a,b,d,e,f){var h={};e=[];for(var g=a.scenes,k=0;k<a.scenes.length;k++){var l=g[k];if(l.J.td){var m=l.J.td.tl;if(m&&"FILE"===m.source){var l=m.uuid,n=Q.Ii(ba(b.wi)+m.filepath);e.push({id:l,type:m.Ig?V.AT_ARRAYBUFFER:V.AT_IMAGE_ELEMENT,url:n});h[l]=m}}}e.length?V.enqueue(e,function(a,d,e,f){if(a){c(a,f,!0);e=[];f=Ja.kG();
for(var k=0;k<f.length;k++){var l=f[k];l.uri===d&&e.push(l)}for(d=0;d<e.length;d++)Ja.bt(e[d],a,b.id);for(d=0;d<g.length;d++)if(e=g[d],e.J.td&&(f=e.J.td.tl,f===m)){var l=a,n=document.createElement("canvas");f=m.size[0];k=m.size[1];n.width=f;n.height=k;n=n.getContext("2d");n.drawImage(l,0,0);l=n.getImageData(0,0,f,k).data;n=new Float32Array(4);n[0]=1/16581375;n[1]=1/65025;n[2]=1/255;n[3]=1;f*=k;for(var k=new Float32Array(f),L=0;L<f;L++)k[L]=n[1]*l[4*L+2]+n[2]*l[4*L+3];e.J.lC=k}}else for(a=h[d],d=0;d<
g.length;d++)e=g[d],f=e.J.td.tl,f===a&&(e.J.td.tl=null,Aa.warn("image",f.filepath," was not found. Disabling water shore effects."))},function(){f(b,d)}):f(b,d)}function Z(a,b,d,e,f){e=a.scenes[0];a=[];for(var h=[Oa.zt,Oa.mq,Oa.At,Oa.Ty],g=0;g<h.length;g++){var k=Pa.Tb(e,h[g]);k&&a.push(k)}if(a.length){e=[];g=V.AT_IMAGE_ELEMENT;e.push({id:"SEARCH_TEXTURE",type:g,url:xa.af.smaa_search_texture_path,Ae:b.og});e.push({id:"AREA_TEXTURE",type:g,url:xa.af.smaa_area_texture_path,Ae:b.og});for(g=0;g<a.length;g++)if(h=
a[g],h.type==Oa.mq){a=h.fb;for(g=0;g<a.length;g++)if(h=a[g],"u_search_tex"==h.to)var l=h.Oa;else if("u_area_tex"==h.to)var m=h.Oa;break}e.length?V.enqueue(e,function(a,d,e,f){a&&(c(a,f,!1),d="SEARCH_TEXTURE"==d?l:m,d.source="IMAGE",Ja.bt(d,a,b.id),Ja.fC(d,Ja.T,Ja.T))},function(){f(b,d)}):f(b,d)}else f(b,d)}function ma(a,b,c,d){for(c=0;c<a.scenes.length;c++){var e=a.scenes[c];b.Mb||(e=ab);for(var f=L.Sb(e,"LAMP",b.id),h=0;h<f.length;h++){var g=f[h];g.A.ce==b.id&&d.Zy.push({lb:e,obj:g})}f=L.Sb(e,"ALL",
b.id);for(h=0;h<f.length;h++)g=f[h],"LAMP"!=g.type&&g.A.ce==b.id&&(b.jH&&ha.is_mesh(g)&&Pa.im(g,!0),d.Zy.push({lb:e,obj:g}))}}function aa(a,b,c,d,e,f){var h=d.Zy;e=d.MH;if(h.length){a=h[e].obj;var g=h[e].lb;e=ha.Da(a,g);Pa.append_object(g,a);!a.anchor||g.J.anaglyph_use||g.J.Hs||Ca.append(a);d=++d.MH/h.length;a.A.BG&&Pa.Lq(a,!0);h=e.sj;if(-1!=a.A.be&&h){var k=Ha.copy(a.A.ue.U,mb);Pa.JJ(h,k)}h=a.xs;if(h.length&&g.J.Qh)for(g=qa.get_trans_view(a.A.D),a=qa.get_quat_view(a.A.D),e=e.Mi,k=0;k<e.length;k++)Pa.LJ(e[k],
g,a),ha.MJ(h,e[k].H.xc)}else d=1;f(b,c,d)}function ea(a,b,c,d,e){if(b.Mb){a=Pa.Gh();Pa.jy(a);d=Pa.yv();for(var f=0;f<d.length;f++){var h=d[f];Pa.jy(h);Pa.cU(h,a)}Pa.set_active(a)}else Pa.OJ(ab);a=L.get_all_objects("ALL",b.id);L.PW(a);e(b,c)}function wa(a,b,c,d,e){if(b.Mb)for(a=Pa.yv(),d=0;d<a.length;d++)for(var f=a[d],h=L.Sb(f,"WORLD",0),g=0;g<h.length;g++)Pa.nS(f,h[g]),Pa.jy(f);e(b,c)}function da(a,b,c,d,e){if(b.Mb)for(a=Pa.yv(),d=0;d<a.length;d++){var f=a[d];f.b4w_use_logic_editor&&T.oS(f,b.id)}e(b,
c)}function W(a,b,c,d,e){if(b.Mb)for(d=0;d<a.scenes.length;d++)O(a.scenes[d],b.id),R(a.scenes[d],b.id,!1);else O(ab,b.id),R(ab,b.id,!1);e(b,c)}function Ga(a,b,c,d,e){for(d=0;d<a.scenes.length;d++)a.scenes[d].camera=null;Da.media_auto_activation&&(b.CA||b.zA||b.GA)?Ua||P(a,e,b,c):e(b,c)}function P(a,b,c,d){var e=sb.parentElement;bb=e.style.zIndex;e.style.zIndex="999";Ua=document.createElement("div");Ua.style.position="relative";Ua.style.height="88px";Ua.style.width="88px";var f=Math.round(sb.offsetWidth/
2-44);Ua.style.top=Math.round(sb.offsetHeight/2-44).toString()+"px";Ua.style.left=f.toString()+"px";Ua.style.backgroundImage="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAYAAACvt+ReAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABVDSURBVHic7Z15kF1Vncc/v05Ys7JIQJZ0GLaAgCzCQARGFMIwZKTiqCPBAbTEEodBhYKALJKSVWYsCpTBcgCLAdQBHWZACCCyhCElIRiWEMOSBZAkCglJOoTQyW/++J3Xfe95971+273v3fvOp6qr+5573+vT3d8+93vP+Z3fTwjUhKoKsC0wLvKxDTA68rEVMNK9ZDiwpft6PdDvvl4LvA+sBt5zn1cCy4EVwDJgpYhouj9RMZB2d6ATUdWtgD2BXvcxARgPbJ5RFzYAS4BFwGL38YqIvJ/R988NQcCAqm4LHADsA+yLibannX1KYBMm6JeBBcA8EVnZ3i61n64UsKoOAyYCh7iPCeTvd6HA68BcYA6wQEQ2trdL2ZO3P1rDqGoPsD9wNHAkMKqBt1nNoFctfV7j2ldj/rbPXdsvIuvd994S88QAIzCfHPXOHyHurRvt21PALOAFEdnUwHvkjsILWFV7gcnAUcDYWl8GvAEsZNCDLhKR91rfw4RvrjoWuyv0us97ALtS+99rFfAEMFNElqTRx06hkAJ2I94ngRMwXzsUmzCxzsP85csisja9HtaPqo7CbM9EzK/vRW1/vwXATODJ0h2hSBRKwO5hbAom3KFuw2uAZzD/+JyIrEm5ey1FVUcDB2Ee/hPU9vM+ANwnIu+m3L3MKISAVXU3YCrwNwx6zSTWArOBJ7Gn+P4q1+YGVR0OfByzSX+N+exKfAg8DtwtIm9m0L1UybWAVfWjwJcw4Vb6WRT4A3YbnV0U0VZCVTfDRDwZOJDKv5dNwGPAXSLydja9az25FLCqbg9MA44FhlW4bDXwIPYgszyrvnUSqrojJuRqlqof+C1wp4i8k1XfWkWuBKyqmwN/D3wRW7ZN4m3gfzHhfpBV3zoZNyofBXwem81I4gPgHsxabMiqb82SGwGr6lHAV7A50yQWA3cCT4c4gmRcPMeRwCnY0ngSK4BbRGRWZh1rgo4XsJtZOAvzdUm8CfwSeKxbJu+bxQl5EnAqsEuFy+YAPxKRP2fWsQboWAG7X/JJwGkMRnVFWQXcDjwchNsYbnVyMibkMQmXvA/8DLi/U+9qHSlg95B2HvCxhNP9wG+AO0SkL+F8oE7cws9UzCNvlnDJAuA6EVmWacdqoOMErKpHA98keS7zReAGEXkr2151B6q6C3A2sF/C6bWYpXgy215Vp2MErKpbYMI9NuF0H3ArNrPQkbeyouCs2wnA6SQPIo8AN3XKDE9HCFhVdwK+iwWv+DwLXF+k5c88oKrbAecAByecfh24shMsRdsFrKqHYn53pHdqAzYtdk8YdduDG40nA18DtvBOrwP+TURmZ96xCG0VsKp+DrtV+f1YDFwrIkuz7lOgHBeSej6wm38KmzP+deadcrRFwG765kxsmszncexBrXChf3nGzVScg63o+cwEftyOHSGZC9htmLwAONQ71Y/9N/9P1n0K1I6qngycQXkMyjPANVkPPJkKWFVHApcDe3un1mIPBc9n2Z9AY6jqgcBFlM9SLAAuy3J+PjMBu20yM4DdvVPLge+JyBtZ9SXQPC4G+zJsD1+U14BLs9p+lYmAXTzDFZRHQi0EZojIqiz6EWgtqroNcCmWQyPKUuDiLKY+Uxewqo4BrqL8CfZF4PKQrCPfuIe7S7Dg+ShvARekPTilKmBVHYGNvHt4p54FrshT3GmgMm4V9SJsf16URcBFae43TE3Abrbh+5Q/sM0Gri761p5uwwXNTwcO904twOxEKrMTqaRPcvO851Eu3uewqZYg3oIhIh9iVnGOd2ofYLrLhtRy0sr/dSbl/4nzMdvwYUrfM9Bm3MB0JfCCd+pQbFNCy2m5gN3ysL/CthCbWgmrawXHPdfMAF7xTk12iyAtpaUCVtXDsNiGKMuxqbIg3i7BzSzNwPbXRfmqC95qGS0TsKqOA75N/MGwjzDP25W41K+XYausA83AeS58tiW0RMCRucBo7oF+zPMWOrlcoDJudfUqIBrkMxK40KVIaJpWjcBnUR6MfkuIbQiIyDzgNq95d+AbrXj/pgWsqpMo3wb0eIgqC5Rw8cL+Xrrj3P7HpmhKwKr6EeBfvOYlwA3NvG+gkFyPxUhEOcvtQG+YhgXstpucSzykbgO2kyLMOARiOE1ci2XHLDES+I7TUkM0MwJPoTxvw63hoS1QCRFZjCVKiXIAcGKj79mQgJ11+LLX/BxwX6MdCXQN92K7N6Kc1qiVaHQE/ibx7JB9wA/D7uHAUDiN3MhgMRyArWlwqbluAbsskf5qyq0hb0OgVlwe4tu85sPcjFZd1CVgN/l8htf8IrYrNRCohwexAK8oX3OxxTVT7wg8FdghctyPbYEP1iFQF04zNzBYQxpge+Cz9bxPzQJ2qYb+wWu+NyTaCzSKW2q+32v+gttDWRP1jMDTiOfpXYUllg4EmuFOrJ5JiS2xDPI1UZOAXTWgT3vNt4f8vIFmcRq63Wv+jCtQMyS1jsCnEM/E8haWZjO3qOrDqrp/u/sRAGwSIFqzbjjwj7W8cEgBuwQWftDFfxagMvpngLmqerNbmAm0CVci4ude87GquvNQr61lBP6cd90SrCJ6ERiO7d/7o6pe0KoY1UBDPI5lJS3Rg2mvKlUF7J4Gj/Ga7yjgtNk2wNXAC6r6+XZ3phtxmvqF1/wpl/2nIkONwFOI1x7+E/B0/d3LDXsBvwz+uG08hRWqLLEZySl4B6goYLdN6ASv+b8LOPomEfxxG3Be+F6v+cRqq3PVRuCjie9xWwM82nj3ckfwx+3hYeLzwqNITqoNVBfw8d7xg10aqB78cYa46kd+bM3kStcnCtjVRNgn2gQ81Gznck7wx9kxE9NciYluOreMSiOwr/g/iMjbiVd2H8Efp4wr3+XvaPcdAZAgYJeYz/ccIVwyTvDH6ePf8Y9x2oyRNALvD4yNHPdhKVED5QR/nB5PY7XoSmwD7OtflCRgf9n4/0I61CEJ/rjFuCSB/sBZNhsRE7DL4XqEd01Rlo2zIPjj1uJrb5JvI/wReCIwOnK8GpiXQseKTPDHrWMutv5QYix2txvAF7Bf42BOsA8NE/xxkzjtzfWaYxr1BezvNvbTxQfqJ/jj5njWO45pdEDALuqnN3JuE5asJNAagj9ujGeJL2rs4YpmAvER+EDiyakXplkeqUsJ/rhOXMXP16JNRFKaRQU80XtteHhLj+CP68PX4sB8cE9So+Pl1LoTKBH8cW34WowL2BUlHB+5QIE/pt+vgCP44+rMJ+6DJ7h49YEReE/io/Ebwf9mTvDHFRCR1dhO+BLDcOWLS6Lt9V7j1/gKZEfwx8ks9I4nwKCAd/dOLkq9O4GhCP44jp84vRcqj8BBwJ1D8MeGr8legB5Xn8CPdg9lAjqL4I/jOSMAxquq9ADbAtFfyJpQWbNj6Vp/7BKoR3PxbQmM7QHGedcuy6xXgUbpVn+83DselyRg/6JA59Jt/tjX5g5BwPmnm/xx4gjs5576S0adCbSWbvDHK7zj7XqI78AAy7weyC9F9serveNRSQIOS8jFoIj+2Bfw6CDgYlM0f+xrc3QPVnC52kWB/FMUf+yPwCN7sBysUT7IqDOB7Mm7P97gHW+eJOCwC7n45NUff+gdb5YkYP+iQDHJoz9OFPBwrzGMwN1FnvxxooADgRLvt7sD9dJD+Yjrj8iBYrMSmA7sLyL3tbszQ1Bmd4djw/Lm3kX+016gePQDtwAXi8if292ZGqko4ChhBC4+jwDfFpEX292ROqlJwBVLGgVyz0Lg3BxYhUr4MyUbeihfeRtFoGjkyedWoyzsYTgJ68sZdSaQPnn0udVIFHBZhE9GnQmkS159bjV8bb4XBFw88u5zq+Hb27XDMX8UZfuMOhNoLSuBa4AfugIpRWQH7/id4ZTvM9oxo84EWkPRfG41fG0uTxKwr/JA51JEn1sNX5uJAg4jcOdTZJ9bjbId9D3Au8SD2EdFaxAEOoqizOfWjapuC4yINL0PvNcjIgos9a7vzapjgZroB34C7C0i1xT4Ia0aE7zjJSIyUPUwMfNfoCN4BDhIRL7eBQ9p1ej1jhfBYODOYu+kr/ZA9nSrz63EeO94CQwK2B+B90y9O4FKdMN8biPs5R0vhkEBvwJsxGoPAOyqqqNCnYxM6ab53LpQ1dHAzpGmjcCr4DK0i8h64jZCgH0y6l8g+Nyh2Jd4Ec7XnWZjlYkq1uIKpMZCYIqIHNdFixGN4GvxpdIX1QScx8QXeaFr53Mb5EDveECr0e1Dz2PF5EpD9d6qOsbVqg20huBz60RVxxCvoqUkjcAishJ4PXKhAB9Pu4NdRPC5jXEIcf/7SrSGi58XYm7CiwPNEXxuc/ganBM98AU8xzs+TFXDLuXGCD63SZz2fAHHBllfwAuI79AYSbAR9RLiFlrHwcTT/67CKzkbE7CIbASe8t7kk6l0rZgEn9tajvaOZ4nIpmhDUm60Wd7xEarqJ5QIxAk+t8W4bJmHec2+NhMF/DwWI1xiBHB467pWKILPTY8jga0jx+8SmT4rUSZgFx/sK/2ElnYt/wSfmz7HecdPOG3GqJRedaZ3fKCq7tSSbuWf4HNTRlV3BA7wmh9KujZRwCKyBJuRGGgCjm9J7/JL8LnZMZn44sV8EfF3DQGVR2AoH4VPUNUtm+1ZDgk+N0NUdQvKLauvxQGqCfgJ4nnTRgHHNt613BF8bns4jngGnjUkzD6UqChgEfkA+I3XPFVVu6EsQfC5bcBp67Ne831Oi4kMJcb7iecP3hE4orHu5YLgc9vLJCA6WbAB02BFqgpYRN4FHveap6mqJF2fY4LPbTNu9D3Fa340GnmWRC124G4guny3G+VLfHkl+NzO4Rhg18jxRuBXQ71oSAGLyJvAY17zNFUdlnB5nngAOCD43PbjRt8ves2/E5E/DfXaWh/I7iJejuuj5HxeWEROFBF/G1WgPZwI7BI57gd+XssLaxKwiLwN/NZrPlVVRyRdHwjUiqqOBKZ5zQ+LyLJaXl/PlNidwPrI8RjgS3W8PhBIYhrxed/12B2/JmoWsIi8gz3QRTlJVXdJuj4QGApV3Q34W6/5F272qybqXZT4FfF8wsOBbxVwWi2QMk4z/0x8Z/wy4N563qcuAbtpplu95n0I4ZaB+jmR8oQlP613KrPuZWERmQX83ms+XVW3q/e9At2Jqm4PnOY1zxaR2fW+V6NxDTcCfZHjEQQrEaiBiHWI7rZYB/x7I+/XkICdyb7daz4ImNLI+wW6ipOBQ72220TkL428WTORZfcDL3htp6tqbxPvGSgwqro78E9e8zxsVbQhGhaw25/0r8DaSPPmwPldGvgeqIKqbgWcD0R3uK/BEnmX7XWrlaZie92wf4PXvBtwbvDDgRJOC+cQXy4G+HGj1qFE08HpIvIUFgAe5QjKA5MD3ctUyhPkzBSRJ5t941btrriJeGZLgDNU1c/rGugyVPUgyn3vq8DNrXj/lgjYbfn4PvG8asOA74aHuu7FLRVPZ7D2CpjvvapVsdct298mIiuAHxAPft8auERVt2nV9wnkA1dZ83vEq2sqcJ2I+OWNG6alGzRF5DnKl5rHAZe6p9BAF6CqWwOXUV6c+6ci8mwrv1fLdxiLyK8Bf1/ZnsCMML1WfFxeh0uBv/JOPSgidQXq1EJaW+R/Avjr2hOBi13WwUABcQmpLwQ+5p2agz3ot5xUBOxyuF5HPD0VWLLsC0K61uLh/qYXUb5MPB+42uWebjmpLja4LUdXAHt4p54HZpSK1QXyjbMNF2PxMFEWAReKyNryV7WG1FfLXJnQq7EVuigvAZeLyLq0+xBID/dccwnltdzeBKYPldehWVJPEyUiq7H/Tj+74H7AFWGKLb+4qbJrKBfvUuCitMULGYzAJdzu0xmUVx1/BxuJ/ZW8QAfjFim+R/lU2WvApVkVyMw04MZ54sspLyTeB1wpIvOy7E+gMdzy8HTiixRgD2yXi0hf+avSIfOIMeeZLgA+4Z3aiC2C3NtMeF0gPVxU2VQstsHPzPR74NqsH8zbEvLoUgmdCZyUcHo2FiOa2X9xYGjcwPMtksuuPQjclNZUWTXaGrOrqicDX03ox1Lsv3lx5p0KlOF2UpxPeTzvJuA/0lhhq5W2B52r6gHYL2esd+pD4A7gnmAp2oOzDFOAM4jvpACLKvuBiPj1tTOl7QIGUNVx2CqOv34OVhv3epcZKJARbuv7OZQvToDNNFzZyqiyRukIAcNAZcZvUF4fDGyW4mfAA2E0Thc36v4d9qC2dcIlM4GbOyWXcscIuISqTgLOJl7kucR84AYReSPbXnUHbm73bCzwymcNcKPbQtYxdJyAYeD29R3Ki92B5Y69D7grzFS0BrfIdAqW7ml4wiXzsJmhpjZgpkFHChhqupWtxpKrPNSO6Zsi4LLsnwCcSjzFaYl1wG10sHXrWAGXcOvtX8cq2CSxHPgvTMibKlwTiOAGh0nAl4GdK1z2DPCjThx1o3S8gEs4b/wVbItSEkuxxMizOnW0aDduAWkSZhd2rXDZMmxu9+nMOtYEuREwDET8n4jd8pJsBdiIfC82Iod4YwaCzY8CvkD5YkSJ9Vj+57s7ZYahFnIl4BLOVkwDPk3yQwfYU/ODmJDfzqpvnYSq7oQVzp5MsscFeyh+GHsorjkzeqeQSwGXUNUdsTodn6JybLNiO0BmYjloczO6NIKbTz8SqyK1P5X/xhuB32HCbfuCRKPkWsAlXJ2OqZiQq+23W4cFC80C5opIf5Vrc4OzCAdhNuFwKtsrsCX6R7El+iHrsHU6hRBwCbe74yTMJ1e6ZZbow56052JiTn33QCtR1bHAwcAh2EbKoUqercFS4t6Xt5+1GoUScAm3yfAo7Dbq12FIfAmWr+t5bLXvZbcVqmNQ1THYCtm+2Bae3ant7zcfeAh4slrV97xSSAFHccujx2P1nbet9WXAW1j1+iVY4sIlWT3kuHoj44EJQC+WGKaecmbvAk9gGSALvexeeAGXcJP3+2Ej8yTKwzdroQ+bJ12BTdetwFYE10Q+r8PiZPtL03guGHw49qC5NWZvRkc+74DNb5c+GqmAugrz9rOAl7plLrxrBBzFTejvhXnHQ7C8FXn7XSjwCvCs+1jYjSuRefujpYLzl/tj/nIi5i/9PV/tZiNmZV7Gcmq8mNXO304mCDgBd8vfA/OfvZgXHQ9klZxwPbAY89+L3NevhpXFcoKA68BN05V86g7Adgz62NGYd90KG72Hua8B3sdG0H5MnH2YZy755ncY9NTLijTNlTb/Dz+sKh/f1rAbAAAAAElFTkSuQmCC')";
Ua.style.backgroundSize="88px";jb=document.createElement("div");jb.style.position="relative";jb.style.height=sb.offsetHeight.toString()+"px";jb.style.width=sb.offsetWidth.toString()+"px";jb.style.background="rgba(0, 0, 0, 0.5)";jb.style.zIndex="999";e.appendChild(jb);jb.appendChild(Ua);$b=function(){c.CA&&(Ja.play(),Ja.pause(),Ja.reset());if(c.zA){if(c.Mb)for(var e=0;e<a.scenes.length;e++)R(a.scenes[e],c.id,!0);else R(ab,c.id,!0);Ra.pause()}c.GA&&Ra.YH();ua();b(c,d)};na.add_click_listener(Ua,$b)}
function ua(){if(Ua){var a=sb.parentElement;a.style.zIndex=bb;na.remove_click_listener(Ua,$b);jb.removeChild(Ua);a.removeChild(jb);Ua=jb=null;bb=0}}function ba(a){(a=a.split("/").slice(0,-1).join("/"))&&(a+="/");return a}function ja(a){la.is_animated(a)&&la.remove(a);Ea.nU(a);L.clear_outline_anim(a);Ka.check_sensor_manifold(a)&&Ka.remove_sensor_manifold(a);ra.sa(a)&&ra.remove_object(a);Pa.jI(a);ha.is_speaker(a)&&Ra.LV(a);Ca.is_anchor(a)&&Ca.remove(a)}function ca(a){var b=la.gG(a);return(a=b&&b.parent==
a?null:a.parent||b)?1+ca(a):0}var Ca=u("__anchors"),la=u("__animation"),V=u("__assets"),ta=u("__batch"),xa=u("__config"),I=u("__constraints"),Ka=u("__controls"),Va=u("__texcomp"),Ia=u("__debug"),va=u("__extensions"),na=u("__input"),Y=u("__loader"),ya=u("__material"),Na=u("__md5"),oa=u("__nla"),T=u("__logic_nodes"),Ea=u("__particles"),Fa=u("__nodemat"),L=u("__objects"),ha=u("__obj_util"),ra=u("__physics"),Aa=u("__print"),Qa=u("__quat"),Za=u("__reformer"),za=u("__renderer"),Pa=u("__scenes"),Ra=u("__sfx"),
La=u("__shaders"),Oa=u("__subscene"),Sa=u("__tbn"),Ja=u("__textures"),ka=u("__time"),hc=u("__transform"),qa=u("__tsr"),Q=u("__util"),Ha=u("__vec3"),$a=u("__vec4"),Xa=xa.$l,Da=xa.L,Ya=xa.ae,Cb=xa.N,Gb=xa.ka,Ba=null,ib=null,Wb="",ab=null,Xb={},mb=new Float32Array(3),Lb=new Float32Array(4),$c=new Float32Array(4),Fc=Sa.create(),Ua=null,jb=null,bb=0,Hb=!1,$b=null,Gc=["LAMP"],ac=["MESH","CAMERA","EMPTY"],Mb=["BSDF_GLOSSY","BSDF_DIFFUSE","BSDF_TRANSPARENT"],sb=null;a.is_primary_loaded=function(a){return Y.is_primary_loaded(a)};
a.update=function(){Y.WW(Ba)};a.xV=function(a){sb=a};a.MW=function(a,b){if(Ua){jb.style.height=b.toString()+"px";jb.style.width=a.toString()+"px";var c=Math.round(a/2-44);Ua.style.top=Math.round(b/2-44).toString()+"px";Ua.style.left=c.toString()+"px"}};a.load=function(a,c,d,f,h){var k={load_main:{Ib:Y.Fg,Pb:!1,inputs:[],Wb:!1,Xb:500,ic:!1,Zb:b},duplicate_objects:{Ib:Y.$d,Pb:!1,inputs:["load_main"],Wb:!1,Xb:50,ic:!1,Zb:E},load_binaries:{Ib:Y.Fg,Pb:!1,inputs:["load_main"],Wb:!1,Xb:500,ic:!1,Zb:n},wait_for_shaders:{Ib:Y.$d,
Pb:!1,inputs:[],Wb:!1,Xb:50,ic:!0,zk:g},prepare_bindata:{Ib:Y.$d,Pb:!1,inputs:["duplicate_objects","load_binaries"],Wb:!1,Xb:100,ic:!1,Zb:p},prepare_bpy_data:{Ib:Y.$d,Pb:!1,inputs:["duplicate_objects","prepare_bindata"],Wb:!1,Xb:100,ic:!1,Zb:x},process_objects:{Ib:Y.$d,Pb:!1,inputs:["prepare_bpy_data"],Wb:!1,Xb:150,ic:!1,Zb:H},process_scenes:{Ib:Y.$d,Pb:!1,inputs:["process_objects","wait_for_shaders"],Wb:!1,Xb:300,ic:!1,Zb:l},load_smaa_textures:{Ib:Y.Fg,Pb:!1,inputs:["process_scenes"],Wb:!1,Xb:30,
ic:!0,Zb:Z},load_shoremap:{Ib:Y.Fg,Pb:!1,inputs:["process_scenes"],Wb:!1,Xb:30,ic:!0,Zb:pa},load_images:{Ib:Y.Fg,Pb:!0,inputs:["process_scenes"],Wb:!0,Xb:500,ic:!1,Zb:J},update_scenes_nla:{Ib:Y.$d,Pb:!1,inputs:["process_scenes","load_images"],Wb:!1,Xb:50,ic:!1,Zb:A},wait_physics_workers:{Ib:Y.$d,Pb:!1,inputs:["load_shoremap"],Wb:!1,Xb:20,ic:!1,zk:ia},add_physics_objects:{Ib:Y.$d,Pb:!1,inputs:["wait_physics_workers"],Wb:!1,Xb:50,ic:!1,Zb:fa},add_objects:{Ib:Y.$d,Pb:!1,inputs:["add_physics_objects"],
Wb:!1,Xb:600,ic:!1,Zb:ma,zk:aa,Jq:ea,Kq:{Zy:[],MH:0}},init_cube_sky_dynamic_props:{Ib:Y.$d,Pb:!1,inputs:["add_objects","load_images"],Wb:!1,Xb:50,ic:!1,Zb:wa},init_logic_nodes:{Ib:Y.$d,Pb:!1,inputs:["update_scenes_nla","add_objects"],Wb:!1,Xb:50,ic:!1,Zb:da},load_speakers:{Ib:Y.Fg,Pb:!0,inputs:["add_objects"],Wb:!0,Xb:100,ic:!1,Zb:X},mobile_media_start:{Ib:Y.$d,Pb:!1,inputs:["load_images","update_scenes_nla","load_speakers","init_logic_nodes"],Wb:!0,Xb:5,ic:!1,Zb:Ga,zk:Ga},synchronize_media:{Ib:Y.$d,
Pb:!0,inputs:["mobile_media_start"],Wb:!0,Xb:50,ic:!1,Zb:W},prepare_nla:{Ib:Y.$d,Pb:!1,inputs:["mobile_media_start"],Wb:!1,Xb:5,ic:!0,Zb:S},start_nla:{Ib:Y.$d,Pb:!0,inputs:["prepare_nla"],Wb:!1,Xb:5,ic:!0,Zb:ga}},m=Y.pA();m||(m=Y.nF(),Ba={},ib={},Xb={});Ba[m.Nf.length]={};return Y.rF(k,a,c,d,e,f||Gb.iE,Da.do_not_load_resources,h,!1)};a.unload=function(a){var b=Y.pA();if(!b||!b.Nf.length||a&&!Y.hW(b.Nf[a]))Aa.error("Unable to unload data!");else{if(0==a)Aa.log("%cUNLOAD ALL","color: #00a"),Ca.cleanup(),
la.cleanup(),Ra.cleanup(),ta.cleanup(),Pa.cleanup(),Y.cleanup(),Ka.cleanup(),ra.cleanup(),L.cleanup(),Q.cleanup(),za.cleanup(),Fa.cleanup(),La.cleanup(),va.cleanup(),V.cleanup(),Ja.cleanup(),T.cleanup(),Ea.cleanup(),na.cleanup(),Ia.cleanup(),ib=null,Xb={},Ba=ab=null,Hb=!1;else{Aa.log("%cUNLOAD DATA "+a,"color: #00a");la.lU(a);for(var b=L.get_all_objects("ALL",L.DATA_ID_ALL),c=0;c<b.length;c++){var d=b[c];ha.get_object_data_id(d)!=a&&L.Zo(d,!1,!1,!1)}b=L.get_all_objects("ALL",a);for(c=b.length-1;0<=
c;c--)d=b[c],ja(d),L.remove_object(d);b=L.get_all_objects("ALL",L.DATA_ID_ALL);for(c=0;c<b.length;c++)L.Zo(b[c],!0,!0,!0)}oa.cleanup(a);ua()}};a.$H=ja;a.set_debug_resources_root=function(a){Wb=a};a.activate_media=function(){Hb||Da.media_auto_activation||(Ja.play(),Ja.pause(),Ja.reset(),R(ab,L.DATA_ID_ALL,!0),Ra.pause(),Da.HA&&Ra.YH(),Hb=!0)};a.reset=function(){sb=null};a.prefetch=function(a,c,d){var f={load_main:{Ib:Y.Fg,Pb:!1,inputs:[],Wb:!1,Xb:500,ic:!1,Zb:b},load_binaries:{Ib:Y.Fg,Pb:!1,inputs:["load_main"],
Wb:!1,Xb:500,ic:!1,Zb:n},load_images:{Ib:Y.Fg,Pb:!1,inputs:["load_main"],Wb:!1,Xb:500,ic:!1,Zb:J},preload_sounds:{Ib:Y.Fg,Pb:!1,inputs:["load_main"],Wb:!1,Xb:500,ic:!1,Zb:v}},h=Y.pA();h||(h=Y.nF(),Ba={},ib={},Xb={});Ba[h.Nf.length]={};return Y.rF(f,a,c,d,e,!1,Da.do_not_load_resources,!1,!0)};a.unfetch=function(){V.nO()}};b4w.module.__batch=function(a,u){function e(a){a={type:a,Ab:"",id:0,ce:0,Qq:-1,fl:"",Gu:-1,bo:-1,dr:0,vf:0,Hk:[],na:[],Mf:[],rf:[],cc:[],pj:[],Vi:null,Pc:{},zb:null,eb:ba.rS(),he:"",vq:[],ra:null,ff:V.Ek(),ef:!1,tj:!1,Iu:!1,num_vertices:0,num_triangles:0,cw:0,dw:0,Nc:!1,Dv:0,Cj:0,kd:new Float32Array(3),uf:new Float32Array(16),dj:!1,mf:!1,mb:!1,Qa:!1,$h:!1,Fa:!1,yc:!1,xe:!1,bf:!1,Ge:!1,Td:!1,ke:!1,Rd:!1,Yc:!1,Bh:la.Hn,hf:!1,Rg:!1,vj:!1,gg:!1,pg:ea.Qy,qg:0,Jj:0,Kj:0,Zk:b(),be:-1,Od:-1,Jv:!1,Nv:0,Kv:0,
Ov:0,Pv:0,Mv:new Float32Array(3),Lv:new Float32Array(3),Gr:!1,yd:0,Bd:0,de:1,reflect_factor:0,bk:0,Jf:1,parallax_scale:0,ti:0,Jg:1,Wo:0,Wm:0,od:0,ih:0,Ad:new Float32Array(2),He:new Float32Array(3),mh:new Float32Array(3),me:new Float32Array(3),lc:new Float32Array(4),Fh:new Float32Array(2),Qm:null,Jo:null,Rr:null,Qr:null,xb:!1,wireframe_edge_color:ta.create(),Sf:!1,water_dynamic:!1,Dn:!1,zy:!1,Ay:0,By:0,yy:0,Ol:.1,shallow_water_col_fac:0,shore_water_col_fac:0,foam_factor:0,gv:new Float32Array(2),fv:new Float32Array(2),
rr:new Float32Array(2),shallow_water_col:new Float32Array(3),shore_water_col:new Float32Array(3),Qj:null,Sj:!1,Fj:!1,Ru:!1,Ja:null,Tm:0,Yl:null,fs:null,Lh:[],Gf:[],ie:[],Ff:[],tb:U.HG(),Jl:!1,Vd:null,Mg:!0,IG:0,Yo:new Float32Array(3)};a.lc[3]=1;a.Qa=!0;a.Tm=1;a.Zk.Ao=-1;return a}function c(a){var c=e(a.type);c.Ab=a.Ab;c.id=a.id;c.Qq=a.Qq;c.fl=a.fl;c.Gu=a.Gu;c.bo=a.bo;c.dr=a.dr;c.vf=a.vf;c.Hk=[];c.na=a.na.slice();c.Mf=a.Mf.slice();c.rf=a.rf.slice();c.cc=a.cc.slice();c.pj=a.pj.slice();c.Vi=V.W(a.Vi);
c.Pc=V.W(a.Pc);c.zb=a.zb;c.eb=ba.sO(a.eb);c.he=a.he;c.vq=P.oO(a.vq);c.ra=a.ra;c.ef=a.ef;c.tj=a.tj;c.Iu=a.Iu;c.num_vertices=a.num_vertices;c.num_triangles=a.num_triangles;c.cw=a.cw;c.dw=a.dw;c.Dv=a.Dv;c.Cj=a.Cj;c.kd=a.kd;c.uf=a.uf;c.dj=a.dj;c.mf=a.mf;c.mb=a.mb;c.Qa=a.Qa;c.$h=a.$h;c.Fa=a.Fa;c.yc=a.yc;c.xe=a.xe;c.bf=a.bf;c.Ge=a.Ge;c.Td=a.Td;c.ke=a.ke;c.Rd=a.Rd;c.Yc=a.Yc;c.Nc=a.Nc;c.Bh=a.Bh;c.hf=a.hf;c.Rg=a.Rg;c.vj=a.vj;c.gg=a.gg;c.pg=a.pg;c.qg=a.qg;c.Jj=a.Jj;c.Kj=a.Kj;var d=a.Zk,f=b();f.ht=d.ht;f.Re=
d.Re;f.ou=d.ou;f.si=d.si;f.Ao=d.Ao;f.zo=d.zo;f.yo=d.yo;f.Xw=d.Xw;c.Zk=f;c.be=a.be;c.Od=a.Od;c.Jv=a.Jv;c.Nv=a.Nv;c.Kv=a.Kv;c.Ov=a.Ov;c.Pv=a.Pv;ta.copy(a.Mv,c.Mv);ta.copy(a.Lv,c.Lv);c.Gr=a.Gr;c.yd=a.yd;c.Bd=a.Bd;c.de=a.de;c.reflect_factor=a.reflect_factor;c.bk=a.bk;c.Jf=a.Jf;c.parallax_scale=a.parallax_scale;c.ti=a.ti;c.Jg=a.Jg;c.Wo=a.Wo;c.Wm=a.Wm;c.od=a.od;c.ih=a.ih;c.Ad[0]=a.Ad[0];c.Ad[1]=a.Ad[1];ta.copy(a.He,c.He);ta.copy(a.mh,c.mh);ta.copy(a.me,c.me);xa.copy(a.lc,c.lc);c.Fh.set(a.Fh);c.Qm=V.W(a.Qm);
a.Jo&&(c.Jo=new Float32Array(a.Jo),c.Rr=new Float32Array(a.Rr),c.Qr=new Float32Array(a.Qr));c.xb=a.xb;ta.copy(a.wireframe_edge_color,c.wireframe_edge_color);c.Sf=a.Sf;c.water_dynamic=a.water_dynamic;c.Dn=a.Dn;c.zy=a.zy;c.Ay=a.Ay;c.By=a.By;c.yy=a.yy;c.Ol=a.Ol;c.shallow_water_col_fac=a.shallow_water_col_fac;c.shore_water_col_fac=a.shore_water_col_fac;c.foam_factor=a.foam_factor;c.gv.set(a.gv);c.fv.set(a.fv);c.rr.set(a.rr);ta.copy(a.shallow_water_col,c.shallow_water_col);ta.copy(a.shore_water_col,c.shore_water_col);
c.Qj=V.W(a.Qj);c.Sj=a.Sj;c.Fj=a.Fj;c.Ru=a.Ru;a.Ja&&(c.Ja=wa.$E(a.Ja));c.Tm=a.Tm;a.Yl&&(c.Yl=new Float32Array(a.Yl));c.fs=V.W(a.fs);c.Lh=a.Lh.slice();c.Gf=a.Gf.slice();c.ie=a.ie.slice();c.Ff=a.Ff.slice();U.kF(a.tb,c.tb);c.Jl=a.Jl;c.Mg=a.Mg;c.Yo=a.Yo;return c}function b(){return{ht:!1,Re:0,si:0,Ao:0,zo:0,yo:0,Xw:0,ou:1}}function n(a){switch(a.type){case "MAIN":case "PARTICLES":case "LINE":a.Ab=a.mb?a.$h?"XRAY":"BLEND":"OPAQUE";break;case "SHADOW":a.Ab=a.Ge?"CAST":"RECEIVE";break;case "COLOR_ID":a.Ab=
a.$h?"COLOR_ID_XRAY":"COLOR_ID"}}function g(a,b,c){var d=[],h=a.Ha,g=k(c,b,!b.we,!1),l=a.data,m=h.nc,n=Array(m.length),L=Array(m.length),q=[],r=ua.Rb(c,ja.Hb),t=!1;r&&(t=r.Sm.length?!0:!1);for(var p=0;p<g.length;p++)for(var w=g[p],v=0;v<m.length;v++){var ha=m[v];if(!sa(h,v)&&!la.zG(l,v))if("PHYSICS"==w&&a.b4w_collision&&"NAVMESH"==a.game.physics_type)q.push(la.bv(l,v,[],b.gi,{},null));else if(!ha.Bi||t){var y=e(w);"MAIN"==w?n[v]=y:"DEBUG_VIEW"==w&&(L[v]=y);y.Qq=a.b4w_cluster_data.cluster_id;if(A(y,
ha)&&x(y,ha,l)){"SHADOW"==w&&n[v]&&(y.yc=n[v].yc);y.Bh=b.ef||b.xe?la.ut:la.Hn;f(y,b);N(y,a.particle_systems);if("DYNAMIC"==b.type||"COLOR_ID"==y.type)y.fl=ga(y,b,a.uuid);y.vj=a.b4w_do_not_cull;"MAIN"==y.type&&(y.gg=a.b4w_caustics);B(y,"DISABLE_FOG",("COLOR_ID"!=w&&"SHADOW"!=w&&a.b4w_disable_fogging)|0);var z=la.bv(l,v,y.pj,b.gi,y.Pc,y.Vi);!ha.oe||"a_shade_tangs"in z.la[0]||(B(y,"CALC_TBN",1),M(y,"a_tbn"));ha.Bi&&(z=wa.aU(z));X(y);d.push({ya:y,ug:b,Yt:b,Vd:z,bh:[ha.name],le:[a]})}}}if(q.length){y=
e("PHYSICS");y.Ab="NAVMESH";y.fl=ga(y,b,a.uuid);for(var z=la.mJ(q),D=[],p=0;p<m.length;p++)D.push(m[p].name);X(y);d.push({ya:y,ug:b,Yt:b,Vd:z,bh:D,le:[a]})}for(p=0;p<L.length;p++)L[p]&&(L[p].bo=n[p].id,X(L[p]));var u=a.particle_systems;if(0<u.length){for(var ra=!1,E=!1,p=0;p<u.length;p++){var F=u[p],G=F.settings;G.use_render_emitter&&d.length&&(ra=!0);"HAIR"!=G.type||"OBJECT"!=G.render_type&&"GROUP"!=G.render_type&&F.transforms.length||(E=!0);if(ra&&E)break}var H;if(d.length)H=d[0];else{var J=e("TMP");
N(J,u);var ya=la.bv(l,0,J.pj,b.gi,J.Pc,J.Vi);H={ya:J,Vd:ya}}var S=H,oa=S.ya.Pc,T;if(E){var W;if(1<m.length){for(var P={},Na=0;Na<u.length;Na++){var K=u[Na].settings;if("HAIR"==K.type&&("OBJECT"==K.render_type||"GROUP"==K.render_type)){var R=K.b4w_vcol_from_name,U=K.b4w_vcol_to_name;""!==R&&""!==U&&(P[R]=V.W(oa[R]))}}"a_bending_col_main"in oa&&(P.a_bending_col_main=V.W(oa.a_bending_col_main));"a_bending_col_detail"in oa&&(P.a_bending_col_detail=V.W(oa.a_bending_col_detail));W=la.NF(l,[],P)}else W=
S.Vd;T=W}else T=null;for(var O=T,da=a.Ha,Ea=[],Fa=a.particle_systems,ca=a.data,ia=0;ia<Fa.length;ia++){var Z=Fa[ia],Y=Z.settings;if(Y.count)if("EMITTER"==Y.type){if("DYNAMIC"==b.type){var aa=e("PARTICLES");aa.tb.Pe=b.va;aa.tb.qf=b.Db;aa.tb.Qe=b.tc;var xa,pa=Z.settings.material-1;pa>=da.nc.length&&(fa.warn('Wrong material used for rendering particle system "'+Z.name+'"'),pa=0);xa=pa;var ma=da.nc[xa];if(!sa(da,xa)&&("HALO"===Z.settings.render_type&&"HALO"==ma.type&&(aa.Gr=!0),x(aa,ma,ca))){var na=aa,
Ka=da,va=Z.settings;switch(va.b4w_billboard_align){case "VIEW":B(na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW");break;case "XY":B(na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_XY");break;case "YZ":B(na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_YZ");break;case "ZX":B(na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_ZX");break;default:V.K("Wrong billboard align value")}B(na,"BILLBOARD",0);var Va=va.b4w_enable_soft_particles&&ea.ME(Ka,va);B(na,"SOFT_PARTICLES",0<va.b4w_particles_softness&&Va&&I.Ju?1:0);B(na,"SOFT_STRENGTH",ba.X(va.b4w_particles_softness));
ba.ma(na.eb,"WORLD_SPACE","WORLD"==va.b4w_coordinate_system?1:0);aa.xe=!0;aa.vj=a.b4w_do_not_cull;aa.fl=ga(aa,b,da.name+"_"+Y.uuid);wa.ZO(aa,Z,ma);var Ia=wa.SQ(aa,ca,Z,da.A);wa.SW(Ia,aa,Y.count);wa.RW(da);f(aa,da.A);X(aa);Ea.push({ya:aa,ug:b,Yt:b,Vd:Ia,bh:[ma.name],le:[a]})}}}else if("HAIR"==Y.type){var rb=V.Uv(Z.seed),wb=Ga.NE(I.XA)&&!Y.b4w_initial_rand_rotation&&!Y.b4w_hair_billboard,eb=4;wb&&(eb=8);if(Z.transforms.length)var Sb=Z.transforms;else for(var kb=la.hA(O,Y.count,!1,rb),Sb=new Float32Array(kb.length*
eb),cb=0;cb<kb.length;cb++){var lc=.75+.5*V.gh(rb);Sb[cb*eb]=kb[cb][0];Sb[cb*eb+1]=kb[cb][1];Sb[cb*eb+2]=kb[cb][2];Sb[cb*eb+3]=lc;wb&&(Sb[cb*eb+4]=1,Sb[cb*eb+5]=0,Sb[cb*eb+6]=0,Sb[cb*eb+7]=0)}var Nb=ua.Rb(c,ja.Zi)?!0:!1;if("OBJECT"==Y.render_type){var mc=[k(c,Y.dupli_object.Ha.A,!b.we,!0)],Pc=C(a,b,oa,O,[Y.dupli_object],mc,[Sb],Y,Z,Nb,rb,!1);Ea.push.apply(Ea,Pc)}else if("GROUP"==Y.render_type){for(var ad=Y.dupli_group.objects,mc=[],cb=0;cb<ad.length;cb++){var kd=k(c,ad[cb].Ha.A,!b.we,!0);mc.push(kd)}for(var ld=
!1,gd=[],cb=0;cb<ad.length;cb++)gd.push(ad[cb].Ha);if(Y.use_whole_group){for(var Hc,xb=Sb,xc=gd,nc=wb,Ic=eb,yb={},Eb=new Float32Array([0,0,0,1]),tb=0;tb<xb.length;tb+=Ic)for(var nb=0;nb<xc.length;nb++){var Jb=ta.create(),md=Ca.get_scale(xc[nb].A.D),Qc=Ca.get_trans_view(xc[nb].A.D);ta.scale(Qc,md,Jb);var gb=ta.clone([xb[tb],xb[tb+1],xb[tb+2]]);yb[nb]||(yb[nb]=new Float32Array(xb.length));nc&&(yb[nb][tb+4]=Eb[0]=xb[tb+4],yb[nb][tb+5]=Eb[1]=xb[tb+5],yb[nb][tb+6]=Eb[2]=xb[tb+6],yb[nb][tb+7]=Eb[3]=xb[tb+
7],V.MB(Eb,Eb),V.lW(Jb,Eb,Jb));ta.add(gb,Jb,gb);yb[nb][tb]=gb[0];yb[nb][tb+1]=gb[1];yb[nb][tb+2]=gb[2];yb[nb][tb+3]=xb[tb+3]}Hc=yb;ld=!0}else{var Rc;if(Y.use_group_count){for(var bc=Sb,Jc=gd,cc=Y.dupli_weights,bd=rb,Tb=wb,Ob=eb,zb={},yc=[],lb=0;lb<Jc.length;lb++)for(var Kc=Jc[lb],oc=Kc.Gd||Kc.name,Sc=0;Sc<cc.length;Sc++){var Fb=cc[Sc];oc==Fb.name&&yc.push(Fb)}cc.length!=yc.length&&fa.error("dupli weights match failed");for(lb=0;lb<bc.length;lb+=Ob){for(var Kb,zc=yc,pc=[0],qb=0;qb<zc.length;qb++)pc[qb+
1]=pc[qb]+zc[qb].count;for(var Pb=pc[pc.length-1]*V.gh(bd),ub=0,qb=0;qb<pc.length;qb++)if(Pb>=pc[qb]&&Pb<pc[qb+1]){ub=qb;break}Kb=ub;zb[Kb]=zb[Kb]||[];zb[Kb].push(bc[lb],bc[lb+1],bc[lb+2],bc[lb+3]);Tb&&zb[Kb].push(bc[lb+4],bc[lb+5],bc[lb+6],bc[lb+7])}for(Kb in zb)zb[Kb]=new Float32Array(zb[Kb]);Rc=zb}else{for(var Bb=Sb,Ta=rb,qc=wb,Qb=eb,dc=gd.length,db={},Ub=0;Ub<Bb.length;Ub+=Qb){var Ac=Math.floor(dc*V.gh(Ta));db[Ac]=db[Ac]||[];db[Ac].push(Bb[Ub],Bb[Ub+1],Bb[Ub+2],Bb[Ub+3]);qc&&db[Ac].push(Bb[Ub+
4],Bb[Ub+5],Bb[Ub+6],Bb[Ub+7])}for(Ac in db)db[Ac]=new Float32Array(db[Ac]);Rc=db}Hc=Rc}Pc=C(a,b,oa,O,ad,mc,Hc,Y,Z,Nb,rb,ld);Ea.push.apply(Ea,Pc)}"INSTANCE"==Y.b4w_wind_bend_inheritance&&da.A.Me&&fa.warn('Emitter object "'+da.name+"\" has a particle system with wind bending inheritance from the particle instance. Wind bending on the emitter isn't disabled. Expect unforeseen behavior.")}else V.K("Unknown particle settings type")}ra?d.push.apply(d,Ea):d=Ea}return d}function p(a){for(var b=[],c=[],d=
{},e=0;e<a.length;e++){var f=a[e].ya,h=null;if(f.id in d){var g=d[f.id],k=c[g].ya;m(f,function(a){m(k,function(b){V.XV(a,b)&&1!=a.IG&&(h=c[g])})});if(!h){do f.id++;while(d[f.id])}}h||(h={ya:f,QH:[],kE:[],oJ:[],le:[],iI:[],bh:[]},d[f.id]=c.length,c.push(h));if(a[e].Vd&&a[e].Vd.Wa){h.QH.push(a[e].ug);h.kE.push(a[e].Yt);h.oJ.push(a[e].Vd);for(var l=0;l<a[e].le.length;l++)f=a[e].le[l],-1==h.iI.indexOf(f.uuid)&&(h.le.push(f),h.iI.push(f.uuid));for(l=0;l<a[e].bh.length;l++)f=a[e].bh[l],-1==h.bh.indexOf(f)&&
h.bh.push(f)}h.bh.sort()}for(e=0;e<c.length;e++){var f=c[e].ya,n=c[e].QH,L=c[e].kE,q=c[e].oJ;a="DYNAMIC"==L[0].type||"COLOR_ID"==f.type?L[0]:ea.zz(L[0]);if("STATIC"==a.type&&"COLOR_ID"!=f.type)for(l=0;l<n.length;l++){var r=n[l],p=L[l],d=q[l],t=Ca.identity(oa);r.Kg&&!r.zq?(r=Ca.uo(r.D,Na),Ca.set_transcale(r,t)):Ca.copy(r.D,t);p.Vk?d.Xe||(p.Kg?la.$V(d,t):la.wC(d,t)):la.wC(d,t);if(p.Vk)B(f,"AU_QUALIFIER","GLSL_IN");else if(1<c[e].le.length){r={};if(p.Me||p.Kg)r.au_center_pos=[t[0],t[1],t[2]];p.Me&&(r.au_wind_bending_amp=
[p.Tf],r.au_wind_bending_freq=[p.Uf],r.au_detail_bending_amp=[p.xf],r.au_detail_bending_freq=[p.yf],r.au_branch_bending_amp=[p.sf]);la.ZV(d,r);B(f,"AU_QUALIFIER","GLSL_IN")}else a.ju.set(t.subarray(0,3)),B(f,"AU_QUALIFIER","uniform")}if(0==q.length)d=la.Zg(V.Zs("%empty"));else if(1==q.length)d=q[0];else{d=[];for(l=0;l<q.length;l++)la.AS(q[l])||d.push(l);if(d.length<q.length)for(l=0;l<d.length;l++)la.Qx(q[d[l]]);d=la.mJ(q)}if("STATIC"==a.type){if("COLOR_ID"!=f.type){q=[];for(l=0;l<c[e].le.length;l++)U.bA(c[e].le[l].Ha.A.lE,
q);U.gz(q,0,q.length,a.wh);U.mi(a.wh,a.va);a.xk=U.vu(V.f32(q),!0);U.Yn(a.xk,a.Db);a.ue=U.xu(a.xk);U.Dk(a.ue,a.tc)}a.Ej&&(l=c[e].le[0].b4w_cluster_data,l.cluster_center?a.Xr.set(l.cluster_center):a.Xr.set(a.ue.U))}"PARTICLES"!=f.type&&(l=d.$c,a.Kg?(U.mi(a.va,f.tb.Pe),U.Yn(a.Db,f.tb.qf),U.Dk(a.tc,f.tb.Qe),f.Jl=!1):(U.mi(l.va,f.tb.Pe),U.Yn(l.Db,f.tb.qf),a.tc.ab<l.tc.ab?"STATIC"==a.type&&"COLOR_ID"!=f.type?U.Dk(a.ue,f.tb.Qe):U.Dk(a.tc,f.tb.Qe):U.Dk(l.tc,f.tb.Qe),f.Jl=U.LG(f.tb.qf,f.tb.Qe)));b.push({ya:f,
A:a,Vd:d,bh:c[e].bh,le:c[e].le})}return b}function k(a,b,c,d){var e=[];d||(b.rl&&ua.Rb(a,ja.Ne)||b.Xc&&ua.Rb(a,ja.rh))&&e.push("COLOR_ID");c&&(e.push("MAIN"),e.push("NODES_GLOW"),ua.Rb(a,ja.qh)&&e.push("DEBUG_VIEW"),ua.Rb(a,ja.Yf)&&e.push("SHADOW"),ua.Rb(a,ja.Zi)&&e.push("GRASS_MAP"));e.push("PHYSICS");if(b.Ge||b.Rd)for(a=null,b.Ge&&(a=["MAIN","NODES_GLOW","COLOR_ID","PHYSICS","DEBUG_VIEW"]),b.Rd&&(b=["COLOR_ID","PHYSICS","SHADOW","DEBUG_VIEW"],a?a=V.fN(a,b):a=b),b=a,a=0;a<b.length;a++)c=e.indexOf(b[a]),
-1!==c&&e.splice(c,1);return e}function x(a,b,c){var e;switch(a.type){case "MAIN":if(b.we)e=!1;else{if(b.Eg&&"HALO"!=b.type)z(a,b,c,"MAIN");else{d(a,b);a.Fa=b.Fa;a.$h=b.Uj&&"OPAQUE"!=b.jb&&"CLIP"!=b.jb&&"ALPHA_ANTIALIASING"!=b.jb;a.od=b.od;a.mh.set([1,1,1]);var f=b.Cg;a.lc.set(b.lc);a.lc[3]=b.alpha;if(b.Bi){R(a,"lens_flares.glslv","lens_flares.glslf");M(a,"a_position");M(a,"a_texcoord");var g=ca.ze(f[0]),k=f[0].texture;O(a,g,"u_sampler",k.name)}else{R(a,"main.glslv","main_stack.glslf");b.yc||(c=aa.Gz(b.Jc,
{yc:b.yc,Ue:b.Ue,cf:b.cf,oe:b.oe}),a.eb.$e=aa.Uq(c));var l=t("use_map_color_diffuse",f);e=t("use_map_color_spec",f);var m=t("use_map_normal",f),n=t("use_map_mirror",f),r=t("use_stencil",f);c=l[0];e=e[0];m=m[0];n=n[0];l=l[1];f=r[0]&&t("use_rgb_to_intensity",f)[0];if(c){k=c.texture;switch(c.blend_type){case "MIX":B(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":B(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}g=ca.ze(c);O(a,g,"u_colormap0",k.name);a.ti=c.diffuse_color_factor;
c.use_map_alpha?a.Jg=c.alpha_factor:a.Jg=0;a.mh.set(c.scale)}r=c&&c==e;e&&(r||(k=e.texture,g=ca.ze(e),O(a,g,"u_specmap0",k.name)),a.bk=e.specular_color_factor);if(m&&(k=m.texture,M(a,"a_tbn"),g=ca.ze(m),O(a,g,"u_normalmap0",k.name),a.Wo=m.normal_factor,k.b4w_use_map_parallax&&I.Sw)){var g=ba.X(k.b4w_parallax_steps),L=ba.X(k.b4w_parallax_lod_dist);B(a,"PARALLAX",1);B(a,"PARALLAX_STEPS",g);B(a,"PARALLAX_LOD_DIST",L);a.parallax_scale=k.b4w_parallax_scale}n&&(k=n.texture,g=ca.ze(n),O(a,g,"u_mirrormap",
k.name),a.Wm=n.mirror_factor);if(n=c&&l&&f?1:0)g=ca.ze(l),k=l.texture,O(a,g,"u_colormap1",k.name),g=ca.ze(f),k=f.texture,O(a,g,"u_stencil0",k.name);(k=c||e||m)&&a.mh.set(k.scale);B(a,"TEXTURE_SPEC",void 0==e?0:1);B(a,"ALPHA_AS_SPEC",r?1:0);B(a,"TEXTURE_STENCIL_ALPHA_MASK",n);M(a,"a_position");M(a,"a_tbn");(c||e||m)&&M(a,"a_texcoord");if(b.ha.Di){a.Sf=!0;a.water_dynamic=b.ha.is_dynamic;b.ha.shore_smoothing&&!a.mb?(fa.warn('Material: "'+b.name+'" is opaque.',"Disabling water shore smoothing."),a.Dn=
!1):a.Dn="REFLECT"!=a.Ab?b.ha.shore_smoothing:!1;R(a,"water.glslv","water.glslf");n=aa.Gz(b.Jc,{yc:!1,Ue:b.Ue,cf:b.cf,oe:b.oe});a.eb.$e=aa.Uq(n);M(a,"a_position");I.qK?(M(a,"a_polyindex"),a.Qa=!0,ta.set(0,0,0,a.wireframe_edge_color),pa.rA()?B(a,"DEBUG_WIREFRAME",1):B(a,"DEBUG_WIREFRAME",2)):B(a,"DEBUG_WIREFRAME",0);r=b.Cg;n=t("use_map_normal",r);g=t("use_map_mirror",r)[0];n.length&&(k=n[0].texture,O(a,ca.ze(n[0]),"u_normalmap0",k.name),a.Ol=b.ha.norm_uv_velocity);B(a,"NUM_NORMALMAPS",n.length);a.Qj=
Array(n.length);for(k=0;k<n.length;k++)a.Qj[k]=new Float32Array(2),a.Qj[k].set([n[k].scale[0],n[k].scale[1]]);g&&(L=ca.ze(g),k=g.texture,O(a,L,"u_mirrormap",k.name),a.Wm=g.mirror_factor);g=null;if(I.po)for(k=0;k<r.length;k++){var p=r[k];if(!0===p.texture.b4w_water_foam){g=p;break}}g&&(B(a,"FOAM",1),L=ca.ze(g),k=g.texture,O(a,L,"u_foam",k.name),a.foam_factor=b.ha.foam_factor,a.gv.set(k.b4w_foam_uv_freq),a.fv.set(k.b4w_foam_uv_magnitude),a.rr[0]=g.scale[0],a.rr[1]=g.scale[1]);for(k=0;k<r.length;k++)if(p=
r[k],!0===p.texture.b4w_shore_dist_map){var y=p;break}y&&I.Lt&&(r=ca.ze(y),k=y.texture,O(a,r,"u_shore_dist_map",k.name),B(a,"SHORE_PARAMS",1),y=p.texture.b4w_shore_boundings,B(a,"MAX_SHORE_DIST",ba.X(p.texture.b4w_max_shore_dist)),B(a,"SHORE_MAP_SIZE_X",ba.X(y[0]-y[1])),B(a,"SHORE_MAP_SIZE_Y",ba.X(y[2]-y[3])),B(a,"SHORE_MAP_CENTER_X",ba.X((y[0]+y[1])/2)),B(a,"SHORE_MAP_CENTER_Y",ba.X((y[2]+y[3])/2)));b.ha.Yv?(B(a,"GENERATED_MESH",1),a.zy=!0,a.Ay=b.ha.Iw,a.By=b.ha.Jw,a.yy=b.ha.Lu):(M(a,"a_tbn"),(g||
n.length)&&M(a,"a_texcoord"),B(a,"GENERATED_MESH",0));if(b.ha.is_dynamic){var p=ba.X(b.ha.dst_noise_scale0),y=ba.X(b.ha.dst_noise_scale1),n=ba.X(b.ha.dst_noise_freq0),r=ba.X(b.ha.dst_noise_freq1),k=ba.X(b.ha.dir_min_shore_fac),g=ba.X(b.ha.dir_freq),L=ba.X(b.ha.dir_noise_scale),x=ba.X(b.ha.dir_noise_freq),D=ba.X(b.ha.dir_min_noise_fac),C=ba.X(b.ha.dst_min_fac),ha=ba.X(b.ha.waves_hor_fac);B(a,"DST_NOISE_SCALE_0",p);B(a,"DST_NOISE_SCALE_1",y);B(a,"DST_NOISE_FREQ_0",n);B(a,"DST_NOISE_FREQ_1",r);B(a,"DIR_MIN_SHR_FAC",
k);B(a,"DIR_FREQ",g);B(a,"DIR_NOISE_SCALE",L);B(a,"DIR_NOISE_FREQ",x);B(a,"DIR_MIN_NOISE_FAC",D);B(a,"DST_MIN_FAC",C);B(a,"WAVES_HOR_FAC",ha)}G(a,b);H(a,b);a.shallow_water_col.set(b.ha.ox);a.shore_water_col.set(b.ha.rx);a.shallow_water_col_fac=b.ha.px;a.shore_water_col_fac=b.ha.sx;B(a,"ABSORB",ba.X(b.ha.absorb_factor));B(a,"SSS_STRENGTH",ba.X(b.ha.sss_strength));B(a,"SSS_WIDTH",ba.X(b.ha.sss_width))}"HALO"===b.type&&(R(a,"halo.glslv","halo.glslf"),v(a,b),a.pj=["a_position"]);b.oe&&(B(a,"USE_TBN_SHADING",
1),M(a,"a_shade_tangs"));B(a,"TEXCOORD",0);B(a,"NORMAL_TEXCOORD",0);c&&h(a,c,"TEXTURE_COLOR0_CO");l&&h(a,l,"TEXTURE_COLOR1_CO");f&&h(a,f,"TEXTURE_STENCIL_ALPHA_MASK_CO");e&&h(a,e,"TEXTURE_SPEC_CO");m&&h(a,m,"TEXTURE_NORM_CO");B(a,"SHADELESS",b.yc?1:0);a.yc=b.yc}B(a,"ALPHA","OPAQUE"===b.jb?0:1);B(a,"ALPHA_CLIP","CLIP"===b.jb?1:0);B(a,"DOUBLE_SIDED_LIGHTING",b.Np?1:0);b.it?(B(a,"VERTEX_COLOR",1),M(a,"a_color")):B(a,"VERTEX_COLOR",0);a.yd=b.yd;a.de=b.de;a.Bd=b.Bd;a.me.set(b.me);a.Jf=b.Jf;G(a,b);H(a,
b);b.Or?B(a,"WETTABLE",1):B(a,"WETTABLE",0);q(a,b);b.Pm&&!a.mb?(fa.warn('Material "'+b.name+'" is not blend. Disabling refractions.'),a.Sj=!1):a.Sj=b.Pm;a.ih=b.ih}e=!0}break;case "NODES_GLOW":e=z(a,b,c,"GLOW");break;case "SHADOW":if(b.Bi||b.ha.Di||b.we||"HALO"==b.type)e=!1;else if(d(a,b),a.Fa=b.Fa,a.mb)e=!1;else{!b.Eg||"CLIP"!=b.jb&&"ALPHA_ANTIALIASING"!=b.jb?R(a,"shadow.glslv","shadow.glslf"):z(a,b,c,"SHADOW");a.Qa=a.Qa&&!(I.hp&&"ALPHA_ANTIALIASING"==b.jb);xa.set(0,0,0,b.alpha,a.lc);M(a,"a_position");
M(a,"a_tbn");B(a,"ALPHA","OPAQUE"===b.jb?0:1);a.mh.set([1,1,1]);c=t("use_map_color_diffuse",b.Cg)[0];if(!c||"CLIP"!=b.jb&&"ALPHA_ANTIALIASING"!=b.jb)B(a,"TEXTURE_COLOR",0);else{switch(c.blend_type){case "MIX":B(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":B(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.mh.set(c.scale);B(a,"TEXTURE_COLOR",1);M(a,"a_texcoord");b=ca.ze(c);c=c.texture;"IMAGE"!=b.source&&"ENVIRONMENT_MAP"!=b.source&&"CANVAS"!=b.source&&"NONE"!=b.source||
O(a,b,"u_colormap0",c.name)}e=!0}break;case "PHYSICS":c=b.pd;b=b.ha;c.Mp?(a.Ui=c.Ui,a.Jb=c.Jb,a.ki=c.ki,a.ji=c.ji,a.li=c.li,a.Sg=c.Sg,a.Og=c.Og,e=!0):b.Di?(a.Sf=!0,a.xX=b.is_dynamic,a.dst_noise_scale0=b.dst_noise_scale0,a.dst_noise_scale1=b.dst_noise_scale1,a.dst_noise_freq0=b.dst_noise_freq0,a.dst_noise_freq1=b.dst_noise_freq1,a.dir_min_shore_fac=b.dir_min_shore_fac,a.dir_freq=b.dir_freq,a.dir_noise_scale=b.dir_noise_scale,a.dir_noise_freq=b.dir_noise_freq,a.dir_min_noise_fac=b.dir_min_noise_fac,
a.dst_min_fac=b.dst_min_fac,a.waves_hor_fac=b.waves_hor_fac,e=!0):e=!1;break;case "COLOR_ID":if(b.Bi||"HALO"==b.type)e=!1;else{m=e=b.jb;"ALPHA_ANTIALIASING"==m&&(m="CLIP",b.jb="CLIP");d(a,b);a.Fa=b.Fa;a.hf=!1;a.Qa=!0;a.mb=!1;a.$h=b.Uj&&"OPAQUE"!=m&&"CLIP"!=m;b.Eg&&"CLIP"==m?z(a,b,c,"COLOR_ID"):R(a,"color_id.glslv","color_id.glslf");xa.set(0,0,0,b.alpha,a.lc);M(a,"a_position");B(a,"ALPHA","OPAQUE"===m?0:1);a.mh.set([1,1,1]);c=t("use_map_color_diffuse",b.Cg)[0];B(a,"ALPHA_CLIP","CLIP"===m?1:0);if(c&&
"CLIP"==m){switch(c.blend_type){case "MIX":B(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":B(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.mh.set(c.scale);B(a,"TEXTURE_COLOR",1);M(a,"a_texcoord");m=ca.ze(c);c=c.texture;"IMAGE"!=m.source&&"ENVIRONMENT_MAP"!=m.source&&"CANVAS"!=m.source&&"NONE"!=m.source||O(a,m,"u_colormap0",c.name)}else B(a,"TEXTURE_COLOR",0);b.jb=e;e=!0}break;case "GRASS_MAP":!b.Ri.Go||b.we?e=!1:(d(a,b),a.Fa=b.Fa,a.mb=!1,a.hf=!1,a.Qa=!0,R(a,"grass_map.glslv",
"grass_map.glslf"),M(a,"a_position"),c=b.Ri.mr?b.Ri.mr:null,b=b.Ri.lr?b.Ri.lr:null,a.Pc.a_grass_size={Em:!0,src:[]},c?(a.Pc.a_grass_size.src.push({name:c,$g:4}),B(a,"DYNAMIC_GRASS_SIZE",1)):B(a,"DYNAMIC_GRASS_SIZE",0),a.Pc.a_grass_color={Em:!0,src:[]},b?(a.Pc.a_grass_color.src.push({name:b,$g:7}),B(a,"DYNAMIC_GRASS_COLOR",1)):B(a,"DYNAMIC_GRASS_COLOR",0),B(a,"GRASS_TEXTURE_SIZE",ba.X(Va.Fr)),e=!0);break;case "DEBUG_VIEW":e=w(a,b);break;case "PARTICLES":a:if(b.we)e=!1;else{e=b.Cg;if(a.Gr)R(a,"particle_system.glslv",
"particle_system_stack.glslf"),B(a,"HALO_PARTICLES",1),v(a,b);else{m={yc:!1,Ue:b.Ue,cf:b.cf,oe:b.oe};if(b.Eg){R(a,"particle_system.glslv","particle_system.glslf");z(a,b,c,"PARTICLES");e=!0;break a}R(a,"particle_system.glslv","particle_system_stack.glslf");c=aa.Gz(b.Jc,m);a.eb.$e=aa.Uq(c);if(c=t("use_map_color_diffuse",e)[0]){B(a,"TEXTURE_COLOR",1);switch(c.blend_type){case "MIX":B(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":B(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.ti=
c.diffuse_color_factor;c.use_map_alpha?a.Jg=c.alpha_factor:a.Jg=0;O(a,ca.ze(c),"default"+String(a.na.length),c.texture.name)}}a.lc.set(b.lc);a.lc[3]=b.alpha;a.yd=b.yd;a.de=b.de;a.Bd=b.Bd;a.me.set(b.me);a.Jf=b.Jf;M(a,"a_position");M(a,"a_tbn");B(a,"ALPHA","OPAQUE"===b.jb?0:1);B(a,"ALPHA_CLIP","CLIP"===b.jb?1:0);B(a,"PARTICLES_SHADELESS",b.yc?1:0);G(a,b);H(a,b);d(a,b);a.Fa=b.Fa;a.$h=b.Uj&&"OPAQUE"!=b.jb&&"CLIP"!=b.jb&&"ALPHA_ANTIALIASING"!=b.jb;a.od=b.od;e=!0}break;default:V.K("Wrong batch type: "+
a.type)}return e}function v(a,b){var c=b.xo;B(a,"NUM_RINGS",c.ex);B(a,"NUM_LINES",c.jw);B(a,"NUM_STARS",c.Nx);B(a,"SKY_STARS",c.aw?1:0);a.Nv=c.size;a.Kv=c.Hr/20;a.Mv.set(c.fx);a.Lv.set(c.lw);a.Ov=1/c.Ox;a.Pv=c.Px;a.Jv=!0}function h(a,b,c){switch(b.texture_coords){case "UV":case "ORCO":B(a,c,"TEXTURE_COORDS_UV_ORCO");B(a,"TEXCOORD",1);break;case "NORMAL":B(a,c,"TEXTURE_COORDS_NORMAL");B(a,"NORMAL_TEXCOORD",1);break;default:B(a,c,"TEXTURE_COORDS_NONE")}}function d(a,b){switch(b.jb){case "ALPHA_ANTIALIASING":a.mb=
!1;a.hf=!1;a.Qa=!0;a.dj=!1;a.mf=!0;break;case "ALPHA_SORT":a.mb=!0;a.hf=!0;a.Qa=!0;a.dj=!1;a.mf=!1;break;case "ALPHA":a.mb=!0;a.hf=!1;a.Qa=!0;a.dj=!1;a.mf=!1;break;case "CLIP":a.mb=!1;a.hf=!1;a.Qa=!0;a.dj=!0;a.mf=!1;break;case "ADD":a.mb=!0;a.hf=!1;a.Qa=!1;a.dj=!1;a.mf=!1;break;case "OPAQUE":a.mb=!1;a.hf=!1;a.Qa=!0;a.dj=!1;a.mf=!1;break;default:V.K("Unknown alpha blend mode: "+b.jb)}}function t(a,b){for(var c=[],d=b.length,e=0;e<d;e++){var f=b[e];1==f[a]&&f.texture&&f.texture.J&&c.push(f)}return c}
function q(a,b){var c=b.hn;a.reflect_factor=c.reflect_factor;a.Fh[0]=c.fresnel;a.Fh[1]=1-c.fresnel_factor/5}function G(a,b){var c,d=0;switch(b.cf){case "PHONG":case "COOKTORR":c=b.nn;break;case "WARDISO":c=b.Ix;break;case "TOON":c=b.Jx;d=b.Kx;break;case "BLINN":c=b.Hx;d=b.nn;break;default:fa.error("unsupported specular shader: "+b.cf+' (material "'+b.name+'")'),c=b.nn}a.He[0]=b.Ms;a.He[1]=c;a.He[2]=d}function H(a,b){switch(b.Ue){case "LAMBERT":a.Ad[0]=0;a.Ad[1]=0;break;case "OREN_NAYAR":a.Ad[0]=b.gx;
a.Ad[1]=0;break;case "FRESNEL":a.Ad[0]=b.Mu;a.Ad[1]=b.Nu;break;case "MINNAERT":a.Ad[0]=b.Fu;a.Ad[1]=0;break;case "TOON":a.Ad[0]=b.Ou;a.Ad[1]=b.Pu;break;default:fa.error("unsupported diffuse shader: "+b.Ue+' (material "'+b.name+'")'),a.Ad[0]=0,a.Ad[1]=0}}function z(a,b,c,e){if(!b.Eg||b.we)return!1;var f;switch(e){case "MAIN":R(a,"main.glslv","main.glslf");f=!1;break;case "GLOW":R(a,"main.glslv","main.glslf");f=!0;break;case "SHADOW":R(a,"shadow.glslv","shadow.glslf");f=!1;break;case "COLOR_ID":R(a,
"color_id.glslv","color_id.glslf"),f=!1}c=aa.eF(b.Nd,b.Jc,e,{XC:c.active_vcol_name,WC:c.active_uv_name});if(!c.wa)return fa.error('Failed to create node graph for material "'+b.name+'", disable nodes'),E(a,b),!0;a.he=c.id;a.xb=!0;B(a,"NODES",1);B(a,"DOUBLE_SIDED_LIGHTING",b.Np?1:0);M(a,"a_position");b.ny&&M(a,"a_orco_tex_coord");d(a,b);a.Fa=b.Fa;a.od=b.od;f?(B(a,"ALPHA",1),B(a,"ALPHA_CLIP",0)):(B(a,"ALPHA","OPAQUE"===b.jb?0:1),B(a,"ALPHA_CLIP","CLIP"===b.jb?1:0));a.$h=b.Uj&&"OPAQUE"!=b.jb&&"CLIP"!=
b.jb&&"ALPHA_ANTIALIASING"!=b.jb;a.Bd=b.Bd;a.yd=b.yd;q(a,b);b.Or?B(a,"WETTABLE",1):B(a,"WETTABLE",0);var h=null,g=!1;Z.fa(c.wa,function(c,d){switch(d.type){case "UVMAP":case "TEX_COORD_UV":case "GEOMETRY_UV":case "UV_MERGED":var e=d.data.name,f=d.data.value;a.Vi||(a.Vi={});a.Vi[f]=e;break;case "GEOMETRY_VC":case "GEOMETRY_VC1":case "GEOMETRY_VC2":case "GEOMETRY_VC3":e=d.data.name;a.Pc[e]={Em:!0,src:[{name:d.data.value}]};f=0;if("GEOMETRY_VC"==d.type)f=7;else for(var k=0;k<d.outputs.length;k++){var l=
"RGB".indexOf(d.outputs[k].identifier);-1<l&&(f|=1<<2-l)}a.Pc[e].src[0].$g=f;break;case "TEX_COORD_NO":case "TEX_COORD_RE":case "GEOMETRY_NO":case "FRESNEL":case "LAYER_WEIGHT":M(a,"a_tbn");break;case "TEX_COORD_OB":B(a,"USE_MODEL_TSR_INVERSE",1);break;case "TEX_COORD_WI":B(a,"USE_POSITION_CLIP",1);break;case "MATERIAL_BEGIN":d.data.value.oe&&(B(a,"USE_TBN_SHADING",1),"PARTICLES"!=a.type&&M(a,"a_shade_tangs"));M(a,"a_tbn");g=!0;break;case "BSDF_BEGIN":g=!0;M(a,"a_tbn");break;case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_CUBE":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":e=
d.data.name;f=d.data.Dq;k=d.data.value;O(a,k,e,f);break;case "TEXTURE_NORMAL":case "B4W_PARALLAX":B(a,"CALC_TBN_SPACE",1);M(a,"a_tbn");d.data&&(e=d.data.name,f=d.data.Dq,k=d.data.value,O(a,k,e,f));break;case "NORMAL_MAP":M(a,"a_tbn");switch(Number(d.Ya[0][1])){case aa.qL:B(a,"CALC_TBN_SPACE",1);break;case aa.pL:case aa.oL:B(a,"USE_MODEL_TSR",1)}break;case "LAMP":d.data&&(a.Qm=d.data);break;case "B4W_REFRACTION":a.mb?a.Sj=!0:(a.Sj=!1,fa.warn('Material "'+b.name+'" is not blend. Disabling refractions.'));
B(a,"USE_POSITION_CLIP",1);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":h||(h=d.data.Oa);break;case "PARTICLE_INFO":"PARTICLES"==a.type&&d.data&&(a.fs=d.data);break;case "VECT_TRANSFORM":switch(Number(d.Ya[1][1])){case aa.PD:B(a,"USE_MODEL_TSR_INVERSE",1);break;case aa.OD:B(a,"USE_VIEW_TSR",1);break;case aa.ND:B(a,"USE_MODEL_TSR",1);break;case aa.MD:B(a,"USE_MODEL_TSR",1);B(a,"USE_VIEW_TSR",1);break;case aa.LD:B(a,"USE_VIEW_TSR_INVERSE",1);break;case aa.KD:B(a,"USE_MODEL_TSR_INVERSE",1),
B(a,"USE_VIEW_TSR_INVERSE",1)}break;case "OBJECT_INFO":B(a,"USE_MODEL_TSR",1);a.Yo[1]=b.Li;a.Yo[2]=Math.random();break;case "B4W_VECTOR_VIEW":case "GEOMETRY_VW":B(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":B(a,"USE_VIEW_TSR_INVERSE",1);break;case "BUMP":case "DISPLACEMENT_BUMP":M(a,"a_tbn");pa.rA()?B(a,"USE_DERIVATIVES_EXT",1):fa.warn('"OES_standard_derivatives" extension is not available. Disabling the BUMP node in the "'+b.name+'" material.');break;case "BSDF_TRANSPARENT":a.mb=!0;a.Sj=!0;break;
case "BSDF_GLOSSY":case "BSDF_DIFFUSE":B(a,"USE_BSDF_SKY_DIM",1),pa.qG()&&B(a,"USE_TEXTURE_LOD_EXT",1)}});h&&O(a,h,"u_nodes_texture");g||(a.yc=!0);f=a.eb.$e=aa.Uq(c.wa);F(c.wa,a);c=a.Gf;e=a.Ff;for(var k=0;k<f.length;k++){var l=f[k];switch(l.id){case "VALUE":var m=l.$o[0];if(m)for(var n=0;n<c.length;n+=3)if(c[n]==m){l.Ya.push(["VALUE_ROW_IND",c[n+1]]);l.Ya.push(["VALUE_COL_IND",c[n+2]]);break}break;case "RGB":if(m=l.$o[0])for(n=0;n<e.length;n+=2)if(e[n]==m){l.Ya.push(["RGB_IND",e[n+1]]);break}}}B(a,
"NUM_VALUES",a.Lh.length/4);B(a,"NUM_RGBS",a.ie.length);return!0}function l(a,b){var c=b.J.Ql;if(""!=c.he){a.xb=!0;a.he=c.he;var d=aa.xv(c.he).wa;if(d){var e=null;Z.fa(d,function(b,c){switch(c.type){case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":O(a,c.data.value,c.data.name,c.data.Dq);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":e||(e=c.data.Oa);break;case "VECT_TRANSFORM":switch(Number(c.Ya[1][1])){case aa.PD:B(a,"USE_MODEL_TSR_INVERSE",
1);break;case aa.OD:B(a,"USE_VIEW_TSR",1);break;case aa.ND:B(a,"USE_MODEL_TSR",1);break;case aa.MD:B(a,"USE_MODEL_TSR",1);B(a,"USE_VIEW_TSR",1);break;case aa.LD:B(a,"USE_VIEW_TSR_INVERSE",1);break;case aa.KD:B(a,"USE_MODEL_TSR_INVERSE",1),B(a,"USE_VIEW_TSR_INVERSE",1)}break;case "B4W_VECTOR_VIEW":B(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":B(a,"USE_VIEW_TSR_INVERSE",1)}});e&&O(a,e,"u_nodes_texture");c=a.eb.$e=aa.Uq(d);F(d,a);for(var d=a.Gf,f=a.Ff,h=0;h<c.length;h++){var g=c[h];switch(g.id){case "VALUE":var k=
g.$o[0];if(k)for(var l=0;l<d.length;l+=3)if(d[l]==k){g.Ya.push(["VALUE_ROW_IND",d[l+1]]);g.Ya.push(["VALUE_COL_IND",d[l+2]]);break}break;case "RGB":if(k=g.$o[0])for(l=0;l<f.length;l+=2)if(f[l]==k){g.Ya.push(["RGB_IND",f[l+1]]);break}}}B(a,"NUM_VALUES",a.Lh.length/4);B(a,"NUM_RGBS",a.ie.length)}else fa.error('Failed to create node graph for world "'+b.world.name+'", disable nodes'),E(a,b.world.name)}}function F(a,b){var c=[],d=[],e=[],f=[];r(a,c,d,e,f);b.Lh=c;b.Gf=d;b.ie=e;b.Ff=f}function r(a,b,c,
d,e){Z.fa(a,function(a,f){if("VALUE"==f.type){var h=""+f.name;b.push(f.outputs[0].Ia);var g=c.length/3;c.push(h,parseInt(g/4),parseInt(g%4))}else"RGB"==f.type&&(h=""+f.name,g=f.outputs[0].Ia.slice(0,3),d.push(g[0],g[1],g[2]),e.push(h,e.length/2))});a=b.length+4-b.length%4;for(var f=b.length;f<a;f++)b.push(0)}function E(a,b){switch(a.type){case "SHADOW":R(a,"shadow.glslv","shadow.glslf");break;case "COLOR_ID":R(a,"color_id.glslv","color_id.glslf");break;default:R(a,"main.glslv","main_stack.glslf")}B(a,
"SHADELESS",1);M(a,"a_position");M(a,"a_tbn");xa.set(1,0,1,1,a.lc);b&&(B(a,"ALPHA","OPAQUE"===b.jb?0:1),B(a,"ALPHA_CLIP","CLIP"===b.jb?1:0),B(a,"VERTEX_COLOR",0),a.od=b.od,d(a,b),a.Fa=b.Fa);return!0}function w(a,b){if(b&&(b.Bi||b.we))return!1;R(a,"debug_view.glslv","debug_view.glslf");M(a,"a_position");M(a,"a_tbn");M(a,"a_polyindex");a.Qa=!0;ta.set(0,0,0,a.wireframe_edge_color);return!0}function f(a,b){a.ce=b.ce;if("PHYSICS"!==a.type){"DYNAMIC"==b.type||"COLOR_ID"==a.type?(b.Vk?B(a,"AU_QUALIFIER",
"GLSL_IN"):B(a,"AU_QUALIFIER","uniform"),B(a,"STATIC_BATCH",0)):(B(a,"AU_QUALIFIER","GLSL_IN"),B(a,"STATIC_BATCH",1));"DEBUG_VIEW"==a.type&&(pa.rA()?B(a,"WIREFRAME_QUALITY",1):B(a,"WIREFRAME_QUALITY",0),a.tj?(B(a,"DEBUG_SPHERE",1),a.Iu?B(a,"DEBUG_SPHERE_DYNAMIC",1):B(a,"DEBUG_SPHERE_DYNAMIC",0)):B(a,"DEBUG_SPHERE",0),B(a,"ALPHA",1));b.ef&&"PARTICLES"!=a.type&&!b.Vk&&(a.ef=b.ef);b.Me?(""!==b.Lj?(a.Pc.a_bending_col_main={Em:!0,src:[{name:b.Lj,$g:4}]},M(a,"a_bending_col_main"),""!==b.Te.UA&&""!==b.Te.TA&&
""!==b.Te.BB?(a.Pc.a_bending_col_detail={Em:!0,src:[{name:b.Te.UA,$g:4},{name:b.Te.TA,$g:2},{name:b.Te.BB,$g:1}]},M(a,"a_bending_col_detail"),M(a,"a_tbn"),B(a,"DETAIL_BEND",1)):B(a,"DETAIL_BEND",0),B(a,"MAIN_BEND_COL",1)):B(a,"MAIN_BEND_COL",0),b.dm?B(a,"BEND_CENTER_ONLY",1):B(a,"BEND_CENTER_ONLY",0),B(a,"WIND_BEND",1)):B(a,"WIND_BEND",0);B(a,"BILLBOARD_PRES_GLOB_ORIENTATION",b.zq|0);b.Kg?B(a,"BILLBOARD",1):B(a,"BILLBOARD",0);b.Kg&&b.Vk?B(a,"HAIR_BILLBOARD",1):B(a,"HAIR_BILLBOARD",0);b.Aq?B(a,"BILLBOARD_SPHERICAL",
1):B(a,"BILLBOARD_SPHERICAL",0);switch(b.Bq){case "RANDOM":B(a,"BILLBOARD_RANDOM",1);B(a,"BILLBOARD_JITTERED",0);break;case "JITTERED":B(a,"BILLBOARD_RANDOM",0);B(a,"BILLBOARD_JITTERED",1);break;default:B(a,"BILLBOARD_RANDOM",0),B(a,"BILLBOARD_JITTERED",0)}b.Nc&&I.Lt?B(a,"DYNAMIC_GRASS",1):B(a,"DYNAMIC_GRASS",0);a.Nc=b.Nc;"PARTICLES"!=a.type&&(a.xe=b.xe);a.bf=b.bf;a.Ge=b.Ge;a.Td=b.Td&&!a.yc&&!(a.mb&&I.Sz);I.As?("MAIN"==a.type&&a.Td||"SHADOW"==a.type)&&B(a,"RGBA_SHADOWS",1):B(a,"RGBA_SHADOWS",0);a.ke=
b.ke;a.Rd=b.Rd;a.Yc=b.Yc;a.Yo[0]=b.Li;a.pg=b.pg;a.qg=b.qg;a.Jj=b.Jj;a.Kj=b.Kj;a.be=b.be;a.Od=b.Od;b.Xk?(M(a,"a_influence"),B(a,"SKINNED",1),I.ux?(B(a,"DISABLE_TANGENT_SKINNING",1),B(a,"FRAMES_BLENDING",0)):(B(a,"DISABLE_TANGENT_SKINNING",0),b.Am?B(a,"FRAMES_BLENDING",1):B(a,"FRAMES_BLENDING",0)),B(a,"MAX_BONES",b.Jh)):(B(a,"SKINNED",0),B(a,"FRAMES_BLENDING",0),B(a,"DISABLE_TANGENT_SKINNING",0));b.bd?(B(a,"VERTEX_ANIM",1),I.hK?B(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",.5):B(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",
"u_va_frame_factor")):B(a,"VERTEX_ANIM",0);b.Xk&&b.bd&&V.K("Skinning and vertex animation are mutually exlusive")}}function y(a,b,c){if(b.length){for(var d=ea.zv(b,I.ssao&&c.b4w_enable_ssao),e=a.eb,f=a.Qm,h=0,g=0;g<a.eb.$e.length;g++){var k=a.eb.$e[g];if("LIGHTING_LAMP"==k.id){var l=b[h++%b.length],m=l.Eb,n=ea.Da(l,c);if("SPOT"==m.type||"POINT"==m.type)var q=Math.cos(m.on/2);if("SPOT"==m.type)var r=m.Os*(1-q);l=d.indexOf(l);k.Ya=[["LAMP_TYPE",m.type],["LAMP_IND",n.Wr],["LAMP_SPOT_SIZE",ba.X(q||.01)],
["LAMP_SPOT_BLEND",ba.X(r||.01)],["LAMP_LIGHT_DIST",ba.X(m.distance)],["LAMP_USE_SPHERE",m.VC?1:0],["LAMP_SHADOW_MAP_IND",l]]}else if("LAMP"==k.id&&f)for(var n=k.Ya[0][1],p=0;p<b.length;p++)if(l=b[p],f[l.Jc]==n){m=l.Eb;if("SPOT"==m.type||"POINT"==m.type)q=Math.cos(m.on/2);"SPOT"==m.type&&(r=m.Os*(1-q));k.Ya.push(["LAMP_TYPE",m.type],["LAMP_SPOT_SIZE",ba.X(q||.01)],["LAMP_SPOT_BLEND",ba.X(r||.01)],["LAMP_LIGHT_DIST",ba.X(m.distance)],["LAMP_USE_SPHERE",m.VC?1:0])}}if(f){c=0;for(var t in f)c++;a.Jo=
new Float32Array(3*c);a.Rr=new Float32Array(3*c);a.Qr=new Float32Array(3*c);ba.ma(e,"NUM_LAMP_LIGHTS",c);for(g=0;g<b.length;g++)D(a,b[g])}}}function D(a,b){if(b.Jc in a.Qm){var c=a.Qm[b.Jc],d=Ca.get_trans_view(b.A.D);a.Jo.set(d,3*c);a.Rr.set(b.Eb.direction,3*c);a.Qr.set(b.Eb.Sq,3*c)}}function N(a,b){for(var c=0;c<b.length;c++){var d=b[c].settings.b4w_vcol_from_name,e=b[c].settings.b4w_vcol_to_name;""!==d&&""!==e&&(a.Pc[d]={Em:!1,src:[{name:d,$g:7}]})}}function M(a,b){var c=a.pj;-1==c.indexOf(b)&&
c.push(b);a.pj=c.sort()}function B(a,b,c){ba.ma(a.eb,b,c)}function J(a,b){if("PHYSICS"==a.type)"NAVMESH"==a.Ab?a.ra=la.nJ(b,la.Hn,[]):(0<b.wb.length&&la.aW(b,b.la[0]),a.Vd=b);else{var c=a.Bh;a.Jv&&"PARTICLES"!=a.type&&(b=la.uQ(b));a.zy&&(b=da.RQ(a.Ay,a.By,a.yy));c=la.nJ(b,c,a.Pc);a.ra=c;a.xe||a.hf||a.ef||(c.ee=null,c.kc.length=0);c=b.la.length;a.num_vertices=b.Wa*c;var d;a:switch(a.Bh){case la.Hn:case la.gq:case la.ut:d=!0;break a;default:d=!1}d?la.zS(b)?a.num_triangles=b.Aa.length/3*c:a.num_triangles=
b.Wa/3*c:a.num_triangles=0}}function C(a,b,c,d,h,g,k,l,m,n,q,r){var p=a.Ha,t=[],w=l.b4w_dynamic_grass;if(!n&&w)return t;for(var L="INSTANCE"==l.b4w_wind_bend_inheritance,v="INSTANCE"==l.b4w_shadow_inheritance,y="INSTANCE"==l.b4w_reflection_inheritance,z=[],D=[],C=0;C<h.length;C++){var u=h[C].Ha.A,E=ea.zz(b);E.Kg=l.b4w_hair_billboard;E.Bq=l.b4w_hair_billboard_type;E.Aq="SPHERICAL"==l.b4w_hair_billboard_geometry;E.Nc=w;E.Vk=!0;L?(E.Me=u.Me,E.Fn=u.Fn,E.Uf=u.Uf,E.yf=u.yf,E.Lj=u.Lj,E.xf=u.xf,E.sf=u.sf,
E.Tf=u.Tf,E.Te=u.Te,E.dm=!1):(E.Me=p.A.Me,E.Fn=p.A.Fn,E.Uf=p.A.Uf,E.yf=p.A.yf,E.Lj=p.A.Lj,E.xf=p.A.xf,E.sf=p.A.sf,E.Tf=p.A.Tf,E.Te=p.A.Te,E.dm=!0);v?(E.bf=u.bf,E.Ge=u.Ge,E.Td=u.Td):(E.bf=p.A.bf,E.Ge=p.A.Ge,E.Td=p.A.Td);y?(E.ke=u.ke,E.Rd=u.Rd,E.Yc=u.Yc,E.be=u.be,E.Od=u.Od,E.hh=u.hh):(E.ke=p.A.ke,E.Rd=p.A.Rd,E.Yc=p.A.Yc,E.be=p.A.be,E.Od=p.A.Od,E.hh=p.A.hh);z.push(E);var G=k[C];G||(G=new Float32Array);r&&V.Uv(m.seed,q);var F=new Float32Array(3),ha=new Float32Array([0,0,0,1]),H=[],J=Ga.NE(I.XA)&&!l.b4w_initial_rand_rotation&&
!l.b4w_hair_billboard,ya=4;J&&(ya=8);for(var ra=0;ra<G.length;ra+=ya){F[0]=G[ra];F[1]=G[ra+1];F[2]=G[ra+2];var S=G[ra+3]*Ca.get_scale(u.D);if(l.b4w_initial_rand_rotation){switch(l.b4w_rotation_type){case "XYZ":var oa=new Float32Array([V.gh(q),V.gh(q),V.gh(q)]);ta.normalize(oa,oa);break;case "Z":oa=new Float32Array([0,0,1]);break;default:V.K("Unsupported random rotation type: "+l.b4w_rotation_type)}W.setAxisAngle(oa,l.b4w_rand_rotation_strength*(2*Math.PI*V.gh(q)-Math.PI),ha)}else if(J&&(ha.set(G.subarray(ra+
4,ra+8)),V.MB(ha,ha),!l.use_whole_group))if(l.use_rotation_dupli){var T=Ca.get_quat_view(u.D);W.multiply(ha,T,ha)}else W.multiply(ha,va,ha);var M=Ca.set_sep(F,S,ha,Ca.create());H.push(M)}D.push(H)}for(var P={},Na=0,C=0;C<h.length;C++)for(var N=h[C].Ha.nc,ra=0;ra<N.length;ra++)N[ra].name in P?P[N[ra].name]++:(P[N[ra].name]=1,Na++);for(var Na=Na?Na:1,K={},C=0;C<h.length;C++){var Aa=h[C],R=g[C],E=z[C],O={};E.Me&&(O.au_wind_bending_amp=[E.Tf],O.au_wind_bending_freq=[E.Uf],O.au_detail_bending_freq=[E.yf],
O.au_detail_bending_amp=[E.xf],O.au_branch_bending_amp=[E.sf],E.Tf=0,E.Uf=0,E.yf=0,E.xf=0,E.sf=0);H=D[C];if(H.length){for(var U=Aa.data,N=Aa.Ha.nc,ba=Array(N.length),Qa=Array(N.length),ra=0;ra<N.length;ra++)if(!sa(p,ra)&&!la.zG(U,ra))for(var ua=0;ua<R.length;ua++){var da=R[ua],Ea=e(da),Fa=N[ra];"MAIN"==da?ba[ra]=Ea:"DEBUG_VIEW"==da&&(Qa[ra]=Ea);Ea.Qq=a.b4w_cluster_data.cluster_id;if(A(Ea,Fa)&&x(Ea,Fa,U)){"SHADOW"==da&&ba[ra]&&(Ea.yc=ba[ra].yc);Ea.Bh=la.Hn;f(Ea,E);Ea.fl=ga(Ea,E,l.uuid);Ea.vj=a.b4w_do_not_cull||
l.b4w_dynamic_grass;"MAIN"==Ea.type&&(Ea.gg=a.b4w_caustics);B(Ea,"DISABLE_FOG",("COLOR_ID"!=da&&"SHADOW"!=da&&a.b4w_disable_fogging)|0);"JITTERED"==l.b4w_hair_billboard_type&&(Ea.cw=l.b4w_hair_billboard_jitter_amp,Ea.dw=l.b4w_hair_billboard_jitter_freq);w&&(Ea.Dv=l.b4w_dynamic_grass_scale_threshold);L||(delete Ea.Pc.a_bending_col_main,delete Ea.Pc.a_bending_col_detail);var ca=la.bv(U,ra,Ea.pj,b.gi,Ea.Pc,Ea.Vi),ja=p.A.D,Za=!0;if(1<P[Fa.name]){var za=0,Y;for(Y in ca.la)za++;Za=ca.Aa.length*H.length*
za*P[Fa.name]>2E5*Na}var ia=I.$D&&Za&&"PHYSICS"!=Ea.type;if(ia){Ea.IG=l.use_whole_group?2:1;var Z=la.tO(ca);la.CE(ca,Z,H);Z.Xe={Ws:H,tC:ja,fJ:"STATIC"==b.type,Rx:O,ap:{},Tu:w};if(E.Me&&E.dm){var aa=ta.fromValues(0,0,0);Ca.transform_vec3(aa,p.A.D,aa);for(var xa=[],pa=0;pa<H.length;pa++)xa.push(aa[0],aa[1],aa[2]);Z.Xe.ap.a_emitter_center={oc:3,data:xa}}la.CE(ca,ca,H);"STATIC"==b.type&&la.zN(Z.$c,ja)}else{var ma=Z=la.jT(ca,O,H),Pa=H;ma.xa.au_center_pos=new Float32Array(3*ma.Wa);for(var Ra=Pa.length,
La=ma.Wa/Ra,na=0;na<Ra;na++)for(var Ka=Pa[na],Oa=3*La*na,Sa=0;Sa<La;Sa++)ma.xa.au_center_pos[Oa+3*Sa]=Ka[0],ma.xa.au_center_pos[Oa+3*Sa+1]=Ka[1],ma.xa.au_center_pos[Oa+3*Sa+2]=Ka[2];Z=ma;if(E.Me&&E.dm){var Va=Z,wa=p.A.D;Va.xa.a_emitter_center=new Float32Array(3*Va.Wa);var Ia=ta.fromValues(0,0,0);Ca.transform_vec3(Ia,wa,Ia);for(var xb=0;xb<Va.Wa;xb++)Va.xa.a_emitter_center[3*xb]=Ia[0],Va.xa.a_emitter_center[3*xb+1]=Ia[1],Va.xa.a_emitter_center[3*xb+2]=Ia[2];Z=Va}}var xc=l.b4w_vcol_from_name,nc=l.b4w_vcol_to_name,
Ic=Ea,yb=c,Eb=!L,tb=U,nb=[];if(""!==xc&&""!==nc){var Jb,md=void 0,Qc=nc,gb=Ic.Pc,Rc=[];for(md in gb)for(var bc=gb[md].src,Jc=0,cc=0;cc<bc.length;cc++){var bd=bc[cc].$g;Qc==bc[cc].name&&Rc.push(md,bd,Jc);Jc+=V.jn(bd)}Jb=Rc;if(0<Jb.length)for(var Tb=0;Tb<Jb.length;Tb+=3)nb.push({nr:xc,Vu:7,Tw:Jb[Tb],Uw:Jb[Tb+1],Su:Jb[Tb+2]});else la.YR(Ic.pj,"a_color")&&nc==tb.active_vcol_name&&nb.push({nr:xc,Vu:7,Tw:"a_color",Uw:7,Su:0})}Eb&&("a_bending_col_main"in yb&&nb.push({nr:"a_bending_col_main",Vu:4,Tw:"a_bending_col_main",
Uw:4,Su:0}),"a_bending_col_detail"in yb&&nb.push({nr:"a_bending_col_detail",Vu:7,Tw:"a_bending_col_detail",Uw:7,Su:0}));for(var Ob=Z,zb=H,yc=d,lb=nb,Kc=Ea.Pc,oc=ia,Sc=!1,Fb=0;Fb<lb.length;Fb++){var Kb=lb[Fb].nr,zc=yc.xa[Kb];if(zc&&0<zc.length){Sc=!0;break}}if(oc)var pc=Ob.Xe.ap;if(Sc){var qb,Pb=p.A.va,ub=yc.la[0].a_position,Bb=zb,Ta=K,qc=new Float32Array(3),Qb=new Float32Array(3),dc=new Uint32Array(Bb.length);if(!("verts_indices"in Ta)){Ta.nj=new Float32Array(3);Ta.hj=new Float32Array(3);Ta.YC=new Uint32Array(ub.length/
3);Ta.cs=new Uint32Array(ub.length/3);Ta.nj[0]=(Pb.max_x-Pb.min_x)/20;Ta.nj[1]=(Pb.max_y-Pb.min_y)/20;Ta.nj[2]=(Pb.max_z-Pb.min_z)/20;Ta.hj[0]=Pb.min_x;Ta.hj[1]=Pb.min_y;Ta.hj[2]=Pb.min_z;for(var db=0;db<ub.length/3;db++){var Ub=ub[3*db+1],Ac=ub[3*db+2],hb=V.trunc((ub[3*db]-Ta.hj[0])/Ta.nj[0]),qd=V.trunc((Ub-Ta.hj[1])/Ta.nj[1]),Lc=V.trunc((Ac-Ta.hj[2])/Ta.nj[2]),hb=V.clamp(hb,0,19),qd=V.clamp(qd,0,19),Lc=V.clamp(Lc,0,19);Ta.YC[db]=db;Ta.cs[db]=Lc*Math.pow(20,2)+20*qd+hb}la.JV(Ta.cs,Ta.YC,la.Uy,!0);
Ta.zn=new Uint32Array(Math.pow(20,3));for(db=0;db<Ta.cs.length;db++)Ta.zn[Ta.cs[db]]++;delete Ta.cs;for(db=1;db<Ta.zn.length;db++)Ta.zn[db]+=Ta.zn[db-1]}for(var ec=0;ec<Bb.length;ec++){qc[0]=Bb[ec][0];qc[1]=Bb[ec][1];qc[2]=Bb[ec][2];for(var Rb=1E10,Tc=-1,Uc=V.trunc((qc[0]-Ta.hj[0])/Ta.nj[0]),Mc=V.trunc((qc[1]-Ta.hj[1])/Ta.nj[1]),Nc=V.trunc((qc[2]-Ta.hj[2])/Ta.nj[2]),Uc=V.clamp(Uc,0,19),Mc=V.clamp(Mc,0,19),Nc=V.clamp(Nc,0,19),Bc=Nc*Math.pow(20,2)+20*Mc+Uc,zd=Ta.zn[Bc],ob=0==Bc?0:Ta.zn[Bc-1];ob<zd;ob++){var Vc=
Ta.YC[ob];Qb[0]=ub[3*Vc];Qb[1]=ub[3*Vc+1];Qb[2]=ub[3*Vc+2];ta.sub(Qb,qc,Qb);var cd=ta.sqrLen(Qb);cd<=Rb&&(Rb=cd,Tc=Vc)}if(-1==Tc)for(ob=0;ob<ub.length/3;ob++)Qb[0]=ub[3*ob],Qb[1]=ub[3*ob+1],Qb[2]=ub[3*ob+2],ta.sub(Qb,qc,Qb),cd=ta.sqrLen(Qb),cd<=Rb&&(Rb=cd,Tc=ob);dc[ec]=Tc}qb=dc;for(var rd=Ob.Wa/zb.length,Fb=0;Fb<lb.length;Fb++){var Ma=lb[Fb].Tw,fb=lb[Fb].Uw,Kb=lb[Fb].nr,Vb=lb[Fb].Vu,zc=yc.xa[Kb];switch(Ma){case "a_bending_col_main":var Wc=1;break;case "a_bending_col_detail":Wc=3;break;case "a_color":Wc=
3;break;default:for(var fc=Wc=0;fc<Kc[Ma].src.length;fc++)Wc+=V.jn(Kc[Ma].src[fc].$g)}if(zc&&0<zc.length){var Cc=V.jn(Vb),Vd=V.jn(fb),Nd=Vb&fb,Oc=V.nI(Nd);Nd!=fb&&fa.error("Wrong color extraction from "+Kb+" to "+Ma+".");if(oc)for(pc[Ma]={oc:Wc,data:[]},fc=0;fc<zb.length;fc++)for(Od=qb[fc],rc=Od*Cc,Yb=0;Yb<Oc.length;Yb++)Oc[Yb]&&(dd=V.ip(Vb,Yb),pc[Ma].data.push(zc[rc+dd]));else{if("a_bending_col_main"==Ma||"a_bending_col_detail"==Ma)Ob.xa[Ma]=new Float32Array(Ob.Wa*Vd);for(fc=0;fc<zb.length;fc++){var Od=
qb[fc],rc=Od*Cc,de=fc*rd*Wc;if(-1!=Od)for(var sd=0;sd<rd;sd++)for(var $d=sd*Wc,Yb=0;Yb<Oc.length;Yb++)if(Oc[Yb]){var dd=V.ip(Vb,Yb);Ob.xa[Ma][de+$d+(lb[Fb].Su+V.ip(fb,Yb))]=zc[rc+dd]}}}}else Ob.xa[Ma]=new Float32Array(0)}}Z=Ob;B(Ea,"USE_INSTANCED_PARTCLS",Z.Xe?1:0);X(Ea);t.push({ya:Ea,ug:b,Yt:E,Vd:Z,bh:[Fa.name],le:[a]})}}for(ra=0;ra<Qa.length;ra++)Qa[ra]&&(Qa[ra].bo=ba[ra].id,X(Qa[ra]))}}return t}function A(a,b){var c=!0;"NODES_GLOW"==a.type&&(c=aa.LE(b));return c}function X(a){m(a,function(a){a.id=
0;a.id=V.DE(a)})}function m(a,b){for(var c=null,d=null,e=[],f=0;f<a.na.length;f++){var h=a.na[f],g=h.Lg;g&&(c||(c={}),c[f]=g,h.Lg=null);if(g=h.ib)d||(d={}),d[f]=g,h.ib=null;e.push(h.LH);h.LH=0}h=a.tb;a.tb=null;g=a.ff;a.ff=null;var k=a.ra;a.ra=null;var l=a.Vd;a.Vd=null;b(a);a.ra=k;a.Vd=l;a.ff=g;a.tb=h;if(c)for(f in c)a.na[f].Lg=c[f];if(d)for(f in d)a.na[f].ib=d[f];for(f=0;f<a.na.length;f++)a.na[f].LH=e[f]}function K(a,b,c,d){var h=e("DEBUG_VIEW");R(h,"debug_view.glslv","debug_view.glslf");h.tj=!0;
h.Qa=!0;h.fl=ga(h,a,b);h.Iu=c;f(h,a);X(h);if(d.Jl){a=d.tb.qf;var g=ta.create();b=da.gA(1,g);c=ta.fromValues(ta.length(a.Sa),ta.length(a.Ta),ta.length(a.Ua));la.sI(b,c,g);var g=ta.normalize(a.Sa,na),k=ta.normalize(a.Ta,Y),l=ta.normalize(a.Ua,ya);!c[0]&&c[1]&&c[2]?ta.cross(k,l,g):!c[1]&&c[0]&&c[2]?ta.cross(l,g,k):!c[2]&&c[0]&&c[1]&&ta.cross(g,k,l);c=V.jQ(g,k,l,T);ma.invert(c,c);c=W.fromMat3(c,Na);Ca.set_quat(c,oa);Ca.set_scale(1,oa);Ca.set_trans(a.U,oa);la.wC(b,oa)}else a=d.tb.Qe,b=da.gA(a.ab,a.U);
U.kF(d.tb,h.tb);la.Qx(b,1,!0);b.xa.a_polyindex=la.av(b);J(h,b);return h}function R(a,b,c){a.eb.Pf=b;a.eb.ye=c;ba.YU(a.eb)}function O(a,b,c,d){d=d||"";-1==a.Mf.indexOf(c)&&(a.na.push(b),a.Mf.push(c),a.rf.push(d));a.zb&&P.hE(a)}function S(a){a.eb||V.K("No shaders info for batch "+a.name);a.zb=ba.jR(a.eb);var b=a.eb;if(b.status===ba.JD){var c=a.zb.attributes,d=a.ra.Fb,e;for(e in c)d[e]||V.K('missing data for "'+e+'" attribute')}b.status&ba.BK&&fa.error("Texture limit exceeded for shader - "+b.ye+', materials: "'+
a.cc.join(", ")+'". Maximum texture count: '+Ka.eB+", actual texture count: "+b.Xx);b.status&ba.AK&&fa.error("Fragment uniform limit exceeded for shader - "+b.ye+', materials: "'+a.cc.join(", ")+'". ');b.status&ba.EK&&fa.error("Vertex uniform limit exceeded for shader - "+b.Pf+', materials: "'+a.cc.join(", ")+'". ');b.status&ba.DK&&fa.error("Vertex attribute limit exceeded for shader - "+b.Pf+', materials: "'+a.cc.join(", ")+'". Maximum attribute count: '+Ka.fB+", actual attribute count: "+b.Tt);
b.status&ba.CK&&("MAIN"!=a.type||a.xb||fa.error("Varying limit exceeded for shader - "+a.eb.ye+', materials: "'+a.cc.join(", ")+'"'),"MAIN"==a.type&&a.xb||"NODES_GLOW"==a.type)&&(d=c=0,a.Vi&&(c=V.Bj(a.Vi)),a.Pc&&(d=V.Bj(a.Pc)),fa.error("Varying limit exceeded for node shader - "+a.eb.ye+", uv: "+c+", vc: "+d+', materials: "'+a.cc.join(", ")+'"'));b.status&ba.yK&&fa.error("Shader compilation/linking error: "+b.Pf+", "+b.ye+', materials: "'+a.cc.join(", ")+'"');return a.eb.status===ba.JD?(P.jN(a.zb),
P.St(a),P.hE(a),!0):!1}function ga(a,b,c){return"NAVMESH"==a.Ab?c:b.xe?"_odd_id_"+V.FJ():c}function sa(a,b){return 0<=b&&b<a.Ye.Lm.length&&a.Ye.Lm[b]}var U=u("__boundings"),ia=u("__config"),fa=u("__print"),pa=u("__extensions"),Z=u("__graph"),ma=u("__mat3"),aa=u("__nodemat"),ea=u("__obj_util"),wa=u("__particles"),da=u("__primitives"),W=u("__quat"),Ga=u("__reformer"),P=u("__renderer"),ua=u("__scenegraph"),ba=u("__shaders"),ja=u("__subscene"),ca=u("__textures"),Ca=u("__tsr"),la=u("__geometry"),V=u("__util"),
ta=u("__vec3"),xa=u("__vec4"),I=ia.L,Ka=ia.zh,Va=ia.kp,Ia=ia.CG,va=new Float32Array([0,0,-Math.sqrt(.5),Math.sqrt(.5)]),na=new Float32Array(3),Y=new Float32Array(3),ya=new Float32Array(3),Na=new Float32Array(4),oa=Ca.create(),T=ma.create(),Ea={},Fa=new Float32Array(24);a.oN=function(a){return Ea[a]||null};a.pN=function(a,b){Ea[a]=b};a.pO=c;a.aG=function(a,b,c,d){var e;e=a.J.wa;for(var f=[],h=0;h<b.length;h++){var k=b[h],l=k.Ha;l.Mr||f.push.apply(f,g(k,l.A,e))}e=p(f);for(f=0;f<e.length;f++)if(h=e[f].ya,
h.cc=e[f].bh,J(h,e[f].Vd),y(h,c,a),"STATIC"==e[f].A.type&&"COLOR_ID"!=h.type){var k=V.Zs("%meta%"+h.type+"%"+h.cc.join("%")+"%"),m=ea.$q(k,"MESH");ea.tT(m,e[f].A);ea.Ot(m,a);ea.bg(m,a,h);d.push(m);if("MAIN"==h.type)for(l=0;l<e[f].le.length;l++)k=e[f].le[l].Ha,k.Yr.push(m)}else k=e[f].le[0].Ha,ea.bg(k,a,h);if(I.debug_view){for(f=0;f<e.length;f++)if(c=e[f].A,"DYNAMIC"==c.type&&(k=e[f].le[0].Ha,h=e[f].ya,"MAIN"==h.type)){for(var l=ea.Da(k,a),m=l.$,q=!1,l=0;l<m.length;l++)m[l].tj&&(q=!0);q||(c=K(c,k.name,
!0,h),ea.bg(k,a,c))}for(f=0;f<d.length;f++)k=d[f],c=k.A,l=ea.Da(k,a),h=l.$[0],"MAIN"==h.type&&(c=K(c,k.name,!1,h),ea.bg(k,a,c));for(f=0;f<e.length;f++)h=e[f].ya,"DEBUG_VIEW"==h.type&&(h.Gu=f)}for(f=0;f<b.length;f++)for(l=ea.Da(b[f].Ha,a),m=l.$,l=0;l<m.length;l++)n(m[l]);for(f=0;f<d.length;f++)for(l=ea.Da(d[f],a),m=l.$,l=0;l<m.length;l++)n(m[l])};a.WM=function(a,b,d){var f=a.J.Ql,h=e("MAIN");R(h,"sky.glslv","sky.glslf");h.Fj=!0;h.Qa=!1;if(b.procedural_skydome)B(h,"PROCEDURAL_SKYDOME",1),h.Ru=!0;else{var g=
f.mn,k=ua.Rb(a.J.wa,ja.re).H.Qb;O(h,k,"u_sky");g&&(B(h,"WO_SKYTEX",1),g.invert&&B(h,"MTEX_NEGATIVE",1),g.$J&&B(h,"MTEX_RGBTOINT",1),B(h,"BLENDTYPE",g.uE),g.VJ&&B(h,"WOMAP_BLEND",1),g.WJ&&B(h,"WOMAP_HORIZ",1),g.YJ&&B(h,"WOMAP_ZENUP",1),g.XJ&&B(h,"WOMAP_ZENDOWN",1));f.tn&&B(h,"WO_SKYBLEND",1);f.un&&B(h,"WO_SKYPAPER",1);f.vn&&B(h,"WO_SKYREAL",1)}b.ke&&(h.ke=!0,b.Rd&&(h.Rd=!0));M(h,"a_position");b=da.UQ();J(h,b);n(h);h.vj=!0;X(h);ea.bg(d,a,h);ua.Rb(a.J.wa,ja.qh)&&(f=c(h),f.type="DEBUG_VIEW",f.Ab="",w(f),
B(f,"DEBUG_VIEW_SPECIAL_SKYDOME",1),b.xa.a_polyindex=la.av(b),J(f,b),f.bo=h.id,X(f),ea.bg(d,a,f))};a.yu=function(a,b,d){var e=ea.Da(a,d).$,f=[],h=ua.Rb(b,ja.Zd),g=ua.Rb(b,ja.wd),k=ua.Rb(b,ja.rh);b=ua.Rb(b,ja.Ne);for(var l=0;l<e.length;l++){var m=e[l],n=null;"SHADOW"==m.type&&"RECEIVE"==m.Ab&&m.bf&&(n=c(m),n.Ab="CAST");"MAIN"!=m.type&&"PARTICLES"!=m.type||!h&&!g||!m.ke||(n=c(m),n.Ab="REFLECT",n.Sj=!1,n.hf&&(n.hf=!1,n.Qa=!1),n.Ja=m.Ja);"COLOR_ID"==m.type&&k&&a.A.Xc&&(b&&a.A.rl?(n=c(m),n.Ab="OUTLINE"):
m.Ab="OUTLINE");n&&(n.Rg=!0,X(n),f.push(n))}for(e=0;e<f.length;e++)ea.bg(a,d,f[e])};a.rK=function(a,b,c){return(b=c*(b.max_z-b.min_z))?.5*(Math.sqrt(2*Math.sqrt(4*b*Math.tan(a)+1)+2)/2-1)/b:0};a.zX=function(a,b,c){b=c*(b.max_z-b.min_z);if(!b)return 0;a=2*b*a;return Math.atan((Math.pow(a+1,4)-Math.pow(a+1,2))/b)};a.qN=function(a){var b=U.Se();b.max_x=a.max_x;b.min_x=a.min_x;b.max_y=a.max_y;b.min_y=a.min_y;b.max_z=a.max_z;b.min_z=a.min_z;return b};a.vW=E;a.uW=y;a.eV=D;a.gE=function(a,b){B(a,"CSM_SECTION1",
0);B(a,"CSM_SECTION2",0);B(a,"CSM_SECTION3",0);B(a,"NUM_CAST_LAMPS",0);if(b){B(a,"NUM_CAST_LAMPS",b.Ih.length);I.rw&&B(a,"MAC_OS_SHADOW_HACK",1);for(var c=1;c<b.csm_num;c++)B(a,"CSM_SECTION"+String(c),1);B(a,"SHADOW_TEX_RES",ba.X(b.csm_resolution));B(a,"CSM_FADE_LAST_CASCADE",b.fade_last_cascade?1:0);B(a,"CSM_BLEND_BETWEEN_CASCADES",b.blend_between_cascades&&!I.QE?1:0)}else B(a,"SHADOW_TEX_RES",0),B(a,"CSM_FADE_LAST_CASCADE",0),B(a,"CSM_BLEND_BETWEEN_CASCADES",0)};a.yb=B;a.jd=function(a,b){return ba.qR(a.eb,
b)};a.sW=J;a.tW=X;a.IW=function(a,b){a.tb.Pe=U.gz(b,0,b.length,a.tb.Pe);var c=U.MF(a.tb.Pe,Fa);a.tb.qf=U.vu(c,!0);a.tb.Qe=U.xu(a.tb.qf);a.Jl=U.LG(a.tb.qf,a.tb.Qe)};a.Qt=R;a.vh=O;a.wU=function(a,b,c){c=a.Mf.indexOf(c);-1<c&&(a.na[c]=b)};a.fP=function(a,b){var c=e("MAIN");c.mb=!0;xa.set(b[0],b[1],b[2],.5,c.lc);c.Bh=la.gq;J(c,a);R(c,"main.glslv","main_stack.glslf");B(c,"SHADELESS",1);S(c);return c};a.Ic=S;a.$F=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],f=e("LINE");R(f,"line.glslv","line.glslf");
f.mb=!0;f.vj=!0;var h=da.WQ();J(f,h);n(f);ea.Ot(d,a);ea.bg(d,a,f);S(f)}};a.WN=function(a){return a.zb.gs.length?a.zb.GB.u_cube_fog?!0:!1:!1};a.PO=function(){var a=e("DEPTH_PACK");a.Fa=!0;a.Qa=!1;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/depth_pack.glslf");S(a);return a};a.zu=function(a){var b=e("POSTPROCESSING");R(b,"postprocessing/postprocessing.glslv","postprocessing/postprocessing.glslf");switch(a){case "NONE":B(b,"POST_EFFECT","POST_EFFECT_NONE");break;case "GRAYSCALE":B(b,
"POST_EFFECT","POST_EFFECT_GRAYSCALE");break;case "X_BLUR":case "Y_BLUR":B(b,"POST_EFFECT","POST_EFFECT_BLUR");break;case "X_GLOW_BLUR":case "Y_GLOW_BLUR":case "X_BLOOM_BLUR":case "Y_BLOOM_BLUR":B(b,"POST_EFFECT","POST_EFFECT_GLOW_BLUR");break;case "X_DOF_BLUR":case "Y_DOF_BLUR":B(b,"POST_EFFECT","POST_EFFECT_DOF_BLUR");break;case "X_ALPHA_BLUR":case "Y_ALPHA_BLUR":B(b,"POST_EFFECT","POST_EFFECT_ALPHA_BLUR");break;case "X_EXTEND":case "Y_EXTEND":B(b,"POST_EFFECT","POST_EFFECT_EXTEND");break;case "FLIP_CUBEMAP_COORDS":B(b,
"POST_EFFECT","FLIP_CUBEMAP_COORDS");break;default:V.K("Wrong postprocessing effect: "+a)}B(b,"SHADOW_USAGE","NO_SHADOWS");b.Fa=!0;b.Qa=!1;a=da.hd();J(b,a);S(b);return b};a.iP=function(a){var b=e("SSAO");b.Qa=!1;b.Fa=!0;var c=da.hd();J(b,c);R(b,"postprocessing/postprocessing.glslv","postprocessing/ssao.glslf");B(b,"SSAO_QUALITY","SSAO_QUALITY_"+a.pn);B(b,"SSAO_HEMISPHERE",a.wp?1:0);B(b,"SHADOW_USAGE","NO_SHADOWS");a={width:4,height:4,data:new Uint8Array([150,123,254,0,127,3,97,0,164,246,99,0,155,
177,14,0,54,83,221,0,2,142,143,0,32,57,79,0,49,160,32,0,57,232,115,0,178,216,203,0,70,196,218,0,241,164,82,0,225,58,85,0,233,88,189,0,144,25,203,0,117,73,12,0])};c=ca.rj(ca.sh,!1);c.source="NODE_TEX";ca.bt(c,a,0);O(b,c,"u_ssao_special_tex");S(b);return b};a.jP=function(a){var b=e("SSAO_BLUR");b.Qa=!1;b.Fa=!0;var c=da.hd();J(b,c);R(b,"postprocessing/postprocessing.glslv","postprocessing/ssao_blur.glslf");B(b,"SSAO_BLUR_DEPTH",a.sp?1:0);B(b,"SHADOW_USAGE","NO_SHADOWS");S(b);return b};a.IO=function(a){var b=
e("COC");b.Qa=!1;b.Fa=!0;var c=da.hd();J(b,c);R(b,"postprocessing/postprocessing.glslv","postprocessing/coc.glslf");B(b,"DEPTH_RGBA",1);switch(a){case "COC_ALL":B(b,"COC_TYPE","COC_ALL");break;case "COC_FOREGROUND":B(b,"COC_TYPE","COC_FOREGROUND");break;case "COC_COMBINE":B(b,"COC_TYPE","COC_COMBINE")}B(b,"SHADOW_USAGE","NO_SHADOWS");S(b);return b};a.QO=function(a){var b=e("DOF");b.Qa=!1;b.Fa=!0;var c=da.hd();J(b,c);R(b,"postprocessing/postprocessing.glslv","postprocessing/dof.glslf");a.dof_bokeh?
B(b,"DOF_TYPE","DOF_BOKEH"):(B(b,"DOF_TYPE","DOF_SIMPLE"),B(b,"DEPTH_RGBA",1));B(b,"SHADOW_USAGE","NO_SHADOWS");S(b);return b};a.YO=function(){var a=e("OUTLINE");a.Qa=!1;a.Fa=!0;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/outline.glslf");S(a);return a};a.SO=function(){var a=e("GLOW_COMBINE");a.Qa=!1;a.Fa=!0;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/glow.glslf");S(a);return a};a.TO=function(a,b,c){var d=e("GOD_RAYS");d.Qa=!1;d.Fa=
!0;var f=da.QQ();J(d,f);R(d,"postprocessing/god_rays.glslv","postprocessing/god_rays.glslf");B(d,"DEPTH_RGBA",a?1:0);B(d,"WATER_EFFECTS",b?1:0);B(d,"STEPS_PER_PASS",ba.X(c,1));B(d,"SHADOW_USAGE","NO_SHADOWS");S(d);return d};a.UO=function(){var a=e("GOD_RAYS_COM");a.Qa=!1;a.Fa=!0;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/god_rays_combine.glslf");B(a,"SAFARI_CANVAS_ALPHA_HACK",I.rI?1:0);S(a);return a};a.MO=function(a,b){var c=e("SKY");c.Qa=!1;c.Fa=!1;var d=da.ov();
J(c,d);""!=b.yx?(R(c,"skybox.glslv","node_skybox.glslf"),B(c,"IS_WORLD",1),l(c,a)):b.procedural_skydome?(R(c,"skybox.glslv","proc_skybox.glslf"),B(c,"WATER_EFFECTS",1)):(R(c,"skybox.glslv","tex_skybox.glslf"),a&&(d=a.J.Ql,d.Ax&&O(c,ca.ze(d.Ax),"u_sky_texture",d.Ax.texture.name),d.mn&&B(c,"WO_SKYTEX",1)),b.xx&&B(c,"MTEX_NEGATIVE",1),b.Fx&&B(c,"MTEX_RGBTOINT",1),B(c,"BLENDTYPE",b.wx),b.Bx&&B(c,"WOMAP_BLEND",1),b.Cx&&B(c,"WOMAP_HORIZ",1),b.Ex&&B(c,"WOMAP_ZENUP",1),b.Dx&&B(c,"WOMAP_ZENDOWN",1),b.tn&&
B(c,"WO_SKYBLEND",1),b.un&&B(c,"WO_SKYPAPER",1),b.vn&&B(c,"WO_SKYREAL",1));S(c);return c};a.PM=function(a,b){var c=ua.Rb(a.J.wa,ja.re);c&&ea.bg(b,a,c.Za[0].La[0].ya)};a.KO=function(){var a=e("IRRADIANCE");a.Qa=!1;a.Fa=!1;var b=da.ov();J(a,b);R(a,"skybox.glslv","irradiance_skybox.glslf");S(a);return a};a.LO=function(){var a=e("R_CONVOLUTION");a.Qa=!1;a.Fa=!1;var b=da.ov();J(a,b);R(a,"skybox.glslv","r_convolution_skybox.glslf");S(a);return a};a.HO=function(){var a=e("BRDF");a.Qa=!1;a.Fa=!1;var b=da.ov();
J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/precompute_brdf.glslf");S(a);return a};a.DO=function(a){var b=e("ANTIALIASING");b.Qa=!1;b.Fa=!0;var c=da.hd();J(b,c);R(b,"postprocessing/postprocessing.glslv","postprocessing/antialiasing.glslf");I.cI?(B(b,"AA_METHOD","AA_METHOD_FXAA_QUALITY"),B(b,"AA_QUALITY",a.lv)):B(b,"AA_METHOD","AA_METHOD_FXAA_LIGHT");S(b);return b};a.gP=function(a){var b=e("SMAA"),c=da.hd();J(b,c);R(b,"postprocessing/smaa.glslv","postprocessing/smaa.glslf");B(b,
"AA_METHOD","AA_METHOD_SMAA_HIGH");B(b,"SMAA_PASS",a);B(b,"SMAA_PREDICATION",0);B(b,"SMAA_REPROJECTION",0);S(b);b.Qa=!1;b.Fa=!0;return b};a.JO=function(){var a=e("COMPOSITING");a.Qa=!1;a.Fa=!0;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/compositing.glslf");S(a);return a};a.XO=function(){var a=e("MOTION_BLUR");a.Fa=!0;a.Qa=!1;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/motion_blur.glslf");S(a);return a};a.kP=function(a){var b=e("STEREO");
b.Fa=!0;b.Qa=!1;var c=da.hd();J(b,c);R(b,"postprocessing/postprocessing.glslv","postprocessing/stereo.glslf");B(b,"ANAGLYPH","ANAGLYPH"===a?1:0);B(b,"SIDEBYSIDE","SIDEBYSIDE"===a?1:0);B(b,"DISTOR_SCALE",Ia.nonwebvr.FF);S(b);return b};a.VO=function(){var a=e("LUMINANCE");a.Qa=!1;a.Fa=!0;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/luminance.glslf");S(a);return a};a.EO=function(){var a=e("LUMINANCE");a.Qa=!1;a.Fa=!0;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv",
"postprocessing/luminance_av.glslf");S(a);return a};a.WO=function(a){var b=e("LUMINANCE_X_BLUR");b.Qa=!1;b.Fa=!0;var c=da.hd();J(b,c);R(b,"postprocessing/postprocessing.glslv","postprocessing/luminance_truncated.glslf");a&&ba.ma(b.eb,"ADAPTIVE_BLOOM",1);S(b);return b};a.GO=function(a){var b=e("BLOOM");b.Qa=!1;b.Fa=!0;var c=da.hd();J(b,c);R(b,"postprocessing/postprocessing.glslv","postprocessing/bloom_combine.glslf");if(1==a)var d="BLUR_PASS_1";else 2==a?d="BLUR_PASS_2":3==a?d="BLUR_PASS_3":4==a?d=
"BLUR_PASS_4":5==a&&(d="BLUR_PASS_5");ba.ma(b.eb,"BLUR_PASS_NUM",d);S(b);return b};a.LP=function(){var a=e("VELOCITY");a.Qa=!1;a.Fa=!0;var b=da.hd();J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/velocity.glslf");S(a);return a};a.CO=function(){var a=e("ANCHOR_VISIBILITY");a.Qa=!0;a.Fa=!0;a.Bh=la.gq;R(a,"anchors.glslv","anchors.glslf");var b=da.ZF(1);J(a,b);B(a,"ANCHOR_NUM",1);S(a);a.Yl=new Float32Array(3);return a};a.$O=function(){var a=e("PERFORMANCE");a.Qa=!1;a.Fa=!0;var b=da.hd();
J(a,b);R(a,"postprocessing/postprocessing.glslv","postprocessing/performance.glslf");S(a);return a};a.rW=function(a,b){var c=b.length/3;if(c!=a.Yl.length/3){var d=da.ZF(c);J(a,d);B(a,"ANCHOR_NUM",c);S(a)}a.Yl=b};a.rv=function(a){if(!a.S.length)return null;a=a.S[0];return a.$.length?a.$[0]:null};a.Lk=function(a,b,c){a=a.S[0].$;for(var d=0;d<a.length;d++)if(a[d].type==c&&-1!=a[d].cc.indexOf(b))return a[d];return null};a.hb=function(a,b,c){a=a.S[0].$;for(var d=0;d<a.length;d++)if(a[d].type==c&&!a[d].Rg&&
-1!=a[d].cc.indexOf(b))return a[d];return null};a.lg=function(a,b,c){a=a.S[0].$;for(var d=0;d<a.length;d++)if(a[d].type==c&&a[d].Rg&&-1!=a[d].cc.indexOf(b))return a[d];return null};a.QA=function(a,b,c,d){a=a.S[0].$;for(var e=0;e<a.length;e++){var f=a[e];if(-1!=f.cc.indexOf(b)&&(!d||f.type==d)&&c(f))break}};a.NY=function(a,b){for(var c=a.S[0].$,d=0;d<c.length;d++)if(c[d].type==b)return!0;return!1};a.Br=function(a,b){for(var c=(b?ea.Da(a,b):a.S[0]).$,d=0;d<c.length;d++)if("SKY"==c[d].type)return c[d];
return null};a.ZE=function(a){var b=a.na;a.na=[];for(var c=0;c<b.length;c++)ca.YE(b[c]);a.na=b;a.ra&&a.ra.Mg&&la.jO(a.ra);a.Mg&&a.ff.length&&P.mO(a);a.zb&&a.zb.Mg&&ba.lO(a.zb);a.he&&(b=aa.xv(a.he))&&b.XE&&aa.kO(a.he)};a.YQ=ga;a.cleanup=function(){Ea={}}};b4w.module.__nodemat=function(a,u){function e(a,b,h,k,m){var n="";Aa.Pa()&&(n=Aa.get_active().uuid);n=H(b,k,n,m);if(n in Ra)return Ra[n];var r={wa:null,id:n,XE:!0};h||(Oa={},Sa=0);if("SHADOW"!=k&&"COLOR_ID"!=k){b=T.create();for(var p=a.nodes,v=0;v<p.length;v++)if(null==U(b,p[v],0,k,m))return Ra[n]=null,r;if(h&&-1==S(a,b,"GROUP_OUTPUT","group"))return r;v=xa(b);m=h?a.links:a.links.slice();if(!I(b,m,v))return r;if(h)return r.wa=b,r;for(v=0;v<m.length;v++){h=m[v];for(var p=f(h.from_node,b),x=f(h.to_node,
b),B=0;B<p.length;B++)for(var D=0;D<x.length;D++){var C=p[B],u=x[D],L=T.$a(b,C),A=T.$a(b,u);if(!V(b,C,u,L,A,h))return Ra[n]=null,r}}w(b);v=!1;m=-1;"GLOW"==k?m=S(a,b,"B4W_GLOW_OUTPUT","material",!0):(m=S(a,b,"OUTPUT","material",!1,!0),-1==m&&(m=S(a,b,"OUTPUT_MATERIAL","material",!1,!0)),-1==m&&(m=S(a,b,"OUTPUT_WORLD","material",!1,!0),v=!0));-1==m&&(b=l(),m=0);y(b);a=T.yl(b,m,T.rk);v?(d(a),t(a,k),q(a),G(a)):(c(a),g(a));F(a);N(a);K(a);E(a,k);Y(a)}else k=e(a,b,h,"MAIN",m),k=T.clone(k.wa,function(a){var b=
Qa.Pq(a);b.inputs=Qa.W(a.inputs);b.outputs=Qa.W(a.outputs);return b}),m=S(a,k,"OUTPUT","material",!1,!0),-1==m&&(m=S(a,k,"OUTPUT_MATERIAL","material",!1,!0)),z(k,m),a=T.yl(k,m,T.rk),F(a);r.wa=a;return Ra[n]=r}function c(a){var c=[];T.fa(a,function(a,b){"MATERIAL"!=b.type&&"MATERIAL_EXT"!=b.type||c.push({Ee:a,node:b})});for(var d=0;d<c.length;++d){var e=c[d].Ee,f=c[d].node,h=T.Aj(a);T.uh(a,h,f.data.lT);var g=T.Aj(a);T.uh(a,g,f.data.mT);T.Ec(a,h,g,[4,2]);for(var k={5:["LIGHTING_APPLY",10],6:["LIGHTING_APPLY",
6],7:["MATERIAL_END",3],8:["MATERIAL_END",4],9:["MATERIAL_END",5]},l=T.zi(a,e),m=[],n=[],q=[],r={},p=0;p<l;p++){var t=T.ng(a,e,p);t in r||(r[t]=0);var w=T.Oc(a,t,e,r[t]++);m.push([t,e,w]);var v=k[w[1]];if(v)switch(v[0]){case "MATERIAL_END":n.push([t,g,[w[0],v[1]]]);break;case "LIGHTING_APPLY":q.push([t,[w[0],v[1]]])}else n.push([t,h,w])}b(a,f.data.value,h,g,q);for(p=0;p<m.length;p++)T.Rh(a,m[p][0],m[p][1],m[p][2]);for(p=0;p<n.length;p++)T.Ec(a,n[p][0],n[p][1],n[p][2]);f=T.vg(a,e);h=[];k=[];l={};for(p=
0;p<f;p++)m=T.Ug(a,e,p),m in l||(l[m]=0),w=T.Oc(a,e,m,l[m]++),h.push([e,m,w]),k.push([g,m,w]);for(p=0;p<h.length;p++)T.Rh(a,h[p][0],h[p][1],h[p][2]);for(p=0;p<k.length;p++)T.Ec(a,k[p][0],k[p][1],k[p][2]);T.If(a,e)}}function b(a,b,c,d,e){var f={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},h=U(a,f,0,null,null),g=h;n(a,c,h,"E");n(a,c,h,"A");n(a,c,h,"D");h=Aa.get_active();h=L.Sb(h,"LAMP",L.DATA_ID_ALL);if(!b.yc)for(var k,l,m,q=0;q<h.length;q++){m=h[q].Eb;f={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};
k=U(a,f,0,null,null);f={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};l=U(a,f,0,null,null);n(a,g,l,"color");n(a,g,l,"specular");n(a,k,l,"ldir");n(a,c,l,"normal");n(a,c,l,"D");n(a,c,l,"S");n(a,k,l,"lcolorint");n(a,c,k,"shadow_factor");g="SPECULAR_"+b.cf;f={name:g,type:g,use_tangent_shading:b.oe};g=U(a,f,0,null,null);n(a,k,g,"ldir");n(a,k,g,"lfac");n(a,c,g,"normal");n(a,g,l,"sfactor");n(a,k,g,"norm_fac");n(a,c,g,"sp_params");g="HEMI"==m.type?"DIFFUSE_LAMBERT":"DIFFUSE_"+b.Ue;f={name:g,type:g,use_tangent_shading:b.oe};
m=U(a,f,0,null,null);n(a,k,m,"ldir");n(a,k,m,"lfac");n(a,c,m,"normal");n(a,k,m,"norm_fac");n(a,m,l,"lfactor");"DIFFUSE_LAMBERT"!=g&&n(a,c,m,"dif_params");for(k=0;k<e.length;k++)T.Ec(a,e[k][0],l,e[k][1]);g=l}n(a,g,d,"color");n(a,g,d,"specular")}function n(a,b,c,d){for(var e=T.$a(a,b),f=-1,h=T.$a(a,c).inputs,g=0;g<h.length;g++)if(d==h[g].identifier){f=g;break}if(-1!=f){for(var k=-1,e=e.outputs,g=0;g<e.length;g++)if(d==e[g].identifier){k=g;break}-1!=k&&(T.Ec(a,b,c,[k,f]),e[k].Ma=!0,h[f].Ma=!0)}}function g(a){var b=
[];T.fa(a,function(a,c){"OUTPUT_MATERIAL"==c.type&&b.push({Ee:a,node:c})});for(var c=0;c<b.length;++c){var d=b[c].Ee,e=b[c].node,f=!1,h=!1,g=T.Aj(a);T.uh(a,g,e.data.IT);for(var k=T.zi(a,d),l=[],m=[],n={},q=0;q<k;q++){var r=T.ng(a,d,q);r in n||(n[r]=0);var t=T.Oc(a,r,d,n[r]++);l.push([r,d,t]);switch(t[1]){case 0:f=!0;m.push([r,g,t]);break;case 2:var h=!0,w=T.Aj(a);T.uh(a,w,e.data.$P);m.push([r,w,[t[0],0]])}}for(q=0;q<l.length;q++)T.Rh(a,l[q][0],l[q][1],l[q][2]);for(q=0;q<m.length;q++)T.Ec(a,m[q][0],
m[q][1],m[q][2]);T.If(a,d);f?(h&&p(a,g,w),v(a)):(d=T.$a(a,g),a.Z=[0,d],a.Ca=[])}}function p(a,b,c){b=T.yl(a,b,T.rk);var d=x(b);if(d.length){c=T.yl(a,c,T.rk);c=T.clone(c,sa,la);T.fa(c,function(a,b){b.name="displacement%join%"+b.name});T.cE(c,b,[],[]);var e=-1;T.fa(b,function(a,b){if("DISPLACEMENT_BUMP"==b.type)return e=a,1});for(c=0;c<d.length;c++){var f=d[c],h=T.$a(b,f);n(b,e,f,"Normal");k(h)}}a.Z=b.Z;a.Ca=b.Ca}function k(a){a=a.Ya;for(var b=0;b<a.length;b++){var c=a[b];"USE_NORMAL_IN"==c[0]&&(c[1]=
1)}}function x(a){var b=[];T.fa(a,function(a,c){for(var d=!1,e=c.inputs,f=0;f<e.length;f++)if("Normal"==e[f].identifier){d=!e[f].Ma;break}d&&b.push(a)});return b}function v(a){var b=[];T.fa(a,function(a,c){"OUTPUT_SURFACE"==c.type&&b.push({Ee:a,node:c})});var c=[];b.length&&T.fa(a,function(a,b){"MIX_SHADER"==b.type&&c.push({Ee:a,node:b})});for(var d=0;d<b.length;++d){var e=b[d].Ee,f=b[d].node,g=T.Aj(a);T.uh(a,g,f.data.CN);var k=T.Aj(a);T.uh(a,k,f.data.DN);T.Ec(a,g,k,[4,2]);for(var l=T.zi(a,e),m=[],
n=[],q={},r=0;r<l;r++){var p=T.ng(a,e,r),t=T.$a(a,p);p in q||(q[p]=0);var w=T.Oc(a,p,e,q[p]++);m.push([p,e,w]);n.push([p,g,w]);if("BSDF_GLOSSY"==t.type||"BSDF_DIFFUSE"==t.type||"MIX_SHADER"==t.type||"EMISSION"==t.type||"BSDF_TRANSPARENT"==t.type)for(n.push([p,g,[1,1]]),n.push([p,g,[2,2]]),n.push([p,g,[3,3]]),n.push([p,g,[4,4]]),n.push([p,g,[5,5]]),n.push([p,g,[6,6]]),n.push([p,g,[7,7]]),n.push([p,g,[8,8]]),n.push([p,g,[9,9]]),n.push([p,g,[10,10]]),p=0;p<c.length;++p)for(var t=c[p].Ee,w=T.zi(a,t),
v=0;v<w;v++){var y=T.ng(a,t,v),z=T.$a(a,y),x=T.Oc(a,y,t,0);0==x[1]||"BSDF_GLOSSY"!=z.type&&"BSDF_DIFFUSE"!=z.type&&"MIX_SHADER"!=z.type&&"EMISSION"!=z.type&&"BSDF_TRANSPARENT"!=z.type||(z=1==x[1]?3:13,n.push([y,t,[1,z]]),n.push([y,t,[2,z+1]]),n.push([y,t,[3,z+2]]),n.push([y,t,[4,z+3]]),n.push([y,t,[5,z+4]]),n.push([y,t,[6,z+5]]),n.push([y,t,[7,z+6]]),n.push([y,t,[8,z+7]]),n.push([y,t,[9,z+8]]),n.push([y,t,[10,z+9]]))}}h(a,f.data.value,g,k);n.push([k,e,[0,0]]);for(r=0;r<m.length;r++)T.Rh(a,m[r][0],
m[r][1],m[r][2]);for(r=0;r<n.length;r++)T.Ec(a,n[r][0],n[r][1],n[r][2])}}function h(a,b,c,d){var e=[],f={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},h=U(a,f,0,null,null),g=h;n(a,c,h,"E");n(a,c,h,"A");n(a,c,h,"D");for(var h=Aa.get_active(),h=L.Sb(h,"LAMP",L.DATA_ID_ALL),k,l,m=0;m<h.length;m++){f={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};k=U(a,f,0,null,null);f={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};l=U(a,f,0,null,null);n(a,g,l,"color");n(a,g,l,"specular");n(a,k,l,"ldir");n(a,c,l,"normal");
n(a,c,l,"D");n(a,c,l,"S");n(a,k,l,"lcolorint");n(a,c,k,"shadow_factor");g=b.EN;f={name:g,type:g};g=U(a,f,0,null,null);n(a,k,g,"ldir");n(a,k,g,"lfac");n(a,c,g,"normal");n(a,k,g,"norm_fac");n(a,c,g,"bsdf_params");n(a,g,l,"lfactor");n(a,g,l,"sfactor");for(g=0;g<e.length;g++)T.Ec(a,e[g][0],l,e[g][1]);g=l}n(a,c,d,"bsdf_params");n(a,c,d,"d_color");n(a,c,d,"s_color");n(a,c,d,"e_color");n(a,c,d,"emission");n(a,c,d,"a_color");n(a,c,d,"alpha");n(a,g,d,"color");n(a,g,d,"specular")}function d(a){var b=[];T.fa(a,
function(a,c){"OUTPUT_WORLD"==c.type&&b.push({Ee:a,node:c})});for(var c=0;c<b.length;++c){var d=b[c].Ee,e=b[c].node,f=T.Aj(a);T.uh(a,f,e.data.JT);for(var e=T.zi(a,d),h=[],g=[],k={},l=0;l<e;l++){var m=T.ng(a,d,l);m in k||(k[m]=0);var n=T.Oc(a,m,d,k[m]++);h.push([m,d,n]);switch(n[1]){case 0:g.push([m,f,n])}}for(l=0;l<h.length;l++)T.Rh(a,h[l][0],h[l][1],h[l][2]);for(l=0;l<g.length;l++)T.Ec(a,g[l][0],g[l][1],g[l][2]);T.If(a,d)}}function t(a,b){var c=[];T.fa(a,function(a,b){"MIX_SHADER"!=b.type&&"ADD_SHADER"!=
b.type||c.push({Ee:a,node:b})});if(c.length)for(var d={name:"RGB_WORLD_NODE",type:"RGB_WORLD_NODE",factor:.5},e=0;e<c.length;e++){var f=c[e].Ee,h=c[e].node;d.name=h.name;d.fac=h.inputs[0].Ia;d.fac_is_linked=h.inputs[0].Ma;d.color1_is_linked=h.inputs[1].Ma;d.color2_is_linked=h.inputs[2].Ma;switch(h.type){case "ADD_SHADER":d.type="ADD_WORLD_RGB";break;case "MIX_SHADER":d.type="MIX_WORLD_RGB"}for(var h=U(a,d,0,b,null),g=T.zi(a,f),k=[],l=[],m={},n=0;n<g;n++){var q=T.ng(a,f,n);q in m||(m[q]=0);var r=T.Oc(a,
q,f,m[q]++);k.push([q,f,r]);l.push([q,h,r])}for(n=0;n<k.length;n++)T.Rh(a,k[n][0],k[n][1],k[n][2]);for(n=0;n<l.length;n++)T.Ec(a,l[n][0],l[n][1],l[n][2]);g=T.vg(a,f);k=[];l=[];m={};for(n=0;n<g;n++)q=T.Ug(a,f,n),q in m||(m[q]=0),r=T.Oc(a,f,q,m[q]++),k.push([f,q,r]),l.push([h,q,r]);for(n=0;n<k.length;n++)T.Rh(a,k[n][0],k[n][1],k[n][2]);for(n=0;n<l.length;n++)T.Ec(a,l[n][0],l[n][1],l[n][2]);T.If(a,f)}}function q(a){var b=-1,c=[],d=[],e="OUTPUT_WORLD_SURFACE BACKGROUND RGB VALUE ADD_WORLD_RGB MIX_WORLD_RGB TEXTURE_ENVIRONMENT_EQUIRECTANGULAR TEXTURE_ENVIRONMENT_MIRROR_BALL GEOMETRY_NO GEOMETRY_TRN GEOMETRY_GL GEOMETRY_IN TEXTURE_COLOR TEX_COORD_GE TEX_COORD_OB TEX_COORD_NO COMBRGB COMBHSV CURVE_RGB CURVE_VEC B4W_LINEAR_TO_SRGB B4W_NORMAL_VIEW B4W_VECTOR_VIEW B4W_SRGB_TO_LINEAR B4W_REFLECT B4W_CLAMP B4W_TIME B4W_SMOOTHSTEP NORMAL MAPPING MATH_ADD MATH_SUBTRACT MATH_MULTIPLY MATH_DIVIDE MATH_SINE MATH_COSINE MATH_TANGENT MATH_ARCSINE MATH_ARCCOSINE MATH_ARCTANGENT MATH_POWER MATH_LOGARITHM MATH_MINIMUM MATH_MAXIMUM MATH_ROUND MATH_LESS_THAN MATH_GREATER_THAN MATH_MODULO MATH_ABSOLUTE MIX_RGB_MIX MIX_RGB_ADD MIX_RGB_MULTIPLY MIX_RGB_SUBTRACT MIX_RGB_SCREEN MIX_RGB_DIVIDE MIX_RGB_DIFFERENCE MIX_RGB_DARKEN MIX_RGB_LIGHTEN MIX_RGB_OVERLAY MIX_RGB_DODGE MIX_RGB_BURN MIX_RGB_HUE MIX_RGB_SATURATION MIX_RGB_VALUE MIX_RGB_COLOR MIX_RGB_SOFT_LIGHT MIX_RGB_LINEAR_LIGHT SEPRGB SEPHSV VALTORGB VECT_TRANSFORM VECT_MATH_ADD VECT_MATH_SUBTRACT VECT_MATH_AVERAGE VECT_MATH_DOT_PRODUCT VECT_MATH_CROSS_PRODUCT VECT_MATH_NORMALIZE".split(" ");
T.fa(a,function(a,d){switch(e.indexOf(d.type)){case -1:c.push({Ee:a,node:d});break;case 0:b=a}});for(var f=0;f<c.length;f++)for(var h=c[f].Ee,g=T.vg(a,h),k={},l=0;l<g;l++){var m=T.Ug(a,h,l);m in k||(k[m]=0);var n=T.Oc(a,h,m,k[m]++);d.push([h,m,n])}for(f=0;f<d.length;f++)T.Rh(a,d[f][0],d[f][1],d[f][2]);d.length&&(d=T.yl(a,b,T.rk),a.Z=d.Z,a.Ca=d.Ca)}function G(a){var b=-1,c=[],d=[];T.fa(a,function(a,d){switch(d.type){case "ADD_WORLD_RGB":case "MIX_WORLD_RGB":var e={Ee:a,node:d};c.push(e);break;case "OUTPUT_WORLD_SURFACE":b=
a,e={Ee:a,node:d},c.push(e)}});for(var e=0;e<c.length;e++)for(var f=c[e].Ee,h=c[e].node,g=T.zi(a,f),k={},l=0;l<g;l++){var m=T.ng(a,f,l),n=T.$a(a,m);m in k||(k[m]=0);var q=T.Oc(a,m,f,k[m]++);"OUTPUT_WORLD_SURFACE"!=h.type&&0==q[1]||"ADD_WORLD_RGB"==n.type||"MIX_WORLD_RGB"==n.type||"BACKGROUND"==n.type||d.push([m,f,q])}for(e=0;e<d.length;e++)T.Rh(a,d[e][0],d[e][1],d[e][2]);d.length&&(d=T.yl(a,b,T.rk),a.Z=d.Z,a.Ca=d.Ca)}function H(a,b,c,d){a+=c;switch(b){case "GLOW":a+="11";case "COLOR_ID":case "SHADOW":a+=
"00";default:a+="10"}d&&d.XC&&(a+=d.XC);d&&d.WC&&(a+=d.WC);return a}function z(a,b){T.oh(a,function(c,d,e){var f=T.$a(a,d);d==b&&"Color"==f.inputs[e[1]].identifier&&T.Rh(a,c,d,e)})}function l(){var a=T.create();T.uh(a,0,{data:null,Ya:[],da:[],inputs:[{Ia:new Float32Array([0,0,0]),identifier:"Color",Ma:!1,name:"Color"},{Ia:1,identifier:"Alpha",Ma:!1,name:"Alpha"}],outputs:[],type:"OUTPUT",Le:[]});return a}function F(a){T.fa(a,function(b,c){for(var d=c.inputs,e=c.outputs,f=0;f<d.length;f++)r(a,d[f],
b,f,1);for(f=0;f<e.length;f++)r(a,e[f],b,f,0)})}function r(a,b,c,d,e){if(b.Ma){var f=!0;T.oh(a,function(a,b,h){if(!e&&a==c&&h[0]==d||e&&b==c&&h[1]==d)f=!1});f&&(b.Ma=!1)}}function E(a,b){var c=[];T.oh(a,function(d,e,f){var h=T.$a(a,d),g=T.$a(a,e),h=Qa.is_vector(h.outputs[f[0]].Ia),g=Qa.is_vector(g.inputs[f[1]].Ia);if(h!=g){var k,l={default_value:[0,0,0],identifier:"Vector",is_linked:!0,name:"Vector"},m={default_value:0,identifier:"Value",is_linked:!0,name:"Value"};h&&!g?k=ga("vector_to_scalar","B4W_VECTOSCAL",
[l],[m]):!h&&g&&(k=ga("scalar_to_vector","B4W_SCALTOVEC",[m],[l]));U(a,k,0,b,null);c.push([d,e,a.Z[a.Z.length-2],f])}});for(var d=0;d<c.length;++d)T.Rh(a,c[d][0],c[d][1],c[d][3]),T.Ec(a,c[d][0],c[d][2],[c[d][3][0],0]),T.Ec(a,c[d][2],c[d][1],[0,c[d][3][1]])}function w(a){var b=[];T.fa(a,function(c,d){switch(d.type){case "B4W_TRANSLUCENCY":T.oh(a,function(e,f,h){var g=T.$a(a,f);e==c&&"MATERIAL_EXT"==g.type&&"Translucency"==d.outputs[h[0]].name&&b.push(e,f,[h[0]+1,h[1]+1])})}});for(var c=0;c<b.length;c+=
3)T.Ec(a,b[c],b[c+1],b[c+2])}function f(a,b){var c=[];T.fa(b,function(b,d){d.name==a.name&&c.push(b)});if(c.length)return c;Qa.K("Node not found")}function y(a){var b=[];T.fa(a,function(a,c){"B4W_PARALLAX"!=c.type&&"REROUTE"!=c.type||b.push(a,c)});for(var c=0;c<b.length;c+=2){var d=b[c],e=b[c+1];if("B4W_PARALLAX"==e.type)D(a,d,e);else if("REROUTE"==e.type){for(var f=T.ng(a,d,0),h=T.vg(a,d),g=[],k=[],l=[],m=0;m<h;m++){var n=T.Ug(a,d,m),q=k.indexOf(n),r=T.Oc(a,d,n,0<=q?l[q]:0);if(r){var r=r[1],p=e.inputs[0].Ia,
r=T.$a(a,n).inputs[r];switch(typeof p){case "number":if("object"==typeof r.Ia)for(var t=r.Ia,r=0;r<t.length;r++)t[r]=p;else"number"==typeof r.Ia&&(r.Ia=p);break;case "object":if("object"==typeof r.Ia)for(t=r.Ia,r=0;r<t.length;r++)t[r]=p[r];else"number"==typeof r.Ia&&(r.Ia=.35*p[0]+.45*p[1]+.2*p[2])}}p=e.outputs;for(r=0;r<p.length;r++)p[r].Ia=e.inputs[0].Ia;-1!=q?l[q]+=1:(k.push(n),l.push(1),g.push(d,n))}if(-1!=f)for(e=T.Oc(a,f,d,0)[0],m=0;m<k.length;m++)for(r=0;r<l[m];r++)h=T.Oc(a,d,k[m],r)[1],T.Ec(a,
f,k[m],[e,h]);for(m=0;m<g.length;m+=2)T.ql(a,g[m],g[m+1],-1)}}}function D(a,b,c){var d;a:{d=a.Ca;for(var e=0;e<d.length;e+=3)if(d[e+1]==b&&1==d[e+2][1]){d=d[e];break a}d=-1}-1!=d&&(e=T.$a(a,d),c.data=e.data,T.ql(a,d,b,-1),0==T.vg(a,d)&&(b=T.ng(a,d,0),-1!=b&&T.ql(a,b,d,-1),T.If(a,d)));c.inputs.splice(1,1)}function N(a){J(a);X(a);M(a)}function M(a){var b={};T.fa(a,function(a,c){if("GEOMETRY_UV"==c.type||"UVMAP"==c.type||"TEX_COORD_UV"==c.type){var d=c.data.value;d in b||(b[d]=[]);b[d].push(a,c)}});
for(var c in b){var d=b[c];if(2<d.length)for(var e=B(c),e=U(a,e,0,void 0,null),f=T.$a(a,e),h=0;h<d.length;h+=2){for(var g=d[h],k=d[h+1],l=[],m={},n=T.vg(a,g),q=0;q<n;q++){var r=T.Ug(a,g,q);r in m||(m[r]=0);var p=T.Oc(a,g,r,m[r]);m[r]++;l.push(g,r,p);p=p.splice(0,p.length);switch(k.type){case "GEOMETRY_UV":p[0]=0;f.outputs[0].Ma=!0;break;case "UVMAP":case "TEX_COORD_UV":p[0]=1,f.outputs[1].Ma=!0}T.Ec(a,e,r,p)}for(q=0;q<l.length;q+=3)T.ql(a,l[q],l[q+1],0);T.If(a,g)}}}function B(a){var b=ga("merged_uv",
"UV_MERGED",[],[{default_value:[0,0,0],identifier:"UV_geom",is_linked:!1,name:"UV_geom"},{default_value:[0,0,0],identifier:"UV_cycles",is_linked:!1,name:"UV_cycles"}]);b.uv_layer=a;return b}function J(a){var b=[];T.fa(a,function(a,c){"GEOMETRY_VC"!=c.type&&"GEOMETRY_NO"!=c.type&&"GEOMETRY_FB"!=c.type&&"GEOMETRY_VW"!=c.type&&"GEOMETRY_GL"!=c.type&&"GEOMETRY_LO"!=c.type&&"GEOMETRY_OR"!=c.type&&"GEOMETRY_BF"!=c.type&&"GEOMETRY_IN"!=c.type||b.push(a,c)});for(var c=[],d=0;d<b.length;d+=2){for(var e=b[d],
f=b[d+1],h=!0,g=0;g<c.length;g++){var k=c[g];if(m(f,k.cg)){for(var h=[],g=T.vg(a,e),l=0;l<g;l++){var n=T.Ug(a,e,l),q=T.Oc(a,e,n,0);h.push(e,n,q);T.Ec(a,k.id,n,q)}for(l=0;l<h.length;l+=3)T.ql(a,h[l],h[l+1],0);T.If(a,e);h=!1;break}}h&&(k={id:e,cg:f},c.push(k))}}function C(a){for(var b={},c=0;c<a.Z.length;c+=2){var d=a.Z[c];b[d]={tq:{},QG:!1}}for(c=0;c<a.Ca.length;c+=3)b[a.Ca[c+1]].tq[a.Ca[c]]=!0;for(d in b)A(d,b);for(d in b)b[d]=Object.keys(b[d].tq).map(function(a){return parseInt(a,10)});return b}
function A(a,b){var c=b[a];if(!c.QG){var d=Qa.W(c),e;for(e in c.tq){A(e,b);var c=b[e],f;for(f in c.tq)d.tq[f]=!0}d.QG=!0;b[a]=d}}function X(a){var b=[];T.fa(a,function(a,c){"TEXTURE_COLOR"!=c.type&&"TEXTURE_NORMAL"!=c.type||b.push(a,c)});if(b.length){for(var c=C(a),d=[],e=0;e<b.length;e+=2){for(var f=b[e],h=b[e+1],g=!0,k=0;k<d.length;k++){var l=d[k];if(!(3<=l.No.length||!m(h,l.cg)||-1<c[f].indexOf(l.id)||-1<c[l.id].indexOf(f))){for(var n=!1,q=0;q<l.No.length;q++){var r=l.No[q].id;if(-1<c[f].indexOf(r)||
-1<c[r].indexOf(f)){n=!0;break}}if(!n){for(var k=[],r=T.zi(a,f),p={},q=0;q<r;q++)n=T.ng(a,f,q),n in p||(p[n]=0),g=T.Oc(a,n,f,p[n]++),k.push(n,f,g);for(var r=[],p=T.vg(a,f),t={},q=0;q<p;q++)n=T.Ug(a,f,q),n in t||(t[n]=0),g=T.Oc(a,f,n,t[n]++),r.push(f,n,g);g=k.concat(r);for(q=0;q<g.length;q+=3)T.ql(a,g[q],g[q+1],0);T.If(a,f);q={id:f,cg:h,hQ:k,iQ:r};l.No.push(q);g=!1;break}}}g&&(l={id:f,cg:h,No:[]},d.push(l))}for(e=0;e<d.length;e++){l=d[e];c=l.No.length;for(k=0;k<c;k++){h=l.No[k];q=h.cg;f=h.hQ;h=h.iQ;
l.cg.inputs[k+1].Ma=q.inputs[0].Ma;l.cg.inputs[k+1].Ia=q.inputs[0].Ia;l.cg.outputs[2*(k+1)].Ma=q.outputs[0].Ma;l.cg.outputs[2*(k+1)].Ia=q.outputs[0].Ia;l.cg.outputs[2*(k+1)+1].Ma=q.outputs[1].Ma;l.cg.outputs[2*(k+1)+1].Ia=q.outputs[1].Ia;for(q=0;q<f.length;q+=3)n=f[q],g=f[q+2],g[1]+=k+1,T.Ec(a,n,l.id,g);for(q=0;q<h.length;q+=3)n=h[q+1],g=h[q+2],g[0]+=2*(k+1),T.Ec(a,l.id,n,g);l.cg.Ya.push(["USE_uv"+(k+2),1])}T.If(a,l.id);T.uh(a,l.id,l.cg)}}}function m(a,b){if(a.type!==b.type)return!1;switch(a.type){case "GEOMETRY_VC":return a.data.value==
b.data.value;case "GEOMETRY_NO":for(var c=a.Ya,d=-1,e=0;e<c.length;e++){var f=c[e];if("USE_NORMAL_IN"==f[0]){d=f[1];break}}c=b.Ya;f=-1;for(e=0;e<c.length;e++){var h=c[e];if("USE_NORMAL_IN"==h[0]){f=h[1];break}}return d===f;case "GEOMETRY_FB":case "GEOMETRY_VW":case "GEOMETRY_GL":case "GEOMETRY_LO":case "GEOMETRY_OR":case "GEOMETRY_BF":case "GEOMETRY_IN":return!0;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":return a.data.du==b.data.du&&a.data.value.Hm==b.data.value.Hm;case "VALUE":case "RGB":return a.Gd==
b.Gd;default:return!1}}function K(a){var b=[],c=[];T.fa(a,function(a,d){"GEOMETRY_VC"==d.type&&b.push(a,d);"GEOMETRY_VW"==d.type&&c.push(a,d)});R(a,b);O(a,c)}function R(a,b){for(var c=0;c<b.length;c+=2){for(var d=b[c],e=b[c+1],f=!1,h=[],g=[],k=[[],[],[]],l=T.vg(a,d),m=0;m<l;m++){var n=T.Ug(a,d,m);if("SEPRGB"!=T.$a(a,n).type){f=!1;break}h.push(d,n);for(var q={},r=T.vg(a,n),f=0;f<r;f++){var p=T.Ug(a,n,f);p in q||(q[p]=0);var t=T.Oc(a,n,p,q[p]++);h.push(n,p);k[t[0]].push(d,p,t)}g.push(n);f=!0}if(f){for(m=
d=l=0;m<k.length;m++)k[m].length&&(l++,d|=1<<2-m);if(l){e.type+=l;e.outputs=[];for(m=0;m<k.length;m++)if(k[m].length)for(e.outputs.push({Ia:0,identifier:"RGB"[m],Ma:!0,name:"RGB"[m]}),f=0;f<k[m].length;f+=3)k[m][f+2][0]=Qa.ip(d,m);for(m=0;m<h.length;m+=2)T.ql(a,h[m],h[m+1],0);for(m=0;m<g.length;m++)T.If(a,g[m]);for(m=0;m<k.length;m++)for(f=0;f<k[m].length;f+=3)T.Ec(a,k[m][f],k[m][f+1],k[m][f+2])}}}}function O(a,b){for(var c=0;c<b.length;c+=2){for(var d=b[c],e=!0,f=[],h=T.vg(a,d),g=0;g<h;g++){var k=
T.Ug(a,d,g);if("B4W_REFLECT"==T.$a(a,k).type){var l=T.Oc(a,d,k,0),m=T.Oc(a,d,k,1);l&&1==l[1]||m&&1==m[1]?e=!1:f.push(d,k)}else e=!1}for(g=0;g<f.length;g+=2)h=a,l=f[g],k=f[g+1],m=T.$a(h,k),m.type+="_WORLD",T.ql(h,l,k,0),m.inputs.splice(0,1),l=T.ng(h,k,0),l!=T.Sy&&(T.Oc(h,l,k,0)[1]=0);e&&T.If(a,d)}}function S(a,b,c,d,e,h){a=a.nodes;for(var g=null,k=0;k<a.length;k++){var l=a[k];e?"GROUP"==l.type&&l.node_tree_name==c&&(g=l):l.type==c&&(g=l)}return g?f(g,b)[0]:(h||ha.error('No "'+c+'" node in node '+d),
-1)}function ga(a,b,c,d){return{name:a,type:b,inputs:c,outputs:d}}function sa(a){var b={name:"",Gd:"",type:"",Le:[],inputs:[],outputs:[],da:[],data:null,Ya:[]};b.name=a.name;b.Gd=a.Gd;b.type=a.type;for(var c=b.Le,d=a.Le,e=0;e<d.length;e++)c.push(Ca(d[e]));c=b.da;d=a.da;for(e=0;e<d.length;e++)c.push(Ca(d[e]));c=b.inputs;d=a.inputs;for(e=0;e<d.length;e++)c.push(ua(d[e]));c=b.outputs;d=a.outputs;for(e=0;e<d.length;e++)c.push(ua(d[e]));c=b.Ya;d=a.Ya;for(e=0;e<d.length;e++)c.push(d[e].slice());b.data=
a.data;return b}function U(a,b,c,d,e){var f=b.name,h=b.name,g=b.type,k=[],l=[],m=[],n=[],q=null,r="uv_layer"in b?b.uv_layer||e&&e.WC||"":"",p="color_layer"in b?b.color_layer||e&&e.XC||"":"",t=[];switch(g){case "BSDF_ANISOTROPIC":case "BSDF_GLASS":case "BSDF_HAIR":case "BSDF_TRANSLUCENT":case "BSDF_REFRACTION":case "BSDF_TOON":case "BSDF_VELVET":case "SUBSURFACE_SCATTERING":case "AMBIENT_OCCLUSION":case "VOLUME_ABSORPTION":case "VOLUME_SCATTER":case "BLACKBODY":case "WAVELENGTH":case "SEPXYZ":case "COMBXYZ":case "LIGHT_FALLOFF":case "TEX_SKY":case "TEX_NOISE":case "TEX_WAVE":case "TEX_MUSGRAVE":case "TEX_GRADIENT":case "TEX_MAGIC":case "TEX_CHECKER":case "TEX_BRICK":case "WIREFRAME":case "TANGENT":case "LIGHT_PATH":case "ATTRIBUTE":case "HOLDOUT":case "HAIR_INFO":case "SCRIPT":l=
ba(b);m=ja(b);ha.warn(g+" node is not fully supported.");break;case "BRIGHTCONTRAST":case "ADD_SHADER":l=ba(b);m=ja(b);break;case "MIX_SHADER":l.push(da(b,"Fac"));var w=da(b,"Shader"),m=w.Ma;l.push(w);(w=da(b,"Shader_001"))||(w=da(b,"Shader.001"));var v=w.Ma;l.push(w);l.push(P("d_color1","d_color1",[0,0,0],m));l.push(P("d_roughness1","d_roughness1",0,m));l.push(P("s_color1","s_color1",[0,0,0],m));l.push(P("s_roughness1","s_roughness1",0,m));l.push(P("metalness1","metalness1",0,m));l.push(P("normal1",
"normal1",[0,0,0],m));l.push(P("e_color1","e_color1",[0,0,0],m));l.push(P("emission1","emission1",0,m));l.push(P("a_color1","a_color1",[0,0,0],m));l.push(P("alpha1","alpha1",1,m));l.push(P("d_color2","d_color2",[0,0,0],v));l.push(P("d_roughness2","d_roughness2",0,v));l.push(P("s_color2","s_color2",[0,0,0],v));l.push(P("s_roughness2","s_roughness2",0,v));l.push(P("metalness2","metalness2",0,v));l.push(P("normal2","normal2",[0,0,0],v));l.push(P("e_color2","e_color2",[0,0,0],v));l.push(P("emission2",
"emission2",0,v));l.push(P("a_color2","a_color2",[0,0,0],v));l.push(P("alpha2","alpha2",1,v));m=W(b,"Shader");w=m.Ma;m=[m,P("d_color","d_color",[0,0,0],w),P("d_roughness","d_roughness",0,w),P("s_color","s_color",[0,0,0],w),P("s_roughness","s_roughness",0,w),P("metalness","metalness",0,w),P("normal","normal",[0,0,0],w),P("e_color","e_color",[0,0,0],w),P("emission","emission",0,w),P("a_color","a_color",[0,0,0],w),P("alpha","alpha",1,w)];break;case "OBJECT_INFO":l=ba(b);m=[];w=W(b,"Location");v=W(b,
"Object Index");r=W(b,"Material Index");p=W(b,"Random");m.push(w);m.push(v);m.push(r);m.push(p);t.push(["USE_LOCATION_OUT",w.Ma|0]);t.push(["USE_OBJ_IND_OUT",v.Ma|0]);t.push(["USE_MAT_IND_OUT",r.Ma|0]);t.push(["USE_RANDOM_OUT",p.Ma|0]);break;case "UVMAP":r||(g="EMPTY_UV");"EMPTY_UV"!=g&&(q=Z("param_"+g+"_a"),w=Z("param_"+g+"_v"),k.push(ca(q)),k.push(ca(w)),n.push(ca(w)),q={name:q,value:r});m=ja(b);break;case "UV_MERGED":q=Z("param_UV_MERGED_a");w=Z("param_UV_MERGED_v");k.push(ca(q));k.push(ca(w));
m.push(W(b,"UV_geom"));m.push(W(b,"UV_cycles"));n.push(ca(w));q={name:q,value:r};break;case "CAMERA":l=[];m=ja(b);break;case "COMBRGB":case "COMBHSV":l=ba(b);m=ja(b);break;case "CURVE_RGB":case "CURVE_VEC":"CURVE_RGB"==g?(ya(b,0,0)&&t.push(["READ_R",1]),ya(b,1,0)&&t.push(["READ_G",1]),ya(b,2,0)&&t.push(["READ_B",1]),ya(b,3,0)&&t.push(["READ_A",1])):(ya(b,0,-1)&&t.push(["READ_R",1]),ya(b,1,-1)&&t.push(["READ_G",1]),ya(b,2,-1)&&t.push(["READ_B",1]));l=ba(b);m=ja(b);q={value:b};break;case "PARTICLE_INFO":l=
ba(b);m=ja(b);for(v=0;v<b.outputs.length;v++){var r=b.outputs[v],p=r.identifier,y=ca("v_param_PART_INFO_"+p.replace(" ",""));if(r.is_linked)switch(p){case "Size":t.push(["PART_INFO_SIZE",ra.X(1)]);break;case "Age":t.push(["PART_INFO_AGE",ra.X(1)]);break;case "Lifetime":t.push(["PART_INFO_LT",ra.X(1)]);break;case "Location":t.push(["PART_INFO_LOC",ra.X(1)]);break;case "Index":q=w=ca("a_param_PART_INFO_"+r.identifier.replace(" ",""));t.push(["PART_INFO_IND",ra.X(1)]);break;case "Velocity":t.push(["PART_INFO_VEL",
ra.X(1)]);break;case "Angular Velocity":t.push(["PART_INFO_A_VEL",ra.X(1)])}"Age"!=p&&"Lifetime"!=p&&"Size"!=p&&(k.push(y),n.push(y))}w&&k.push(w);break;case "NEW_GEOMETRY":case "GEOMETRY":if(!ma(b))return!0;g=aa(b,c);if(!g)return ha.error("Geometry output is not supported"),null;switch(g){case "GEOMETRY_UV":r||(g="EMPTY_UV");"EMPTY_UV"!=g&&(q=Z("param_GEOMETRY_UV_a"),w=Z("param_GEOMETRY_UV_v"),k.push(ca(q)),k.push(ca(w)),n.push(ca(w)),q={name:q,value:r});m.push(W(b,"UV"));break;case "GEOMETRY_VC":p||
(g="EMPTY_VC");"EMPTY_VC"!=g&&(q=Z("param_GEOMETRY_VC_a"),w=Z("param_GEOMETRY_VC_v"),k.push(ca(q)),k.push(ca(w)),n.push(ca(w)),q={name:q,value:p});m.push(W(b,"Vertex Color"));break;case "GEOMETRY_NO":l.push(P("Normal","Normal",[0,0,0],!1));t.push(["USE_NORMAL_IN",0]);m.push(W(b,"Normal"));break;case "GEOMETRY_TRN":g="GEOMETRY_NO";l.push(P("Normal","Normal",[0,0,0],!1));m.push(W(b,"True Normal"));t.push(["USE_NORMAL_IN",0]);ha.warn("Geometry True Normal output is not fully supported.");break;case "GEOMETRY_FB":m.push(W(b,
"Front/Back"));break;case "GEOMETRY_VW":m.push(W(b,"View"));break;case "GEOMETRY_GL":m.push(W(b,"Global")||W(b,"Position"));break;case "GEOMETRY_LO":m.push(W(b,"Local"));break;case "GEOMETRY_OR":w=Z("param_GEOMETRY_OR_v");k.push(ca(w));m.push(W(b,"Orco"));n.push(ca(w));break;case "GEOMETRY_IN":m.push(W(b,"Incoming"));break;case "GEOMETRY_BF":m.push(W(b,"Backfacing"))}break;case "TEX_COORD":if(!ma(b))return!0;g=ea(b,c);switch(g){case "TEX_COORD_UV":r||(g="EMPTY_UV");"EMPTY_UV"!=g&&(q=Z("param_TEX_COORD_UV_a"),
w=Z("param_TEX_COORD_UV_v"),k.push(ca(q)),k.push(ca(w)),n.push(ca(w)),q={name:q,value:r});m.push(W(b,"UV"));break;case "TEX_COORD_NO":m.push(W(b,"Normal"));break;case "TEX_COORD_GE":w=Z("param_TEX_COORD_GE_v");k.push(ca(w));m.push(W(b,"Generated"));n.push(ca(w));break;case "TEX_COORD_OB":m.push(W(b,"Object"));break;case "TEX_COORD_CA":m.push(W(b,"Camera"));break;case "TEX_COORD_WI":m.push(W(b,"Window"));break;case "TEX_COORD_RE":m.push(W(b,"Reflection"))}break;case "GROUP":w=b.node_tree_name;switch(w){case "B4W_LINEAR_TO_SRGB":if(!ia(b,
[1],[1])){q=fa(b,d,e);break}g="B4W_LINEAR_TO_SRGB";break;case "B4W_NORMAL_VIEW":case "B4W_VECTOR_VIEW":if(!ia(b,[1],[1])){q=fa(b,d,e);break}g="B4W_VECTOR_VIEW";break;case "B4W_SRGB_TO_LINEAR":if(!ia(b,[1],[1])){q=fa(b,d,e);break}g="B4W_SRGB_TO_LINEAR";break;case "B4W_REFLECT":if(!ia(b,[1,1],[1])){q=fa(b,d,e);break}g="B4W_REFLECT";break;case "B4W_REFRACTION":if(!ia(b,[1,0],[1])){q=fa(b,d,e);break}g="B4W_REFRACTION";break;case "B4W_PARALLAX":if(!ia(b,[1,1,0,0,0],[1])){q=fa(b,d,e);break}v=Z("param_B4W_PARALLAX_texture");
n.push(ca(v));g="B4W_PARALLAX";break;case "B4W_CLAMP":if(!ia(b,[1],[1])){q=fa(b,d,e);break}g="B4W_CLAMP";break;case "B4W_TRANSLUCENCY":if(!ia(b,[0,0,0,0,0],[0])){q=fa(b,d,e);break}g="B4W_TRANSLUCENCY";break;case "B4W_TIME":if(!ia(b,[],[0])){q=fa(b,d,e);break}g="B4W_TIME";break;case "B4W_SMOOTHSTEP":if(!ia(b,[0,0,0],[0])){q=fa(b,d,e);break}g="B4W_SMOOTHSTEP";break;case "B4W_GLOW_OUTPUT":g="B4W_GLOW_OUTPUT";break;default:q=fa(b,d,e)}l=ba(b);m=ja(b);"B4W_TRANSLUCENCY"==w&&(w=P("TranslucencyParams","TranslucencyParams",
[0,0,0,0]),w.Ma=m[0].Ma,m.push(w));break;case "LAMP":(w=b.lamp)?(w.uuid in Oa?t.push(["LAMP_INDEX",String(Oa[w.uuid])]):(Oa[w.uuid]=Sa,t.push(["LAMP_INDEX",String(Sa++)])),q=Oa):(ha.error("There is no lamp in node: "+b.name),t.push(["LAMP_INDEX",-1]));m.push(W(b,"Color"));m.push(W(b,"Light Vector"));m.push(W(b,"Distance"));m.push(W(b,"Visibility Factor"));break;case "LIGHTING_AMBIENT":l=[P("E","E",[0,0,0],!0),P("A","A",[0,0,0],!0),P("D","D",[0,0,0],!0)];m=[P("color","color",[0,0,0],!0),P("specular",
"specular",[0,0,0],!0)];break;case "LIGHTING_BEGIN":m=[P("E","E",[0,0,0],!0),P("A","A",[0,0,0],!0),P("D","D",[0,0,0],!0),P("S","S",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("dif_params","dif_params",[0,0],!0),P("sp_params","sp_params",[0,0],!0),P("shadow_factor","shadow_factor",0,!0),P("translucency_color","translucency_color",0,!0),P("translucency_params","translucency_params",[0,0,0,0],!0)];break;case "LIGHTING_END":l=[P("color","color",[0,0,0],!0),P("specular","specular",[0,0,0],!0)];break;
case "LIGHTING_LAMP":l=[P("shadow_factor","shadow_factor",0,!0)];m=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("lcolorint","lcolorint",[0,0,0],!0),P("norm_fac","norm_fac",0,!0)];break;case "DIFFUSE_LAMBERT":l=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0)];m=[P("lfactor","lfactor",0,!0)];t.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "DIFFUSE_FRESNEL":case "DIFFUSE_MINNAERT":case "DIFFUSE_OREN_NAYAR":case "DIFFUSE_TOON":l=
[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0),P("dif_params","dif_params",[0,0],!0)];m=[P("lfactor","lfactor",0,!0)];t.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_BLINN":case "SPECULAR_PHONG":case "SPECULAR_COOKTORR":l=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0),P("sp_params","sp_params",[0,0],!0)];m=[P("sfactor","sfactor",0,
!0)];t.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_TOON":case "SPECULAR_WARDISO":l=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0),P("sp_params","sp_params",[0,0],!0)];m=[P("sfactor","sfactor",0,!0)];t.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "BSDF_COMPUTE":l=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0),
P("bsdf_params","bsdf_params",[0,0,0,0],!0)];m=[P("lfactor","lfactor",0,!0),P("sfactor","sfactor",0,!0)];break;case "LIGHTING_APPLY":l=[P("color","color",[0,0,0,0],!0),P("specular","specular",[0,0,0],!0),P("lfactor","lfactor",0,!0),P("sfactor","sfactor",0,!0),P("ldir","ldir",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("translucency_params","translucency_params",[0,0,0,0],!0),P("D","D",[0,0,0],!0),P("S","S",[0,0,0],!0),P("lcolorint","lcolorint",[0,0,0],!0),P("translucency_color","translucency_color",
0,!0)];m=[P("color","color",[0,0,0,0],!0),P("specular","specular",[0,0,0],!0)];break;case "NORMAL":l=ba(b);m=ja(b);w=W(b,"Normal");n.push(ca(Z("param_NORMAL_Normal"),w.Ia,3));break;case "MAPPING":w=b.vector_type;g="MAPPING";l.push(da(b,"Vector"));m.push(W(b,"Vector"));var v=Qa.f32(b.rotation),r=Qa.f32(b.scale),p=Qa.f32(b.translation),y=Ea.create(),z=Qa.oQ(v,Ea.create());if("TEXTURE"==w||"NORMAL"==w)r[0]=r[0]||1,r[1]=r[1]||1,r[2]=r[2]||1;Ea.multiply(z,new Float32Array([r[0],0,0,0,r[1],0,0,0,r[2]]),
y);y=Qa.kT(y,Fa.create());switch(w){case "POINT":y[12]=p[0];y[13]=p[1];y[14]=p[2];break;case "TEXTURE":y[12]=p[0];y[13]=p[1];y[14]=p[2];y=Fa.invert(y,y);break;case "NORMAL":Fa.invert(y,y),Fa.transpose(y,y)}switch(w){case "NORMAL":t.push(["MAPPING_IS_NORMAL",1]);case "TEXTURE":t.push(["MAPPING_TRS_MATRIX_DEF",1]);t.push(["MAPPING_TRS_MATRIX",ra.X(y,16)]);break;case "POINT":0!==Za.length(v)?(t.push(["MAPPING_TRS_MATRIX_DEF",1]),t.push(["MAPPING_TRS_MATRIX",ra.X(y,16)])):(0!==Za.sqrDist(r,Qa.oq)&&(t.push(["MAPPING_SCALE_DEF",
1]),t.push(["MAPPING_SCALE",ra.X(r,3)])),0!==Za.length(p)&&(t.push(["MAPPING_TRANS_DEF",1]),t.push(["MAPPING_TRANS",ra.X(p,3)])));break;case "VECTOR":0!==Za.length(v)?(t.push(["MAPPING_TRS_MATRIX_DEF",1]),t.push(["MAPPING_TRS_MATRIX",ra.X(y,16)])):0!==Za.sqrDist(r,Qa.oq)&&(t.push(["MAPPING_SCALE_DEF",1]),t.push(["MAPPING_SCALE",ra.X(r,3)]))}b.use_min&&(t.push(["MAPPING_MIN_CLIP_DEF",1]),t.push(["MAPPING_MIN_CLIP",ra.X(b.min,3)]));b.use_max&&(t.push(["MAPPING_MAX_CLIP_DEF",1]),t.push(["MAPPING_MAX_CLIP",
ra.X(b.max,3)]));break;case "MATERIAL":case "MATERIAL_EXT":var q=[],w=[],v=[],r=[P("E","E",[0,0,0],!0),P("A","A",[0,0,0],!0),P("D","D",[0,0,0],!0),P("S","S",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("dif_params","dif_params",[0,0],!0),P("sp_params","sp_params",[0,0],!0),P("shadow_factor","shadow_factor",0,!0)],p=[P("color","color",[0,0,0],!0),P("specular","specular",[0,0,0],!0),P("normal","normal",[0,0,0],!0)],y=[W(b,"Color"),W(b,"Alpha"),W(b,"Normal")],z=[],x=da(b,"Color");x.Ia.splice(3);v.push(x);
l.push(x);x=da(b,"Spec");x.Ia.splice(3);v.push(x);l.push(x);(x=da(b,"DiffuseIntensity"))||(x=da(b,"Refl"));x.Ia=b.diffuse_intensity;v.push(x);l.push(x);var B=da(b,"Normal");B.Ia.splice(3);v.push(B);l.push(B);"MATERIAL_EXT"==g?((x=da(b,"Emit"))||(x=P("Emit","Emit",0)),v.push(x),l.push(x),(x=da(b,"Translucency"))?(x.Ia=0,x.name="Translucency",x.identifier="Translucency"):x=P("Translucency","Translucency",0),l.push(x),(x=da(b,"Translucency"))?(x.Ia=[0,0,0,0],x.name="TranslucencyParams",x.identifier=
"TranslucencyParams"):x=P("TranslucencyParams","TranslucencyParams",[0,0,0,0]),l.push(x),m=da(b,"Reflectivity"),x=da(b,"Ray Mirror"),m?(x=m,m="Reflectivity"):x?m="Ray Mirror":(x=m,m="Reflectivity"),x||(x=P(m,m,0)),l.push(x),p.push(x),(x=da(b,"SpecTra"))||(x=P("SpecTra","SpecTra",0)),l.push(x),p.push(x),(x=da(b,"Alpha"))||(x=P("Alpha","Alpha",b.alpha)),l.push(x),p.push(x),y.push(W(b,"Diffuse")),y.push(W(b,"Spec")),q.push(["MATERIAL_EXT",1]),w.push(["MATERIAL_EXT",1])):(v.push(P("emit_intensity","emit_intensity",
0)),p.push(P("reflect_factor","reflect_factor",0)),p.push(P("specular_alpha","specular_alpha",0)),p.push(P("alpha_in","alpha_in",0)),y.push(P("diffuse_out","diffuse_out",0)),y.push(P("spec_out","spec_out",0)),q.push(["MATERIAL_EXT",0]),w.push(["MATERIAL_EXT",0]));z.push(ca(Z("param_MATERIAL_alpha"),b.alpha));z.push(ca(Z("param_MATERIAL_spec_alpha"),b.specular_alpha));m=y;q.push(["USE_MATERIAL_NORMAL",B.Ma|0]);b.use_diffuse&&(q.push(["USE_MATERIAL_DIFFUSE",1]),w.push(["USE_MATERIAL_DIFFUSE",1]));b.use_specular&&
w.push(["USE_MATERIAL_SPECULAR",1]);var x=[],D=0;switch(b.specular_shader){case "COOKTORR":case "PHONG":B=b.specular_hardness;break;case "WARDISO":B=b.specular_slope;break;case "TOON":B=b.specular_toon_size;D=b.specular_toon_smooth;break;case "BLINN":B=b.specular_ior;D=b.specular_hardness;break;default:ha.error("unsupported specular shader: "+b.specular_shader+' (material "'+b.material_name+'")'),B=b.specular_hardness}var C,u;switch(b.diffuse_shader){case "LAMBERT":u=C=0;break;case "OREN_NAYAR":C=
b.roughness;u=0;break;case "FRESNEL":C=b.diffuse_fresnel;u=b.diffuse_fresnel_factor;break;case "MINNAERT":C=b.darkness;u=0;break;case "TOON":C=b.diffuse_toon_size;u=b.diffuse_toon_smooth;break;default:ha.error("unsupported diffuse shader: "+b.diffuse_shader+' (material "'+b.material_name+'")'),u=C=0}x.push(ca(Z("param_MATERIAL_diffuse"),[C,u],2));x.push(ca(Z("param_MATERIAL_spec"),[b.specular_intensity,B,D],3));q.push(["SHADELESS_MAT",b.use_shadeless?1:0]);B={name:b.name,value:{cf:b.specular_shader,
Ue:b.diffuse_shader,yc:b.use_shadeless,oe:b.use_tangent_shading}};q={name:b.name,value:{cf:b.specular_shader,Ue:b.diffuse_shader,yc:b.use_shadeless,oe:b.use_tangent_shading},lT:{name:"material_begin",type:"MATERIAL_BEGIN",inputs:v,outputs:r,da:x,data:B,Ya:q,Le:[]},mT:{name:"material_end",type:"MATERIAL_END",inputs:p,outputs:y,da:z,data:B,Ya:w,Le:[]}};break;case "BSDF_DIFFUSE":l=ba(b);t.push(["USE_NORMAL_IN",l[2].Ma|0]);m=W(b,"BSDF");v=m.Ma;m=[m,P("d_color","d_color",[0,0,0],v),P("d_roughness","d_roughness",
0,v),P("s_color","s_color",[0,0,0],v),P("s_roughness","s_roughness",0,v),P("metalness","metalness",0,v),P("normal","normal",[0,0,0],v),P("e_color","e_color",[0,0,0],v),P("emisson","emisson",0,v),P("a_color","a_color",[0,0,0],v),P("alpha","alpha",1,v)];break;case "BSDF_GLOSSY":l=ba(b);t.push(["USE_NORMAL_IN",l[2].Ma|0]);m=W(b,"BSDF");v=m.Ma;m=[m,P("d_color","d_color",[0,0,0],v),P("d_roughness","d_roughness",0,v),P("s_color","s_color",[0,0,0],v),P("s_roughness","s_roughness",0,v),P("metalness","metalness",
1,v),P("normal","normal",[0,0,0],v),P("e_color","e_color",[0,0,0],v),P("emisson","emisson",0,v),P("a_color","a_color",[0,0,0],v),P("alpha","alpha",1,v)];break;case "BSDF_TRANSPARENT":l=ba(b);m=W(b,"BSDF");v=m.Ma;m=[m,P("d_color","d_color",[0,0,0],v),P("d_roughness","d_roughness",0,v),P("s_color","s_color",[0,0,0],v),P("s_roughness","s_roughness",0,v),P("metalness","metalness",0,v),P("normal","normal",[0,0,0],v),P("e_color","e_color",[0,0,0],v),P("emisson","emisson",0,v),P("a_color","a_color",[0,0,
0],v),P("alpha","alpha",1,v)];break;case "EMISSION":l=ba(b);m=W(b,"Emission");w=m.Ma;m=[m,P("d_color","d_color",[0,0,0],w),P("d_roughness","d_roughness",0,w),P("s_color","s_color",[0,0,0],w),P("s_roughness","s_roughness",0,w),P("metalness","metalness",1,w),P("normal","normal",[0,0,0],w),P("e_color","e_color",[0,0,0],w),P("emisson","emisson",1,w),P("a_color","a_color",[0,0,0],v),P("alpha","alpha",1,v)];break;case "MATH":switch(b.operation){case "ADD":g="MATH_ADD";break;case "SUBTRACT":g="MATH_SUBTRACT";
break;case "MULTIPLY":g="MATH_MULTIPLY";break;case "DIVIDE":g="MATH_DIVIDE";break;case "SINE":g="MATH_SINE";break;case "COSINE":g="MATH_COSINE";break;case "TANGENT":g="MATH_TANGENT";break;case "ARCSINE":g="MATH_ARCSINE";break;case "ARCCOSINE":g="MATH_ARCCOSINE";break;case "ARCTANGENT":g="MATH_ARCTANGENT";break;case "POWER":g="MATH_POWER";break;case "LOGARITHM":g="MATH_LOGARITHM";break;case "MINIMUM":g="MATH_MINIMUM";break;case "MAXIMUM":g="MATH_MAXIMUM";break;case "ROUND":g="MATH_ROUND";break;case "LESS_THAN":g=
"MATH_LESS_THAN";break;case "GREATER_THAN":g="MATH_GREATER_THAN";break;case "MODULO":g="MATH_MODULO";break;case "ABSOLUTE":g="MATH_ABSOLUTE";break;default:return ha.error("Unsupported MATH operation: "+b.operation),null}t.push(["MATH_USE_CLAMP",Number(b.use_clamp)]);l=ba(b);m=ja(b);break;case "MIX_RGB":switch(b.blend_type){case "MIX":g="MIX_RGB_MIX";break;case "ADD":g="MIX_RGB_ADD";break;case "MULTIPLY":g="MIX_RGB_MULTIPLY";break;case "SUBTRACT":g="MIX_RGB_SUBTRACT";break;case "SCREEN":g="MIX_RGB_SCREEN";
break;case "DIVIDE":g="MIX_RGB_DIVIDE";break;case "DIFFERENCE":g="MIX_RGB_DIFFERENCE";break;case "DARKEN":g="MIX_RGB_DARKEN";break;case "LIGHTEN":g="MIX_RGB_LIGHTEN";break;case "OVERLAY":g="MIX_RGB_OVERLAY";break;case "DODGE":g="MIX_RGB_DODGE";break;case "BURN":g="MIX_RGB_BURN";break;case "HUE":g="MIX_RGB_HUE";break;case "SATURATION":g="MIX_RGB_SATURATION";break;case "VALUE":g="MIX_RGB_VALUE";break;case "COLOR":g="MIX_RGB_COLOR";break;case "SOFT_LIGHT":g="MIX_RGB_SOFT_LIGHT";break;case "LINEAR_LIGHT":g=
"MIX_RGB_LINEAR_LIGHT";break;default:return ha.error("Unsupported MIX_RGB blend type: "+b.blend_type),null}t.push(["MIX_RGB_USE_CLAMP",Number(b.use_clamp)]);l=ba(b);m=ja(b);break;case "MIX_WORLD_RGB":case "ADD_WORLD_RGB":l=[P("Factor","Factor",b.fac,b.fac_is_linked),P("Color1","Color1",[0,0,0],b.color1_is_linked),P("Color2","Color1",[0,0,0],b.color2_is_linked)];m=[P("Color","Color",[0,0,0],!0)];break;case "OUTPUT":l=ba(b);m=[];break;case "OUTPUT_MATERIAL":l=ba(b);m=[];q=da(b,"Surface");w=q.Ma;q={name:"output_surface",
type:"OUTPUT_SURFACE",inputs:[q],outputs:[],da:[],data:{value:{EN:"BSDF_COMPUTE"},CN:{name:"bsdf_begin",type:"BSDF_BEGIN",inputs:[q,P("d_color","d_color",[0,0,0],w),P("d_roughness","d_roughness",0,w),P("s_color","s_color",[0,0,0],w),P("s_roughness","s_roughness",0,w),P("metalness","metalness",0,w),P("normal","normal",[0,0,0],w),P("e_color","e_color",[0,0,0],w),P("emission","emission",0,w),P("a_color","a_color",[0,0,0],w),P("alpha","alpha",0,w)],outputs:[P("E","E",[0,0,0],!0),P("A","A",[0,0,0],!0),
P("D","D",[0,0,0],!0),P("S","S",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("bsdf_params","bsdf_params",[0,0,0,0],!0),P("shadow_factor","shadow_factor",0,!0),P("d_color","d_color",[0,0,0],!0),P("s_color","s_color",[0,0,0],!0),P("e_color","e_color",[0,0,0],!0),P("emission","emission",0,!0),P("a_color","a_color",[0,0,0],!0),P("alpha","alpha",0,!0)],da:[],data:null,Ya:[],Le:[]},DN:{name:"bsdf_end",type:"BSDF_END",inputs:[P("color","color",[0,0,0],!0),P("specular","specular",[0,0,0],!0),P("normal",
"normal",[0,0,0],!0),P("bsdf_params","bsdf_params",[0,0,0,0],!0),P("d_color","d_color",[0,0,0],!0),P("s_color","s_color",[0,0,0],!0),P("e_color","e_color",[0,0,0],!0),P("emission","emission",0,!0),P("a_color","a_color",[0,0,0],!0),P("alpha","alpha",0,!0)],outputs:[P("color","color",[0,0,0],w)],da:[],data:null,Ya:[],Le:[]}},Ya:[],Le:[]};q={name:b.name,IT:q,$P:{name:"displacement_bump",type:"DISPLACEMENT_BUMP",inputs:[P("Height","Height",0,!0)],outputs:[P("Normal","Normal",[0,0,0],!1)],da:[],data:null,
Ya:[],Le:[]}};break;case "OUTPUT_WORLD":l=ba(b);m=ja(b);q=da(b,"Surface");q={name:"output_world_surface",type:"OUTPUT_WORLD_SURFACE",inputs:[q],outputs:[],da:[],data:null,Ya:[],Le:[]};q={name:b.name,JT:q};break;case "RGB":w=b.name;w={name:"-1",value:w};n.push(w);m.push(W(b,"Color"));break;case "SEPRGB":case "SEPHSV":l=ba(b);m=ja(b);break;case "TEX_ENVIRONMENT":(w=b.image)?(g="TEXTURE_ENVIRONMENT_"+b.projection,"NONE"==b.color_space?t.push(["NON_COLOR",1]):t.push(["NON_COLOR",0]),l.push(da(b,"Vector")),
t.push(["USE_VECTOR_IN",l[0].Ma|0]),m.push(W(b,"Color")),v=Z("param_TEXTURE_texture"),n.push(ca(v)),q=za.rj(za.sh,!1),q.repeat=!0,q.source="IMAGE",Ja.cz&&(q.anisotropic_filtering=16),za.aE(q,w),q={Dq:b.name,du:"",name:v,value:q}):g="TEXTURE_EMPTY";break;case "TEX_IMAGE":if(w=b.image){g="TEXTURE_COLOR";"NONE"==b.color_space?t.push(["NON_COLOR",1]):t.push(["NON_COLOR",0]);t.push(["CONVERT_UV",0]);for(v=0;4>v;++v)v?(x=P("Vector"+v,"Vector"+v,[0,0,0],!1),r=P("Color"+v,"Color"+v,[0,0,0],!1),p=P("Alpha"+
v,"Alpha"+v,0,!1)):(x=da(b,"Vector"),r=W(b,"Color"),p=W(b,"Alpha")),l.push(x),m.push(r),m.push(p);v=Z("param_TEXTURE_texture");n.push(ca(v));q=za.rj(za.sh,!1);q.repeat="REPEAT"==b.extension;q.source="IMAGE";za.aE(q,w);q={Dq:b.name,du:"",name:v,value:q}}else g="TEXTURE_EMPTY";break;case "TEXTURE":g=wa(b);if("TEXTURE_EMPTY"==g)m.push(W(b,"Color")),m.push(W(b,"Normal")),m.push(W(b,"Value"));else if("TEXTURE_ENVIRONMENT_CUBE"==g)l.push(da(b,"Vector")),m.push(W(b,"Color")),m.push(W(b,"Value"));else{if("TEXTURE_NORMAL"==
g&&"ENVIRONMENT_MAP"==b.texture.type)return ha.error("Wrong output for ENVIRONMENT_MAP texture: "+b.name),null;"TEXTURE_COLOR"==g&&(w=!1,v=b.texture.image,!v||"Non-Color"!=v.colorspace_settings_name&&"Non-Colour Data"!=v.colorspace_settings_name||(w=!0),t.push(["NON_COLOR",Number(w)]),t.push(["CONVERT_UV",1]));for(v=0;4>v;++v)w="TEXTURE_COLOR"==g?"Color":"Normal",v?(x=P("Vector"+v,"Vector"+v,[0,0,0],!1),r=P(w+v,w+v,[0,0,0],!1),p=P("Value"+v,"Value"+v,0,!1)):(x=da(b,"Vector"),r=W(b,w),p=W(b,"Value")),
l.push(x),m.push(r),m.push(p)}"TEXTURE_EMPTY"!=g&&(v=Z("param_TEXTURE_texture"),n.push(ca(v)),q=b.texture.J,q={Dq:b.texture.name,du:b.texture.uuid,name:v,value:q});break;case "VALTORGB":l=ba(b);m=ja(b);q={value:b};w=b.color_ramp.interpolation;"CONSTANT"!=w&&"LINEAR"!=w&&ha.warn("Color Ramp node is not fully supported.");break;case "VALUE":g="VALUE";w=b.name;w={name:"-1",value:w};n.push(w);m.push(W(b,"Value"));break;case "VECT_MATH":switch(b.operation){case "ADD":g="VECT_MATH_ADD";break;case "SUBTRACT":g=
"VECT_MATH_SUBTRACT";break;case "AVERAGE":g="VECT_MATH_AVERAGE";break;case "DOT_PRODUCT":g="VECT_MATH_DOT_PRODUCT";break;case "CROSS_PRODUCT":g="VECT_MATH_CROSS_PRODUCT";break;case "NORMALIZE":g="VECT_MATH_NORMALIZE";break;default:return ha.error("Unsupported VECT_MATH operation: "+b.operation),null}l=ba(b);m=ja(b);break;case "VECT_TRANSFORM":switch(b.vector_type){case "POINT":t.push(["VECTOR_TYPE",ra.X(0)]);break;case "VECTOR":t.push(["VECTOR_TYPE",ra.X(1)]);break;case "NORMAL":t.push(["VECTOR_TYPE",
ra.X(2)]);break;default:return ha.error("Unsupported VECT_TRANSFORM vector_type: "+b.vector_type),null}l=b.convert_from;m=b.convert_to;if("WORLD"==l)if("WORLD"==m)l=0;else if("OBJECT"==m)l=1;else if("CAMERA"==m)l=2;else return ha.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("OBJECT"==l)if("WORLD"==m)l=3;else if("OBJECT"==m)l=4;else if("CAMERA"==m)l=5;else return ha.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("CAMERA"==l)if("WORLD"==m)l=
6;else if("OBJECT"==m)l=7;else if("CAMERA"==m)l=8;else return ha.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else return ha.error("Unsupported VECT_TRANSFORM convert_from: "+b.convert_from),null;t.push(["CONVERT_TYPE",ra.X(l)]);l=ba(b);m=ja(b);break;case "NORMAL_MAP":switch(b.space){case "TANGENT":w=0;break;case "OBJECT":w=1;break;case "WORLD":w=2;break;case "BLENDER_OBJECT":w=3;break;case "BLENDER_WORLD":w=4;break;default:return ha.error("Unsupported NORMAL_MAP space: "+b.space),
null}t.push(["SPACE",ra.X(w)]);l.push(da(b,"Strength"));l.push(da(b,"Color"));l.push(P("Normal","Normal",[0,0,0],!1));t.push(["USE_NORMAL_IN",0]);m.push(W(b,"Normal"));break;case "FRESNEL":B=da(b,"Normal");l.push(da(b,"IOR"));l.push(B);m.push(W(b,"Fac"));t.push(["USE_FRESNEL_NORMAL",B.Ma|0]);break;case "LAYER_WEIGHT":B=da(b,"Normal");l.push(da(b,"Blend"));l.push(B);m=ja(b);t.push(["USE_NORMAL_IN",B.Ma|0]);break;case "BUMP":B=da(b,"Normal");t.push(["INVERT",b.invert?1:0]);t.push(["USE_NORMAL_IN",B.Ma|
0]);l=ba(b);m=ja(b);break;case "BACKGROUND":l=ba(b);m=ja(b);break;default:l=ba(b),m=ja(b)}h={name:f,Gd:h,type:g,Le:k,inputs:l,outputs:m,da:n,data:q,Ya:t};f=T.Aj(a);T.uh(a,f,h);if(!(h="GEOMETRY"!=b.type&&"TEX_COORD"!=b.type&&"NEW_GEOMETRY"!=b.type)){a:{h=b.outputs;for(k=g=0;k<h.length;k++)if(h[k].is_linked&&g++>c){h=!0;break a}h=!1}h=!h}return h||null!=U(a,b,++c,d,e)?f:null}function ia(a,b,c){for(var d=a.inputs,e=a.outputs,f=a.node_tree_name,g=0;g<b.length;g++){var h=d[g],k=b[g];if(!h||h.default_value instanceof
Array!=k)return ha.warn('Wrong inputs for custom node group "'+a.name+'" of type: "',f,'".Processing as general node group.'),!1}for(g=0;g<c.length;g++)if(b=e[g],d=c[g],!b||b.default_value instanceof Array!=d)return ha.warn('Wrong outputs for custom node group "'+a.name+'" of type: "',f,'".Processing as general node group.'),!1;return!0}function fa(a,b,c){var d=a.node_group.node_tree,f={},g;for(g in d)if("links"==g||"nodes"==g){f[g]=[];for(var h=0;h<d[g].length;h++){f[g][h]={};for(var k in d[g][h])if("links"==
g){f[g][h][k]={};for(var l in d[g][h][k])f[g][h][k][l]=pa(d[g][h][k][l])}else f[g][h][k]=pa(d[g][h][k])}}else f[g]=pa(d[g]);h=a.node_tree_name;if("B4W_REPLACE"==h||"B4W_LEVELS_OF_QUALITY"==h)d=ga("Group input","GROUP_INPUT",[],a.inputs),g=ga("Group output","GROUP_OUTPUT",a.outputs,[]),h="B4W_REPLACE"==h||"B4W_LEVELS_OF_QUALITY"==h&&(Ja.quality==Na.P_LOW||Ja.RF)?{from_node:d,from_socket:d.outputs[1],to_node:g,to_socket:g.inputs[0]}:{from_node:d,from_socket:d.outputs[0],to_node:g,to_socket:g.inputs[0]},
f.nodes=[d,g],f.links=[h];d=a.name;g=f.nodes;h=f.links;for(k=0;k<g.length;k++)g[k].name=ta(g[k].type,d,g[k].name);for(k=0;k<h.length;k++)h[k].from_node.name=ta(h[k].from_node.type,d,h[k].from_node.name),h[k].to_node.name=ta(h[k].to_node.type,d,h[k].to_node.name);return{BT:e(f,a.node_group.uuid,!0,b,c).wa,CT:f.links}}function pa(a){var b=typeof a;return"string"!=b&&"number"!=b&&"boolean"!=b&&a?Qa.Pq(a):a}function Z(a){Pa[a]||(Pa[a]=0);var b=a+"_"+Pa[a],b=b.replace(/ /g,"_").replace(/\//g,"_");Pa[a]++;
return b}function ma(a){a=a.outputs;for(var b=0;b<a.length;b++)if(a[b].is_linked)return!0;return!1}function aa(a,b){for(var c=a.outputs,d=0,e=0;e<c.length;e++){var f=c[e];if(f.is_linked&&!(d++<b))switch(f.identifier){case "UV":return"GEOMETRY_UV";case "Vertex Color":return"GEOMETRY_VC";case "Normal":return"GEOMETRY_NO";case "True Normal":return"GEOMETRY_TRN";case "Front/Back":return"GEOMETRY_FB";case "View":return"GEOMETRY_VW";case "Global":case "Position":return"GEOMETRY_GL";case "Local":return"GEOMETRY_LO";
case "Orco":return"GEOMETRY_OR";case "Incoming":return"GEOMETRY_IN";case "Backfacing":return"GEOMETRY_BF";default:return null}}}function ea(a,b){for(var c=a.outputs,d=0,e=0;e<c.length;e++){var f=c[e];if(f.is_linked&&!(d++<b))switch(f.identifier){case "Camera":return"TEX_COORD_CA";case "Generated":return"TEX_COORD_GE";case "Normal":return"TEX_COORD_NO";case "Object":return"TEX_COORD_OB";case "Reflection":return"TEX_COORD_RE";case "UV":return"TEX_COORD_UV";case "Window":return"TEX_COORD_WI";default:return null}}}
function wa(a){if(!a.texture||!a.texture.J)return"TEXTURE_EMPTY";for(var b=a.outputs,c=!1,d=!1,e=!1,f=0;f<b.length;f++){var g=b[f];if(g.is_linked)switch(g.identifier){case "Color":c=!0;break;case "Normal":d=!0;break;case "Value":e=!0;break;default:Qa.K("Unknown texture output")}}if(c)return d&&ha.warn('Node "'+a.name+'" has both Color and Normal outputs. Normal will be omitted.'),"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR";if(d)return"TEXTURE_NORMAL";if(e)return"ENVIRONMENT_MAP"==
a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR"}function da(a,b){for(var c=a.inputs,d=0;d<c.length;d++){var e=c[d];if(e.identifier==b)return Ga(e)}return null}function W(a,b){for(var c=a.outputs,d=0;d<c.length;d++){var e=c[d];if(e.identifier==b)return Ga(e)}return null}function Ga(a){var b=a.name,c=a.identifier,d=a.is_linked;a=a.default_value;a=Qa.is_vector(a)?a.slice(0):a;return{name:b,identifier:c,Ma:d,Ia:a}}function P(a,b,c,d){return{name:a,identifier:b,Ma:d,Ia:c}}function ua(a){return P(a.name,
a.identifier,a.Ia,a.Ma)}function ba(a){for(var b=[],c=0;c<a.inputs.length;c++){var d=Ga(a.inputs[c]);d.Ia.length&&d.Ia.splice(3);b.push(d)}return b}function ja(a){for(var b=[],c=0;c<a.outputs.length;c++){var d=Ga(a.outputs[c]);b.push(d)}return b}function ca(a,b,c){b=null===b||void 0===b?null:ra.X(b,c);return{name:a,value:b}}function Ca(a){return{name:a.name,value:a.value}}function la(a){return a.slice()}function V(a,b,c,d,e,f){var g=[],h=f.from_socket.identifier;f=f.to_socket.identifier;var k=d.outputs;
for(d=0;d<k.length;d++)if(k[d].identifier==h){g.push(d);break}e=e.inputs;for(d=0;d<e.length;d++)if(e[d].identifier==f){g.push(d);break}2==g.length&&T.Ec(a,b,c,g);return!0}function ta(a,b,c){return"GROUP_INPUT"==a?b+"*GI*"+c:"GROUP_OUTPUT"==a?b+"*GO*"+c:b+"%join%"+c}function xa(a){var b=[];T.fa(a,function(a,c){"GROUP"==c.type&&b.push(c)});return b}function I(a,b,c){for(var d=0;d<c.length;d++){var e=c[d].data.BT,f=c[d].data.CT;if(!e)return!1;T.fa(e,function(b,c){T.uh(a,T.Aj(a),c)});for(e=0;e<f.length;e++)b.push(f[e]);
na(c[d],b,a)}return!0}function Ka(a,b,c,d,e,f){switch(a.type){case "GROUP":a.name==b&&d.push(c);break;case "GROUP_INPUT":a.name.indexOf(b+"*GI*")||e.push(c);break;case "GROUP_OUTPUT":a.name.indexOf(b+"*GO*")||f.push(c)}}function Va(a,b,c){for(var d=[],e=0;e<c.length;e++){for(var f=c[e],g=null,h=0;h<b.length;h++)if(f.from_socket.identifier==b[h].to_socket.identifier){g=b[h];break}g?(f.from_node=g.from_node,f.from_socket=g.from_socket):d.push(f)}for(e=0;e<b.length;e++)a.splice(a.indexOf(b[e]),1);return d}
function Ia(a,b){if(b.length)for(var c=b[0].from_node.name,d=0;d<a.length;d++)a[d].from_node.name==c&&b.push(a[d])}function va(a,b,c,d){for(var e=0;e<d.length;e++){for(var g=d[e],h,k=0;k<c.inputs.length;k++)if(g.from_socket.identifier==c.inputs[k].identifier){h=c.inputs[k].Ia;break}for(var k=g,l=b,m=h,n=f(k.to_node,l),q=0;q<n.length;q++)for(var r=T.$a(l,n[q]),p=0;p<r.inputs.length;p++){var t=r.inputs[p];if(t.identifier==k.to_socket.identifier){r=t.Ia instanceof Object?0:1;if((m instanceof Object?
0:1)==r)t.Ia=m;else switch(r){case 0:t=t.Ia;t[0]=t[1]=t[2]=m;break;case 1:t.Ia=(m[0]+m[1]+m[2])/3}break}}g=a.indexOf(g);-1!=g&&a.splice(g,1)}}function na(a,b,c){for(var d=a.name,e=[],f=[],g=[],h=[],k=0;k<b.length;k++){var l=b[k];Ka(l.from_node,d,l,e,g,h);Ka(l.to_node,d,l,f,g,h)}f=Va(b,f,g);e=Va(b,h,e);Ia(b,f);va(b,c,a,f);if(e.length){var m;T.fa(c,function(a,b){"GROUP_OUTPUT"!=b.type||b.name.indexOf(d+"*GO*")||(m=b)});va(b,c,m,e)}}function Y(a){var b=[],c=[];T.fa(a,function(a,d){switch(d.type){case "VALTORGB":b.push(d);
break;case "CURVE_VEC":case "CURVE_RGB":c.push(d)}});var d=0,e=a=null,f=b.length+c.length;if(b.length){a=za.sQ(b,za.xK);for(var g=0;g<b.length;g++)b[g].Ya.push(["NODE_TEX_ROW",ra.X((d+.5)/f)]),d++}if(c.length)for(e=za.wQ(c,za.iD),g=0;g<c.length;g++)c[g].Ya.push(["NODE_TEX_ROW",ra.X((d+.5)/f)]),d++;g=null;a&&e?(g=new Uint8Array(a.length+e.length),g.set(a),g.set(e,a.length)):a?g=a:g=e;a=g?za.lF(g,za.iD):null;for(g=0;g<b.length;g++)b[g].data.Oa=a;for(g=0;g<c.length;g++)c[g].data.Oa=a}function ya(a,b,
c){a=a.curve_mapping.curves_data[b];return 2==a.length&&a[0][0]<c+.01&&a[0][1]<c+.01&&.99<a[1][0]&&.99<a[1][1]?!1:!0}var Na=u("__config"),oa=u("__debug"),T=u("__graph"),Ea=u("__mat3"),Fa=u("__mat4"),L=u("__objects"),ha=u("__print"),ra=u("__shaders"),Aa=u("__scenes"),Qa=u("__util"),Za=u("__vec3"),za=u("__textures"),Pa={},Ra={},La={},Oa={},Sa=0,Ja=Na.L;a.dY=0;a.PD=1;a.OD=2;a.ND=3;a.cY=4;a.MD=5;a.LD=6;a.KD=7;a.bY=8;a.qL=0;a.pL=1;a.VX=2;a.oL=3;a.UX=4;a.xv=function(a){return Ra[a]};a.kO=function(a){delete Ra[a]};
a.eF=function(a,b,c,d){return e(a,b,!1,c,d)};a.Gz=function(a,c){var d=Aa.get_active(),d=H(a,"MAIN",d.uuid);if(d in La)return La[d];var e=T.create(),f={name:"LIGHTING_BEGIN",type:"LIGHTING_BEGIN"},g=U(e,f,0,null,null),f={name:"LIGHTING_END",type:"LIGHTING_END"},f=U(e,f,0,null,null);b(e,c,g,f,[[g,[8,10]],[g,[9,6]]]);F(e);return La[d]=e};a.Uq=function(a){var b=[],c={};Pa={};var d=T.DC(a);T.fa(d,function(a,d){var e;e=[];for(var f=[],g=[],h=[],k=[],l=[],m=0;m<d.inputs.length;m++){var n=d.inputs[m];if(n.Ma)e.push(null),
f.push(null);else{e.push(Z("in_"+d.type+"_"+n.identifier.replace(/\./g,"")));var q=ra.X(n.Ia,0);Ja.jC&&(0<=d.type.indexOf("MIX_RGB_")&&("Color1"==n.identifier||"Color2"==n.identifier||"Fac"==n.identifier)||0<=d.type.indexOf("MATH_")&&("Value"==n.identifier||"Value_001"==n.identifier||"Value.001"==n.identifier)||0<=d.type.indexOf("VECT_MATH_")&&("Vector_001"==n.identifier||"Vector.001"==n.identifier)||0<=d.type.indexOf("LIGHTING_APPLY")||0<=d.type.indexOf("MATERIAL_END")||0<=d.type.indexOf("MATERIAL_BEGIN"))&&
(n=q,n=n.replace(/(,)/g,"$1 "),n=n.replace(/(^|[^0-9]|\s)(0\.0)($|[^0-9]|\s)/g,"$1_0_0$3"),n=n.replace(/(^|[^0-9]|\s)(1\.0)($|[^0-9]|\s)/g,"$1_1_0$3"),q=n=n.replace(/\s+/g,""));f.push(q)}}for(m=0;m<d.outputs.length;m++)n=d.outputs[m],n.Ma?g.push(null):g.push(Z("out_"+d.type+"_"+n.identifier.replace(/\./g,"")));for(m=0;m<d.da.length;m++)n=d.da[m],h.push(n.name),k.push(n.value);for(m=0;m<d.Le.length;m++)l.push(d.Le[m].name);e={id:d.type,inputs:e,IA:f,outputs:g,da:h,$o:k,Le:l,Ya:JSON.parse(JSON.stringify(d.Ya))};
b.push(e);c[a]=e});T.oh(d,function(a,b,e){var f=T.$a(d,a),g=f.outputs[e[0]];a=c[a].outputs;b=c[b].inputs;f=a[e[0]]||Z("out_"+f.type+"_"+g.identifier.replace(/\./g,""));a[e[0]]=f;b[e[1]]=f});return b};a.LE=function(a){if(a.Nd)for(var b=0;b<a.Nd.nodes.length;b++){var c=a.Nd.nodes[b];if("GROUP"==c.type&&"B4W_GLOW_OUTPUT"==c.node_tree_name)return!0}return!1};a.l_=function(a,b,c){ha.log("\n====== USER: "+b+", MATERIAL: "+c+" ======\n"+oa.DT(a)+"\n=============================================================")};
a.cleanup=function(){for(var a in Ra)delete Ra[a];for(a in La)delete La[a];for(var b in Oa)delete Oa[b];Sa=0};a.GR=function(a){var b=-1;T.fa(a,function(a,c){if("TEXTURE_ENVIRONMENT_EQUIRECTANGULAR"==c.type||"TEXTURE_ENVIRONMENT_MIRROR_BALL"==c.type)b=Math.max(b,c.data.value.height)});return b}};b4w.module.__animation=function(a,u){function e(a,b){var c=a.pa[b];c&&c.dv&&c.or&&(c.or=!1,c.dv(a,b))}function c(a,b,c){c=a.pa[c];c.type=30;var d=b.Ba,e=b.kb-d+1;c.start=d;c.length=e;c.hg=d;c.gj=b.name;for(e=d=0;e<a.bd.length;e++){var f=a.bd[e];if(f==b)break;else d+=f.kb-f.Ba+1}c.cK=d}function b(a,b){a.type=50;a.gj=b.name;a.start=b.Ba;a.length=b.kb-a.start;b.cyclic||(a.length+=b.Ur)}function n(a,b){var c={type:null,gj:null,Xy:null,YD:0,WD:null,oj:new Int8Array(8),Nb:null,trans:null,jj:null,kj:null,
nC:[],play:!1,behavior:20,hg:0,start:0,length:0,MC:0,NB:0,or:!1,cK:null,speed:1,volume:null,pitch:null,color:null,jg:null,Xd:null,Md:null,fog_intensity:null,fog_depth:null,fog_start:null,fog_height:null,xm:null,IH:[],Gf:[],HH:[],Ff:[],Vo:null};if(!a.pa.length)for(var d=0;8>d;d++)a.pa.push(null);a.pa[b]=c}function g(a){return a.replace(/_B4W_BAKED$/,"")}function p(a,b){return{Zm:a,action:b}}function k(a,b,c){if(a.animation_data){var d=a.animation_data.action;d&&60==d.J.type&&b.push(p(c,d))}a=a.nodes;
for(d=0;d<a.length;d++){var e=a[d];if(e.node_group){var f=e.node_group.node_tree;if(f){var g=c.slice();g.push(e.name);k(f,b,g)}}}}function x(a){return Z.is_mesh(a)&&a.A.bd?!0:!1}function v(a,b,c){var e=a.pa;if(-1==c)for(c=0;8>c;c++){var f=e[c];f&&(f.hg=b,d(a,0,c,!0))}else if(f=e[c])f.hg=b,d(a,0,c,!0)}function h(a,b,c){if(-1==b)for(b=0;8>b;b++){var d=a[b];d&&c(d)}else(d=a[b])&&c(d)}function d(a,b,c,d){r(a,b,c,d);e(a,c);a.A.fj&&(D(a,b),w(a,b))}function t(a,b,c,d){var e=c.frame_range;if(e[0]>e[1])return ea.warn('Incompatible action "'+
c.name+'" has been applied to object "'+a.name+'"'),!1;var f=c.J,g=a.pa[d];g.gj=c.name;g.Xy=e;g.YD=f.WH;g.WD=f.qE;g.oj.set(f.oj);g.start=e[0];g.length=e[1]-e[0];g.hg=e[0];switch(f.type){case 10:if(Z.is_armature(a)){g.type=10;var h=q(a,b,c);h||(h=N(c,a.A.fg),G(a,b,c,h));g.trans=h.trans;g.Nb=h.Nb;g.jj=h.jj;g.kj=h.kj;H(a,d,c,h)}break;case 40:Z.is_speaker(a)&&(g.volume=f.da.volume||null,g.pitch=f.da.pitch||null,g.type=40);break;case 70:Z.is_lamp(a)&&(g.color=f.da.color||null,g.jg=f.da.energy||null,g.type=
70);break;case 60:if("MESH"==a.type||"WORLD"==a.type){g.type=60;var e=Z.is_world(a),k=[],m=[],n=[],r=[],p=[];c=c.J;var t=b?b[0]:null;for(h in c.da){var w;w=b;var v=h.match(/"(.*?)"/)[1];if(w&&1<w.length){for(var y=w[1],x=2;x<w.length;x++)y=y+"%join%"+w[x];y+="%join%"+v}else y=v;w=y;for(v=0;v<a.S.length;v++)for(y=a.S[v].$,x=0;x<y.length;x++){var z=y[x];if(e||!t||-1!=z.cc.indexOf(t)){var B=z.Ff,D;D=h;var C=w,u=c,E=m,L=k,A=z.Gf;if(A){for(var J=!1,ya=0;ya<A.length;ya+=3)C==A[ya]&&(L.push(4*A[ya+1]+A[ya+
2]),E.push(new Float32Array(u.da[D])),J=!0);D=J}else D=!1;C=h;u=w;E=c;L=r;A=n;if(B){J=!1;for(ya=0;ya<B.length;ya+=2)u==B[ya]&&(A.push(B[ya+1]),L.push(new Float32Array(E.da[C])),J=!0);B=J}else B=!1;(D||B)&&p.push(z)}}}g.Gf=k;g.IH=m;g.Ff=n;g.HH=r;g.Vo=p}break;case 20:if(h=f.da.tsr)g.type=20,e=q(a,b,c),e||(e=F(c,h),G(a,b,c,e)),g.trans=e.trans,g.Nb=e.Nb,ma.uB(a)&&ma.aX(a,g.trans[0],g.Nb[0]);else return ea.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"'),!1;break;case 80:Z.is_world(a)&&
(g.jg=f.da["light_settings.environment_energy"]||null,g.Md=f.da.horizon_color||null,g.Xd=f.da.zenith_color||null,g.fog_intensity=f.da["mist_settings.intensity"]||null,g.fog_depth=f.da["mist_settings.depth"]||null,g.fog_start=f.da["mist_settings.start"]||null,g.fog_height=f.da["mist_settings.height"]||null,g.xm=f.da.b4w_fog_color||null,g.type=80)}Z.is_armature(a)&&10!=f.type&&l(a,d);return!0}function q(a,b,c){a=a.Pn;b=b?b.join("%join%"):null;for(var d=0;d<a.length;d+=3)if(c==a[d]&&b==a[d+1])return a[d+
2];return null}function G(a,b,c,d){a.Pn.push(c,b?b.join("%join%"):null,d)}function H(a,b,c,d){var e=a.A,f=e.op,g=a.pa[b],h=g.nC,k;a:{k=e.tx;for(var l=0;l<k.length;l+=2)if(c==k[l]){k=k[l+1];break a}k=null}if(k)g.nC=k;else{for(g=0;g<f.length;g++){k=f[g].gi;for(var l=[],m=[],n=d.trans,q=d.Nb,r=0;r<n.length;r++){var p=B(n[r],q[r],k);l.push(p.trans);m.push(p.Nb)}h.push({trans:l,Nb:m})}e.tx.push(c,h)}e.fj&&(c=e.ei,b>c[1]?(d=c[1],c[1]=b,c[0]=d):b>c[0]&&b<c[1]&&(c[0]=b),z(a))}function z(a){var b=a.A.ei;if(-1!=
b[0]&&-1!=b[1]){var c=a.pa;a=c[b[1]].hg;var d=Math.floor(a),e=a-d,b=c[b[0]];a=b.hg;d=Math.floor(a);b.hg=d+e}}function l(a,b){var c=a.A.ei,d=c[1];c[0]=-1;c[1]=-1;if(-1!=b)for(var e=a.pa;0<=d;d--){var f=e[d];if(f&&10==f.type)if(d>c[1])c[1]=d;else{d>c[0]&&(c[1]=d);break}}}function F(a,b){for(var c=a.J.tB,d=[],e=[],f=0;f<c;f++)d.push(b.subarray(8*f,8*f+4)),e.push(b.subarray(8*f+4,8*f+8));return{trans:d,Nb:e}}function r(a,b,c,d){if((c=a.pa[c])&&null!=c.type&&(c.play||d)){var e=a.A,f=c.hg,g=c.start,h=c.length,
f=f+c.speed*b*ua.Dd(),k=c.type,l=c.speed;if(0<=l&&f>=g+h||0>l&&f<g)switch(d||(c.or=!0),c.behavior){case 10:0<=l?f=(f-g)%h+g:f=g+h-1E-6;break;case 20:0<=l?f=g:f=g+h-1E-6;c.play=!1;break;case 30:0<=l?f=g+h-1E-6:f=g,c.play=!1}c.hg=f;switch(k){case 10:if(!e.fj){d=E(c);b=d[0];var m=d[1];d=d[2];e.Qd=c.Nb[b];e.Fe=c.Nb[m];e.Wd=c.trans[b];e.Ke=c.trans[m];e.Bf=d;d=e.op;c=c.nC;for(var n=0;n<d.length;n++){var q=d[n],r=c[n];q.Qd=r.Nb[b];q.Fe=r.Nb[m];q.Wd=r.trans[b];q.Ke=r.trans[m];q.Bf=e.Bf}ba.V(a)}break;case 20:d=
E(c);var e=xa,m=d[0],n=d[1],q=d[2],r=c.trans,p=r[m][1],f=r[m][2],g=r[n][1],h=r[n][2];e[0]=(1-q)*r[m][0]+q*r[n][0];e[1]=(1-q)*p+q*g;e[2]=(1-q)*f+q*h;m=na;f=d[0];n=d[1];q=d[2];r=c.Nb;p=Y;p[0]=r[f][0];p[1]=r[f][1];p[2]=r[f][2];p[3]=r[f][3];f=ya;f[0]=r[n][0];f[1]=r[n][1];f[2]=r[n][2];f[3]=r[n][3];wa.slerp(p,f,q,m);n=d[2];q=c.trans;d=(1-n)*q[d[0]][3]+n*q[d[1]][3];a.parent&&a.Vw&&(n=oa,ja.set_sep(e,d,m,n),ja.multiply(a.Vw,n,n),ja.Lb(n,e),ja.vb(n,m),d=ja.get_scale(n));c.MC&&(n=I,ba.get_translation(a,n),
ca.smooth_v(e,n,b,c.MC,e));c.NB&&(n=Y,ba.get_rotation(a,n),ca.ZI(m,n,b,c.NB,m));f=c.oj;f[0]&&ba.set_translation_rel(a,e);f[1]&&ba.set_rotation_rel(a,m);f[2]&&ba.set_scale_rel(a,d);ba.V(a);aa.sync_transform(a);break;case 30:d=c.hg-c.start;0>d&&(d=0);d>=c.length&&(d=c.length);a=Math.floor(d);b=a+1;d-=a;10!=c.behavior&&b==c.length&&(b=--a,d=1);c=c.cK;ta[0]=a+c;ta[1]=b+c;ta[2]=d;d=ta;e.py=d[0];e.qy=d[2];break;case 40:d=E(c);b=d[0];e=d[1];d=d[2];c.volume&&Ga.set_volume(a,(1-d)*c.volume[b]+d*c.volume[e]);
c.pitch&&Ga.playrate(a,(1-d)*c.pitch[b]+d*c.pitch[e]);break;case 50:b=10==c.behavior?(f-g)/ua.Dd():f/ua.Dd();ma.tV(a,c.gj,b);break;case 60:d=E(c);b=d[0];e=d[1];d=d[2];p=c.IH;f=c.Gf;m=c.HH;n=c.Ff;q=c.Vo;for(c=0;c<f.length;c++)for(g=p[c],r=f[c],h=(1-d)*g[b]+d*g[e],g=0;g<q.length;g++)q[g].Lh[r]=h;for(c=0;c<n.length;c++)for(p=m[c],r=n[c],p=Ca.lerp(p.subarray(3*b,3*b+3),p.subarray(3*e,3*e+3),d,xa),g=0;g<q.length;g++)q[g].ie[3*r]=p[0],q[g].ie[3*r+1]=p[1],q[g].ie[3*r+2]=p[2];Z.is_world(a)&&W.iy(a);break;
case 70:d=E(c);b=d[0];e=d[1];d=d[2];f=c.oj;(h=c.jg)&&f[0]&&pa.set_light_energy(a.Eb,(1-d)*h[b]+d*h[e]);(c=c.color)&&f[1]&&(xa[0]=(1-d)*c[3*b]+d*c[3*e],xa[1]=(1-d)*c[3*b+1]+d*c[3*e+1],xa[2]=(1-d)*c[3*b+2]+d*c[3*e+2],pa.set_light_color(a.Eb,xa));g=a.S;for(c=0;c<g.length;c++)W.GW(a,g[c].lb);break;case 80:d=E(c);b=d[0];e=d[1];d=d[2];f=c.oj;g=a.S;l=W.Tb(g[0].lb,P.Hb);h=c.jg;h=f[0]?(1-d)*h[b]+d*h[e]:l.jg;k=c.Md;f[1]?(xa[0]=(1-d)*k[3*b]+d*k[3*e],xa[1]=(1-d)*k[3*b+1]+d*k[3*e+1],xa[2]=(1-d)*k[3*b+2]+d*k[3*
e+2],k=xa):k=l.Md;var t=c.Xd;f[2]?(I[0]=(1-d)*t[3*b]+d*t[3*e],I[1]=(1-d)*t[3*b+1]+d*t[3*e+1],I[2]=(1-d)*t[3*b+2]+d*t[3*e+2],l=I):l=l.Xd;t=c.fog_intensity;f[3]&&(m=(1-d)*t[b]+d*t[e]);t=c.fog_depth;f[4]&&(n=(1-d)*t[b]+d*t[e]);t=c.fog_start;f[5]&&(q=(1-d)*t[b]+d*t[e]);t=c.fog_height;f[6]&&(r=(1-d)*t[b]+d*t[e]);c=c.xm;f[7]&&(na[0]=(1-d)*c[3*b]+d*c[3*e],na[1]=(1-d)*c[3*b+1]+d*c[3*e+1],na[2]=(1-d)*c[3*b+2]+d*c[3*e+2],p=na);for(c=0;c<g.length;c++)b=a.S[c].lb,(f[0]||f[1]||f[2])&&W.set_environment_colors(b,
h,k,l),f[3]&&W.zI(b,m),f[4]&&W.xI(b,n),f[5]&&W.AI(b,q),f[6]&&W.yI(b,r),f[7]&&W.set_fog_color_density(b,p);break;default:ca.K("Unknown animation type:"+k)}}}function E(a){var b=a.Xy[0],c=a.Xy[1]-b,b=a.hg-b;0>b&&(b=0);b>=c&&(b=c);b/=a.YD;c=Math.floor(b);a=a.WD[c]?b-c:0;b=Math.ceil(c+a);ta[0]=c;ta[1]=b;ta[2]=a;return ta}function w(a,b){var c=a.A,d=c.nf,e=c.ei,g=e[0],e=e[1];if(-1!=e){if(-1!=g){var h=a.pa[g];if(h.play||0==b||c.Kh){var k=E(h),l=k[0],m=k[1];c.Bf=k[2];var k=h.Nb[l],n=h.Nb[m],q=h.trans[l],
r=h.trans[m]}else d=1}else d=1;e=a.pa[e];if(e.play||0==b||c.Kh){var g=E(e),p=g[0],t=g[1];c.Bf=g[2]}else if(-1!=g&&h.play)d=0;else return;var g=e.Nb[p],w=e.Nb[t],v=e.trans[p],x=e.trans[t];if(1!=d||c.Kh)if(0!=d||c.Kh){d=c.fg;if(c.Kh&&!c.Dl&&!c.nl){c.Dl=new Float32Array(c.Wd.length);c.nl=new Float32Array(c.Qd.length);for(var z in d)k=d[z],k.cn||y(c,k)}for(z in d)k=d[z],k.cn||f(c,k,h,e,l,m,p,t)}else c.Qd.set(k),c.Fe.set(n),c.Wd.set(q),c.Ke.set(r);else c.Qd.set(g),c.Fe.set(w),c.Wd.set(v),c.Ke.set(x);ba.V(a);
ia.YW(a)}}function f(a,b,c,d,e,g,h,k){var l=b.cn,m=a.nf,n=na,q=Y,r=Ka,p=Va,t=ya,w=Na,v=Ia,y=va,x=4*b.fi,z=d.jj[h],B=d.kj[h],D=d.jj[k],C=d.kj[k];if(!a.Kh)var u=c.jj[e],E=c.kj[e],G=c.jj[g],F=c.kj[g];for(var A=0;4>A;A++)q[A]=z[x+A],p[A]=B[x+A],w[A]=D[x+A],y[A]=C[x+A],a.Kh?(n[A]=a.nl[x+A],r[A]=a.Dl[x+A],t[A]=a.nl[x+A],v[A]=a.Dl[x+A]):(n[A]=u[x+A],r[A]=E[x+A],t[A]=G[x+A],v[A]=F[x+A]);wa.slerp(n,q,m,n);ca.$t(r,p,m,r);ja.set_transcale(r,oa);ja.set_quat(n,oa);l&&ja.multiply(l.hy,oa,oa);ja.copy(oa,b.hy);ja.multiply(oa,
b.PC,oa);ja.uo(oa,r);ja.vb(oa,n);wa.slerp(t,w,m,t);ca.$t(v,y,m,v);ja.set_transcale(v,oa);ja.set_quat(t,oa);l&&ja.multiply(l.gy,oa,oa);ja.copy(oa,b.gy);ja.multiply(oa,b.PC,oa);ja.uo(oa,v);ja.vb(oa,t);for(A=0;4>A;A++)a.Qd[x+A]=n[A],a.Wd[x+A]=r[A],a.Fe[x+A]=t[A],a.Ke[x+A]=v[A];b=b.Ku;for(A=0;A<b.length;A++)f(a,b[A],c,d,e,g,h,k)}function y(a,b){for(var c=4*b.fi,d=b.cn,e=a.nf,f=Ka,g=na,h=Va,k=Y,l=0;4>l;l++)f[l]=a.Wd[c+l],g[l]=a.Qd[c+l],h[l]=a.Ke[c+l],k[l]=a.Fe[c+l];ja.set_transcale(f,oa);ja.set_quat(g,
oa);ja.multiply(oa,b.Wh,oa);ja.copy(oa,b.hy);d&&(ja.invert(d.hy,T),ja.multiply(T,oa,oa));ja.uo(oa,f);ja.vb(oa,g);ja.set_transcale(h,oa);ja.set_quat(k,oa);ja.multiply(oa,b.Wh,oa);ja.copy(oa,b.gy);d&&(ja.invert(d.gy,T),ja.multiply(T,oa,oa));ja.uo(oa,h);ja.vb(oa,k);wa.slerp(g,k,e,g);ca.$t(f,h,e,f);for(l=0;4>l;l++)a.nl[c+l]=g[l],a.Dl[c+l]=f[l];c=b.Ku;for(l=0;l<c.length;l++)y(a,c[l])}function D(a,b){var c=a.A,d=c.nf,e=c.Rn;if(0!=e){!c.Kh||c.Dl||c.nl||(d=c.nf=0);var d=c.Qn-d,f=e*b;ca.sign(d)==ca.sign(e)&&
Math.abs(f)<Math.abs(d)?c.nf+=f:(c.nf=c.Qn,c.Rn=0,c.ej&&(c.ej(),c.ej=null),c.Kh&&(c.Dl=null,c.nl=null,c.Kh=!1))}}function N(a,b){for(var c=[],d=[],e=[],f=[],g=a.J.tB,h=0;h<g;h++){for(var k in b){var l=b[k],m=l.Xs,n=a.J.mz[k];n?ja.copy(n.subarray(8*h,8*h+8),m):ja.identity(m);l.fy=!1}l=M(b);c.push(l.trans);d.push(l.Nb);e.push(l.kj);f.push(l.jj)}return{trans:c,Nb:d,kj:e,jj:f}}function M(a){var b=[],c=[],d=[],e=[],f=new Float32Array(4),g=new Float32Array(4),h;for(h in a){var k=a[h],l=f,m=g,n=k.ku,q=n[n.length-
1],r=q.OC;q.fy||ja.identity(r);for(q=n.length-1;0<=q;q--){var p=n[q],t=p.OC;if(p.fy)r=t;else{var w=p.Wh,v=p.Xs;ja.invert(w,oa);ja.multiply(v,oa,oa);ja.multiply(w,oa,oa);ja.multiply(r,oa,t);r=t;p.fy=!0}}n=p.OC;l[0]=n[0];l[1]=n[1];l[2]=n[2];l[3]=n[3];m[0]=n[4];m[1]=n[5];m[2]=n[6];m[3]=n[7];wa.normalize(m,m);l=k.fi;ja.multiply(k.Jp,k.Xs,oa);for(k=0;4>k;k++)m=4*l+k,b[m]=f[k],c[m]=g[k],d[m]=oa[k],e[m]=oa[k+4]}return{trans:b,Nb:c,kj:d,jj:e}}function B(a,b,c){var d=[],e=[],f;for(f in c)for(var g=c[f],h=
g.fi,g=g.Qz,k=0;4>k;k++){var l=4*g+k,m=4*h+k;d[l]=a[m];e[l]=b[m]}d=new Float32Array(d);e=new Float32Array(e);return{trans:d,Nb:e}}function J(a){var b=a.J,c;if(b.mz)c=10;else if(b.da)if("volume"in b.da||"pitch"in b.da)c=40;else{var d;a:{if(d=a.J.da)for(var e in d)if(-1!=e.indexOf("nodes")){d=!0;break a}d=!1}if(d)c=60;else{var f;a:{if(a.J.da){d=a.fcurves;for(f in d)if("color"==f&&!d[f][3]){f=!0;break a}if("energy"==f){f=!0;break a}}f=!1}if(f)c=70;else if(f=a.J.da,"light_settings.environment_energy"in
f||"horizon_color"in f||"zenith_color"in f||"mist_settings.intensity"in f||"mist_settings.depth"in f||"mist_settings.start"in f||"mist_settings.height"in f||"b4w_fog_color"in f)c=80;else{a:{if(a.J.da)for(c in a=a.fcurves,a)if("location"==c||"rotation_quaternion"==c||"scale"==c){c=!0;break a}c=!1}c=c?20:0}}}else c=0;b.type=c}function C(a,b){b[0]=b[1]=b[2]=0;for(var c in a)"location"==c?b[0]=1:"rotation_quaternion"==c?b[1]=1:"scale"==c&&(b[2]=1)}function A(a,b){b[0]=b[1]=0;for(var c in a)"energy"==
c?b[0]=1:"color"==c&&(b[1]=1)}function X(a,b){b[0]=b[1]=b[2]=0;b[3]=b[4]=b[5]=0;b[6]=b[7]=0;for(var c in a)"light_settings.environment_energy"==c?b[0]=1:"horizon_color"==c?b[1]=1:"zenith_color"==c?b[2]=1:"mist_settings.intensity"==c?b[3]=1:"mist_settings.depth"==c?b[4]=1:"mist_settings.start"==c?b[5]=1:"mist_settings.height"==c?b[6]=1:"b4w_fog_color"==c&&(b[7]=1)}function m(a,b,c,d,e,f,g){var h=a+(b-a)/2,k=K(h,d,e,f,g)-c;return.02>Math.abs(k)?h:0<k?m(a,h,c,d,e,f,g):m(h,b,c,d,e,f,g)}function K(a,b,
c,d,e){var f=1-a;return b*f*f*f+3*c*f*f*a+3*d*f*a*a+e*a*a*a}function R(a,b){n(a,b);-1==Ea.indexOf(a)&&Ea.push(a)}function O(a,b){ba.V(a);aa.sync_transform(a);d(a,0,b,!0)}function S(a,d,e,f){f=f||0;if(Z.is_mesh(a)){var g=ga(a,e);if(g)return R(a,f),c(a,g,f),O(a,f),!0;if((g=sa(a,e))&&"EMITTER"==g.Qw){R(a,f);d=g.name;e=f;for(var g=a.S,h=0;h<g.length;h++)for(var k=g[h].$,l=0;l<k.length;l++){var m=k[l].Ja;m&&m.name==d&&b(a.pa[e],m)}O(a,f);return!0}}if(g=ca.keysearch("name",e,Fa)||ca.keysearch("name",e+
"_B4W_BAKED",Fa)){R(a,f);if(t(a,d,g,f))return O(a,f),!0;a.pa[f]=null}ea.error('Unsupported object: "'+a.name+'" or animation name: "'+e+'"');return!1}function ga(a,b){for(var c=0;c<a.bd.length;c++){var d=a.bd[c];if(d.name===b)return d}return null}function sa(a,b){for(var c=a.S,d=0;d<c.length;d++)for(var e=c[d].$,f=0;f<e.length;f++){var g=e[f].Ja;if(g&&g.name===b)return g}return null}function U(a){a=a.modifiers;for(var b=0;b<a.length;b++){var c=a[b];if("ARMATURE"==c.type)return c.object}return null}
var ia=u("__armature"),fa=u("__config"),pa=u("__lights"),Z=u("__obj_util"),ma=u("__particles"),aa=u("__physics"),ea=u("__print"),wa=u("__quat"),da=u("__reformer"),W=u("__scenes"),Ga=u("__sfx"),P=u("__subscene"),ua=u("__time"),ba=u("__transform"),ja=u("__tsr"),ca=u("__util"),Ca=u("__vec3"),la=fa.$l,V=fa.zh;a.RK=1E-6;a.OBJ_ANIM_TYPE_NONE=0;a.OBJ_ANIM_TYPE_ARMATURE=10;a.OBJ_ANIM_TYPE_OBJECT=20;a.OBJ_ANIM_TYPE_VERTEX=30;a.OBJ_ANIM_TYPE_SOUND=40;a.OBJ_ANIM_TYPE_PARTICLES=50;a.OBJ_ANIM_TYPE_MATERIAL=60;
a.AL=70;a.zL=80;a.SLOT_0=0;a.SLOT_1=1;a.SLOT_2=2;a.SLOT_3=3;a.SLOT_4=4;a.SLOT_5=5;a.SLOT_6=6;a.SLOT_7=7;a.SLOT_ALL=-1;a.AB_CYCLIC=10;a.AB_FINISH_RESET=20;a.AB_FINISH_STOP=30;var ta=Array(3),xa=new Float32Array(3),I=new Float32Array(3),Ka=new Float32Array(4),Va=new Float32Array(4),Ia=new Float32Array(4),va=new Float32Array(4),na=new Float32Array(4),Y=new Float32Array(4),ya=new Float32Array(4),Na=new Float32Array(4),oa=ja.create(),T=ja.create(),Ea=[],Fa=[];a.lG=function(){return ca.trunc((V.vw-50)/
4)};a.frame_to_sec=function(a){return a/ua.Dd()};a.update=function(a){for(var b=0;b<Ea.length;b++){for(var c=Ea[b],d=0;8>d;d++)r(c,a,d);c.A.fj&&(D(c,a),w(c,a))}for(b=0;b<Ea.length;b++)for(c=Ea[b],d=0;8>d&&c.pa.length;d++)e(c,d)};a.$Q=function(){return Fa};a.get_anim_names=function(a){var b=[];if(x(a))for(var c=0;c<a.bd.length;c++)b.push(a.bd[c].name);for(var d=[],c=0;c<Fa.length;c++){var e=Fa[c],f=e.J;20==f.type?d.push(e):60!=e.J.type||"MESH"!=a.type&&"WORLD"!=a.type?10==f.type&&"ARMATURE"==a.type?
d.push(e):40==f.type&&"SPEAKER"==a.type?d.push(e):80==f.type&&"WORLD"==a.type&&d.push(e):d.push(e)}for(c=0;c<d.length;c++)b.push(g(d[c].name));if(ma.uB(a)&&ma.NH(a))for(a=a.S,c=0;c<a.length;c++)for(d=a[c].$,e=0;e<d.length;e++)(f=d[e].Ja)&&b.push(f.name);return b};a.lJ=g;a.get_anim_type=function(a,b){var c=a.pa[b];return c?c.type:0};a.apply_def=function(a){for(var d=0,e=a.S,f=0;f<e.length;f++)for(var g=e[f].$,h=0;h<g.length;h++){var k=g[h].Ja;k&&"EMITTER"==k.Qw&&!g[h].Rg&&(R(a,d),b(a.pa[d],k),O(a,
d),k.cyclic?a.pa[d].behavior=10:a.pa[d].behavior=a.Zl,d++)}e=a.sm.slice();for(f=0;f<e.length;f++)h=e[f],g=h.Zm,h=h.action,R(a,d),t(a,g,h,d)?(O(a,d),a.pa[d].behavior=a.Zl,d++):a.pa[d]=null;x(a)&&(R(a,d),c(a,a.bd[0],d),O(a,d),a.pa[d].behavior=a.Zl)};a.bz=function(a){switch(a){case "CYCLIC":return 10;case "FINISH_RESET":return 20;case "FINISH_STOP":return 30;default:ca.K("Wrong animation behavior")}};a.dR=function(a){var b=[];a=a.data.materials;for(var c=0;c<a.length;c++){var d=a[c],e=d.Nd;e&&k(e,b,
[d.name])}return b};a.eR=function(a){var b=[],c=a.node_tree;c&&k(c,b,[a.name]);return b};a.GG=p;a.play=function(a,b,c){h(a.pa,c,function(a){a.play=!0;b?a.dv=b:a.dv=null;a.or=!1});a.A.fj&&z(a)};a.stop=function(a,b){h(a.pa,b,function(a){a.play=!1;a.dv=null;a.or=!1})};a.is_play=function(a,b){var c=a.pa;if(-1==b)for(var d=0;8>d;d++){if(c[d]&&c[d].play)return!0}else if(c=c[b])return c.play;return!1};a.set_frame=v;a.set_first_frame=function(a,b){b=b||0;h(a.pa,b,function(c){v(a,c.start,b)})};a.lA=function(a,
b){var c=a.pa[b];return c&&c.hg?c.hg:0};a.is_cyclic=function(a,b){var c=a.pa[b];return c&&10==c.behavior};a.set_behavior=function(a,b,c){h(a.pa,c,function(a){a.behavior=b})};a.get_behavior=function(a,b){var c=a.pa[b];return c&&c.behavior};a.apply_smoothing=function(a,b,c,d){h(a.pa,d,function(a){a.MC=b||0;a.NB=c||0})};a.remove_slot_animation=function(a,b){if(-1==b)for(var c=0;8>c;c++)a.pa[c]=null;else a.pa[b]=null;a.A.fj&&l(a,b)};a.NW=d;a.PH=function(a){if("ARMATURE"==a.type||a.Rt||"WORLD"==a.type)return!0;
for(var b=0;b<a.sm.length;b++){var c=a.sm[b].action.J.type;if(20==c||10==c||40==c&&"SPEAKER"==a.type||70==c&&"LAMP"==a.type||60==c&&"MESH"==a.type)return!0}return ma.uB(a)&&ma.NH(a)||"MESH"==a.type&&a.bd.length?!0:!1};a.wE=function(a){if(U(a))return!0;if(a.On)for(var b=0;b<a.On.length;b++){var c=a.On[b].action.J.type;if(20==c||60==c&&"MESH"==a.type)return!0}return ma.BN(a)&&ma.AN(a)||"MESH"==a.type&&a.data.b4w_vertex_anim.length?!0:!1};a.is_animated=function(a){return!!a.pa.length};a.jS=function(a,
b,c,d,e){if(c=c?ca.keysearch("uuid",c,Fa):ca.keysearch("name",d,Fa)||ca.keysearch("name",d+"_B4W_BAKED",Fa))if(n(a,e),-1==Ea.indexOf(a)&&Ea.push(a),d=c.frame_range,d[0]>d[1])ea.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"');else switch(d=c.J,d.type){case 10:Z.is_armature(a)&&(d=q(a,b,c),d||(d=N(c,a.A.fg),G(a,b,c,d)),H(a,e,c,d));break;case 20:(e=d.da.tsr)?(d=q(a,b,c),d||(d=F(c,e),G(a,b,c,d))):ea.warn('Incompatible action "'+c.name+'" has been applied to object "'+
a.name+'"')}};a.WP=function(a,b){for(var c=a.Pn,d=[],e=0;e<c.length;e+=3)(60!=c[e].J.type||null!==c[e+1]&&c[e+1].split("%join%")[0]!=b)&&d.push(c[e],c[e+1],c[e+2]);a.Pn=d};a.KN=M;a.vQ=B;a.LM=function(a){function b(a,b){for(var c=0;c<b;c++){var d=a.subarray(8*c+4,8*c+8);wa.normalize(d,d)}}function c(a,b){if(-1<a.indexOf("location"))var c=0,d=b;else-1<a.indexOf("rotation_quaternion")?(c=4,d=0==b?3:b-1):-1<a.indexOf("scale")?(c=3,d=0):(c=0,d=b);return c+d}function d(a,b,c,d,g){if(-1<c.search(e)){a=b;
c=c.split('"')[1];var h=f}else 8==g?(c="tsr",h=f):1<g?h=new Float32Array(g):h=0;if(!a[c]){g=a;b=c;if("object"==typeof h&&h.length)for(var k=h.length,l=new Float32Array(d*k),m=0;m<d;m++)for(var n=0;n<k;n++)l[m*k+n]=h[n];else if("number"==typeof h)for(l=new Float32Array(d),m=0;m<d;m++)l[m]=h;else ca.K("Wrong storage default value");g[b]=l}return a[c]}var e=new RegExp(/pose.bones\[\".+\"\]/g),f=ja.create(),g=a.J={type:0,tB:0,WH:0,da:null,mz:null,qE:null,oj:new Int8Array(8)};g.WH=1/la.zm;var h=a.fcurves,
k={},l={},m=0,n;for(n in h){var q=h[n],r;for(r in q){var p=q[r],t=p.Zf;da.VN(p,a);p=p.num_channels;m||(m=t.length);for(var p=d(k,l,n,m,p),w=p.length/m,v=c(n,r|0),y=0;y<m;y++)p[y*w+v]=t[y]}}if(ca.Bj(k)){for(var x in k)"tsr"==x&&b(k[x],m);g.da=k}if(ca.Bj(l)){for(var z in l)b(l[z],m);g.mz=l}g.tB=m;g.qE=a.BM;"tsr"in k&&C(h,g.oj);("color"in k||"energy"in k)&&A(h,g.oj);("light_settings.environment_energy"in k||"horizon_color"in k||"zenith_color"in k||"mist_settings.intensity"in k||"mist_settings.depth"in
k||"mist_settings.start"in k||"mist_settings.height"in k||"b4w_fog_color"in k)&&X(h,g.oj);J(a);Fa.push(a)};a.cR=function(a,b){return(b-a)*la.zm+1};a.eN=function(a,b,c,d,e,f){var g=new Float32Array(2),h=new Float32Array(2),k=new Float32Array(2),l=new Float32Array(2),n=b[1],q=b[2],r=b[a.last_frame_offset+1];a=b[a.last_frame_offset+2];for(var p=0,t=0,w=null;e<=f;e++)if(e<n)for(var v=0;v<la.zm;v++)c[p++]=q;else if(e>r)for(v=0;v<la.zm;v++)c[p++]=a;else{var y=b[t],x=3;0===y&&(x+=2);0===w&&(x+=2);var z=
2===y?0:1;if(b[t+1]==b[t+x+1])w=y,t+=x;else{v=0;e==b[t+1]&&(z&&(d[p]=1),c[p]=b[t+2],p++,v++);if(e==r)for(;v<la.zm;v++)c[p++]=a;else for(g[0]=b[t+1],g[1]=b[t+2],0!==y?(h[0]=0,h[1]=0):0===w?(h[0]=b[t+5],h[1]=b[t+6]):(h[0]=b[t+3],h[1]=b[t+4]),0!==y?(k[0]=0,k[1]=0):(k[0]=b[t+x+3],k[1]=b[t+x+4]),l[0]=b[t+x+1],l[1]=b[t+x+2];v<la.zm;v++){var B=e+v/la.zm;switch(y){case 0:var D,C,u,E=g,A=h,G=k,F=l,H=[],J=[];H[0]=E[0]-A[0];H[1]=E[1]-A[1];J[0]=F[0]-G[0];J[1]=F[1]-G[1];D=F[0]-E[0];u=Math.abs(H[0]);C=Math.abs(J[0]);
u+C&&u+C>D&&(D/=u+C,A[0]=E[0]-D*H[0],A[1]=E[1]-D*H[1],G[0]=F[0]-D*J[0],G[1]=F[1]-D*J[1]);z&&(d[p]=1);c[p]=K(m(0,1,B,g[0],h[0],k[0],l[0]),g[1],h[1],k[1],l[1]);p++;break;case 1:z&&(d[p]=1);E=g[0];A=g[1];G=(l[1]-A)/(l[0]-E);c[p]=G*B+(A-G*E);p++;break;case 2:z&&(d[p]=1);c[p]=b[t+2];p++;break;default:ca.K("Unknown keyframe interpolation mode: "+y)}}e+1==b[t+x+1]&&(w=y,t+=x)}}};a.apply=S;a.bN=function(a,b,c,d){d=d||0;var e=ca.keysearch("uuid",c,Fa);if(e){R(a,d);if(t(a,b,e,d)){O(a,d);return}a.pa[d]=null}ea.error('Unsupported object: "'+
a.name+'" or animation uuid: "'+c+'"')};a.dK=function(a,b){var c=ca.keysearch("name",b,Fa)||ca.keysearch("name",b+"_B4W_BAKED",Fa);if(c){if(0==c.J.type)return!1}else if(!(sa(a,b)||Z.is_mesh(a)&&ga(a,b)))return!1;return!0};a.get_slot_num_by_anim=function(a,b){for(var c=a.pa,d=0;d<c.length;d++){var e=c[d];if(e&&g(e.gj)==g(b))return d}return-1};a.bR=function(a,b){var c=a.pa[b];return c&&c.gj?g(c.gj):null};a.remove=function(a){a.pa.length=0;a=Ea.indexOf(a);-1!=a&&Ea.splice(a,1)};a.lU=function(a){for(var b=
Fa.length-1;0<=b;b--)Fa[b].CM==a&&Fa.splice(b,1)};a.apply_to_first_empty_slot=function(a,b){if(!a.pa.length)return S(a,null,b,0)?0:-1;for(var c=0;c<a.pa.length;c++)if(!a.pa[c])return S(a,null,b,c)?c:-1};a.set_skel_mix_factor=function(a,b,c,d){a=a.A;a.Rn=(b-a.nf)/c;a.Qn=b;a.ej&&a.ej();a.ej=d};a.mix_from_cur_pos=function(a,b,c,d){a=a.A;a.ei[1]=b;a.Rn=1/c;a.Qn=1;a.ej&&a.ej();a.ej=d;a.Dl=null;a.nl=null;a.Kh=!0};a.set_speed=function(a,b,c){h(a.pa,c,function(a){a.speed=b})};a.get_speed=function(a,b){return a.pa[b].speed};
a.get_anim_start_frame=function(a,b){return a.pa[b].start};a.get_anim_length=function(a,b){return a.pa[b].length};a.cleanup=function(){Ea.length=0;Fa.length=0};a.yQ=function(a){var b=(a[0]||a[1]||a[2]).Zf.length,c=na,d=xa,e=!!a[0];e||(a[0]={Zf:new Float32Array(b),num_channels:8});var f=!!a[1];f||(a[1]={Zf:new Float32Array(b),num_channels:8});var g=!!a[2];g||(a[2]={Zf:new Float32Array(b),num_channels:8});a[3]={Zf:new Float32Array(b),num_channels:8};for(var h=0;h<b;h++)d[0]=e?a[0].Zf[h]:0,d[1]=f?a[1].Zf[h]:
0,d[2]=g?a[2].Zf[h]:0,ca.euler_to_quat(d,c),a[0].Zf[h]=c[3],a[1].Zf[h]=c[0],a[2].Zf[h]=c[1],a[3].Zf[h]=c[2]};a.gG=U;a.FV=function(a,b){for(var c=7,d=0,e=0;e<Fa.length;e++){var f=Fa[e];if(f.name==b){d=f.J.type;break}}0==d&&(ga(a,b)?d=30:(e=sa(a,b))&&"EMITTER"==e.Qw&&(d=50));for(e=0;8>e;e++)if(f=a.pa[e]){if(f.type==d)return e}else e<c&&(c=e);return c}};b4w.module.__time=function(a,u){function e(){return-1!==c.$l.jv?c.$l.jv:v}var c=u("__config"),b=0,n=0,g=[],p=0,k=0,x=[],v=-1,h=0;a.KI=function(a){b=a;n=performance.now();for(a=0;a<g.length;a++){var c=g[a];b>c.Yz&&(g.splice(a,1),a--,c.callback())}for(a=0;a<x.length;a++){var c=x[a],d=1-(c.Yz-b)/c.duration,d=Math.min(d,1);c.callback(c.from+d*(c.to-c.from));1==d&&(x.splice(a,1),a--)}};a.get_timeline=function(){return b};a.ZU=function(a){h=a};a.oR=function(){return h};a.set_timeout=function(a,c){var d;
p++;d=p;g.push({id:d,callback:a,Yz:b+(performance.now()-n+c)/1E3});return d};a.clear_timeout=function(a){for(var b=0;b<g.length;b++)if(g[b].id==a){g.splice(b,1);break}};a.clear_animation=function(a){for(var b=x.length;b--;)if(x[b].id==a){x.splice(b,1);break}};a.animate=function(a,c,e,g){e/=1E3;var d;k++;d=k;x.push({id:d,callback:g,from:a,to:c,Yz:b+e,duration:e});g(a);return d};a.reset=function(){n=b=0;g.length=0;k=p=x.length=0};a.Dd=e;a.bV=function(a){v=a};a.get_frame=function(a){return a*e()}};b4w.module.__transform=function(a,u){function e(a,b){d.Vg(a)?l.set_trans(b,d.Tg(a)):l.set_trans(b,a.A.D)}function c(a,b){var c=a.A;if(d.Vg(a)){l.set_quat(b,c.D);var e=d.pv(a),e=l.invert(e,y);l.multiply(e,c.D,d.Tg(a))}else l.set_quat(b,c.D)}function b(a,b){d.Vg(a)?l.set_quat(b,d.Tg(a)):l.set_quat(b,a.A.D)}function n(a,b){l.vb(a.A.D,b);return b}function g(a,b){d.Vg(a)?l.vb(d.Tg(a),b):l.vb(a.A.D,b);return b}function p(a,b){d.Vg(a)?l.copy(b,d.Tg(a)):l.copy(b,a.A.D)}function k(a,b){d.Vg(a)?l.copy(d.Tg(a),
b):l.copy(a.A.D,b);return b}function x(a){var b=a.A,c=a.S,e=a.type;"CAMERA"==e&&h.IJ(a);d.DW(a,N);"CAMERA"==e&&h.AW(a);v.Xn(b.va,b.D,b.wh);v.cu(b.tc,b.D,b.ue);for(var g=0;g<c.length;g++)for(var k=c[g].$,n=0;n<k.length;n++)G.SJ(k[n],b.D,c[g].eg[n]);switch(e){case "MESH":a.EH&&l.invert(a.A.D,a.A.Ey);if(k=a.Rt)l.invert(k.A.D,y),l.multiply(y,b.D,y),l.uo(y,b.sq),l.vb(y,b.rq);b.ur=!0;break;case "CAMERA":for(g=0;g<c.length;g++)h.BW(a,c[g]);break;case "SPEAKER":z.NV(a,N,M);break;case "LAMP":t.HW(a)}for(var k=
l.Lb(b.D,E),r=l.vb(b.D,f),g=0;g<c.length;g++)if(n=c[g],n.Wv){var p=n.lb,w=p.J;switch(e){case "MESH":b.bf&&H.dC(p);w=n.sj;null!=b.be&&w&&H.JJ(w,k);break;case "EMPTY":q.FW(a);break;case "CAMERA":if(H.get_active()==p&&H.Ok(p)==a){H.LU(p);if(w.Zc){(w.Zc.enable_csm||w.Zc.gQ)&&H.dC(p);var D=G.Da(a,p).ja[0];H.XW(D,w.wa)}z.ZS(p,k,r,N,M)}break;case "LAMP":H.at(a,p)}w=n.Mi;D=a.xs;if(D.length)for(n=0;n<w.length;n++){var B=w[n].H;H.LJ(w[n],k,r);G.MJ(D,B.xc);h.vV(B,H.Ok(p))}}b=a.ve;for(g=0;g<b.length;g++)x(b[g]);
a=a.Ez;for(g=0;g<a.length;g++)b=a[g],k=b[0],d.xW(k,b[1])}var v=u("__boundings"),h=u("__camera"),d=u("__constraints"),t=u("__lights"),q=u("__objects"),G=u("__obj_util"),H=u("__scenes"),z=u("__sfx"),l=u("__tsr"),F=u("__util"),r=u("__vec3"),E=new Float32Array(3),w=new Float32Array(3),f=new Float32Array(4),y=l.create(),D=l.create(),N=0,M=0;a.update=function(a){N=a;M++};a.set_translation=function(a,b){var c=a.A;if(d.Vg(a)){l.set_trans(b,c.D);var e=d.pv(a),e=l.invert(e,y);l.multiply(e,c.D,d.Tg(a))}else l.set_trans(b,
c.D)};a.set_translation_rel=e;a.get_translation=function(a,b){l.Lb(a.A.D,b);return b};a.get_translation_rel=function(a,b){d.Vg(a)?l.Lb(d.Tg(a),b):l.Lb(a.A.D,b);return b};a.set_rotation=c;a.set_rotation_rel=b;a.get_rotation=n;a.get_rotation_rel=g;a.set_rotation_euler=function(a,b){var d=F.euler_to_quat(b,f);c(a,d)};a.set_rotation_euler_rel=function(a,c){var d=F.euler_to_quat(c,f);b(a,d)};a.get_rotation_euler=function(a,b){var c=n(a,f);return b=F.quat_to_euler(c,b)};a.get_rotation_euler_rel=function(a,
b){var c=g(a,f);return b=F.quat_to_euler(c,b)};a.set_scale=function(a,b){var c=a.A;if(d.Vg(a)){var c=d.Tg(a),e=l.get_scale(d.pv(a));l.set_scale(b/e,c)}else l.set_scale(b,c.D)};a.set_scale_rel=function(a,b){var c=a.A;d.Vg(a)?l.set_scale(b,d.Tg(a)):l.set_scale(b,c.D)};a.get_scale=function(a){return l.get_scale(a.A.D)};a.get_scale_rel=function(a){return d.Vg(a)?l.get_scale(d.Tg(a)):l.get_scale(a.A.D)};a.set_tsr=function(a,b){l.copy(b,a.A.D);if(d.Vg(a)){var c=d.pv(a),c=l.invert(c,y);l.multiply(c,a.A.D,
d.Tg(a))}};a.set_tsr_rel=p;a.get_tsr=function(a,b){return l.copy(a.A.D,b)};a.get_tsr_rel=k;a.get_object_size=function(a){var b=a.A;a=b.ij;var c=l.get_scale(b.D),b=c*(a.max_x-a.min_x),d=c*(a.max_y-a.min_y);a=c*(a.max_z-a.min_z);return.5*Math.sqrt(b*b+d*d+a*a)};a.get_object_center=function(a,b,c){b?(a=a.A,r.copy(a.ue.U,c)):(a=a.A,b=a.ij,c[0]=(b.max_x+b.min_x)/2,c[1]=(b.max_y+b.min_y)/2,c[2]=(b.max_z+b.min_z)/2,l.transform_vec3(c,a.D,c));return c};a.move_local=function(a,b,c,d){var f=k(a,y),g=E;g[0]=
b;g[1]=c;g[2]=d;l.transform_vec3(g,f,g);e(a,g)};a.ZB=function(a,b){var c=k(a,y),d=l.set_quat(b,l.identity(D));l.multiply(c,d,d);p(a,d)};a.V=x;a.distance=function(a,b){var c=l.Lb(a.A.D,E),d=l.Lb(b.A.D,w);return r.dist(c,d)};a.bs=function(a,b){var c=l.Lb(a.A.D,E);return r.dist(c,b)}};b4w.module.__tsr=function(a,u){function e(){var a=new Float32Array(8);a[3]=1;a[7]=1;return a}function c(){var a=new Float32Array(9);a[3]=1;a[7]=1;return a}function b(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];return b}function n(a,b,c,d){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=b;d[4]=c[0];d[5]=c[1];d[6]=c[2];d[7]=c[3];return d}function g(a,b){b[0]=a[4];b[1]=a[5];b[2]=a[6];b[3]=a[7];return b}function p(a,b,c){var d=b[0],e=b[1],g=b[2],f=b[3],h=b[4],k=b[5],l=b[6];
b=b[7];var n=a[0]*f,q=a[1]*f,p=a[2]*f;a=b*n+k*p-l*q;var f=b*q+l*n-h*p,t=b*p+h*q-k*n,n=-h*n-k*q-l*p;c[0]=a*b+n*-h+f*-l-t*-k;c[1]=f*b+n*-k+t*-h-a*-l;c[2]=t*b+n*-l+a*-k-f*-h;c[0]+=d;c[1]+=e;c[2]+=g;return c}var k=u("__mat4"),x=u("__quat"),v=u("__util"),h=u("__vec3"),d=Math.sin(-Math.PI/4),t=-d,q=new Float32Array(3),G=new Float32Array(4),H=new Float32Array(16);a.create=e;a.clone=function(a){var c=e();b(a,c);return c};a.from_values=function(a,b,c,d,g,h,f,k){var l=e();l[0]=a;l[1]=b;l[2]=c;l[3]=d;l[4]=g;
l[5]=h;l[6]=f;l[7]=k;return l};a.om=c;a.TY=function(a){var d=c();b(a,d);return d};a.oZ=function(a,b,d,e,g,h,f,k){var l=c();l[0]=a;l[1]=b;l[2]=d;l[3]=e;l[4]=g;l[5]=h;l[6]=f;l[7]=k;return l};a.copy=b;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=1;return a};a.set_sep=n;a.set_trans=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.set_scale=function(a,b){b[3]=a;return b};a.set_transcale=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.set_quat=function(a,
b){b[4]=a[0];b[5]=a[1];b[6]=a[2];b[7]=a[3];return b};a.get_trans_view=function(a){return a.subarray(0,3)};a.Lb=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.get_scale=function(a){return a[3]};a.uo=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.get_quat_view=function(a){return a.subarray(4,8)};a.vb=g;a.invert=function(a,b){var c=1/a[3];if(!c)return null;var d=a[0],e=a[1],g=a[2];G[0]=a[4];G[1]=a[5];G[2]=a[6];G[3]=a[7];x.invert(G,G);var f=G[0],h=G[1],k=G[2],l=G[3],d=d*c,
e=e*c,n=g*c,g=l*d+h*n-k*e,q=l*e+k*d-f*n,p=l*n+f*e-h*d,d=-f*d-h*e-k*n;b[0]=-(g*l+d*-f+q*-k-p*-h);b[1]=-(q*l+d*-h+p*-f-g*-k);b[2]=-(p*l+d*-k+g*-h-q*-f);b[3]=c;b[4]=f;b[5]=h;b[6]=k;b[7]=l;return b};a.to_mat4=function(a,b){var c=a[3];k.fromRotationTranslation(a.subarray(4,8),a.subarray(0,3),b);for(var d=0;12>d;d++)b[d]*=c;return b};a.from_mat4=function(a,b){var c=v.$A(a,q),d=v.vH(a),e=v.matrix_to_quat(a,G);n(c,d,e,b);return b};a.multiply=function(a,b,c){p(b,a,c);c[3]=a[3]*b[3];var d=a[4],e=a[5],g=a[6];
a=a[7];var f=b[4],h=b[5],k=b[6];b=b[7];c[4]=d*b+a*f+e*k-g*h;c[5]=e*b+a*h+g*f-d*k;c[6]=g*b+a*k+d*h-e*f;c[7]=a*b-d*f-e*h-g*k;return c};a.mW=function(a,b,c){var d=b[3];b=k.fromRotationTranslation(b.subarray(4,8),b.subarray(0,3),H);for(var e=0;12>e;e++)b[e]*=d;k.multiply(b,a,c);return c};a.transform_vec3=p;a.transform_vec3_inv=function(a,b,c){var d=b[3],e=a[0]-b[0],g=a[1]-b[1],f=a[2]-b[2];a=b[4];var h=b[5],k=b[6];b=b[7];var l=a*a+h*h+k*k+b*b,l=l?1/l:0;a=-a*l;h=-h*l;k=-k*l;b*=l;var l=b*e+h*f-k*g,n=b*g+
k*e-a*f,q=b*f+a*g-h*e,e=-a*e-h*g-k*f;c[0]=l*b+e*-a+n*-k-q*-h;c[1]=n*b+e*-h+q*-a-l*-k;c[2]=q*b+e*-k+l*-h-n*-a;c[0]/=d;c[1]/=d;c[2]/=d;return c};a.transform_vectors=function(a,b,c,d){d||(d=0);var e=a.length,g=b[0],f=b[1],h=b[2],k=b[3],l=b[4],n=b[5],q=b[6];b=b[7];for(var p=0;p<e;p+=3){var r=a[p]*k,t=a[p+1]*k,v=a[p+2]*k,m=b*r+n*v-q*t,x=b*t+q*r-l*v,z=b*v+l*t-n*r,r=-l*r-n*t-q*v;c[d+p]=m*b+r*-l+x*-q-z*-n;c[d+p+1]=x*b+r*-n+z*-l-m*-q;c[d+p+2]=z*b+r*-q+m*-n-x*-l;c[d+p]+=g;c[d+p+1]+=f;c[d+p+2]+=h}return c};
a.transform_dir_vectors=function(a,b,c,d){d||(d=0);var e=a.length,g=b[3],f=b[4],h=b[5],k=b[6];b=b[7];for(var l=0;l<e;l+=3){var n=a[l]*g,q=a[l+1]*g,p=a[l+2]*g,r=b*n+h*p-k*q,t=b*q+k*n-f*p,v=b*p+f*q-h*n,n=-f*n-h*q-k*p;c[d+l]=r*b+n*-f+t*-k-v*-h;c[d+l+1]=t*b+n*-h+v*-f-r*-k;c[d+l+2]=v*b+n*-k+r*-h-t*-f}return c};a.transform_dir_vec3=function(a,b,c){var d=b[3],e=b[4],g=b[5],f=b[6];b=b[7];var h=a[0]*d,k=a[1]*d,l=a[2]*d;a=b*h+g*l-f*k;var d=b*k+f*h-e*l,n=b*l+e*k-g*h,h=-e*h-g*k-f*l;c[0]=a*b+h*-e+d*-f-n*-g;c[1]=
d*b+h*-g+n*-e-a*-f;c[2]=n*b+h*-f+a*-g-d*-e;return c};a.transform_tangents=function(a,b,c,d){d||(d=0);var e=a.length,g=b[3],f=b[4],h=b[5],k=b[6];b=b[7];for(var l=0;l<e;l+=4){var n=a[l]*g,q=a[l+1]*g,p=a[l+2]*g,r=b*n+h*p-k*q,t=b*q+k*n-f*p,v=b*p+f*q-h*n,n=-f*n-h*q-k*p;c[d+l]=r*b+n*-f+t*-k-v*-h;c[d+l+1]=t*b+n*-h+v*-f-r*-k;c[d+l+2]=v*b+n*-k+r*-h-t*-f;c[d+l+3]=a[l+3]}return c};a.AJ=function(a,b,c){b=g(b,G);x.multiply(b,a,c)};a.nW=function(a,b,c,d){d=d||0;b=g(b,G);v.hU(a,b,c,d)};a.translate=function(a,b,
c){var d=a[3],e=a[4],g=a[5],f=a[6],h=a[7],k=b[0]*d,l=b[1]*d,n=b[2]*d;b=h*k+g*n-f*l;var d=h*l+f*k-e*n,q=h*n+e*l-g*k,k=-e*k-g*l-f*n;c[0]=a[0]+b*h+k*-e+d*-f-q*-g;c[1]=a[1]+d*h+k*-g+q*-e-b*-f;c[2]=a[2]+q*h+k*-f+b*-g-d*-e;c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];return c};a.interpolate=function(a,b,c,d){h.lerp(a.subarray(0,3),b.subarray(0,3),c,d.subarray(0,3));var e=a[3];d[3]=e+c*(b[3]-e);x.slerp(a.subarray(4,8),b.subarray(4,8),c,d.subarray(4,8));return d};a.gZ=function(a,b,c,d){var e=a.subarray(0,
3),g=b.subarray(0,3),f=d.subarray(0,3);f[0]=g[0]*(c+1)-e[0]*c;f[1]=g[1]*(c+1)-e[1]*c;f[2]=g[2]*(c+1)-e[2]*c;d[3]=b[3]*(c+1)-a[3]*c;a=a.subarray(4,8);b=b.subarray(4,8);e=d.subarray(4,8);e[0]=b[0]*(c+1)-a[0]*c;e[1]=b[1]*(c+1)-a[1]*c;e[2]=b[2]*(c+1)-a[2]*c;e[3]=b[3]*(c+1)-a[3]*c;x.normalize(e,e);return d};a.tS=function(a,b,c,d,e){e[0]=a[0]+b*c[0];e[1]=a[1]+b*c[1];e[2]=a[2]+b*c[2];e[3]=a[3];c=d[0];var g=d[1];d=d[2];var f=a[4],h=a[5],k=a[6],l=a[7];e[4]=.5*(c*l+g*k-d*h);e[5]=.5*(g*l+d*f-c*k);e[6]=.5*(d*
l+c*h-g*f);e[7]=.5*(-c*f-g*h-d*k);e[4]=a[4]+e[4]*b;e[5]=a[5]+e[5]*b;e[6]=a[6]+e[6]*b;e[7]=a[7]+e[7]*b;a=e[4];b=e[5];c=e[6];g=e[7];a=a*a+b*b+c*c+g*g;0<a&&(a=1/Math.sqrt(a),e[4]*=a,e[5]*=a,e[6]*=a,e[7]*=a)};a.I_=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];var c=a[4],e=a[5],g=a[6],h=a[7];b[4]=c*t+h*d;b[5]=e*t+g*d;b[6]=g*t-e*d;b[7]=h*t-c*d};a.H_=function(a,b){b[0]=a[0];b[1]=-a[2];b[2]=a[1];b[3]=a[3];b[4]=a[4];b[5]=-a[6];b[6]=a[5];b[7]=a[7]}};b4w.module.__util=function(a,u){function e(a){return 0<a?1:0>a?-1:0}function c(a,b,c){var d=a[0],e=a[1];a=a[2];var f=Math.cos(d/2),g=Math.cos(e/2),h=Math.cos(a/2),k=Math.sin(d/2),e=Math.sin(e/2),l=Math.sin(a/2);if(-1<Ia.indexOf(b))var m=Math.cos((d+a)/2),n=Math.sin((d+a)/2),q=Math.cos((d-a)/2),p=Math.sin((d-a)/2),r=Math.cos((a-d)/2),t=Math.sin((a-d)/2);switch(b){case 0:c[0]=g*n;c[1]=e*q;c[2]=e*p;c[3]=g*m;break;case 1:c[0]=e*p;c[1]=g*n;c[2]=e*q;c[3]=g*m;break;case 2:c[0]=e*q;c[1]=e*p;c[2]=g*n;c[3]=
g*m;break;case 3:c[0]=g*n;c[1]=e*t;c[2]=e*r;c[3]=g*m;break;case 4:c[0]=e*r;c[1]=g*n;c[2]=e*t;c[3]=g*m;break;case 5:c[0]=e*t;c[1]=e*r;c[2]=g*n;c[3]=g*m;break;case 6:c[0]=k*g*h+f*e*l;c[1]=f*e*h-k*g*l;c[2]=f*g*l+k*e*h;c[3]=f*g*h-k*e*l;break;case 7:c[0]=f*g*l+k*e*h;c[1]=k*g*h+f*e*l;c[2]=f*e*h-k*g*l;c[3]=f*g*h-k*e*l;break;case 8:c[0]=f*e*h-k*g*l;c[1]=f*g*l+k*e*h;c[2]=k*g*h+f*e*l;c[3]=f*g*h-k*e*l;break;case 9:c[0]=k*g*h-f*e*l;c[1]=f*g*l-k*e*h;c[2]=f*e*h+k*g*l;c[3]=f*g*h+k*e*l;break;case 10:c[0]=f*e*h+k*
g*l;c[1]=k*g*h-f*e*l;c[2]=f*g*l-k*e*h;c[3]=f*g*h+k*e*l;break;case 11:c[0]=f*g*l-k*e*h,c[1]=f*e*h+k*g*l,c[2]=k*g*h-f*e*l,c[3]=f*g*h+k*e*l}return c}function b(a,b,c){var d=a[0],e=a[1],f=a[2];a=a[3];switch(b){case 0:c[0]=Math.atan2(d*e+f*a,e*a-d*f);c[1]=Math.acos(1-2*(e*e+f*f));c[2]=Math.atan2(d*e-f*a,d*f+e*a);break;case 1:c[0]=Math.atan2(d*a+e*f,f*a-d*e);c[1]=Math.acos(1-2*(d*d+f*f));c[2]=Math.atan2(e*f-d*a,d*e+f*a);break;case 2:c[0]=Math.atan2(d*f+e*a,d*a-e*f);c[1]=Math.acos(1-2*(d*d+e*e));c[2]=Math.atan2(d*
f-e*a,d*a+e*f);break;case 3:c[0]=Math.atan2(d*f-e*a,d*e+f*a);c[1]=Math.acos(1-2*(e*e+f*f));c[2]=Math.atan2(d*f+e*a,f*a-d*e);break;case 4:c[0]=Math.atan2(d*e-f*a,d*a+e*f);c[1]=Math.acos(1-2*(d*d+f*f));c[2]=Math.atan2(d*e+f*a,d*a-e*f);break;case 5:c[0]=Math.atan2(e*f-d*a,d*f+e*a);c[1]=Math.acos(1-2*(d*d+e*e));c[2]=Math.atan2(d*a+e*f,e*a-d*f);break;case 6:c[0]=Math.atan2(2*(d*a-e*f),1-2*(d*d+e*e));c[1]=Math.asin(2*(d*f+e*a));c[2]=Math.atan2(2*(f*a-d*e),1-2*(e*e+f*f));break;case 7:b=d*e+f*a;.499999<b?
(c[0]=0,c[1]=Math.PI/2,c[2]=2*Math.atan2(d,a)):-.499999>b?(c[0]=0,c[1]=-Math.PI/2,c[2]=-2*Math.atan2(d,a)):(c[0]=Math.atan2(2*(e*a-d*f),1-2*(e*e+f*f)),c[1]=Math.asin(2*(d*e+f*a)),c[2]=Math.atan2(2*(d*a-e*f),1-2*(d*d+f*f)));break;case 8:c[0]=Math.atan2(2*(f*a-d*e),1-2*(d*d+f*f));c[1]=Math.asin(2*(d*a+e*f));c[2]=Math.atan2(2*(e*a-d*f),1-2*(d*d+e*e));break;case 9:c[0]=Math.atan2(2*(d*a+e*f),1-2*(d*d+f*f));c[1]=Math.asin(2*(f*a-d*e));c[2]=Math.atan2(2*(d*f+e*a),1-2*(e*e+f*f));break;case 10:c[0]=Math.atan2(2*
(d*f+e*a),1-2*(d*d+e*e));c[1]=Math.asin(2*(d*a-e*f));c[2]=Math.atan2(2*(d*e+f*a),1-2*(d*d+f*f));break;case 11:b=e*a-d*f,.499999<b?(c[0]=0,c[1]=Math.PI/2,c[2]=-2*Math.atan2(f,a)):-.499999>b?(c[0]=0,c[1]=-Math.PI/2,c[2]=2*Math.atan2(f,a)):(c[0]=Math.atan2(2*(d*e+f*a),1-2*(e*e+f*f)),c[1]=Math.asin(2*(e*a-d*f)),c[2]=Math.atan2(2*(d*a+e*f),1-2*(d*d+e*e)))}return c}function n(a,b){var c=Math.cos(a[0]),d=Math.cos(a[1]),e=Math.cos(a[2]),f=Math.sin(a[0]),g=Math.sin(a[1]),h=Math.sin(a[2]),k=c*e,l=c*h,m=f*e,
n=f*h;b[0]=d*e;b[1]=d*h;b[2]=-g;b[3]=g*m-l;b[4]=g*n+k;b[5]=d*f;b[6]=g*k+n;b[7]=g*l-m;b[8]=d*c;return b}function g(a,b,c){c||(c=new Float32Array(3));m.transformQuat(b,a,c);return c}function p(a,b){b||(b=new Float32Array(4));N.fromMat4(a,ea);var c=ea[0],d=ea[3],e=ea[6],f=ea[1],g=ea[4],h=ea[7],k=ea[2],l=ea[5],m=ea[8],c=Math.sqrt(c*c+d*d+e*e)||1,f=Math.sqrt(f*f+g*g+h*h)||1,k=Math.sqrt(k*k+l*l+m*m)||1;ea[0]/=c;ea[3]/=c;ea[6]/=c;ea[1]/=f;ea[4]/=f;ea[7]/=f;ea[2]/=k;ea[5]/=k;ea[8]/=k;X.fromMat3(ea,b);X.normalize(b,
b);return b}function k(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=Math.sqrt(b*b+c*c+d*d),f=1/f;a[0]=b*f;a[1]=c*f;a[2]=d*f;a[3]=e*f}function x(a,b){var c=b;switch(typeof a){case "object":if(a)switch(a.constructor){case Object:for(var d in a)c=x(a[d],c);break;case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:for(d=0;d<a.length;d++)c=v(a[d],c);break;case Array:for(d=0;d<a.length;d++)c=x(a[d],c);break;
case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:c=v(0,c);break;default:l("Wrong object constructor:",a.constructor)}else c=v(0,c);return c;case "number":return v(a,c);case "boolean":return v(a|0,c);case "string":return h(a,c);case "function":case "undefined":return v(0,c)}}function v(a,b){var c=b;ba[0]=a;c=(c<<5)-c+ja[0];c&=c;c=(c<<5)-c+ja[1];return c&c}function h(a,b){for(var c=b,d=0;d<a.length;d++)c=(c<<
5)-c+a.charCodeAt(d),c&=c;return c}function d(a){return(34*a+1)*a%289}function t(a){return a-Math.floor(a)}function q(a){return G((34*a+5)*a)}function G(a){return a-289*Math.floor(a/289)}function H(a){return a-7*Math.floor(a/7)}function z(a,b,c){a<b&&(a=b);a>c&&(a=c);return a}function l(a){a&&J.error.apply(J,arguments);throw"engine panic:\nThe engine tried to perform an invalid operation and halted.\nPlease copy the console contents above and submit it to the Blend4Web forum at\nhttps://www.blend4web.com/en/forums/forum/17/";
}function F(a,b,c){a-=b;c-=b;return b+(a-Math.floor(a/c)*c)}function r(a){return F(a,0,2*Math.PI)}function E(a,b){if(a&&b){var c=a instanceof Array;if(c!=b instanceof Array)return!1;var d=a.buffer instanceof ArrayBuffer&&"undefined"!==a.byteLength;if(d!=(b.buffer instanceof ArrayBuffer&&"undefined"!==b.byteLength))return!1;if(c){if(a.length!=b.length)return!1;for(c=0;c<a.length;c++)if(!w(a[c],b[c]))return!1}else if(d){if(a.length!=b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!=b[c])return!1}else{switch(a.constructor){case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:return a==
b}for(var e in a)if(!w(a[e],b[e]))return!1;for(e in b)if(!(e in a))return!1}return!0}return!(a||b)}function w(a,b){if(typeof a!=typeof b)return!1;switch(typeof a){case "number":case "string":case "boolean":return a==b;case "object":return E(a,b);default:return!0}}function f(a,b,c){var d=S,e=m.dot(a,b);-.9999999>e?(m.cross(V,a,d),1E-6>m.length(d)&&m.cross(ta,a,d),m.normalize(d,d),X.setAxisAngle(d,Math.PI,c)):(m.cross(a,b,d),c.set(d),c[3]=1+e,X.normalize(c,c));return c}function y(a){if(""==a)return".";
var b=0==a.indexOf("/")|0;b&&0==a.indexOf("//")&&0!=a.indexOf("///")&&(b=2);a=a.split("/");for(var c=[],d=0;d<a.length;d++){var e=a[d];""!=e&&"."!=e&&(".."!=e||!b&&!c.length||c.length&&".."==c[c.length-1]?c.push(e):c.length&&c.pop())}a=c.join("/");for(d=0;d<b;d++)a="/"+a;return a||"."}function D(a,b,c){var d=Math.sqrt(a[0]*a[0]+a[1]*a[1]);1E-6<d?(b[0]=Math.atan2(a[5],a[8]),b[1]=Math.atan2(-a[2],d),b[2]=Math.atan2(a[1],a[0]),c[0]=Math.atan2(-a[5],-a[8]),c[1]=Math.atan2(-a[2],-d),c[2]=Math.atan2(-a[1],
-a[0])):(b[0]=Math.atan2(-a[7],a[4]),b[1]=Math.atan2(-a[2],d),b[2]=0,m.copy(b,c))}var N=u("__mat3"),M=u("__mat4"),B=u("__math"),J=u("__print"),C=u("__tbn"),A=u("__tsr"),X=u("__quat"),m=u("__vec3"),K=u("__vec4"),R=0,O={},S=new Float32Array(3),ga=new Float32Array(3),sa=new Float32Array(3),U=new Float32Array(3),ia=new Float32Array(3),fa=new Float32Array(3),pa=new Float32Array(3),Z=new Float32Array(3),ma=new Float32Array(4),aa=new Float32Array(4),ea=new Float32Array(9),wa=new Float32Array(9),da=new Float32Array(9),
W=new Float32Array(16),Ga=new Float32Array(16),P=X.create(),ua=X.create(),ba=new Float64Array(1),ja=new Uint32Array(ba.buffer),ca=new Float32Array([0,0,0,1]),Ca=new Float32Array([0,0,0,1,0,0,0,1]),la=new Float32Array([1,1,1]),V=new Float32Array([1,0,0]),ta=new Float32Array([0,1,0]),xa=new Float32Array([0,0,1]),I=new Float32Array([-1,0,0]),Ka=new Float32Array([0,-1,0]),Va=new Float32Array([0,0,-1]),Ia=[0,1,2,4,5],va=Math.floor(44488.07041494893),na=[new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,
0,1]),new Float32Array([0,0,1,0,0,-1,0,0,1,0,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1]),new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])];a.Wy=new Float32Array([0,0,0]);a.xt=ca;a.YX=Ca;a.oq=la;a.AXIS_X=V;a.AXIS_Y=ta;a.AXIS_Z=xa;a.AXIS_MX=I;a.AXIS_MY=Ka;a.AXIS_MZ=Va;a.XYX=0;a.YZY=1;a.ZXZ=2;a.XZX=3;a.YXY=4;a.ZYZ=5;a.XYZ=6;a.YZX=7;a.ZXY=8;a.XZY=9;a.YXZ=10;a.ZYX=11;a.FK=
na;a.Gy=1;a.lq=2;a.Yi=4;a.mD=4;a.fe=function(a){return"undefined"!=typeof a};a.keyfind=function(a,b,c){for(var d=[],e=c.length,f=0;f<e;f++){var g=c[f];g[a]==b&&d.push(g)}return d};a.f32=function(a){return new Float32Array(a)};a.QF=function(a,b){var c=a.length,d=new Float32Array(c+b.length);d.set(a);d.set(b,c);return d};a.oW=function(a,b){var c=a.length,d=new Uint32Array(c+b.length);d.set(a);d.set(b,c);return d};a.bO=function(){return 255==(new DataView((new Uint16Array([255])).buffer)).getUint16(0,
!0)};a.fN=function(a,b){var c=[],d={},e=b.length,f,g;for(f=0;f<e;f++)d[b[f]]=!0;e=a.length;for(f=0;f<e;f++)g=a[f],g in d&&c.push(g);return c};a.sign=e;a.c_=function(a,b,c){for(var d=c.length,e=0;e<d;e++)if(c[e][a]==b)return!0;return!1};a.keysearch=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];if(e[a]===b)return e}return null};a.a_=function(a,b,c,d,e){for(var f=0;f<e.length;f++){var g=e[f];if(g[a]==b&&g[c]==d)return g}return null};a.CR=function(a,b){for(var c=0;c<a.length;c++)if(a[c].uuid==
b)return c;return-1};a.aN=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return;a.push(b)};a.QY=function(a){for(var b=0;b<a.length-1;b++)for(var c=a[b],d=b+1;d<a.length;d++)if(c==a[d])return!1;return!0};a.jW=function(a,b,c,d){d||(d=new Float32Array(16));M.identity(d);d[12]=a;d[13]=b;d[14]=c};var Y=1;a.iU=function(){Y=(69069*Y+5)%Math.pow(2,32);return Math.round(Y/65536)%32768/32767};a.UV=function(a){Y=a};a.gh=function(a){var b=a[0]%va*48271-3399*Math.floor(a[0]/va);a[0]=0<b?b:b+2147483647;return(a[0]-
1)/2147483646};a.Uv=function(a,b){b||(b=[]);b[0]=5E4+Math.floor(a);return b};a.euler_to_quat=function(a,b){var d=S;d[0]=a[2];d[1]=a[1];d[2]=a[0];c(d,11,b);return b};a.ordered_angles_to_quat=c;a.quat_to_ordered_angles=b;a.oQ=n;a.quat_to_euler=function(a,c){var d=b(a,11,S);c[0]=d[2];c[1]=d[1];c[2]=d[0];return c};a.quat_to_dir=g;a.dir_to_quat=function(a,b,c){c||(c=new Float32Array(4));a=m.normalize(a,S);var d=m.dot(b,a);a=m.cross(b,a,ga);d=Math.acos(d);c[0]=a[0]*Math.sin(d/2);c[1]=a[1]*Math.sin(d/2);
c[2]=a[2]*Math.sin(d/2);c[3]=Math.cos(d/2);return c};a.kW=function(a,b,c,d){d||(d=new Float32Array(4));m.transformQuat(c,b,d);d[3]=-m.dot(a,d)};a.ZP=function(a){var b=A.get_quat_view(a.A.D),c=S;switch(a.type){case "CAMERA":c[0]=0;c[1]=-1;c[2]=0;m.transformQuat(c,b,c);ga[0]=0;ga[1]=0;ga[2]=-1;break;case "MESH":c[0]=0;c[1]=0;c[2]=1;m.transformQuat(c,b,c);ga[0]=0;ga[1]=0;ga[2]=1;break;case "EMPTY":c[0]=0,c[1]=1,c[2]=0,m.transformQuat(c,b,c),ga[0]=0,ga[1]=1,ga[2]=0}c[1]=0;m.normalize(c,c);a=m.dot(c,ga);
return Math.acos(a)*(0<-c[0]*ga[2]?-1:1)};a.$t=function(a,b,c,d){if(0!=c){d=d||[];for(var e=0;e<a.length;e++)d[e]=(1-c)*a[e]+c*b[e]}};a.FJ=function(){R++;return R.toString(10)};a.Zs=function(a){O[a]||(O[a]=0);var b=a+O[a];O[a]++;return b};a.oi=function(){return{a_position:new Float32Array(0),a_tbn:C.create(0)}};a.W=function(b){if(!(b instanceof Object))return b;var c;c=b.constructor;switch(c){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:c=
new c(b);break;case Array:c=new c(b.length);for(var d=0;d<b.length;d++)c[d]=a.W(b[d]);break;default:for(d in c=new c,b)b.hasOwnProperty(d)&&(c[d]=a.W(b[d]))}return c};a.Pq=function(a){var b=a instanceof Array?[]:{},c;for(c in a)if(a.hasOwnProperty(c))if(a[c]instanceof Object){var d=a[c].constructor;switch(d){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:b[c]=new d(a[c]);break;case Array:b[c]=
a[c].slice(0);break;default:b[c]=a[c]}}else b[c]=a[c];return b};a.matrix_to_quat=p;a.$A=function(a,b){b||(b=new Float32Array(3));b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};a.vH=function(a){ma[0]=.577350269189626;ma[1]=.577350269189626;ma[2]=.577350269189626;ma[3]=0;K.transformMat4(ma,a,ma);return K.length(ma)};a.aA=function(a,b){var c=b.left,d=b.right,e=b.top,f=b.bottom,g=b.near,h=b.far;c[0]=a[3]+a[0];c[1]=a[7]+a[4];c[2]=a[11]+a[8];c[3]=a[15]+a[12];d[0]=a[3]-a[0];d[1]=a[7]-a[4];d[2]=a[11]-a[8];d[3]=
a[15]-a[12];e[0]=a[3]-a[1];e[1]=a[7]-a[5];e[2]=a[11]-a[9];e[3]=a[15]-a[13];f[0]=a[3]+a[1];f[1]=a[7]+a[5];f[2]=a[11]+a[9];f[3]=a[15]+a[13];g[0]=a[3]+a[2];g[1]=a[7]+a[6];g[2]=a[11]+a[10];g[3]=a[15]+a[14];h[0]=a[3]-a[2];h[1]=a[7]-a[6];h[2]=a[11]-a[10];h[3]=a[15]-a[14];k(c);k(d);k(e);k(f);k(g);k(h)};a.PV=function(a,b,c){return c<-B.point_plane_dist(a,b.near)||c<-B.point_plane_dist(a,b.left)||c<-B.point_plane_dist(a,b.right)||c<-B.point_plane_dist(a,b.top)||c<-B.point_plane_dist(a,b.bottom)||c<-B.point_plane_dist(a,
b.far)?!0:!1};a.kQ=function(a,b,c,d,e){var f=m.dot(c,b.far),g=m.dot(d,b.far),h=m.dot(e,b.far),f=Math.sqrt(f*f+g*g+h*h);if(f<-B.point_plane_dist(a,b.near)||f<-B.point_plane_dist(a,b.far))return!0;f=m.dot(c,b.left);g=m.dot(d,b.left);h=m.dot(e,b.left);if(Math.sqrt(f*f+g*g+h*h)<-B.point_plane_dist(a,b.left))return!0;f=m.dot(c,b.right);g=m.dot(d,b.right);h=m.dot(e,b.right);if(Math.sqrt(f*f+g*g+h*h)<-B.point_plane_dist(a,b.right))return!0;f=m.dot(c,b.top);g=m.dot(d,b.top);h=m.dot(e,b.top);if(Math.sqrt(f*
f+g*g+h*h)<-B.point_plane_dist(a,b.top))return!0;f=m.dot(c,b.bottom);g=m.dot(d,b.bottom);h=m.dot(e,b.bottom);return Math.sqrt(f*f+g*g+h*h)<-B.point_plane_dist(a,b.bottom)?!0:!1};a.ep=function(a,b,c,d){d||(d=0);for(var e=a.length,f=0;f<e;f+=3){var g=a[f],h=a[f+1],k=a[f+2];c[d+f]=b[0]*g+b[4]*h+b[8]*k+b[12];c[d+f+1]=b[1]*g+b[5]*h+b[9]*k+b[13];c[d+f+2]=b[2]*g+b[6]*h+b[10]*k+b[14]}};a.R_=function(a,b,c,d){d||(d=0);for(var e=a.length,f=0;f<e;f+=3){var g=a[f],h=a[f+1],k=a[f+2];c[d+f]=b[0]*g+b[4]*h+b[8]*
k;c[d+f+1]=b[1]*g+b[5]*h+b[9]*k;c[d+f+2]=b[2]*g+b[6]*h+b[10]*k}return c};a.hU=function(a,b,c,d){d=d||0;for(var e=a.length,f=0;f<e;f+=4){P[0]=a[f];P[1]=a[f+1];P[2]=a[f+2];P[3]=a[f+3];var g=0<P[3];X.multiply(b,P,P);(g&&0>P[3]||!g&&0<P[3])&&K.scale(P,-1,P);c[d+f]=P[0];c[d+f+1]=P[1];c[d+f+2]=P[2];c[d+f+3]=P[3]}};a.mX=function(a,b,c){c||(c=new Float32Array(3));ma[0]=a[0];ma[1]=a[1];ma[2]=a[2];ma[3]=0;K.transformMat4(ma,b,ma);c[0]=ma[0];c[1]=ma[1];c[2]=ma[2]};a.iZ=function(a,b){var c=a.length;c||l("flatten(): Wrong or empty array");
var d=a[0].length;d||l("flatten(): Wrong or empty subarray");b||(b=new Float32Array(c*d));for(var e=0;e<c;e++)for(var f=0;f<d;f++)b[e*d+f]=a[e][f];return b};a.nX=function(a){for(var b=[],c=0;c<a.length;c+=3)b[c/3]=new Float32Array([a[c],a[c+1],a[c+2]]);return b};a.Zt=function(b,c,d,e){if(e<d)return d;var f=d+Math.floor((e-d)/2);return b[f]>c?a.Zt(b,c,d,f-1):b[f]<c?a.Zt(b,c,f+1,e):f};a.Ak=function(a,b){for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0};a.UY=function(a,b,c){for(var d=0;d<a.length;d++)if(Math.abs(a[d]-
b[d])>c)return!1;return!0};a.t_=function(a,b,c){c||(c=new Float32Array(16));for(var d=0;12>d;d++)c[d]=a[d]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.mW=function(a,b,c,d,e){e||(e=new Float32Array(16));b=M.fromRotationTranslation(c,d,W);M.multiply(b,a,e);return e};a.transform_vec3=function(a,b,c,d,e){e||(e=new Float32Array(3));c=M.fromRotationTranslation(c,d,W);1!==b&&(d=M.identity(Ga),b=m.set(b,b,b,S),M.scale(d,b,d),M.multiply(c,d,c));m.transformMat4(a,c,e);return e};a.K_=function(a,
b,c,d,e){e||(e=new Float32Array(4));b=M.fromRotationTranslation(c,d,W);K.transformMat4(a,b,e);return e};a.VZ=function(a,b,c,d,e){e||(e=new Float32Array(3));b=M.fromRotationTranslation(c,d,W);M.invert(b,b);m.transformMat4(a,b,e);return e};a.J_=function(a,b,c){c||(c=new Float32Array(16));M.fromRotationTranslation(b,a,c);a=a[3];for(b=0;12>b;b++)c[b]*=a;return c};a.g_=function(b,c,d){a.$A(b,c);c[3]=a.vH(b);p(b,d)};a.CY=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return JSON.stringify(b)};
a.EU=function(a,b,c,d){d||(d=new Float32Array(3));var e=S;m.subtract(b,a,e);m.transformQuat(e,c,e);m.subtract(b,e,d)};a.fA=function(){var a=S;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),c=new Float32Array(16),d=new Float32Array(16),e=new Float32Array(16),f=new Float32Array(16),g=new Float32Array(16);M.lookAt(a,[-1,0,0],[0,-1,0],b);M.scale(b,[-1,1,1],b);M.scale(b,[-1,1,-1],c);M.lookAt(a,[0,-1,0],[0,0,-1],d);M.scale(d,[1,1,-1],d);M.scale(d,[1,-1,-1],e);M.lookAt(a,[0,0,-1],[0,-1,0],f);M.scale(f,
[-1,1,1],f);M.scale(f,[-1,1,-1],g);return[b,c,d,e,f,g]};a.VQ=function(){var a=S;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),c=new Float32Array(16),d=new Float32Array(16),e=new Float32Array(16),f=new Float32Array(16),g=new Float32Array(16);M.lookAt(a,[1,0,0],[0,-1,0],b);M.scale(b,[-1,1,-1],c);M.lookAt(a,[0,1,0],[0,0,1],d);M.scale(d,[1,-1,-1],e);M.lookAt(a,[0,0,1],[0,-1,0],f);M.scale(f,[-1,1,-1],g);return[b,c,d,e,f,g]};a.DE=function(a){return x(a,0)};a.hash_code=x;a.KZ=h;a.kT=function(a,b){b[15]=
1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b};a.quat_to_angle_axis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};a.trunc=function(a){return isNaN(a)||"undefined"==typeof a?NaN:a|0};a.deg_to_rad=function(a){return a*Math.PI/180};a.rad_to_deg=function(a){return 180*
a/Math.PI};a.oC=function(a){var b=.366025403784439*a[0]+.366025403784439*a[1],c=Math.floor(a[0]+b),e=Math.floor(a[1]+b),f=.211324865405187*c+.211324865405187*e,b=a[0]-c+f;a=a[1]-e+f;var g=b>a?1:0,h=1-g,f=b+.211324865405187-g,k=a+.211324865405187-h,l=b+-.577350269189626,m=a+-.577350269189626,c=c%289,e=e%289,n=Math.max(.5-(b*b+a*a),0),q=Math.max(.5-(f*f+k*k),0),p=Math.max(.5-(l*l+m*m),0),r=2*t(.024390243902439*d(d(e)+c))-1,g=2*t(.024390243902439*d(d(e+h)+c+g))-1,w=2*t(.024390243902439*d(d(e+1)+c+1))-
1,c=Math.abs(r)-.5,e=Math.abs(g)-.5,h=Math.abs(w)-.5,r=r-Math.floor(r+.5),g=g-Math.floor(g+.5),w=w-Math.floor(w+.5);return 130*(n*n*n*n*(1.79284291400159-.85373472095314*(r*r+c*c))*(r*b+c*a)+q*q*q*q*(1.79284291400159-.85373472095314*(g*g+e*e))*(g*f+e*k)+p*p*p*p*(1.79284291400159-.85373472095314*(w*w+h*h))*(w*l+h*m))};a.IE=function(a){var b=1/7,c=b/2,d=G(Math.floor(a[0])),e=G(Math.floor(a[1])),f=t(a[0]);a=t(a[1]);var g=f-.5,h=f-1.5,f=a-.5;a-=1.5;var k=q(d),l=q(d+1),m=k,d=l,k=q(k+e),l=q(l+e),m=q(m+
e+1),d=q(d+e+1),e=g+.7*(H(k)*b+c),n=h+.7*(H(l)*b+c),g=g+.7*(H(m)*b+c),h=h+.7*(H(d)*b+c),k=f+.7*(H(Math.floor(k*b))*b+c),f=f+.7*(H(Math.floor(l*b))*b+c),m=a+.7*(H(Math.floor(m*b))*b+c),b=a+.7*(H(Math.floor(d*b))*b+c);return Math.min(e*e+k*k,n*n+f*f,g*g+m*m,h*h+b*b)};a.quat_project=function(a,b,c,d,e){e||(e=new Float32Array(4));a=m.transformQuat(b,a,S);b=c[0];var f=c[1];c=c[2];var g=ea;g[0]=f*f+c*c;g[1]=-f*b;g[2]=-c*b;g[3]=-b*f;g[4]=b*b+c*c;g[5]=-c*f;g[6]=-b*c;g[7]=-f*c;g[8]=b*b+f*f;m.transformMat3(a,
g,a);m.normalize(a,a);X.rotationTo(d,a,e);return e};a.cam_quat_to_mesh_quat=function(a,b){b||(b=new Float32Array(4));var c,d;c=X.setAxisAngle([0,0,1],Math.PI,X.create());d=X.setAxisAngle([1,0,0],Math.PI/2,X.create());X.multiply(c,d,c);X.multiply(a,c,b);return b};a.cleanup=function(){R=0;O={}};a.clamp=z;a.smooth=function(a,b,c,d){return d?(c=Math.exp(-c/d),(1-c)*a+c*b):a};a.smooth_v=function(a,b,c,d,e){e||(e=new Float32Array(a.length));if(d)for(c=Math.exp(-c/d),d=0;d<e.length;d++)e[d]=(1-c)*a[d]+c*
b[d];else m.copy(a,e);return e};a.ZI=function(a,b,c,d,e){e||(e=new Float32Array(a.length));d?X.slerp(a,b,Math.exp(-c/d),e):X.copy(a,e)};a.LA=function(a){return"object"===typeof a&&a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1};a.is_vector=function(a,b){if(a instanceof Array||a.buffer&&a.buffer instanceof ArrayBuffer)if(b&&b==a.length||!b)return!0;return!1};a.correct_cam_quat_up=function(a,b){var c=N.fromQuat(a,ea),d=S;d[0]=c[6];d[1]=c[7];d[2]=c[8];d=m.cross(xa,d,d);m.normalize(d,d);var e=c[4];!b&&
0<e&&(d[0]*=-1,d[1]*=-1,d[2]*=-1);ga[0]=c[0];ga[1]=c[1];ga[2]=c[2];m.normalize(ga,ga);X.rotationTo(ga,d,aa);X.multiply(aa,a,a)};a.fG=function(a,b,c,d){c=c*b-.5;d=d*b-.5;var e=c-Math.floor(c),f=d-Math.floor(d);c=Math.floor(c);d=Math.floor(d);var g=b-1;return(a[d*b+c]*(1-e)+a[d*b+Math.min(c+1,g)]*e)*(1-f)+(a[Math.min(d+1,g)*b+c]*(1-e)+a[Math.min(d+1,g)*b+Math.min(c+1,g)]*e)*f};a.jn=function(a){for(var b=0,c=0;3>c;c++)0<(a&1<<c)&&b++;return b};a.nI=function(a){for(var b=[0,0,0],c=0;3>c;c++)0<(a&1<<c)&&
(b[2-c]=1);return b};a.ip=function(a,b){var c=0;(1==b||2==b)&&0<(a&4)&&c++;2==b&&0<(a&2)&&c++;return c};a.nv=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})};a.Bj=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};a.random_from_array=function(a){return a.length?a[Math.floor(Math.random()*a.length)]:null};a.horizontal_direction=function(a,b,c){c||(c=new Float32Array(3));c[0]=a[0]-b[0];
c[1]=a[1]-b[1];c[2]=0;m.normalize(c,c)};a.lW=function(a,b,c){var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1],h=b[2];b=b[3];var k=g*a-h*e,l=h*d-f*a,m=f*e-g*d;c[0]=d+2*k*b+2*(g*m-h*l);c[1]=e+2*l*b+2*(h*k-f*m);c[2]=a+2*m*b+2*(f*l-g*k)};a.assert=function(a){a||l("Assertion failed")};a.K=l;a.angle_wrap_periodic=F;a.angle_wrap_0_2pi=r;a.oA=function(a){return/(?:\.([^.]+))?$/.exec(a)[1]};a.XV=function(a,b){for(var c in a){var d=!0,e=a[c],f=b[c];switch(typeof e){case "number":case "string":case "boolean":d=e==
f;break;case "object":d=E(e,f)}if(!d)return!1}return!0};a.MB=function(a,b){var c=a[0],d=a[2],e=a[3];b[0]=a[1];b[1]=d;b[2]=e;b[3]=c};a.WF=function(a){a++;132651<a&&J.error("Color ID pool depleted");var b=Math.floor(a/2601);a%=2601;return new Float32Array([b/51,Math.floor(a/51)/51,a%51/51])};a.line_plane_intersect=function(a,b,c,d){ma.set(a);ma[3]=b;S[0]=c[3];S[1]=c[4];S[2]=c[5];aa.set(S);aa[3]=0;a=K.dot(ma,aa);if(0==a)return null;m.copy(c,S);aa.set(S);aa[3]=1;a=-K.dot(ma,aa)/a;d[0]=c[0]+a*c[3];d[1]=
c[1]+a*c[4];d[2]=c[2]+a*c[5];return d};a.KR=function(a,b,c,d){var e=b[0]-a[0],f=c[0]-a[0],g=b[1]-a[1],h=c[1]-a[1];b=b[2]-a[2];a=c[2]-a[2];d[0]=g*a-b*h;d[1]=f*b-e*a;d[2]=e*h-g*f;return d};a.WY=function(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b};a.qI=f;a.gm=function(a,b,c){if(b==c)return c-a;a=r(a);b=r(b);c=r(c);b=2*Math.PI-b;c=r(c+b);a=r(a+b);return a>c?(c-=a,a=2*Math.PI-a,-c>a?a:c):0};a.smooth_step=function(a,b,c){isFinite(b)&&isFinite(c)&&(a=z(a,b,c));return a*a*(3-2*a)};a.lerp=function(a,
b,c){return b+a*(c-b)};a.gN=function(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)if(b[d]==a[c])return!0;return!1};a.aZ=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=0;return b};a.gK=function(a,b){for(var c=Math.max(a.length,b.length),d=0;d<c;d++){var f=e((d>=a.length?0:a[d])-(d>=b.length?0:b[d]));if(f)return f}return 0};a.Ml=function(a){return a.join(".")};a.iJ=function(a){return a.split(".").map(function(a){return a|0})};a.eJ=function(a,b){b[0]=Math.pow(a[0],2.2);b[1]=Math.pow(a[1],
2.2);b[2]=Math.pow(a[2],2.2)};a.VA=function(a,b){b[0]=Math.pow(a[0],1/2.2);b[1]=Math.pow(a[1],1/2.2);b[2]=Math.pow(a[2],1/2.2);return b};a.Ii=function(a){var b=a.split("://",2);return 1<b.length?(b[1]=y(b[1]),b.join("://")):y(a)};a.Mq=function(a){return!!parseInt(a.toString(2).substr(1),2)};a.jQ=function(a,b,c,d){d[0]=a[0];d[1]=b[0];d[2]=c[0];d[3]=a[1];d[4]=b[1];d[5]=c[1];d[6]=a[2];d[7]=b[2];d[8]=c[2];return d};a.Ek=function(){var a=[{}];a.length=0;return a};a.no=function(a){a=Math.round(32767.5*
(a+1)-32768);return z(a?a:0,-32768,32767)};a.WI=function(a){return z((a+32768)/32767.5-1,-1,1)};a.EJ=function(a){return z(Math.round(255*a),0,255)};a.DJ=function(a){return z(a/255,0,1)};a.bQ=function(a,b,c,d){var e=m.subtract(c,b,S),f=m.subtract(d,c,ga),g=m.subtract(b,d,sa);b=m.subtract(a,b,U);c=m.subtract(a,c,ia);a=m.subtract(a,d,fa);d=m.cross(e,f,pa);if(0<=m.dot(m.cross(d,e,Z),b)&&0<=m.dot(m.cross(d,f,Z),c)&&0<=m.dot(m.cross(d,g,Z),a))return g=m.length(d),f=m.dot(d,b),Math.abs(f/g);e=m.scale(e,
z(m.dot(e,b)/m.length(e),0,1),Z);b=m.length(m.subtract(b,e,Z));f=m.scale(f,z(m.dot(f,c)/m.length(f),0,1),Z);f=m.length(m.subtract(c,f,Z));g=m.scale(g,z(m.dot(g,a)/m.length(g),0,1),Z);g=m.length(m.subtract(a,g,Z));return Math.min(Math.min(b,f),g)};a.FU=function(a,b,c,d,e){if(c||d){var f=X.identity(P);c&&(b=X.setAxisAngle(b,c,ua),X.multiply(f,b,f));a=X.copy(a,e);d&&(e=g(a,V,S),d=X.setAxisAngle(e,d,ua),X.normalize(d,d),X.multiply(f,d,f));X.multiply(f,a,a);X.normalize(a,a)}};a.bx=function(a,b,c,d){g(b,
d,ga);m.normalize(ga,ga);m.subtract(c,a,sa);m.normalize(sa,sa);a=f(ga,sa,ma);X.multiply(a,b,b);X.normalize(b,b)};a.fU=function(a,b,c,d){b=m.transformQuat(b,a,ga);var e=m.dot(d,c);d=m.scale(d,e,sa);c=m.subtract(c,d,sa);d=X.identity(P);m.normalize(c,c);.999999>Math.abs(m.dot(b,c))&&f(b,c,d);X.normalize(d,d);X.multiply(d,a,a)};a.bF=function(a,b){for(var c=2*Math.PI,d=[],e=0;3>e;e++)d[e]=a[e]-b[e],5.1<d[e]?(a[e]-=d[e]/c*c,d[e]=a[e]-b[e]):-5.1>d[e]&&(a[e]+=-d[e]/c*c,d[e]=a[e]-b[e]);3.2<Math.abs(d[0])&&
1.6>Math.abs(d[1])&&1.6>Math.abs(d[2])&&(a[0]=0<d[0]?a[0]-c:a[0]+c);3.2<Math.abs(d[1])&&1.6>Math.abs(d[2])&&1.6>Math.abs(d[0])&&(a[1]=0<d[1]?a[1]-c:a[1]+c);3.2<Math.abs(d[2])&&1.6>Math.abs(d[0])&&1.6>Math.abs(d[1])&&(a[2]=0<d[2]?a[2]-c:a[2]+c)};a.YB=function(a,b,c){b=n(b,ea);a=n(a,wa);a=N.multiply(a,b,da);b=S;D(a,b,ga);m.copy(Math.abs(b[0])+Math.abs(b[1])+Math.abs(b[2])>Math.abs(ga[0])+Math.abs(ga[1])+Math.abs(ga[2])?ga:b,c)};a.gU=function(a,b,c){a=N.fromQuat(a,ea);var d=S;D(a,d,ga);m.copy(Math.abs(d[0]-
b[0])+Math.abs(d[1]-b[1])+Math.abs(d[2]-b[2])>Math.abs(ga[0]-b[0])+Math.abs(ga[1]-b[1])+Math.abs(ga[2]-b[2])?ga:d,c);return c}};b4w.module.__sfx=function(a,u){function e(){var a=window.AudioContext||window.webkitAudioContext;if(a){try{var b=new a}catch(sa){return F.error('Unable to initialize AudioContext: "'+sa+'". The audio is disabled.'),null}if(b.createGain)return b;F.warn("deprecated WebAudio implementation");return null}F.warn("WebAudio is not supported");return null}function c(a,c,d){var e=a.ka;if("NONE"!=e.behavior){var f=e.loop,h=e.pitch;if(e.src&&(f||0<=d)){e.fz=Math.floor(5E4*Math.random());var l=X.currentTime+
c,l=Math.max(0,l);e.Kf=l;e.state=20;var n=m.Qc;"POSITIONAL"==e.behavior&&"none"==n.hr&&(e.behavior="BACKGROUND_SOUND");b(a,m.Qc);if("POSITIONAL"==e.behavior||"BACKGROUND_SOUND"==e.behavior){c=X.createBufferSource();c.buffer=e.src;c.playbackRate.value=h;if(f){e.pc&&e.pc.disconnect();e.Ud&&e.Ud.disconnect();c.loop=!0;c.loopStart=e.qH;if(c.loopEnd=e.qw)d=X.createBufferSource(),d.buffer=e.src,d.playbackRate.value=h,e.Ud=d,d.connect(e.Pd);c.start(l);e.duration=0}else f=c.buffer?c.buffer.duration:0,d>f?
(f=l+d+e.Ve,c.loop=!0,c.start(l),c.stop(f),e.duration=d):(c.loop=!1,c.start(l),e.duration=f);c.connect(e.Pd);e.pc=c;g(e);p(e);k(e)}else"BACKGROUND_MUSIC"==e.behavior&&(E.clear_timeout(e.iz),E.clear_timeout(e.jz),d=function(){var b=a.ka,c=b.src;c&&(c.volume=1,c.loop=b.loop,b.pc=b.pc||X.createMediaElementSource(c),b.pc.connect(b.Pd),20==b.state&&(c.currentTime&&(c.currentTime=0),c.play()))},0==c?d():e.iz=E.set_timeout(d,1E3*c),f?e.duration=0:e.duration=z(a));x(e,l)}}}function b(a,b){var c=a.ka;if(!c.Pd){var d=
w.get_trans_view(a.A.D),e=w.get_quat_view(a.A.D);if(N.yw){var g=X.createBiquadFilter();g.type="peaking"}else g=null;var h=X.createGain();switch(c.behavior){case "POSITIONAL":var k=X.createPanner();"string"!=typeof k.panningModel?(k.panningModel=k.EQUALPOWER,k.distanceModel=k.INVERSE_DISTANCE):(k.panningModel="equalpower",k.distanceModel=b.hr);k.setPosition(d[0],d[1],d[2]);y.copy(d,c.SA);d=M;f.quat_to_dir(e,f.AXIS_MZ,d);k.setOrientation(d[0],d[1],d[2]);k.refDistance=c.dist_ref;k.maxDistance=c.dist_max;
k.rolloffFactor=c.attenuation;k.coneInnerAngle=c.fF;k.coneOuterAngle=c.gF;k.coneOuterGain=c.hF;var l=X.createGain();l.gain.value=H(c);g?(k.connect(g),g.connect(l)):k.connect(l);l.connect(h);c.Pd=k;if(c.An){var m=X.createGain();h.connect(m);m.connect(b.Pd)}else m=null,h.connect(b.Pd);break;case "BACKGROUND_SOUND":k=null;l=X.createGain();l.gain.value=H(c);g?(c.Pd=g,g.connect(l)):c.Pd=l;l.connect(h);c.An?(m=X.createGain(),h.connect(m),m.connect(b.Pd)):(m=null,h.connect(b.Pd));break;case "BACKGROUND_MUSIC":m=
k=null,l=X.createGain(),l.gain.value=H(c),g?(c.Pd=g,g.connect(l)):c.Pd=l,l.connect(h),h.connect(b.Pd)}c.CB=k;c.Ch=g;c.so=l;c.Kk=h;c.OB=m}}function n(a){var b=a.ka;c(a,b.delay+b.BF*Math.random(),b.duration)}function g(a){var b=a.Ud||a.pc;f.fe(b.onended)&&(b.onended=function(){a.state=50})}function p(a){a.An&&a.OB.gain.cancelScheduledValues(a.Kf);a.cp&&(a.pc.playbackRate.cancelScheduledValues(a.Kf),a.Ud&&a.Ud.playbackRate.cancelScheduledValues(a.Kf));a.pt=a.Kf}function k(a){if(a.An||a.cp){var b=a.OB,
c=a.pc,d=c.buffer?c.buffer.duration:0;if(d){var e=a.Kf;R[0]=a.fz;for(var g=0;5>g;){var h=a.pitch+a.cp*f.gh(R);if(e>=a.pt){if(a.An){var k=1-f.clamp(a.An,0,1)*Math.random();b.gain.setValueAtTime(k,e)}a.cp&&(c.playbackRate.setValueAtTime(h,e),a.Ud&&a.Ud.playbackRate.setValueAtTime(h,e));g++}e+=d/h}a.pt=e-.001}}}function x(a,b){if(a.xj||a.Ve){var c=a.Kk;c.gain.cancelScheduledValues(b);a.xj?(c.gain.setValueAtTime(0,b),c.gain.linearRampToValueAtTime(1,b+a.xj)):c.gain.setValueAtTime(1,b);a.Ve&&!a.loop&&
(c.gain.setValueAtTime(1,b+a.duration),c.gain.linearRampToValueAtTime(0,b+a.duration+a.Ve))}}function v(a){"SPEAKER"!=a.type&&f.K("Wrong object type");var b=a.ka;if(50==b.state)b.state=30;else if(20==b.state||40==b.state){var c=b.Kk,d=X.currentTime;b.Ve&&(c.gain.setValueAtTime(c.gain.value,d),c.gain.linearRampToValueAtTime(0,d+b.Ve));"BACKGROUND_MUSIC"==b.behavior?b.src&&(E.clear_timeout(b.iz),E.clear_timeout(b.jz),b.jz=E.set_timeout(function(){var b=a.ka.src;b&&(b.currentTime&&(b.currentTime=0),
b.pause())},1E3*b.Ve)):(c=b.pc,c.onended=function(){},b.duration<c.buffer.duration?b.Ve&&20==b.state?c.stop(d+b.Ve):20==b.state&&(c.stop(0),c.disconnect()):c.disconnect(),b.Kf=0,b.EB=0,b.fu=0);b.state=30}}function h(a){a=a.ka;if(20==a.state){var b=X.currentTime;a.EB=b;"BACKGROUND_MUSIC"==a.behavior?(b=a.src)&&b.pause():(b>a.Kf?a.fu=d(a,b):a.fu=0,a.pc.onended=function(){},a.pc.stop(0),a.pc.disconnect(),p(a));a.state=40}}function d(a,b){R[0]=a.fz;for(var c=a.pc.buffer.duration,d=a.Kf,e;d<b;)e=a.pitch+
a.cp*f.gh(R),d+=c/e;return(c/e-(d-b))*e}function t(a){var b=a.ka;if(40==b.state){var c=X.currentTime;b.Kf+=c-b.EB;if("BACKGROUND_MUSIC"==b.behavior)b.src.play();else{a=a.ka;var d=X.createBufferSource();d.loop=a.pc.loop;d.loopStart=a.pc.loopStart;d.loopEnd=a.pc.loopEnd;d.buffer=a.pc.buffer;d.playbackRate.value=a.pc.playbackRate.value;d.connect(a.Pd);a.pc=d;a.Ud&&(d=X.createBufferSource(),d.loop=a.Ud.loop,d.buffer=a.Ud.buffer,d.playbackRate.value=a.Ud.playbackRate.value,d.connect(a.Pd),a.Ud=d);b.pt=
c;c=b.pc;g(b);c.start(b.Kf,b.fu);k(b)}x(b,b.Kf);b.state=20}}function q(a,b,c){var d;d=b.cQ;if(0<d){var e=b.OV;if(0!=y.dot(a.ty,a.ty)||0!=y.dot(b.Um,b.Um)){var g=y.subtract(a.SA,b.Gi,M),h=y.length(g);b=y.dot(g,b.Um)/h;g=y.dot(g,a.ty)/h;h=e/d;b=Math.min(-b,h);g=Math.min(-g,h);d=(e-d*b)/(e-d*g);isFinite(d)||(d=0);d=Math.min(d,16);d=Math.max(d,.125);d=f.smooth(d,a.dH,c,.3);a.pc.playbackRate.value=d;a.dH=d}}}function G(a){a=a.ka;return!a||20!=a.state&&40!=a.state&&30!=a.state&&50!=a.state?!1:!0}function H(a){return a.muted?
0:a.volume}function z(a){a=a.ka;return(a=a.src)?a.duration:0}var l=u("__config"),F=u("__print"),r=u("__quat"),E=u("__time"),w=u("__tsr"),f=u("__util"),y=u("__vec3"),D=l.L,N=l.ka,M=new Float32Array(3),B=new Float32Array(3),J=r.create(),C=[],A=[],X=null,m=null,K=[],R=[1],O=null;a.fD=10;a.Fy=20;a.eD=30;a.eP=function(){return{Jc:-1,wi:"",behavior:"NONE",muted:!1,volume:1,pitch:1,attenuation:1,dist_ref:1,dist_max:1E4,fF:360,gF:360,hF:1,autoplay:!1,cyclic:!1,loop:!1,qH:0,qw:0,delay:0,BF:0,An:0,cp:0,xj:0,
Ve:0,Kf:0,EB:0,fu:0,duration:0,pt:0,fz:1,src:null,state:10,SA:new Float32Array(3),ty:new Float32Array(3),Xu:!1,dH:1,iz:-1,jz:-1,vm:0,Pd:null,pc:null,Ud:null,CB:null,Ch:null,so:null,Kk:null,OB:null,Il:0}};a.init=function(){var a=document.createElement("audio"),b=document.createElement("video");a.canPlayType&&(""!=a.canPlayType("audio/ogg")&&(C.push("ogg"),C.push("ogv"),C.push("oga")),""!=a.canPlayType("audio/mpeg")&&C.push("mp3"),""!=a.canPlayType("audio/mp4")&&(C.push("mp4"),C.push("m4v"),C.push("m4a")),
""!=a.canPlayType("audio/webm")&&C.push("webm"));b.canPlayType&&(""!=b.canPlayType("video/ogg")&&(A.push("ogv"),A.push("ogg"),A.push("oga")),""!=b.canPlayType("video/mp4")&&(A.push("m4v"),A.push("mp4")),""!=b.canPlayType("video/webm")&&A.push("webm"),""!=b.canPlayType("video/mpeg")&&A.push("mp3"))};a.mN=function(a){N.aD&&!X&&(X=e())&&F.log("%cINIT WEBAUDIO: "+X.sampleRate+"Hz","color: #00a");if(X){var b={Gi:new Float32Array(3),Um:new Float32Array(3),Il:0},c=X.createGain(),d=X.createGain();b.so=c;
b.Kk=d;c.connect(d);d.connect(X.destination);if(a.b4w_enable_dynamic_compressor){var d=X.createDynamicsCompressor(),g=a.b4w_dynamic_compressor_settings;d.threshold.value=g.threshold;d.knee.value=g.knee;d.ratio.value=g.ratio;d.attack.value=g.attack;d.release.value=g.release;d.connect(c);b.Wq=d;b.Pd=d}else b.Wq=null,b.Pd=c;switch(a.audio_distance_model){case "INVERSE":case "INVERSE_CLAMPED":b.hr="inverse";break;case "LINEAR":case "LINEAR_CLAMPED":b.hr="linear";break;case "EXPONENT":case "EXPONENT_CLAMPED":b.hr=
"exponential";break;case "NONE":b.hr="none";break;default:f.K("Wrong audio distance model")}b.cQ=a.audio_doppler_factor;b.OV=a.audio_doppler_speed;b.muted=!1;b.volume=a.audio_volume;c.gain.value=H(b);b.vm=0}else b=null;a.Qc=b};a.RU=function(a){m=a};a.detect_audio_container=function(a){a||(a="ogg");return-1<C.indexOf(a)?a:-1<C.indexOf("m4a")?"m4a":-1<C.indexOf("oga")?"oga":""};a.detect_video_container=function(a){a||(a="webm");return-1<A.indexOf(a)?a:-1<A.indexOf("m4v")?"m4v":-1<A.indexOf("webm")?
"webm":""};a.Lp=function(a,b){var c=a.data,d=b.ka;if(a.data.sound){d.Jc=a.data.sound.uuid;d.wi=a.data.sound.filepath;switch(c.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":d.behavior=X?c.b4w_behavior:"NONE";break;case "BACKGROUND_MUSIC":var e;X?(window.MediaElementAudioSourceNode?e=!0:(F.warn("MediaElementAudioSourceNode not found"),e=!1),e=e&&!D.RE?"BACKGROUND_MUSIC":"BACKGROUND_SOUND"):e="NONE";d.behavior=e;break;default:f.K("Wrong speaker behavior")}c.sound||(d.behavior="NONE");d.Xu=
c.b4w_enable_doppler;d.muted=c.muted;d.volume=c.volume;d.pitch=c.pitch;d.attenuation=c.attenuation;d.dist_ref=c.distance_reference;d.dist_max=c.distance_max||1E4;d.fF=c.cone_angle_inner;d.gF=c.cone_angle_outer;d.hF=c.cone_volume_outer;d.autoplay=c.b4w_auto_play;d.cyclic=c.b4w_cyclic_play;d.loop=c.b4w_loop;d.qH=c.b4w_loop_start;d.qw=c.b4w_loop_end;d.delay=c.b4w_delay;d.BF=c.b4w_delay_random;d.An=c.b4w_volume_random;d.cp=c.b4w_pitch_random;d.xj=c.b4w_fade_in;d.Ve=c.b4w_fade_out;K.push(b)}};a.aJ=function(b){"SPEAKER"!=
b.type&&f.K("Wrong object type");switch(b.ka.behavior){case "POSITIONAL":return a.Fy;case "BACKGROUND_SOUND":return a.Fy;case "BACKGROUND_MUSIC":return a.eD;case "NONE":return a.fD;default:f.K("Wrong speaker behavior")}};a.$W=function(a,b){var c=a.ka;switch(c.behavior){case "POSITIONAL":case "BACKGROUND_SOUND":case "BACKGROUND_MUSIC":c.src=b;break;case "NONE":break;default:f.K("Wrong speaker behavior")}};a.YH=function(){var a=X.createBufferSource();a.buffer=X.createBuffer(1,22050,22050);a.connect(X.destination);
a.start(0)};a.VP=function(a,b,c){X?X.decodeAudioData(a,b,c):c()};a.LV=function(a){v(a);a.ka=null;K.splice(K.indexOf(a),1)};a.cleanup=function(){for(var a=0;a<K.length;a++){var b=K[a].ka;"BACKGROUND_MUSIC"==b.behavior?(b=b.src)&&b.pause():(b.pc&&b.pc.disconnect(),b.Ud&&b.Ud.disconnect())}m&&m.Qc&&(a=m.Qc,a.Gi[0]=0,a.Gi[1]=0,a.Gi[2]=0,a.Um[0]=0,a.Um[1]=0,a.Um[2]=0);m=null;K.splice(0);O=null};a.update=function(a){if(X&&K.length){for(var b=0;b<K.length;b++){var c=K[b],d=c.ka,e=d.pc,g=X.currentTime;!d.loop&&
20==d.state&&d.duration&&d.Kf+d.duration<g&&("BACKGROUND_MUSIC"==d.behavior||e&&!f.fe(e.onended))&&(d.state=50);d.cyclic&&50==d.state&&n(c);20==d.state&&3>d.pt-g&&k(d)}O&&O.ak.length&&(-1==O.active||a>O.ZD+O.HF[O.active])&&(b=O,-1<b.active&&v(b.ak[b.active]),c=-1==b.active&&b.random?Math.round(Math.random()*(b.ak.length-1)):b.random?(b.active+(1+Math.round(Math.random()*(b.ak.length-2))))%b.ak.length:(b.active+1)%b.ak.length,n(b.ak[c]),b.active=c,b.ZD=a)}};a.play=c;a.play_def=n;a.stop=v;a.is_playing=
function(a){return 20==a.ka.state};a.KV=h;a.MV=t;a.loop_stop=function(a,b){var c=a.ka,d=c.Ud;if(G(a)&&("POSITIONAL"==c.behavior||"BACKGROUND_SOUND"==c.behavior)&&d){var e=X.currentTime+b;c.pc.stop(e);d.start(e,c.qw)}};a.playrate=function(a,b){var c=a.ka;c.pitch=b;!G(a)||"POSITIONAL"!=c.behavior&&"BACKGROUND_SOUND"!=c.behavior||(c.pc.playbackRate.value=b,c.Ud&&(c.Ud.playbackRate.value=b),p(c),k(c))};a.get_playrate=function(a){return a.ka.pitch};a.cyclic=function(a,b){a.ka.cyclic=!!b};a.uS=function(a){return a.ka.autoplay};
a.is_cyclic=function(a){return a.ka.cyclic};a.ZS=function(a,b,c,d,e){if(a=a.Qc){var f=M;f[0]=0;f[1]=0;f[2]=-1;y.transformQuat(f,c,f);B[0]=0;B[1]=1;B[2]=0;y.transformQuat(B,c,B);c=X.listener;c.setPosition(b[0],b[1],b[2]);c.setOrientation(f[0],f[1],f[2],B[0],B[1],B[2]);if(d&&a.Il!=e){if(a.listener_stride)a.listener_stride=!1,y.copy(b,a.Gi);else for(c=a.Um,c[0]=(b[0]-a.Gi[0])/d,c[1]=(b[1]-a.Gi[1])/d,c[2]=(b[2]-a.Gi[2])/d,y.copy(b,a.Gi),b=0;b<K.length;b++)c=K[b],f=c.ka,G(c)&&"POSITIONAL"==f.behavior&&
f.Xu&&q(f,a,d);a.Il=e}else y.copy(b,a.Gi)}};a.listener_stride=function(){var a=m.Qc;a&&(a.listener_stride=!0)};a.NV=function(a,b,c){var d=a.ka;if(G(a)&&"POSITIONAL"==d.behavior){var e=w.Lb(a.A.D,M);a=w.vb(a.A.D,J);var g=d.CB;g.setPosition(e[0],e[1],e[2]);f.quat_to_dir(a,f.AXIS_MZ,B);g.setOrientation(B[0],B[1],B[2]);d.Xu&&(a=d.SA,b&&d.Il!=c?(d.kJ?(y.copy(e,a),d.kJ=!1):(g=d.ty,g[0]=(e[0]-a[0])/b,g[1]=(e[1]-a[1])/b,g[2]=(e[2]-a[2])/b,y.copy(e,a),q(d,m.Qc,b)),d.Il=c):y.copy(e,a))}};a.speaker_stride=function(a){var b=
a.ka;G(a)&&"POSITIONAL"==b.behavior&&b.Xu&&(b.kJ=!0)};a.qA=function(a){return a.ka.behavior};a.check_active_speakers=function(){for(var a=0;a<K.length;a++)if(G(K[a]))return!0;return!1};a.jV=function(a){var b=m.Qc;b&&(b.volume=a,X&&(b.so.gain.value=H(b)))};a.FR=function(){var a=m.Qc;return a?a.volume:0};a.set_volume=function(a,b){var c=a.ka;c.volume=b;G(a)&&(c.so.gain.value=H(c))};a.get_volume=function(a){return a.ka.volume};a.mute=function(a,b){a.ka.muted=!!b;G(a)&&(a.ka.so.gain.value=H(a.ka))};a.is_muted=
function(a){return a.ka.muted};a.yT=function(a){var b=m.Qc;b&&(b.muted=!!a,X&&(b.so.gain.value=H(b)))};a.BS=function(){var a=m.Qc;return a?a.muted:!1};a.get_speaker_objects=function(){return K};a.pause=function(){for(var a=0;a<K.length;a++)h(K[a])};a.resume=function(){for(var a=0;a<K.length;a++)t(K[a])};a.set_compressor_params=function(a,b){if(a.Qc&&a.Qc.Wq){var c=a.Qc.Wq;c.threshold.value=b.threshold;c.knee.value=b.knee;c.ratio.value=b.ratio;c.attack.value=b.attack;c.release.value=b.release}};a.get_compressor_params=
function(a){if(!a.Qc||!a.Qc.Wq)return null;a=a.Qc.Wq;return{threshold:a.threshold.value,knee:a.knee.value,ratio:a.ratio.value,attack:a.attack.value,release:a.release.value}};a.duck=function(a,b,c){if(G(a)){a=a.ka;var d=a.Kk,e=X.currentTime;d.gain.setValueAtTime(d.gain.value,e);d.gain.linearRampToValueAtTime(b,e+c);a.vm=c}};a.unduck=function(a){if(G(a)){a=a.ka;var b=a.Kk,c=X.currentTime;b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(1,c+a.vm);a.vm=0}};a.fQ=function(a,b){if(X){var c=
m.Qc,d=c.Kk,e=X.currentTime;d.gain.setValueAtTime(d.gain.value,e);d.gain.linearRampToValueAtTime(a,e+b);c.vm=b}};a.pW=function(){if(X){var a=m.Qc,b=a.Kk,c=X.currentTime;b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(1,c+a.vm);a.vm=0}};a.apply_playlist=function(a,b,c){O={active:-1,ZD:0,random:c,ak:[],HF:[]};for(c=0;c<a.length;c++){var d=a[c],e=z(d);0==e?F.warn("Ignoring speaker with zero duration: "+d.name):(v(d),d.ka.cyclic=!1,O.ak.push(d),O.HF.push(e+b))}};a.get_duration=z;
a.clear_playlist=function(){if(O)for(var a=O.ak,b=0;b<a.length;b++)v(a[b]);O=null};a.get_positional_params=function(a){return(a=a.ka)&&"POSITIONAL"==a.behavior?{dist_ref:a.dist_ref,dist_max:a.dist_max,attenuation:a.attenuation}:null};a.set_positional_params=function(a,b){var c=a.ka;if(c&&"POSITIONAL"==c.behavior){c.dist_ref=b.dist_ref;c.dist_max=b.dist_max;c.attenuation=b.attenuation;var d=c.CB;d&&(d.refDistance=c.dist_ref,d.maxDistance=c.dist_max,d.rolloffFactor=c.attenuation)}};a.set_filter_params=
function(a,b){var c=a.ka;c&&c.Ch&&(c.Ch.frequency.value=b.freq,c.Ch.Q.value=b.Q,c.Ch.gain.value=b.gain)};a.get_filter_params=function(a){return(a=a.ka)&&a.Ch?{freq:a.Ch.frequency.value,Q:a.Ch.Q.value,gain:a.Ch.gain.value}:null};a.get_filter_freq_response=function(a,b,c,d){a=a.ka;if(!a||!a.Ch)return null;a.Ch.getFrequencyResponse(b,c,d)};a.reset=function(){C.length=0;A.length=0;X=null}};b4w.module.__input=function(a,u){function e(a){var b=R.detect_mobile();return(20!=a||navigator.getVRDevices||navigator.getVRDisplays||b&&K())&&(10!=a||b&&window.DeviceOrientationEvent)?!0:!1}function c(a,b){if(!e(a))return null;var c={type:a,xg:!1,fh:[],Mh:[],Mj:[],ge:[],Nj:[],Oj:[],Pr:[],aH:[],Gj:[],ik:[],gk:[],fk:[],element:b,Ni:!0,jc:[],Cw:new Float32Array(2),vT:0,distortion_coefs:new Float32Array(2),chromatic_aberration_coefs:new Float32Array(4),ys:null,En:null,Xi:null,ud:null,orientation:ia.create(),
position:pa.create(),Eh:window.VRFrameData?new VRFrameData:null,rC:U.create(),yj:new Float32Array(4),zj:new Float32Array(4),Hh:0,ci:0,Bs:0,Pl:0,yi:0,di:0,Dm:[],Nk:[0,0,0,0,0,0,0,0,0,0,0,0],UF:[0,0,0,0,0,0,0,0,0,0,0,0],mv:[]};c.yj[0]=c.yj[1]=c.yj[2]=c.yj[3]=Math.PI/4;c.zj[0]=c.zj[1]=c.zj[2]=c.zj[3]=Math.PI/4;30==a||40==a||50==a?(c.xg=!!b,50==a?document.addEventListener("touchstart",function(){}):40==a&&(c.Ni=!1)):10==a?c.xg=!0:20==a&&n(c);return c}function b(b,d){10==b||20==b?d=window:d||(40==b?d=
document:d=O.get_container());for(var e=0;e<Ca.length;e++)if(Ca[e].type==b&&Ca[e].element==d)return Ca[e];e=c(b,d);60!=b&&70!=b&&80!=b&&90!=b||e.mv.push(a.GMPD_BUTTON_0,a.GMPD_BUTTON_1,a.GMPD_BUTTON_2,a.GMPD_BUTTON_3,a.GMPD_BUTTON_4,a.GMPD_BUTTON_5,a.GMPD_BUTTON_6,a.GMPD_BUTTON_7,a.GMPD_BUTTON_8,a.GMPD_BUTTON_9,a.GMPD_BUTTON_10,a.GMPD_BUTTON_11,a.GMPD_BUTTON_12,a.GMPD_BUTTON_13,a.GMPD_BUTTON_14,a.GMPD_BUTTON_15,a.GMPD_BUTTON_16,a.GMPD_BUTTON_17,a.GMPD_BUTTON_18,a.GMPD_BUTTON_19,a.GMPD_BUTTON_20,a.GMPD_BUTTON_21,
a.GMPD_BUTTON_22,a.GMPD_BUTTON_23,a.GMPD_BUTTON_24,a.GMPD_BUTTON_25,a.GMPD_AXIS_0,a.GMPD_AXIS_1,a.GMPD_AXIS_2,a.GMPD_AXIS_3,a.GMPD_AXIS_4,a.GMPD_AXIS_5,a.GMPD_AXIS_6,a.GMPD_AXIS_7,a.GMPD_AXIS_8,a.GMPD_AXIS_9,a.GMPD_AXIS_10,a.GMPD_AXIS_11);e&&Ca.push(e);return e}function n(a){20==a.type&&(navigator.getVRDisplays?navigator.getVRDisplays().then(function(b){0<b.length&&(a.ud=b[0],a.xg=!0,a.ud.getFrameData(a.Eh),a.ys&&a.ys())},function(){sa.ga("WebVR displays are not found.");a.xg=!1}):navigator.getVRDevices?
(navigator.getVRDevices().then(function(b){x(a,b);b.length&&(a.xg=!0);a.ys&&a.ys()},function(){sa.ga("WebVR devices are not found.");a.xg=!1}),p(a,aa.webvr)):(g(a),a.xg=!0))}function g(a){var b=aa.nonwebvr;a.Pl=b.Pl;a.yi=b.yi;a.di=b.di;p(a,b);a.Hh=b.Hh;a.ci=b.ci;a.Bs=b.Bs;k(a)}function p(a,b){a.distortion_coefs[0]=b.distortion_coefs[0];a.distortion_coefs[1]=b.distortion_coefs[1];a.chromatic_aberration_coefs[0]=b.chromatic_aberration_coefs[0];a.chromatic_aberration_coefs[1]=b.chromatic_aberration_coefs[1];
a.chromatic_aberration_coefs[2]=b.chromatic_aberration_coefs[2];a.chromatic_aberration_coefs[3]=b.chromatic_aberration_coefs[3]}function k(a){var b=Math.atan(a.Hh/2/a.Bs*aa.nonwebvr.FF);b&&(a.yj[0]=a.zj[0]=Math.min(b,Math.PI/3));b&&(a.yj[1]=a.zj[3]=Math.min(b,Math.PI/3));b&&(a.yj[2]=a.zj[2]=Math.min(b,Math.PI/3));b&&(a.yj[3]=a.zj[1]=Math.min(b,Math.PI/3))}function x(a,b){var c=b.filter(function(a){return a instanceof HMDVRDevice}),d=null;c.length&&(d=c[0]);c=null;d&&(c=b.filter(function(a){return-1!==
a.deviceName.toLowerCase().indexOf("oculus")&&a.hardwareUnitId==d.hardwareUnitId&&a instanceof PositionSensorVRDevice}));a.En=d;a.Xi=c}function v(a,b,c){switch(a.type){case 20:var e=d(a,0);if(e&1){var f="left"==b?a.yj:a.zj;Z.copy(f,c)}else if(f=a.ud||a.En)f=f.getEyeParameters(b),(f=f.fieldOfView||f.currentFieldOfView)?(c[0]=fa.deg_to_rad(f.upDegrees),c[1]=fa.deg_to_rad(f.rightDegrees),c[2]=fa.deg_to_rad(f.downDegrees),c[3]=fa.deg_to_rad(f.leftDegrees)):e&16&&(e=da,"left"==b?ga.copy(a.Eh.leftProjectionMatrix,
e):ga.copy(a.Eh.rightProjectionMatrix,e),c[0]=Math.atan(-P[1]/P[2]),c[1]=Math.atan(-P[0]/P[2]),c[2]=Math.atan(P[1]/P[2]),c[3]=Math.atan(P[0]/P[2]));break;default:sa.error("fov is undefined for device: ",a.type)}return c}function h(a,b,c){switch(a.type){case 20:a.ud&&("left"==b?ga.copy(a.Eh.leftProjectionMatrix,c):"right"==b?ga.copy(a.Eh.rightProjectionMatrix,c):sa.error("Unknown type of eye: ",b));break;default:sa.error("Projection matrix is undefined for device: ",a.type)}return c}function d(a,b){switch(b){case 0:var c=
0;navigator.getVRDisplays&&(c|=8,a.Eh&&(c|=16));navigator.getVRDevices&&(c=ma.is_mobile_device?c|4:c|2);return c||1;case 23:var d=a.ud||a.En;return d?(c=d.getEyeParameters("left"),d=d.getEyeParameters("right"),a.ud?d.offset[0]-c.offset[0]:d.eyeTranslation.x-c.eyeTranslation.x):a.Hh}}function t(a,c){if(a){for(var d=0;d<a.buttons.length;d++)c.Dm[d]=a.buttons[d].value||+a.buttons[d].pressed;if(a.axes)for(d=0;d<a.axes.length;d++)c.Nk[d]=a.axes[d];if(d=a.pose){var e=b(20).rC;d.position&&U.transform_vec3(d.position,
e,c.position);d.orientation&&U.AJ(d.orientation,e,c.orientation)}}}function q(a){for(var b=0;b<a.Dm;b++)a.Dm[b]=0;for(b=0;b<a.Nk.length;b++)a.UF[b]=a.Nk[b],a.Nk[b]=0;a.position.set(fa.Wy);a.orientation.set(fa.xt)}function G(a,b){var c=a.indexOf(b);0<=c&&(a[c]=null)}function H(a){return null===a}function z(a,b,c,d){switch(b){case 130:c&&G(a.fh,c);if(d||a.Mh.every(H)&&a.fh.every(H))a.fh.length=0,a.Mh.length=0,b=a.jc.indexOf(141),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("deviceorientation",
F,!1));break;case 140:c&&G(a.Mh,c);if(d||a.Mh.every(H)&&a.fh.every(H))a.fh.length=0,a.Mh.length=0,b=a.jc.indexOf(141),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("deviceorientation",F,!1));break;case 50:c&&G(a.Mj,c);if(d||a.Mj.every(H))a.Mj.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("mousedown",f,!1));break;case 40:c&&G(a.ge,c);if(d||a.ge.every(H))a.ge.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("mousemove",E,!1));
break;case 41:c&&G(a.ge,c);if(d||a.ge.every(H))a.ge.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("mousemove",w,!1));break;case 60:c&&G(a.Nj,c);if(d||a.Nj.every(H))a.Nj.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("mouseout",y,!1),a.element.removeEventListener("mouseup",D,!1));break;case 70:c&&G(a.Oj,c);if(d||a.Oj.every(H))a.Oj.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("wheel",N,!1));break;
case 90:c&&G(a.Pr,c);if(d||a.Pr.every(H))a.Pr.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("keydown",M,!1));break;case 80:c&&G(a.Gj,c);if(d||a.Gj.every(H))a.Gj.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("keyup",B,!1));break;case 100:c&&G(a.ik,c);if(d||a.ik.every(H))a.ik.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("touchstart",J,!1));break;case 110:c&&G(a.gk,c);if(d||a.gk.every(H))a.gk.length=
0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("touchmove",C,!1));break;case 120:if(c&&G(a.fk,c),d||a.fk.every(H))a.fk.length=0,b=a.jc.indexOf(b),0<=b&&(a.jc.splice(b,1),a.element.removeEventListener("touchend",A,!1))}}function l(a,b){fa.ordered_angles_to_quat(a,fa.ZXY,b);if("orientation"in window)var c=fa.deg_to_rad(window.orientation);else"orientation"in window.screen?c=fa.deg_to_rad(window.screen.orientation.angle):c=0;c=ia.setAxisAngle(fa.AXIS_MZ,c,Ga);ia.multiply(b,
c,b);return b}function F(a){var c=P;null===a.alpha||null===a.beta||null===a.gamma?c[0]=c[1]=c[2]=0:(c[0]=fa.deg_to_rad(a.alpha),c[1]=fa.deg_to_rad(a.beta),c[2]=fa.deg_to_rad(a.gamma));a=b(10,a.currentTarget);for(var d=0;d<a.Mh.length;d++){var e=a.Mh[d];e&&(pa.copy(c,ba),e(ba))}if(a.fh.length)for(c=l(c,W),d=0;d<a.fh.length;d++)if(e=a.fh[d])ia.copy(c,ja),e(ja);for(d=0;d<a.fh.length;d++)a.fh[d]||a.fh.splice(d,1);for(d=0;d<a.Mh.length;d++)a.Mh[d]||a.Mh.splice(d,1)}function r(a,b){switch(a.type){case 30:a.Cw[0]=
b.clientX,a.Cw[1]=b.clientY,a.vT=b.which}}function E(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);r(c,a);for(var d=0;d<c.ge.length;d++){var e=c.ge[d];e&&(ua[0]=a.clientX,ua[1]=a.clientY,e(ua))}c.Ni&&a.preventDefault();for(d=0;d<c.ge.length;d++)c.ge[d]||c.ge.splice(d,1)}}function w(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);r(c,a);for(var d=
0;d<c.ge.length;d++){var e=c.ge[d];if(e){if("number"==typeof a.movementX)var f=a.movementX,g=a.movementY;else"number"==typeof a.webkitMovementX?(f=a.webkitMovementX,g=a.webkitMovementY):"number"==typeof a.mozMovementX?(f=a.mozMovementX,g=a.mozMovementY):g=f=0;ua[0]=f;ua[1]=g;e(ua)}}c.Ni&&a.preventDefault();for(d=0;d<c.ge.length;d++)c.ge[d]||c.ge.splice(d,1)}}function f(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);r(c,a);
for(var d=0;d<c.Mj.length;d++){var e=c.Mj[d];e&&e(a.which)}c.Ni&&(window.frameElement&&window.frameElement.focus(),a.preventDefault());for(d=0;d<c.Mj.length;d++)c.Mj[d]||c.Mj.splice(d,1)}}function y(a){!O.PG(a.relatedTarget)&&a.which&&D(a)}function D(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);r(c,a);for(var d=0;d<c.Nj.length;d++){var e=c.Nj[d];e&&e(a.which)}c.Ni&&a.preventDefault();for(d=0;d<c.Nj.length;d++)c.Nj[d]||
c.Nj.splice(d,1)}}function N(a){for(var c=b(30,a.currentTarget),d=0;d<c.Oj.length;d++){var e=c.Oj[d];if(e){var f;f=a;var g=0;f.wheelDelta?f.wheelDelta%120?g=fa.sign(f.wheelDelta):g=f.wheelDelta/120:f.deltaY&&(g=f.deltaY%3?-fa.sign(f.deltaY):-f.deltaY/3);f=fa.clamp(100*g,-2E3,2E3);e(f)}}c.Ni&&a.preventDefault();for(d=0;d<c.Oj.length;d++)c.Oj[d]||c.Oj.splice(d,1)}function M(a){for(var c=b(40,a.currentTarget),d=a.ctrlKey||a.altKey||a.metaKey?c.aH:c.Pr,e=0;e<d.length;e++){var f=d[e];f?f(a.keyCode):d.splice(e--,
1)}c.Ni&&a.preventDefault()}function B(a){for(var c=b(40,a.currentTarget),d=0;d<c.Gj.length;d++){var e=c.Gj[d];e&&e(a.keyCode)}c.Ni&&a.preventDefault();for(d=0;d<c.Gj.length;d++)c.Gj[d]||c.Gj.splice(d,1)}function J(a){for(var c=b(50,a.currentTarget),d=0;d<c.ik.length;d++){var e=c.ik[d];e&&e(a.targetTouches)}for(d=0;d<c.ik.length;d++)c.ik[d]||c.ik.splice(d,1)}function C(a){for(var c=b(50,a.currentTarget),d=0;d<c.gk.length;d++){var e=c.gk[d];e&&e(a.targetTouches)}c.Ni&&a.preventDefault();for(d=0;d<
c.gk.length;d++)c.gk[d]||c.gk.splice(d,1)}function A(a){for(var c=b(50,a.currentTarget),d=0;d<c.fk.length;d++){var e=c.fk[d];e&&e(a.targetTouches)}for(d=0;d<c.fk.length;d++)c.fk[d]||c.fk.splice(d,1)}function X(a){switch(a){case 0:a=60;break;case 1:a=70;break;case 2:a=80;break;case 3:a=90;break;default:a=60}return a}function m(a){function b(){document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c?a.value=1:(a.value=0,document.removeEventListener("pointerlockchange",
b,!1),document.removeEventListener("webkitpointerlockchange",b,!1),document.removeEventListener("mozpointerlockchange",b,!1))}var c=a.element;document.addEventListener("pointerlockchange",b,!1);document.addEventListener("webkitpointerlockchange",b,!1);document.addEventListener("mozpointerlockchange",b,!1);var d=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof d&&d.apply(c)}function K(){return window.document.fullscreenEnabled||window.document.mozFullScreenEnabled||
window.document.msFullscreenEnabled||window.document.webkitFullscreenEnabled?!0:!1}var R=u("__compat"),O=u("__container"),S=u("__config"),ga=u("__mat4"),sa=u("__print"),U=u("__tsr"),ia=u("__quat"),fa=u("__util"),pa=u("__vec3"),Z=u("__vec4"),ma=S.L,aa=S.CG,ea=U.create(),wa=U.create(),da=ga.create();a.DEVICE_GYRO=10;a.DEVICE_HMD=20;a.DEVICE_MOUSE=30;a.DEVICE_KEYBOARD=40;a.DEVICE_TOUCH=50;a.tt=60;a.Ky=70;a.Ly=80;a.My=90;a.HMD_WEBVR_DESKTOP=2;a.HMD_WEBVR_MOBILE=4;a.HMD_NON_WEBVR=1;a.HMD_WEBVR1=8;a.HMD_WEBVR1_1=
16;a.HMD_WEBVR_TYPE=0;a.HMD_ORIENTATION_QUAT=10;a.HMD_POSITION=20;a.kD=21;a.lD=22;a.HMD_EYE_DISTANCE=23;a.HMD_DISTORTION=24;a.HMD_BASELINE_DIST=25;a.HMD_SCREEN_LENS_DIST=26;a.HMD_SCREEN_WIDTH=27;a.HMD_SCREEN_HEIGHT=28;a.HMD_BEVEL_SIZE=29;a.RX=30;a.SX=31;a.MOUSE_LOCATION=40;a.tD=41;a.MOUSE_DOWN_WHICH=50;a.MOUSE_UP_WHICH=60;a.MOUSE_WHEEL=70;a.KEYBOARD_UP=80;a.KEYBOARD_DOWN=90;a.sD=91;a.TOUCH_START=100;a.TOUCH_MOVE=110;a.TOUCH_END=120;a.GYRO_ORIENTATION_QUAT=130;a.GYRO_ORIENTATION_ANGLES=140;a.GMPD_BUTTON_0=
300;a.GMPD_BUTTON_1=301;a.GMPD_BUTTON_2=302;a.GMPD_BUTTON_3=303;a.GMPD_BUTTON_4=304;a.GMPD_BUTTON_5=305;a.GMPD_BUTTON_6=306;a.GMPD_BUTTON_7=307;a.GMPD_BUTTON_8=308;a.GMPD_BUTTON_9=309;a.GMPD_BUTTON_10=310;a.GMPD_BUTTON_11=311;a.GMPD_BUTTON_12=312;a.GMPD_BUTTON_13=313;a.GMPD_BUTTON_14=314;a.GMPD_BUTTON_15=315;a.GMPD_BUTTON_16=316;a.GMPD_BUTTON_17=317;a.GMPD_BUTTON_18=318;a.GMPD_BUTTON_19=319;a.GMPD_BUTTON_20=320;a.GMPD_BUTTON_21=321;a.GMPD_BUTTON_22=322;a.GMPD_BUTTON_23=323;a.GMPD_BUTTON_24=324;a.GMPD_BUTTON_25=
325;a.GMPD_TRACKPAD_BUTTON=300;a.GMPD_TRIGGER_BUTTON=301;a.GMPD_GRIPS_BUTTON=302;a.GMPD_MENU_BUTTON=303;a.GMPD_AXIS_0=326;a.GMPD_AXIS_1=327;a.GMPD_AXIS_2=328;a.GMPD_AXIS_3=329;a.GMPD_AXIS_4=330;a.GMPD_AXIS_5=331;a.GMPD_AXIS_6=332;a.GMPD_AXIS_7=333;a.GMPD_AXIS_8=334;a.GMPD_AXIS_9=335;a.GMPD_AXIS_10=336;a.GMPD_AXIS_11=337;var W=ia.create(),Ga=ia.create(),P=pa.create(),ua=new Float32Array(2),ba=pa.create(),ja=ia.create(),ca="ontouchstart"in document.documentElement,Ca=[];a.can_use_device=e;a.init=function(){if("HMD"==
ma.stereo||"NONE"==ma.stereo&&ma.is_mobile_device){var a=b(20);a&&document.addEventListener("onvrdisplayconnect",function(b){a.ud=b.display;a.xg=!0;a.ud.getFrameData(a.Eh)})}};a.get_device_by_type_element=b;a.zU=n;a.switch_prevent_default=function(a,b){a.Ni=b};a.reset_device=function(a){switch(a.type){case 20:if(a.xg)if(a.ud)a.ud.resetPose();else if(a.Xi)for(var b=0;b<a.Xi.length;b++)a.Xi[b].resetSensor();break;default:sa.error("reset_device() is undefined for device: ",a.type)}};a.get_vector_param=
function(a,b,c){switch(b){case 10:a:switch(a.type){case 20:pa.copy(fa.xt,c);if(a.ud)c[0]=a.orientation[0],c[1]=a.orientation[1],c[2]=a.orientation[2],c[3]=a.orientation[3];else if(a.Xi)for(b=0;b<a.Xi.length;b++){var d=a.Xi[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState();d.orientation&&(c[0]=d.orientation.x,c[1]=d.orientation.y,c[2]=d.orientation.z,c[3]=d.orientation.w)}a=c;break a;default:sa.error("orientation_quat is undefined for device: ",a.type),a=c}return a;case 20:a:switch(a.type){case 20:pa.copy(fa.oq,
c);if(a.ud)c[0]=a.position[0],c[1]=a.position[1],c[2]=a.position[2];else if(a.Xi)for(b=0;b<a.Xi.length;b++)d=a.Xi[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState(),d.position&&(c[0]=d.position.x,c[1]=-d.position.z,c[2]=d.position.y);a=c;break a;default:sa.error("position is undefined for device: ",a.type),a=c}return a;case 21:return v(a,"left",c);case 22:return v(a,"right",c);case 30:return h(a,"left",c);case 31:return h(a,"right",c);case 40:case 41:return c[0]=a.Cw[0],c[1]=
a.Cw[1],c}};a.get_value_param=d;a.set_config=function(a,b,c){switch(a.type){case 20:if(d(a,0)&8)break;switch(b){case 24:a.distortion_coefs[0]=c[0];a.distortion_coefs[1]=c[1];break;case 23:a.Hh=c;k(a);break;case 25:a.ci=c;k(a);break;case 26:a.Bs=c;k(a);break;case 27:a.Pl=c;k(a);break;case 28:a.yi=c;k(a);break;case 29:a.di=c,k(a)}break;case 60:case 70:case 80:case 90:a.mv[b]=c}};a.AR=function(a,b){var c=b-300;return c<a.Dm.length?a.Dm[a.mv[c]-300]:!1};a.zR=function(a,b){return b-326<a.Nk.length?a.Nk[a.mv[b-
300]-326]:0};a.get_gamepad_position=function(a,b){b.set(a.position);return b};a.get_gamepad_orientation=function(a,b){b.set(a.orientation);return b};a.update=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<Ca.length;b++){var c=Ca[b];switch(c.type){case 60:q(c);t(a[0],c);break;case 70:q(c);t(a[1],c);break;case 80:q(c);t(a[2],c);break;case 90:q(c);t(a[3],c);break;case 20:if(c.ud){var d=c.ud;if(c.Eh&&d.getFrameData(c.Eh)){var e=
c.Eh.pose,f=fa.$A(c.Eh.leftViewMatrix,P);c.Hh=2*pa.length(f)}else e=d.getPose();e&&(f=ia.setAxisAngle(fa.AXIS_X,Math.PI/2,W),d.stageParameters&&d.stageParameters.sittingToStandingTransform?(d=U.from_mat4(d.stageParameters.sittingToStandingTransform,ea),U.identity(wa),f=U.set_quat(f,wa),d=U.multiply(f,d,c.rC)):(U.identity(ea),d=U.set_quat(f,c.rC)),e.orientation&&U.AJ(e.orientation,d,c.orientation),e.position&&U.transform_vec3(e.position,d,c.position))}}}};a.attach_param_cb=function(a,b,c){switch(b){case 130:a.fh.push(c);
b=141;break;case 140:a.Mh.push(c);b=141;break;case 50:a.Mj.push(c);break;case 40:case 41:a.ge.push(c);break;case 60:a.Nj.push(c);break;case 70:a.Oj.push(c);break;case 90:a.Pr.push(c);break;case 91:a.aH.push(c);b=90;break;case 80:a.Gj.push(c);break;case 100:a.ik.push(c);break;case 110:a.gk.push(c);break;case 120:a.fk.push(c)}if(-1==a.jc.indexOf(b)&&(a.jc.push(b),a.xg))switch(b){case 50:/iPad|iPhone|iPod/.test(navigator.platform)||a.element.addEventListener("mousedown",f,!1);break;case 40:a.element.addEventListener("mousemove",
E,!1);break;case 41:a.element.addEventListener("mousemove",w,!1);break;case 60:/iPad|iPhone|iPod/.test(navigator.platform)||(a.element!=window&&a.element.addEventListener("mouseout",y,!1),a.element.addEventListener("mouseup",D,!1));break;case 70:a.element.addEventListener("wheel",N,!1);break;case 90:a.element.addEventListener("keydown",M,!1);break;case 80:a.element.addEventListener("keyup",B,!1);break;case 100:a.element.addEventListener("touchstart",J,!1);break;case 110:a.element.addEventListener("touchmove",
C,!1);break;case 120:a.element.addEventListener("touchend",A,!1);break;case 141:a.element.addEventListener("deviceorientation",F,!1)}};a.detach_param_cb=function(a,b,c){z(a,b,c,!1)};a.XR=l;a.cleanup=function(){for(var a=0;a<Ca.length;a++)for(var b=Ca[a],c=0;c<b.jc.length;c++)z(b,b.jc[c],null,!0);Ca.length=0};a.get_pressed_gmpd_btn=function(a){a=b(X(a));for(var c=0;c<a.Dm.length;c++)if(a.Dm[c])return c+300;return-1};a.get_moved_gmpd_axis=function(a){a=b(X(a));for(var c=0;c<a.Nk.length;c++)if(a.UF[c]-
a.Nk[c])return c+326;return-1};a.sv=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)if(a[b])return b;return 0};a.UR=function(){var a=b(20);return a&&a.ud};a.GM=function(a){a.element.addEventListener("mousedown",function(){a.value||m(a)},!1)};a.add_click_listener=function(a,b){ma.is_mobile_device?a.addEventListener("touchend",b):a.addEventListener("mouseup",b)};a.remove_click_listener=function(a,b){ma.is_mobile_device?
a.removeEventListener("touchend",b):a.removeEventListener("mouseup",b)};a.check_fullscreen=K};b4w.module.__tbn=function(a,u){function e(a,b,c){a=x(a,b||0,c);t.normalize(a,c);return c}function c(a,b,c){c=c||0;var d=x(a,c,f),e=t.length(d),g=z.sign(d[3])*z.sign(b[3])||1;t.scale(b,g*e,d);3.1E-5>Math.abs(d[3])&&(d[3]=0<d[3]?3.1E-5:-3.1E-5);v(a,d,c);return a}function b(a,b){return z.sign(a[4*(b||0)+3])}function n(a,b,c){c=c||0;var d=x(a,c,f);0>z.sign(d[3])*b&&t.scale(d,-1,d);v(a,d,c)}function g(a,b,c){c=c||0;var d=x(a,c,f);t.normalize(d,d);t.scale(d,b,d);3.1E-5>Math.abs(d[3])&&(d[3]=0<d[3]?d[3]+
3.1E-5:d[3]-3.1E-5);v(a,d,c)}function p(a,b){var c=x(a,b||0,f);return t.length(c)}function k(a){a=0!==a?a||1:0;for(var b=new Float32Array(4*a),c=0;c<a;c++)b[4*c+3]=.5;return b}function x(a,b,c){c[0]=a[4*b];c[1]=a[4*b+1];c[2]=a[4*b+2];c[3]=a[4*b+3];return c}function v(a,b,c){a[4*c]=b[0];a[4*c+1]=b[1];a[4*c+2]=b[2];a[4*c+3]=b[3];return a}function h(a){return a.length/4}function d(a,d,f){for(var k=h(a),l=0;l<k;l++){var q=b(a,l),r=p(a,l),w=e(a,l,F),w=t.multiply(d,w,F);c(f,w,l);g(f,r,l);n(f,q,l)}}a.ID=
4;var t=u("__quat"),q=u("__tsr"),G=u("__vec3"),H=u("__vec4"),z=u("__util"),l=t.create(),F=t.create(),r=G.create(),E=G.create(),w=G.create(),f=H.create(),y=H.create();a.Bm=function(a,b,d){var e=!(!b||!b.length),f=a.length/3;d=d||k(f);for(var h=0;h<f;++h){var q=r;q[0]=a[3*h];q[1]=a[3*h+1];q[2]=a[3*h+2];G.normalize(q,q);if(e){var p=y;p[0]=b[4*h];p[1]=b[4*h+1];p[2]=b[4*h+2];p[3]=b[4*h+3];G.normalize(p,p);var m=G.cross(p,q,E);G.normalize(m,m);var v=t.rotationTo(z.AXIS_Z,m,l),x=G.transformQuat(z.AXIS_Y,
v,w),x=t.rotationTo(x,q,F),v=t.multiply(x,v,l);t.normalize(v,v);x=.5;m=G.cross(q,m,w);if(3.1E-5<Math.abs(m[0]-p[0])||3.1E-5<Math.abs(m[1]-p[1])||3.1E-5<Math.abs(m[2]-p[2]))x=Math.acos(G.dot(q,p))/Math.PI;c(d,v,h);n(d,z.sign(p[3]),h);g(d,x,h)}else v=t.rotationTo(z.AXIS_Y,q,l),c(d,v,h)}return d};a.copy=function(a,b,c,d){if(0!==c){b=4*b||0;c=c||a.length;for(var e=0,f=0;e<4*c;e+=4,f+=4)d[f]=a[b+e],d[f+1]=a[b+e+1],d[f+2]=a[b+e+2],d[f+3]=a[b+e+3]}};a.vb=e;a.set_quat=c;a.IR=function(a,b,c){a=e(a,b,l);return G.transformQuat(z.AXIS_Y,
a,c)};a.create=k;a.identity=function(a){for(var b=0;b<a.length;b+=4)a[b]=0,a[b+1]=0,a[b+2]=0,a[b+3]=.5;return a};a.Fm=x;a.Pi=v;a.wv=h;a.oB=d;a.CH=function(a,b,c){b=q.vb(b,l);d(a,b,c)};a.slerp=function(a,d,f,h){var k=b(d,0),q=e(a,0,l),r=e(d,0,F);a=p(a);d=p(d);q=t.slerp(q,r,f,F);t.normalize(q,q);c(h,q,0);g(h,f*(a-d)+d);n(h,k,0);return h};a.Ew=function(a,d,f){var h=b(d,0),k=e(a,0,l),q=e(d,0,F);a=p(a,0);d=p(d,0);k=t.multiply(k,q,l);c(f,k,0);g(f,a+d-.5);n(f,h,0);return f};a.xT=function(a,d,f){var h=b(d,
0),k=e(a,0,l),q=e(d,0,F);a=p(a);d=p(d);q=t.invert(q,F);k=t.multiply(k,q,l);c(f,k,0);g(f,a-d+.5);n(f,h,0)}};b4w.module.__vec3=function(a){var u="undefined"!==typeof Float32Array?Float32Array:Array,e=Math.random;a.create=function(){var a=new u(3);a[0]=0;a[1]=0;a[2]=0;return a};a.clone=function(a){var b=new u(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.fromValues=function(a,b,e){var c=new u(3);c[0]=a;c[1]=b;c[2]=e;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.set=function(a,b,e,g){g[0]=a;g[1]=b;g[2]=e;return g};a.add=function(a,b,e){e[0]=a[0]+b[0];e[1]=a[1]+b[1];e[2]=a[2]+b[2];
return e};a.subtract=function(a,b,e){e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];return e};a.sub=a.subtract;a.multiply=function(a,b,e){e[0]=a[0]*b[0];e[1]=a[1]*b[1];e[2]=a[2]*b[2];return e};a.mul=a.multiply;a.divide=function(a,b,e){e[0]=a[0]/b[0];e[1]=a[1]/b[1];e[2]=a[2]/b[2];return e};a.div=a.divide;a.min=function(a,b,e){e[0]=Math.min(a[0],b[0]);e[1]=Math.min(a[1],b[1]);e[2]=Math.min(a[2],b[2]);return e};a.max=function(a,b,e){e[0]=Math.max(a[0],b[0]);e[1]=Math.max(a[1],b[1]);e[2]=Math.max(a[2],
b[2]);return e};a.scale=function(a,b,e){e[0]=a[0]*b;e[1]=a[1]*b;e[2]=a[2]*b;return e};a.scaleAndAdd=function(a,b,e,g){g[0]=a[0]+b[0]*e;g[1]=a[1]+b[1]*e;g[2]=a[2]+b[2]*e;return g};a.distance=function(a,b){var c=b[0]-a[0],e=b[1]-a[1],p=b[2]-a[2];return Math.sqrt(c*c+e*e+p*p)};a.dist=a.distance;a.squaredDistance=function(a,b){var c=b[0]-a[0],e=b[1]-a[1],p=b[2]-a[2];return c*c+e*e+p*p};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};a.len=a.length;
a.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};a.normalize=function(a,b){var c=a[0],e=a[1],p=a[2],c=c*c+e*e+p*p;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};a.cross=function(a,b,e){var c=a[0],n=a[1];a=a[2];var k=b[0],x=b[1];b=b[2];
e[0]=n*b-a*x;e[1]=a*k-c*b;e[2]=c*x-n*k;return e};a.lerp=function(a,b,e,g){var c=a[0],k=a[1];a=a[2];g[0]=c+e*(b[0]-c);g[1]=k+e*(b[1]-k);g[2]=a+e*(b[2]-a);return g};a.LZ=function(a,b,e,g,p,k){var c=p*p,n=c*(2*p-3)+1,h=c*(p-2)+p,d=c*(p-1);p=c*(3-2*p);k[0]=a[0]*n+b[0]*h+e[0]*d+g[0]*p;k[1]=a[1]*n+b[1]*h+e[1]*d+g[1]*p;k[2]=a[2]*n+b[2]*h+e[2]*d+g[2]*p;return k};a.pE=function(a,b,e,g,p,k){var c=1-p,n=c*c,h=p*p,d=n*c,n=3*p*n,c=3*h*c;p=h*p;k[0]=a[0]*d+b[0]*n+e[0]*c+g[0]*p;k[1]=a[1]*d+b[1]*n+e[1]*c+g[1]*p;k[2]=
a[2]*d+b[2]*n+e[2]*c+g[2]*p;return k};a.random=function(a,b){a=a||1;var c=2*e()*Math.PI,g=2*e()-1,p=Math.sqrt(1-g*g)*a;b[0]=Math.cos(c)*p;b[1]=Math.sin(c)*p;b[2]=g*a;return b};a.transformMat4=function(a,b,e){var c=a[0],n=a[1];a=a[2];var k=b[3]*c+b[7]*n+b[11]*a+b[15],k=k||1;e[0]=(b[0]*c+b[4]*n+b[8]*a+b[12])/k;e[1]=(b[1]*c+b[5]*n+b[9]*a+b[13])/k;e[2]=(b[2]*c+b[6]*n+b[10]*a+b[14])/k;return e};a.transformMat3=function(a,b,e){var c=a[0],n=a[1];a=a[2];e[0]=c*b[0]+n*b[3]+a*b[6];e[1]=c*b[1]+n*b[4]+a*b[7];
e[2]=c*b[2]+n*b[5]+a*b[8];return e};a.transformQuat=function(a,b,e){var c=a[0],n=a[1],k=a[2];a=b[0];var x=b[1],v=b[2];b=b[3];var h=b*c+x*k-v*n,d=b*n+v*c-a*k,t=b*k+a*n-x*c,c=-a*c-x*n-v*k;e[0]=h*b+c*-a+d*-v-t*-x;e[1]=d*b+c*-x+t*-a-h*-v;e[2]=t*b+c*-v+h*-x-d*-a;return e};a.rotateX=function(a,b,e,g){var c=[],k=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];k[0]=c[0];k[1]=c[1]*Math.cos(e)-c[2]*Math.sin(e);k[2]=c[1]*Math.sin(e)+c[2]*Math.cos(e);g[0]=k[0]+b[0];g[1]=k[1]+b[1];g[2]=k[2]+b[2];return g};a.rotateY=
function(a,b,e,g){var c=[],k=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];k[0]=c[2]*Math.sin(e)+c[0]*Math.cos(e);k[1]=c[1];k[2]=c[2]*Math.cos(e)-c[0]*Math.sin(e);g[0]=k[0]+b[0];g[1]=k[1]+b[1];g[2]=k[2]+b[2];return g};a.rotateZ=function(a,b,e,g){var c=[],k=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];k[0]=c[0]*Math.cos(e)-c[1]*Math.sin(e);k[1]=c[0]*Math.sin(e)+c[1]*Math.cos(e);k[2]=c[2];g[0]=k[0]+b[0];g[1]=k[1]+b[1];g[2]=k[2]+b[2];return g};a.forEach=function(){var c=a.create();return function(a,
e,g,p,k,x){var b;e||(e=3);g||(g=0);for(p?b=Math.min(p*e+g,a.length):b=a.length;g<b;g+=e)c[0]=a[g],c[1]=a[g+1],c[2]=a[g+2],k(c,x,c),a[g]=c[0],a[g+1]=c[1],a[g+2]=c[2];return a}}();a.angle=function(c,b){var e=a.fromValues(c[0],c[1],c[2]),g=a.fromValues(b[0],b[1],b[2]);a.normalize(e,e);a.normalize(g,g);e=a.dot(e,g);return 1<e?0:Math.acos(e)};a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}};b4w.module.vec3=b4w.module.__vec3;
b4w.module.__vec4=function(a){var u="undefined"!==typeof Float32Array?Float32Array:Array,e=Math.random;a.create=function(){var a=new u(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a};a.clone=function(a){var b=new u(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.fromValues=function(a,b,e,g){var c=new u(4);c[0]=a;c[1]=b;c[2]=e;c[3]=g;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.set=function(a,b,e,g,p){p[0]=a;p[1]=b;p[2]=e;p[3]=g;return p};a.add=function(a,b,e){e[0]=
a[0]+b[0];e[1]=a[1]+b[1];e[2]=a[2]+b[2];e[3]=a[3]+b[3];return e};a.subtract=function(a,b,e){e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];e[3]=a[3]-b[3];return e};a.sub=a.subtract;a.multiply=function(a,b,e){e[0]=a[0]*b[0];e[1]=a[1]*b[1];e[2]=a[2]*b[2];e[3]=a[3]*b[3];return e};a.mul=a.multiply;a.divide=function(a,b,e){e[0]=a[0]/b[0];e[1]=a[1]/b[1];e[2]=a[2]/b[2];e[3]=a[3]/b[3];return e};a.div=a.divide;a.min=function(a,b,e){e[0]=Math.min(a[0],b[0]);e[1]=Math.min(a[1],b[1]);e[2]=Math.min(a[2],b[2]);e[3]=
Math.min(a[3],b[3]);return e};a.max=function(a,b,e){e[0]=Math.max(a[0],b[0]);e[1]=Math.max(a[1],b[1]);e[2]=Math.max(a[2],b[2]);e[3]=Math.max(a[3],b[3]);return e};a.scale=function(a,b,e){e[0]=a[0]*b;e[1]=a[1]*b;e[2]=a[2]*b;e[3]=a[3]*b;return e};a.scaleAndAdd=function(a,b,e,g){g[0]=a[0]+b[0]*e;g[1]=a[1]+b[1]*e;g[2]=a[2]+b[2]*e;g[3]=a[3]+b[3]*e;return g};a.distance=function(a,b){var c=b[0]-a[0],e=b[1]-a[1],p=b[2]-a[2],k=b[3]-a[3];return Math.sqrt(c*c+e*e+p*p+k*k)};a.dist=a.distance;a.squaredDistance=
function(a,b){var c=b[0]-a[0],e=b[1]-a[1],p=b[2]-a[2],k=b[3]-a[3];return c*c+e*e+p*p+k*k};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+c*c+e*e+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return b*b+c*c+e*e+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};a.normalize=
function(a,b){var c=a[0],e=a[1],p=a[2],k=a[3],x=c*c+e*e+p*p+k*k;0<x&&(x=1/Math.sqrt(x),b[0]=c*x,b[1]=e*x,b[2]=p*x,b[3]=k*x);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};a.lerp=function(a,b,e,g){var c=a[0],k=a[1],n=a[2];a=a[3];g[0]=c+e*(b[0]-c);g[1]=k+e*(b[1]-k);g[2]=n+e*(b[2]-n);g[3]=a+e*(b[3]-a);return g};a.random=function(c,b){c=c||1;b[0]=e();b[1]=e();b[2]=e();b[3]=e();a.normalize(b,b);a.scale(b,c,b);return b};a.transformMat4=function(a,b,e){var c=a[0],n=a[1],k=
a[2];a=a[3];e[0]=b[0]*c+b[4]*n+b[8]*k+b[12]*a;e[1]=b[1]*c+b[5]*n+b[9]*k+b[13]*a;e[2]=b[2]*c+b[6]*n+b[10]*k+b[14]*a;e[3]=b[3]*c+b[7]*n+b[11]*k+b[15]*a;return e};a.transformQuat=function(a,b,e){var c=a[0],n=a[1],k=a[2],x=b[0],v=b[1],h=b[2];b=b[3];var d=b*c+v*k-h*n,t=b*n+h*c-x*k,q=b*k+x*n-v*c,c=-x*c-v*n-h*k;e[0]=d*b+c*-x+t*-h-q*-v;e[1]=t*b+c*-v+q*-x-d*-h;e[2]=q*b+c*-h+d*-v-t*-x;e[3]=a[3];return e};a.forEach=function(){var c=a.create();return function(a,e,g,p,k,x){var b;e||(e=4);g||(g=0);for(p?b=Math.min(p*
e+g,a.length):b=a.length;g<b;g+=e)c[0]=a[g],c[1]=a[g+1],c[2]=a[g+2],c[3]=a[g+3],k(c,x,c),a[g]=c[0],a[g+1]=c[1],a[g+2]=c[2],a[g+3]=c[3];return a}}();a.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.vec4=b4w.module.__vec4;
b4w.module.__quat=function(a,u){var e=u("__vec3"),c=u("__vec4"),b=u("__mat3"),n="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new n(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.rotationTo=function(){var b=e.create(),c=e.fromValues(1,0,0),k=e.fromValues(0,1,0);return function(g,n,h){var d=e.dot(g,n);if(-.9999999>d)return e.cross(c,g,b),1E-6>e.length(b)&&e.cross(k,g,b),e.normalize(b,b),a.setAxisAngle(b,Math.PI,h),h;if(.9999999<d)return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h;e.cross(g,
n,b);h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=1+d;return a.normalize(h,h)}}();a.setAxes=function(){var c=b.create();return function(b,e,g,n){c[0]=e[0];c[3]=e[1];c[6]=e[2];c[1]=g[0];c[4]=g[1];c[7]=g[2];c[2]=-b[0];c[5]=-b[1];c[8]=-b[2];return a.normalize(a.fromMat3(c,n),n)}}();a.clone=c.clone;a.fromValues=c.fromValues;a.copy=c.copy;a.set=c.set;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.setAxisAngle=function(a,b,c){b*=.5;var e=Math.sin(b);c[0]=e*a[0];c[1]=e*a[1];c[2]=e*a[2];c[3]=Math.cos(b);
return c};a.add=c.add;a.multiply=function(a,b,c){var e=a[0],g=a[1],h=a[2];a=a[3];var d=b[0],k=b[1],n=b[2];b=b[3];c[0]=e*b+a*d+g*n-h*k;c[1]=g*b+a*k+h*d-e*n;c[2]=h*b+a*n+e*k-g*d;c[3]=a*b-e*d-g*k-h*n;return c};a.mul=a.multiply;a.scale=c.scale;a.rotateX=function(a,b,c){b*=.5;var e=a[0],g=a[1],h=a[2];a=a[3];var d=Math.sin(b);b=Math.cos(b);c[0]=e*b+a*d;c[1]=g*b+h*d;c[2]=h*b-g*d;c[3]=a*b-e*d;return c};a.rotateY=function(a,b,c){b*=.5;var e=a[0],g=a[1],h=a[2];a=a[3];var d=Math.sin(b);b=Math.cos(b);c[0]=e*
b-h*d;c[1]=g*b+a*d;c[2]=h*b+e*d;c[3]=a*b-g*d;return c};a.rotateZ=function(a,b,c){b*=.5;var e=a[0],g=a[1],h=a[2];a=a[3];var d=Math.sin(b);b=Math.cos(b);c[0]=e*b+g*d;c[1]=g*b-e*d;c[2]=h*b+a*d;c[3]=a*b-h*d;return c};a.calculateW=function(a,b){var c=a[0],e=a[1],g=a[2];b[0]=c;b[1]=e;b[2]=g;b[3]=Math.sqrt(Math.abs(1-c*c-e*e-g*g));return b};a.dot=c.dot;a.lerp=c.lerp;a.slerp=function(a,b,c,e){var g=a[0],h=a[1],d=a[2];a=a[3];var k=b[0],n=b[1],p=b[2];b=b[3];var x,u,l;u=g*k+h*n+d*p+a*b;0>u&&(u=-u,k=-k,n=-n,
p=-p,b=-b);1E-6<1-u?(x=Math.acos(u),l=Math.sin(x),u=Math.sin((1-c)*x)/l,c=Math.sin(c*x)/l):u=1-c;e[0]=u*g+c*k;e[1]=u*h+c*n;e[2]=u*d+c*p;e[3]=u*a+c*b;return e};a.E_=function(){var b=a.create(),c=a.create();return function(e,g,n,h,d,p){a.slerp(e,h,d,b);a.slerp(g,n,d,c);a.slerp(b,c,2*d*(1-d),p);return p}}();a.invert=function(a,b){var c=a[0],e=a[1],g=a[2],h=a[3],d=c*c+e*e+g*g+h*h,d=d?1/d:0;b[0]=-c*d;b[1]=-e*d;b[2]=-g*d;b[3]=h*d;return b};a.conjugate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=
a[3];return b};a.length=c.length;a.len=a.length;a.squaredLength=c.squaredLength;a.sqrLen=a.squaredLength;a.normalize=c.normalize;a.fromMat3=function(a,b){var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{var e=0;a[4]>a[0]&&(e=1);a[8]>a[3*e+e]&&(e=2);var g=(e+1)%3,h=(e+2)%3,c=Math.sqrt(a[3*e+e]-a[3*g+g]-a[3*h+h]+1);b[e]=.5*c;c=.5/c;b[3]=(a[3*g+h]-a[3*h+g])*c;b[g]=(a[3*g+e]+a[3*e+g])*c;b[h]=(a[3*h+e]+a[3*e+h])*c}return b};a.str=
function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.quat=b4w.module.__quat;
b4w.module.__mat3=function(a){var u="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new u(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat4=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c};a.clone=function(a){var c=new u(9);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.copy=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=
a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],e=a[2],g=a[5];c[1]=a[3];c[2]=a[6];c[3]=b;c[5]=a[7];c[6]=e;c[7]=g}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c};a.invert=function(a,c){var b=a[0],e=a[1],g=a[2],p=a[3],k=a[4],x=a[5],v=a[6],h=a[7],d=a[8],t=d*k-x*h,q=-d*p+x*v,u=
h*p-k*v,H=b*t+e*q+g*u;if(!H)return null;H=1/H;c[0]=t*H;c[1]=(-d*e+g*h)*H;c[2]=(x*e-g*k)*H;c[3]=q*H;c[4]=(d*b-g*v)*H;c[5]=(-x*b+g*p)*H;c[6]=u*H;c[7]=(-h*b+e*v)*H;c[8]=(k*b-e*p)*H;return c};a.adjoint=function(a,c){var b=a[0],e=a[1],g=a[2],p=a[3],k=a[4],x=a[5],v=a[6],h=a[7],d=a[8];c[0]=k*d-x*h;c[1]=g*h-e*d;c[2]=e*x-g*k;c[3]=x*v-p*d;c[4]=b*d-g*v;c[5]=g*p-b*x;c[6]=p*h-k*v;c[7]=e*v-b*h;c[8]=b*k-e*p;return c};a.determinant=function(a){var c=a[3],b=a[4],e=a[5],g=a[6],p=a[7],k=a[8];return a[0]*(k*b-e*p)+a[1]*
(-k*c+e*g)+a[2]*(p*c-b*g)};a.multiply=function(a,c,b){var e=a[0],g=a[1],p=a[2],k=a[3],x=a[4],v=a[5],h=a[6],d=a[7];a=a[8];var t=c[0],q=c[1],u=c[2],H=c[3],z=c[4],l=c[5],F=c[6],r=c[7];c=c[8];b[0]=t*e+q*k+u*h;b[1]=t*g+q*x+u*d;b[2]=t*p+q*v+u*a;b[3]=H*e+z*k+l*h;b[4]=H*g+z*x+l*d;b[5]=H*p+z*v+l*a;b[6]=F*e+r*k+c*h;b[7]=F*g+r*x+c*d;b[8]=F*p+r*v+c*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var e=a[0],g=a[1],p=a[2],k=a[3],x=a[4],v=a[5],h=a[6],d=a[7];a=a[8];var t=c[0];c=c[1];b[0]=e;b[1]=g;b[2]=p;
b[3]=k;b[4]=x;b[5]=v;b[6]=t*e+c*k+h;b[7]=t*g+c*x+d;b[8]=t*p+c*v+a;return b};a.rotate=function(a,c,b){var e=a[0],g=a[1],p=a[2],k=a[3],x=a[4],v=a[5],h=a[6],d=a[7];a=a[8];var t=Math.sin(c);c=Math.cos(c);b[0]=c*e+t*k;b[1]=c*g+t*x;b[2]=c*p+t*v;b[3]=c*k-t*e;b[4]=c*x-t*g;b[5]=c*v-t*p;b[6]=h;b[7]=d;b[8]=a;return b};a.scale=function(a,c,b){var e=c[0];c=c[1];b[0]=e*a[0];b[1]=e*a[1];b[2]=e*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};a.NQ=function(a,c){c[0]=1;c[1]=0;c[2]=
0;c[3]=0;c[4]=1;c[5]=0;c[6]=a[0];c[7]=a[1];c[8]=1;return c};a.LQ=function(a,c){var b=Math.sin(a),e=Math.cos(a);c[0]=e;c[1]=b;c[2]=0;c[3]=-b;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.MQ=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=a[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.fromMat2d=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=0;c[3]=a[2];c[4]=a[3];c[5]=0;c[6]=a[4];c[7]=a[5];c[8]=1;return c};a.fromQuat=function(a,c){var b=a[0],e=a[1],g=a[2],p=a[3],k=b+b,x=e+e,v=g+g,b=b*k,h=e*k,e=e*x,d=g*k,t=
g*x,g=g*v,k=p*k,x=p*x,p=p*v;c[0]=1-e-g;c[3]=h-p;c[6]=d+x;c[1]=h+p;c[4]=1-b-g;c[7]=t-k;c[2]=d-x;c[5]=t+k;c[8]=1-b-e;return c};a.normalFromMat4=function(a,c){var b=a[0],e=a[1],g=a[2],p=a[3],k=a[4],x=a[5],v=a[6],h=a[7],d=a[8],t=a[9],q=a[10],u=a[11],H=a[12],z=a[13],l=a[14],F=a[15],r=b*x-e*k,E=b*v-g*k,w=b*h-p*k,f=e*v-g*x,y=e*h-p*x,D=g*h-p*v,N=d*z-t*H,M=d*l-q*H,d=d*F-u*H,B=t*l-q*z,t=t*F-u*z,q=q*F-u*l,u=r*q-E*t+w*B+f*d-y*M+D*N;if(!u)return null;u=1/u;c[0]=(x*q-v*t+h*B)*u;c[1]=(v*d-k*q-h*M)*u;c[2]=(k*t-x*
d+h*N)*u;c[3]=(g*t-e*q-p*B)*u;c[4]=(b*q-g*d+p*M)*u;c[5]=(e*d-b*t-p*N)*u;c[6]=(z*D-l*y+F*f)*u;c[7]=(l*w-H*D-F*E)*u;c[8]=(H*y-z*w+F*r)*u;return c};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.KQ=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))}};b4w.module.mat3=b4w.module.__mat3;
b4w.module.__mat4=function(a){var u="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new u(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.clone=function(a){var c=new u(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.copy=function(a,c){c[0]=a[0];
c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],e=a[2],g=a[3],p=a[6],k=a[7],x=a[11];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=b;c[6]=a[9];c[7]=a[13];c[8]=e;c[9]=p;c[11]=a[14];c[12]=g;c[13]=
k;c[14]=x}else c[0]=a[0],c[1]=a[4],c[2]=a[8],c[3]=a[12],c[4]=a[1],c[5]=a[5],c[6]=a[9],c[7]=a[13],c[8]=a[2],c[9]=a[6],c[10]=a[10],c[11]=a[14],c[12]=a[3],c[13]=a[7],c[14]=a[11],c[15]=a[15];return c};a.invert=function(a,c){var b=a[0],e=a[1],g=a[2],p=a[3],k=a[4],x=a[5],v=a[6],h=a[7],d=a[8],t=a[9],q=a[10],u=a[11],H=a[12],z=a[13],l=a[14],F=a[15],r=b*x-e*k,E=b*v-g*k,w=b*h-p*k,f=e*v-g*x,y=e*h-p*x,D=g*h-p*v,N=d*z-t*H,M=d*l-q*H,B=d*F-u*H,J=t*l-q*z,C=t*F-u*z,A=q*F-u*l,X=r*A-E*C+w*J+f*B-y*M+D*N;if(!X)return null;
X=1/X;c[0]=(x*A-v*C+h*J)*X;c[1]=(g*C-e*A-p*J)*X;c[2]=(z*D-l*y+F*f)*X;c[3]=(q*y-t*D-u*f)*X;c[4]=(v*B-k*A-h*M)*X;c[5]=(b*A-g*B+p*M)*X;c[6]=(l*w-H*D-F*E)*X;c[7]=(d*D-q*w+u*E)*X;c[8]=(k*C-x*B+h*N)*X;c[9]=(e*B-b*C-p*N)*X;c[10]=(H*y-z*w+F*r)*X;c[11]=(t*w-d*y-u*r)*X;c[12]=(x*M-k*J-v*N)*X;c[13]=(b*J-e*M+g*N)*X;c[14]=(z*E-H*f-l*r)*X;c[15]=(d*f-t*E+q*r)*X;return c};a.adjoint=function(a,c){var b=a[0],e=a[1],g=a[2],p=a[3],k=a[4],x=a[5],v=a[6],h=a[7],d=a[8],t=a[9],q=a[10],u=a[11],H=a[12],z=a[13],l=a[14],F=a[15];
c[0]=x*(q*F-u*l)-t*(v*F-h*l)+z*(v*u-h*q);c[1]=-(e*(q*F-u*l)-t*(g*F-p*l)+z*(g*u-p*q));c[2]=e*(v*F-h*l)-x*(g*F-p*l)+z*(g*h-p*v);c[3]=-(e*(v*u-h*q)-x*(g*u-p*q)+t*(g*h-p*v));c[4]=-(k*(q*F-u*l)-d*(v*F-h*l)+H*(v*u-h*q));c[5]=b*(q*F-u*l)-d*(g*F-p*l)+H*(g*u-p*q);c[6]=-(b*(v*F-h*l)-k*(g*F-p*l)+H*(g*h-p*v));c[7]=b*(v*u-h*q)-k*(g*u-p*q)+d*(g*h-p*v);c[8]=k*(t*F-u*z)-d*(x*F-h*z)+H*(x*u-h*t);c[9]=-(b*(t*F-u*z)-d*(e*F-p*z)+H*(e*u-p*t));c[10]=b*(x*F-h*z)-k*(e*F-p*z)+H*(e*h-p*x);c[11]=-(b*(x*u-h*t)-k*(e*u-p*t)+d*
(e*h-p*x));c[12]=-(k*(t*l-q*z)-d*(x*l-v*z)+H*(x*q-v*t));c[13]=b*(t*l-q*z)-d*(e*l-g*z)+H*(e*q-g*t);c[14]=-(b*(x*l-v*z)-k*(e*l-g*z)+H*(e*v-g*x));c[15]=b*(x*q-v*t)-k*(e*q-g*t)+d*(e*v-g*x);return c};a.determinant=function(a){var c=a[0],b=a[1],e=a[2],g=a[3],p=a[4],k=a[5],x=a[6],v=a[7],h=a[8],d=a[9],t=a[10],q=a[11],u=a[12],H=a[13],z=a[14];a=a[15];return(c*k-b*p)*(t*a-q*z)-(c*x-e*p)*(d*a-q*H)+(c*v-g*p)*(d*z-t*H)+(b*x-e*k)*(h*a-q*u)-(b*v-g*k)*(h*z-t*u)+(e*v-g*x)*(h*H-d*u)};a.multiply=function(a,c,b){var e=
a[0],g=a[1],p=a[2],k=a[3],x=a[4],v=a[5],h=a[6],d=a[7],t=a[8],q=a[9],u=a[10],H=a[11],z=a[12],l=a[13],F=a[14];a=a[15];var r=c[0],E=c[1],w=c[2],f=c[3];b[0]=r*e+E*x+w*t+f*z;b[1]=r*g+E*v+w*q+f*l;b[2]=r*p+E*h+w*u+f*F;b[3]=r*k+E*d+w*H+f*a;r=c[4];E=c[5];w=c[6];f=c[7];b[4]=r*e+E*x+w*t+f*z;b[5]=r*g+E*v+w*q+f*l;b[6]=r*p+E*h+w*u+f*F;b[7]=r*k+E*d+w*H+f*a;r=c[8];E=c[9];w=c[10];f=c[11];b[8]=r*e+E*x+w*t+f*z;b[9]=r*g+E*v+w*q+f*l;b[10]=r*p+E*h+w*u+f*F;b[11]=r*k+E*d+w*H+f*a;r=c[12];E=c[13];w=c[14];f=c[15];b[12]=r*e+
E*x+w*t+f*z;b[13]=r*g+E*v+w*q+f*l;b[14]=r*p+E*h+w*u+f*F;b[15]=r*k+E*d+w*H+f*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var e=c[0],g=c[1];c=c[2];var p,k,x,v,h,d,t,q,u,H,z,l;a===b?(b[12]=a[0]*e+a[4]*g+a[8]*c+a[12],b[13]=a[1]*e+a[5]*g+a[9]*c+a[13],b[14]=a[2]*e+a[6]*g+a[10]*c+a[14],b[15]=a[3]*e+a[7]*g+a[11]*c+a[15]):(p=a[0],k=a[1],x=a[2],v=a[3],h=a[4],d=a[5],t=a[6],q=a[7],u=a[8],H=a[9],z=a[10],l=a[11],b[0]=p,b[1]=k,b[2]=x,b[3]=v,b[4]=h,b[5]=d,b[6]=t,b[7]=q,b[8]=u,b[9]=H,b[10]=z,b[11]=l,
b[12]=p*e+h*g+u*c+a[12],b[13]=k*e+d*g+H*c+a[13],b[14]=x*e+t*g+z*c+a[14],b[15]=v*e+q*g+l*c+a[15]);return b};a.scale=function(a,c,b){var e=c[0],g=c[1];c=c[2];b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;b[3]=a[3]*e;b[4]=a[4]*g;b[5]=a[5]*g;b[6]=a[6]*g;b[7]=a[7]*g;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};a.rotate=function(a,c,b,n){var e=b[0],p=b[1];b=b[2];var k=Math.sqrt(e*e+p*p+b*b),x,v,h,d,t,q,u,H,z,l,F,r,E,w,f,y,D,N,M,B;if(1E-7>Math.abs(k))return null;
k=1/k;e*=k;p*=k;b*=k;x=Math.sin(c);v=Math.cos(c);h=1-v;c=a[0];k=a[1];d=a[2];t=a[3];q=a[4];u=a[5];H=a[6];z=a[7];l=a[8];F=a[9];r=a[10];E=a[11];w=e*e*h+v;f=p*e*h+b*x;y=b*e*h-p*x;D=e*p*h-b*x;N=p*p*h+v;M=b*p*h+e*x;B=e*b*h+p*x;e=p*b*h-e*x;p=b*b*h+v;n[0]=c*w+q*f+l*y;n[1]=k*w+u*f+F*y;n[2]=d*w+H*f+r*y;n[3]=t*w+z*f+E*y;n[4]=c*D+q*N+l*M;n[5]=k*D+u*N+F*M;n[6]=d*D+H*N+r*M;n[7]=t*D+z*N+E*M;n[8]=c*B+q*e+l*p;n[9]=k*B+u*e+F*p;n[10]=d*B+H*e+r*p;n[11]=t*B+z*e+E*p;a!==n&&(n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15]);
return n};a.rotateX=function(a,c,b){var e=Math.sin(c);c=Math.cos(c);var g=a[4],p=a[5],k=a[6],x=a[7],v=a[8],h=a[9],d=a[10],t=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=g*c+v*e;b[5]=p*c+h*e;b[6]=k*c+d*e;b[7]=x*c+t*e;b[8]=v*c-g*e;b[9]=h*c-p*e;b[10]=d*c-k*e;b[11]=t*c-x*e;return b};a.rotateY=function(a,c,b){var e=Math.sin(c);c=Math.cos(c);var g=a[0],p=a[1],k=a[2],x=a[3],v=a[8],h=a[9],d=a[10],t=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],
b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=g*c-v*e;b[1]=p*c-h*e;b[2]=k*c-d*e;b[3]=x*c-t*e;b[8]=g*e+v*c;b[9]=p*e+h*c;b[10]=k*e+d*c;b[11]=x*e+t*c;return b};a.rotateZ=function(a,c,b){var e=Math.sin(c);c=Math.cos(c);var g=a[0],p=a[1],k=a[2],x=a[3],v=a[4],h=a[5],d=a[6],t=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=g*c+v*e;b[1]=p*c+h*e;b[2]=k*c+d*e;b[3]=x*c+t*e;b[4]=v*c-g*e;b[5]=h*c-p*e;b[6]=d*c-k*e;b[7]=t*c-x*e;return b};
a.NQ=function(a,c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=a[0];c[13]=a[1];c[14]=a[2];c[15]=1;return c};a.MQ=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=a[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=a[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.LQ=function(a,c,b){var e=c[0],g=c[1];c=c[2];var p=Math.sqrt(e*e+g*g+c*c),k;if(1E-7>Math.abs(p))return null;p=1/p;e*=p;g*=p;c*=p;p=Math.sin(a);a=Math.cos(a);k=1-a;b[0]=e*e*k+a;b[1]=g*e*k+c*
p;b[2]=c*e*k-g*p;b[3]=0;b[4]=e*g*k-c*p;b[5]=g*g*k+a;b[6]=c*g*k+e*p;b[7]=0;b[8]=e*c*k+g*p;b[9]=g*c*k-e*p;b[10]=c*c*k+a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.lZ=function(a,c){var b=Math.sin(a),e=Math.cos(a);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=e;c[6]=b;c[7]=0;c[8]=0;c[9]=-b;c[10]=e;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.mZ=function(a,c){var b=Math.sin(a),e=Math.cos(a);c[0]=e;c[1]=0;c[2]=-b;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=b;c[9]=0;c[10]=e;c[11]=0;c[12]=0;c[13]=0;
c[14]=0;c[15]=1;return c};a.nZ=function(a,c){var b=Math.sin(a),e=Math.cos(a);c[0]=e;c[1]=b;c[2]=0;c[3]=0;c[4]=-b;c[5]=e;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.fromRotationTranslation=function(a,c,b){var e=a[0],g=a[1],p=a[2],k=a[3],x=e+e,v=g+g,h=p+p;a=e*x;var d=e*v,e=e*h,t=g*v,g=g*h,p=p*h,x=k*x,v=k*v,k=k*h;b[0]=1-(t+p);b[1]=d+k;b[2]=e-v;b[3]=0;b[4]=d-k;b[5]=1-(a+p);b[6]=g+x;b[7]=0;b[8]=e+v;b[9]=g-x;b[10]=1-(a+t);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};a.jZ=function(a,c,b,n){var e=a[0],p=a[1],k=a[2],x=a[3],v=e+e,h=p+p,d=k+k;a=e*v;var t=e*h,e=e*d,q=p*h,p=p*d,k=k*d,v=x*v,h=x*h,x=x*d,d=b[0],u=b[1];b=b[2];n[0]=(1-(q+k))*d;n[1]=(t+x)*d;n[2]=(e-h)*d;n[3]=0;n[4]=(t-x)*u;n[5]=(1-(a+k))*u;n[6]=(p+v)*u;n[7]=0;n[8]=(e+h)*b;n[9]=(p-v)*b;n[10]=(1-(a+q))*b;n[11]=0;n[12]=c[0];n[13]=c[1];n[14]=c[2];n[15]=1;return n};a.kZ=function(a,c,b,n,g){var e=a[0],k=a[1],x=a[2],v=a[3],h=e+e,d=k+k,t=x+x;a=e*h;var q=e*d,e=e*t,u=k*d,k=k*t,x=x*t,h=v*h,d=v*d,v=
v*t,t=b[0],H=b[1];b=b[2];var z=n[0],l=n[1];n=n[2];g[0]=(1-(u+x))*t;g[1]=(q+v)*t;g[2]=(e-d)*t;g[3]=0;g[4]=(q-v)*H;g[5]=(1-(a+x))*H;g[6]=(k+h)*H;g[7]=0;g[8]=(e+d)*b;g[9]=(k-h)*b;g[10]=(1-(a+u))*b;g[11]=0;g[12]=c[0]+z-(g[0]*z+g[4]*l+g[8]*n);g[13]=c[1]+l-(g[1]*z+g[5]*l+g[9]*n);g[14]=c[2]+n-(g[2]*z+g[6]*l+g[10]*n);g[15]=1;return g};a.fromQuat=function(a,c){var b=a[0],e=a[1],g=a[2],p=a[3],k=b+b,x=e+e,v=g+g,b=b*k,h=e*k,e=e*x,d=g*k,t=g*x,g=g*v,k=p*k,x=p*x,p=p*v;c[0]=1-e-g;c[1]=h+p;c[2]=d-x;c[3]=0;c[4]=h-
p;c[5]=1-b-g;c[6]=t+k;c[7]=0;c[8]=d+x;c[9]=t-k;c[10]=1-b-e;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.frustum=function(a,c,b,n,g,p,k){var e=1/(c-a),v=1/(n-b),h=1/(g-p);k[0]=2*g*e;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2*g*v;k[6]=0;k[7]=0;k[8]=(c+a)*e;k[9]=(n+b)*v;k[10]=(p+g)*h;k[11]=-1;k[12]=0;k[13]=0;k[14]=p*g*2*h;k[15]=0;return k};a.perspective=function(a,c,b,n,g){a=1/Math.tan(a/2);var e=1/(b-n);g[0]=a/c;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=a;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=(n+b)*e;g[11]=-1;g[12]=
0;g[13]=0;g[14]=2*n*b*e;g[15]=0;return g};a.k_=function(a,c,b,n){var e=Math.tan(a.upDegrees*Math.PI/180),p=Math.tan(a.downDegrees*Math.PI/180),k=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var x=2/(k+a),v=2/(e+p);n[0]=x;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=v;n[6]=0;n[7]=0;n[8]=-((k-a)*x*.5);n[9]=(e-p)*v*.5;n[10]=b/(c-b);n[11]=-1;n[12]=0;n[13]=0;n[14]=b*c/(c-b);n[15]=0;return n};a.ortho=function(a,c,b,n,g,p,k){var e=1/(a-c),v=1/(b-n),h=1/(g-p);k[0]=-2*e;k[1]=0;k[2]=0;k[3]=
0;k[4]=0;k[5]=-2*v;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=2*h;k[11]=0;k[12]=(a+c)*e;k[13]=(n+b)*v;k[14]=(p+g)*h;k[15]=1;return k};a.lookAt=function(e,c,b,n){var g,p,k,x,v,h,d,t,q=e[0],u=e[1];e=e[2];k=b[0];x=b[1];p=b[2];d=c[0];b=c[1];g=c[2];if(1E-7>Math.abs(q-d)&&1E-7>Math.abs(u-b)&&1E-7>Math.abs(e-g))return a.identity(n);c=q-d;b=u-b;d=e-g;t=1/Math.sqrt(c*c+b*b+d*d);c*=t;b*=t;d*=t;g=x*d-p*b;p=p*c-k*d;k=k*b-x*c;(t=Math.sqrt(g*g+p*p+k*k))?(t=1/t,g*=t,p*=t,k*=t):k=p=g=0;x=b*k-d*p;v=d*g-c*k;h=c*p-b*g;(t=Math.sqrt(x*
x+v*v+h*h))?(t=1/t,x*=t,v*=t,h*=t):h=v=x=0;n[0]=g;n[1]=x;n[2]=c;n[3]=0;n[4]=p;n[5]=v;n[6]=b;n[7]=0;n[8]=k;n[9]=h;n[10]=d;n[11]=0;n[12]=-(g*q+p*u+k*e);n[13]=-(x*q+v*u+h*e);n[14]=-(c*q+b*u+d*e);n[15]=1;return n};a.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.KQ=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],
2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}};b4w.module.mat4=b4w.module.__mat4;b4w.module.__md5=function(a){function u(a,g){var k=a[0],p=a[1],h=a[2],d=a[3],k=c(k,p,h,d,g[0],7,-680876936),d=c(d,k,p,h,g[1],12,-389564586),h=c(h,d,k,p,g[2],17,606105819),p=c(p,h,d,k,g[3],22,-1044525330),k=c(k,p,h,d,g[4],7,-176418897),d=c(d,k,p,h,g[5],12,1200080426),h=c(h,d,k,p,g[6],17,-1473231341),p=c(p,h,d,k,g[7],22,-45705983),k=c(k,p,h,d,g[8],7,1770035416),d=c(d,k,p,h,g[9],12,-1958414417),h=c(h,d,k,p,g[10],17,-42063),p=c(p,h,d,k,g[11],22,-1990404162),k=c(k,p,h,d,g[12],7,1804603682),d=c(d,k,p,h,
g[13],12,-40341101),h=c(h,d,k,p,g[14],17,-1502002290),p=c(p,h,d,k,g[15],22,1236535329),k=b(k,p,h,d,g[1],5,-165796510),d=b(d,k,p,h,g[6],9,-1069501632),h=b(h,d,k,p,g[11],14,643717713),p=b(p,h,d,k,g[0],20,-373897302),k=b(k,p,h,d,g[5],5,-701558691),d=b(d,k,p,h,g[10],9,38016083),h=b(h,d,k,p,g[15],14,-660478335),p=b(p,h,d,k,g[4],20,-405537848),k=b(k,p,h,d,g[9],5,568446438),d=b(d,k,p,h,g[14],9,-1019803690),h=b(h,d,k,p,g[3],14,-187363961),p=b(p,h,d,k,g[8],20,1163531501),k=b(k,p,h,d,g[13],5,-1444681467),d=
b(d,k,p,h,g[2],9,-51403784),h=b(h,d,k,p,g[7],14,1735328473),p=b(p,h,d,k,g[12],20,-1926607734),k=e(p^h^d,k,p,g[5],4,-378558),d=e(k^p^h,d,k,g[8],11,-2022574463),h=e(d^k^p,h,d,g[11],16,1839030562),p=e(h^d^k,p,h,g[14],23,-35309556),k=e(p^h^d,k,p,g[1],4,-1530992060),d=e(k^p^h,d,k,g[4],11,1272893353),h=e(d^k^p,h,d,g[7],16,-155497632),p=e(h^d^k,p,h,g[10],23,-1094730640),k=e(p^h^d,k,p,g[13],4,681279174),d=e(k^p^h,d,k,g[0],11,-358537222),h=e(d^k^p,h,d,g[3],16,-722521979),p=e(h^d^k,p,h,g[6],23,76029189),k=
e(p^h^d,k,p,g[9],4,-640364487),d=e(k^p^h,d,k,g[12],11,-421815835),h=e(d^k^p,h,d,g[15],16,530742520),p=e(h^d^k,p,h,g[2],23,-995338651),k=n(k,p,h,d,g[0],6,-198630844),d=n(d,k,p,h,g[7],10,1126891415),h=n(h,d,k,p,g[14],15,-1416354905),p=n(p,h,d,k,g[5],21,-57434055),k=n(k,p,h,d,g[12],6,1700485571),d=n(d,k,p,h,g[3],10,-1894986606),h=n(h,d,k,p,g[10],15,-1051523),p=n(p,h,d,k,g[1],21,-2054922799),k=n(k,p,h,d,g[8],6,1873313359),d=n(d,k,p,h,g[15],10,-30611744),h=n(h,d,k,p,g[6],15,-1560198380),p=n(p,h,d,k,g[13],
21,1309151649),k=n(k,p,h,d,g[4],6,-145523070),d=n(d,k,p,h,g[11],10,-1120210379),h=n(h,d,k,p,g[2],15,718787259),p=n(p,h,d,k,g[9],21,-343485551);a[0]=k+a[0]&4294967295;a[1]=p+a[1]&4294967295;a[2]=h+a[2]&4294967295;a[3]=d+a[3]&4294967295}function e(a,b,c,e,g,d){b=(b+a&4294967295)+(e+d&4294967295)&4294967295;return(b<<g|b>>>32-g)+c&4294967295}function c(a,b,c,g,h,d,n){return e(b&c|~b&g,a,b,h,d,n)}function b(a,b,c,g,h,d,n){return e(b&g|c&~g,a,b,h,d,n)}function n(a,b,c,g,h,d,n){return e(c^(b|~g),a,b,h,
d,n)}var g="0123456789abcdef".split("");a.AG=function(a){var b=a,c=b.length;a=[1732584193,-271733879,-1732584194,271733878];var e;for(e=64;e<=b.length;e+=64){var h,d=b.substring(e-64,e),n=[];for(h=0;64>h;h+=4)n[h>>2]=d.charCodeAt(h)+(d.charCodeAt(h+1)<<8)+(d.charCodeAt(h+2)<<16)+(d.charCodeAt(h+3)<<24);u(a,n)}b=b.substring(e-64);h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<b.length;e++)h[e>>2]|=b.charCodeAt(e)<<(e%4<<3);h[e>>2]|=128<<(e%4<<3);if(55<e)for(u(a,h),e=0;16>e;e++)h[e]=0;h[14]=8*c;u(a,
h);for(b=0;b<a.length;b++){c=a[b];e="";for(h=0;4>h;h++)e+=g[c>>8*h+4&15]+g[c>>8*h&15];a[b]=e}return a.join("")}};b4w.module.__pako_inflate=function(a){(function(a){var e;"undefined"!==typeof window?e=window:"undefined"!==typeof self?e=self:e=this;e.KT=a()})(function(){return function e(a,b,n){function c(g){if(!b[g]){if(!a[g]){if(p)return p(g,!0);var k=Error("Cannot find module '"+g+"'");throw k.code="MODULE_NOT_FOUND",k;}k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var d=a[g][1][b];return c(d?d:b)},k,k.exports,e,a,b,n)}return b[g].exports}for(var p=!1,k=0;k<n.length;k++)c(n[k]);return c}({1:[function(a,
c,b){a="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;b.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])}}return a};b.XI=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var e={bm:function(a,b,c,e,g){if(b.subarray&&a.subarray)a.set(b.subarray(c,
c+e),g);else for(var d=0;d<e;d++)a[g+d]=b[c+d]},PF:function(a){var b,c,e,g,d;b=e=0;for(c=a.length;b<c;b++)e+=a[b].length;d=new Uint8Array(e);b=e=0;for(c=a.length;b<c;b++)g=a[b],d.set(g,e),e+=g.length;return d}},g={bm:function(a,b,c,e,g){for(var d=0;d<e;d++)a[g+d]=b[c+d]},PF:function(a){return[].concat.apply([],a)}};b.QU=function(a){a?(b.Rl=Uint8Array,b.cq=Uint16Array,b.fq=Int32Array,b.assign(b,e)):(b.Rl=Array,b.cq=Array,b.fq=Array,b.assign(b,g))};b.QU(a)},{}],2:[function(a,c,b){function e(a,b){if(65537>
b&&(a.subarray&&k||!a.subarray&&p))return String.fromCharCode.apply(null,g.XI(a,b));for(var c="",e=0;e<b;e++)c+=String.fromCharCode(a[e]);return c}var g=a("./common"),p=!0,k=!0,x=new g.Rl(256);for(a=0;256>a;a++)x[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;x[254]=x[254]=1;b.YV=function(a){var b,c,e,k,n,p=a.length,v=0;for(k=0;k<p;k++)c=a.charCodeAt(k),55296===(c&64512)&&k+1<p&&(e=a.charCodeAt(k+1),56320===(e&64512)&&(c=65536+(c-55296<<10)+(e-56320),k++)),v+=128>c?1:2048>c?2:65536>c?3:4;b=new g.Rl(v);
for(k=n=0;n<v;k++)c=a.charCodeAt(k),55296===(c&64512)&&k+1<p&&(e=a.charCodeAt(k+1),56320===(e&64512)&&(c=65536+(c-55296<<10)+(e-56320),k++)),128>c?b[n++]=c:(2048>c?b[n++]=192|c>>>6:(65536>c?b[n++]=224|c>>>12:(b[n++]=240|c>>>18,b[n++]=128|c>>>12&63),b[n++]=128|c>>>6&63),b[n++]=128|c&63);return b};b.LY=function(a){return e(a,a.length)};b.wN=function(a){for(var b=new g.Rl(a.length),c=0,e=b.length;c<e;c++)b[c]=a.charCodeAt(c);return b};b.FN=function(a,b){var c,g,h,k,n=b||a.length,p=Array(2*n);for(c=g=
0;c<n;)if(h=a[c++],128>h)p[g++]=h;else if(k=x[h],4<k)p[g++]=65533,c+=k-1;else{for(h&=2===k?31:3===k?15:7;1<k&&c<n;)h=h<<6|a[c++]&63,k--;1<k?p[g++]=65533:65536>h?p[g++]=h:(h-=65536,p[g++]=55296|h>>10&1023,p[g++]=56320|h&1023)}return e(p,g)};b.lX=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||!c?b:c+x[a[c]]>b?c:b}},{"./common":1}],3:[function(a,c){c.exports=function(a,c,e,p){var b=a&65535|0;a=a>>>16&65535|0;for(var g;0!==e;){g=2E3<e?2E3:
e;e-=g;do b=b+c[p++]|0,a=a+b|0;while(--g);b%=65521;a%=65521}return b|a<<16|0}},{}],4:[function(a,c){c.exports={QD:0,sY:1,RD:2,pY:3,Ht:4,hY:5,wY:6,Mn:0,It:1,AM:2,mY:-1,uY:-2,iY:-3,zM:-5,rY:0,fY:1,eY:9,jY:-1,nY:1,qY:2,tY:3,oY:4,kY:0,gY:0,vY:1,xY:2,lY:8}},{}],5:[function(a,c){var b=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var e=0;8>e;e++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}();c.exports=function(a,c,e,k){e=k+e;for(a^=-1;k<e;k++)a=a>>>8^b[(a^c[k])&255];return a^-1}},{}],6:[function(a,
c){c.exports=function(){this.GT=this.BX=this.time=this.text=0;this.Cd=null;this.Zz=0;this.Dz=this.name="";this.cS=0;this.done=!1}},{}],7:[function(a,c){c.exports=function(a,c){var b,e,k,n,v,h,d,t,q,G,H,z,l,F,r,E,w,f,y,D,N,M,B,J;b=a.state;e=a.el;B=a.input;k=e+(a.dg-5);n=a.De;J=a.Oh;v=n-(c-a.zd);h=n+(a.zd-257);d=b.Qu;t=b.Wf;q=b.pk;G=b.Vf;H=b.window;z=b.Pk;l=b.ed;F=b.Ij;r=b.tm;E=(1<<b.Ei)-1;w=(1<<b.io)-1;a:do b:for(15>l&&(z+=B[e++]<<l,l+=8,z+=B[e++]<<l,l+=8),f=F[z&E];;){y=f>>>24;z>>>=y;l-=y;if(y=f>>>
16&255)if(y&16){D=f&65535;if(y&=15)l<y&&(z+=B[e++]<<l,l+=8),D+=z&(1<<y)-1,z>>>=y,l-=y;15>l&&(z+=B[e++]<<l,l+=8,z+=B[e++]<<l,l+=8);f=r[z&w];c:for(;;){y=f>>>24;z>>>=y;l-=y;y=f>>>16&255;if(y&16){f&=65535;y&=15;l<y&&(z+=B[e++]<<l,l+=8,l<y&&(z+=B[e++]<<l,l+=8));f+=z&(1<<y)-1;if(f>d){a.msg="invalid distance too far back";b.mode=30;break a}z>>>=y;l-=y;y=n-v;if(f>y){y=f-y;if(y>q&&b.aC){a.msg="invalid distance too far back";b.mode=30;break a}N=0;M=H;if(0===G){if(N+=t-y,y<D){D-=y;do J[n++]=H[N++];while(--y);
N=n-f;M=J}}else if(G<y){if(N+=t+G-y,y-=G,y<D){D-=y;do J[n++]=H[N++];while(--y);N=0;if(G<D){y=G;D-=y;do J[n++]=H[N++];while(--y);N=n-f;M=J}}}else if(N+=G-y,y<D){D-=y;do J[n++]=H[N++];while(--y);N=n-f;M=J}for(;2<D;)J[n++]=M[N++],J[n++]=M[N++],J[n++]=M[N++],D-=3;D&&(J[n++]=M[N++],1<D&&(J[n++]=M[N++]))}else{N=n-f;do J[n++]=J[N++],J[n++]=J[N++],J[n++]=J[N++],D-=3;while(2<D);D&&(J[n++]=J[N++],1<D&&(J[n++]=J[N++]))}}else if(y&64){a.msg="invalid distance code";b.mode=30;break a}else{f=r[(f&65535)+(z&(1<<
y)-1)];continue c}break}}else if(y&64){y&32?b.mode=12:(a.msg="invalid literal/length code",b.mode=30);break a}else{f=F[(f&65535)+(z&(1<<y)-1)];continue b}else J[n++]=f&65535;break}while(e<k&&n<h);D=l>>3;e-=D;l-=D<<3;a.el=e;a.De=n;a.dg=e<k?5+(k-e):5-(e-k);a.zd=n<h?257+(h-n):257-(n-h);b.Pk=z&(1<<l)-1;b.ed=l}},{}],8:[function(a,c,b){function e(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function g(){this.mode=0;this.fw=!1;this.Zh=0;this.DA=!1;this.total=this.check=this.Qu=this.Uc=
0;this.head=null;this.Vf=this.pk=this.Wf=this.aq=0;this.window=null;this.Cd=this.offset=this.length=this.ed=this.Pk=0;this.tm=this.Ij=null;this.Wg=this.$r=this.Uo=this.DH=this.io=this.Ei=0;this.next=null;this.Be=new d.cq(320);this.rt=new d.cq(288);this.EF=this.fH=null;this.wX=this.back=this.aC=0}function p(a){var b;if(!a||!a.state)return-2;b=a.state;a.EC=a.Vs=b.total=0;a.msg="";b.Zh&&(a.Xl=b.Zh&1);b.mode=1;b.fw=0;b.DA=0;b.Qu=32768;b.head=null;b.Pk=0;b.ed=0;b.Ij=b.fH=new d.fq(852);b.tm=b.EF=new d.fq(592);
b.aC=1;b.back=-1;return 0}function k(a){var b;if(!a||!a.state)return-2;b=a.state;b.Wf=0;b.pk=0;b.Vf=0;return p(a)}function x(a,b){var c,d;if(!a||!a.state)return-2;d=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==d.window&&d.aq!==b&&(d.window=null);d.Zh=c;d.aq=b;return k(a)}function v(a,b){var c;if(!a)return-2;c=new g;a.state=c;c.window=null;c=x(a,b);0!==c&&(a.state=null);return c}function h(a,b,c,e){var f=a.state;null===f.window&&(f.Wf=1<<f.aq,f.Vf=0,f.pk=0,f.window=
new d.Rl(f.Wf));e>=f.Wf?(d.bm(f.window,b,c-f.Wf,f.Wf,0),f.Vf=0,f.pk=f.Wf):(a=f.Wf-f.Vf,a>e&&(a=e),d.bm(f.window,b,c-e,a,f.Vf),(e-=a)?(d.bm(f.window,b,c-e,e,0),f.Vf=e,f.pk=f.Wf):(f.Vf+=a,f.Vf===f.Wf&&(f.Vf=0),f.pk<f.Wf&&(f.pk+=a)));return 0}var d=a("../utils/common"),t=a("./adler32"),q=a("./crc32"),G=a("./inffast"),H=a("./inftrees"),z=!0,l,F;b.QZ=k;b.RZ=x;b.SZ=p;b.OZ=function(a){return v(a,15)};b.hS=v;b.Co=function(a,b){var c,f,g,k,n,p,r,v,x,A,E,m,K,R,O,S,ga,sa,U=new d.Rl(4),ia=[16,17,18,0,8,7,9,6,
10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.Oh||!a.input&&0!==a.dg)return-2;c=a.state;12===c.mode&&(c.mode=13);n=a.De;g=a.Oh;r=a.zd;k=a.el;f=a.input;p=a.dg;v=c.Pk;x=c.ed;A=p;E=r;sa=0;a:for(;;)switch(c.mode){case 1:if(0===c.Zh){c.mode=13;break}for(;16>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}if(c.Zh&2&&35615===v){c.check=0;U[0]=v&255;U[1]=v>>>8&255;c.check=q(c.check,U,2,0);x=v=0;c.mode=2;break}c.Uc=0;c.head&&(c.head.done=!1);if(!(c.Zh&1)||(((v&255)<<8)+(v>>8))%31){a.msg="incorrect header check";
c.mode=30;break}if(8!==(v&15)){a.msg="unknown compression method";c.mode=30;break}v>>>=4;x-=4;K=(v&15)+8;if(0===c.aq)c.aq=K;else if(K>c.aq){a.msg="invalid window size";c.mode=30;break}c.Qu=1<<K;a.Xl=c.check=1;c.mode=v&512?10:12;x=v=0;break;case 2:for(;16>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.Uc=v;if(8!==(c.Uc&255)){a.msg="unknown compression method";c.mode=30;break}if(c.Uc&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=v>>8&1);c.Uc&512&&(U[0]=v&255,U[1]=v>>>8&
255,c.check=q(c.check,U,2,0));x=v=0;c.mode=3;case 3:for(;32>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.head&&(c.head.time=v);c.Uc&512&&(U[0]=v&255,U[1]=v>>>8&255,U[2]=v>>>16&255,U[3]=v>>>24&255,c.check=q(c.check,U,4,0));x=v=0;c.mode=4;case 4:for(;16>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.head&&(c.head.BX=v&255,c.head.GT=v>>8);c.Uc&512&&(U[0]=v&255,U[1]=v>>>8&255,c.check=q(c.check,U,2,0));x=v=0;c.mode=5;case 5:if(c.Uc&1024){for(;16>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.length=v;c.head&&
(c.head.Zz=v);c.Uc&512&&(U[0]=v&255,U[1]=v>>>8&255,c.check=q(c.check,U,2,0));x=v=0}else c.head&&(c.head.Cd=null);c.mode=6;case 6:if(c.Uc&1024&&(m=c.length,m>p&&(m=p),m&&(c.head&&(K=c.head.Zz-c.length,c.head.Cd||(c.head.Cd=Array(c.head.Zz)),d.bm(c.head.Cd,f,k,m,K)),c.Uc&512&&(c.check=q(c.check,f,m,k)),p-=m,k+=m,c.length-=m),c.length))break a;c.length=0;c.mode=7;case 7:if(c.Uc&2048){if(0===p)break a;m=0;do K=f[k+m++],c.head&&K&&65536>c.length&&(c.head.name+=String.fromCharCode(K));while(K&&m<p);c.Uc&
512&&(c.check=q(c.check,f,m,k));p-=m;k+=m;if(K)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.Uc&4096){if(0===p)break a;m=0;do K=f[k+m++],c.head&&K&&65536>c.length&&(c.head.Dz+=String.fromCharCode(K));while(K&&m<p);c.Uc&512&&(c.check=q(c.check,f,m,k));p-=m;k+=m;if(K)break a}else c.head&&(c.head.Dz=null);c.mode=9;case 9:if(c.Uc&512){for(;16>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}if(v!==(c.check&65535)){a.msg="header crc mismatch";c.mode=30;break}x=v=0}c.head&&(c.head.cS=
c.Uc>>9&1,c.head.done=!0);a.Xl=c.check=0;c.mode=12;break;case 10:for(;32>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}a.Xl=c.check=e(v);x=v=0;c.mode=11;case 11:if(0===c.DA)return a.De=n,a.zd=r,a.el=k,a.dg=p,c.Pk=v,c.ed=x,2;a.Xl=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.fw){v>>>=x&7;x-=x&7;c.mode=27;break}for(;3>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.fw=v&1;v>>>=1;--x;switch(v&3){case 0:c.mode=14;break;case 1:K=c;if(z){l=new d.fq(512);F=new d.fq(32);for(m=0;144>m;)K.Be[m++]=
8;for(;256>m;)K.Be[m++]=9;for(;280>m;)K.Be[m++]=7;for(;288>m;)K.Be[m++]=8;H(1,K.Be,0,288,l,0,K.rt,{ed:9});for(m=0;32>m;)K.Be[m++]=5;H(2,K.Be,0,32,F,0,K.rt,{ed:5});z=!1}K.Ij=l;K.Ei=9;K.tm=F;K.io=5;c.mode=20;if(6===b){v>>>=2;x-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}v>>>=2;x-=2;break;case 14:v>>>=x&7;for(x-=x&7;32>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}if((v&65535)!==(v>>>16^65535)){a.msg="invalid stored block lengths";c.mode=30;break}c.length=v&65535;
x=v=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(m=c.length){m>p&&(m=p);m>r&&(m=r);if(0===m)break a;d.bm(g,f,k,m,n);p-=m;k+=m;r-=m;n+=m;c.length-=m;break}c.mode=12;break;case 17:for(;14>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.Uo=(v&31)+257;v>>>=5;x-=5;c.$r=(v&31)+1;v>>>=5;x-=5;c.DH=(v&15)+4;v>>>=4;x-=4;if(286<c.Uo||30<c.$r){a.msg="too many length or distance symbols";c.mode=30;break}c.Wg=0;c.mode=18;case 18:for(;c.Wg<c.DH;){for(;3>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.Be[ia[c.Wg++]]=
v&7;v>>>=3;x-=3}for(;19>c.Wg;)c.Be[ia[c.Wg++]]=0;c.Ij=c.fH;c.Ei=7;m={ed:c.Ei};sa=H(0,c.Be,0,19,c.Ij,0,c.rt,m);c.Ei=m.ed;if(sa){a.msg="invalid code lengths set";c.mode=30;break}c.Wg=0;c.mode=19;case 19:for(;c.Wg<c.Uo+c.$r;){for(;;){O=c.Ij[v&(1<<c.Ei)-1];m=O>>>24;O&=65535;if(m<=x)break;if(0===p)break a;p--;v+=f[k++]<<x;x+=8}if(16>O)v>>>=m,x-=m,c.Be[c.Wg++]=O;else{if(16===O){for(K=m+2;x<K;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}v>>>=m;x-=m;if(0===c.Wg){a.msg="invalid bit length repeat";c.mode=30;break}K=
c.Be[c.Wg-1];m=3+(v&3);v>>>=2;x-=2}else if(17===O){for(K=m+3;x<K;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}v>>>=m;x-=m;K=0;m=3+(v&7);v>>>=3;x-=3}else{for(K=m+7;x<K;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}v>>>=m;x-=m;K=0;m=11+(v&127);v>>>=7;x-=7}if(c.Wg+m>c.Uo+c.$r){a.msg="invalid bit length repeat";c.mode=30;break}for(;m--;)c.Be[c.Wg++]=K}}if(30===c.mode)break;if(0===c.Be[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.Ei=9;m={ed:c.Ei};sa=H(1,c.Be,0,c.Uo,c.Ij,0,c.rt,m);c.Ei=m.ed;
if(sa){a.msg="invalid literal/lengths set";c.mode=30;break}c.io=6;c.tm=c.EF;m={ed:c.io};sa=H(2,c.Be,c.Uo,c.$r,c.tm,0,c.rt,m);c.io=m.ed;if(sa){a.msg="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=p&&258<=r){a.De=n;a.zd=r;a.el=k;a.dg=p;c.Pk=v;c.ed=x;G(a,E);n=a.De;g=a.Oh;r=a.zd;k=a.el;f=a.input;p=a.dg;v=c.Pk;x=c.ed;12===c.mode&&(c.back=-1);break}for(c.back=0;;){O=c.Ij[v&(1<<c.Ei)-1];m=O>>>24;K=O>>>16&255;O&=65535;if(m<=x)break;if(0===p)break a;p--;
v+=f[k++]<<x;x+=8}if(K&&!(K&240)){R=m;S=K;for(ga=O;;){O=c.Ij[ga+((v&(1<<R+S)-1)>>R)];m=O>>>24;K=O>>>16&255;O&=65535;if(R+m<=x)break;if(0===p)break a;p--;v+=f[k++]<<x;x+=8}v>>>=R;x-=R;c.back+=R}v>>>=m;x-=m;c.back+=m;c.length=O;if(!K){c.mode=26;break}if(K&32){c.back=-1;c.mode=12;break}if(K&64){a.msg="invalid literal/length code";c.mode=30;break}c.Cd=K&15;c.mode=22;case 22:if(c.Cd){for(K=c.Cd;x<K;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.length+=v&(1<<c.Cd)-1;v>>>=c.Cd;x-=c.Cd;c.back+=c.Cd}c.wX=c.length;
c.mode=23;case 23:for(;;){O=c.tm[v&(1<<c.io)-1];m=O>>>24;K=O>>>16&255;O&=65535;if(m<=x)break;if(0===p)break a;p--;v+=f[k++]<<x;x+=8}if(!(K&240)){R=m;S=K;for(ga=O;;){O=c.tm[ga+((v&(1<<R+S)-1)>>R)];m=O>>>24;K=O>>>16&255;O&=65535;if(R+m<=x)break;if(0===p)break a;p--;v+=f[k++]<<x;x+=8}v>>>=R;x-=R;c.back+=R}v>>>=m;x-=m;c.back+=m;if(K&64){a.msg="invalid distance code";c.mode=30;break}c.offset=O;c.Cd=K&15;c.mode=24;case 24:if(c.Cd){for(K=c.Cd;x<K;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}c.offset+=v&(1<<
c.Cd)-1;v>>>=c.Cd;x-=c.Cd;c.back+=c.Cd}if(c.offset>c.Qu){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===r)break a;m=E-r;if(c.offset>m){m=c.offset-m;if(m>c.pk&&c.aC){a.msg="invalid distance too far back";c.mode=30;break}m>c.Vf?(m-=c.Vf,K=c.Wf-m):K=c.Vf-m;m>c.length&&(m=c.length);R=c.window}else R=g,K=n-c.offset,m=c.length;m>r&&(m=r);r-=m;c.length-=m;do g[n++]=R[K++];while(--m);0===c.length&&(c.mode=21);break;case 26:if(0===r)break a;g[n++]=c.length;r--;c.mode=21;break;
case 27:if(c.Zh){for(;32>x;){if(0===p)break a;p--;v|=f[k++]<<x;x+=8}E-=r;a.Vs+=E;c.total+=E;E&&(a.Xl=c.check=c.Uc?q(c.check,g,E,n-E):t(c.check,g,E,n-E));E=r;if((c.Uc?v:e(v))!==c.check){a.msg="incorrect data check";c.mode=30;break}x=v=0}c.mode=28;case 28:if(c.Zh&&c.Uc){for(;32>x;){if(0===p)break a;p--;v+=f[k++]<<x;x+=8}if(v!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=30;break}x=v=0}c.mode=29;case 29:sa=1;break a;case 30:sa=-3;break a;case 31:return-4;default:return-2}a.De=n;a.zd=
r;a.el=k;a.dg=p;c.Pk=v;c.ed=x;if((c.Wf||E!==a.zd&&30>c.mode&&(27>c.mode||4!==b))&&h(a,a.Oh,a.De,E-a.zd))return c.mode=31,-4;A-=a.dg;E-=a.zd;a.EC+=A;a.Vs+=E;c.total+=E;c.Zh&&E&&(a.Xl=c.check=c.Uc?q(c.check,g,E,a.De-E):t(c.check,g,E,a.De-E));a.RP=c.ed+(c.fw?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===A&&0===E||4===b)&&0===sa&&(sa=-5);return sa};b.fS=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};b.gS=function(a,b){var c;a&&a.state&&
(c=a.state,c.Zh&2&&(c.head=b,b.done=!1))};b.iS=function(a,b){var c=b.length,d,e;if(!a||!a.state)return-2;d=a.state;if(0!==d.Zh&&11!==d.mode)return-2;if(11===d.mode&&(e=t(1,b,c,0),e!==d.check))return-3;if(h(a,b,c,c))return d.mode=31,-4;d.DA=1;return 0};b.NZ="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,c){var b=a("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,
258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],k=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(a,c,h,d,n,q,G,H){var t=H.ed,l,v,r,x,w,f,y,D,N,M,B,J,C,A=0,X,m=new b.cq(16);w=new b.cq(16);var K,R=0,O,S,ga;for(l=0;15>=l;l++)m[l]=0;for(v=0;v<d;v++)m[c[h+v]]++;
x=t;for(r=15;1<=r&&0===m[r];r--);x>r&&(x=r);if(!r)return n[q++]=20971520,n[q++]=20971520,H.ed=1,0;for(t=1;t<r&&0===m[t];t++);x<t&&(x=t);for(l=f=1;15>=l;l++)if(f<<=1,f-=m[l],0>f)return-1;if(0<f&&(0===a||1!==r))return-1;w[1]=0;for(l=1;15>l;l++)w[l+1]=w[l]+m[l];for(v=0;v<d;v++)0!==c[h+v]&&(G[w[c[h+v]]++]=v);0===a?(C=K=G,X=19):1===a?(C=e,A-=257,K=g,R-=257,X=256):(C=p,K=k,X=-1);v=D=0;l=t;J=q;d=x;w=0;M=-1;y=1<<x;B=y-1;if(1===a&&852<y||2===a&&592<y)return 1;for(;;){O=l-w;G[v]<X?(S=0,ga=G[v]):G[v]>X?(S=K[R+
G[v]],ga=C[A+G[v]]):(S=96,ga=0);f=1<<l-w;t=N=1<<d;do N-=f,n[J+(D>>w)+N]=O<<24|S<<16|ga|0;while(N);for(f=1<<l-1;D&f;)f>>=1;f?(D&=f-1,D+=f):D=0;v++;if(!--m[l]){if(l===r)break;l=c[h+G[v]]}if(l>x&&(D&B)!==M){0===w&&(w=x);J+=t;d=l-w;for(f=1<<d;d+w<r;){f-=m[d+w];if(0>=f)break;d++;f<<=1}y+=1<<d;if(1===a&&852<y||2===a&&592<y)return 1;M=D&B;n[M]=x<<24|d<<16|J-q|0}}D&&(n[J+D]=l-w<<24|4194304);H.ed=x;return 0}},{"../utils/common":1}],10:[function(a,c){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error",
"-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(a,c){c.exports=function(){this.input=null;this.EC=this.dg=this.el=0;this.Oh=null;this.Vs=this.zd=this.De=0;this.msg="";this.state=null;this.RP=2;this.Xl=0}},{}],"/lib/inflate.js":[function(a,c,b){function e(a){if(!(this instanceof e))return new e(a);var b=this.options=k.assign({iO:16384,qe:0,to:""},a||{});b.raw&&0<=b.qe&&16>b.qe&&(b.qe=-b.qe,b.qe||(b.qe=-15));!(0<=b.qe&&
16>b.qe)||a&&a.qe||(b.qe+=32);15<b.qe&&48>b.qe&&!(b.qe&15)&&(b.qe|=15);this.Xz=0;this.msg="";this.ended=!1;this.mu=[];this.qn=new d;this.qn.zd=0;a=p.hS(this.qn,b.qe);if(a!==v.Mn)throw Error(h[a]);this.dS=new t;p.gS(this.qn,this.dS)}function g(a,b){var c=new e(b);c.push(a,!0);if(c.Xz)throw c.msg||h[c.Xz];return c.result}var p=a("./zlib/inflate"),k=a("./utils/common"),x=a("./utils/strings"),v=a("./zlib/constants"),h=a("./zlib/messages"),d=a("./zlib/zstream"),t=a("./zlib/gzheader"),q=Object.prototype.toString;
e.prototype.push=function(a,b){var c=this.qn,d=this.options.iO,e=this.options.dZ,g,h,n,f,t,D,H=!1;if(this.ended)return!1;h=b===~~b?b:!0===b?v.Ht:v.QD;"string"===typeof a?c.input=x.wN(a):"[object ArrayBuffer]"===q.call(a)?c.input=new Uint8Array(a):c.input=a;c.el=0;c.dg=c.input.length;do{0===c.zd&&(c.Oh=new k.Rl(d),c.De=0,c.zd=d);g=p.Co(c,v.QD);g===v.AM&&e&&("string"===typeof e?D=x.YV(e):"[object ArrayBuffer]"===q.call(e)?D=new Uint8Array(e):D=e,g=p.iS(this.qn,D));g===v.zM&&!0===H&&(g=v.Mn,H=!1);if(g!==
v.It&&g!==v.Mn)return this.xB(g),this.ended=!0,!1;!c.De||0!==c.zd&&g!==v.It&&(0!==c.dg||h!==v.Ht&&h!==v.RD)||("string"===this.options.to?(n=x.lX(c.Oh,c.De),f=c.De-n,t=x.FN(c.Oh,n),c.De=f,c.zd=d-f,f&&k.bm(c.Oh,c.Oh,n,f,0),this.RH(t)):this.RH(k.XI(c.Oh,c.De)));0===c.dg&&0===c.zd&&(H=!0)}while((0<c.dg||0===c.zd)&&g!==v.It);g===v.It&&(h=v.Ht);if(h===v.Ht)return g=p.fS(this.qn),this.xB(g),this.ended=!0,g===v.Mn;h===v.RD&&(this.xB(v.Mn),c.zd=0);return!0};e.prototype.RH=function(a){this.mu.push(a)};e.prototype.xB=
function(a){a===v.Mn&&(this.result="string"===this.options.to?this.mu.join(""):k.PF(this.mu));this.mu=[];this.Xz=a;this.msg=this.qn.msg};b.TX=e;b.Co=g;b.PZ=function(a,b){b=b||{};b.raw=!0;return g(a,b)};b.M_=g},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});a.Co=window.KT.Co};b4w.module.shader_texts=function(a){a["anchors.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ; }".split(" ")}]};a["anchors.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANCHOR_NUM",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec3 u_position [ ANCHOR_NUM ] ; uniform mat4 u_view_proj_matrix ; uniform vec2 u_texel_size ; GLSL_IN float a_index ; void main ( ) { int c = int ( mod ( a_index , 3.0 ) ) ; int d = int ( a_index / 3.0 ) ; vec2 e ; if ( c == 0 ) { e = vec2 ( - 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else if ( c == 1 ) { e = vec2 ( 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else { e = vec2 ( 0.0 , 5.0 * u_texel_size [ 1 ] ) ; } vec4 f = u_view_proj_matrix * vec4 ( u_position [ d ] , 1.0 ) ; f . xy += e * f . w ; gl_Position = f ; }".split(" ")}]};
a["color_id.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_OUTLINE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},
{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
F:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",
";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_sampler ; uniform float u_alpha_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE",{a:"logic_negative_expr",o:1}],l:{a:"grp",
f:[{a:"txt",b:["uniform","vec3","u_color_id",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",
f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map1 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map2 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map3 ; uniform sampler2D u_shadow_mask ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_outline_intensity",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec4 i ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 n ; GLSL_IN vec4 o ; GLSL_IN vec4 u ; GLSL_IN vec4 v ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
F:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float L = ( GLSL_TEXTURE ( u_sampler , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",
f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , u_outline_intensity ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( u_color_id , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["color_id.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},
{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",
c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],
l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",
j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec4 i ; GLSL_OUT vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",
{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:6},{a:"logical_and_expr",o:3},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ; vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( u_model_tsr , U ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",
o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ay = T ( a_tbn , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",
"USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"txt",b:"i = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * i ;".split(" ")},{a:"cond",f:[{a:"if",
j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - i . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["J","(",")",";"]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; }".split(" ")}]};
a["debug_view.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIREFRAME_QUALITY",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DEBUG_SPHERE_DYNAMIC",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_debug_view_mode ; uniform float u_cluster_id ; uniform float u_batch_debug_id_color ; uniform float u_batch_debug_main_render_time ; uniform float u_debug_colors_seed ; uniform float u_debug_render_time_threshold ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_IN vec3 aD ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float aE = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE_DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 1.0 , 0.05 , 0.05 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 0.05 , 0.05 , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aG = vec3 ( 0.4 , 0.4 , 1.0 ) ; const vec3 aH = vec3 ( 1.0 , 0.4 , 0.4 ) ; const vec3 aI = vec3 ( 1.0 , 1.0 , 1.0 ) ; const vec3 aJ = vec3 ( 0.0 , 133.0 / 255.0 , 66.0 / 255.0 ) ; const vec3 aK = vec3 ( 160.0 / 255.0 , 38.0 / 255.0 , 33.0 / 255.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float aP ( ) { float aL = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIREFRAME_QUALITY",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) aL = 0.0 ;".split(" ")}]}},{a:"elif",j:["WIREFRAME_QUALITY",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; aL = min ( min ( aO . x , aO . y ) , aO . z ) ; aL = clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["return","aL",";","}"]}]}}]},{a:"txt",b:"void main ( ) { vec3 aQ = vec3 ( 0.0 ) ; float L = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) { aQ = aF ; L = 1.0 ; } else discard ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_debug_view_mode == DV_OPAQUE_WIREFRAME ) { float aL = aP ( ) ; aQ = vec3 ( mix ( u_wireframe_edge_color , aI , aL ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_TRANSPARENT_WIREFRAME ) { float aL = aP ( ) ; aQ = u_wireframe_edge_color ; L = mix ( 1.0 , 0.0 , aL ) ; } else if ( u_debug_view_mode == DV_FRONT_BACK_VIEW ) { float aL = aP ( ) ; if ( gl_FrontFacing ) aQ = mix ( u_wireframe_edge_color , aG , aL ) ; else aQ = mix ( u_wireframe_edge_color , aH , aL ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_CLUSTERS_VIEW ) { float aR = u_cluster_id + u_debug_colors_seed + 2.0 ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_BATCHES_VIEW ) { float aR = u_batch_debug_id_color + u_debug_colors_seed ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_RENDER_TIME ) { float aS ; if ( u_debug_render_time_threshold > 0.0 ) aS = clamp ( u_batch_debug_main_render_time , 0.0 , u_debug_render_time_threshold ) / u_debug_render_time_threshold ; else aS = 1.0 ; float aT = clamp ( 2.0 * aS , 0.0 , 1.0 ) ; float aU = clamp ( 2.0 * aS - 1.0 , 0.0 , 1.0 ) ; float aV = aS ; aQ = mix ( aJ , aK , vec3 ( aT , aU , aV ) ) ; L = 1.0 ; }".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["debug_view.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"DEBUG_VIEW_SPECIAL_SKYDOME",b:["0"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",
c:"BILLBOARD",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN float a_polyindex ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","aD",";"]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},{a:"include",F:"dynamic_grass.glslv"}]}}]},{a:"txt",
b:"void main ( ) { if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_VIEW_SPECIAL_SKYDOME"],l:{a:"grp",f:[{a:"txt",b:"gl_Position = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; vec3 O = a_position ; vec4 S = R ( a_tbn ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ; an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["error.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",
F:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 0.0 , 1.0 , 1.0 ) ; }".split(" ")}]};a["error.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; void main ( ) { gl_Position = u_proj_matrix * bc ( u_view_tsr ) * vec4 ( a_position , 1.0 ) ; }".split(" ")}]};a["grass_map.glslf"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec3","bd",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( bd , vec3 ( 1.0 ) ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , bd ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["grass_map.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",
F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_grass_size",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_grass_color",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","bd",";"]}]}},{a:"else",
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bd",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ; uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , vec3 ( 0.0 ) ) ; Z = as ( u_camera_eye , aq , N , u_model_tsr ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:"bd = vec4 ( a_grass_size , a_grass_color ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_size",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_color",";"]}]}}]}]}}]},{a:"txt",b:["gl_Position",
"=","f",";","}"]}]};a["halo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec3 u_halo_rings_color ; uniform vec3 u_halo_lines_color ; uniform float u_halo_hardness ; uniform float u_halo_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_sun_intensity",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ; uniform float u_cam_water_depth ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN float bf ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"include",F:"color_util.glslf"},{a:"include",F:"halo_color.glslf"},{a:"txt",b:"void main ( ) { vec4 bi = bh ( ) ; vec3 aQ = bi . rgb ; float aM = bi . a ; aW ( aQ ) ; aX ( aQ , aM ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , aM ) ; }".split(" ")}]};a["halo.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"include",F:"std.glsl"},
{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform PRECISION float u_halo_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec2 a_halo_bb_vertex ; GLSL_IN float a_random_vals ; GLSL_OUT vec2 A ; GLSL_OUT float bf ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","be",";"]}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; vec3 O = ap ( Z , a_position ) ; A = a_halo_bb_vertex * 2.0 - 1.0 ; bf = a_random_vals ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ; mat3 bl = N ; bl [ 0 ] [ 0 ] = 0.0 ; bl [ 0 ] [ 1 ] = 0.0 ; bl [ 0 ] [ 2 ] = 0.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ;".split(" ")}]}}]},{a:"txt",b:"vec2 bm = ( a_halo_bb_vertex * 2.0 - 1.0 ) * u_halo_size ; vec3 bn = vec3 ( bm [ 0 ] , 0.0 , bm [ 1 ] ) ; vec3 bo = ap ( bk , bn ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( bl , bo ) , 1.0 ) ; f . z = 0.99999 * f . w ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"be = vec4 ( bo , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , bo ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["irradiance_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform samplerCube u_sky_reflection ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; vec3 bt = vec3 ( 0.0 ) ; vec3 bu = vec3 ( 0.0 , 0.0 , 1.0 ) ; vec3 bv = vec3 ( 1.0 , 0.0 , 0.0 ) ; const float bw = 0.025 ; float bx = 0.0 ; for ( float by = 0.0 ; by < 2.0 * M_PI ; by += bw ) { for ( float bz = 0.0 ; bz < 0.5 * M_PI ; bz += bw ) { vec3 bA = vec3 ( sin ( bz ) * cos ( by ) , sin ( bz ) * sin ( by ) , cos ( bz ) ) ; vec3 bB = bA . x * bv + bA . y * bu + bA . z * bq ; vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , bB ) . rgb ; bC ( bs ) ; bt += bs * cos ( bz ) * sin ( bz ) ; bx ++ ; } } bt = M_PI * bt * ( 1.0 / float ( bx ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bt , 1.0 ) ; }".split(" ")}]};
a["lens_flares.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_sampler , A ) ; aW ( aQ . rgb ) ; aX ( aQ . rgb , aQ . a ) ; GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["lens_flares.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_LIGHTS",
b:["0"]},{a:"define",c:"LIGHT_INDEX",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; GLSL_IN float a_lf_dist ; GLSL_IN vec2 a_lf_bb_vertex ; GLSL_IN vec2 a_texcoord ; GLSL_OUT vec2 A ; void main ( ) { A = a_texcoord ; vec3 bD = normalize ( u_light_directions [ LIGHT_INDEX ] ) ; vec4 f = u_proj_matrix * vec4 ( _ ( u_view_tsr , bD ) , 0.0 ) ; f . x /= f . w ; f . y /= f . w ; f += 99999.0 * step ( f . z , 0.0 ) ; f += 100.0 * ( step ( 1.0 , abs ( f . x ) ) + step ( 1.0 , abs ( f . y ) ) ) ; f . x = a_lf_dist * f . x ; f . y = a_lf_dist * f . y ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bF = vec2 ( a_lf_bb_vertex . x / bE , a_lf_bb_vertex . y ) ; if ( a_lf_dist < 0.999 ) { const float bG = 1.9 ; bF *= ( 1.0 + bG * length ( f . xy ) ) ; } gl_Position = vec4 ( f . xy + bF , 0.999999 , 1.0 ) ; }".split(" ")}]};
a["line.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ALPHA",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform vec4 u_diffuse_color ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 aQ = u_diffuse_color . xyz ; float L = u_diffuse_color . a ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
a["line.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec3 a_direction ; uniform mat3 u_model_tsr ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform float u_height ; uniform float u_line_width ; void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , normalize ( a_direction ) , Z ) ; vec4 bH = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; bH . xyz /= bH . w ; vec4 bI = u_proj_matrix * vec4 ( ap ( N , aw . O + aw . U ) , 1.0 ) ; bI . xyz /= bI . w ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bJ = ( bI - bH ) . xy ; bJ . x *= bE ; float bK = M_PI / 2.0 ; mat2 bL = mat2 ( cos ( bK ) , sin ( bK ) , - sin ( bK ) , cos ( bK ) ) ; bJ = bL * bJ ; bJ = normalize ( bJ ) ; vec2 bM = ( u_line_width / u_height ) * vec2 ( 1.0 / bE , 1.0 ) ; gl_Position = vec4 ( bH . xy + bJ . xy * bM / 2.0 , bH . z , 1.0 ) ; gl_Position *= bH . w ; }".split(" ")}]};
a["main.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},
{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",
b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",F:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",
j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:"uniform float u_time ; uniform vec2 u_texel_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["GLSL1","USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_bsdf_cube_sky_dim",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",
b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR_STANDARD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform samplerCube u_cube_irradiance ; uniform samplerCube u_cube_r_convolution ; uniform sampler2D u_brdf ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP",
"NUM_LAMP_LIGHTS",0,{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},
"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",F:"nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"float bN = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ; vec3 U = G ; vec4 bP = H ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},{a:"txt",b:"aQ = max ( vec3 ( 0.0 ) , aQ ) ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
a["main.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",
b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],
l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE",{a:"logical_or_expr",o:9}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_color",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bT",";"]},
{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bU",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",
"USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",F:"dynamic_grass.glslv"},{a:"include",F:"shadow.glslv"},{a:"include",F:"skin.glslv"},
{a:"include",F:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","N","=","u_view_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",
b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:["vec3","O","=","a_position",";"]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:14}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","bW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{a:"elif",j:["NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"vec3 bX = ap ( Z , O ) ; vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 D = bX - u_camera_eye ; vec3 W = cross ( D , ac ) ; vec3 V = cross ( ac , W ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE","USE_NODE_BUMP",{a:"logical_or_expr",o:10}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_BSDF_BEGIN","USE_NODE_BUMP",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS",
"BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , V , ae , W , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"O = ( bV * vec4 ( O , 1.0 ) ) . xyz ; ao = ( bV * vec4 ( ao , 1.0 ) ) . xyz ; aq = ( bV * vec4 ( aq , 1.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , bV ) ;".split(" ")}]}}]},{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO",
"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bT = u_camera_eye - aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"bU = aw . aQ ;".split(" ")}]}},{a:"elif",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bU","=","a_color",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 bY = bV * vec4 ( aw . O , 1.0 ) ; bY . xyz = ap ( N , bY . xyz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"txt",b:"vec4 f = u_proj_matrix * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:["J","(",")",";"]}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["main_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},
{a:"var",c:"TEXTURE_SPEC_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"TEXTURE_COLOR0_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"TEXTURE_COLOR1_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_PLANE"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"TEXTURE_SPEC",b:["0"]},{a:"var",c:"ALPHA_AS_SPEC",b:["0"]},{a:"var",
c:"TEXTURE_STENCIL_ALPHA_MASK",b:["0"]},{a:"var",c:"TEXTURE_STENCIL_ALPHA_MASK_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",
b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"PARALLAX_LOD_DIST",b:["5.0"]},{a:"var",c:"PARALLAX_STEPS",b:["5.0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",F:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT",
"SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_colormap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC","ALPHA_AS_SPEC",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_specmap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap1 ; uniform sampler2D u_stencil0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",
";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},
{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform float u_specular_alpha ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_diffuse_color_factor ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_specular_color_factor",";"]}]}}]},{a:"txt",b:"uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_parallax_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bT",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"shadow.glslf"}]}}]},{a:"include",F:"mirror.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"include",F:"environment.glslf"},{a:"cond",f:[{a:"if",
j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"lighting_nodes.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float bN = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["vec2","b_","=","A",";"]}]}}]},{a:"txt",b:"vec3 ca = normalize ( j ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"ca = ca ; else ca = - ca ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( ca , k . xyz ) * k . w ; mat3 cb = mat3 ( k . xyz , W , ca ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["mat3","N","=","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"vec2 cc = normalize ( _ ( N , j ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( bN < PARALLAX_LOD_DIST ) { float cd = clamp ( 0.5 * ( PARALLAX_LOD_DIST - bN ) , 0.0 , 1.0 ) ; float ce = u_parallax_scale * cd ; vec3 cf = normalize ( bT * cb ) ; float cg = 1.0 / PARALLAX_STEPS ; vec2 ch = cf . xy * ce / ( PARALLAX_STEPS * cf . z ) ; float ci = 1.0 ; float cj ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec2","ck","=","cc",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:["vec2","ck","=","b_",";"]}]}}]},{a:"txt",b:"cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; for ( float cl = 1.0 ; cl <= PARALLAX_STEPS ; cl ++ ) { if ( cj < ci ) { ci -= cg ; ck -= ch ; cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; } } vec2 cm = ck + ch ; float cn = GLSL_TEXTURE ( u_normalmap0 , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; ck = cp * cm + ( 1.0 - cp ) * ck ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"b_ += ck - cc ;".split(" ")}]}}]},{a:"txt",b:["cc","=","ck",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"cc += ck - b_ ;".split(" ")}]}}]},{a:"txt",b:["b_","=","ck",";"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","cq",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO",
"TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cq = GLSL_TEXTURE ( u_normalmap0 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cq = GLSL_TEXTURE ( u_normalmap0 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cr = cq . rgb - 0.5 ; cr = mix ( vec3 ( 0.0 , 0.0 , 1.0 ) , cr , u_normal_factor ) ; vec3 U = cb * cr ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","ca",";"]}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],
l:{a:"grp",f:[{a:"txt",b:"cc = normalize ( _ ( N , U ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cs = bU ; bC ( cs ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 ct = vec4 ( cs , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",
f:[{a:"txt",b:["vec4","ct","=","u_diffuse_color",";"]}]}}]},{a:"txt",b:["float","cu","=","1.0",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , cc ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , b_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",
{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bC ( cv . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:["vec4","cw",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cw = GLSL_TEXTURE ( u_colormap1 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cw = GLSL_TEXTURE ( u_colormap1 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"bC ( cw . rgb ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"cv = mix ( cv , cw , cx . r ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ; float M = u_alpha_factor * cv . a ; M += ( 1.0 - step ( 0.0 , M ) ) ; ct . a = mix ( M , 1.0 , u_diffuse_color . a ) ; cu = cv . a ;".split(" ")}]}},
{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ; ct . a = cv . a ; cu = cv . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS"],l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ct . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec4 bP = cC ( cy ) ; vec3 cD = u_emit * ct . rgb ; vec3 cE = u_specular_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_AS_SPEC"],l:{a:"grp",f:[{a:"txt",b:"vec3 cF = vec3 ( cu ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , cc ) . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , b_ ) . rgb ;".split(" ")}]}}]},{a:"txt",b:"bC ( cF . rgb ) ; cE = mix ( cE , cF , u_specular_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * cE ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , bP , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_reflect_factor , N ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_reflect_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_mirror_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["aQ","+=","cJ",";"]}]}}]},{a:"txt",b:"float L = ct . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float t = max ( max ( cJ . r , cJ . g ) , cJ . b ) * u_specular_alpha ; L = ct . a * ( 1.0 - t ) + t ;".split(" ")}]}}]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 cM = - ( _ ( N , U ) ) . xy ; aQ = mix ( cN ( l , cM * u_refr_bump ) , aQ , L ) ; L = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["node_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",F:"nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_GEOMETRY_NO","USE_NODE_GEOMETRY_GL","USE_NODE_GEOMETRY_IN","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB","USE_NODE_TEX_COORD_NO","USE_NODE_B4W_REFLECT_WORLD",{a:"logical_or_expr",
o:9}],l:{a:"grp",f:[{a:"txt",b:"vec3 D = - normalize ( bp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","D",";"]}]}}]},{a:"txt",b:"vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; E = max ( vec3 ( 0.0 ) , E ) ; aW ( E ) ; GLSL_OUT_FRAG_COLOR = vec4 ( E , _1_0 ) ; }".split(" ")}]};a["particle_system.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",
c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},
{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES",
"NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform float u_time ; uniform vec3 u_camera_eye_frag ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",
{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"include",F:"math.glslv"},{a:"include",F:"particles_nodes.glslf"},{a:"txt",b:"void main ( ) { vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["particle_system.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",
b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",
c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN vec3 a_p_data ; GLSL_IN vec4 a_p_vels ; GLSL_IN vec2 a_p_bb_vertex ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","cU",";"]}]}}]},{a:"txt",b:["GLSL_OUT",
"vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},
{a:"txt",b:["GLSL_OUT","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bT",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bf",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","j",";"]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_p_color_ramp [ COLOR_RAMP_LENGTH ] ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_time ; uniform float u_p_length ; uniform int u_p_cyclic ; uniform float u_p_fade_in ; uniform float u_p_fade_out ; uniform float u_p_nfactor ; uniform float u_p_gravity ; uniform float u_p_mass ; uniform float u_p_wind_fac ; uniform float u_p_max_lifetime ; uniform float u_p_tilt ; uniform float u_p_tilt_rand ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_wind ; uniform float u_p_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["WORLD_SPACE",{a:"logic_negative_expr",o:1},"NODES","HALO_PARTICLES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"particles.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",F:"particles_nodes.glslv"}]}}]},{a:"txt",b:"float cX ( vec2 cV , vec2 cW ) { return ( atan ( cW . y , cW . x ) - atan ( cV . y , cV . x ) ) ; } void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; cY pp ; pp = cZ ( ) ; float c_ ; mat3 bk = da ( ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 db = ( bV * vec4 ( pp . O , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 db = pp . O ;".split(" ")}]}}]},
{a:"txt",b:"vec3 U = vec3 ( 0.0 , - 1.0 , 0.0 ) ; if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_VIEW ) { c_ = pp . bK ; bk = bj ( db , N ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_XY ) { c_ = cX ( vec2 ( EPSILON , 1.0 ) , vec2 ( U . x , - U . y ) ) + pp . bK ; bk [ 0 ] = db ; vec4 dc = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ; bk = dd ( dc , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_YZ ) { c_ = pp . bK ; bk [ 0 ] = db ; vec4 de = X ( UP_VECTOR , M_PI / 2.0 ) ; bk = dd ( de , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_ZX ) { c_ = pp . bK ; bk [ 0 ] = db ; } vec3 bn = vec3 ( ( a_p_bb_vertex [ 0 ] * 2.0 - 1.0 ) * pp . df * u_p_size , 0.0 , ( a_p_bb_vertex [ 1 ] * 2.0 - 1.0 ) * pp . df * u_p_size ) ; float dg = a_p_data [ 2 ] ; float dh = u_p_tilt * u_p_tilt_rand * ( 2.0 * dg - 1.0 ) ; float di = ( dh + u_p_tilt ) * M_PI ; vec4 dj = X ( TOWARD_VECTOR , di + c_ ) ; vec3 bo = ap ( bk , T ( dj , bn ) ) ; vec4 bY = vec4 ( ap ( N , bo ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["bf","=","dg",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 dk = da ( ) ; dj = X ( TOWARD_VECTOR , c_ ) ; dk = dd ( dj , dk ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",
o:2},{a:"logical_and_expr",o:2},"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 W = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , V , vec3 ( 0.0 ) , W , U , aY ( bk , dk ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",
"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"txt",b:"J ( pp . O , pp . dl , pp . dm , pp . dn , pp . df , a_p_bb_vertex , a_p_data [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , aY ( bk , dk ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["A","=","a_p_bb_vertex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"A = a_p_bb_vertex * 2.0 - 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cU = pp . L ;".split(" ")}]}}]},{a:"txt",b:"bU = pp . aQ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",
o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"txt",b:"gl_Position = f ; h = bo ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bT = u_camera_eye - bo ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["particle_system_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_sampler",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_diffuse_color_factor",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_emit ; uniform float u_ambient ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_size ; uniform vec3 u_halo_rings_color ; uniform float u_halo_hardness ; uniform vec3 u_halo_lines_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_alpha_start ; uniform float u_p_alpha_end ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",
";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","cU",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec3","bT",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bf",";"]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",
b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",F:"lighting_nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"include",F:"halo_color.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",
j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"vec4 bi = bh ( ) ; vec3 aQ = bi . rgb * bU ; float dp = 0.9 * length ( A ) ; float dq = smoothstep ( u_p_alpha_start , u_p_alpha_end , dp ) ; float L = bi . a * ( 1.0 - dq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4",
"ct","=","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_sampler , A ) ; bC ( cv . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"ct . a = cv . a ;".split(" ")}]}}]},{a:"txt",b:"ct . rgb *= bU ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cD = u_emit * ct . rgb ; vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logic_negative_expr",o:1},"SKY_COLOR",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 cA = u_environment_energy * cz ( vec3 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cA = u_environment_energy * cz ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cB = u_ambient * cA ; float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ct . rgb ;".split(" ")}]}}]},{a:"txt",
b:"float L = ct . a * cU ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["proc_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform vec3 u_sky_color ; uniform vec3 u_sun_direction ; uniform float u_rayleigh_brightness ; uniform float u_mie_brightness ; uniform float u_spot_brightness ; uniform float u_scatter_strength ; uniform float u_rayleigh_strength ; uniform float u_mie_strength ; uniform float u_rayleigh_collection_power ; uniform float u_mie_collection_power ; uniform float u_mie_distribution ; GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float dr = 0.99 ; const float ds = 1.8 ; const int dt = 8 ; float dy ( vec3 O , vec3 bD ) { float a = dot ( bD , bD ) ; float b = 2.0 * dot ( bD , O ) ; float du = dot ( O , O ) - 1.0 ; float dv = b * b - 4.0 * a * du ; float dw = sqrt ( dv ) ; float q = ( - b - dw ) / 2.0 ; float dx = du / q ; return dx ; } float dA ( float L , float g ) { float a = 3.0 * ( 1.0 - g * g ) ; float b = 2.0 * ( 2.0 + g * g ) ; float du = 1.0 + L * L ; float dz = pow ( 1.0 + g * g - 2.0 * g * L , 1.5 ) ; dz = max ( dz , 0.00001 ) ; return ( a / b ) * ( du / dz ) ; } float dF ( vec3 O , vec3 bD , float dB ) { float dC = dot ( bD , - O ) ; if ( dC < 0.0 ) { return 1.0 ; } vec3 dD = O + dC * bD ; if ( length ( dD ) < dB ) { return 0.0 ; } else if ( length ( dD ) >= dB ) { vec3 cW = normalize ( dD ) * dB - O ; float dE = acos ( dot ( normalize ( cW ) , bD ) ) ; return smoothstep ( 0.0 , 1.0 , pow ( dE * 2.0 , 3.0 ) ) ; } else return 1.0 ; } vec3 dG ( float aM , vec3 aQ , float aL ) { return aQ - aQ * pow ( u_sky_color , vec3 ( aL / aM ) ) ; } void main ( ) { vec3 bq = normalize ( bp ) ; vec3 dH = u_sun_direction ; float L = dot ( bq , dH ) ; float dI = dA ( L , - 0.01 ) * u_rayleigh_brightness * dH . z ; float dJ = dA ( L - 0.5 , u_mie_distribution ) * u_mie_brightness * ( 1.0 - dH . z ) ; float dK = smoothstep ( 0.0 , 100.0 , dA ( L , 0.9995 ) ) * u_spot_brightness ; vec3 dL = vec3 ( 0.0 , 0.0 , dr ) ; float dM = dy ( dL , bq ) ; float dN = dM / float ( dt ) ; float dO = dF ( dL , bq , dr - 0.3 ) ; vec3 dP = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 dQ = vec3 ( 0.0 , 0.0 , 0.0 ) ; for ( int cl = 0 ; cl < dt ; cl ++ ) { float dR = dN * float ( cl ) ; vec3 O = dL + bq * dR ; float dS = dF ( O , dH , dr - 0.2 ) ; float dT = dy ( O , dH ) ; vec3 dU = dG ( dT , vec3 ( ds ) , u_scatter_strength ) * dS ; dP += dG ( sqrt ( dR ) , u_sky_color * dU , u_rayleigh_strength ) ; dQ += dG ( dR , dU , u_mie_strength ) ; } dP = dP * dO * pow ( dM , u_rayleigh_collection_power ) / float ( dt ) ; dQ = ( dQ * dO * pow ( dM , u_mie_collection_power ) ) / float ( dt ) ; vec3 aQ = vec3 ( dK * dQ + dJ * dQ + dI * dP ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , 1.0 ) ; }".split(" ")}]};
a["r_convolution_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform samplerCube u_sky_reflection ; uniform float u_roughness ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } void main ( ) { vec3 ei = vec3 ( 0.0 ) ; if ( u_roughness != 0.0 ) { vec3 d_ = normalize ( bp ) ; vec3 ej = d_ ; vec3 ek = ej ; const int el = 1024 ; float em = 0.0 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , u_roughness ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; if ( eo > 0.0 ) { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , en ) . rgb ; bC ( bs ) ; ei += bs * eo ; em += eo ; } } ei = ei / em ; } else { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , normalize ( bp ) ) . rgb ; bC ( bs ) ; ei = bs ; } GLSL_OUT_FRAG_COLOR = vec4 ( ei , 1.0 ) ; }".split(" ")}]};
a["shadow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",
b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_VALUES",
b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"},{a:"include",F:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE",
"CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap0 ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW",
"u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE",
"SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2",
"NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"include",F:"shadow.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",
b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float L = ( GLSL_TEXTURE ( u_colormap0 , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"txt",b:"if ( L < 0.5 ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","NO_SHADOWS",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"txt",b:"float eq = ep ( - i . z , u_camera_range ) ; GLSL_OUT_FRAG_COLOR = er ( eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = es ( i . z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR . a *= clamp ( k . r , 0.999999999 , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["shadow.glslv"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",
b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"HAIR_BILLBOARD",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",
b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP",
"CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",
j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4",
"i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3",
"NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",
";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",F:"dynamic_grass.glslv"},{a:"include",F:"shadow.glslv"},{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO",
"USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; vec3 U = bW ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=",
"a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HAIR_BILLBOARD",{a:"logic_negative_expr",o:1},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat3","et","=","u_shadow_cast_billboard_view_tsr",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","et","=","N",";"]}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , et , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ay","=","bW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["J","(",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eu = ( u_proj_matrix * vec4 ( N [ 0 ] , 1.0 ) ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; f . xy += eu ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["sky.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",
c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:["uniform","samplerCube","u_sky",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS",
"REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_camera_eye_frag ; uniform vec4 u_underwater_fog_color_density ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND","WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER","WO_SKYTEX",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"include",F:"sky_blending.glslf"}]}}]},{a:"txt",b:["GLSL_IN","vec3","bp",";"]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 bs ; vec3 bq = normalize ( bp ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","ew","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"ew = abs ( A . y ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ew = ( A . y + 1.0 ) * 0.5 ;".split(" ")}]}}]},{a:"txt",b:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec3 ez = vec3 ( A , 0.0 ) ; vec4 eA = GLSL_TEXTURE_CUBE ( u_sky , bq ) ; bC ( eA . rgb ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = GLSL_TEXTURE_CUBE ( u_sky , bq ) . rgb ; bC ( bs ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float eC = WATER_LEVEL - u_camera_eye_frag . z ; vec3 eD = vec3 ( 0.0 ) ; vec3 eE = mix ( u_underwater_fog_color_density . rgb , eD , min ( - bq . z , 1.0 ) ) ; eE *= min ( 1.0 - min ( 0.03 * eC , 0.8 ) , 1.0 ) ; float aL = clamp ( sign ( 0.01 * eC - bq . z ) , 0.0 , 1.0 ) ; bs = mix ( bs , eE , aL ) ;".split(" ")}]}}]},
{a:"txt",b:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};a["sky.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform mat4 u_sky_vp_inverse ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",
o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ; vec4 bq = u_sky_vp_inverse * O ; bp = bq . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};
a["skybox.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform mat4 u_cube_view_matrix ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",
";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.999999 , 1.0 ) ; vec4 bq = u_cube_view_matrix * O ; bp = bq . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};a["tex_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",
b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"include",F:"sky_blending.glslf"}]}}]},{a:"txt",b:"void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; float ew = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYPAPER"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"bs = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) . xyz ; bC ( bs ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"float L = acos ( bq . z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"ew = abs ( L * INV_PI - 0.5 ) * 2.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ew = 1.0 - L * INV_PI ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec4 eA = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) ; bC ( eA . rgb ) ; vec3 ez = vec3 ( bp . xy , 0.0 ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bs","=","ex",";"]}]}}]}]}}]}]}}]},{a:"txt",b:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};a["water.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",
b:["0"]},{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"ABSORB",b:["6.0"]},{a:"var",c:"SSS_STRENGTH",b:["1.0"]},{a:"var",c:"SSS_WIDTH",b:["0.45"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",
c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.002"]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",
f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_cam_water_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_foam",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ; uniform vec3 u_shallow_water_col ; uniform vec3 u_shore_water_col ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"uniform float u_water_norm_uv_velocity ; uniform vec2 u_normalmap0_scale ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap1_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap2_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_water_shallow_col_fac ; uniform float u_water_shore_col_fac ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_foam_factor ; uniform vec2 u_foam_uv_freq ; uniform vec2 u_foam_mag ; uniform vec2 u_foam_scale ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"const float aE = 1.0 ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec3 bT ; GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 k ; GLSL_IN vec3 eF ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","eG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","eH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",
o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",F:"environment.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:3}],l:{a:"grp",
f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:"vec3 eP ( in vec2 eI , in vec3 U , in vec3 eJ , in vec3 eK , out float eL , in float eM ) { eL = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eN = eI . xy + U . xy * REFL_BUMP / m ; eL = u_reflect_factor ; vec3 eO ; if ( u_cam_water_depth < 0.0 ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eO = u_underwater_fog_color_density . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"eO = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"txt",b:"} else { eO = GLSL_TEXTURE ( u_plane_reflection , eN ) . rgb ; bC ( eO ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eL = u_mirror_factor ; vec3 eO = eK * GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . rgb ; bC ( eO ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"eL = u_reflect_factor ; vec3 eO = eK * vec3 ( 0.3 , 0.5 , 1.0 ) ; bC ( eO ) ;".split(" ")}]}}]},{a:"txt",b:"eL = min ( eL * eM , 1.0 ) ; return eO ; }".split(" ")},{a:"include",F:"lighting_nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 cb = mat3 ( k , eF , j ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC",
"FOAM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float bO = h . z ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = vec2 ( eG . x , - eG . y ) + 0.5 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = vec2 ( h . x , - h . y ) + 0.5 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec2","b_","=","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eQ = vec3 ( 0.0 ) ; eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap0_scale + vec2 ( 0.3 , 0.5 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap1_scale + vec2 ( - 0.3 , 0.7 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap2_scale + vec2 ( 0.0 , 1.1 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap3_scale + vec2 ( - 0.66 , - 0.3 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( cb * eQ ) , 0.3 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( cb * eQ ) , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eI = l . xy / l . z ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 eI = vec2 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 eR = eI + U . xy * u_refr_bump / m ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = max ( cR - m , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"float eT = eS ( cR , eR , eI ) ; float eU = max ( eT - m , 0.0 ) ; float eV = u_view_max_depth / ABSORB * eU ; float eW = min ( L * eV , 1.0 ) ; L = min ( 15.0 * L * u_view_max_depth * cS , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float cT = u_view_max_depth / ABSORB * cS ; if ( u_cam_water_depth > 0.0 ) L = min ( L * cT , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["float","eW","=","L",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"if ( u_cam_water_depth < 0.0 ) eW = 0.0 ; vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float eY = pow ( min ( eH . b / u_water_shallow_col_fac , 1.0 ) , 0.3 ) ; vec3 ct = mix ( u_shallow_water_col , u_diffuse_color . rgb , eY ) ; eY = pow ( min ( eH . b / u_water_shore_col_fac , 1.0 ) , 0.3 ) ; ct = mix ( u_shore_water_col , ct , eY ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ct = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float eZ = max ( 1.0 - u_view_max_depth * cS , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float eZ = 1.0 - L ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float e_ = max ( bO / WAVES_HEIGHT + 0.1 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],
l:{a:"grp",f:[{a:"txt",b:"vec3 fa = normalize ( vec3 ( eH . rg , 0.0 ) ) ; vec3 fb = normalize ( mix ( UP_VECTOR , fa , 0.8 ) ) ; float fc = 1.25 * max ( dot ( U , fb ) - 0.2 , 0.0 ) ; fc += max ( dot ( U , - UP_VECTOR ) , 0.0 ) ; eZ += fc * ( 1.0 - eH . b ) ; e_ *= ( 1.0 - 0.95 * pow ( eH . b , 0.1 ) ) ;".split(" ")}]}}]},{a:"txt",b:"eZ += e_ ; eZ = min ( u_foam_factor * eZ , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 fd = GLSL_TEXTURE ( u_foam , u_foam_mag * sin ( u_foam_uv_freq * u_time ) + b_ * u_foam_scale ) ;".split(" ")}]}}]},
{a:"txt",b:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec3 eK = cB + u_sun_intensity ; float eL ; vec3 eJ = reflect ( - D , U ) ; vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float fh = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; vec3 eO = eP ( eI , U , eJ , eK , eL , fh ) ; vec3 cy = u_diffuse_intensity * ct ; vec3 aQ ; vec3 cJ ; cK ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fi = max ( dot ( u_sun_direction , - j ) + SSS_WIDTH , 0.0 ) * max ( dot ( - D , u_sun_direction ) - 0.5 , 0.0 ) * max ( 0.0 , length ( u_sun_intensity ) - 0.1 ) ; fi = clamp ( SSS_STRENGTH * fi , 0.0 , 1.0 ) ; aQ = mix ( aQ , u_shallow_water_col , fi ) ; aQ = mix ( aQ , u_shore_water_col , fi ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"aQ = mix ( eX , aQ , eW ) ;".split(" ")}]}}]},{a:"txt",
b:"aQ = mix ( aQ , eO , eL ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"float fj = mix ( fd . g , fd . r , max ( 4.0 * ( eZ - 0.75 ) , 0.0 ) ) ; fj = mix ( fd . b , fj , max ( 2.0 * eZ - 1.0 , 0.0 ) ) ; fj = mix ( 0.0 , fj , eZ ) ; aQ = mix ( aQ , eK , fj ) ;".split(" ")}]}}]},{a:"txt",b:["aQ","+=","cJ",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float fk = m * u_view_max_depth ; float fl = 1.0 ; if ( u_cam_water_depth > 1.0 ) fl = 2.0 ; bR ( aQ , fk , D , fl ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"L = max ( L , cJ . r ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["L","+=","fj",";"]}]}}]}]}},{a:"elif",j:["SHORE_SMOOTHING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME",
1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; float fm = min ( min ( aO . x , aO . y ) , aO . z ) ; fm = clamp ( fm , 0.0 , 1.0 ) ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}},{a:"elif",j:["DEBUG_WIREFRAME",2,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; float fm = 1.0 ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) fm = 0.0 ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["water.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",b:["0"]},
{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"MAX_SHORE_DIST",b:["100.0"]},{a:"var",c:"SHORE_MAP_SIZE_X",b:["1.0"]},{a:"var",c:"SHORE_MAP_SIZE_Y",b:["1.0"]},{a:"var",c:"SHORE_MAP_CENTER_X",b:["0.0"]},{a:"var",c:"SHORE_MAP_CENTER_Y",b:["0.0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"DST_NOISE_SCALE_0",b:["0.05"]},{a:"var",c:"DST_NOISE_SCALE_1",b:["0.03"]},{a:"var",c:"DST_NOISE_FREQ_0",b:["1.3"]},{a:"var",c:"DST_NOISE_FREQ_1",b:["1.0"]},{a:"var",c:"DIR_MIN_SHR_FAC",
b:["0.4"]},{a:"var",c:"DIR_FREQ",b:["0.5"]},{a:"var",c:"DIR_NOISE_SCALE",b:["0.05"]},{a:"var",c:"DIR_NOISE_FREQ",b:["0.07"]},{a:"var",c:"DIR_MIN_NOISE_FAC",b:["0.5"]},{a:"var",c:"DST_MIN_FAC",b:["0.2"]},{a:"var",c:"WAVES_HOR_FAC",b:["5.0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WAVES_LENGTH",b:["10.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",
c:"REFRACTIVE",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"procedural.glslf"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"DYNAMIC",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec4","a_tbn",";"]}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_polyindex",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec3 bT ; GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 k ; GLSL_OUT vec3 eF ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3",
"eG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","eH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_camera_eye ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION float u_time ; uniform vec3 u_wind ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shore_dist_map",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 ft ( in vec2 fn ) { vec2 fo = 0.5 + vec2 ( ( fn . x - SHORE_MAP_CENTER_X ) / SHORE_MAP_SIZE_X , ( fn . y - SHORE_MAP_CENTER_Y ) / SHORE_MAP_SIZE_Y ) ; vec4 fp = GLSL_TEXTURE ( u_shore_dist_map , fo ) ; const vec2 fq = vec2 ( 1.0 / 255.0 , 1.0 ) ; float fr = dot ( fp . ba , fq ) ; vec2 fs = normalize ( fp . rg * 2.0 - 1.0 ) ; return vec3 ( fs , fr ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",
f:[{a:"define",c:"SMALL_WAVES_FAC",b:["0.2"]},{a:"txt",b:"void fI ( inout vec3 fn , in float fu , in vec3 fp ) { float fw = fv ( DST_NOISE_SCALE_0 * ( fn . xy + DST_NOISE_FREQ_0 * fu ) ) * fv ( DST_NOISE_SCALE_1 * ( fn . yx - DST_NOISE_FREQ_1 * fu ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float fx = WAVES_LENGTH / MAX_SHORE_DIST / M_PI ; float fr = fp . b ; float fy = sqrt ( fr ) ; float fz = max ( fr , DIR_MIN_SHR_FAC ) * sin ( fy / fx + DIR_FREQ * fu ) ; float fA = max ( fv ( DIR_NOISE_SCALE * ( fn . xy + DIR_NOISE_FREQ * fu ) ) , DIR_MIN_NOISE_FAC ) ; fz *= fA ; float fB = WAVES_HEIGHT * mix ( fz , fw , max ( fy , DST_MIN_FAC ) ) ; vec2 fs = fp . rg ; float fC = WAVES_HOR_FAC * fz * max ( MAX_SHORE_DIST / 35.0 * ( 0.05 - fr ) , 0.0 ) ; vec2 fD = fC * fs ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float fB = WAVES_HEIGHT * fw ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec2 fE = 1.0 * ( fn . xy - 0.3 * fu ) ; vec2 fF = 0.7 * ( fn . yx + 0.07 * fu ) ; float fH = fG ( fE ) . x + fG ( fF ) . x - 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"fn . xy += fD ; fH *= fr ;".split(" ")}]}}]},{a:"txt",b:"fB += SMALL_WAVES_FAC * fH ;".split(" ")}]}}]},{a:"txt",b:"fn . z += fB ; }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec3 O = a_position ; float fJ = abs ( O . z ) ; vec2 fK = u_camera_eye . xy - mod ( u_camera_eye . xy , fJ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],
l:{a:"grp",f:[{a:"txt",b:"O . z = WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O . z = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"O . xy += fK ; vec3 bX = O ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","a_texcoord",";"]}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , u_model_tsr ) ; vec3 bX = aw . O ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"eH = ft ( bX . xy ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fL = length ( u_wind ) ; if ( fL == 0.0 ) fL = 1.0 ; float fM = u_time ; fM *= fL ;".split(" ")},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"float fN = fJ ; vec3 fO = bX + vec3 ( fN , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , fN , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["eG","=","bX",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fO = bX + vec3 ( 0.05 , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , 0.05 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 fQ = ft ( fO . xy ) ; vec3 fR = ft ( fP . xy ) ; fI ( fO , fM , fQ ) ; fI ( fP , fM , fR ) ; fI ( bX , fM , eH ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"fI ( fO , fM , vec3 ( 0.0 ) ) ; fI ( fP , fM , vec3 ( 0.0 ) ) ; fI ( bX , fM , vec3 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["GENERATED_MESH","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( a_position . z < 0.0 ) { bX . z = WATER_LEVEL - 1.0 ; fO . z = bX . z ; fP . z = bX . z ; }".split(" ")}]}}]},{a:"txt",b:"vec3 eg = normalize ( fO - bX ) ; vec3 V = normalize ( fP - bX ) ; j = normalize ( cross ( eg , V ) ) ; float fS = dot ( j , UP_VECTOR ) ; float aL = clamp ( 0.8 - fS , 0.0 , 1.0 ) ; j = mix ( j , UP_VECTOR , aL ) ;".split(" ")}]}},{a:"elif",j:["GENERATED_MESH",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:"vec4 S = R ( a_tbn ) ; j = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"j = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ;".split(" ")}]}},
{a:"elif",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"k = V ; eF = cross ( j , k ) ;".split(" ")}]}}]},{a:"txt",b:"h = bX ; bT = u_camera_eye - bX ; vec4 bY = vec4 ( ap ( u_view_tsr , bX ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float fT = f . x ; float fU = f . y ; float fV = f . w ; l . x = ( fT + fV ) / 2.0 ; l . y = ( fU + fV ) / 2.0 ; l . z = fV ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["postprocessing/antialiasing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_FXAA_LIGHT"]},{a:"var",c:"AA_QUALITY",b:["AA_QUALITY_LOW"]},{a:"include",F:"precision_statement.glslf"},
{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_REDUCE_MIN",b:["(","1.0","/","128.0",")"]},{a:"define",c:"FXAA_REDUCE_MUL",b:["(","1.0","/","8.0",")"]},{a:"define",c:"FXAA_SPAN_MAX",b:["8.0"]},{a:"txt",b:"vec4 fX ( float x , float y ) { vec2 fW = A + vec2 ( x , y ) * u_texel_size ; return GLSL_TEXTURE ( u_color , fW ) ; } vec4 gt ( ) { vec4 fY = fX ( - 1.0 , - 1.0 ) ; vec4 fZ = fX ( 1.0 , - 1.0 ) ; vec4 f_ = fX ( - 1.0 , 1.0 ) ; vec4 gc = fX ( 1.0 , 1.0 ) ; vec4 gd = fX ( 0.0 , 0.0 ) ; float gf = ge ( gd ) ; float gh = ge ( fY ) ; float gi = ge ( fZ ) ; float gj = ge ( f_ ) ; float gk = ge ( gc ) ; float gl = min ( gf , min ( min ( gh , gi ) , min ( gj , gk ) ) ) ; float gm = max ( gf , max ( max ( gh , gi ) , max ( gj , gk ) ) ) ; vec2 bD ; bD . x = - ( ( gh + gi ) - ( gj + gk ) ) ; bD . y = ( ( gh + gj ) - ( gi + gk ) ) ; float gn = max ( ( gh + gi + gj + gk ) * ( 0.25 * FXAA_REDUCE_MUL ) , FXAA_REDUCE_MIN ) ; float go = 1.0 / ( min ( abs ( bD . x ) , abs ( bD . y ) ) + gn ) ; bD = min ( vec2 ( FXAA_SPAN_MAX , FXAA_SPAN_MAX ) , max ( vec2 ( - FXAA_SPAN_MAX , - FXAA_SPAN_MAX ) , bD * go ) ) * u_texel_size ; vec4 gp = 0.5 * ( GLSL_TEXTURE ( u_color , A + bD * ( 1.0 / 3.0 - 0.5 ) ) + GLSL_TEXTURE ( u_color , A + bD * ( 2.0 / 3.0 - 0.5 ) ) ) ; vec4 gq = gp * 0.5 + 0.25 * ( GLSL_TEXTURE ( u_color , A + bD * - 0.5 ) + GLSL_TEXTURE ( u_color , A + bD * 0.5 ) ) ; float gs = ge ( gq ) ; if ( ( gs < gl ) || ( gs > gm ) ) return gp ; else return gq ; }".split(" ")}]}},
{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["1"]},{a:"include",F:"fxaa.glslf"},{a:"cond",f:[{a:"if",j:["AA_QUALITY","AA_QUALITY_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["39"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["1.00"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.063"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0312"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_MEDIUM",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["20"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.65"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0625"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.50"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",
b:["0.0833"]}]}}]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = gt ( ) ;".split(" ")}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 gu = u_texel_size ; GLSL_OUT_FRAG_COLOR = gv ( A , u_color , gu , FXAA_QUALITY_SUBPIX , FXAA_QUALITY_EDGE_THRESHOLD , FXAA_QUALITY_EDGE_THRESHOLD_MIN ) ;".split(" ")}]}}]},{a:"txt",
b:["}"]}]};a["postprocessing/bloom_combine.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"BLUR_PASS_NUM",b:["BLUR_PASS_5"]},{a:"txt",b:["uniform","sampler2D","u_main",";"]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_bloom_level_1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_3",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_4",";"]}]}}]},
{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_main , A ) ; vec4 gx = vec4 ( 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_0 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_1 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_2 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_3 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_4 , A ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = gw + gx ; }".split(" ")}]};
a["postprocessing/coc.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"COC_TYPE",b:["COC_ALL"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_coc_fg",";"]}]}}]},{a:"txt",b:"uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_start ; uniform float u_dof_front_end ; uniform float u_dof_rear_start ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; if ( u_dof_dist > 0.0 ) { float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gz = 0.0 ;".split(" ")},{a:"cond",
f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 gA = GLSL_TEXTURE ( u_coc_fg , A ) ; float gB = gA . a ;".split(" ")}]}}]},{a:"txt",b:"if ( eq < u_dof_dist ) gz = ( u_dof_dist - eq - u_dof_front_start ) / ( u_dof_front_end - u_dof_front_start ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"else gz = ( eq - u_dof_dist - u_dof_rear_start ) / ( u_dof_rear_end - u_dof_rear_start ) ;".split(" ")}]}}]},
{a:"txt",b:"gz = clamp ( gz , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gz = max ( gz , gB ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz * gz , gz ) ;".split(" ")}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz , 0.0 ) ; }".split(" ")}]};
a["postprocessing/compositing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform float u_brightness ; uniform float u_contrast ; uniform float u_exposure ; uniform float u_saturation ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gC = GLSL_TEXTURE ( u_color , A ) ; vec3 aQ = gC . rgb ; if ( u_brightness < 0.0 ) aQ = aQ * ( 1.0 + u_brightness ) ; else aQ = aQ + ( ( 1.0 - aQ ) * u_brightness ) ; aQ = ( aQ - 0.5 ) * ( tan ( ( u_contrast + 1.0 ) * M_PI_4 ) ) + 0.5 ; aQ *= u_exposure ; float ds = ge ( vec4 ( aQ , 0.0 ) ) ; aQ = mix ( vec3 ( ds ) , aQ , u_saturation ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , gC . a ) ; }".split(" ")}]};
a["postprocessing/depth_pack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = er ( clamp ( gy ( u_depth , A , u_camera_range ) , 0.0 , 0.999999 ) ) ; }".split(" ")}]};
a["postprocessing/dof.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DOF_TYPE",b:["DOF_SIMPLE"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform highp sampler2D u_sharp ; uniform highp sampler2D u_blurred1 ; uniform highp sampler2D u_blurred2 ; uniform float u_dof_dist ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_sharp ; uniform sampler2D u_blurred ; uniform sampler2D u_depth ; uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_end ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gD = GLSL_TEXTURE ( u_sharp , A ) ; if ( u_dof_dist > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",
j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float gz ; vec4 gE = GLSL_TEXTURE ( u_blurred1 , A ) ; vec4 gF = GLSL_TEXTURE ( u_blurred2 , A ) ; vec4 gG = min ( gE . rgba , gF . rgba ) ; gz = gG . a ; if ( gz > 0.0 ) { gG = vec4 ( gG . rgb / gz , gD . a ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gG , min ( gz * 5.0 , 1.0 ) ) ; } else GLSL_OUT_FRAG_COLOR = gD ;".split(" ")}]}},{a:"elif",j:["DOF_TYPE","DOF_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gH ; if ( eq < u_dof_dist ) gH = ( u_dof_dist - eq ) / u_dof_front_end ; else gH = ( eq - u_dof_dist ) / u_dof_rear_end ; gH = clamp ( gH , 0.0 , 1.0 ) ; vec4 gI = GLSL_TEXTURE ( u_blurred , A ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gI , gH ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","gD",";"]}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = gD ; }".split(" ")}]};a["postprocessing/glow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_src_color ; uniform sampler2D u_glow_mask_small ; uniform sampler2D u_glow_mask_large ; uniform float u_glow_mask_small_coeff ; uniform float u_glow_mask_large_coeff ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gJ = GLSL_TEXTURE ( u_src_color , A ) ; vec4 gK = GLSL_TEXTURE ( u_glow_mask_small , A ) ; vec4 gL = GLSL_TEXTURE ( u_glow_mask_large , A ) ; GLSL_OUT_FRAG_COLOR = gJ ; if ( gL . a != 0.0 ) { float gM = u_glow_mask_large_coeff * gL . a ; gM = clamp ( gM , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gL . rgb / gL . a , gM ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gM ) ; } if ( gK . a != 0.0 ) { float gN = u_glow_mask_small_coeff * gK . a ; gN = clamp ( gN , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gK . rgb / gK . a , gN ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gN ) ; } }".split(" ")}]};
a["postprocessing/god_rays.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"STEPS_PER_PASS",b:["10.0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"include",F:"procedural.glslf"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform float u_time ; uniform float u_radial_blur_step ; uniform sampler2D u_input ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN float gO ; GLSL_IN vec2 gP ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN vec4 gQ ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec2 cS = ( gQ . xy - A ) ; float aM = length ( cS ) ; vec2 gR = u_radial_blur_step * cS / aM ; float gS = aM / u_radial_blur_step ; gR *= min ( gS , STEPS_PER_PASS ) / STEPS_PER_PASS ; gS = max ( gS , STEPS_PER_PASS ) ; vec2 gT = A ; float gU = 0.0 ; const int gV = int ( STEPS_PER_PASS ) ; int gW = int ( gS + 0.5 ) ; for ( int cl = 0 ; cl < gV ; cl += 1 ) { if ( cl <= gW ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:"float eq = gy ( u_input , gT , u_camera_range ) ; gU += max ( ( 1.0 - pow ( aM , 0.3 ) ) * step ( 0.9 , eq ) , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 gX = GLSL_TEXTURE ( u_input , gT ) ; gU += cQ ( gX ) ;".split(" ")}]}}]},{a:"txt",b:"} gT += gR ; }".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = A + gP ; float gY = fG ( vec2 ( 2.5 * ( b_ . x ) , 2.5 * ( b_ . y ) + 1.0 * u_time ) ) . x + 0.75 * fG ( vec2 ( 5.0 * ( b_ . x ) - 0.66 * u_time , 5.0 * ( b_ . y ) + 0.66 * u_time ) ) . x + 0.5 * fv ( vec2 ( 7.5 * ( b_ . x ) + 0.33 * u_time , 7.5 * ( b_ . y ) - 0.33 * u_time ) ) ; gY *= clamp ( 1.2 - sqrt ( 0.2 * aM ) , 0.0 , 1.0 ) * gO ; gU = max ( gY , gU ) ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_OUT_FRAG_COLOR = er ( gU / STEPS_PER_PASS ) ; }".split(" ")}]};a["postprocessing/god_rays.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"uniform mat4 u_view_proj_matrix ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_camera_quat ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{a:"txt",b:["GLSL_IN","vec2","a_bb_vertex",";"]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT float gO ; GLSL_OUT vec2 gP ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT vec2 A ; GLSL_OUT vec4 gQ ; void main ( ) { A = a_bb_vertex ; vec3 bD = normalize ( u_sun_direction ) ; gQ = u_view_proj_matrix * vec4 ( bD , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"if ( u_cam_water_depth < 0.0 ) { gO = 1.0 ; vec3 gZ = vec3 ( 0.0 , 1.0 , 0.0 ) ; vec3 g_ = T ( u_camera_quat , gZ ) ; g_ = normalize ( g_ ) ; float ha = dot ( g_ , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; float hb = atan ( g_ . x , g_ . z ) ; gP = vec2 ( - hb , acos ( ha ) ) ; } else { gO = 0.0 ; }".split(" ")}]}}]},{a:"txt",b:"gQ . xy = 0.5 * ( gQ . xy / gQ . w + 1.0 ) ; gQ += 99999.0 * step ( gQ . z , 0.0 ) ; gl_Position = vec4 ( 2.0 * a_bb_vertex . xy - 1.0 , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/god_rays_combine.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SAFARI_CANVAS_ALPHA_HACK",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_god_rays ; uniform float u_god_rays_intensity ; uniform vec3 u_sun_intensity ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hc = GLSL_TEXTURE ( u_main , A ) ; vec3 hd = clamp ( u_sun_intensity , 0.4 , 0.8 ) ; bC ( hc . rgb ) ; float he = cQ ( GLSL_TEXTURE ( u_god_rays , A ) ) ; vec3 hf = hc . rgb + u_god_rays_intensity * vec3 ( he ) * hd ; aW ( hf ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SAFARI_CANVAS_ALPHA_HACK"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , max ( 0.01 , hc . a ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , hc . a ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["postprocessing/luminance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_input , A ) ; float hg = dot ( gw . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hg ) , 1.0 ) ; }".split(" ")}]};
a["postprocessing/luminance_av.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; uniform float u_mipmap_1x1 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float hh = max ( GLSL_TEXTURE ( u_input , A , u_mipmap_1x1 ) . r , 0.01 ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hh ) , 1.0 ) ; }".split(" ")}]};a["postprocessing/luminance_truncated.glslf"]={a:"grp",f:[{a:"version",
b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"ADAPTIVE_BLOOM",b:["0"]},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_luminance ; uniform sampler2D u_average_lum ; uniform float u_bloom_edge_lum ; uniform float u_bloom_key ;".split(" ")},{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_average_lum_val",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM"],l:{a:"grp",f:[{a:"txt",b:"float hh = GLSL_TEXTURE ( u_average_lum , vec2 ( 0.5 ) ) . r ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","hh","=","u_average_lum_val",";"]}]}}]},{a:"txt",b:"float hi = GLSL_TEXTURE ( u_luminance , A ) . r ; vec4 aQ = GLSL_TEXTURE ( u_main , A ) ; float hj = hi / hh ; float hk = u_bloom_edge_lum ; GLSL_OUT_FRAG_COLOR = aQ * u_bloom_key * smoothstep ( hk , hk + 1.2 , hj ) ; }".split(" ")}]};a["postprocessing/motion_blur.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_mb_tex_curr ; uniform sampler2D u_mb_tex_accum ; uniform float u_motion_blur_exp ; uniform float u_motion_blur_decay_threshold ; float hl = 0.0042 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hm = GLSL_TEXTURE ( u_mb_tex_curr , A ) ; vec4 hn = GLSL_TEXTURE ( u_mb_tex_accum , A ) ; if ( length ( hm - hn ) > u_motion_blur_decay_threshold ) { vec4 ho = ( 1.0 - u_motion_blur_exp ) * hm + u_motion_blur_exp * hn ; vec4 hp = ho - hn ; vec4 hq = hm - hn ; vec4 cS = min ( max ( abs ( hp ) , vec4 ( hl ) ) , abs ( hq ) ) * sign ( hp ) ; GLSL_OUT_FRAG_COLOR = hn + cS ; } else { GLSL_OUT_FRAG_COLOR = hm ; } }".split(" ")}]};
a["postprocessing/outline.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_outline_src ; uniform sampler2D u_outline_mask ; uniform sampler2D u_outline_mask_blurred ; uniform vec3 u_outline_color ; uniform float u_draw_outline ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hr = GLSL_TEXTURE ( u_outline_src , A ) ; GLSL_OUT_FRAG_COLOR = hr ; if ( u_draw_outline != 0.0 ) { vec4 hs = GLSL_TEXTURE ( u_outline_mask , A ) ; vec4 ht = GLSL_TEXTURE ( u_outline_mask_blurred , A ) ; float hu = ht . a - hs . a ; if ( hu != 0.0 ) { float hv = smoothstep ( 0.0 , 1.0 , ht . a ) ; if ( hs . a == 0.0 ) { vec3 hw = u_outline_color ; aW ( hw ) ; vec4 hx = vec4 ( clamp ( hw , 0.0 , 1.0 ) , 1.0 ) ; GLSL_OUT_FRAG_COLOR = mix ( hr , hx , hv ) ; } } } }".split(" ")}]};
a["postprocessing/performance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_color ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = vec4 ( 0.0 ) ; for ( int cl = 0 ; cl < 10 ; cl ++ ) { vec2 hy = vec2 ( fract ( A * vec2 ( cl ) * vec2 ( 1.431 , 3.921 ) ) ) ; aQ += 0.01 * GLSL_TEXTURE ( u_color , hy ) ; } GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["postprocessing/postprocessing.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"POST_EFFECT",b:["POST_EFFECT_NONE"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec2 u_texel_size ; uniform sampler2D u_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_tex_number ; uniform vec2 u_delta ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_dof_bokeh_intensity",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}},{a:"elif",j:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 du = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR . rgb = vec3 ( ( du . r + du . g + du . b ) / 3.0 ) ; GLSL_OUT_FRAG_COLOR . a = 1.0 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_GLOW_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.152507 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; GLSL_OUT_FRAG_COLOR = clamp ( GLSL_OUT_FRAG_COLOR , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; float gz ; float hB = u_dof_bokeh_intensity ; aQ = GLSL_TEXTURE ( u_color , A ) ; hz = aQ ; hA = aQ ; gz = aQ . a ; cS = gz * cS ; for ( int cl = 0 ; cl < 12 ; cl += 2 ) { fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; } hz /= 13.0 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , hB ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_ALPHA_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; aQ = GLSL_TEXTURE ( u_color , A ) ; hA = max ( hA , aQ ) ; hz = aQ ; hz . a = aQ . a * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , 0.5 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_EXTEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 cS = u_texel_size ; vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ ; if ( aQ . a == 0.0 ) { aQ = GLSL_TEXTURE ( u_color , A + cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; else { aQ = GLSL_TEXTURE ( u_color , A - cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; } }".split(" ")}]}},{a:"elif",j:["POST_EFFECT",
"FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float hC = u_delta [ 0 ] ; float hD = u_delta [ 1 ] ; float hE = 1.0 / 3.0 ; float hF = 0.5 ; vec2 hG = vec2 ( hE , hF ) ; if ( u_tex_number == 0 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , hF - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 1 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 2 ) { vec2 b_ = A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 1.5 - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 3 ) { vec2 b_ = A * hG + vec2 ( hE , 0.0 ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( 1.0 - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 4 ) { vec2 b_ = A * hG + vec2 ( hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 3.0 * hF - b_ [ 1 ] ) ) ; } else { vec2 b_ = A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hF + hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/postprocessing.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ; void main ( ) { A = 2.0 * a_position ; gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/precompute_brdf.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"PRECISION",b:["highp"]},
{a:"txt",b:"precision PRECISION sampler2D ; precision PRECISION float ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } float hK ( float hH , float ec ) { float a = ec ; float hI = ( a * a ) / 2.0 ; float hJ = hH ; float dX = hH * ( 1.0 - hI ) + hI ; return hJ / dX ; } float hN ( vec3 d_ , vec3 ek , vec3 en , float ec ) { float hH = max ( dot ( d_ , ek ) , 0.0 ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; float hL = hK ( hH , ec ) ; float hM = hK ( eo , ec ) ; return hM * hL ; } vec2 hU ( float hH , float ec ) { vec3 ek ; ek . x = sqrt ( 1.0 - hH * hH ) ; ek . y = 0.0 ; ek . z = hH ; float cB = 0.0 ; float hO = 0.0 ; vec3 d_ = vec3 ( 0.0 , 0.0 , 1.0 ) ; const int el = 1024 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , ec ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( en . z , 0.0 ) ; float hP = max ( ef . z , 0.0 ) ; float hQ = max ( dot ( ek , ef ) , 0.0 ) ; if ( eo > 0.0 ) { float hR = hN ( d_ , ek , en , ec ) ; float hS = ( hR * hQ ) / ( hP * hH ) ; float hT = pow ( 1.0 - hQ , 5.0 ) ; cB += ( 1.0 - hT ) * hS ; hO += hT * hS ; } } cB /= float ( el ) ; hO /= float ( el ) ; return vec2 ( cB , hO ) ; } void main ( ) { vec2 hV = hU ( A . x , A . y ) ; GLSL_OUT_FRAG_COLOR = vec4 ( hV , 0.0 , 1.0 ) ; }".split(" ")}]};
a["postprocessing/smaa.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"SMAA_REPROJECTION",b:["0"]},{a:"var",c:"SMAA_PREDICATION",b:["0"]},{a:"var",c:"SMAA_DISABLE_CORNER_DETECTION",b:["0"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_ULTRA"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"txt",b:["uniform","sampler2D","u_color",";"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_prev",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_blend",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2},"SMAA_PREDICATION",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_search_tex ; uniform sampler2D u_area_tex ; uniform vec4 u_subsample_indices ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_texel_size ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4",
"hW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 hX ; GLSL_IN vec4 hY ; GLSL_IN vec4 hZ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","h_",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.15"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",
b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",
b:["8"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.05"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["16"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_DEPTH_THRESHOLD",l:{a:"grp",
f:[{a:"define",c:"SMAA_DEPTH_THRESHOLD",b:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS_DIAG",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["8"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_CORNER_ROUNDING",l:{a:"grp",f:[{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",l:{a:"grp",f:[{a:"define",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",
c:"SMAA_PREDICATION",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_THRESHOLD",b:["0.01"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_SCALE",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_STRENGTH",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_STRENGTH",b:["0.4"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION",
l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION_WEIGHT_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION_WEIGHT_SCALE",b:["30.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE",b:["16"]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE_DIAG",b:["20"]},{a:"define",c:"SMAA_AREATEX_PIXEL_SIZE",b:"( 1.0 / vec2 ( 160.0 , 560.0 ) )".split(" ")},
{a:"define",c:"SMAA_AREATEX_SUBTEX_SIZE",b:["(","1.0","/","7.0",")"]},{a:"define",c:"SMAA_SEARCHTEX_SIZE",b:"vec2 ( 66.0 , 33.0 )".split(" ")},{a:"define",c:"SMAA_SEARCHTEX_PACKED_SIZE",b:"vec2 ( 64.0 , 16.0 )".split(" ")},{a:"define",c:"SMAA_CORNER_ROUNDING_NORM",b:"( float ( SMAA_CORNER_ROUNDING ) / 100.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 id ( vec2 b_ , sampler2D ia ) { float p = GLSL_TEXTURE ( ia , b_ ) . r ; float ib = GLSL_TEXTURE ( ia , hX . xy ) . r ; float ic = GLSL_TEXTURE ( ia , hX . zw ) . r ; return vec3 ( p , ib , ic ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ii ( vec2 b_ , sampler2D ie ) { vec3 ig = id ( b_ , ie ) ; vec2 cS = abs ( ig . xx - ig . yz ) ; vec2 ih = step ( SMAA_PREDICATION_THRESHOLD , cS ) ; return SMAA_PREDICATION_SCALE * SMAA_THRESHOLD * ( 1.0 - SMAA_PREDICATION_STRENGTH * ih ) ; }".split(" ")}]}}]},{a:"txt",b:"void im ( bvec2 ij , inout vec2 ik , vec2 il ) { if ( ij . x ) ik . x = il . x ; if ( ij . y ) ik . y = il . y ; } void im ( bvec4 ij , inout vec4 ik , vec4 il ) { im ( ij . xy , ik . xy , il . xy ) ; im ( ij . zw , ik . zw , il . zw ) ; } vec2 io ( vec2 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; } vec4 io ( vec4 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 iA ( vec2 b_ , sampler2D ip".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","ie"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:"vec2 iq = ii ( b_ , ie ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 iq = vec2 ( SMAA_THRESHOLD , SMAA_THRESHOLD ) ;".split(" ")}]}}]},{a:"txt",
b:"vec3 ir = vec3 ( 0.2126 , 0.7152 , 0.0722 ) ; float en = dot ( GLSL_TEXTURE ( ip , b_ ) . rgb , ir ) ; float is = dot ( GLSL_TEXTURE ( ip , hX . xy ) . rgb , ir ) ; float it = dot ( GLSL_TEXTURE ( ip , hX . zw ) . rgb , ir ) ; vec4 cS ; cS . xy = abs ( en - vec2 ( is , it ) ) ; vec2 ih = step ( iq , cS . xy ) ; if ( dot ( ih , vec2 ( 1.0 , 1.0 ) ) == 0.0 ) discard ; float iu = dot ( GLSL_TEXTURE ( ip , hY . xy ) . rgb , ir ) ; float iv = dot ( GLSL_TEXTURE ( ip , hY . zw ) . rgb , ir ) ; cS . zw = abs ( en - vec2 ( iu , iv ) ) ; vec2 iw = max ( cS . xy , cS . zw ) ; float ix = dot ( GLSL_TEXTURE ( ip , hZ . xy ) . rgb , ir ) ; float iy = dot ( GLSL_TEXTURE ( ip , hZ . zw ) . rgb , ir ) ; cS . zw = abs ( vec2 ( is , it ) - vec2 ( ix , iy ) ) ; iw = max ( iw . xy , cS . zw ) ; float iz = max ( iw . x , iw . y ) ; ih . xy *= step ( iz , SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR * cS . xy ) ; return ih ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iC ( vec2 iB ) { iB . r = iB . r * abs ( 5.0 * iB . r - 5.0 * 0.75 ) ; return io ( iB ) ; } vec4 iC ( vec4 iB ) { iB . rb = iB . rb * abs ( 5.0 * iB . rb - 5.0 * 0.75 ) ; return io ( iB ) ; } vec2 iE ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz += t * vec3 ( bD , 1.0 ) ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iF ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; fW . x += 0.25 * u_texel_size . x ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz = t * vec3 ( bD , 1.0 ) + fW . xyz ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; iB = iC ( iB ) ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iH ( sampler2D iG , vec2 aM , vec2 iB , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE_DIAG , SMAA_AREATEX_MAX_DISTANCE_DIAG ) * iB + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . x += 0.5 ; b_ . y += SMAA_AREATEX_SUBTEX_SIZE * fI ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } vec2 iM ( sampler2D iD , sampler2D iG , vec2 b_ , vec2 iB , vec4 iI ) { vec2 ir = vec2 ( 0.0 , 0.0 ) ; vec4 dz ; vec2 iJ ; if ( iB . r > 0.0 ) { dz . xz = iE ( iD , b_ , vec2 ( - 1.0 , 1.0 ) , iJ ) ; dz . x += float ( iJ . y > 0.9 ) ; } else dz . xz = vec2 ( 0.0 , 0.0 ) ; dz . yw = iE ( iD , b_ , vec2 ( 1.0 , - 1.0 ) , iJ ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x + 0.25 , dz . x , dz . y , - dz . y - 0.25 ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . xy = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . rg ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . rg ; du . yxwz = iC ( du . xyzw ) ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0.0 , 0.0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . z ) ; } dz . xz = iF ( iD , b_ , vec2 ( - 1 , - 1 ) , iJ ) ; if ( GLSL_TEXTURE ( iD , b_ + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r > 0.0 ) { dz . yw = iF ( iD , b_ , vec2 ( 1 , 1 ) , iJ ) ; dz . y += float ( iJ . y > 0.9 ) ; } else dz . yw = vec2 ( 0.0 , 0.0 ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x , - dz . x , dz . y , dz . y ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . x = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . g ; du . y = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( 0 , - 1 ) , 0.0 ) . r ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . gr ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0 , 0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . w ) . gr ; } return ir ; }".split(" ")}]}}]},
{a:"txt",b:"float iP ( sampler2D iN , vec2 iB , float fI ) { vec2 hG = SMAA_SEARCHTEX_SIZE * vec2 ( 0.5 , - 1.0 ) ; vec2 iO = SMAA_SEARCHTEX_SIZE * vec2 ( fI , 1.0 ) ; hG += vec2 ( - 1.0 , 1.0 ) ; iO += vec2 ( 0.5 , - 0.5 ) ; hG *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; iO *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; return GLSL_TEXTURE ( iN , hG * iB + iO , 0.0 ) . r ; } float iQ ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x > iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.0 ) + 3.25 ; return u_texel_size . x * fI + b_ . x ; } float iR ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x < iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.5 ) + 3.25 ; return - u_texel_size . x * fI + b_ . x ; } float iS ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y > iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.0 ) + 3.25 ; return u_texel_size . y * fI + b_ . y ; } float iT ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y < iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.5 ) + 3.25 ; return - u_texel_size . y * fI + b_ . y ; } vec2 iW ( sampler2D iG , vec2 aM , float iU , float iV , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE , SMAA_AREATEX_MAX_DISTANCE ) * io ( 4.0 * vec2 ( iU , iV ) ) + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . y = SMAA_AREATEX_SUBTEX_SIZE * fI + b_ . y ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } void iZ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . r ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . r ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , - 2 ) , 0.0 ) . r ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , - 2 ) , 0.0 ) . r ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:"} void i_ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . g ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . g ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( - 2 , 0 ) , 0.0 ) . g ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( - 2 , 1 ) , 0.0 ) . g ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jc ( vec2 b_ , vec2 ja , sampler2D iD , sampler2D iG , sampler2D iN , vec4 iI ) { vec4 ir = vec4 ( 0.0 , 0.0 , 0.0 , 0.0 ) ; vec2 iB = GLSL_TEXTURE ( iD , b_ ) . rg ; if ( iB . g > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"ir . rg = iM ( iD , iG , b_ , iB , iI ) ; if ( ir . r == - ir . g ) {".split(" ")}]}}]},
{a:"txt",b:"vec2 dz ; vec3 iK ; iK . x = iQ ( iD , iN , hX . xy , hZ . x ) ; iK . y = hY . y ; dz . x = iK . x ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . r ; iK . z = iR ( iD , iN , hX . zw , hZ . y ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . xx - ja . xx ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . zy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r ; ir . rg = iW ( iG , jb , iU , iV , iI . y ) ; iK . y = b_ . y ; iZ ( iD , ir . rg , iK . xyzy , dz ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"} else iB . r = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"} if ( iB . r > 0.0 ) { vec2 dz ; vec3 iK ; iK . y = iS ( iD , iN , hY . xy , hZ . z ) ; iK . x = hX . x ; dz . x = iK . y ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . g ; iK . z = iT ( iD , iN , hY . zw , hZ . w ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . yy - ja . yy ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . xz + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . g ; ir . ba = iW ( iG , jb , iU , iV , iI . x ) ; iK . x = b_ . x ; i_ ( iD , ir . ba , iK . xyxz , dz ) ; } return ir ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jl ( vec2 b_ , sampler2D ip , sampler2D jd".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","je"]}]}}]},{a:"txt",b:") { vec4 a ; a . x = GLSL_TEXTURE ( jd , hW . xy ) . a ; a . y = GLSL_TEXTURE ( jd , hW . zw ) . g ; a . wz = GLSL_TEXTURE ( jd , b_ ) . xz ; if ( dot ( a , vec4 ( 1.0 , 1.0 , 1.0 , 1.0 ) ) < 1e-5 ) { vec4 aQ = GLSL_TEXTURE ( ip , b_ , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl = 2.0 * jg ( jf ) - 1.0 ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{a:"txt",b:"return aQ ; } else { bool cj = max ( a . x , a . z ) > max ( a . y , a . w ) ; vec4 jh = vec4 ( 0.0 , a . y , 0.0 , a . w ) ; vec2 ji = a . yw ; im ( bvec4 ( cj , cj , cj , cj ) , jh , vec4 ( a . x , 0.0 , a . z , 0.0 ) ) ; im ( bvec2 ( cj , cj ) , ji , a . xz ) ; ji /= dot ( ji , vec2 ( 1.0 , 1.0 ) ) ; vec4 jj = jh * vec4 ( u_texel_size , - u_texel_size ) + b_ . xyxy ; vec4 aQ = ji . x * GLSL_TEXTURE ( ip , jj . xy , 0.0 ) ; aQ += ji . y * GLSL_TEXTURE ( ip , jj . zw , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , jj . xy ) ; vec2 jk = 2.0 * jg ( jf ) - 1.0 ; vec2 dl = ji . x * jk ; jf = GLSL_TEXTURE ( je , jj . zw ) ; jk = 2.0 * jg ( jf ) - 1.0 ; dl += ji . y * jk ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}","}"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jq ( vec2 b_ , sampler2D jm , sampler2D jn".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","je"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl ; dl = 2.0 * jg ( jf ) - 1.0 ; vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ - dl ) ; float cS = abs ( jo . a * jo . a - jp . a * jp . a ) / 2.0 ; float cp = 0.5 * clamp ( 1.0 - sqrt ( cS ) * SMAA_REPROJECTION_WEIGHT_SCALE , 0.0 , 1.0 ) ; vec4 aQ = mix ( jo , jp , cp ) ; aQ . a = 1.0 ; return aQ ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ ) ; return mix ( jo , jp , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( iA ( A , u_color".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","u_predication_tex"]}]}}]},{a:"txt",b:") , 0.0 , 0.0 ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = jc ( A , h_ , u_color , u_area_tex , u_search_tex , u_subsample_indices ) ;".split(" ")}]}},{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = jl ( A , u_color , u_blend".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",";"]}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( jq ( A , u_color , u_color_prev".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}}]},{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","aQ",";","}"]}]};a["postprocessing/smaa.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",
b:["highp"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_LOW"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform PRECISION vec2 u_texel_size ; GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","hW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec4 hX ; GLSL_OUT vec4 hY ; GLSL_OUT vec4 hZ ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","h_",";"]}]}}]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["4"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["8"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["32"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void jr ( vec2 b_ ) { hX = u_texel_size . xyxy * vec4 ( - 1.0 , 0.0 , 0.0 , - 1.0 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; hZ = u_texel_size . xyxy * vec4 ( - 2.0 , 0.0 , 0.0 , - 2.0 ) + b_ . xyxy ; }".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void js ( vec2 b_ , out vec2 ja ) { ja = b_ / u_texel_size ; hX = u_texel_size . xyxy * vec4 ( - 0.25 , - 0.125 , 1.25 , - 0.125 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( - 0.125 , - 0.25 , - 0.125 , 1.25 ) + b_ . xyxy ; hZ = u_texel_size . xxyy * vec4 ( - 2.0 , 2.0 , - 2.0 , 2.0 ) * float ( SMAA_MAX_SEARCH_STEPS ) + vec4 ( hX . xz , hY . yw ) ; }".split(" ")}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void jt ( vec2 b_ ) { hW = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { A = 2.0 * a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["jr","(","A",")",";"]}]}},{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"js ( A , h_ ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["jt","(","A",")",";"]}]}}]},{a:"txt",b:"gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/ssao.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_WHITE",b:["0"]},{a:"var",c:"SSAO_QUALITY",b:["SSAO_QUALITY_8"]},{a:"var",c:"SSAO_HEMISPHERE",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",
";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ; uniform sampler2D u_ssao_special_tex ; uniform vec2 u_camera_range ; uniform vec2 u_texel_size ; uniform float u_ssao_radius_increase ; uniform float u_ssao_influence ; uniform float u_ssao_dist_factor ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; } void main ( ) { vec3 gC = GLSL_TEXTURE ( u_color , A ) . rgb ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_WHITE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gC , 1.0 ) ; return ;".split(" ")}]}}]},{a:"txt",b:"vec3 jv = normalize ( 2.0 * GLSL_TEXTURE ( u_ssao_special_tex , A * 0.25 / u_texel_size ) . rgb - 1.0 ) ; float eq = ju ( A ) ; float jw = eq * ( u_camera_range . y - u_camera_range . x ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_QUALITY","SSAO_QUALITY_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 8.0 ; const int jy = 1 ;".split(" ")}]}},
{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 16.0 ; const int jy = 2 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_24",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 24.0 ; const int jy = 3 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_32",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 32.0 ; const int jy = 4 ;".split(" ")}]}}]},{a:"txt",b:"float jz = u_ssao_radius_increase * 0.001 ; const float jA = 1.0 + 2.4 / jx ; float jB = 0.0 ; for ( int cl = 0 ; cl < jy ; cl ++ ) for ( int x = - 1 ; x <= 1 ; x += 2 ) for ( int y = - 1 ; y <= 1 ; y += 2 ) for ( int z = - 1 ; z <= 1 ; z += 2 ) { vec3 jC = reflect ( normalize ( vec3 ( x , y , z ) ) , jv ) * ( jz *= jA ) ; vec3 jD = vec3 ( A , jw ) ; jD += vec3 ( jC . xy , jC . z * jw * 2.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jD . z -= 1.4 * ( jD . z - jw ) * step ( jw , jD . z ) ;".split(" ")}]}}]},{a:"txt",b:"float jE = ju ( jD . xy ) * ( u_camera_range . y - u_camera_range . x ) ; float jF = clamp ( ( jw - jE ) / jE , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jB += mix ( 1.0 , jF , step ( jE , jD . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jB += mix ( step ( jD . z , jE ) , 0.5 , jF ) ;".split(" ")}]}}]},
{a:"txt",b:"} jB = jB / jx ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jB = clamp ( jB * jB + 0.6 * jB , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jB = clamp ( jB * jB + jB , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"float jG = u_ssao_influence * ( 1.0 - u_ssao_dist_factor * eq ) ; jB = mix ( 1.0 , jB , jG ) ; GLSL_OUT_FRAG_COLOR = vec4 ( gC , jB ) ; }".split(" ")}]};a["postprocessing/ssao_blur.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},
{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_BLUR_DEPTH",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"}]}}]},{a:"txt",b:"uniform sampler2D u_ssao_mask ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",
b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; uniform float u_ssao_blur_discard_value ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { float jH = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float jI = ju ( A ) ; float cp = 0.0 ; float jJ = u_ssao_blur_discard_value * 100.0 ;".split(" ")}]}}]},{a:"txt",b:"vec2 jK = vec2 ( - 2.0 ) ; for ( int cl = 0 ; cl < 4 ; ++ cl ) { for ( int jL = 0 ; jL < 4 ; ++ jL ) { vec2 fI = ( jK + vec2 ( float ( cl ) , float ( jL ) ) ) * u_texel_size ; float jM = GLSL_TEXTURE ( u_ssao_mask , A + fI ) . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float jN = ju ( A + fI ) ; float jO = 1.0 - clamp ( abs ( jN - jI ) * jJ , 0.0 , 1.0 ) ; jH += jM * jO ; cp += jO ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["jH","+=","jM",";"]}]}}]},{a:"txt",b:["}","}"]},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / cp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / 16.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/stereo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANAGLYPH",b:["0"]},{a:"var",c:"SIDEBYSIDE",b:["0"]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"DISTOR_SCALE",b:["0.8"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler_left ; uniform sampler2D u_sampler_right ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"cond",f:[{a:"if",j:["ANAGLYPH",{a:"logic_negative_expr",o:1},"SIDEBYSIDE",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_enable_hmd_stereo ; uniform vec4 u_distortion_params ; uniform vec4 u_chromatic_aberration_coefs ; void jX ( vec2 b_ , vec2 ao , float df , sampler2D jP ) { vec2 bz = ( b_ - ao ) * 4.0 * u_texel_size [ 0 ] / u_texel_size [ 1 ] / df ; float jQ = bz . x * bz . x + bz . y * bz . y ; vec2 jR = bz * ( 1.0 + u_distortion_params [ 0 ] * jQ + u_distortion_params [ 1 ] * jQ * jQ ) ; vec2 jS = jR * 0.5 / ( 1.0 + u_distortion_params [ 0 ] + u_distortion_params [ 1 ] ) ; if ( length ( u_chromatic_aberration_coefs ) > 0.0 ) { vec2 jT = jS * ( 1.0 + u_chromatic_aberration_coefs [ 0 ] + jQ * u_chromatic_aberration_coefs [ 1 ] ) + 0.5 ; vec2 jU = jS + 0.5 ; vec2 jV = jS * ( 1.0 + u_chromatic_aberration_coefs [ 2 ] + jQ * u_chromatic_aberration_coefs [ 3 ] ) + 0.5 ; if ( clamp ( jV , 0.0 , 1.0 ) != jV ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { vec4 jW = GLSL_TEXTURE ( jP , jU ) ; GLSL_OUT_FRAG_COLOR [ 0 ] = GLSL_TEXTURE ( jP , jT ) . x ; GLSL_OUT_FRAG_COLOR [ 1 ] = jW . y ; GLSL_OUT_FRAG_COLOR [ 2 ] = GLSL_TEXTURE ( jP , jV ) . z ; GLSL_OUT_FRAG_COLOR [ 3 ] = jW . w ; } } else { jS += 0.5 ; if ( clamp ( jS , 0.0 , 1.0 ) != jS ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( jP , jS ) ; } } }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["ANAGLYPH"],l:{a:"grp",f:[{a:"txt",b:"vec4 jY = GLSL_TEXTURE ( u_sampler_left , A ) ; vec4 jZ = GLSL_TEXTURE ( u_sampler_right , A ) ; vec3 j_ = vec3 ( jY [ 0 ] , jY [ 1 ] , jY [ 2 ] ) ; bC ( j_ ) ; vec3 ka = vec3 ( jZ [ 0 ] , jZ [ 1 ] , jZ [ 2 ] ) ; bC ( ka ) ; mat3 kb = mat3 ( 0.437 , - 0.062 , - 0.048 , 0.449 , - 0.062 , - 0.050 , 0.164 , - 0.024 , - 0.017 ) ; mat3 bv = mat3 ( - 0.011 , 0.377 , - 0.026 , - 0.032 , 0.761 , - 0.093 , - 0.007 , 0.009 , 1.234 ) ; vec3 aQ = clamp ( kb * j_ , 0.0 , 1.0 ) + clamp ( bv * ka , 0.0 , 1.0 ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , jY [ 3 ] + jZ [ 3 ] ) ;".split(" ")}]}},
{a:"elif",j:["SIDEBYSIDE"],l:{a:"grp",f:[{a:"txt",b:"if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_enable_hmd_stereo != 0 ) { if ( abs ( u_distortion_params [ 0 ] ) > EPSILON || abs ( u_distortion_params [ 1 ] ) > EPSILON ) if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 - ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_left ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 + ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_right ) ; } else if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; } } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , A ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/velocity.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform mat4 u_view_proj_inverse ; uniform mat4 u_view_proj_prev ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float eq = GLSL_TEXTURE ( u_depth , A ) . x ; vec4 kc = vec4 ( A * 2.0 - 1.0 , 2.0 * eq - 1.0 , 1.0 ) ; vec4 cy = u_view_proj_inverse * kc ; vec4 kd = cy / cy . w ; vec4 ke = u_view_proj_prev * kd ; ke /= ke . w ; vec2 dl = ( kc . xy - ke . xy ) / 4.0 + 0.5 ; dl = clamp ( dl , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR = er ( dl ) ; }".split(" ")}]};
a["include/blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"BLENDING_GLSLF",b:[""]},{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; } vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; } vec3 kl ( vec3 ki , vec3 kj , float kk ) { return mix ( ki , kj , kk ) ; } vec3 km ( vec3 ki , vec3 kj , float kk ) { return kk * ki + kj ; } vec3 kn ( vec3 ki , vec3 kj , float kk ) { return kj - kk * ki ; } vec3 kp ( vec3 ki , vec3 kj , float kk ) { float ko = _1_0 - kk ; return ( vec3 ( ko ) + kk * ki ) * kj ; } vec3 kq ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return vec3 ( _1_0 ) - ( ko + kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) ; } vec3 kr ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return mix ( kj * ( ko + 2.0 * kk * ki ) , vec3 ( _1_0 ) - ( ko + 2.0 * kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) , step ( 0.5 , kj ) ) ; } vec3 ks ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , abs ( ki - kj ) , kk ) ; } vec3 kt ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , kj / ( ki + step ( ki , vec3 ( _0_0 ) ) ) , kk ) ; } vec3 ku ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , min ( ki , kj ) , kk ) ; } vec3 kv ( vec3 ki , vec3 kj , float kk ) { return max ( kk * ki , kj ) ; } vec3 kz ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . x , kx . yz ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kA ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . x , mix ( kw . y , kx . y , kk ) , kw . z ) ) ; } return ki ; } vec3 kB ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . xy , mix ( kw . z , kx . z , kk ) ) ) ; } vec3 kC ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . xy , kx . z ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kE ( vec3 ki , vec3 kj , float kk ) { vec3 kD = vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - kj ) * ( vec3 ( _1_0 ) - ki ) ; return mix ( ki , ( ( vec3 ( _1_0 ) - ki ) * kj * ki ) + ki * kD , kk ) ; } vec3 kF ( vec3 ki , vec3 kj , float kk ) { return ki + kk * ( 2.0 * kj - _1_0 ) ; } float kJ ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return ( ko + kk * kG ) * kH ; } float kK ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return _1_0 - ( ko + kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) ; } float kL ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return mix ( kH * ( ko + 2.0 * kk * kG ) , _1_0 - ( ko + 2.0 * kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) , step ( 0.5 , kH ) ) ; }".split(" ")}]}}]}]};
a["include/caustics.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"CAUSTICS_GLSLF",l:{a:"grp",f:[{a:"define",c:"CAUSTICS_GLSLF",b:[""]},{a:"var",c:"SUN_NUM",b:["0"]},{a:"var",c:"CAUST_SCALE",b:["0.25"]},{a:"var",c:"CAUST_SPEED",b:["vec2","(","0.0",")"]},{a:"var",c:"CAUST_BRIGHT",b:["0.5"]},{a:"include",F:"procedural.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"CAUSTICS_VIEW_DISTANCE",b:["100.0"]},{a:"txt",b:"void bQ ( inout vec3 aQ , float kM , float fu , vec4 bP , vec3 U , vec3 kN , vec3 kO , vec4 kP , vec3 bo , float bN ) { if ( bN > CAUSTICS_VIEW_DISTANCE ) return ; vec3 kQ = bo + U ; kQ . xz = 10.0 * sin ( 0.1 * kQ . xz ) ; vec3 kS = T ( kR ( kP ) , kQ ) ; vec2 b_ = kS . xz ; vec3 kT = kN ; float kU = max ( dot ( U , kT ) , 0.0 ) ; float kV = 0.025 ; vec2 kW = CAUST_SPEED * fu ; b_ . s += 0.25 * sin ( dot ( bo + fu , vec3 ( 1.0 ) ) ) ; b_ . t += 0.35 * ( - sin ( dot ( bo - fu , vec3 ( - 0.7 ) ) ) ) ; b_ . st += 0.15 * cos ( 4.0 * kM - kW . x ) + 1.5 * sin ( kM - 0.3 * kW . y ) ; float hG = CAUST_SCALE * ( 1.0 + max ( 0.1 * kM , 0.0 ) ) ; vec3 kY = kX ( ( b_ / hG ) , kV ) ; kY *= CAUST_BRIGHT ; kY *= kY ; float kZ = min ( 0.25 * kM , - kM ) + 1.0 ; kZ = max ( kZ , 0.0 ) ; float k_ = bP [ SUN_NUM ] * kU ; float la = max ( sign ( kM ) , 0.0 ) ; k_ = k_ + max ( 0.5 * sign ( - U . y ) * la , 0.0 ) ; k_ = min ( k_ , 1.0 ) ; aQ += kO * kY * kZ * k_ ; }".split(" ")}]}}]}]};
a["include/color_util.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"COLOR_UTIL_GLSLF",l:{a:"grp",f:[{a:"define",c:"COLOR_UTIL_GLSLF",b:[""]},{a:"define",c:"PREMULTIPLY_ALPHA",b:["1"]},{a:"var",c:"SRGB",b:["SRGB_NONE"]},{a:"include",F:"std.glsl"},{a:"txt",b:"void bC ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"if ( aQ < 0.04045 ) aQ = aQ / 12.92 ; else aQ = pow ( aQ * ( 1.0 / 1.055 ) + 0.0521327 , 2.4 ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 1.0 / 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( aQ < 0.0031308 ) aQ = aQ * 12.92 ; else aQ = 1.055 * pow ( aQ , 1.0 / 2.4 ) - 0.055 ;".split(" ")}]}}]},
{a:"txt",b:"} void bC ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 2.2 ) ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bC ( aQ . r ) ; bC ( aQ . g ) ; bC ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 1.0 / 2.2 ) ) ;".split(" ")}]}},
{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aW ( aQ . r ) ; aW ( aQ . g ) ; aW ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aX ( inout vec3 aQ , in float L ) {".split(" ")},{a:"cond",f:[{a:"if",j:["PREMULTIPLY_ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aQ = aQ * L ;".split(" ")}]}}]},{a:"txt",b:"} float ge ( vec4 aQ ) { vec3 lb = vec3 ( 0.299 , 0.587 , 0.114 ) ; float lc = dot ( aQ . rgb , lb ) ; return lc ; }".split(" ")}]}}]}]};a["include/coverage.glslf"]={a:"grp",
f:[{a:"cond",f:[{a:"ifndef",c:"COVERAGE_GLSLF",l:{a:"grp",f:[{a:"define",c:"COVERAGE_GLSLF",b:[""]},{a:"include",F:"procedural.glslf"},{a:"txt",b:"const float ld = 1000.0 ; bool C ( float L , float le ) { if ( le < 0.0 ) L = 1.0 - L ; float lf = floor ( L * ld ) ; float lh = floor ( lg ( gl_FragCoord . xy ) * ld ) ; if ( le > 0.0 ) return lh < lf ; else return lh >= lf ; }".split(" ")}]}}]}]};a["include/depth_fetch.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DEPTH_FETCH_GLSLF",l:{a:"grp",f:[{a:"define",
c:"DEPTH_FETCH_GLSLF",b:[""]},{a:"include",F:"std.glsl"},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float ep ( in float li , in vec2 lj ) { float dD = lj . x ; float lk = lj . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return lk * ( 1.0 - dD / li ) / ( lk - dD ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return ( li - dD ) / ( lk - dD ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float gy ( in sampler2D ll , in vec2 fW , in vec2 lj ) { float eq = GLSL_TEXTURE ( ll , fW ) . r ; float dD = lj . x ; float lk = lj . y ; float li = 2.0 * dD / ( dD + lk - ( 2.0 * eq - 1.0 ) * ( lk - dD ) ) ; return li ; }".split(" ")}]}}]}]}}]}]};a["include/dynamic_grass.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DYNAMIC_GRASS_GLSLV",l:{a:"grp",f:[{a:"define",
c:"DYNAMIC_GRASS_GLSLV",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"GRASS_TEXTURE_SIZE",b:["1024.0"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"vec2 lp ( vec3 O , float lm , vec2 ln ) { vec2 lo = vec2 ( ( O . x - ln . x ) / lm , ( O . y - ln . y ) / lm ) ; return fract ( lo ) ; } vec2 lq ( vec2 gT , float lm , vec2 ln ) { return vec2 ( gT . x * lm , gT . y * lm ) + ln ; } au lr ( ) { return au ( vec3 ( - 10000.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"vec4 lB ( sampler2D ls , vec2 lt ) { float lu = 1.0 / GRASS_TEXTURE_SIZE ; vec4 lv = GLSL_TEXTURE ( ls , lt ) ; vec4 lw = GLSL_TEXTURE ( ls , lt + vec2 ( lu , 0.0 ) ) ; vec4 lx = GLSL_TEXTURE ( ls , lt + vec2 ( 0.0 , lu ) ) ; vec4 ly = GLSL_TEXTURE ( ls , lt + vec2 ( lu , lu ) ) ; float a = fract ( lt . x * GRASS_TEXTURE_SIZE ) ; vec4 lz = mix ( lv , lw , a ) ; vec4 lA = mix ( lx , ly , a ) ; float b = fract ( lt . y * GRASS_TEXTURE_SIZE ) ; return mix ( lz , lA , b ) ; }".split(" ")}]}}]},
{a:"txt",b:"au aZ ( vec3 O , vec3 V , vec3 lC , vec3 W , vec3 U , vec3 ao , PRECISION sampler2D lD , sampler2D lE , vec3 lF , float lG , vec3 lH , vec4 lI , mat3 N , mat3 Z ) { vec3 lJ = T ( lI , vec3 ( 0.0 , 0.0 , - 1.0 ) ) ; float lK = - lJ . x ; float lL = lJ . y ; vec2 ln = vec2 ( lH . x - lG * ( 1.0 + lK ) / 2.0 , lH . y - lG * ( 1.0 - lL ) / 2.0 ) ; vec2 lM = lp ( ao , lG , ln ) ; float lN = lG / 2.0 ; vec2 lO = abs ( lq ( lM - vec2 ( 0.5 ) , lG , vec2 ( 0.0 ) ) ) ; float lP = lN * ( 1.0 + sqrt ( 2.0 ) ) / 2.0 ; if ( length ( lO ) > lP ) return lr ( ) ; float lQ = lG / lF . z ; vec2 lR = ( lM - vec2 ( 0.5 ) ) * lQ + vec2 ( 0.5 ) ; vec3 lS = lJ * ( lG / lF . z - 1.0 ) / 2.0 ; lR . x += lS . x ; lR . y += lS . y ; vec4 lT = GLSL_TEXTURE ( lE , lR ) ; float hG = lT . r ; if ( hG < u_scale_threshold ) return lr ( ) ; float lU = lF . y - lF . x ;".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"float ci = lF . y - ( lB ( lD , lR ) ) . r * lU ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float ci = lF . y - ( GLSL_TEXTURE ( lD , lR ) ) . r * lU ;".split(" ")}]}}]},{a:"txt",b:"vec2 lV = O . xy - ao . xy ; ao . xy = lq ( lM , lG , ln ) ; ao . z = ci ; O . xy = ao . xy + lV ; O . z *= hG ; O . z += ci ; vec3 aQ = lT . gba ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"O -= ao ; mat3 lW = as ( lH , ao , N , Z ) ; au aw = av ( O , ao , V , lC , W , U , lW ) ; aw . ao = ao ; aw . aQ = aQ ; return lX ( aw ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return lX ( au ( O , ao , V , lC , W , U , aQ ) ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/environment.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"ENVIRONMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"ENVIRONMENT_GLSLF",b:[""]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"txt",b:"vec3 cz ( vec3 U ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["SKY_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE_CUBE ( u_sky_texture , U ) . rgb ;".split(" ")}]}},{a:"elif",j:["SKY_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float lY = 0.5 * U . z + 0.5 ; return mix ( u_horizon_color , u_zenith_color , lY ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fog.glslf"]={a:"grp",f:[{a:"cond",
f:[{a:"ifndef",c:"FOG_GLSLF",l:{a:"grp",f:[{a:"define",c:"FOG_GLSLF",b:[""]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"FOG_TYPE",b:["QUADRATIC"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:"void mc ( inout vec3 aQ , in float lZ , in float ci , in vec4 l_ ) { float ma = clamp ( ( lZ - u_fog_params . z ) / u_fog_params . y , 0.0 , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FOG_TYPE","QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["ma","*=","ma",";"]}]}},{a:"elif",j:["FOG_TYPE","LINEAR",{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["FOG_TYPE","INVERSE_QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ma = sqrt ( ma ) ;".split(" ")}]}}]},{a:"txt",b:"if ( u_fog_params . w > 0.0 ) { if ( ci > u_fog_params . w ) ma = 0.0 ; else { float mb = ( u_fog_params . w - max ( ci , 0.0 ) ) / u_fog_params . w ; ma *= mb * mb ; } } l_ . a = 1.0 - ( 1.0 - ma ) * ( 1.0 - u_fog_params . x ) ; aQ = mix ( aQ , l_ . rgb , l_ . a ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 mh ( in mat4 md , in vec3 D ) { vec3 me = mix ( md [ 0 ] . rgb , md [ 1 ] . rgb , ( D . x + 1.0 ) / 2.0 ) ; vec3 mf = mix ( md [ 2 ] . rgb , md [ 3 ] . rgb , ( D . y + 1.0 ) / 2.0 ) ; vec3 mg = vec3 ( md [ 0 ] . a , md [ 1 ] . a , md [ 2 ] . a ) ; vec3 aQ = mix ( me , mf , abs ( D . y ) ) ; aQ = mix ( aQ , mg , abs ( D . z ) ) ; bC ( aQ ) ; return aQ ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"void mj ( inout float mi ) { mi -= 0.5 ; mi = 4.0 * ( mi * mi * mi ) + 0.5 ; } void mp ( inout vec3 aQ , in float lZ , in vec3 D , in float eC , in vec4 mk , in float fl ) { float ml = max ( D . z , 0.0 ) ; float mm = max ( lZ - max ( eC / ml , 0.0 ) , 0.0 ) ; float mn = mk . w * mm ; vec3 eD = vec3 ( 0.0 , 0.02 , 0.05 ) ; vec3 mo = mk . rgb ; mn = min ( mn , 1.0 ) ; mj ( mn ) ; mn *= clamp ( 2.0 - fl , 0.0 , 1.0 ) ; vec3 eE = mix ( mo , eD , min ( ml , 1.0 ) ) ; eC = clamp ( - eC * 0.03 , 0.0 , 0.8 ) ; eE *= 1.0 - eC ; aQ = mix ( aQ , eE , mn ) ; }".split(" ")}]}}]},
{a:"txt",b:"void bR ( inout vec3 aQ , float lZ , vec3 D , float bO ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 md = mh ( u_cube_fog , D ) ; vec4 eE = vec4 ( md , u_fog_color_density . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4","eE","=","u_fog_color_density",";"]}]}}]},{a:"txt",b:"mc ( aQ , lZ , h . z , eE ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"mp ( aQ , lZ , D , u_cam_water_depth , u_underwater_fog_color_density , bO ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fxaa.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSLF",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSLF",b:[""]},{a:"var",c:"FXAA_BLEND4WEB",b:["1"]},{a:"var",c:"FXAA_QUALITY_P12",b:["0.0"]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PS3",l:{a:"grp",f:[{a:"define",c:"FXAA_PS3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_360",l:{a:"grp",f:[{a:"define",c:"FXAA_360",b:["0"]}]}}]},
{a:"cond",f:[{a:"ifndef",c:"FXAA_360_OPT",l:{a:"grp",f:[{a:"define",c:"FXAA_360_OPT",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC",l:{a:"grp",f:[{a:"define",c:"FXAA_PC",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC_CONSOLE",l:{a:"grp",f:[{a:"define",c:"FXAA_PC_CONSOLE",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_120",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_120",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_130",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_130",b:["0"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_HLSL_3",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_4",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_4",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_5",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_5",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GREEN_AS_LUMA",l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_EARLY_EXIT",l:{a:"grp",f:[{a:"define",c:"FXAA_EARLY_EXIT",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_DISCARD",l:{a:"grp",f:[{a:"define",c:"FXAA_DISCARD",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"cond",f:[{a:"ifdef",c:"GL_EXT_gpu_shader4",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["FXAA_HLSL_5",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",
b:["1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["4.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",
b:["2.0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.125"]}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.25"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_QUALITY_PRESET",l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",10,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",
c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",11,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
12,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",13,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",
b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",14,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",15,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",
b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",20,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",21,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",
c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",22,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
23,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",24,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",25,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",26,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["9"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",27,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["10"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",28,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["11"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",29,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"cond",
f:[{a:"if",j:["FXAA_QUALITY_PRESET",39,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},
{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"include",F:"color_util.glslf"},{a:"txt",b:"float mq ( float x ) { return clamp ( x , 0.0 , 1.0 ) ; }".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_BLEND4WEB",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 mr ( sampler2D t , vec2 p ) { return GLSL_TEXTURE ( t , p ) ; } vec4 mt ( sampler2D t , vec2 p , vec2 ms , vec2 r ) { return GLSL_TEXTURE ( t , p + ( ms * r ) ) ; }".split(" ")}]}}]},
{a:"txt",b:"vec4 gv ( vec2 fn , sampler2D ia , vec2 mu , float mv , float mw , float mx ) { vec2 my ; my . x = fn . x ; my . y = fn . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 mz = mr ( ia , my ) ; float gf = ge ( mz ) ; float mA = ge ( mt ( ia , my , vec2 ( 0 , 1 ) , mu . xy ) ) ; float mB = ge ( mt ( ia , my , vec2 ( 1 , 0 ) , mu . xy ) ) ; float mC = ge ( mt ( ia , my , vec2 ( 0 , - 1 ) , mu . xy ) ) ; float mD = ge ( mt ( ia , my , vec2 ( - 1 , 0 ) , mu . xy ) ) ;".split(" ")}]}}]},
{a:"txt",b:"float mE = max ( mA , gf ) ; float mF = min ( mA , gf ) ; float mG = max ( mB , mE ) ; float mH = min ( mB , mF ) ; float mI = max ( mC , mD ) ; float mJ = min ( mC , mD ) ; float mK = max ( mI , mG ) ; float mL = min ( mJ , mH ) ; float mM = mK * mw ; float mN = mK - mL ; float mO = max ( mx , mM ) ; bool mP = mN < mO ; if ( mP ) return mz ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float gh = ge ( mt ( ia , my , vec2 ( - 1 , - 1 ) , mu . xy ) ) ; float gk = ge ( mt ( ia , my , vec2 ( 1 , 1 ) , mu . xy ) ) ; float gi = ge ( mt ( ia , my , vec2 ( 1 , - 1 ) , mu . xy ) ) ; float gj = ge ( mt ( ia , my , vec2 ( - 1 , 1 ) , mu . xy ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[]}}]},{a:"txt",b:"float mQ = mC + mA ; float mR = mD + mB ; float mS = 1.0 / mN ; float mT = mQ + mR ; float mU = ( - 2.0 * gf ) + mQ ; float mV = ( - 2.0 * gf ) + mR ; float mW = gi + gk ; float mX = gh + gi ; float mY = ( - 2.0 * mB ) + mW ; float mZ = ( - 2.0 * mC ) + mX ; float m_ = gh + gj ; float na = gj + gk ; float nb = ( abs ( mU ) * 2.0 ) + abs ( mY ) ; float nc = ( abs ( mV ) * 2.0 ) + abs ( mZ ) ; float nd = ( - 2.0 * mD ) + m_ ; float ne = ( - 2.0 * mA ) + na ; float nf = abs ( nd ) + nb ; float ng = abs ( ne ) + nc ; float nh = m_ + mW ; float ni = mu . x ; bool nj = nf >= ng ; float nk = mT * 2.0 + nh ; if ( ! nj ) mC = mD ; if ( ! nj ) mA = mB ; if ( nj ) ni = mu . y ; float nl = ( nk * ( 1.0 / 12.0 ) ) - gf ; float nm = mC - gf ; float nn = mA - gf ; float no = mC + gf ; float np = mA + gf ; bool nq = abs ( nm ) >= abs ( nn ) ; float nr = max ( abs ( nm ) , abs ( nn ) ) ; if ( nq ) ni = - ni ; float ns = mq ( abs ( nl ) * mS ) ; vec2 nt ; nt . x = my . x ; nt . y = my . y ; vec2 nu ; nu . x = ( ! nj ) ? 0.0 : mu . x ; nu . y = ( nj ) ? 0.0 : mu . y ; if ( ! nj ) nt . x += ni * 0.5 ; if ( nj ) nt . y += ni * 0.5 ; vec2 nv ; nv . x = nt . x - nu . x * FXAA_QUALITY_P0 ; nv . y = nt . y - nu . y * FXAA_QUALITY_P0 ; vec2 nw ; nw . x = nt . x + nu . x * FXAA_QUALITY_P0 ; nw . y = nt . y + nu . y * FXAA_QUALITY_P0 ; float nx = ( ( - 2.0 ) * ns ) + 3.0 ; float ny = ge ( mr ( ia , nv ) ) ; float nz = ns * ns ; float nA = ge ( mr ( ia , nw ) ) ; if ( ! nq ) no = np ; float nB = nr * 1.0 / 4.0 ; float nC = gf - no * 0.5 ; float nD = nx * nz ; bool nE = nC < 0.0 ; ny -= no * 0.5 ; nA -= no * 0.5 ; bool nF = abs ( ny ) >= nB ; bool nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P1 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P1 ; bool nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P1 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P1 ; if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P2 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P2 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P2 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P2 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P3 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P3 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P3 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P3 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",4,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P4 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P4 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P4 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P4 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",5,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P5 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P5 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P5 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P5 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",6,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P6 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P6 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P6 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P6 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",7,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P7 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P7 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P7 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P7 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",8,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P8 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P8 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P8 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P8 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",9,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P9 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P9 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P9 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P9 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",10,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P10 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P10 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P10 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P10 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",11,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P11 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P11 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P11 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P11 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",12,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P12 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P12 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P12 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P12 ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:"} float nI = my . x - nv . x ; float nJ = nw . x - my . x ; if ( ! nj ) nI = my . y - nv . y ; if ( ! nj ) nJ = nw . y - my . y ; bool nK = ( ny < 0.0 ) != nE ; float nL = ( nJ + nI ) ; bool nM = ( nA < 0.0 ) != nE ; float nN = 1.0 / nL ; bool nO = nI < nJ ; float nP = min ( nI , nJ ) ; bool nQ = nO ? nK : nM ; float nR = nD * nD ; float nS = ( nP * ( - nN ) ) + 0.5 ; float nT = nR * mv ; float nU = nQ ? nS : 0.0 ; float nV = max ( nU , nT ) ; if ( ! nj ) my . x += nV * ni ; if ( nj ) my . y += nV * ni ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_DISCARD",1,{a:"equal_expr",o:2},"FXAA_BLEND4WEB",1,{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return mr ( ia , my ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( mr ( ia , my ) . xyz , gf ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/halo_color.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"HALO_COLOR_GLSLF",l:{a:"grp",f:[{a:"define",c:"HALO_COLOR_GLSLF",b:[""]},{a:"var",c:"NUM_RINGS",b:["0"]},{a:"var",
c:"NUM_LINES",b:["0"]},{a:"var",c:"NUM_STARS",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const int nW = NUM_RINGS ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const int nW = NUM_LINES ;".split(" ")}]}}]},{a:"txt",b:"float nX ( float x ) { return x - floor ( x * ( 1.0 / 0.01 ) ) * 0.01 ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"void od ( inout float nY , in float nZ [ nW ] , in float n_ ) { for ( int a = 0 ; a < NUM_RINGS ; a ++ ) { float oa = 40.0 * nZ [ a ] ; float ob = 300.0 * ( nX ( oa ) - 0.005 ) ; float oc = oa ; float ma = abs ( oc * ( u_halo_size * ob - n_ ) ) ; nY += 1.0 - min ( ma , 1.0 ) ; } }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"void oi ( inout float oe , in float nZ [ nW ] , in float aM ) { for ( int a = 0 ; a < NUM_LINES ; a ++ ) { float of = nZ [ a ] ; float og = of ; float oh = 1000.0 * ( nX ( of ) - 0.005 ) ; float ma = 20.0 * abs ( og * A . x + oh * A . y ) ; oe += 1.0 - min ( ma , 1.0 ) ; } oe *= aM ; }".split(" ")}]}}]},
{a:"txt",b:"void om ( inout float aM , in vec2 b_ ) { float oj , bK ; bK = atan ( b_ . y , b_ . x ) ; bK *= ( 1.0 + 0.25 * float ( NUM_STARS ) ) ; float ok = cos ( bK ) ; float ol = sin ( bK ) ; bK = ( ok * b_ . x + ol * b_ . y ) * ( ok * b_ . y - ol * b_ . x ) ; oj = abs ( bK ) ; if ( oj < 1.0 ) { oj = ( 0.01 * u_halo_size ) / ( oj ) ; aM *= sqrt ( min ( oj , 1.0 ) ) ; } } vec4 bh ( ) { float aM = ( A . x * A . x + A . y * A . y ) ; float n_ = sqrt ( aM ) ; aM = max ( 1.0 - aM , 0.0 ) ; aM = pow ( aM , u_halo_hardness ) ; float L = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float nZ [ nW ] ; for ( int cl = 0 ; cl < nW ; cl ++ ) { nZ [ cl ] = fract ( bf / float ( cl + 1 ) ) - 1.0 ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"float nY = 0.0 ; od ( nY , nZ , n_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"float oe = 0.0 ; oi ( oe , nZ , aM ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_STARS"],
l:{a:"grp",f:[{a:"txt",b:"om ( aM , A ) ;".split(" ")}]}}]},{a:"txt",b:"aM *= L ; vec3 aQ = u_diffuse_color . rgb ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"nY *= aM ; aQ += u_halo_rings_color * nY ; aM += nY ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"oe *= L ; aQ += u_halo_lines_color * oe ; aM += oe ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"aM *= max ( 1.0 - 2.0 * u_sun_intensity . x , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float kZ = u_halo_stars_blend * ( be . y - u_halo_stars_height ) ; aM *= clamp ( kZ , 0.0 , 1.0 ) ; aM *= min ( u_cam_water_depth + 2.0 * WAVES_HEIGHT , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 on = vec4 ( aQ , aM ) ; return on ; }".split(" ")}]}}]}]};a["include/lighting_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"LIGHTING_NODES_GLSLF",l:{a:"grp",
f:[{a:"define",c:"LIGHTING_NODES_GLSLF",b:[""]},{a:"include",F:"std.glsl"},{a:"node",c:"LIGHTING_BEGIN",C:[],B:[{a:"node_out",c:"oB",i:["vec3"],g:!1},{a:"node_out",c:"oC",i:["vec3"],g:!1},{a:"node_out",c:"oD",i:["vec3"],g:!1},{a:"node_out",c:"oE",i:["vec3"],g:!0},{a:"node_out",c:"oF",i:["vec3"],g:!0},{a:"node_out",c:"oG",i:["vec2"],g:!0},{a:"node_out",c:"oH",i:["vec2"],g:!0},{a:"node_out",c:"oI",i:["vec4"],g:!0},{a:"node_out",c:"oJ",i:["float"],g:!0},{a:"node_out",c:"oK",i:["vec4"],g:!0}],u:[{a:"txt",
b:"oB = oo ; oC = op ; oD = oq ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oE"],u:[{a:"txt",b:["oE","=","or",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oF"],u:[{a:"txt",b:["oF","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oH"],u:[{a:"txt",b:["oH","=","ov",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oG"],u:[{a:"txt",b:["oG","=","ow",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oI"],u:[{a:"txt",b:["oI","=","ox",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_oJ"],u:[{a:"txt",b:["oJ","=","oy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oK"],u:[{a:"txt",b:["oK","=","oz",";"]}]}]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",
c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",c:"oU",i:["float"],g:!1}],u:[{a:"txt",b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE",
"POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; float oW = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oW *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oW *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]},{a:"txt",b:["oT","*=","oW",";"]}]},{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},
{a:"node_in",c:"pc",i:["vec2"],g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , B . xyz ) ; pa = cross ( pe , B . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , B . xyz ) ; pi = cross ( pe , B . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{a:"txt",b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , B . xyz ) ; pn = cross ( pe , B . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{a:"txt",
b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , B . xyz ) ; pF = cross ( pe , B . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},{a:"txt",
b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],g:!1},
{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , B . xyz ) ; pL = cross ( pe , B . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g != _0_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g != _0_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g != _0_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g != _0_0 ) { if ( qB < 1.0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( 1.0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = 0.0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"txt",b:"qR = qG + qO * qN * qI ; qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]},{a:"node",c:"LIGHTING_END",C:[],B:[{a:"node_in",c:"qS",i:["vec4"],g:!1},{a:"node_in",c:"qT",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = qS . rgb ; oA = qT ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void cK ( vec3 oo , vec3 op , vec3 oq , vec3 or , vec3 os , vec3 ot , vec3 ou , vec2 ov , vec2 ow , vec4 ox , float oy , vec4 oz , out vec3 E , out vec3 oA ) {".split(" ")},{a:"nodes_main"},{a:"txt",
b:["}"]}]}}]}]};a["include/math.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MATH_GLSLV",l:{a:"grp",f:[{a:"define",c:"MATH_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"struct au { vec3 O ; vec3 ao ; vec3 V ; vec3 aB ; vec3 W ; vec3 U ; vec3 aQ ; } ; bool qU ( vec3 a , vec3 b ) { return any ( lessThan ( abs ( a - b ) , vec3 ( EPSILON ) ) ) ; } vec3 T ( in vec4 q , in vec3 kQ ) { return kQ + 2.0 * cross ( q . xyz , cross ( q . xyz , kQ ) + q . w * kQ ) ; } vec4 kR ( in vec4 qV ) { return vec4 ( - qV . xyz , qV . w ) ; } vec4 qX ( in vec4 a , in vec4 b ) { vec4 qW ; qW . x = a . x * b . w + a . w * b . x + a . y * b . z - a . z * b . y ; qW . y = a . y * b . w + a . w * b . y + a . z * b . x - a . x * b . z ; qW . z = a . z * b . w + a . w * b . z + a . x * b . y - a . y * b . x ; qW . w = a . w * b . w - a . x * b . x - a . y * b . y - a . z * b . z ; return qW ; } vec4 X ( in vec3 qY , in float qZ ) { vec4 qW ; qZ = qZ * 0.5 ; float s = sin ( qZ ) ; qW . x = s * qY [ 0 ] ; qW . y = s * qY [ 1 ] ; qW . z = s * qY [ 2 ] ; qW . w = cos ( qZ ) ; return qW ; } vec4 rd ( in vec3 bD , in vec3 q_ ) { vec4 qW ; float dz = dot ( q_ , bD ) ; vec3 rc = cross ( q_ , bD ) ; qW . xyz = rc . xyz ; qW . w = 1.0 + dz ; return normalize ( qW ) ; } vec3 rh ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf * re . w ; qW = T ( qV , qW ) ; qW += re . xyz ; return qW ; } vec3 ap ( mat3 ri , vec3 rf ) { vec3 qW = rf * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; qW += ri [ 0 ] ; return qW ; } vec3 rj ( vec4 re , vec4 qV , vec3 bD ) { vec3 qW = bD * re . w ; qW = T ( qV , qW ) ; return qW ; } vec3 _ ( mat3 ri , vec3 bD ) { vec3 qW = bD * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; return qW ; } vec3 rk ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf - re . xyz ; qW = T ( kR ( qV ) , qW ) ; qW /= re . w ; return qW ; } vec3 rl ( vec4 re , vec4 qV , vec3 bD ) { return T ( kR ( qV ) , bD ) / re . w ; } mat4 rm ( ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rn ( float bK ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 ro ( float bK ) { return mat4 ( cos ( bK ) , _0_0 , - sin ( bK ) , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , sin ( bK ) , _0_0 , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rp ( float bK ) { return mat4 ( cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } au lX ( in au kQ ) { return au ( kQ . O , kQ . ao , normalize ( kQ . V ) , normalize ( kQ . aB ) , normalize ( kQ . W ) , normalize ( kQ . U ) , kQ . aQ ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 aC ( vec4 f ) { float fT = f . x ; float fU = f . y ; float fV = f . w ; vec3 rq ; rq . x = ( fT + fV ) / 2.0 ; rq . y = ( fU + fV ) / 2.0 ; rq . z = fV ; return rq ; }".split(" ")}]}}]},{a:"txt",b:"mat3 da ( ) { return mat3 ( _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 ) ; } mat4 bc ( mat3 t ) { mat4 rs ; rs [ 0 ] [ 0 ] = ( _1_0 - ( t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 1 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 2 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 3 ] = _0_0 ; rs [ 1 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) - t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 1 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 2 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 3 ] = _0_0 ; rs [ 2 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 1 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 2 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 3 ] = _0_0 ; rs [ 3 ] [ 0 ] = t [ 0 ] [ 0 ] ; rs [ 3 ] [ 1 ] = t [ 0 ] [ 1 ] ; rs [ 3 ] [ 2 ] = t [ 0 ] [ 2 ] ; rs [ 3 ] [ 3 ] = 1.0 ; return rs ; } mat3 aY ( in mat3 ri , in mat3 rt ) { mat3 qW ; vec3 rf = rt [ 0 ] ; vec4 re = vec4 ( ri [ 0 ] , ri [ 1 ] [ 0 ] ) ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW [ 0 ] = rh ( re , qV , rf ) ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] * rt [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = ri [ 1 ] [ 1 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 1 ] + ri [ 1 ] [ 2 ] * rt [ 2 ] [ 0 ] - ri [ 2 ] [ 0 ] * rt [ 1 ] [ 2 ] ; qW [ 1 ] [ 2 ] = ri [ 1 ] [ 2 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 2 ] + ri [ 2 ] [ 0 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 2 ] [ 0 ] ; qW [ 2 ] [ 0 ] = ri [ 2 ] [ 0 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 2 ] [ 0 ] + ri [ 1 ] [ 1 ] * rt [ 1 ] [ 2 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 1 ] ; qW [ 2 ] [ 1 ] = ri [ 2 ] [ 1 ] * rt [ 2 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 2 ] - ri [ 2 ] [ 0 ] * rt [ 2 ] [ 0 ] ; return qW ; } mat3 dd ( in vec4 qV , in mat3 ri ) { mat3 qW ; qW [ 0 ] = ri [ 0 ] ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = qV [ 0 ] ; qW [ 1 ] [ 2 ] = qV [ 1 ] ; qW [ 2 ] [ 0 ] = qV [ 2 ] ; qW [ 2 ] [ 1 ] = qV [ 3 ] ; return qW ; } vec4 R ( in vec4 ru ) { return normalize ( ru ) ; } vec4 R ( in vec4 ru , out float P , out float Q ) { vec4 qV = R ( ru ) ; P = length ( ru ) * M_PI ; Q = sign ( ru [ 3 ] ) ; return R ( ru ) ; }".split(" ")}]}}]}]};
a["include/mirror.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MIRROR_GLSLF",l:{a:"grp",f:[{a:"define",c:"MIRROR_GLSLF",b:[""]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:[""]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.1"]},{a:"txt",b:"float rv ( in vec3 D , vec3 eJ , float d_ , float fg ) { vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float r = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; return r ; } void cL ( inout vec3 rw , vec3 D , vec3 U , float rx , mat3 N ) { vec3 eJ = reflect ( - D , U ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float r = 1.0 ; if ( d_ != 0.0 ) r = rv ( D , eJ , d_ , fg ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eO = GLSL_TEXTURE_CUBE ( u_cube_reflection , eJ ) . xyz ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ry = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rz = U - ry ; vec2 rA = _ ( N , rz ) . xy ; vec2 rB = l . xy / l . z ; rB += rA * REFL_BUMP ; vec3 eO = GLSL_TEXTURE ( u_plane_reflection , rB ) . rgb ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 eO = vec3 ( 1.0 ) ; rx = 0.0 ;".split(" ")}]}}]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eO = GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"bC ( eO . rgb ) ; rw = mix ( rw , eO , rx * r ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR_STANDARD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 rD ( float ed , vec3 rC , float ec ) { return rC + ( max ( vec3 ( 1.0 - ec ) , rC ) - rC ) * pow ( 1.0 - ed , 5.0 ) ; } vec3 rO ( vec3 rw , vec3 rE , vec3 D , vec3 U , float rF , float rG , mat3 N ) { vec3 d_ = U ; vec3 ek = D ; vec3 ej = reflect ( - D , U ) ; float ec = sqrt ( rG ) ; vec3 rC = vec3 ( 0.04 ) ; rC = mix ( rC , rE , rF ) ; vec3 rH = rD ( max ( dot ( d_ , ek ) , 0.0 ) , rC , ec ) ; vec3 rI = rH ; vec3 rJ = 1.0 - rI ; rJ *= 1.0 - rF ; vec3 bt = GLSL_TEXTURE_CUBE ( u_cube_irradiance , U ) . xyz ; vec3 rK = bt * rw ; const float rL = 5.0 ; vec3 ei = GLSL_TEXTURE_CUBE_LOD ( u_cube_r_convolution , ej , ec * rL ) . rgb ; vec2 rM = GLSL_TEXTURE ( u_brdf , vec2 ( max ( dot ( d_ , ek ) , 0.0 ) , ec ) ) . rg ; vec3 cJ = ei * ( rH * rM . x + rM . y ) ; vec3 rN = ( rJ * rK + cJ ) ; return rN ; }".split(" ")}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 rO ( vec3 rw , vec3 rE , vec3 D , vec3 U , float rF , float rG , mat3 N ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_BSDF_SKY_DIM"],l:{a:"grp",f:[{a:"txt",b:"float rP = max ( dot ( U , D ) , _0_0 ) ; float rQ = rF + ( max ( _1_0 - rG , rF ) - rF ) * pow ( _1_0 - rP , 5.0 ) ; vec3 eJ = reflect ( - D , U ) ; float rR = 2.0 / ( rG * rG ) - 2.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",
f:[{a:"txt",b:["float","rS","=","u_bsdf_cube_sky_dim",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float rS = float ( textureSize ( u_sky_reflection , 0 ) . x ) ;".split(" ")}]}}]},{a:"txt",b:"float rT = log2 ( rS * sqrt ( 3.0 ) ) - _0_5 * log2 ( rR + _1_0 ) ; vec3 eO = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , eJ , rT ) . xyz ; bC ( eO ) ; eO *= rE ; vec3 rU = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , U , 100.0 ) . xyz ; bC ( rU ) ; rU *= rw ; return rU + rQ * eO ;".split(" ")}]}},{a:"else",l:{a:"grp",
f:[{a:"txt",b:["return","rw",";"]}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"HAS_REFRACT_TEXTURE",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"REFLECTION_TYPE",
b:["REFL_NONE"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"IS_WORLD",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"mirror.glslf"},{a:"include",F:"shadow.glslf"},{a:"include",F:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"refraction.glslf"}]}}]},
{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","rV",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"vec3 rY ( in vec3 rW , in float rX ) { vec3 eX = vec3 ( _0_0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"eX = cN ( l , rW . xy * rX ) ;".split(" ")}]}},{a:"elif",
j:["HAS_REFRACT_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"eX = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{a:"txt",b:["return","eX",";","}"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED","USE_NODE_TEX_COORD_UV","USE_NODE_UVMAP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 rZ ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 r_ ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float sd ( vec3 sa , vec3 sb , float sc ) { float du = abs ( dot ( sa , sb ) ) ; float g = sc * sc - _1_0 + du * du ; float dY ; if ( g > _0_0 ) { g = sqrt ( g ) ; float cB = ( g - du ) / ( g + du ) ; float hO = ( du * ( g + du ) - _1_0 ) / ( du * ( g - du ) + _1_0 ) ; dY = _0_5 * cB * cB * ( _1_0 + hO * hO ) ; } else { dY = _1_0 ; } return dY ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
C:[],B:[{a:"node_out",c:"sG",i:["vec3"],g:!0},{a:"node_out",c:"sH",i:["float"],g:!0},{a:"node_out",c:"sI",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sG"],u:[{a:"txt",b:"sG = normalize ( sD . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = abs ( sD . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:"sI = length ( sD . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",C:[],B:[{a:"node_in",c:"sJ",i:["float"],
g:!1},{a:"node_in",c:"sK",i:["float"],g:!1},{a:"node_in",c:"sL",i:["float"],g:!1},{a:"node_out",c:"sM",i:["vec3"],g:!1}],u:[{a:"txt",b:"sM = vec3 ( sJ , sK , sL ) ;".split(" ")}]},{a:"node",c:"COMBHSV",C:[],B:[{a:"node_in",c:"sN",i:["float"],g:!1},{a:"node_in",c:"sO",i:["float"],g:!1},{a:"node_in",c:"sP",i:["float"],g:!1},{a:"node_out",c:"sQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"sQ = kh ( vec3 ( sN , sO , sP ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",C:[],B:[{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",
b:"sR = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",C:[],B:[{a:"node_out",c:"sS",i:["vec3"],g:!1}],u:[{a:"txt",b:"sS = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_out",c:"sT",i:["vec3"],g:!1},{a:"node_param",c:"se",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"sT = rZ ( se ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",C:[],B:[{a:"node_out",c:"sU",i:["vec3"],g:!1}],u:[{a:"txt",b:"sU = 2.0 * rV - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",
C:[],B:[{a:"node_out",c:"sV",i:["vec3"],g:!1},{a:"node_param",c:"sf",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sV = max ( vec3 ( _0_0 ) , sf ) ; bC ( sV ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_out",c:"sW",i:["float"],g:!1},{a:"node_param",c:"sg",i:["GLSL_IN","float"],g:!1}],u:[{a:"txt",b:"sW = max ( _0_0 , sg ) ; bC ( sW ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_out",c:"sX",i:["float"],g:!1},{a:"node_out",c:"sY",i:["float"],g:!1},{a:"node_param",c:"sh",
i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"sX = max ( _0_0 , sh [ 0 ] ) ; sY = max ( _0_0 , sh [ 1 ] ) ; bC ( sX ) ; bC ( sY ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_out",c:"sZ",i:["float"],g:!1},{a:"node_out",c:"s_",i:["float"],g:!1},{a:"node_out",c:"ta",i:["float"],g:!1},{a:"node_param",c:"si",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sZ = max ( _0_0 , si [ 0 ] ) ; s_ = max ( _0_0 , si [ 1 ] ) ; ta = max ( _0_0 , si [ 2 ] ) ; bC ( sZ ) ; bC ( s_ ) ; bC ( ta ) ;".split(" ")}]},
{a:"node",c:"GEOMETRY_NO",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"tb",i:["vec3"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["tc","=","tb",";"]}]},{a:"node_else",u:[{a:"txt",b:"tc = sw . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",C:[],B:[{a:"node_out",c:"td",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_BF",C:[],B:[{a:"node_out",c:"te",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"te = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"te = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",C:[],B:[{a:"node_out",c:"tf",i:["vec3"],g:!1}],u:[{a:"txt",
b:"tf = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",C:[],B:[{a:"node_out",c:"tg",i:["vec3"],g:!1}],u:[{a:"txt",b:"tg = sD . xyz ;".split(" ")}]},{a:"node",c:"GEOMETRY_GL",C:[],B:[{a:"node_out",c:"th",i:["vec3"],g:!1}],u:[{a:"txt",b:["th","=","os",";"]}]},{a:"node",c:"GEOMETRY_IN",C:[],B:[{a:"node_out",c:"ti",i:["vec3"],g:!1}],u:[{a:"txt",b:["ti","=","ou",";"]}]},{a:"node",c:"NEW_GEOMETRY",C:[],B:[{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},
{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["vec3"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["vec3"],g:!1},{a:"node_out",c:"tr",i:["float"],g:!1},{a:"node_out",c:"tu",i:["float"],g:!1}],u:[{a:"txt",b:"tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = vec3 ( _0_0 ) ; to = vec3 ( _0_0 ) ; tr = _0_0 ; tu = _0_0 ;".split(" ")}]},{a:"node",c:"HUE_SAT",C:[],B:[{a:"node_in",c:"tv",i:["float"],g:!1},{a:"node_in",c:"tw",i:["float"],
g:!1},{a:"node_in",c:"tx",i:["float"],g:!1},{a:"node_in",c:"ty",i:["float"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_out",c:"tA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 kg = kf ( tz ) ; kg [ 0 ] += ( tv - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tw , tx ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; tA = mix ( tz , kh ( kg ) , ty ) ;".split(" ")}]},
{a:"node",c:"INVERT",C:[],B:[{a:"node_in",c:"tB",i:["float"],g:!1},{a:"node_in",c:"tC",i:["vec3"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = mix ( tC , vec3 ( _1_0 ) - tC , tB ) ;".split(" ")}]},{a:"node",c:"LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],B:[{a:"node_out",
c:"tE",i:["vec3"],g:!0},{a:"node_out",c:"tF",i:["vec3"],g:!1},{a:"node_out",c:"tG",i:["float"],g:!1},{a:"node_out",c:"tH",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["LAMP_INDEX",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 tI = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tJ = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"tF = h - tJ ; tG = length ( tF ) ; tF = normalize ( tF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:"tH = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tG * tG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float oY = dot ( - tF , tI ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tH *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"tH *= max ( LAMP_LIGHT_DIST - tG , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tF"],u:[{a:"txt",b:["tF","=","tI",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tG"],u:[{a:"txt",b:"tG = length ( tJ - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:["tH","=","_1_0",";"]}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:"tF = vec3 ( _0_0 ) ; tG = 0.0 ;".split(" ")}]}]}]},{a:"node",c:"NORMAL",C:[],B:[{a:"node_in",c:"tK",i:["vec3"],g:!1},{a:"node_out",c:"tL",i:["vec3"],g:!0},{a:"node_out",c:"tM",i:["float"],g:!0},{a:"node_param",c:"sj",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tL"],u:[{a:"txt",b:["tL","=","sj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tM"],u:[{a:"txt",b:"tM = - dot ( tK , sj ) ;".split(" ")}]}]}]},
{a:"node",c:"B4W_VECTOR_VIEW",C:[],B:[{a:"node_in",c:"tN",i:["vec3"],g:!1},{a:"node_out",c:"tO",i:["vec3"],g:!1}],u:[{a:"txt",b:"tO = - _ ( u_view_tsr_frag , tN ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",C:[],B:[{a:"node_in",c:"tP",i:["vec3"],g:!1},{a:"node_in",c:"tQ",i:["vec3"],g:!1},{a:"node_in",c:"tR",i:["float"],g:!1},{a:"node_in",c:"tS",i:["vec3"],g:!1},{a:"node_in",c:"tT",i:["float"],g:!1},{a:"node_in",c:"tU",i:["float"],g:!1},{a:"node_in",c:"tV",i:["vec3"],g:!1},{a:"node_in",c:"tW",i:["vec3"],
g:!1},{a:"node_in",c:"tX",i:["float"],g:!1},{a:"node_in",c:"tY",i:["vec3"],g:!1},{a:"node_in",c:"tZ",i:["float"],g:!1},{a:"node_out",c:"t_",i:["vec3"],g:!1},{a:"node_out",c:"ua",i:["vec3"],g:!1},{a:"node_out",c:"ub",i:["vec3"],g:!1},{a:"node_out",c:"uc",i:["vec3"],g:!1},{a:"node_out",c:"ud",i:["vec3"],g:!1},{a:"node_out",c:"ue",i:["vec4"],g:!1},{a:"node_out",c:"uf",i:["vec4"],g:!1},{a:"node_out",c:"ug",i:["vec3"],g:!1},{a:"node_out",c:"uh",i:["vec3"],g:!1},{a:"node_out",c:"ui",i:["vec3"],g:!1},{a:"node_out",
c:"uj",i:["float"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1}],u:[{a:"txt",b:"ub = tQ ; uc = tS ; ud = tV ; ug = tQ ; uh = tS ; ui = tW ; uj = tX ; uk = tY ; ul = tZ ; t_ = sE * ub ; ua = sF * u_environment_energy * cz ( ud ) ; uf = cC ( ub ) ; H = uf ; ue [ 0 ] = tR ; ue [ 1 ] = tT ; ue [ 2 ] = tU ;".split(" ")}]},{a:"node",c:"BSDF_END",C:[],B:[{a:"node_in",c:"um",i:["vec4"],g:!1},{a:"node_in",c:"un",i:["vec3"],g:!1},{a:"node_in",c:"uo",i:["vec3"],g:!1},{a:"node_in",
c:"up",i:["vec4"],g:!1},{a:"node_in",c:"uq",i:["vec3"],g:!1},{a:"node_in",c:"ur",i:["vec3"],g:!1},{a:"node_in",c:"us",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_out",c:"uw",i:["vec3"],g:!1}],u:[{a:"txt",b:"float ux = clamp ( up [ 1 ] , _0_0 , _1_0 ) ; float rF = up [ 2 ] ; uw = um . rgb ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PBR_STANDARD",{a:"equal_expr",o:2},"REFLECTION_TYPE",
"REFL_PBR_SIMPLE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"uw += rO ( uq , ur , ou , uo , rF , ux , mat3 ( _0_0 ) ) ;".split(" ")}]},{a:"node_elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"uw += rO ( uq , ur , ou , uo , rF , u_view_tsr_frag ) ;".split(" ")}]}]},{a:"txt",b:"uw += un ; uw = mix ( uw , us , ut ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 uy = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( uy ) ; uu = uu * uy ; uw += uu ;".split(" ")}]}]},
{a:"txt",b:["uo",";"]}]},{a:"node",c:"BSDF_COMPUTE",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["vec2"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_in",c:"uC",i:["float"],g:!1},{a:"node_in",c:"uD",i:["vec4"],g:!1},{a:"node_out",c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 sb = uB ; float uG = clamp ( uD [ 0 ] , _0_0 , _1_0 ) ; float ux = clamp ( uD [ 1 ] , _0_0 , _1_0 ) ; float rF = uD [ 2 ] ; vec3 pW = normalize ( ou + uz ) ; float pf = ( _1_0 - uC ) * dot ( sb , uz ) + uC ; float uH = ( _1_0 - uC ) * max ( dot ( uz , pW ) , _0_0 ) + uC ; float uI = ( _1_0 - uC ) * max ( dot ( uB , pW ) , _0_0 ) + uC ; uE = _0_0 ; if ( uA . r != _0_0 ) { if ( uG > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = uG * uG ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uz - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uE = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uE = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uE = pf ; uE = max ( uE , _0_0 ) / M_PI ; } float L = ux ; float uJ = L * L ; float dX = ( uI * uJ - uI ) * uI + _1_0 ; float cy = uJ / ( M_PI * dX * dX ) ; float uK ; float uL ; float uM = pow ( _1_0 - uH , 5.0 ) ; uK = _1_0 ; uL = uM ; float hI = L / 2.0 ; float uN = hI * hI ; float uO = _1_0 - uN ; float uP = _1_0 / ( uH * uH * uO + uN ) ; uK *= uP ; uL *= uP ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uQ = mix ( uL , uK , rC ) ; uF = max ( pf * cy * uQ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",C:[],B:[{a:"node_in",c:"uR",i:["vec3"],g:!1},{a:"node_in",c:"uS",i:["float"],g:!1},{a:"node_in",c:"uT",i:["float"],g:!1},{a:"node_in",c:"uU",i:["float"],g:!1},{a:"node_in",c:"uV",i:["vec3"],g:!1},{a:"node_in",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["vec3"],g:!1}],u:[{a:"txt",b:"uX = uR ; uS ; uT ; uU ; uV ; uW ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"uY",i:["vec3"],g:!1},{a:"node_in",c:"uZ",i:["float"],
g:!1},{a:"node_in",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["vec3"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1},{a:"node_out",c:"vd",i:["vec3"],g:!1},{a:"node_out",c:"ve",i:["float"],g:!1},{a:"node_out",c:"vf",i:["float"],g:!1},{a:"node_out",c:"vg",i:["vec3"],g:!1},{a:"node_out",c:"vh",i:["vec3"],g:!1},{a:"node_out",c:"vi",i:["float"],g:!1},{a:"node_out",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uY ; vc = uZ ; ve = _1_0 ; vf = _0_0 ; vi = _0_0 ; vk = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vg","=","u_",";"]}]},{a:"node_else",u:[{a:"txt",b:["vg","=","ot",";"]}]}]},{a:"txt",b:"va ; vd = vec3 ( _0_0 ) ; vh = vec3 ( _0_0 ) ; vj = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",C:[],B:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},
{a:"node",c:"BSDF_GLOSSY",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1},{a:"node_out",c:"vu",i:["vec3"],g:!1},{a:"node_out",c:"vv",i:["float"],g:!1},{a:"node_out",c:"vw",i:["vec3"],g:!1},{a:"node_out",c:"vx",i:["float"],g:!1},{a:"node_out",c:"vy",i:["float"],g:!1},{a:"node_out",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1},{a:"node_out",
c:"vB",i:["float"],g:!1},{a:"node_out",c:"vC",i:["vec3"],g:!1},{a:"node_out",c:"vD",i:["float"],g:!1}],u:[{a:"txt",b:"vw = vq ; vx = vr ; vy = _1_0 ; vB = _0_0 ; vD = _1_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vz","=","vs",";"]}]},{a:"node_else",u:[{a:"txt",b:["vz","=","ot",";"]}]}]},{a:"txt",b:"vt ; vu = vec3 ( _0_0 ) ; vv = _0_0 ; vA = vec3 ( _0_0 ) ; vC = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",C:[],B:[{a:"node_in",c:"vE",i:["vec3"],g:!1},
{a:"node_in",c:"vF",i:["float"],g:!1},{a:"node_in",c:"vG",i:["float"],g:!1},{a:"node_in",c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["vec3"],g:!1}],u:[{a:"txt",b:"vI = vE ; vF ; vG ; vH ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",C:[],B:[{a:"node_in",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["vec3"],g:!1},{a:"node_out",c:"vM",i:["float"],g:!1},{a:"node_out",c:"vN",i:["vec3"],g:!1},{a:"node_out",c:"vO",i:["float"],g:!1},{a:"node_out",c:"vP",i:["float"],
g:!1},{a:"node_out",c:"vQ",i:["vec3"],g:!1},{a:"node_out",c:"vR",i:["vec3"],g:!1},{a:"node_out",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1},{a:"node_out",c:"vU",i:["float"],g:!1}],u:[{a:"txt",b:"vT = vJ ; vP = _0_0 ; vS = _0_0 ; vU = _0_0 ; vQ = ot ; vK ; vL = vec3 ( _0_0 ) ; vM = _0_0 ; vN = vec3 ( _0_0 ) ; vO = _0_0 ; vR = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",C:[],B:[{a:"node_in",c:"vV",i:["vec3"],g:!1},{a:"node_in",c:"vW",i:["vec3"],g:!1},{a:"node_out",
c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX = vV ; vW ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",C:[],B:[{a:"node_in",c:"vY",i:["vec3"],g:!1},{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb [ 0 ] = wb [ 1 ] = wb [ 2 ] = _0_0 ; vY ; vZ ; v_ ; wa ;".split(" ")}]},{a:"node",c:"BSDF_TOON",C:[],B:[{a:"node_in",c:"wc",i:["vec3"],g:!1},{a:"node_in",c:"wd",i:["float"],g:!1},{a:"node_in",
c:"we",i:["float"],g:!1},{a:"node_in",c:"wf",i:["vec3"],g:!1},{a:"node_out",c:"wg",i:["vec3"],g:!1}],u:[{a:"txt",b:"wg = wc ; wd ; we ; wf ;".split(" ")}]},{a:"node",c:"BSDF_VELVET",C:[],B:[{a:"node_in",c:"wh",i:["vec3"],g:!1},{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_in",c:"wj",i:["vec3"],g:!1},{a:"node_out",c:"wk",i:["vec3"],g:!1}],u:[{a:"txt",b:"wk = wh ; wi ; wj ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",C:[],B:[{a:"node_in",c:"wl",i:["vec3"],g:!1},{a:"node_in",c:"wm",i:["float"],
g:!1},{a:"node_in",c:"wn",i:["vec3"],g:!1},{a:"node_in",c:"wo",i:["float"],g:!1},{a:"node_in",c:"wp",i:["float"],g:!1},{a:"node_in",c:"wq",i:["vec3"],g:!1},{a:"node_out",c:"wr",i:["vec3"],g:!1}],u:[{a:"txt",b:"wr [ 0 ] = wr [ 1 ] = wr [ 2 ] = _0_0 ; wl ; wn ; wo ; wp ; wq ; wm ;".split(" ")}]},{a:"node",c:"EMISSION",C:[],B:[{a:"node_in",c:"ws",i:["vec3"],g:!1},{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1},{a:"node_out",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],
g:!1},{a:"node_out",c:"wB",i:["vec3"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1},{a:"node_out",c:"wD",i:["float"],g:!1},{a:"node_out",c:"wE",i:["vec3"],g:!1},{a:"node_out",c:"wF",i:["vec3"],g:!1},{a:"node_out",c:"wG",i:["float"],g:!1},{a:"node_out",c:"wH",i:["vec3"],g:!1},{a:"node_out",c:"wI",i:["float"],g:!1}],u:[{a:"txt",b:"wF = wt * ws ; wD = _0_0 ; wG = _1_0 ; wI = _1_0 ; wE = ot ; wu ; wv = vec3 ( _0_0 ) ; wA = _0_0 ; wB = vec3 ( _0_0 ) ; wC = _0_0 ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",
C:[],B:[{a:"node_in",c:"wJ",i:["vec3"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"wK [ 0 ] = wK [ 1 ] = wK [ 2 ] = _0_0 ; wJ ;".split(" ")}]},{a:"node",c:"HOLDOUT",C:[],B:[{a:"node_out",c:"wL",i:["vec3"],g:!1}],u:[{a:"txt",b:"wL [ 0 ] = wL [ 1 ] = wL [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",C:[],B:[{a:"node_in",c:"wM",i:["vec3"],g:!1},{a:"node_in",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["vec3"],g:!1}],u:[{a:"txt",b:"wO [ 0 ] = wO [ 1 ] = wO [ 2 ] = _0_0 ; wM ; wN ;".split(" ")}]},
{a:"node",c:"VOLUME_SCATTER",C:[],B:[{a:"node_in",c:"wP",i:["vec3"],g:!1},{a:"node_in",c:"wQ",i:["float"],g:!1},{a:"node_in",c:"wR",i:["float"],g:!1},{a:"node_out",c:"wS",i:["vec3"],g:!1}],u:[{a:"txt",b:"wS [ 0 ] = wS [ 1 ] = wS [ 2 ] = _0_0 ; wP ; wQ ; wR ;".split(" ")}]},{a:"node",c:"BUMP",C:[{a:"node_var",c:"INVERT",b:["0"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"wT",i:["float"],g:!1},{a:"node_in",c:"wU",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_in",
c:"wW",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = wU ; float gH = wT ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["INVERT"],u:[{a:"txt",b:["aM","=","-","_1_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","U","=","wW",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","U","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wY = dFdx ( os ) ; vec3 wZ = dFdy ( os ) ; vec3 w_ = cross ( wZ , U ) ; vec3 xa = cross ( U , wY ) ; float dv = dot ( wY , w_ ) ; float xb = abs ( dv ) ; vec3 xc = dFdx ( wV ) * w_ + dFdy ( wV ) * xa ; gH = max ( gH , _0_0 ) ; wX = normalize ( xb * U - aM * sign ( dv ) * xc ) ; wX = normalize ( gH * wX + ( _1_0 - gH ) * U ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["wX","=","U",";"]}]}]}]},{a:"node",c:"DISPLACEMENT_BUMP",C:[],B:[{a:"node_in",c:"xd",i:["float"],g:!1},{a:"node_out",c:"xe",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = 0.1 ; vec3 U = ot ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wY = dFdx ( os ) ; vec3 wZ = dFdy ( os ) ; vec3 w_ = cross ( wZ , U ) ; vec3 xa = cross ( U , wY ) ; float dv = dot ( wY , w_ ) ; float xb = abs ( dv ) ; vec3 xc = dFdx ( xd ) * w_ + dFdy ( xd ) * xa ; xe = normalize ( xb * U - aM * sign ( dv ) * xc ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["xe","=","U",";"]}]}]}]},{a:"node",c:"NORMAL_MAP",C:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_in",c:"xg",i:["vec4"],g:!1},{a:"node_in",c:"xh",i:["vec3"],g:!1},{a:"node_out",c:"xi",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","xj","=","xh",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","xj","=","sy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi = sC * xi ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ; xi = _ ( u_model_tsr , xi ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",
b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ;".split(" ")}]}]},{a:"txt",b:"float ma = max ( xf , _0_0 ) ; xi = normalize ( mix ( xj , xi , ma ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",C:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],B:[{a:"node_in",c:"xk",i:["vec3"],g:!1},{a:"node_out",c:"xl",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",
{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["xl","=","xk",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr_inverse , xk ) ;".split(" ")}]},
{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ; xl = ap ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ; xl = ap ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ; xl = _ ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ; xl = _ ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = normalize ( xl ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",C:[],B:[{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_out",c:"xn",i:["vec3"],g:!1}],u:[{a:"txt",b:"xn [ 0 ] = xn [ 1 ] = xn [ 2 ] = _0_0 ; xm ;".split(" ")}]},{a:"node",c:"WAVELENGTH",C:[],B:[{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xo ;".split(" ")}]},
{a:"node",c:"SEPXYZ",C:[],B:[{a:"node_in",c:"xq",i:["vec3"],g:!1},{a:"node_out",c:"xr",i:["float"],g:!1},{a:"node_out",c:"xs",i:["float"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xr = xq [ 0 ] ; xs = xq [ 1 ] ; xt = xq [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",C:[],B:[{a:"node_in",c:"xu",i:["float"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xu ; xB [ 1 ] = xv ; xB [ 2 ] = xA ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",C:[],B:[{a:"node_in",c:"xC",i:["vec3"],g:!1},{a:"node_in",c:"xD",i:["float"],g:!1},{a:"node_in",c:"xE",i:["float"],g:!1},{a:"node_out",c:"xF",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = xD - xE * _0_5 ; xF = max ( ( _1_0 + xE ) * xC + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",C:[],B:[{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_in",c:"xH",i:["float"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1},{a:"node_out",c:"xJ",i:["float"],g:!1},{a:"node_out",
c:"xK",i:["float"],g:!1}],u:[{a:"txt",b:"xI = xJ = xK = _0_0 ; xG ; xH ;".split(" ")}]},{a:"node",c:"TEX_SKY",C:[],B:[{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_out",c:"xM",i:["vec3"],g:!1}],u:[{a:"txt",b:"xM [ 0 ] = xM [ 1 ] = xM [ 2 ] = _0_0 ; xL ;".split(" ")}]},{a:"node",c:"TEX_NOISE",C:[],B:[{a:"node_in",c:"xN",i:["vec3"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_out",c:"xR",i:["vec3"],g:!1},{a:"node_out",
c:"xS",i:["float"],g:!1}],u:[{a:"txt",b:"xR [ 0 ] = xR [ 1 ] = xR [ 2 ] = _0_0 ; xS = _1_0 ; xN ; xO ; xP ; xQ ;".split(" ")}]},{a:"node",c:"TEX_WAVE",C:[],B:[{a:"node_in",c:"xT",i:["vec3"],g:!1},{a:"node_in",c:"xU",i:["float"],g:!1},{a:"node_in",c:"xV",i:["float"],g:!1},{a:"node_in",c:"xW",i:["float"],g:!1},{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_out",c:"xY",i:["vec3"],g:!1},{a:"node_out",c:"xZ",i:["float"],g:!1}],u:[{a:"txt",b:"xY [ 0 ] = xY [ 1 ] = xY [ 2 ] = _0_0 ; xZ = _1_0 ; xT ; xU ; xV ; xW ; xX ;".split(" ")}]},
{a:"node",c:"TEX_VORONOI",C:[],B:[{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],g:!1},{a:"node_out",c:"yb",i:["vec3"],g:!1},{a:"node_out",c:"yc",i:["float"],g:!1}],u:[{a:"txt",b:"yb [ 0 ] = yb [ 1 ] = yb [ 2 ] = _0_0 ; yc = _1_0 ; x_ ; ya ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",C:[],B:[{a:"node_in",c:"yd",i:["vec3"],g:!1},{a:"node_in",c:"ye",i:["float"],g:!1},{a:"node_in",c:"yf",i:["float"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["float"],g:!1},
{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["float"],g:!1},{a:"node_out",c:"yk",i:["vec3"],g:!1},{a:"node_out",c:"yl",i:["float"],g:!1}],u:[{a:"txt",b:"yk [ 0 ] = yk [ 1 ] = yk [ 2 ] = _0_0 ; yl = _1_0 ; yd ; ye ; yf ; yg ; yh ; yi ; yj ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",C:[],B:[{a:"node_in",c:"ym",i:["vec3"],g:!1},{a:"node_out",c:"yn",i:["vec3"],g:!1},{a:"node_out",c:"yo",i:["float"],g:!1}],u:[{a:"txt",b:"yn [ 0 ] = yn [ 1 ] = yn [ 2 ] = _0_0 ; yo = _1_0 ; ym ;".split(" ")}]},
{a:"node",c:"TEX_MAGIC",C:[],B:[{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],g:!1},{a:"node_in",c:"yr",i:["float"],g:!1},{a:"node_out",c:"ys",i:["vec3"],g:!1},{a:"node_out",c:"yt",i:["float"],g:!1}],u:[{a:"txt",b:"ys [ 0 ] = ys [ 1 ] = ys [ 2 ] = _0_0 ; yt = _1_0 ; yp ; yq ; yr ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",C:[],B:[{a:"node_in",c:"yu",i:["vec3"],g:!1},{a:"node_in",c:"yv",i:["vec3"],g:!1},{a:"node_in",c:"yA",i:["vec3"],g:!1},{a:"node_in",c:"yB",i:["float"],g:!1},
{a:"node_out",c:"yC",i:["vec3"],g:!1},{a:"node_out",c:"yD",i:["float"],g:!1}],u:[{a:"txt",b:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yu ; yv ; yA ; yB ;".split(" ")}]},{a:"node",c:"TEX_BRICK",C:[],B:[{a:"node_in",c:"yE",i:["vec3"],g:!1},{a:"node_in",c:"yF",i:["vec3"],g:!1},{a:"node_in",c:"yG",i:["vec3"],g:!1},{a:"node_in",c:"yH",i:["vec3"],g:!1},{a:"node_in",c:"yI",i:["float"],g:!1},{a:"node_in",c:"yJ",i:["float"],g:!1},{a:"node_in",c:"yK",i:["float"],g:!1},{a:"node_in",c:"yL",i:["float"],
g:!1},{a:"node_in",c:"yM",i:["float"],g:!1},{a:"node_out",c:"yN",i:["vec3"],g:!1},{a:"node_out",c:"yO",i:["float"],g:!1}],u:[{a:"txt",b:"yN [ 0 ] = yN [ 1 ] = yN [ 2 ] = _0_0 ; yO = _1_0 ; yE ; yF ; yG ; yH ; yI ; yJ ; yK ; yL ; yM ;".split(" ")}]},{a:"node",c:"ADD_SHADER",C:[],B:[{a:"node_in",c:"yP",i:["vec3"],g:!1},{a:"node_in",c:"yQ",i:["vec3"],g:!1},{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = clamp ( yP + yQ , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",
C:[],B:[{a:"node_in",c:"yS",i:["float"],g:!1},{a:"node_in",c:"yT",i:["vec3"],g:!1},{a:"node_in",c:"yU",i:["vec3"],g:!1},{a:"node_in",c:"yV",i:["vec3"],g:!1},{a:"node_in",c:"yW",i:["float"],g:!1},{a:"node_in",c:"yX",i:["vec3"],g:!1},{a:"node_in",c:"yY",i:["float"],g:!1},{a:"node_in",c:"yZ",i:["float"],g:!1},{a:"node_in",c:"y_",i:["vec3"],g:!1},{a:"node_in",c:"za",i:["vec3"],g:!1},{a:"node_in",c:"zb",i:["float"],g:!1},{a:"node_in",c:"zc",i:["vec3"],g:!1},{a:"node_in",c:"zd",i:["float"],g:!1},{a:"node_in",
c:"ze",i:["vec3"],g:!1},{a:"node_in",c:"zf",i:["float"],g:!1},{a:"node_in",c:"zg",i:["vec3"],g:!1},{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_in",c:"zi",i:["float"],g:!1},{a:"node_in",c:"zj",i:["vec3"],g:!1},{a:"node_in",c:"zk",i:["vec3"],g:!1},{a:"node_in",c:"zl",i:["float"],g:!1},{a:"node_in",c:"zm",i:["vec3"],g:!1},{a:"node_in",c:"zn",i:["float"],g:!1},{a:"node_out",c:"zo",i:["vec3"],g:!1},{a:"node_out",c:"zp",i:["vec3"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["vec3"],
g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["vec3"],g:!1},{a:"node_out",c:"zv",i:["vec3"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["vec3"],g:!1},{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"float zD = sqrt ( clamp ( yS , _0_0 , _1_0 ) ) ; zp = mix ( yV , ze , zD ) ; zq = mix ( yW , zf , zD ) ; if ( yZ > _0_0 ) { if ( zi > _0_0 ) { zr = mix ( yX , zg , zD ) ; zs = mix ( yY , zh , zD ) ; } else { zr = yX ; zs = yY ; } } else { zr = zg ; zs = zh ; } if ( zb > _0_0 ) { if ( zl > _0_0 ) { zv = mix ( za , zk , zD ) ; } else { zv = za ; } } else { zv = zk ; } zt = mix ( yZ , zi , zD ) ; zu = mix ( y_ , zj , zD ) ; zA = mix ( zb , zl , zD ) ; zB = mix ( zc , zm , zD ) ; zC = mix ( zd , zn , zD ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1},{a:"node_param",c:"sk",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zE"],u:[{a:"txt",b:"zE = rZ ( sk ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zF"],u:[{a:"txt",b:"zF = vec3 ( sk , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",C:[],B:[{a:"node_out",c:"zG",i:["vec3"],g:!1},{a:"node_param",c:"sl",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",
b:"zG = vec3 ( sl , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",C:[],B:[{a:"node_out",c:"zH",i:["vec3"],g:!1}],u:[{a:"txt",b:["zH","=","ot",";"]}]},{a:"node",c:"TEX_COORD_GE",C:[],B:[{a:"node_out",c:"zI",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["zI","=","rV",";"]}]},{a:"node_else",u:[{a:"txt",b:["zI","=","sv",";"]}]}]}]},{a:"node",c:"TEX_COORD_OB",C:[],B:[{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",
j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:"zJ = ap ( u_model_tsr_inverse , os ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["zJ","=","sv",";"]}]}]}]},{a:"node",c:"TEX_COORD_CA",C:[],B:[{a:"node_out",c:"zK",i:["vec3"],g:!1}],u:[{a:"txt",b:"zK . xy = sD . xy ; zK . z = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",C:[],B:[{a:"node_out",c:"zL",i:["vec3"],g:!1}],u:[{a:"txt",b:"zL . xy = l . xy / l . z ; zL . z = _0_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",C:[],B:[{a:"node_out",
c:"zM",i:["vec3"],g:!1}],u:[{a:"txt",b:"zM = reflect ( - ou , ot ) ;".split(" ")}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_out",c:"zN",i:["vec3"],g:!1},{a:"node_param",c:"sm",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"zN = vec3 ( sm , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",C:[],B:[{a:"node_out",c:"zO",i:["float"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1},{a:"node_out",c:"zQ",i:["float"],g:!1},{a:"node_out",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["float"],g:!1},{a:"node_out",
c:"zT",i:["vec3"],g:!1},{a:"node_out",c:"zU",i:["vec3"],g:!1}],u:[{a:"txt",b:"zO = _0_0 ; zP = _0_0 ; zQ = _0_0 ; zR = vec3 ( _0_0 ) ; zS = _0_0 ; zT = zR ; zU = zR ;".split(" ")}]},{a:"node",c:"HAIR_INFO",C:[],B:[{a:"node_out",c:"zV",i:["float"],g:!1},{a:"node_out",c:"zW",i:["float"],g:!1},{a:"node_out",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["vec3"],g:!1}],u:[{a:"txt",b:"zV = _0_0 ; zW = _0_0 ; zX = _0_0 ; zY = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",C:[{a:"node_var",c:"USE_LOCATION_OUT",
b:["0"]},{a:"node_var",c:"USE_OBJ_IND_OUT",b:["0"]},{a:"node_var",c:"USE_MAT_IND_OUT",b:["0"]},{a:"node_var",c:"USE_RANDOM_OUT",b:["0"]}],B:[{a:"node_out",c:"zZ",i:["vec3"],g:!1},{a:"node_out",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1},{a:"node_out",c:"Ab",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_LOCATION_OUT"],u:[{a:"txt",b:"zZ = u_model_tsr [ 0 ] . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OBJ_IND_OUT"],u:[{a:"txt",b:"z_ = u_obj_info . r ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MAT_IND_OUT"],u:[{a:"txt",b:"Aa = u_obj_info . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_RANDOM_OUT"],u:[{a:"txt",b:"Ab = u_obj_info . b ;".split(" ")}]}]}]},{a:"node",c:"WIREFRAME",C:[],B:[{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:["Ad","=","Ac",";"]}]},{a:"node",c:"TANGENT",C:[],B:[{a:"node_out",c:"Ae",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ae = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LAYER_WEIGHT",
C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"Af",i:["float"],g:!1},{a:"node_in",c:"Ag",i:["vec3"],g:!1},{a:"node_out",c:"Ah",i:["float"],g:!1},{a:"node_out",c:"Ai",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:"vec3 cr = normalize ( Ag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","cr","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 Aj = normalize ( ou ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","Aj","=","u_camera_direction",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ah"],u:[{a:"txt",b:"float sc = max ( _1_0 - Af , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"sc = gl_FrontFacing == false ? sc : _1_0 / sc ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"sc = gl_FrontFacing ? sc : _1_0 / sc ;".split(" ")}]}]},{a:"txt",b:"Ah = sd ( Aj , cr , sc ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["Ah","=","_0_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ai"],u:[{a:"txt",b:"Ai = abs ( dot ( Aj , cr ) ) ; float ew = Af ; if ( ew != _0_5 ) { ew = clamp ( ew , _0_0 , 0.99999 ) ; ew = ( ew < _0_5 ) ? 2.0 * ew : _0_5 / ( _1_0 - ew ) ; Ai = pow ( Ai , ew ) ; } Ai = _1_0 - Ai ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["Ai","=","_0_0",";"]}]}]}]},{a:"node",c:"LIGHT_PATH",C:[],B:[{a:"node_out",c:"Ak",i:["float"],g:!1},{a:"node_out",c:"Al",i:["float"],g:!1},
{a:"node_out",c:"Am",i:["float"],g:!1},{a:"node_out",c:"An",i:["float"],g:!1},{a:"node_out",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1},{a:"node_out",c:"Aq",i:["float"],g:!1},{a:"node_out",c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1},{a:"node_out",c:"At",i:["float"],g:!1},{a:"node_out",c:"Au",i:["float"],g:!1}],u:[{a:"txt",b:"Ak = Al = Am = _0_0 ; An = Ao = Ap = _0_0 ; Aq = Au = As = At = _0_0 ; Ar = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",C:[],B:[{a:"node_out",
c:"Av",i:["vec3"],g:!1},{a:"node_out",c:"Aw",i:["vec3"],g:!1},{a:"node_out",c:"Ax",i:["float"],g:!1}],u:[{a:"txt",b:"Av = Aw = vec3 ( _0_0 ) ; Ax = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",C:[],B:[],u:[]},{a:"node",c:"CURVE_VEC",C:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"Ay",i:["float"],g:!1},{a:"node_in",c:"Az",i:["vec3"],g:!1},{a:"node_out",c:"AA",i:["vec3"],g:!1}],u:[{a:"txt",
b:["AA","=","Az",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AA . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AA . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AA . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"txt",b:"AA = mix ( Az , AA , Ay ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",C:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AB",i:["float"],g:!1},{a:"node_in",c:"AC",i:["vec3"],g:!1},{a:"node_out",c:"AD",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = AC . r ; float g = AC . g ; float b = AC . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AD . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AD . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AD . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . b = b ;".split(" ")}]}]},{a:"txt",b:"AD = mix ( AC , AD , AB ) ;".split(" ")}]},{a:"node",c:"VALTORGB",C:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AE",i:["float"],g:!1},{a:"node_out",c:"AF",i:["vec3"],g:!1},{a:"node_out",c:"AG",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AE , NODE_TEX_ROW ) ) ; AF = AH . rgb ; AG = AH . a ;".split(" ")}]},
{a:"node",c:"MAPPING",C:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],B:[{a:"node_in",c:"AI",i:["vec3"],g:!1},{a:"node_out",c:"AJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["AJ","=","AI",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"AJ = AJ * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"AJ = AJ + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"AJ = ( MAPPING_TRS_MATRIX * vec4 ( AJ , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"AJ = max ( AJ , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"AJ = min ( AJ , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"AJ = normalize ( AJ ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",C:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],B:[{a:"node_in",c:"AK",i:["float"],g:!1},{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_out",c:"AM",i:["float"],g:!1}],u:[{a:"txt",b:"AM = AK + AL ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AM = clamp ( AM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AN",i:["float"],g:!1},{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_out",c:"AP",i:["float"],g:!1}],u:[{a:"txt",b:"AP = AN - AO ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AP = clamp ( AP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AQ",i:["float"],g:!1},{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_out",c:"AS",i:["float"],g:!1}],u:[{a:"txt",b:"AS = AQ * AR ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AS = clamp ( AS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AT",i:["float"],g:!1},{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_out",c:"AV",i:["float"],g:!1}],u:[{a:"txt",b:"AV = ( AU != _0_0 ) ? AT / AU : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AV = clamp ( AV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AW",i:["float"],g:!1},{a:"node_in",c:"AX",i:["float"],g:!1},
{a:"node_out",c:"AY",i:["float"],g:!1}],u:[{a:"txt",b:"AY = sin ( AW ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AY = clamp ( AY , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AX",";"]}]},{a:"node",c:"MATH_COSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AZ",i:["float"],g:!1},{a:"node_in",c:"A_",i:["float"],g:!1},{a:"node_out",c:"Ba",i:["float"],g:!1}],u:[{a:"txt",b:"Ba = cos ( AZ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Ba = clamp ( Ba , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["A_",";"]}]},{a:"node",c:"MATH_TANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bb",i:["float"],g:!1},{a:"node_in",c:"Bc",i:["float"],g:!1},{a:"node_out",c:"Bd",i:["float"],g:!1}],u:[{a:"txt",b:"Bd = tan ( Bb ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bc",";"]}]},{a:"node",c:"MATH_ARCSINE",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["float"],g:!1},{a:"node_out",c:"Bg",i:["float"],g:!1}],u:[{a:"txt",b:"Bg = ( Be <= _1_0 && Be >= - _1_0 ) ? asin ( Be ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bg = clamp ( Bg , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bf",";"]}]},{a:"node",c:"MATH_ARCCOSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bh",i:["float"],g:!1},{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_out",c:"Bj",i:["float"],g:!1}],u:[{a:"txt",b:"Bj = ( Bh <= _1_0 && Bh >= - _1_0 ) ? acos ( Bh ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bj = clamp ( Bj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bi",";"]}]},{a:"node",c:"MATH_ARCTANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bk",i:["float"],g:!1},{a:"node_in",c:"Bl",i:["float"],g:!1},{a:"node_out",c:"Bm",i:["float"],g:!1}],u:[{a:"txt",
b:"Bm = atan ( Bk ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bm = clamp ( Bm , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bl",";"]}]},{a:"node",c:"MATH_POWER",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bn",i:["float"],g:!1},{a:"node_in",c:"Bo",i:["float"],g:!1},{a:"node_out",c:"Bp",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Bn < _0_0 && Bo != floor ( Bo ) ) Bp = _0_0 ; else if ( Bo == _0_0 ) Bp = _1_0 ; else if ( Bn < _0_0 ) Bp = mix ( _1_0 , - _1_0 , sign ( mod ( - Bo , 2.0 ) ) ) * pow ( - Bn , Bo ) ; else if ( Bn == _0_0 ) Bp = _0_0 ; else Bp = pow ( Bn , Bo ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bq",i:["float"],g:!1},{a:"node_in",c:"Br",i:["float"],g:!1},{a:"node_out",c:"Bs",i:["float"],g:!1}],u:[{a:"txt",b:"Bs = ( Bq > _0_0 && Br > _0_0 ) ? log2 ( Bq ) / log2 ( Br ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bs = clamp ( Bs , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bt",i:["float"],g:!1},{a:"node_in",c:"Bu",i:["float"],g:!1},{a:"node_out",c:"Bv",i:["float"],g:!1}],u:[{a:"txt",b:"Bv = min ( Bt , Bu ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bv = clamp ( Bv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bw",i:["float"],g:!1},{a:"node_in",c:"Bx",i:["float"],
g:!1},{a:"node_out",c:"By",i:["float"],g:!1}],u:[{a:"txt",b:"By = max ( Bw , Bx ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",c:"BA",i:["float"],g:!1},{a:"node_out",c:"BB",i:["float"],g:!1}],u:[{a:"txt",b:"BB = floor ( Bz + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BB = clamp ( BB , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BA",";"]}]},{a:"node",c:"MATH_LESS_THAN",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BC",i:["float"],g:!1},{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_out",c:"BE",i:["float"],g:!1}],u:[{a:"txt",b:"BE = ( BC < BD ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BE = clamp ( BE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BF",i:["float"],g:!1},{a:"node_in",c:"BG",i:["float"],g:!1},{a:"node_out",c:"BH",i:["float"],g:!1}],u:[{a:"txt",b:"BH = ( BF > BG ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BH = clamp ( BH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BI",i:["float"],g:!1},{a:"node_in",c:"BJ",i:["float"],g:!1},{a:"node_out",c:"BK",
i:["float"],g:!1}],u:[{a:"txt",b:"BK = abs ( BJ ) > 0.000001 ? mod ( BI , BJ ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BL",i:["float"],g:!1},{a:"node_in",c:"BM",i:["float"],g:!1},{a:"node_out",c:"BN",i:["float"],g:!1}],u:[{a:"txt",b:"BN = abs ( BL ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BN = clamp ( BN , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BM",";"]}]},{a:"node",c:"MIX_RGB_MIX",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BO",i:["float"],g:!1},{a:"node_in",c:"BP",i:["vec3"],g:!1},{a:"node_in",c:"BQ",i:["vec3"],g:!1},{a:"node_out",c:"BR",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BO , _0_0 , _1_0 ) ; BR = mix ( BP , BQ , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BR = clamp ( BR , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BS , _0_0 , _1_0 ) ; BV = mix ( BT , BT + BU , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",C:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BW , _0_0 , _1_0 ) ; BZ = mix ( BX , BX * BY , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"B_",i:["float"],g:!1},{a:"node_in",c:"Ca",i:["vec3"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_out",c:"Cc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( B_ , _0_0 , _1_0 ) ; Cc = mix ( Ca , Ca - Cb , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cc = clamp ( Cc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cd",i:["float"],g:!1},{a:"node_in",c:"Ce",
i:["vec3"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_out",c:"Cg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Cg = vec3 ( _1_0 ) - ( vec3 ( Ch ) + zD * ( vec3 ( _1_0 ) - Cf ) ) * ( vec3 ( _1_0 ) - Ce ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Ci",
i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Ci , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Ck += step ( Ck , vec3 ( _0_0 ) ) ; Cl = Ch * Cj + zD * Cj / Ck ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cm , _0_0 , _1_0 ) ; Cp = mix ( Cn , abs ( Cn - Co ) , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cq",i:["float"],g:!1},{a:"node_in",
c:"Cr",i:["vec3"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_out",c:"Ct",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cq , _0_0 , _1_0 ) ; Ct = min ( Cr . rgb , Cs . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ct = clamp ( Ct , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cu",i:["float"],g:!1},{a:"node_in",c:"Cv",i:["vec3"],g:!1},{a:"node_in",
c:"Cw",i:["vec3"],g:!1},{a:"node_out",c:"Cx",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cu , _0_0 , _1_0 ) ; Cx = max ( Cv . rgb , Cw . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cx = clamp ( Cx , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cy",i:["float"],g:!1},{a:"node_in",c:"Cz",i:["vec3"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_out",
c:"CB",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cy , _0_0 , _1_0 ) ; vec3 CC = vec3 ( _1_0 - zD ) ; CB = mix ( Cz * ( CC + 2.0 * zD * CA ) , vec3 ( _1_0 ) - ( CC + 2.0 * zD * ( vec3 ( _1_0 ) - CA ) ) * ( vec3 ( _1_0 ) - Cz ) , step ( _0_5 , Cz ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CD",i:["float"],
g:!1},{a:"node_in",c:"CE",i:["vec3"],g:!1},{a:"node_in",c:"CF",i:["vec3"],g:!1},{a:"node_out",c:"CG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CD , _0_0 , _1_0 ) ; vec3 CH = vec3 ( _1_0 ) - zD * CF ; vec3 CI = clamp ( CE / CH , _0_0 , _1_0 ) ; CG = mix ( mix ( CI , vec3 ( _1_0 ) , step ( CH , vec3 ( _0_0 ) ) ) , CE , step ( CE , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CG = clamp ( CG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!1},{a:"node_in",c:"CL",i:["vec3"],g:!1},{a:"node_out",c:"CM",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CJ , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zD ) ; vec3 CH = ko + zD * CL ; vec3 CI = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CK ) / CH , _0_0 , _1_0 ) ; CM = mix ( CI , vec3 ( _0_0 ) , step ( CH , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CM = clamp ( CM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CN",i:["float"],g:!1},{a:"node_in",c:"CO",i:["vec3"],g:!1},{a:"node_in",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CN , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; CQ = CO ; CR = kf ( CP ) ; if ( CR . y != _0_0 ) { kg = kf ( CQ ) ; kg . x = CR . x ; CH = kh ( kg ) ; CQ = mix ( CQ , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CS",i:["float"],g:!1},{a:"node_in",c:"CT",i:["vec3"],g:!1},{a:"node_in",c:"CU",i:["vec3"],g:!1},{a:"node_out",c:"CV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CS , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; CV = CT ; vec3 kg , CR ; kg = kf ( CV ) ; if ( kg . y != _0_0 ) { CR = kf ( CU ) ; kg . y = Ch * kg . y + zD * CR . y ; CV = kh ( kg ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CV = clamp ( CV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CW",i:["float"],g:!1},{a:"node_in",c:"CX",i:["vec3"],g:!1},{a:"node_in",c:"CY",i:["vec3"],g:!1},{a:"node_out",c:"CZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CW , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 kg , CR ; kg = kf ( CX ) ; CR = kf ( CY ) ; kg . z = Ch * kg . z + zD * CR . z ; CZ = kh ( kg ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CZ = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"C_",i:["float"],g:!1},{a:"node_in",c:"Da",i:["vec3"],g:!1},{a:"node_in",c:"Db",i:["vec3"],g:!1},{a:"node_out",c:"Dc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( C_ , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; Dc = Da ; CR = kf ( Db ) ; if ( CR . y != _0_0 ) { kg = kf ( Dc ) ; kg . x = CR . x ; kg . y = CR . y ; CH = kh ( kg ) ; Dc = mix ( Dc , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dc = clamp ( Dc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Dd",i:["float"],g:!1},{a:"node_in",c:"De",i:["vec3"],g:!1},{a:"node_in",c:"Df",i:["vec3"],g:!1},{a:"node_out",c:"Dg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 Dh = Df + De - Df * De ; Dg = De * ( vec3 ( Ch ) + vec3 ( zD ) * ( ( vec3 ( _1_0 ) - De ) * Df + Dh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dg = clamp ( Dg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Di",i:["float"],g:!1},{a:"node_in",c:"Dj",i:["vec3"],g:!1},{a:"node_in",c:"Dk",i:["vec3"],g:!1},{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Di , _0_0 , _1_0 ) ; Dl = Dj + zD * ( 2.0 * Dk - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dl = clamp ( Dl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_WORLD_RGB",C:[],B:[{a:"node_in",c:"Dm",i:["float"],g:!1},{a:"node_in",c:"Dn",i:["vec3"],g:!1},{a:"node_in",c:"Do",i:["vec3"],g:!1},{a:"node_out",c:"Dp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dm , _0_0 , _1_0 ) ; Dp = mix ( Dn , Do , zD ) ;".split(" ")}]},{a:"node",c:"ADD_WORLD_RGB",C:[],B:[{a:"node_in",c:"Dq",i:["float"],g:!1},{a:"node_in",c:"Dr",i:["vec3"],g:!1},{a:"node_in",
c:"Ds",i:["vec3"],g:!1},{a:"node_out",c:"Dt",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dq , _0_0 , _1_0 ) ; Dt = mix ( Dr , Dr + Ds , zD ) ;".split(" ")}]},{a:"node",c:"OUTPUT",C:[],B:[{a:"node_in",c:"Du",i:["vec3"],g:!1},{a:"node_in",c:"Dv",i:["float"],g:!1}],u:[{a:"txt",b:"E = Du ; I = Dv ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",C:[],B:[{a:"node_in",c:"Dw",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dw ; I = _1_0 ;".split(" ")}]},{a:"node",c:"OUTPUT_WORLD_SURFACE",C:[],B:[{a:"node_in",c:"Dx",
i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dx ; I = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],B:[{a:"node_in",c:"Dy",i:["vec3"],g:!1},{a:"node_in",c:"Dz",i:["vec3"],g:!1},{a:"node_in",c:"DA",i:["float"],g:!1},{a:"node_in",c:"DB",i:["vec3"],g:!0},{a:"node_in",c:"DC",i:["float"],g:!0},{a:"node_out",c:"DD",i:["vec3"],g:!1},
{a:"node_out",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1},{a:"node_out",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1},{a:"node_out",c:"DI",i:["vec2"],g:!1},{a:"node_out",c:"DJ",i:["vec2"],g:!1},{a:"node_out",c:"DK",i:["vec4"],g:!1},{a:"node_param",c:"sn",i:["const","vec2"],g:!1},{a:"node_param",c:"so",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"DF = clamp ( Dy , _0_0 , _1_0 ) ; DG = so [ 0 ] * clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"DH = normalize ( DB ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["DH","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"DD = DC * DF ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DD = sE * DF ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["DF","*=","DA",";"]}]}]},{a:"txt",b:"DE = sF * u_environment_energy * cz ( DH ) ; DK = cC ( DF ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"DI = vec2 ( sn [ 0 ] , sn [ 1 ] ) ; DJ = vec2 ( so [ 1 ] , so [ 2 ] ) ;".split(" ")}]}]},{a:"txt",b:["H","=","DK",";"]}]},{a:"node_else",u:[{a:"txt",b:"DD = vec3 ( _0_0 ) ; DE = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],B:[{a:"node_in",c:"DL",i:["vec4"],g:!1},
{a:"node_in",c:"DM",i:["vec3"],g:!1},{a:"node_in",c:"DN",i:["vec3"],g:!1},{a:"node_in",c:"DO",i:["float"],g:!0},{a:"node_in",c:"DP",i:["float"],g:!0},{a:"node_in",c:"DQ",i:["float"],g:!0},{a:"node_out",c:"DR",i:["vec3"],g:!0},{a:"node_out",c:"DS",i:["float"],g:!0},{a:"node_out",c:"DT",i:["vec3"],g:!0},{a:"node_out",c:"DU",i:["vec3"],g:!0},{a:"node_out",c:"DV",i:["vec3"],g:!0},{a:"node_param",c:"sr",i:["float"],g:!1},{a:"node_param",c:"su",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DR"],
u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"DR = DL . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DR = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"cL ( DR , ou , DN , DO , u_view_tsr_frag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"cL ( DR , ou , DN , DO , mat3 ( _0_0 ) ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["DR","+=","DM",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DT"],u:[{a:"txt",b:["DT","=","DN",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DU"],u:[{a:"txt",b:"DU = DL . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DV"],u:[{a:"txt",b:["DV","=","DM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( DQ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * DP ; DS = clamp ( DQ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( sr , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * su ; DS = sr * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["F","=","DM",";"]}]},{a:"node_else",u:[{a:"txt",b:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["G","=","DN",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",
c:"oU",i:["float"],g:!1}],u:[{a:"txt",b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],
u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oT *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},{a:"node_in",c:"pc",i:["vec2"],
g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pa",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( sb , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pi",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",
b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( sb , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pn",";"]},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( sb , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pF",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},
{a:"txt",b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( sb , pD ) + pG ; float pv = max ( dot ( sb , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],
g:!1},{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pL",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( sb , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qB < _1_0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( _1_0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float DW = qL . x ; float DX = qL . y ; float DY = qL . z ; float DZ = qL . w ; float D_ = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ea = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eb = pow ( Ea , DX ) ; qQ = qF + qP * vec4 ( qO * D_ * pow ( qM , vec3 ( DW ) ) , _1_0 ) ; qQ += DY * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , DZ ) * qP * vec4 ( qO * D_ * vec3 ( Eb ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{a:"txt",b:"qR = qG + qO * qN * qI ;".split(" ")}]},{a:"node",c:"RGB",C:[{a:"node_var",c:"RGB_IND",b:["0"]}],B:[{a:"node_out",c:"Ec",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ec = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",C:[],B:[{a:"node_in",c:"Ed",i:["vec3"],g:!1},{a:"node_out",c:"Ee",i:["float"],g:!1}],u:[{a:"txt",b:"Ee = dot ( Ed , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
C:[],B:[{a:"node_in",c:"Ef",i:["vec3"],g:!1},{a:"node_out",c:"Eg",i:["float"],g:!0},{a:"node_out",c:"Eh",i:["float"],g:!0},{a:"node_out",c:"Ei",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eg"],u:[{a:"txt",b:"Eg = Ef . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eh"],u:[{a:"txt",b:"Eh = Ef . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ei"],u:[{a:"txt",b:"Ei = Ef . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",C:[],B:[{a:"node_in",c:"Ej",i:["vec3"],
g:!1},{a:"node_out",c:"Ek",i:["float"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 En = kf ( Ej ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = En . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = En . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = En . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",C:[],B:[{a:"node_in",
c:"Eo",i:["float"],g:!1},{a:"node_in",c:"Ep",i:["float"],g:!1},{a:"node_in",c:"Eq",i:["float"],g:!1},{a:"node_out",c:"Er",i:["float"],g:!1}],u:[{a:"txt",b:"Er = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Eo - Eq ) * Ep ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",C:[],B:[{a:"node_in",c:"Es",i:["vec3"],g:!1},{a:"node_in",c:"Et",i:["float"],g:!1},{a:"node_out",c:"Eu",i:["vec3"],g:!1}],u:[{a:"txt",b:"Eu = Es ; if ( Eu . x > _0_0 ) Eu . x = pow ( Es . x , Et ) ; if ( Eu . y > _0_0 ) Eu . y = pow ( Es . y , Et ) ; if ( Eu . z > _0_0 ) Eu . z = pow ( Es . z , Et ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",C:[],B:[{a:"node_in",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ew = max ( vec3 ( _0_0 ) , Ev ) ; Ew = pow ( Ew , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",C:[],B:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_out",c:"Ey",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ey = max ( vec3 ( _0_0 ) , Ex ) ; Ey = pow ( Ey , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",C:[],B:[{a:"node_out",c:"Ez",i:["vec3"],
g:!1},{a:"node_out",c:"EA",i:["vec3"],g:!1},{a:"node_out",c:"EB",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ez"],u:[{a:"txt",b:"Ez [ 2 ] = Ez [ 1 ] = Ez [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA [ 2 ] = EA [ 1 ] = EA [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EB"],u:[{a:"txt",b:["EB","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT_CUBE",C:[],B:[{a:"node_in",c:"EC",i:["vec3"],g:!1},
{a:"node_out",c:"ED",i:["vec3"],g:!0},{a:"node_out",c:"EE",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_CUBE_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec3 EF = vec3 ( EC . x , EC . y , EC . z ) ; vec4 AH = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_CUBE_var_texture , EF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ED"],u:[{a:"txt",b:"ED = AH . xyz ; bC ( ED ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EE"],u:[{a:"txt",b:"EE = AH . w ;".split(" ")}]}]}]},
{a:"node",c:"TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",C:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],B:[{a:"node_in",c:"EG",i:["vec3"],g:!1},{a:"node_out",c:"EH",i:["vec3"],g:!1},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 EI = normalize ( EG ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","EI","=","sv",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3",
"EI","=","ot",";"]}]}]},{a:"txt",b:"float dC = - atan ( EI . y , EI . x ) / ( 2.0 * M_PI ) + _0_5 ; float kQ = atan ( EI . z , sqrt ( EI . x * EI . x + EI . y * EI . y ) ) / M_PI + _0_5 ; vec4 AH = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture , vec2 ( dC , kQ ) ) ; EH = AH . xyz ; bC ( EH ) ;".split(" ")}]},{a:"node",c:"TEXTURE_ENVIRONMENT_MIRROR_BALL",C:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],B:[{a:"node_in",c:"EJ",i:["vec3"],g:!1},{a:"node_out",c:"EK",i:["vec3"],g:!1},
{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 EI = normalize ( EJ ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","EI","=","sv",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","EI","=","ot",";"]}]}]},{a:"txt",b:"EI . y -= _1_0 ; float EL = 2.0 * sqrt ( max ( - _0_5 * EI . y , _0_0 ) ) ; if ( EL > _0_0 ) EI /= EL ; float dC = _0_5 * ( EI . x + _1_0 ) ; float kQ = _0_5 * ( EI . z + _1_0 ) ; vec4 AH = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture , vec2 ( dC , kQ ) ) ; EK = AH . xyz ; bC ( EK ) ;".split(" ")}]},
{a:"node",c:"TEXTURE_COLOR",C:[{a:"node_var",c:"NON_COLOR",b:["0"]},{a:"node_var",c:"CONVERT_UV",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EM",i:["vec3"],g:!0},{a:"node_in",c:"EN",i:["vec3"],g:!0},{a:"node_in",c:"EO",i:["vec3"],g:!0},{a:"node_in",c:"EP",i:["vec3"],g:!0},{a:"node_out",c:"EQ",i:["vec3"],g:!0},{a:"node_out",c:"ER",i:["float"],g:!0},{a:"node_out",c:"ES",i:["vec3"],g:!0},{a:"node_out",c:"ET",i:["float"],
g:!0},{a:"node_out",c:"EU",i:["vec3"],g:!0},{a:"node_out",c:"EV",i:["float"],g:!0},{a:"node_out",c:"EW",i:["vec3"],g:!0},{a:"node_out",c:"EX",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EM ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EM . xy ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EQ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ER"],u:[{a:"txt",b:"ER = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EN ) ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EN . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ES"],u:[{a:"txt",b:"ES = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","ES",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ET"],u:[{a:"txt",b:"ET = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"node_cond",f:[{a:"node_if",
j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EO ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EO . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EU"],u:[{a:"txt",b:"EU = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EU",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EV"],u:[{a:"txt",
b:"EV = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EP ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EP . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EW"],u:[{a:"txt",b:"EW = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",
o:1}],u:[{a:"txt",b:["bC","(","EW",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EX"],u:[{a:"txt",b:"EX = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",C:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EY",i:["vec3"],g:!0},{a:"node_in",c:"EZ",i:["vec3"],g:!0},{a:"node_in",c:"E_",i:["vec3"],g:!0},{a:"node_in",c:"Fa",i:["vec3"],g:!0},{a:"node_out",c:"Fb",i:["vec3"],g:!0},{a:"node_out",c:"Fc",
i:["float"],g:!0},{a:"node_out",c:"Fd",i:["vec3"],g:!0},{a:"node_out",c:"Fe",i:["float"],g:!0},{a:"node_out",c:"Ff",i:["vec3"],g:!0},{a:"node_out",c:"Fg",i:["float"],g:!0},{a:"node_out",c:"Fh",i:["vec3"],g:!0},{a:"node_out",c:"Fi",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fb"],u:[{a:"txt",b:"Fb = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fc"],u:[{a:"txt",b:"Fc = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EZ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fd"],u:[{a:"txt",b:"Fd = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fe"],u:[{a:"txt",b:"Fe = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],
u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( E_ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ff"],u:[{a:"txt",b:"Ff = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fg"],u:[{a:"txt",b:"Fg = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( Fa ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fh"],
u:[{a:"txt",b:"Fh = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fi"],u:[{a:"txt",b:"Fi = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",C:[{a:"node_var",c:"VALUE_ROW_IND",b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],B:[{a:"node_out",c:"Fj",i:["float"],g:!1}],u:[{a:"txt",b:"Fj = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",C:[],B:[{a:"node_in",c:"Fk",i:["vec3"],g:!1},{a:"node_in",c:"Fl",
i:["vec3"],g:!1},{a:"node_out",c:"Fm",i:["vec3"],g:!1},{a:"node_out",c:"Fn",i:["float"],g:!0}],u:[{a:"txt",b:"Fm = Fk + Fl ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fn"],u:[{a:"txt",b:"Fn = ( abs ( Fm [ 0 ] ) + abs ( Fm [ 1 ] ) + abs ( Fm [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_SUBTRACT",C:[],B:[{a:"node_in",c:"Fo",i:["vec3"],g:!1},{a:"node_in",c:"Fp",i:["vec3"],g:!1},{a:"node_out",c:"Fq",i:["vec3"],g:!1},{a:"node_out",c:"Fr",i:["float"],g:!0}],u:[{a:"txt",b:"Fq = Fo - Fp ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = ( abs ( Fq [ 0 ] ) + abs ( Fq [ 1 ] ) + abs ( Fq [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",C:[],B:[{a:"node_in",c:"Fs",i:["vec3"],g:!1},{a:"node_in",c:"Ft",i:["vec3"],g:!1},{a:"node_out",c:"Fu",i:["vec3"],g:!1},{a:"node_out",c:"Fv",i:["float"],g:!0}],u:[{a:"txt",b:"Fu = Fs + Ft ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fv"],u:[{a:"txt",b:"Fv = length ( Fu ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Fu"],u:[{a:"txt",b:"Fu = normalize ( Fu ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",C:[],B:[{a:"node_in",c:"Fw",i:["vec3"],g:!1},{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_out",c:"Fy",i:["vec3"],g:!1},{a:"node_out",c:"Fz",i:["float"],g:!0}],u:[{a:"txt",b:"Fy = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fz"],u:[{a:"txt",b:"Fz = dot ( Fw , Fx ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",C:[],B:[{a:"node_in",c:"FA",
i:["vec3"],g:!1},{a:"node_in",c:"FB",i:["vec3"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1},{a:"node_out",c:"FD",i:["float"],g:!0}],u:[{a:"txt",b:"FC = cross ( FA , FB ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FD"],u:[{a:"txt",b:"FD = length ( FC ) ; FC /= FD ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"FC = normalize ( FC ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_NORMALIZE",C:[],B:[{a:"node_in",c:"FE",i:["vec3"],g:!1},{a:"node_in",c:"FF",i:["vec3"],g:!1},{a:"node_out",c:"FG",
i:["vec3"],g:!1},{a:"node_out",c:"FH",i:["float"],g:!0}],u:[{a:"txt",b:"FG = normalize ( FE ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FH"],u:[{a:"txt",b:"FH = length ( FE ) ;".split(" ")}]}]},{a:"txt",b:["FF",";"]}]},{a:"node",c:"FRESNEL",C:[{a:"node_var",c:"USE_FRESNEL_NORMAL",b:["0"]}],B:[{a:"node_in",c:"FI",i:["float"],g:!1},{a:"node_in",c:"FJ",i:["vec3"],g:!1},{a:"node_out",c:"FK",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_FRESNEL_NORMAL"],u:[{a:"txt",b:"vec3 cr = normalize ( FJ ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","cr","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 Aj = normalize ( ou ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","Aj","=","u_camera_direction",";"]}]}]},{a:"txt",b:"float sc = max ( FI , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"sc = gl_FrontFacing == false ? sc : _1_0 / sc ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"sc = gl_FrontFacing ? sc : _1_0 / sc ;".split(" ")}]}]},{a:"txt",b:"FK = sd ( Aj , cr , sc ) ;".split(" ")}]},{a:"node",c:"BACKGROUND",C:[],B:[{a:"node_in",c:"FL",i:["vec3"],g:!1},{a:"node_in",c:"FM",i:["float"],g:!1},{a:"node_out",c:"FN",i:["vec3"],g:!1}],u:[{a:"txt",b:"FN = FL * FM ;".split(" ")}]},{a:"node",c:"B4W_REFLECT",C:[],B:[{a:"node_in",c:"FO",i:["vec3"],g:!1},{a:"node_in",c:"FP",i:["vec3"],g:!1},{a:"node_out",c:"FQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FQ = reflect ( _ ( u_view_tsr_inverse , FO ) , FP ) ;".split(" ")}]},
{a:"node",c:"B4W_REFLECT_WORLD",C:[],B:[{a:"node_in",c:"FR",i:["vec3"],g:!1},{a:"node_out",c:"FS",i:["vec3"],g:!1}],u:[{a:"txt",b:"FS = reflect ( - ou . xyz , FR ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",C:[],B:[{a:"node_in",c:"FT",i:["vec3"],g:!1},{a:"node_in",c:"FU",i:["float"],g:!1},{a:"node_in",c:"FV",i:["const","float"],g:!1},{a:"node_in",c:"FW",i:["const","float"],g:!1},{a:"node_out",c:"FX",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],
u:[{a:"txt",b:"float bN = length ( sD ) ; if ( bN < FW ) { vec2 b_ = r_ ( FT ) ; float cd = clamp ( _0_5 * ( FW - bN ) , _0_0 , _1_0 ) ; float hG = FU * cd ; vec3 cf = normalize ( ou * sA ) ; float cg = _1_0 / FV ; vec2 ch = cf . xy * hG / ( FV * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= FV ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; FX = rZ ( b_ ) ; } else FX = FT ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",C:[],B:[{a:"node_in",c:"FY",i:["vec3"],g:!1},{a:"node_out",c:"FZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FZ = clamp ( FY , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",C:[],B:[{a:"node_in",c:"F_",i:["vec3"],g:!1},{a:"node_in",c:"Ga",i:["float"],g:!1},{a:"node_out",c:"Gb",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gb = rY ( F_ , Ga ) ;".split(" ")}]},{a:"node",c:"B4W_TRANSLUCENCY",C:[],B:[{a:"node_in",c:"Gc",i:["float"],g:!1},{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",
c:"Ge",i:["float"],g:!1},{a:"node_in",c:"Gf",i:["float"],g:!1},{a:"node_in",c:"Gg",i:["float"],g:!1},{a:"node_out",c:"Gh",i:["float"],g:!0},{a:"node_out",c:"Gi",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gh"],u:[{a:"txt",b:["Gh","=","Gc",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gi"],u:[{a:"txt",b:"Gi = vec4 ( Gd , Ge , Gf , Gg ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",C:[],B:[{a:"node_out",c:"Gj",i:["float"],g:!1}],u:[{a:"txt",b:["Gj","=","u_time",";"]}]},{a:"node",
c:"B4W_SMOOTHSTEP",C:[],B:[{a:"node_in",c:"Gk",i:["float"],g:!1},{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["float"],g:!1},{a:"node_out",c:"Gn",i:["float"],g:!1}],u:[{a:"txt",b:"Gn = smoothstep ( Gl , Gm , Gk ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",C:[],B:[{a:"node_in",c:"Go",i:["vec3"],g:!1},{a:"node_in",c:"Gp",i:["float"],g:!1}],u:[{a:"txt",b:"E = Go ; I = Gp ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",C:[],B:[{a:"node_in",c:"Gq",i:["vec3"],g:!1},{a:"node_out",c:"Gr",
i:["float"],g:!1}],u:[{a:"txt",b:"Gr = ( Gq . r + Gq . g + Gq . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",C:[],B:[{a:"node_in",c:"Gs",i:["float"],g:!1},{a:"node_out",c:"Gt",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gt [ 0 ] = Gs ; Gt [ 1 ] = Gs ; Gt [ 2 ] = Gs ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["IS_WORLD"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sv = - ou ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_GL"],l:{a:"grp",f:[{a:"txt",b:"vec3 os = - ou ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEX_COORD_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","ou",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","ou",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","sx","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"sx = sx ; else sx = - sx ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","sy","=","sx",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sz = normalize ( sx ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","sz",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","sz",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],
l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sz , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sz ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 sB = cross ( sx , k . xyz ) * k . w ; mat3 sC = mat3 ( k . xyz , sB , sx ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 os = h ; vec4 sD = i ; float sE = u_emit ; float sF = u_ambient ;".split(" ")}]}}]},
{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLV",b:[""]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2},"PARTICLE_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_orco_tex_coord ; GLSL_OUT vec3 rV ;".split(" ")}]}}]},{a:"node",c:"TEX_COORD_UV",
C:[],B:[{a:"node_param",c:"node_TEX_COORD_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"sl",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sl","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_param",c:"node_UV_MERGED_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"sk",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sk","=","node_UV_MERGED_var_a_uv",";"]}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_param",c:"node_UVMAP_var_a_uv",i:["GLSL_IN","vec2"],g:!1},
{a:"node_param",c:"sm",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sm","=","node_UVMAP_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_param",c:"node_GEOMETRY_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"se",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["se","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_VC",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"Gu",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",
b:["Gu","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC1_var_a_vertex_color",i:["GLSL_IN","float"],g:!1},{a:"node_param",c:"Gv",i:["GLSL_OUT","float"],g:!1}],u:[{a:"txt",b:["Gv","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC2_var_a_vertex_color",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"Gw",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["Gw","=","node_GEOMETRY_VC2_var_a_vertex_color",
";"]}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC3_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"Gx",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",b:["Gx","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{a:"nodes_global"},{a:"txt",b:["void","J","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["rV","=","a_orco_tex_coord",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};
a["include/pack.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PACK_GLSLF",l:{a:"grp",f:[{a:"define",c:"PACK_GLSLF",b:[""]},{a:"txt",b:"vec4 er ( const in float il ) { vec4 fq = vec4 ( _255_0 * _255_0 * _255_0 , _255_0 * _255_0 , _255_0 , _1_0 ) ; vec4 Gy = vec4 ( _0_0 , _1_0 / _255_0 , _1_0 / _255_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( il * fq ) ; jB -= jB . xxyz * Gy ; return jB ; } float cQ ( const in vec4 Gz ) { float eq ; vec4 fq = vec4 ( _1_0 / ( _255_0 * _255_0 * _255_0 ) , _1_0 / ( _255_0 * _255_0 ) , _1_0 / _255_0 , _1_0 ) ; eq = dot ( Gz , fq ) ; return eq ; } vec4 er ( const in vec2 rf ) { vec2 fq = vec2 ( _255_0 , _1_0 ) ; vec2 Gy = vec2 ( _0_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( rf . xxyy * fq . xyxy ) ; jB -= jB . xxzz * Gy . xyxy ; if ( rf . r == _1_0 ) jB . rg = vec2 ( _0_0 , _1_0 ) ; if ( rf . g == _1_0 ) jB . ba = vec2 ( _0_0 , _1_0 ) ; return jB ; } vec2 jg ( const in vec4 GA ) { vec2 rf ; vec2 fq = vec2 ( _1_0 / _255_0 , _1_0 ) ; rf . r = dot ( GA . rg , fq ) ; rf . g = dot ( GA . ba , fq ) ; return rf ; }".split(" ")}]}}]}]};
a["include/particles.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"include",F:"math.glslv"},{a:"txt",b:"struct cY { float df ; vec3 O ; float L ; vec3 aQ ; float bK ; vec3 dl ; vec3 dm ; float dn ; } ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"void GE ( inout vec3 aQ , float GB , vec4 kb , vec4 bv ) { float GC = bv . x - kb . x ; float GD = ( GB - kb . x ) / GC ; aQ = mix ( aQ , bv . yzw , clamp ( GD , 0.0 , 1.0 ) ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 GH ( float t , float GF , vec4 GG [ COLOR_RAMP_LENGTH ] ) { float GB = t / GF ; vec3 aQ = GG [ 0 ] . yzw ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",1,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 0 ] , GG [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 1 ] , GG [ 2 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 2 ] , GG [ 3 ] ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}"]}]}}]},{a:"txt",b:"float GN ( float t , float GF , float GI , float GJ ) { float GK = max ( 0.01 , min ( GF , GI ) ) ; float GL = max ( 0.01 , min ( GF , GJ ) ) ; float GM = GF - GL ; float L = clamp ( t / GK , 0.0 , 1.0 ) - step ( GM , t ) * ( t - GM ) / GL ; return L ; } cY cZ ( ) { cY sp ; float t ; float GF = a_p_data [ 0 ] ; float GO = a_p_data [ 1 ] ; if ( u_p_cyclic == 1 ) { t = mod ( u_p_time , u_p_length ) - GO ; if ( t < 0.0 ) t += u_p_length ; } if ( u_p_cyclic != 1 ) { t = u_p_time - GO ; } if ( t < 0.0 || t >= GF ) { sp . df = 0.0001 ; sp . O = vec3 ( 99999.0 , 0.0 , 0.0 ) ; } if ( ! ( t < 0.0 || t >= GF ) ) { vec4 S = R ( a_tbn ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WORLD_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 fn = a_position ; vec3 sb = bW ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fn = ap ( u_model_tsr , a_position ) ; vec3 sb = _ ( u_model_tsr , bW ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 GP = u_p_nfactor * sb ; GP += a_p_vels . xyz ; GP . z -= u_p_gravity * t / 2.0 ; float GQ = max ( u_p_mass , EPSILON ) ; GP += ( u_p_wind_fac * u_wind / GQ ) * t / 2.0 ; sp . dn = t ; sp . dl = GP ; sp . dm = bW * a_p_vels . w ; sp . O = fn + GP * t ; sp . bK = a_p_vels . w * t ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:"sp . df = GLSL_TEXTURE ( u_color_ramp_tex , vec2 ( t / u_p_max_lifetime , 0.5 ) ) . g ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . df = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"sp . aQ = GH ( t , u_p_max_lifetime , u_p_color_ramp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . aQ = vec3 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"sp . L = GN ( t , a_p_data [ 0 ] , u_p_fade_in , u_p_fade_out ) ; } return sp ; }".split(" ")}]}}]}]};
a["include/particles_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"include",F:"environment.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 rZ ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 r_ ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
C:[],B:[{a:"node_out",c:"sG",i:["vec3"],g:!0},{a:"node_out",c:"sH",i:["float"],g:!0},{a:"node_out",c:"sI",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sG"],u:[{a:"txt",b:"sG = normalize ( sD . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = abs ( sD . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:"sI = length ( sD . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",C:[],B:[{a:"node_in",c:"sJ",i:["float"],
g:!1},{a:"node_in",c:"sK",i:["float"],g:!1},{a:"node_in",c:"sL",i:["float"],g:!1},{a:"node_out",c:"sM",i:["vec3"],g:!1}],u:[{a:"txt",b:"sM = vec3 ( sJ , sK , sL ) ;".split(" ")}]},{a:"node",c:"COMBHSV",C:[],B:[{a:"node_in",c:"sN",i:["float"],g:!1},{a:"node_in",c:"sO",i:["float"],g:!1},{a:"node_in",c:"sP",i:["float"],g:!1},{a:"node_out",c:"sQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"sQ = kh ( vec3 ( sN , sO , sP ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",C:[],B:[{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",
b:"sR = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",C:[],B:[{a:"node_out",c:"sS",i:["vec3"],g:!1}],u:[{a:"txt",b:"sS = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_out",c:"sT",i:["vec3"],g:!1}],u:[{a:"txt",b:"sT = rZ ( A ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",C:[],B:[{a:"node_out",c:"sU",i:["vec3"],g:!1}],u:[{a:"txt",b:"sU = 2.0 * vec3 ( A , _0_0 ) - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",C:[],B:[{a:"node_out",c:"sV",
i:["vec3"],g:!1}],u:[{a:"txt",b:"sV = vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_out",c:"sW",i:["float"],g:!1}],u:[{a:"txt",b:["sW","=","_1_0",";"]}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_out",c:"sX",i:["float"],g:!1},{a:"node_out",c:"sY",i:["float"],g:!1}],u:[{a:"txt",b:"sX = _1_0 ; sY = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_out",c:"sZ",i:["float"],g:!1},{a:"node_out",c:"s_",i:["float"],g:!1},{a:"node_out",c:"ta",i:["float"],g:!1}],
u:[{a:"txt",b:"sZ = _1_0 ; s_ = _1_0 ; ta = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_NO",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"tb",i:["vec3"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["tc","=","tb",";"]}]},{a:"node_else",u:[{a:"txt",b:"tc = sw . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",C:[],B:[{a:"node_out",c:"td",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",C:[],B:[{a:"node_out",c:"tf",i:["vec3"],g:!1}],u:[{a:"txt",b:"tf = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",C:[],B:[{a:"node_out",c:"tg",i:["vec3"],g:!1}],u:[{a:"txt",b:"tg [ 0 ] = sD [ 0 ] ; tg [ 1 ] = sD [ 1 ] ; tg [ 2 ] = sD [ 2 ] ;".split(" ")}]},
{a:"node",c:"GEOMETRY_GL",C:[],B:[{a:"node_out",c:"th",i:["vec3"],g:!1}],u:[{a:"txt",b:"th = vec3 ( os . r , os . g , os . b ) ;".split(" ")}]},{a:"node",c:"NEW_GEOMETRY",C:[],B:[{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["vec3"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["vec3"],g:!1},{a:"node_out",c:"tr",i:["float"],g:!1},{a:"node_out",c:"tu",i:["float"],g:!1}],u:[{a:"txt",b:"tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = vec3 ( _0_0 ) ; to = vec3 ( _0_0 ) ; tr = _0_0 ; tu = _0_0 ;".split(" ")}]},
{a:"node",c:"HUE_SAT",C:[],B:[{a:"node_in",c:"tv",i:["float"],g:!1},{a:"node_in",c:"tw",i:["float"],g:!1},{a:"node_in",c:"tx",i:["float"],g:!1},{a:"node_in",c:"ty",i:["float"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_out",c:"tA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 kg = kf ( tz ) ; kg [ 0 ] += ( tv - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tw , tx ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; tA = mix ( tz , kh ( kg ) , ty ) ;".split(" ")}]},
{a:"node",c:"INVERT",C:[],B:[{a:"node_in",c:"tB",i:["float"],g:!1},{a:"node_in",c:"tC",i:["vec3"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = mix ( tC , vec3 ( _1_0 ) - tC , tB ) ;".split(" ")}]},{a:"node",c:"LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],B:[{a:"node_out",
c:"tE",i:["vec3"],g:!0},{a:"node_out",c:"tF",i:["vec3"],g:!1},{a:"node_out",c:"tG",i:["float"],g:!1},{a:"node_out",c:"tH",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 tI = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tJ = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",
o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"tF = - h + tJ ; tG = length ( tF ) ; tF = normalize ( tF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:"tH = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tG * tG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float oY = dot ( tF , tI ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tH *= oY ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",
j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"tH *= max ( LAMP_LIGHT_DIST - tG , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tF"],u:[{a:"txt",b:["tF","=","tI",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tG"],u:[{a:"txt",b:"tG = length ( tJ - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:["tH","=","_1_0",";"]}]}]}]}]}]},{a:"node",c:"NORMAL",C:[],B:[{a:"node_in",c:"tK",i:["vec3"],g:!1},{a:"node_out",
c:"tL",i:["vec3"],g:!0},{a:"node_out",c:"tM",i:["float"],g:!0},{a:"node_param",c:"sj",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tL"],u:[{a:"txt",b:["tL","=","sj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tM"],u:[{a:"txt",b:"tM = - dot ( tK , sj ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_VECTOR_VIEW",C:[],B:[{a:"node_in",c:"tN",i:["vec3"],g:!1},{a:"node_out",c:"tO",i:["vec3"],g:!1}],u:[{a:"txt",b:"tO = - _ ( u_view_tsr_frag , tN ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",
C:[],B:[{a:"node_in",c:"tP",i:["vec3"],g:!1},{a:"node_in",c:"tQ",i:["vec3"],g:!1},{a:"node_in",c:"tR",i:["float"],g:!1},{a:"node_in",c:"tS",i:["vec3"],g:!1},{a:"node_in",c:"tT",i:["float"],g:!1},{a:"node_in",c:"tU",i:["float"],g:!1},{a:"node_in",c:"tV",i:["vec3"],g:!1},{a:"node_in",c:"tW",i:["vec3"],g:!1},{a:"node_in",c:"tX",i:["float"],g:!1},{a:"node_in",c:"tY",i:["vec3"],g:!1},{a:"node_in",c:"tZ",i:["float"],g:!1},{a:"node_out",c:"t_",i:["vec3"],g:!1},{a:"node_out",c:"ua",i:["vec3"],g:!1},{a:"node_out",
c:"ub",i:["vec3"],g:!1},{a:"node_out",c:"uc",i:["vec3"],g:!1},{a:"node_out",c:"ud",i:["vec3"],g:!1},{a:"node_out",c:"ue",i:["vec4"],g:!1},{a:"node_out",c:"uf",i:["vec4"],g:!1},{a:"node_out",c:"ug",i:["vec3"],g:!1},{a:"node_out",c:"uh",i:["vec3"],g:!1},{a:"node_out",c:"ui",i:["vec3"],g:!1},{a:"node_out",c:"uj",i:["float"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1}],u:[{a:"txt",b:"ub = tQ ; uc = tS ; ud = tV ; ug = tQ ; uh = tS ; metalness_out = tU ; ui = tW ; uj = tX ; uk = tY ; ul = tZ ; t_ = sE * ub ; ua = sF * u_environment_energy * cz ( ud ) ; uf = cC ( ub ) ; H = uf ; ue [ 0 ] = tR ; ue [ 1 ] = tT ; ue [ 2 ] = tU ;".split(" ")}]},
{a:"node",c:"BSDF_END",C:[],B:[{a:"node_in",c:"um",i:["vec4"],g:!1},{a:"node_in",c:"un",i:["vec3"],g:!1},{a:"node_in",c:"uo",i:["vec3"],g:!1},{a:"node_in",c:"up",i:["vec4"],g:!1},{a:"node_in",c:"uq",i:["vec3"],g:!1},{a:"node_in",c:"ur",i:["vec3"],g:!1},{a:"node_in",c:"us",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_out",c:"uw",i:["vec3"],g:!1}],u:[{a:"txt",b:"uw = um . rgb + un ; uw = mix ( uw , us , ut ) ; I = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 uy = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( uy ) ; uu = uu * uy ; uw += uu ;".split(" ")}]}]},{a:"txt",b:["uo",";"]}]},{a:"node",c:"BSDF_COMPUTE",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["vec2"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_in",c:"uC",i:["float"],g:!1},{a:"node_in",c:"uD",i:["vec4"],g:!1},{a:"node_out",
c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 sb = uB ; float uG = clamp ( uD [ 0 ] , _0_0 , _1_0 ) ; float ux = clamp ( uD [ 1 ] , _0_0 , _1_0 ) ; float rF = uD [ 2 ] ; vec3 pW = normalize ( ou + uz ) ; float pf = ( _1_0 - uC ) * dot ( sb , uz ) + uC ; float uH = ( _1_0 - uC ) * max ( dot ( uz , pW ) , _0_0 ) + uC ; float uI = ( _1_0 - uC ) * max ( dot ( uB , pW ) , _0_0 ) + uC ; uE = _0_0 ; if ( uA . r != _0_0 ) { if ( uG > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = uG * uG ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uz - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uE = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uE = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uE = pf ; uE = max ( uE , _0_0 ) ; } float L = ux ; float uJ = L * L ; float dX = ( uI * uJ - uI ) * uI + _1_0 ; float cy = uJ / ( M_PI * dX * dX ) ; float uK ; float uL ; float uM = pow ( _1_0 - uH , 5.0 ) ; uK = _1_0 ; uL = uM ; float hI = L / 2.0 ; float uN = hI * hI ; float uO = _1_0 - uN ; float uP = _1_0 / ( uH * uH * uO + uN ) ; uK *= uP ; uL *= uP ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uQ = mix ( uL , uK , rC ) ; uF = max ( pf * cy * uQ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",C:[],B:[{a:"node_in",c:"uR",i:["vec3"],g:!1},{a:"node_in",c:"uS",i:["float"],g:!1},{a:"node_in",c:"uT",i:["float"],g:!1},{a:"node_in",c:"uU",i:["float"],g:!1},{a:"node_in",c:"uV",i:["vec3"],g:!1},{a:"node_in",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["vec3"],g:!1}],u:[{a:"txt",b:"uX = uR ; uS ; uT ; uU ; uV ; uW ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"uY",i:["vec3"],g:!1},{a:"node_in",c:"uZ",i:["float"],
g:!1},{a:"node_in",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["vec3"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1},{a:"node_out",c:"vd",i:["vec3"],g:!1},{a:"node_out",c:"ve",i:["float"],g:!1},{a:"node_out",c:"vf",i:["float"],g:!1},{a:"node_out",c:"vg",i:["vec3"],g:!1},{a:"node_out",c:"vh",i:["vec3"],g:!1},{a:"node_out",c:"vi",i:["float"],g:!1},{a:"node_out",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uY ; vc = uZ ; vf = _0_0 ; vi = _0_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vg","=","u_",";"]}]},{a:"node_else",u:[{a:"txt",b:["vg","=","ot",";"]}]}]},{a:"txt",b:"va ; vd ; ve ; vh ; vj ; vk ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",C:[],B:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},{a:"node",c:"BSDF_GLOSSY",
C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1},{a:"node_out",c:"vu",i:["vec3"],g:!1},{a:"node_out",c:"vv",i:["float"],g:!1},{a:"node_out",c:"vw",i:["vec3"],g:!1},{a:"node_out",c:"vx",i:["float"],g:!1},{a:"node_out",c:"vy",i:["float"],g:!1},{a:"node_out",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1},{a:"node_out",c:"vB",i:["float"],g:!1},
{a:"node_out",c:"vC",i:["vec3"],g:!1},{a:"node_out",c:"vD",i:["float"],g:!1}],u:[{a:"txt",b:"vw = vq ; vx = vr ; vy = _1_0 ; vB = _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vz","=","vs",";"]}]},{a:"node_else",u:[{a:"txt",b:["vz","=","ot",";"]}]}]},{a:"txt",b:"vt ; vu ; vv ; vA ; vC ; vD ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",C:[],B:[{a:"node_in",c:"vE",i:["vec3"],g:!1},{a:"node_in",c:"vF",i:["float"],g:!1},{a:"node_in",c:"vG",i:["float"],g:!1},{a:"node_in",
c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["vec3"],g:!1}],u:[{a:"txt",b:"vI = vE ; vF ; vG ; vH ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",C:[],B:[{a:"node_in",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["vec3"],g:!1},{a:"node_out",c:"vM",i:["float"],g:!1},{a:"node_out",c:"vN",i:["vec3"],g:!1},{a:"node_out",c:"vO",i:["float"],g:!1},{a:"node_out",c:"vP",i:["float"],g:!1},{a:"node_out",c:"vQ",i:["vec3"],g:!1},{a:"node_out",c:"vR",i:["vec3"],g:!1},
{a:"node_out",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1},{a:"node_out",c:"vU",i:["float"],g:!1}],u:[{a:"txt",b:"vT = vJ ; vP = _0_0 ; vS = _0_0 ; vU = _0_0 ; vQ = ot ; vK ; vL ; vM ; vN ; vO ; vR ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",C:[],B:[{a:"node_in",c:"vV",i:["vec3"],g:!1},{a:"node_in",c:"vW",i:["vec3"],g:!1},{a:"node_out",c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX = vV ; vW ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",C:[],B:[{a:"node_in",c:"vY",i:["vec3"],g:!1},
{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb [ 0 ] = wb [ 1 ] = wb [ 2 ] = _0_0 ; vY ; vZ ; v_ ; wa ;".split(" ")}]},{a:"node",c:"BSDF_TOON",C:[],B:[{a:"node_in",c:"wc",i:["vec3"],g:!1},{a:"node_in",c:"wd",i:["float"],g:!1},{a:"node_in",c:"we",i:["float"],g:!1},{a:"node_in",c:"wf",i:["vec3"],g:!1},{a:"node_out",c:"wg",i:["vec3"],g:!1}],u:[{a:"txt",b:"wg = wc ; wd ; we ; wf ;".split(" ")}]},
{a:"node",c:"BSDF_VELVET",C:[],B:[{a:"node_in",c:"wh",i:["vec3"],g:!1},{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_in",c:"wj",i:["vec3"],g:!1},{a:"node_out",c:"wk",i:["vec3"],g:!1}],u:[{a:"txt",b:"wk = wh ; wi ; wj ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",C:[],B:[{a:"node_in",c:"wl",i:["vec3"],g:!1},{a:"node_in",c:"wm",i:["float"],g:!1},{a:"node_in",c:"wn",i:["vec3"],g:!1},{a:"node_in",c:"wo",i:["float"],g:!1},{a:"node_in",c:"wp",i:["float"],g:!1},{a:"node_in",c:"wq",i:["vec3"],g:!1},
{a:"node_out",c:"wr",i:["vec3"],g:!1}],u:[{a:"txt",b:"wr [ 0 ] = wr [ 1 ] = wr [ 2 ] = _0_0 ; wl ; wn ; wo ; wp ; wq ; wm ;".split(" ")}]},{a:"node",c:"EMISSION",C:[],B:[{a:"node_in",c:"ws",i:["vec3"],g:!1},{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1},{a:"node_out",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],g:!1},{a:"node_out",c:"wB",i:["vec3"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1},{a:"node_out",c:"wD",i:["float"],g:!1},{a:"node_out",c:"wE",i:["vec3"],
g:!1},{a:"node_out",c:"wF",i:["vec3"],g:!1},{a:"node_out",c:"wG",i:["float"],g:!1},{a:"node_out",c:"wH",i:["vec3"],g:!1},{a:"node_out",c:"wI",i:["float"],g:!1}],u:[{a:"txt",b:"wF = wt * ws ; wD = _0_0 ; wG = _1_0 ; wE = ot ; wu ; wv ; wA ; wB ; wC ; wH ; wI ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",C:[],B:[{a:"node_in",c:"wJ",i:["vec3"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"wK [ 0 ] = wK [ 1 ] = wK [ 2 ] = _0_0 ; wJ ;".split(" ")}]},{a:"node",c:"HOLDOUT",C:[],B:[{a:"node_out",
c:"wL",i:["vec3"],g:!1}],u:[{a:"txt",b:"wL [ 0 ] = wL [ 1 ] = wL [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",C:[],B:[{a:"node_in",c:"wM",i:["vec3"],g:!1},{a:"node_in",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["vec3"],g:!1}],u:[{a:"txt",b:"wO [ 0 ] = wO [ 1 ] = wO [ 2 ] = _0_0 ; wM ; wN ;".split(" ")}]},{a:"node",c:"VOLUME_SCATTER",C:[],B:[{a:"node_in",c:"wP",i:["vec3"],g:!1},{a:"node_in",c:"wQ",i:["float"],g:!1},{a:"node_in",c:"wR",i:["float"],g:!1},{a:"node_out",c:"wS",i:["vec3"],
g:!1}],u:[{a:"txt",b:"wS [ 0 ] = wS [ 1 ] = wS [ 2 ] = _0_0 ; wP ; wQ ; wR ;".split(" ")}]},{a:"node",c:"BUMP",C:[],B:[{a:"node_in",c:"GV",i:["float"],g:!1},{a:"node_in",c:"GW",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_in",c:"GX",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["vec3"],g:!1}],u:[{a:"txt",b:"wX = GX ; GV ; GW ; wV ;".split(" ")}]},{a:"node",c:"DISPLACEMENT_BUMP",C:[],B:[{a:"node_in",c:"xd",i:["float"],g:!1},{a:"node_out",c:"xe",i:["vec3"],g:!1}],u:[{a:"txt",b:"xe = ot ; xd ;".split(" ")}]},
{a:"node",c:"NORMAL_MAP",C:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_in",c:"xg",i:["vec4"],g:!1},{a:"node_in",c:"xh",i:["vec3"],g:!1},{a:"node_out",c:"xi",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","xj","=","xh",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","xj","=","sy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],
u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi = sC * xi ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ; xi = _ ( u_model_tsr , xi ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ;".split(" ")}]}]},
{a:"txt",b:"float ma = max ( xf , _0_0 ) ; xi = normalize ( mix ( xj , xi , ma ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",C:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],B:[{a:"node_in",c:"xk",i:["vec3"],g:!1},{a:"node_out",c:"xl",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["xl","=","xk",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",
j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ; xl = ap ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ; xl = ap ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ; xl = _ ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ; xl = _ ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = normalize ( xl ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",C:[],B:[{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_out",c:"xn",i:["vec3"],g:!1}],u:[{a:"txt",b:"xn [ 0 ] = xn [ 1 ] = xn [ 2 ] = _0_0 ; xm ;".split(" ")}]},{a:"node",c:"WAVELENGTH",C:[],B:[{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xo ;".split(" ")}]},
{a:"node",c:"SEPXYZ",C:[],B:[{a:"node_in",c:"xq",i:["vec3"],g:!1},{a:"node_out",c:"xr",i:["float"],g:!1},{a:"node_out",c:"xs",i:["float"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xr = xq [ 0 ] ; xs = xq [ 1 ] ; xt = xq [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",C:[],B:[{a:"node_in",c:"xu",i:["float"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xu ; xB [ 1 ] = xv ; xB [ 2 ] = xA ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",C:[],B:[{a:"node_in",c:"xC",i:["vec3"],g:!1},{a:"node_in",c:"xD",i:["float"],g:!1},{a:"node_in",c:"xE",i:["float"],g:!1},{a:"node_out",c:"xF",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = xD - xE * _0_5 ; xF = max ( ( _1_0 + xE ) * xC + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",C:[],B:[{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_in",c:"xH",i:["float"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1},{a:"node_out",c:"xJ",i:["float"],g:!1},{a:"node_out",
c:"xK",i:["float"],g:!1}],u:[{a:"txt",b:"xI = xJ = xK = _0_0 ; xG ; xH ;".split(" ")}]},{a:"node",c:"TEX_IMAGE",C:[],B:[{a:"node_in",c:"GY",i:["vec3"],g:!1},{a:"node_out",c:"GZ",i:["vec3"],g:!1},{a:"node_out",c:"G_",i:["float"],g:!1}],u:[{a:"txt",b:"GZ [ 0 ] = GZ [ 1 ] = GZ [ 2 ] = _0_0 ; G_ = _1_0 ; GY ;".split(" ")}]},{a:"node",c:"TEX_ENVIRONMENT",C:[],B:[{a:"node_in",c:"Ha",i:["vec3"],g:!1},{a:"node_out",c:"Hb",i:["vec3"],g:!1}],u:[{a:"txt",b:"Hb [ 0 ] = Hb [ 1 ] = Hb [ 2 ] = _0_0 ; Ha ;".split(" ")}]},
{a:"node",c:"TEX_SKY",C:[],B:[{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_out",c:"xM",i:["vec3"],g:!1}],u:[{a:"txt",b:"xM [ 0 ] = xM [ 1 ] = xM [ 2 ] = _0_0 ; xL ;".split(" ")}]},{a:"node",c:"TEX_NOISE",C:[],B:[{a:"node_in",c:"xN",i:["vec3"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_out",c:"xR",i:["vec3"],g:!1},{a:"node_out",c:"xS",i:["float"],g:!1}],u:[{a:"txt",b:"xR [ 0 ] = xR [ 1 ] = xR [ 2 ] = _0_0 ; xS = _1_0 ; xN ; xO ; xP ; xQ ;".split(" ")}]},
{a:"node",c:"TEX_WAVE",C:[],B:[{a:"node_in",c:"xT",i:["vec3"],g:!1},{a:"node_in",c:"xU",i:["float"],g:!1},{a:"node_in",c:"xV",i:["float"],g:!1},{a:"node_in",c:"xW",i:["float"],g:!1},{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_out",c:"xY",i:["vec3"],g:!1},{a:"node_out",c:"xZ",i:["float"],g:!1}],u:[{a:"txt",b:"xY [ 0 ] = xY [ 1 ] = xY [ 2 ] = _0_0 ; xZ = _1_0 ; xT ; xU ; xV ; xW ; xX ;".split(" ")}]},{a:"node",c:"TEX_VORONOI",C:[],B:[{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],
g:!1},{a:"node_out",c:"yb",i:["vec3"],g:!1},{a:"node_out",c:"yc",i:["float"],g:!1}],u:[{a:"txt",b:"yb [ 0 ] = yb [ 1 ] = yb [ 2 ] = _0_0 ; yc = _1_0 ; x_ ; ya ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",C:[],B:[{a:"node_in",c:"yd",i:["vec3"],g:!1},{a:"node_in",c:"ye",i:["float"],g:!1},{a:"node_in",c:"yf",i:["float"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["float"],g:!1},{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["float"],g:!1},{a:"node_out",c:"yk",i:["vec3"],
g:!1},{a:"node_out",c:"yl",i:["float"],g:!1}],u:[{a:"txt",b:"yk [ 0 ] = yk [ 1 ] = yk [ 2 ] = _0_0 ; yl = _1_0 ; yd ; ye ; yf ; yg ; yh ; yi ; yj ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",C:[],B:[{a:"node_in",c:"ym",i:["vec3"],g:!1},{a:"node_out",c:"yn",i:["vec3"],g:!1},{a:"node_out",c:"yo",i:["float"],g:!1}],u:[{a:"txt",b:"yn [ 0 ] = yn [ 1 ] = yn [ 2 ] = _0_0 ; yo = _1_0 ; ym ;".split(" ")}]},{a:"node",c:"TEX_MAGIC",C:[],B:[{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],
g:!1},{a:"node_in",c:"yr",i:["float"],g:!1},{a:"node_out",c:"ys",i:["vec3"],g:!1},{a:"node_out",c:"yt",i:["float"],g:!1}],u:[{a:"txt",b:"ys [ 0 ] = ys [ 1 ] = ys [ 2 ] = _0_0 ; yt = _1_0 ; yp ; yq ; yr ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",C:[],B:[{a:"node_in",c:"yu",i:["vec3"],g:!1},{a:"node_in",c:"yv",i:["vec3"],g:!1},{a:"node_in",c:"yA",i:["vec3"],g:!1},{a:"node_in",c:"yB",i:["float"],g:!1},{a:"node_out",c:"yC",i:["vec3"],g:!1},{a:"node_out",c:"yD",i:["float"],g:!1}],u:[{a:"txt",b:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yu ; yv ; yA ; yB ;".split(" ")}]},
{a:"node",c:"TEX_BRICK",C:[],B:[{a:"node_in",c:"yE",i:["vec3"],g:!1},{a:"node_in",c:"yF",i:["vec3"],g:!1},{a:"node_in",c:"yG",i:["vec3"],g:!1},{a:"node_in",c:"yH",i:["vec3"],g:!1},{a:"node_in",c:"yI",i:["float"],g:!1},{a:"node_in",c:"yJ",i:["float"],g:!1},{a:"node_in",c:"yK",i:["float"],g:!1},{a:"node_in",c:"yL",i:["float"],g:!1},{a:"node_in",c:"yM",i:["float"],g:!1},{a:"node_out",c:"yN",i:["vec3"],g:!1},{a:"node_out",c:"yO",i:["float"],g:!1}],u:[{a:"txt",b:"yN [ 0 ] = yN [ 1 ] = yN [ 2 ] = _0_0 ; yO = _1_0 ; yE ; yF ; yG ; yH ; yI ; yJ ; yK ; yL ; yM ;".split(" ")}]},
{a:"node",c:"ADD_SHADER",C:[],B:[{a:"node_in",c:"yP",i:["vec3"],g:!1},{a:"node_in",c:"yQ",i:["vec3"],g:!1},{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = clamp ( yP + yQ , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",C:[],B:[{a:"node_in",c:"yS",i:["float"],g:!1},{a:"node_in",c:"yT",i:["vec3"],g:!1},{a:"node_in",c:"yU",i:["vec3"],g:!1},{a:"node_in",c:"yV",i:["vec3"],g:!1},{a:"node_in",c:"yW",i:["float"],g:!1},{a:"node_in",c:"yX",i:["vec3"],g:!1},{a:"node_in",
c:"yY",i:["float"],g:!1},{a:"node_in",c:"yZ",i:["float"],g:!1},{a:"node_in",c:"y_",i:["vec3"],g:!1},{a:"node_in",c:"za",i:["vec3"],g:!1},{a:"node_in",c:"zb",i:["float"],g:!1},{a:"node_in",c:"zc",i:["vec3"],g:!1},{a:"node_in",c:"zd",i:["float"],g:!1},{a:"node_in",c:"ze",i:["vec3"],g:!1},{a:"node_in",c:"zf",i:["float"],g:!1},{a:"node_in",c:"zg",i:["vec3"],g:!1},{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_in",c:"zi",i:["float"],g:!1},{a:"node_in",c:"zj",i:["vec3"],g:!1},{a:"node_in",c:"zk",i:["vec3"],
g:!1},{a:"node_in",c:"zl",i:["float"],g:!1},{a:"node_in",c:"zm",i:["vec3"],g:!1},{a:"node_in",c:"zn",i:["float"],g:!1},{a:"node_out",c:"zo",i:["vec3"],g:!1},{a:"node_out",c:"zp",i:["vec3"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["vec3"],g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["vec3"],g:!1},{a:"node_out",c:"zv",i:["vec3"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["vec3"],g:!1},
{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( yS , _0_0 , _1_0 ) ; zp = mix ( yV , ze , zD ) ; zq = mix ( yW , zf , zD ) ; if ( yZ > _0_0 ) { if ( zi > _0_0 ) { zr = mix ( yX , zg , zD ) ; zs = mix ( yY , zh , zD ) ; } else { zr = yX ; zs = yY ; } } else { zr = zg ; zs = zh ; } if ( zb > _0_0 ) { if ( zl > _0_0 ) { zv = mix ( za , zk , zD ) ; } else { zv = za ; } } else { zv = zk ; } zt = mix ( yZ , zi , zD ) ; zu = mix ( y_ , zj , zD ) ; zA = mix ( zb , zl , zD ) ; zB = mix ( zc , zm , zD ) ; zC = mix ( zd , zn , zD ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zE"],u:[{a:"txt",b:"zE = rZ ( A ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zF"],u:[{a:"txt",b:"zF = vec3 ( A , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",C:[],B:[{a:"node_out",c:"zG",i:["vec3"],g:!1}],u:[{a:"txt",b:"zG = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",C:[],B:[{a:"node_out",c:"zH",i:["vec3"],
g:!1}],u:[{a:"txt",b:["zH","=","ot",";"]}]},{a:"node",c:"TEX_COORD_GE",C:[],B:[{a:"node_out",c:"zI",i:["vec3"],g:!1}],u:[{a:"txt",b:"zI = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_OB",C:[],B:[{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"txt",b:"zJ [ 0 ] = zJ [ 1 ] = zJ [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_CA",C:[],B:[{a:"node_out",c:"zK",i:["vec3"],g:!1}],u:[{a:"txt",b:"zK [ 0 ] = sD [ 0 ] ; zK [ 1 ] = sD [ 1 ] ; zK [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",
C:[],B:[{a:"node_out",c:"zL",i:["vec3"],g:!1}],u:[{a:"txt",b:"zL [ 0 ] = zL [ 1 ] = zL [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",C:[],B:[{a:"node_out",c:"zM",i:["vec3"],g:!1}],u:[{a:"txt",b:"zM [ 0 ] = zM [ 1 ] = zM [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_out",c:"zN",i:["vec3"],g:!1}],u:[{a:"txt",b:"zN = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",C:[],B:[{a:"node_out",c:"zO",i:["float"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1},{a:"node_out",
c:"zQ",i:["float"],g:!1},{a:"node_out",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["float"],g:!1},{a:"node_out",c:"zT",i:["vec3"],g:!1},{a:"node_out",c:"zU",i:["vec3"],g:!1},{a:"node_param",c:"GR",i:["GLSL_IN","vec4"],g:!0},{a:"node_param",c:"GS",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"GT",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"GU",i:["GLSL_IN","vec3"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PARTICLE_BATCH"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zO"],u:[{a:"txt",b:"zO = GR [ 0 ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zP"],u:[{a:"txt",b:"zP = GR [ 1 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zQ"],u:[{a:"txt",b:"zQ = GR [ 2 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zR"],u:[{a:"txt",b:["zR","=","GS",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zS"],u:[{a:"txt",b:"zS = GR [ 3 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zT"],u:[{a:"txt",b:["zT","=","GT",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zU"],
u:[{a:"txt",b:["zU","=","GU",";"]}]}]}]},{a:"node_else",u:[{a:"txt",b:"zO = _0_0 ; zP = _0_0 ; zQ = _0_0 ; zR = vec3 ( _0_0 ) ; zS = _0_0 ; zT = zR ; zU = zR ;".split(" ")}]}]}]},{a:"node",c:"HAIR_INFO",C:[],B:[{a:"node_out",c:"zV",i:["float"],g:!1},{a:"node_out",c:"zW",i:["float"],g:!1},{a:"node_out",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["vec3"],g:!1}],u:[{a:"txt",b:"zV = _0_0 ; zW = _0_0 ; zX = _0_0 ; zY = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",C:[],B:[{a:"node_out",
c:"zZ",i:["vec3"],g:!1},{a:"node_out",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1},{a:"node_out",c:"Ab",i:["float"],g:!1}],u:[{a:"txt",b:"z_ = _0_0 ; Aa = _0_0 ; Ab = _0_0 ; zZ = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"WIREFRAME",C:[],B:[{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:["Ad","=","Ac",";"]}]},{a:"node",c:"TANGENT",C:[],B:[{a:"node_out",c:"Ae",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ae = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",
c:"LAYER_WEIGHT",C:[],B:[{a:"node_in",c:"Hc",i:["float"],g:!1},{a:"node_in",c:"Hd",i:["vec3"],g:!1},{a:"node_out",c:"Ah",i:["float"],g:!1},{a:"node_out",c:"Ai",i:["float"],g:!1}],u:[{a:"txt",b:"Ah = Ai = _0_0 ; Hd ; Hc ;".split(" ")}]},{a:"node",c:"LIGHT_PATH",C:[],B:[{a:"node_out",c:"Ak",i:["float"],g:!1},{a:"node_out",c:"Al",i:["float"],g:!1},{a:"node_out",c:"Am",i:["float"],g:!1},{a:"node_out",c:"An",i:["float"],g:!1},{a:"node_out",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1},
{a:"node_out",c:"Aq",i:["float"],g:!1},{a:"node_out",c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1},{a:"node_out",c:"At",i:["float"],g:!1}],u:[{a:"txt",b:"Ak = Al = Am = _0_0 ; An = Ao = Ap = _0_0 ; Aq = Aq = As = At = _0_0 ; Ar = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",C:[],B:[{a:"node_out",c:"Av",i:["vec3"],g:!1},{a:"node_out",c:"Aw",i:["vec3"],g:!1},{a:"node_out",c:"Ax",i:["float"],g:!1}],u:[{a:"txt",b:"Av = Aw = vec3 ( _0_0 ) ; Ax = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",
C:[],B:[],u:[]},{a:"node",c:"CURVE_VEC",C:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["0.0"]}],B:[{a:"node_in",c:"Ay",i:["float"],g:!1},{a:"node_in",c:"Az",i:["vec3"],g:!1},{a:"node_out",c:"AA",i:["vec3"],g:!1}],u:[{a:"txt",b:["AA","=","Az",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AA . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AA . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AA . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"txt",b:"AA = mix ( Az , AA , Ay ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",C:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",
c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AB",i:["float"],g:!1},{a:"node_in",c:"AC",i:["vec3"],g:!1},{a:"node_out",c:"AD",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = AC . r ; float g = AC . g ; float b = AC . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AD . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AD . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AD . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . b = b ;".split(" ")}]}]},{a:"txt",b:"AD = mix ( AC , AD , AB ) ;".split(" ")}]},{a:"node",c:"VALTORGB",C:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AE",i:["float"],g:!1},{a:"node_out",c:"AF",i:["vec3"],g:!1},{a:"node_out",c:"AG",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AE , NODE_TEX_ROW ) ) ; AF = AH . rgb ; AG = AH . a ;".split(" ")}]},
{a:"node",c:"MAPPING",C:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],B:[{a:"node_in",c:"AI",i:["vec3"],g:!1},{a:"node_out",c:"AJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["AJ","=","AI",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"AJ = AJ * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"AJ = AJ + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"AJ = ( MAPPING_TRS_MATRIX * vec4 ( AJ , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"AJ = max ( AJ , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"AJ = min ( AJ , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"AJ = normalize ( AJ ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",C:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],B:[{a:"node_in",c:"AK",i:["float"],g:!1},{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_out",c:"AM",i:["float"],g:!1}],u:[{a:"txt",b:"AM = AK + AL ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AM = clamp ( AM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AN",i:["float"],g:!1},{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_out",c:"AP",i:["float"],g:!1}],u:[{a:"txt",b:"AP = AN - AO ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AP = clamp ( AP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AQ",i:["float"],g:!1},{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_out",c:"AS",i:["float"],g:!1}],u:[{a:"txt",b:"AS = AQ * AR ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AS = clamp ( AS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AT",i:["float"],g:!1},{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_out",c:"AV",i:["float"],g:!1}],u:[{a:"txt",b:"AV = ( AU != _0_0 ) ? AT / AU : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AV = clamp ( AV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AW",i:["float"],g:!1},{a:"node_in",c:"AX",i:["float"],g:!1},
{a:"node_out",c:"AY",i:["float"],g:!1}],u:[{a:"txt",b:"AY = sin ( AW ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AY = clamp ( AY , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AX",";"]}]},{a:"node",c:"MATH_COSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AZ",i:["float"],g:!1},{a:"node_in",c:"A_",i:["float"],g:!1},{a:"node_out",c:"Ba",i:["float"],g:!1}],u:[{a:"txt",b:"Ba = cos ( AZ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Ba = clamp ( Ba , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["A_",";"]}]},{a:"node",c:"MATH_TANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bb",i:["float"],g:!1},{a:"node_in",c:"Bc",i:["float"],g:!1},{a:"node_out",c:"Bd",i:["float"],g:!1}],u:[{a:"txt",b:"Bd = tan ( Bb ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bc",";"]}]},{a:"node",c:"MATH_ARCSINE",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["float"],g:!1},{a:"node_out",c:"Bg",i:["float"],g:!1}],u:[{a:"txt",b:"Bg = ( Be <= _1_0 && Be >= - _1_0 ) ? asin ( Be ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bg = clamp ( Bg , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bf",";"]}]},{a:"node",c:"MATH_ARCCOSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bh",i:["float"],g:!1},{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_out",c:"Bj",i:["float"],g:!1}],u:[{a:"txt",b:"Bj = ( Bh <= _1_0 && Bh >= - _1_0 ) ? acos ( Bh ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bj = clamp ( Bj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bi",";"]}]},{a:"node",c:"MATH_ARCTANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bk",i:["float"],g:!1},{a:"node_in",c:"Bl",i:["float"],g:!1},{a:"node_out",c:"Bm",i:["float"],g:!1}],u:[{a:"txt",
b:"Bm = atan ( Bk ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bm = clamp ( Bm , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bl",";"]}]},{a:"node",c:"MATH_POWER",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bn",i:["float"],g:!1},{a:"node_in",c:"Bo",i:["float"],g:!1},{a:"node_out",c:"Bp",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Bn < _0_0 && Bo != floor ( Bo ) ) Bp = _0_0 ; else if ( Bo == _0_0 ) Bp = _1_0 ; else if ( Bn < _0_0 ) Bp = mix ( _1_0 , - _1_0 , sign ( mod ( - Bo , 2.0 ) ) ) * pow ( - Bn , Bo ) ; else if ( Bn == _0_0 ) Bp = _0_0 ; else Bp = pow ( Bn , Bo ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bq",i:["float"],g:!1},{a:"node_in",c:"Br",i:["float"],g:!1},{a:"node_out",c:"Bs",i:["float"],g:!1}],u:[{a:"txt",b:"Bs = ( Bq > _0_0 && Br > _0_0 ) ? log2 ( Bq ) / log2 ( Br ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bs = clamp ( Bs , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bt",i:["float"],g:!1},{a:"node_in",c:"Bu",i:["float"],g:!1},{a:"node_out",c:"Bv",i:["float"],g:!1}],u:[{a:"txt",b:"Bv = min ( Bt , Bu ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bv = clamp ( Bv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bw",i:["float"],g:!1},{a:"node_in",c:"Bx",i:["float"],
g:!1},{a:"node_out",c:"By",i:["float"],g:!1}],u:[{a:"txt",b:"By = max ( Bw , Bx ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",c:"BA",i:["float"],g:!1},{a:"node_out",c:"BB",i:["float"],g:!1}],u:[{a:"txt",b:"BB = floor ( Bz + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BB = clamp ( BB , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BA",";"]}]},{a:"node",c:"MATH_LESS_THAN",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BC",i:["float"],g:!1},{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_out",c:"BE",i:["float"],g:!1}],u:[{a:"txt",b:"BE = ( BC < BD ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BE = clamp ( BE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BF",i:["float"],g:!1},{a:"node_in",c:"BG",i:["float"],g:!1},{a:"node_out",c:"BH",i:["float"],g:!1}],u:[{a:"txt",b:"BH = ( BF > BG ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BH = clamp ( BH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BI",i:["float"],g:!1},{a:"node_in",c:"BJ",i:["float"],g:!1},{a:"node_out",c:"BK",
i:["float"],g:!1}],u:[{a:"txt",b:"BK = abs ( BJ ) > 0.000001 ? mod ( BI , BJ ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BL",i:["float"],g:!1},{a:"node_in",c:"BM",i:["float"],g:!1},{a:"node_out",c:"BN",i:["float"],g:!1}],u:[{a:"txt",b:"BN = abs ( BL ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BN = clamp ( BN , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BM",";"]}]},{a:"node",c:"MIX_RGB_MIX",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BO",i:["float"],g:!1},{a:"node_in",c:"BP",i:["vec3"],g:!1},{a:"node_in",c:"BQ",i:["vec3"],g:!1},{a:"node_out",c:"BR",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BO , _0_0 , _1_0 ) ; BR = mix ( BP , BQ , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BR = clamp ( BR , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BS , _0_0 , _1_0 ) ; BV = mix ( BT , BT + BU , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",C:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BW , _0_0 , _1_0 ) ; BZ = mix ( BX , BX * BY , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"B_",i:["float"],g:!1},{a:"node_in",c:"Ca",i:["vec3"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_out",c:"Cc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( B_ , _0_0 , _1_0 ) ; Cc = mix ( Ca , Ca - Cb , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cc = clamp ( Cc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cd",i:["float"],g:!1},{a:"node_in",c:"Ce",
i:["vec3"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_out",c:"Cg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Cg = vec3 ( _1_0 ) - ( vec3 ( Ch ) + zD * ( vec3 ( _1_0 ) - Cf ) ) * ( vec3 ( _1_0 ) - Ce ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Ci",
i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Ci , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Ck += step ( Ck , vec3 ( _0_0 ) ) ; Cl = Ch * Cj + zD * Cj / Ck ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cm , _0_0 , _1_0 ) ; Cp = mix ( Cn , abs ( Cn - Co ) , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cq",i:["float"],g:!1},{a:"node_in",
c:"Cr",i:["vec3"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_out",c:"Ct",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cq , _0_0 , _1_0 ) ; Ct = min ( Cr . rgb , Cs . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ct = clamp ( Ct , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cu",i:["float"],g:!1},{a:"node_in",c:"Cv",i:["vec3"],g:!1},{a:"node_in",
c:"Cw",i:["vec3"],g:!1},{a:"node_out",c:"Cx",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cu , _0_0 , _1_0 ) ; Cx = max ( Cv . rgb , Cw . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cx = clamp ( Cx , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cy",i:["float"],g:!1},{a:"node_in",c:"Cz",i:["vec3"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_out",
c:"CB",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cy , _0_0 , _1_0 ) ; vec3 CC = vec3 ( _1_0 - zD ) ; CB = mix ( Cz * ( CC + 2.0 * zD * CA ) , vec3 ( _1_0 ) - ( CC + 2.0 * zD * ( vec3 ( _1_0 ) - CA ) ) * ( vec3 ( _1_0 ) - Cz ) , step ( _0_5 , Cz ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CD",i:["float"],
g:!1},{a:"node_in",c:"CE",i:["vec3"],g:!1},{a:"node_in",c:"CF",i:["vec3"],g:!1},{a:"node_out",c:"CG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CD , _0_0 , _1_0 ) ; vec3 CH = vec3 ( _1_0 ) - zD * CF ; vec3 CI = clamp ( CE / CH , _0_0 , _1_0 ) ; CG = mix ( mix ( CI , vec3 ( _1_0 ) , step ( CH , vec3 ( _0_0 ) ) ) , CE , step ( CE , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CG = clamp ( CG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!1},{a:"node_in",c:"CL",i:["vec3"],g:!1},{a:"node_out",c:"CM",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CJ , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zD ) ; vec3 CH = ko + zD * CL ; vec3 CI = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CK ) / CH , _0_0 , _1_0 ) ; CM = mix ( CI , vec3 ( _0_0 ) , step ( CH , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CM = clamp ( CM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CN",i:["float"],g:!1},{a:"node_in",c:"CO",i:["vec3"],g:!1},{a:"node_in",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CN , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; CQ = CO ; CR = kf ( CP ) ; if ( CR . y != _0_0 ) { kg = kf ( CQ ) ; kg . x = CR . x ; CH = kh ( kg ) ; CQ = mix ( CQ , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CS",i:["float"],g:!1},{a:"node_in",c:"CT",i:["vec3"],g:!1},{a:"node_in",c:"CU",i:["vec3"],g:!1},{a:"node_out",c:"CV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CS , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; CV = CT ; vec3 kg , CR ; kg = kf ( CV ) ; if ( kg . y != _0_0 ) { CR = kf ( CU ) ; kg . y = Ch * kg . y + zD * CR . y ; CV = kh ( kg ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CV = clamp ( CV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CW",i:["float"],g:!1},{a:"node_in",c:"CX",i:["vec3"],g:!1},{a:"node_in",c:"CY",i:["vec3"],g:!1},{a:"node_out",c:"CZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CW , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 kg , CR ; kg = kf ( CX ) ; CR = kf ( CY ) ; kg . z = Ch * kg . z + zD * CR . z ; CZ = kh ( kg ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CZ = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"C_",i:["float"],g:!1},{a:"node_in",c:"Da",i:["vec3"],g:!1},{a:"node_in",c:"Db",i:["vec3"],g:!1},{a:"node_out",c:"Dc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( C_ , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; Dc = Da ; CR = kf ( Db ) ; if ( CR . y != _0_0 ) { kg = kf ( Dc ) ; kg . x = CR . x ; kg . y = CR . y ; CH = kh ( kg ) ; Dc = mix ( Dc , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dc = clamp ( Dc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Dd",i:["float"],g:!1},{a:"node_in",c:"De",i:["vec3"],g:!1},{a:"node_in",c:"Df",i:["vec3"],g:!1},{a:"node_out",c:"Dg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 Dh = Df + De - Df * De ; Dg = De * ( vec3 ( Ch ) + vec3 ( zD ) * ( ( vec3 ( _1_0 ) - De ) * Df + Dh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dg = clamp ( Dg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Di",i:["float"],g:!1},{a:"node_in",c:"Dj",i:["vec3"],g:!1},{a:"node_in",c:"Dk",i:["vec3"],g:!1},{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Di , _0_0 , _1_0 ) ; Dl = Dj + zD * ( 2.0 * Dk - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dl = clamp ( Dl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"OUTPUT",C:[],B:[{a:"node_in",c:"Du",i:["vec3"],g:!1},{a:"node_in",c:"Dv",i:["float"],g:!1}],u:[{a:"txt",b:"E = Du ; I = Dv ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",C:[],B:[{a:"node_in",c:"Dw",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dw ; I = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",
c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],B:[{a:"node_in",c:"Dy",i:["vec3"],g:!1},{a:"node_in",c:"Dz",i:["vec3"],g:!1},{a:"node_in",c:"DA",i:["float"],g:!1},{a:"node_in",c:"DB",i:["vec3"],g:!0},{a:"node_in",c:"DC",i:["float"],g:!0},{a:"node_out",c:"DD",i:["vec3"],g:!1},{a:"node_out",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1},{a:"node_out",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1},{a:"node_out",c:"DI",i:["vec2"],g:!1},{a:"node_out",
c:"DJ",i:["vec2"],g:!1},{a:"node_out",c:"DK",i:["vec4"],g:!1},{a:"node_param",c:"sn",i:["const","vec2"],g:!0},{a:"node_param",c:"so",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"DF = clamp ( Dy , _0_0 , _1_0 ) ; DG = so [ 0 ] * clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"DH = normalize ( DB ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["DH","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",
o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"DD = DC * DF ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DD = sE * DF ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["DF","*=","DA",";"]}]}]},{a:"txt",b:"DE = sF * u_environment_energy * cz ( DH ) ; DK = vec4 ( _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"DI = vec2 ( sn [ 0 ] , sn [ 1 ] ) ; DJ = vec2 ( so [ 1 ] , so [ 2 ] ) ;".split(" ")}]}]},
{a:"txt",b:["H","=","DK",";"]}]},{a:"node_else",u:[{a:"txt",b:"DD = vec3 ( _0_0 ) ; DE = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],B:[{a:"node_in",c:"DL",i:["vec4"],g:!1},{a:"node_in",c:"DM",i:["vec3"],g:!1},{a:"node_in",c:"DN",i:["vec3"],g:!1},{a:"node_in",c:"DO",i:["float"],g:!0},{a:"node_in",c:"DP",i:["float"],g:!0},{a:"node_in",c:"DQ",
i:["float"],g:!0},{a:"node_out",c:"DR",i:["vec3"],g:!0},{a:"node_out",c:"DS",i:["float"],g:!0},{a:"node_out",c:"DT",i:["vec3"],g:!0},{a:"node_out",c:"DU",i:["vec3"],g:!0},{a:"node_out",c:"DV",i:["vec3"],g:!0},{a:"node_param",c:"sr",i:["float"],g:!1},{a:"node_param",c:"su",i:["float"],g:!1}],u:[{a:"txt",b:["DO",";"]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DR"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"DR = DL . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DR = vec3 ( _0_0 ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["DR","+=","DM",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DT"],u:[{a:"txt",b:["DT","=","DN",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DU"],u:[{a:"txt",b:"DU = DL . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DV"],u:[{a:"txt",b:["DV","=","DM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( DQ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * DP ; DS = clamp ( DQ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( sr , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * su ; DS = sr * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["F","=","DM",";"]}]},{a:"node_else",u:[{a:"txt",b:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["G","=","DN",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",c:"oU",i:["float"],g:!1}],u:[{a:"txt",
b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]}]},
{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},{a:"node_in",c:"pc",i:["vec2"],g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , k . xyz ) ; pa = cross ( pe , k . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},
{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],
g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , k . xyz ) ; pi = cross ( pe , k . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{a:"txt",b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",
c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , k . xyz ) ; pn = cross ( pe , k . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{a:"txt",b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , k . xyz ) ; pF = cross ( pe , k . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},{a:"txt",
b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],g:!1},
{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , k . xyz ) ; pL = cross ( pe , k . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( k . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( k . xyz , pW ) ; pv = dot ( k . xyz , ou ) ; qj = dot ( k . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , k . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qz [ 0 ] < _1_0 || qz [ 1 ] == _0_0 ) qA = _0_0 ; else { if ( qz [ 1 ] < 100.0 ) qz [ 1 ] = sqrt ( _1_0 / qz [ 1 ] ) ; else qz [ 1 ] = 10.0 / qz [ 1 ] ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( k . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qz [ 0 ] , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qz [ 1 ] , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float DW = qL . x ; float DX = qL . y ; float DY = qL . z ; float DZ = qL . w ; float D_ = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ea = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eb = pow ( Ea , DX ) ; qQ = qF + qP * vec4 ( qO * D_ * pow ( qM , vec3 ( DW ) ) , _1_0 ) ; qQ += DY * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , DZ ) * qP * vec4 ( qO * D_ * vec3 ( Eb ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{a:"txt",b:"qR = qG + qO * qN * qI ;".split(" ")}]},{a:"node",c:"RGB",C:[{a:"node_var",c:"RGB_IND",b:["0"]}],B:[{a:"node_out",c:"Ec",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ec = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",C:[],B:[{a:"node_in",c:"Ed",i:["vec3"],g:!1},{a:"node_out",c:"Ee",i:["float"],g:!1}],u:[{a:"txt",b:"Ee = dot ( Ed , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
C:[],B:[{a:"node_in",c:"Ef",i:["vec3"],g:!1},{a:"node_out",c:"Eg",i:["float"],g:!0},{a:"node_out",c:"Eh",i:["float"],g:!0},{a:"node_out",c:"Ei",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eg"],u:[{a:"txt",b:"Eg = Ef . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eh"],u:[{a:"txt",b:"Eh = Ef . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ei"],u:[{a:"txt",b:"Ei = Ef . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",C:[],B:[{a:"node_in",c:"Ej",i:["vec3"],
g:!1},{a:"node_out",c:"Ek",i:["float"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 En = kf ( Ej ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = En . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = En . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = En . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",C:[],B:[{a:"node_in",
c:"Eo",i:["float"],g:!1},{a:"node_in",c:"Ep",i:["float"],g:!1},{a:"node_in",c:"Eq",i:["float"],g:!1},{a:"node_out",c:"Er",i:["float"],g:!1}],u:[{a:"txt",b:"Er = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Eo - Eq ) * Ep ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",C:[],B:[{a:"node_in",c:"Es",i:["vec3"],g:!1},{a:"node_in",c:"Et",i:["float"],g:!1},{a:"node_out",c:"Eu",i:["vec3"],g:!1}],u:[{a:"txt",b:"Eu = Es ; if ( Eu . x > _0_0 ) Eu . x = pow ( Es . x , Et ) ; if ( Eu . y > _0_0 ) Eu . y = pow ( Es . y , Et ) ; if ( Eu . z > _0_0 ) Eu . z = pow ( Es . z , Et ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",C:[],B:[{a:"node_in",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ew = max ( vec3 ( _0_0 ) , Ev ) ; Ew = pow ( Ew , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",C:[],B:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_out",c:"Ey",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ey = max ( vec3 ( _0_0 ) , Ex ) ; Ey = pow ( Ey , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",C:[],B:[{a:"node_out",c:"Ez",i:["vec3"],
g:!1},{a:"node_out",c:"EA",i:["vec3"],g:!1},{a:"node_out",c:"EB",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ez"],u:[{a:"txt",b:"Ez [ 2 ] = Ez [ 1 ] = Ez [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA [ 2 ] = EA [ 1 ] = EA [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EB"],u:[{a:"txt",b:["EB","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT",C:[],B:[{a:"node_in",c:"He",i:["vec3"],g:!1},{a:"node_out",
c:"Hf",i:["vec3"],g:!0},{a:"node_out",c:"Hg",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_var_texture , He ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Hf"],u:[{a:"txt",b:"Hf = AH . xyz ; bC ( Hf ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Hg"],u:[{a:"txt",b:"Hg = AH . w ;".split(" ")}]}]}]},{a:"node",c:"TEXTURE_COLOR",C:[{a:"node_var",
c:"NON_COLOR",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EM",i:["vec3"],g:!0},{a:"node_in",c:"EN",i:["vec3"],g:!0},{a:"node_in",c:"EO",i:["vec3"],g:!0},{a:"node_in",c:"EP",i:["vec3"],g:!0},{a:"node_out",c:"EQ",i:["vec3"],g:!0},{a:"node_out",c:"ER",i:["float"],g:!0},{a:"node_out",c:"ES",i:["vec3"],g:!0},{a:"node_out",c:"ET",i:["float"],g:!0},{a:"node_out",c:"EU",i:["vec3"],g:!0},{a:"node_out",c:"EV",i:["float"],
g:!0},{a:"node_out",c:"EW",i:["vec3"],g:!0},{a:"node_out",c:"EX",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EM ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EQ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_ER"],u:[{a:"txt",b:"ER = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EN ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ES"],u:[{a:"txt",b:"ES = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","ES",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ET"],u:[{a:"txt",b:"ET = AH . w ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EO ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EU"],u:[{a:"txt",b:"EU = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EU",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EV"],u:[{a:"txt",b:"EV = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",
b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EP ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EW"],u:[{a:"txt",b:"EW = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EW",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EX"],u:[{a:"txt",b:"EX = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",C:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},
{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EY",i:["vec3"],g:!0},{a:"node_in",c:"EZ",i:["vec3"],g:!0},{a:"node_in",c:"E_",i:["vec3"],g:!0},{a:"node_in",c:"Fa",i:["vec3"],g:!0},{a:"node_out",c:"Fb",i:["vec3"],g:!0},{a:"node_out",c:"Fc",i:["float"],g:!0},{a:"node_out",c:"Fd",i:["vec3"],g:!0},{a:"node_out",c:"Fe",i:["float"],g:!0},{a:"node_out",c:"Ff",i:["vec3"],g:!0},{a:"node_out",c:"Fg",i:["float"],g:!0},{a:"node_out",c:"Fh",i:["vec3"],g:!0},{a:"node_out",c:"Fi",i:["float"],g:!0},{a:"node_param",
c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fb"],u:[{a:"txt",b:"Fb = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fc"],u:[{a:"txt",b:"Fc = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EZ ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fd"],u:[{a:"txt",b:"Fd = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fe"],u:[{a:"txt",b:"Fe = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( E_ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ff"],u:[{a:"txt",b:"Ff = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Fg"],u:[{a:"txt",b:"Fg = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( Fa ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fh"],u:[{a:"txt",b:"Fh = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fi"],u:[{a:"txt",b:"Fi = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",C:[{a:"node_var",c:"VALUE_ROW_IND",
b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],B:[{a:"node_out",c:"Fj",i:["float"],g:!1}],u:[{a:"txt",b:"Fj = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",C:[],B:[{a:"node_in",c:"Fk",i:["vec3"],g:!1},{a:"node_in",c:"Fl",i:["vec3"],g:!1},{a:"node_out",c:"Fm",i:["vec3"],g:!1},{a:"node_out",c:"Fn",i:["float"],g:!0}],u:[{a:"txt",b:"Fm = Fk + Fl ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fn"],u:[{a:"txt",b:"Fn = ( abs ( Fm [ 0 ] ) + abs ( Fm [ 1 ] ) + abs ( Fm [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_SUBTRACT",C:[],B:[{a:"node_in",c:"Fo",i:["vec3"],g:!1},{a:"node_in",c:"Fp",i:["vec3"],g:!1},{a:"node_out",c:"Fq",i:["vec3"],g:!1},{a:"node_out",c:"Fr",i:["float"],g:!0}],u:[{a:"txt",b:"Fq = Fo - Fp ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = ( abs ( Fq [ 0 ] ) + abs ( Fq [ 1 ] ) + abs ( Fq [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",C:[],B:[{a:"node_in",c:"Fs",i:["vec3"],g:!1},{a:"node_in",c:"Ft",i:["vec3"],g:!1},
{a:"node_out",c:"Fu",i:["vec3"],g:!1},{a:"node_out",c:"Fv",i:["float"],g:!0}],u:[{a:"txt",b:"Fu = Fs + Ft ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fv"],u:[{a:"txt",b:"Fv = length ( Fu ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fu"],u:[{a:"txt",b:"Fu = normalize ( Fu ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",C:[],B:[{a:"node_in",c:"Fw",i:["vec3"],g:!1},{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_out",c:"Fy",i:["vec3"],g:!1},{a:"node_out",c:"Fz",
i:["float"],g:!0}],u:[{a:"txt",b:"Fy = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fz"],u:[{a:"txt",b:"Fz = dot ( Fw , Fx ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",C:[],B:[{a:"node_in",c:"FA",i:["vec3"],g:!1},{a:"node_in",c:"FB",i:["vec3"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1},{a:"node_out",c:"FD",i:["float"],g:!0}],u:[{a:"txt",b:"FC = cross ( FA , FB ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FD"],u:[{a:"txt",b:"FD = length ( FC ) ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_NORMALIZE",C:[],B:[{a:"node_in",c:"FE",i:["vec3"],g:!1},{a:"node_in",c:"FF",i:["vec3"],g:!1},{a:"node_out",c:"FG",i:["vec3"],g:!1},{a:"node_out",c:"FH",i:["float"],g:!0}],u:[{a:"txt",b:"FG = normalize ( FE ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FH"],u:[{a:"txt",b:"FH = length ( FE ) ;".split(" ")}]}]},{a:"txt",b:["FF",";"]}]},{a:"node",c:"B4W_REFLECT",C:[],B:[{a:"node_in",c:"FO",i:["vec3"],g:!1},{a:"node_in",c:"FP",i:["vec3"],g:!1},{a:"node_out",c:"FQ",
i:["vec3"],g:!1}],u:[{a:"txt",b:"FQ = reflect ( _ ( u_view_tsr_inverse , FO ) , FP ) ;".split(" ")}]},{a:"node",c:"B4W_REFLECT_WORLD",C:[],B:[{a:"node_in",c:"FR",i:["vec3"],g:!1},{a:"node_out",c:"FS",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 Hh = - ou . xyz ; FS = reflect ( Hh , FR ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",C:[],B:[{a:"node_in",c:"FT",i:["vec3"],g:!1},{a:"node_in",c:"FU",i:["float"],g:!1},{a:"node_in",c:"FV",i:["const","float"],g:!1},{a:"node_in",c:"FW",i:["const","float"],g:!1},{a:"node_out",
c:"FX",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"float bN = length ( sD ) ; if ( bN < FW ) { vec2 b_ = r_ ( FT ) ; float cd = clamp ( _0_5 * ( FW - bN ) , _0_0 , _1_0 ) ; float hG = FU * cd ; vec3 cf = normalize ( ou * sA ) ; float cg = _1_0 / FV ; vec2 ch = cf . xy * hG / ( FV * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= FV ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; FX = rZ ( b_ ) ; } else FX = FT ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",C:[],B:[{a:"node_in",c:"FY",i:["vec3"],g:!1},{a:"node_out",c:"FZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FZ = clamp ( FY , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",C:[],B:[{a:"node_in",c:"F_",i:["vec3"],g:!1},{a:"node_in",c:"Ga",i:["float"],g:!1},{a:"node_out",c:"Gb",i:["vec3"],g:!1}],u:[{a:"txt",b:["Gb","=","F_",";"]}]},{a:"node",c:"B4W_TRANSLUCENCY",C:[],B:[{a:"node_in",c:"Gc",i:["float"],g:!1},{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",c:"Ge",i:["float"],
g:!1},{a:"node_in",c:"Gf",i:["float"],g:!1},{a:"node_in",c:"Gg",i:["float"],g:!1},{a:"node_out",c:"Gh",i:["float"],g:!0},{a:"node_out",c:"Gi",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gh"],u:[{a:"txt",b:["Gh","=","Gc",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gi"],u:[{a:"txt",b:"Gi = vec4 ( Gd , Ge , Gf , Gg ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",C:[],B:[{a:"node_out",c:"Gj",i:["float"],g:!1}],u:[{a:"txt",b:["Gj","=","u_time",";"]}]},{a:"node",c:"B4W_SMOOTHSTEP",
C:[],B:[{a:"node_in",c:"Gk",i:["float"],g:!1},{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["float"],g:!1},{a:"node_out",c:"Gn",i:["float"],g:!1}],u:[{a:"txt",b:"Gn = smoothstep ( Gl , Gm , Gk ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",C:[],B:[{a:"node_in",c:"Go",i:["vec3"],g:!1},{a:"node_in",c:"Gp",i:["float"],g:!1}],u:[{a:"txt",b:"E = Go ; I = Gp ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",C:[],B:[{a:"node_in",c:"Gq",i:["vec3"],g:!1},{a:"node_out",c:"Gr",i:["float"],g:!1}],
u:[{a:"txt",b:"Gr = ( Gq . r + Gq . g + Gq . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",C:[],B:[{a:"node_in",c:"Gs",i:["float"],g:!1},{a:"node_out",c:"Gt",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gt [ 0 ] = Gs ; Gt [ 1 ] = Gs ; Gt [ 2 ] = Gs ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},{a:"cond",f:[{a:"if",
j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","sx","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"sx = sx ; else sx = - sx ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","sy","=","sx",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sz = normalize ( sx ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","sz",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","sz",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sz , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sz ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sx , k . xyz ) * k . w ; mat3 sC = mat3 ( k . xyz , W , sx ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 os = h ; vec4 sD = i ; float sE = u_emit ; float sF = u_ambient ;".split(" ")},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/particles_nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLV",b:[""]},{a:"node",c:"TEX_COORD_UV",C:[],
B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"UV_MERGED",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"UVMAP",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"PARTICLE_INFO",C:[{a:"node_var",c:"PART_INFO_SIZE",b:["0"]},{a:"node_var",c:"PART_INFO_AGE",b:["0"]},{a:"node_var",c:"PART_INFO_LT",b:["0"]},{a:"node_var",c:"PART_INFO_LOC",b:["0"]},{a:"node_var",c:"PART_INFO_IND",b:["0"]},{a:"node_var",c:"PART_INFO_VEL",
b:["0"]},{a:"node_var",c:"PART_INFO_A_VEL",b:["0"]}],B:[{a:"node_param",c:"GR",i:["GLSL_OUT","vec4"],g:!0},{a:"node_param",c:"GS",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"GT",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"GU",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"node_PARTICLE_INFO_var_a_p_indices",i:["GLSL_IN","float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_SIZE"],u:[{a:"txt",b:"GR [ 3 ] = Hm ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_AGE"],u:[{a:"txt",
b:"GR [ 1 ] = Hl ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LT"],u:[{a:"txt",b:"GR [ 2 ] = Ho ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LOC"],u:[{a:"txt",b:["GS","=","Hi",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_IND"],u:[{a:"txt",b:"GR [ 0 ] = node_PARTICLE_INFO_var_a_p_indices ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_VEL"],u:[{a:"txt",b:["GT","=","Hj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_A_VEL"],u:[{a:"txt",
b:["GU","=","Hk",";"]}]}]}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 Hi , in vec3 Hj , in vec3 Hk , in float Hl , in float Hm , in vec2 Hn , in float Ho ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","Hn",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/precision_statement.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PRECISION_STATEMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"PRECISION_STATEMENT_GLSLF",
b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","float",";"]}]}}]}]};a["include/procedural.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PROCEDURAL_GLSLF",l:{a:"grp",f:[{a:"define",c:"PROCEDURAL_GLSLF",b:[""]},{a:"txt",b:"vec4 Hp ( vec4 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec3 Hp ( vec3 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec2 Hp ( vec2 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec4 Hq ( vec4 x ) { return x - floor ( x * ( _1_0 / 7.0 ) ) * 7.0 ; } vec4 Hr ( vec4 x ) { return Hp ( ( 34.0 * x + 5.0 ) * x ) ; }".split(" ")},
{a:"define",c:"K",b:["0.142857142857"]},{a:"define",c:"K2",b:["0.0714285714285"]},{a:"define",c:"JITTER",b:["0.7"]},{a:"txt",b:"vec2 fG ( vec2 Hs ) { vec2 Ht = Hp ( floor ( Hs ) ) ; vec2 Hu = fract ( Hs ) ; vec4 Hv = Hu . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 Hw = Hu . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Hr ( Ht . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Hr ( p + Ht . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 Hx = Hq ( p ) * K + K2 ; vec4 Hy = Hq ( floor ( p * K ) ) * K + K2 ; vec4 Hz = Hv + JITTER * Hx ; vec4 HA = Hw + JITTER * Hy ; vec4 dz = Hz * Hz + HA * HA ;".split(" ")},
{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"txt",b:"dz . xy = min ( dz . xy , dz . zw ) ; dz . x = min ( dz . x , dz . y ) ; return dz . xx ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dz . xy = ( dz . x < dz . y ) ? dz . xy : dz . yx ; dz . xz = ( dz . x < dz . z ) ? dz . xz : dz . zx ; dz . xw = ( dz . x < dz . w ) ? dz . xw : dz . wx ; dz . y = min ( dz . y , dz . z ) ; dz . y = min ( dz . y , dz . w ) ; return sqrt ( dz . xy ) ;".split(" ")}]}}]},{a:"txt",b:"} vec3 kX ( vec2 Hs , float HB ) { vec2 Ht = Hp ( floor ( Hs ) ) ; vec2 Hu = fract ( Hs ) ; vec4 Hv = Hu . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 Hw = Hu . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Hr ( Ht . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Hr ( p + Ht . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 Hx = Hq ( p ) * K + K2 ; vec4 Hy = Hq ( floor ( p * K ) ) * K + K2 ; vec4 Hz = Hv + JITTER * Hx ; vec4 HA = Hw + JITTER * Hy ; vec4 HC = Hz * Hz + HA * HA ; Hz += HB ; HA += HB ; vec4 HD = Hz * Hz + HA * HA ; Hz += HB ; HA += HB ; vec4 HE = Hz * Hz + HA * HA ; HC . xy = min ( HC . xy , HC . zw ) ; HC . x = min ( HC . x , HC . y ) ; HD . xy = min ( HD . xy , HD . zw ) ; HD . x = min ( HD . x , HD . y ) ; HE . xy = min ( HE . xy , HE . zw ) ; HE . x = min ( HE . x , HE . y ) ; return vec3 ( HC . x , HD . x , HE . x ) ; } vec3 HF ( vec3 x ) { return Hp ( ( ( x * 34.0 ) + _1_0 ) * x ) ; } float fv ( vec2 kQ ) { const vec4 HG = vec4 ( 0.211324865405187 , 0.366025403784439 , - 0.577350269189626 , 0.024390243902439 ) ; vec2 cl = floor ( kQ + dot ( kQ , HG . yy ) ) ; vec2 HH = kQ - cl + dot ( cl , HG . xx ) ; vec2 HI ; HI = ( HH . x > HH . y ) ? vec2 ( _1_0 , _0_0 ) : vec2 ( _0_0 , _1_0 ) ; vec4 HJ = HH . xyxy + HG . xxzz ; HJ . xy -= HI ; cl = Hp ( cl ) ; vec3 p = HF ( HF ( cl . y + vec3 ( _0_0 , HI . y , _1_0 ) ) + cl . x + vec3 ( _0_0 , HI . x , _1_0 ) ) ; vec3 aA = max ( 0.5 - vec3 ( dot ( HH , HH ) , dot ( HJ . xy , HJ . xy ) , dot ( HJ . zw , HJ . zw ) ) , _0_0 ) ; aA = aA * aA ; aA = aA * aA ; vec3 x = 2.0 * fract ( p * HG . www ) - _1_0 ; vec3 cj = abs ( x ) - 0.5 ; vec3 Hx = floor ( x + 0.5 ) ; vec3 HK = x - Hx ; aA *= 1.79284291400159 - 0.85373472095314 * ( HK * HK + cj * cj ) ; vec3 g ; g . x = HK . x * HH . x + cj . x * HH . y ; g . yz = HK . yz * HJ . xz + cj . yz * HJ . yw ; return 130.0 * dot ( aA , g ) ; } vec2 HN ( vec2 fW ) { float HC = dot ( fW , vec2 ( 12.9898 , 78.233 ) ) ; float HD = dot ( fW , vec2 ( 12.9898 , 78.233 ) * 2.0 ) ; float HL = fract ( sin ( HC ) * 43758.5453 ) * 2.0 - _1_0 ; float HM = fract ( sin ( HD ) * 43758.5453 ) * 2.0 - _1_0 ; return vec2 ( HL , HM ) ; } float lg ( vec2 HO ) { return fract ( sin ( dot ( HO , vec2 ( 12.9898 , 78.233 ) ) ) * 43758.5453 ) ; }".split(" ")}]}}]}]};
a["include/refraction.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"REFRACTION_GLSLF",l:{a:"grp",f:[{a:"define",c:"REFRACTION_GLSLF",b:[""]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"float eS ( in float cR , inout vec2 eR , in vec2 eI ) { vec4 HP = GLSL_TEXTURE ( u_scene_depth , eR ) ; float eT = cQ ( HP ) ; if ( eT < m ) { eR = eI ; return cR ; } else { return eT ; } return cR ; }".split(" ")}]}}]},
{a:"txt",b:"vec3 cN ( in vec3 rq , in vec2 HQ ) { vec2 eI = rq . xy / rq . z ; vec2 eR = eI + HQ ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , rq ) ; float cR = cQ ( cP ) ; eS ( cR , eR , eI ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ; return eX ; }".split(" ")}]}}]}]}}]}]};a["include/scale_texcoord.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SCALE_TEXCOORD_GLSLV",
l:{a:"grp",f:[{a:"define",c:"SCALE_TEXCOORD_GLSLV",b:[""]},{a:"txt",b:"vec2 az ( vec2 b_ , vec3 HR ) { return ( b_ + 0.5 ) * HR . xy - 0.5 ; }".split(" ")}]}}]}]};a["include/shadow.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLF",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLF",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"CSM_FADE_LAST_CASCADE",b:["0"]},{a:"var",c:"CSM_BLEND_BETWEEN_CASCADES",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"COMPARED_MODE",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"procedural.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float HS = 0.1 ; const float HT = 0.1 ; const float HU = - 0.01 ; const float HV = 0.05 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","POISSON_X_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 HW = vec4 ( 0.14383161 , 0.34495938 , - 0.38277543 , - 0.26496911 ) ; vec4 HX = vec4 ( 0.53742981 , 0.19984126 , 0.79197514 , - 0.094184101 ) ; vec4 HY = vec4 ( - 0.94201624 , - 0.91588581 , - 0.2418884 , 0.44323325 ) ; vec4 HZ = vec4 ( - 0.81544232 , 0.94558609 , - 0.81409955 , 0.97484398 ) ; vec4 H_ = vec4 ( - 0.1410079 , 0.2938776 , 0.27676845 , - 0.41893023 ) ; vec4 Ia = vec4 ( - 0.4737342 , 0.78641367 , 0.19090188 , - 0.9293887 ) ; vec4 Ib = vec4 ( - 0.39906216 , 0.45771432 , 0.99706507 , - 0.97511554 ) ; vec4 Ic = vec4 ( - 0.87912464 , - 0.76890725 , 0.9143759 , 0.7564837 ) ;".split(" ")}]}},
{a:"elif",j:["POISSON_DISK_NUM","POISSON_X_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 HW = vec2 ( - 0.37192261 , 0.47109537 ) ; vec2 HX = vec2 ( - 0.6807477 , 0.69048062 ) ; vec2 HY = vec2 ( 0.11615683 , - 0.91318524 ) ; vec2 HZ = vec2 ( 0.93688596 , - 0.16948928 ) ; vec2 H_ = vec2 ( - 0.89699117 , 0.74092316 ) ; vec2 Ia = vec2 ( 0.38263656 , - 0.66119884 ) ; vec2 Ib = vec2 ( - 0.08193062 , - 0.21275223 ) ; vec2 Ic = vec2 ( 0.05578877 , 0.84225623 ) ;".split(" ")}]}},{a:"elif",j:["POISSON_DISK_NUM",
"POISSON_X_4",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 HW = vec2 ( - 0.51808083 , 0.0 ) ; vec2 HX = vec2 ( 0.5741194 , 0.0 ) ; vec2 HY = vec2 ( - 0.68048857 , 0.0 ) ; vec2 HZ = vec2 ( 0.82934988 , 0.0 ) ; vec2 H_ = vec2 ( 0.70009436 , 0.0 ) ; vec2 Ia = vec2 ( - 0.78790467 , 0.0 ) ; vec2 Ib = vec2 ( - 0.58619489 , 0.0 ) ; vec2 Ic = vec2 ( 0.41902178 , 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"bool Ie ( vec2 iK , float Id ) { return all ( lessThanEqual ( iK , vec2 ( 1.0 + Id ) ) ) && all ( greaterThanEqual ( iK , vec2 ( 0.0 - Id ) ) ) ; } float Il ( float If , float Ig , mat2 Ih , vec3 Ii , float Ij , PRECISION GLSL_SMPLR2D_SHDW Ik ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 iK , fI ; fI . x = If ; fI . y = Ig ; fI = Ih * fI ; iK = Ii . xy + fI * Ij / SHADOW_TEX_RES ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 iK = Ii . xy ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"if ( ! Ie ( iK , HU ) ) return 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",
f:[{a:"txt",b:"float eq = cQ ( GLSL_TEXTURE ( Ik , iK ) ) ; return step ( Ii . z , eq ) ;".split(" ")}]}},{a:"elif",j:["COMPARED_MODE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE ( Ik , vec3 ( iK , Ii . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return step ( Ii . z , GLSL_TEXTURE ( Ik , iK ) . r ) ;".split(" ")}]}}]},{a:"txt",b:"} float Iq ( vec3 Ii , PRECISION GLSL_SMPLR2D_SHDW Ik , float Ij ) { float Im = 0.0 ; Ii . z = clamp ( Ii . z , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float In = HN ( Ii . xy ) . x * M_PI ; float Io = cos ( In ) ; float Ip = sin ( In ) ; mat2 Ih = mat2 ( Io , Ip , - Ip , Io ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Im += Il ( HW [ cl ] , H_ [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HX [ cl ] , Ia [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HY [ cl ] , Ib [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HZ [ cl ] , Ic [ cl ] , Ih , Ii , Ij , Ik ) ; } return clamp ( Im / ( float ( POISSON_DISK_NUM ) * 4.0 ) , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ii , Ij , Ik ) ;".split(" ")}]}}]},{a:"txt",b:"} float Iz ( vec3 Ir , PRECISION GLSL_SMPLR2D_SHDW Is , vec3 It , PRECISION GLSL_SMPLR2D_SHDW Iu , float Iv , float Iw , float aL ) { float Ix , Iy ; Ir . z = clamp ( Ir . z , 0.0 , 1.0 ) ; It . z = clamp ( It . z , 0.0 , 1.0 ) ; Ix = 0.0 ; Iy = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float In = HN ( Ir . xy ) . x * M_PI ; float Io = cos ( In ) ; float Ip = sin ( In ) ; mat2 Ih = mat2 ( Io , Ip , - Ip , Io ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Ix += Il ( HW [ cl ] , H_ [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HX [ cl ] , Ia [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HY [ cl ] , Ib [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HZ [ cl ] , Ic [ cl ] , Ih , Ir , Iv , Is ) ; } for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Iy += Il ( HW [ cl ] , H_ [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HX [ cl ] , Ia [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HY [ cl ] , Ib [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HZ [ cl ] , Ic [ cl ] , Ih , It , Iw , Iu ) ; } Ix = mix ( Ix , Iy , aL ) ; Ix /= ( float ( POISSON_DISK_NUM ) * 4.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ix += Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ir , Iv , Is ) ; Iy += Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , It , Iw , Iu ) ; Ix = mix ( Ix , Iy , aL ) ;".split(" ")}]}}]},{a:"txt",b:"return clamp ( Ix , 0.0 , 1.0 ) ; } float IA ( vec2 iK ) { float a = min ( iK . x , iK . y ) ; float b = min ( 1.0 - iK . x , 1.0 - iK . y ) ; return min ( a , b ) ; } float IC ( float uP , float IB ) { if ( IB >= 0.0 && IB <= HT ) uP = ( uP - 1.0 ) / HT * IB + 1.0 ; return uP ; } float IH ( vec3 ID , vec3 IE , PRECISION GLSL_SMPLR2D_SHDW Is , PRECISION GLSL_SMPLR2D_SHDW Iu , float Iv , float Iw , float IF , float eq ) { float uP ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_BLEND_BETWEEN_CASCADES"],l:{a:"grp",f:[{a:"txt",b:"float IB = IA ( ID . xy ) ; if ( - eq > IF && IB >= 0.0 && IB <= HS && Ie ( IE . xy , 0.0 ) ) { float IG = 1.0 - IB / HS ; uP = Iz ( ID , Is , IE , Iu , Iv , Iw , IG ) ; } else".split(" ")}]}}]},{a:"txt",b:"uP = Iq ( ID , Is , Iv ) ; return uP ; } float IJ ( vec3 II , PRECISION GLSL_SMPLR2D_SHDW Ik , float Ij , float IF , float eq ) { float uP = Iq ( II , Ik , Ij ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_FADE_LAST_CASCADE"],
l:{a:"grp",f:[{a:"txt",b:"if ( - eq > IF ) { float IB = IA ( II . xy ) ; uP = IC ( uP , IB ) ; }".split(" ")}]}}]},{a:"txt",b:"return uP ; } vec4 es ( float eq ) { float uP = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","IK","=","u_pcf_blur_radii",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 IK = vec4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 Ir = n . xyz / n . w ; if ( n . w < 0.0 ) Ir . z = 0.0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 It = o . xyz / o . w ; if ( o . w < 0.0 ) It . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 IL = u . xyz / u . w ; if ( u . w < 0.0 ) IL . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 IM = v . xyz / v . w ; if ( v . w < 0.0 ) IM . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"if ( Ie ( Ir . xy , 0.0 ) ) { uP = IH ( Ir , It , u_shadow_map0 , u_shadow_map1 , IK [ 0 ] , IK [ 1 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( Ie ( Ir . xy , HV ) ) { uP = IJ ( Ir , u_shadow_map0 , IK [ 0 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Ie ( It . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"uP = IH ( It , IL , u_shadow_map1 , u_shadow_map2 , IK [ 1 ] , IK [ 2 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"uP = IJ ( It , u_shadow_map1 , IK [ 1 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",
b:"else { if ( Ie ( IL . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"uP = IH ( IL , IM , u_shadow_map2 , u_shadow_map3 , IK [ 2 ] , IK [ 3 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"uP = IJ ( IL , u_shadow_map2 , IK [ 2 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Ie ( IM . xy , 0.0 ) ) uP = IJ ( IM , u_shadow_map3 , IK [ 3 ] , u_csm_center_dists [ 3 ] , eq ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IN = Iq ( It , u_shadow_map1 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IN","=","0.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IO = Iq ( IL , u_shadow_map2 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IO","=","0.0",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IP = Iq ( IM , u_shadow_map3 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IP","=","1.0",";"]}]}}]},{a:"txt",b:"return vec4 ( uP , IN , IO , IP ) ; }".split(" ")}]}}]},{a:"txt",b:"vec4 cC ( inout vec3 cy ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Im = GLSL_TEXTURE ( u_shadow_mask , l . xy / l . z ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"l_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cy *= Im . a ;".split(" ")}]}}]},{a:"txt",b:["return","Im",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Im = es ( i . z ) ; return Im ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/shadow.glslv"]=
{a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLV",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLV",b:[""]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE",
"SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"txt",b:"vec4 IT ( mat4 IQ , vec4 IR , mat4 IS ) { vec2 eu = ( IQ * IS [ 3 ] ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; vec4 Ii = IQ * IR ; Ii . xy += eu ; Ii . xyz = 0.5 * ( Ii . xyz + Ii . w ) ; return Ii ; } void bZ ( vec3 fn , vec3 IU ) {".split(" ")},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"mat4 IS = bc ( u_v_light_tsr [ 0 ] ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 IS = bc ( mat3 ( u_v_light_ts [ 0 ] , u_v_light_r [ 0 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; n = IT ( u_p_light_matrix0 , IV , IS ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 1 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 1 ] , u_v_light_r [ 1 ] , 0.0 ) ) ;".split(" ")}]}}]},
{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; o = IT ( u_p_light_matrix1 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 2 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 2 ] , u_v_light_r [ 2 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; u = IT ( u_p_light_matrix2 , IV , IS ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 3 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 3 ] , u_v_light_r [ 3 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; v = IT ( u_p_light_matrix3 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",
b:"o = IT ( u_p_light_matrix1 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"u = IT ( u_p_light_matrix2 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"v = IT ( u_p_light_matrix3 , IV , IS ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/skin.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKIN_GLSLV",l:{a:"grp",f:[{a:"define",c:"SKIN_GLSLV",b:[""]},{a:"var",c:"DISABLE_TANGENT_SKINNING",
b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"define",c:"SKIN_SLERP",b:["0"]},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 Jc ( in vec4 qV , in vec4 IW , in float IX ) { float IY = qV [ 0 ] * IW [ 0 ] + qV [ 1 ] * IW [ 1 ] + qV [ 2 ] * IW [ 2 ] + qV [ 3 ] * IW [ 3 ] ; if ( IY < 0.0 ) { IW *= - 1.0 ; IY = - IY ; } if ( abs ( IY ) >= 1.0 ) return qV ; float IZ = acos ( IY ) ; float I_ = sqrt ( 1.0 - IY * IY ) ; if ( abs ( I_ ) < 0.001 ) return vec4 ( qV * 0.5 + IW * 0.5 ) ; float Ja = sin ( ( 1.0 - IX ) * IZ ) / I_ ; float Jb = sin ( IX * IZ ) / I_ ; return qV * Ja + IW * Jb ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"vec3 Jq ( in vec3 O , in vec4 Jd , in vec4 Je , in vec4 Jf , in vec4 Jg , in float Jh ) { vec3 Ji = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qV = Jc ( Jd , Je , Jh ) ; vec4 Jj = mix ( Jf , Jg , Jh ) ; vec3 Jk = T ( qV , Ji ) ; vec3 Jl = Jk * Jj . w + Jj . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jm = T ( Jd , Ji ) ; vec3 Jn = T ( Je , Ji ) ; vec3 Jo = Jm * Jf . w + Jf . xyz ; vec3 Jp = Jn * Jg . w + Jg . xyz ; vec3 Jl = mix ( Jo , Jp , Jh ) ;".split(" ")}]}}]},
{a:"txt",b:"return rk ( u_arm_rel_trans , u_arm_rel_quat , Jl ) ; } vec3 Jw ( in vec3 Jr , in vec4 Jd , in vec4 Je , in float Jh ) { vec3 Js = rj ( u_arm_rel_trans , u_arm_rel_quat , Jr ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qV = Jc ( Jd , Je , Jh ) ; vec3 Jt = T ( qV , Js ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Ju = T ( Jd , Js ) ; vec3 Jv = T ( Je , Js ) ; vec3 Jt = mix ( Ju , Jv , Jh ) ;".split(" ")}]}}]},{a:"txt",b:"return rl ( u_arm_rel_trans , u_arm_rel_quat , Jt ) ; }".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jq ( in vec3 O , in vec4 Jd , in vec4 Jf ) { vec3 Ji = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ; vec3 Jk = T ( Jd , Ji ) ; vec3 Jl = Jk * Jf . w + Jf . xyz ; return rk ( u_arm_rel_trans , u_arm_rel_quat , Jl ) ; } vec3 Jw ( in vec3 Jr , in vec4 Jd ) { vec3 Js = rj ( u_arm_rel_trans , u_arm_rel_quat , Jr ) ; vec3 Jt = T ( Jd , Js ) ; return rl ( u_arm_rel_trans , u_arm_rel_quat , Jt ) ; }".split(" ")}]}}]},{a:"txt",b:"void an ( inout vec3 O , inout vec3 V , inout vec3 W , inout vec3 U ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:["float","Jx","=","u_frame_factor",";"]}]}}]},{a:"txt",b:"if ( a_influence . y > 0.0 ) { vec3 jD = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 Jy = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 Jz = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 JA = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec4 JB = a_influence ; for ( int cl = 0 ; cl < 4 ; cl ++ ) { int JC = int ( JB [ cl ] ) ; float JD = fract ( JB [ cl ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"Jy += JD * Jw ( V , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ; Jz += JD * Jw ( W , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ; JA += JD * Jw ( U , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jD += JD * Jq ( O , u_quatsb [ JC ] , u_transb [ JC ] ) ; JA += JD * Jw ( U , u_quatsb [ JC ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Jy += JD * Jw ( V , u_quatsb [ JC ] ) ; Jz += JD * Jw ( W , u_quatsb [ JC ] ) ;".split(" ")}]}}]}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"int JC = int ( JB [ 0 ] ) ; float JD = fract ( JB [ 0 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 1 ] ) ; JD = fract ( JB [ 1 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 2 ] ) ; JD = fract ( JB [ 2 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 3 ] ) ; JD = fract ( JB [ 3 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ;".split(" ")}]}}]},
{a:"txt",b:"O = jD ; U = JA ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = Jy ; W = Jz ;".split(" ")}]}}]},{a:"txt",b:"} if ( ! ( a_influence . y > 0.0 ) ) { int JE = int ( a_influence [ 0 ] - 1.0 ) ; if ( JE > - 1 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"O = Jq ( O , u_quatsb [ JE ] , u_quatsa [ JE ] , u_transb [ JE ] , u_transa [ JE ] , Jx ) ; V = Jw ( V , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ; W = Jw ( W , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ; U = Jw ( U , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = Jq ( O , u_quatsb [ JE ] , u_transb [ JE ] ) ; U = Jw ( U , u_quatsb [ JE ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = Jw ( V , u_quatsb [ JE ] ) ; W = Jw ( W , u_quatsb [ JE ] ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}","}","}"]}]}}]}]}}]}]};a["include/sky_blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKY_BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"SKY_BLENDING_GLSLF",
b:[""]},{a:"include",F:"std.glsl"},{a:"include",F:"blending.glslf"},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"BLENDTYPE",b:["MIX"]},{a:"var",c:"MTEX_RGBTOINT",b:["0"]},{a:"var",c:"WOMAP_HORIZ",b:["0"]},{a:"var",c:"WOMAP_ZENUP",b:["0"]},{a:"var",c:"WOMAP_ZENDOWN",b:["0"]},{a:"var",c:"WOMAP_BLEND",b:["0"]},{a:"var",c:"MTEX_NEGATIVE",b:["0"]},{a:"txt",b:"vec3 JF ( vec3 ki , vec3 kj , float aL , float kI ) { float kk = aL * kI ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE",
"MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kl ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return km ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kn ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kp ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kq ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kr ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ks ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kt ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ku ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kv ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","HUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kz ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SATURATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kA ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"VALUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kB ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","COLOR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kC ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kE ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kF ( kj , ki , kk ) ;".split(" ")}]}}]},{a:"txt",
b:"return vec3 ( 1.0 , 0.0 , 1.0 ) ; } float JG ( float kG , float kH , float aL , float kI ) { vec3 ki = vec3 ( kG ) , kj = vec3 ( kH ) ; float kk = aL * kI ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE","MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kl ( kj , ki , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return km ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"return kn ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kJ ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kK ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kL ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ks ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kt ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ku ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kv ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",
j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kE ( kj , ki , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kF ( kj , ki , kk ) . x ;".split(" ")}]}}]},{a:"txt",b:"return 0.0 ; } vec3 eB ( vec3 ex , vec3 ey , vec4 eA , float ew , vec3 ez ) { float JH = 1.0 ; JH = eA . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"JH = ge ( eA ) ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["MTEX_NEGATIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"eA = vec4 ( vec3 ( 1.0 ) - eA . rgb , eA . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"JH = 1.0 - JH ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"eA = vec4 ( u_sky_tex_color , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"JH = eA . a ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ"],l:{a:"grp",f:[{a:"txt",b:"ex = JF ( eA . rgb , ex , JH , u_sky_tex_fac [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","JI","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"if ( dot ( ez , vec3 ( 0.0 , 0.0 , 1.0 ) ) >= 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],
l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:[";"]}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"else JI = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"elif",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}}]},{a:"txt",
b:"if ( JI != 0.0 ) ey = JF ( eA . rgb , ey , JH , JI ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_BLEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"JH = dot ( eA . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ;".split(" ")}]}}]},{a:"txt",b:"ew = JG ( u_sky_tex_dvar , ew , JH , u_sky_tex_fac [ 0 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"vec3 bs = mix ( ex , ey , ew ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","bs","=","ex",";"]}]}}]},{a:"txt",b:["return","bs",";","}"]}]}}]}]};a["include/std.glsl"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"STD_ENUMS_GLSL",l:{a:"grp",f:[{a:"define",c:"STD_ENUMS_GLSL",b:[""]},{a:"var",c:"CONSTANTS_HACK",b:["0"]},{a:"define",c:"TEXTURE_COORDS_NONE",b:["0"]},{a:"define",c:"TEXTURE_COORDS_UV_ORCO",b:["1"]},{a:"define",c:"TEXTURE_COORDS_NORMAL",b:["2"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MIX",b:["1"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MULTIPLY",
b:["2"]},{a:"define",c:"SHADOW_SRC_NONE",b:["1"]},{a:"define",c:"SHADOW_SRC_DEPTH",b:["2"]},{a:"define",c:"SHADOW_SRC_MASK",b:["3"]},{a:"define",c:"SHADOW_DST_NONE",b:["1"]},{a:"define",c:"SHADOW_DST_DEPTH",b:["2"]},{a:"define",c:"SHADOW_DST_MASK",b:["3"]},{a:"define",c:"NO_SHADOWS",b:["1"]},{a:"define",c:"SHADOW_CASTING",b:["2"]},{a:"define",c:"SHADOW_MASK_GENERATION",b:["3"]},{a:"define",c:"SHADOW_MAPPING_OPAQUE",b:["4"]},{a:"define",c:"SHADOW_MAPPING_BLEND",b:["5"]},{a:"define",c:"POISSON_X_16",
b:["4"]},{a:"define",c:"POISSON_X_8",b:["2"]},{a:"define",c:"POISSON_X_4",b:["1"]},{a:"define",c:"NO_SOFT_SHADOWS",b:["0"]},{a:"define",c:"SPECULAR_PHONG",b:["1"]},{a:"define",c:"SPECULAR_COOKTORR",b:["2"]},{a:"define",c:"SPECULAR_WARDISO",b:["3"]},{a:"define",c:"SPECULAR_BLINN",b:["4"]},{a:"define",c:"SPECULAR_TOON",b:["5"]},{a:"define",c:"DIFFUSE_LAMBERT",b:["1"]},{a:"define",c:"DIFFUSE_OREN_NAYAR",b:["2"]},{a:"define",c:"DIFFUSE_FRESNEL",b:["3"]},{a:"define",c:"DIFFUSE_MINNAERT",b:["4"]},{a:"define",
c:"DIFFUSE_TOON",b:["5"]},{a:"define",c:"MIX",b:["0"]},{a:"define",c:"ADD",b:["1"]},{a:"define",c:"SUBTRACT",b:["2"]},{a:"define",c:"MULTIPLY",b:["3"]},{a:"define",c:"SCREEN",b:["4"]},{a:"define",c:"OVERLAY",b:["5"]},{a:"define",c:"DIFFERENCE",b:["6"]},{a:"define",c:"DIVIDE",b:["7"]},{a:"define",c:"DARKEN",b:["8"]},{a:"define",c:"LIGHTEN",b:["9"]},{a:"define",c:"HUE",b:["10"]},{a:"define",c:"SATURATION",b:["11"]},{a:"define",c:"VALUE",b:["12"]},{a:"define",c:"COLOR",b:["13"]},{a:"define",c:"SOFT_LIGHT",
b:["14"]},{a:"define",c:"LINEAR_LIGHT",b:["15"]},{a:"define",c:"REFL_NONE",b:["0"]},{a:"define",c:"REFL_MIRRORMAP",b:["1"]},{a:"define",c:"REFL_PLANE",b:["2"]},{a:"define",c:"REFL_CUBE",b:["3"]},{a:"define",c:"REFL_PBR_SIMPLE",b:["4"]},{a:"define",c:"REFL_PBR_STANDARD",b:["5"]},{a:"define",c:"INVERSE_QUADRATIC",b:["0"]},{a:"define",c:"LINEAR",b:["1"]},{a:"define",c:"QUADRATIC",b:["2"]},{a:"define",c:"HEMI",b:["1"]},{a:"define",c:"SPOT",b:["2"]},{a:"define",c:"POINT",b:["3"]},{a:"define",c:"SUN",b:["4"]},
{a:"define",c:"DOF_SIMPLE",b:["0"]},{a:"define",c:"DOF_BOKEH",b:["1"]},{a:"define",c:"COC_ALL",b:["0"]},{a:"define",c:"COC_FOREGROUND",b:["1"]},{a:"define",c:"COC_COMBINE",b:["2"]},{a:"define",c:"VT_WORLD_TO_WORLD",b:["0"]},{a:"define",c:"VT_WORLD_TO_OBJECT",b:["1"]},{a:"define",c:"VT_WORLD_TO_CAMERA",b:["2"]},{a:"define",c:"VT_OBJECT_TO_WORLD",b:["3"]},{a:"define",c:"VT_OBJECT_TO_OBJECT",b:["4"]},{a:"define",c:"VT_OBJECT_TO_CAMERA",b:["5"]},{a:"define",c:"VT_CAMERA_TO_WORLD",b:["6"]},{a:"define",
c:"VT_CAMERA_TO_OBJECT",b:["7"]},{a:"define",c:"VT_CAMERA_TO_CAMERA",b:["8"]},{a:"define",c:"VT_POINT",b:["0"]},{a:"define",c:"VT_VECTOR",b:["1"]},{a:"define",c:"VT_NORMAL",b:["2"]},{a:"define",c:"NM_TANGENT",b:["0"]},{a:"define",c:"NM_OBJECT",b:["1"]},{a:"define",c:"NM_WORLD",b:["2"]},{a:"define",c:"NM_BLENDER_OBJECT",b:["3"]},{a:"define",c:"NM_BLENDER_WORLD",b:["4"]},{a:"define",c:"BILLBOARD_ALIGN_VIEW",b:["1"]},{a:"define",c:"BILLBOARD_ALIGN_XY",b:["2"]},{a:"define",c:"BILLBOARD_ALIGN_YZ",b:["3"]},
{a:"define",c:"BILLBOARD_ALIGN_ZX",b:["4"]},{a:"define",c:"POST_EFFECT_NONE",b:["1"]},{a:"define",c:"POST_EFFECT_GRAYSCALE",b:["2"]},{a:"define",c:"POST_EFFECT_BLUR",b:["3"]},{a:"define",c:"POST_EFFECT_GLOW_BLUR",b:["4"]},{a:"define",c:"POST_EFFECT_DOF_BLUR",b:["5"]},{a:"define",c:"POST_EFFECT_ALPHA_BLUR",b:["6"]},{a:"define",c:"POST_EFFECT_EXTEND",b:["7"]},{a:"define",c:"FLIP_CUBEMAP_COORDS",b:["8"]},{a:"define",c:"BLUR_PASS_1",b:["1"]},{a:"define",c:"BLUR_PASS_2",b:["2"]},{a:"define",c:"BLUR_PASS_3",
b:["3"]},{a:"define",c:"BLUR_PASS_4",b:["4"]},{a:"define",c:"BLUR_PASS_5",b:["5"]},{a:"define",c:"DV_NONE",b:["0"]},{a:"define",c:"DV_OPAQUE_WIREFRAME",b:["1"]},{a:"define",c:"DV_TRANSPARENT_WIREFRAME",b:["2"]},{a:"define",c:"DV_FRONT_BACK_VIEW",b:["3"]},{a:"define",c:"DV_BOUNDINGS",b:["4"]},{a:"define",c:"DV_CLUSTERS_VIEW",b:["5"]},{a:"define",c:"DV_BATCHES_VIEW",b:["6"]},{a:"define",c:"DV_RENDER_TIME",b:["7"]},{a:"define",c:"SSAO_QUALITY_8",b:["1"]},{a:"define",c:"SSAO_QUALITY_16",b:["2"]},{a:"define",
c:"SSAO_QUALITY_24",b:["3"]},{a:"define",c:"SSAO_QUALITY_32",b:["4"]},{a:"define",c:"AA_METHOD_FXAA_LIGHT",b:["1"]},{a:"define",c:"AA_METHOD_FXAA_QUALITY",b:["2"]},{a:"define",c:"AA_QUALITY_LOW",b:["0"]},{a:"define",c:"AA_QUALITY_MEDIUM",b:["1"]},{a:"define",c:"AA_QUALITY_HIGH",b:["2"]},{a:"define",c:"SMAA_RESOLVE",b:["25"]},{a:"define",c:"SMAA_EDGE_DETECTION",b:["24"]},{a:"define",c:"SMAA_BLENDING_WEIGHT_CALCULATION",b:["23"]},{a:"define",c:"SMAA_NEIGHBORHOOD_BLENDING",b:["26"]},{a:"define",c:"AA_METHOD_SMAA_LOW",
b:["1"]},{a:"define",c:"AA_METHOD_SMAA_MEDIUM",b:["2"]},{a:"define",c:"AA_METHOD_SMAA_HIGH",b:["3"]},{a:"define",c:"AA_METHOD_SMAA_ULTRA",b:["4"]},{a:"define",c:"REFL_PASS_NONE",b:["0"]},{a:"define",c:"REFL_PASS_PLANE",b:["1"]},{a:"define",c:"REFL_PASS_CUBE",b:["2"]},{a:"define",c:"SRGB_NONE",b:["0"]},{a:"define",c:"SRGB_SIMPLE",b:["1"]},{a:"define",c:"SRGB_PROPER",b:["2"]},{a:"define",c:"CAM_TYPE_ORTHO",b:["0"]},{a:"define",c:"CAM_TYPE_PERSP",b:["1"]},{a:"define",c:"M_PI",b:["3.14159265359"]},{a:"define",
c:"M_PI_4",b:["0.785398163"]},{a:"define",c:"INV_PI",b:["0.318309886"]},{a:"define",c:"UP_VECTOR",b:"vec3 ( 0.0 , 0.0 , 1.0 )".split(" ")},{a:"define",c:"RIGHT_VECTOR",b:"vec3 ( 1.0 , 0.0 , 0.0 )".split(" ")},{a:"define",c:"TOWARD_VECTOR",b:"vec3 ( 0.0 , - 1.0 , 0.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["CONSTANTS_HACK"],l:{a:"grp",f:[{a:"txt",b:"float _0_0 = 0.0 ; float _0_5 = 0.5 ; float _1_0 = 1.0 ; float _255_0 = 255.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"_0_0",b:["0.0"]},
{a:"define",c:"_0_5",b:["0.5"]},{a:"define",c:"_1_0",b:["1.0"]},{a:"define",c:"_255_0",b:["255.0"]}]}}]}]}}]}]};a["include/to_world.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"TO_WORLD_GLSLV",l:{a:"grp",f:[{a:"define",c:"TO_WORLD_GLSLV",b:[""]},{a:"include",F:"math.glslv"},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"BILLBOARD_SPHERICAL",b:["0"]},{a:"var",c:"BILLBOARD_RANDOM",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"BILLBOARD_PRES_GLOB_ORIENTATION",
b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"define",c:"MAX_BILLBOARD_ANGLE",b:["M_PI_4"]},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 bj ( vec3 JJ , mat3 N ) { vec4 JK = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 JL = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 JL = X ( RIGHT_VECTOR , M_PI / 2.0 ) ;".split(" ")}]}}]},{a:"txt",b:"JK = qX ( JL , JK ) ; JK = kR ( JK ) ; mat3 bk = da ( ) ; bk [ 0 ] = JJ ; bk = dd ( JK , bk ) ; return bk ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 JN ( vec3 lH , vec3 JJ ) { vec3 JM = lH - JJ ; JM . z = 0.0 ; JM = normalize ( JM ) ; vec4 JK = rd ( JM , TOWARD_VECTOR ) ; mat3 bk = da ( ) ; bk [ 0 ] = JJ ; bk = dd ( JK , bk ) ; return bk ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"mat3 at ( in vec3 JO , float JP , float JQ , float JR , vec3 a_ , mat3 Z ) { float HO = fract ( length ( a_ ) / 0.17 ) ; float JS = JR + HO / 10.0 ; float JT = HO ; if ( JR != 0.0 ) JT /= JR ; JO *= 1.0 + 0.5 * sin ( JP ) ; float JU = length ( JO ) * JQ * sin ( 2.0 * 3.14 * JP * JS + JT ) ; vec4 JV = X ( TOWARD_VECTOR , JU ) ; vec4 JW = vec4 ( Z [ 1 ] [ 1 ] , Z [ 1 ] [ 2 ] , Z [ 2 ] [ 0 ] , Z [ 2 ] [ 1 ] ) ; JW = qX ( JW , JV ) ; Z = dd ( JW , Z ) ; return Z ; }".split(" ")}]}}]},
{a:"txt",b:"mat3 as ( in vec3 lH , in vec3 aq , in mat3 N , in mat3 Z ) {".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 lW = bj ( aq , N ) ;".split(" ")}]}},{a:"elif",j:["BILLBOARD_RANDOM"],l:{a:"grp",f:[{a:"txt",b:"float HO = fract ( ( aq . x * 1.43 - aq . z * 0.123 + aq . y * 6.1 ) ) ; float JX = 2.0 * M_PI * HO ; vec4 JY = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ; float JZ = asin ( 2.0 * ( JY . x * JY . y - JY . z * JY . w ) ) ; float hu = JZ - JX ; if ( hu < 0.0 ) hu = 2.0 * M_PI + hu ; float J_ = JX ; if ( hu <= MAX_BILLBOARD_ANGLE ) J_ += hu ; else if ( hu <= M_PI - MAX_BILLBOARD_ANGLE ) J_ += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) ; else if ( hu <= M_PI + MAX_BILLBOARD_ANGLE ) J_ += hu - M_PI ; else if ( hu <= 2.0 * M_PI - MAX_BILLBOARD_ANGLE ) J_ += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) + M_PI ; else J_ += hu - 2.0 * M_PI ; vec4 Ka = X ( UP_VECTOR , J_ ) ; mat3 lW = da ( ) ; lW [ 0 ] = aq ; lW = dd ( Ka , lW ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 lW = JN ( lH , aq ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z [ 0 ] = vec3 ( 0.0 , 0.0 , 0.0 ) ; lW = aY ( lW , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"lW [ 1 ] [ 0 ] *= Z [ 1 ] [ 0 ] ;".split(" ")}]}}]},{a:"txt",b:"return lW ; } au av ( in vec3 fn , in vec3 Kb , in vec3 Kc , in vec3 Kd , in vec3 Ke , in vec3 Kf , in mat3 Z ) { fn = ap ( Z , fn ) ; Kb = ap ( Z , Kb ) ; Kc = _ ( Z , Kc ) ; Kd = _ ( Z , Kd ) ; Ke = _ ( Z , Ke ) ; Kf = _ ( Z , Kf ) ; return lX ( au ( fn , Kb , Kc , Kd , Ke , Kf , vec3 ( 0.0 ) ) ) ; }".split(" ")}]}}]}]};
a["include/wind_bending.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"WIND_BENDING_GLSLV",l:{a:"grp",f:[{a:"define",c:"WIND_BENDING_GLSLV",b:[""]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"void Ks ( inout vec3 bo , in vec3 Kg , in float Kh , in float Ki , in float fu , in vec3 JO , in float Kj , in mat4 bV ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Kl = ( bV * vec4 ( Kg , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = bo ; vec3 Kl = Kg ;".split(" ")}]}}]},{a:"txt",b:"float dA = length ( Kl ) ; float Km = Ki * ( 1.0 + 0.1 * fract ( dA ) ) ; float Kn = Kh * Kj * ( 1.0 + sin ( 2.0 * 3.14 * fu * Km + dA ) ) ; float Ko = ( Kk . z - Kl . z ) * abs ( Kn ) ; Ko += 1.0 ; Ko *= Ko ; Ko = Ko * Ko - Ko ; vec3 Kp = Kk ; Kp . xy += JO . xy * Ko * sign ( Kn ) ; vec3 Kq = Kp - Kl ; if ( all ( equal ( Kq , vec3 ( 0.0 ) ) ) ) bo = Kg ; else {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Kq = ( bV * vec4 ( Kq , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"float Kr = length ( Kk - Kl ) ; bo = Kg + normalize ( Kq ) * Kr ; } }".split(" ")},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"vec4 Kt ( vec4 x ) { return x * x * ( 3.0 - 2.0 * x ) ; } vec4 Ku ( vec4 x ) { return abs ( fract ( x + 0.5 ) * 2.0 - 1.0 ) ; } vec4 Kv ( vec4 x ) { return Kt ( Ku ( x ) ) ; } void KH ( inout vec3 bo , in float fu , in vec3 U , in vec3 JO , in vec3 Kg , in float Kw , in float Kx , in float Ky , in vec3 Kz , in mat4 bV ) { float KA ; float KB ; float KC ; vec2 KD ; vec4 KE ; vec2 KF ; vec3 KG ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Kl = ( bV * vec4 ( Kg , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = bo ; vec3 Kl = Kg ;".split(" ")}]}}]},{a:"txt",b:"KA = dot ( Kl , vec3 ( 1.0 ) ) ; KB = KA + Kz . g ; KC = dot ( Kk , vec3 ( Kz . g ) ) ; KD = ( fu + vec2 ( KC , KB ) ) ; KE = ( ( fract ( ( KD . xxyy * vec4 ( 1.975 , 0.793 , 0.375 , 0.193 ) ) ) * 2.0 ) - 1.0 ) * length ( JO ) * Kw ; KE = Kv ( KE ) ; KF = KE . xz + KE . yw ; KF . y = 0.5 - KF . y ; KG = KF . xxy * Kz . rrb * vec3 ( Kx * U . x , Kx * U . y , Ky ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"KG = ( bV * vec4 ( KG , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:["bo","+=","KG",";","}"]}]}}]},{a:"txt",b:"void ax ( inout vec3 O , inout vec3 ao , in vec3 U , in mat4 bV ) { vec3 KI = u_wind * 1.0 + 0.7 * sin ( u_time ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"vec3 KJ = ao ; vec3 KK = a_emitter_center ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"KK = ( bV * vec4 ( KK , 1.0 ) ) . xyz ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 KJ = O ; vec3 KK = ao ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"KH ( KJ , u_time , U , KI , KK , au_detail_bending_freq , au_detail_bending_amp , au_branch_bending_amp , a_bending_col_detail , bV ) ;".split(" ")}]}}]},
{a:"txt",b:"Ks ( KJ , KK , au_wind_bending_amp , au_wind_bending_freq , u_time , KI , a_bending_col_main , bV ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ks ( KJ , KK , au_wind_bending_amp , au_wind_bending_freq , u_time , KI , 1.0 , bV ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"O += KJ - ao ; ao = KJ ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = KJ ; ao = KK ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]}};b4w.module.animation=function(a,u){var e=u("__animation"),c=u("__obj_util"),b=u("__print");a.SLOT_0=e.SLOT_0;a.SLOT_1=e.SLOT_1;a.SLOT_2=e.SLOT_2;a.SLOT_3=e.SLOT_3;a.SLOT_4=e.SLOT_4;a.SLOT_5=e.SLOT_5;a.SLOT_6=e.SLOT_6;a.SLOT_7=e.SLOT_7;a.SLOT_ALL=e.SLOT_ALL;a.OBJ_ANIM_TYPE_NONE=e.OBJ_ANIM_TYPE_NONE;a.OBJ_ANIM_TYPE_ARMATURE=e.OBJ_ANIM_TYPE_ARMATURE;a.OBJ_ANIM_TYPE_OBJECT=e.OBJ_ANIM_TYPE_OBJECT;a.OBJ_ANIM_TYPE_VERTEX=e.OBJ_ANIM_TYPE_VERTEX;a.OBJ_ANIM_TYPE_SOUND=e.OBJ_ANIM_TYPE_SOUND;a.OBJ_ANIM_TYPE_PARTICLES=
e.OBJ_ANIM_TYPE_PARTICLES;a.OBJ_ANIM_TYPE_MATERIAL=e.OBJ_ANIM_TYPE_MATERIAL;a.OBJ_ANIM_TYPE_STATIC=e.OBJ_ANIM_TYPE_STATIC;a.AB_CYCLIC=e.AB_CYCLIC;a.AB_FINISH_RESET=e.AB_FINISH_RESET;a.AB_FINISH_STOP=e.AB_FINISH_STOP;a.is_animated=function(a){return e.is_animated(a)};a.get_anim_names=function(a){return e.PH(a)?e.get_anim_names(a):[]};a.get_current_anim_name=function(a,b){if(!e.is_animated(a))return null;b=b||e.SLOT_0;return e.bR(a,b)};a.apply=function(a,c,p){if(p>e.SLOT_7)b.error("Can't apply animation to slot "+
p+' for object "'+a.name+'". Object can have maximum of 8 animation slots');else{p=p||e.SLOT_0;if(e.is_animated(a)){var g=e.get_slot_num_by_anim(a,c);if(-1!=g&&g!=p){b.error('Animation "'+c+'" is already applied to object "'+a.name+'" (slot "'+g+'").');return}}e.dK(a,c)?e.apply(a,null,c,p):b.error('No fcurves in action "'+c+'"')}};a.apply_ext=function(a,c,p){if(p>e.SLOT_7)b.error("Can't apply animation to slot "+p+' for object "'+a.name+'". Object can have maximum of 8 animation slots');else{p=p||
e.SLOT_0;var g=c[0];e.dK(a,g)?e.apply(a,c.slice(1),g,p):b.error('No fcurves in action "'+g+'"')}};a.remove=function(a){e.remove(a)};a.remove_slot_animation=function(a,b){e.is_animated(a)&&(b=b||e.SLOT_0,e.remove_slot_animation(a,b))};a.apply_def=function(a){e.apply_def(a)};a.play=function(a,c,p){e.is_animated(a)?(p=p||e.SLOT_0,e.play(a,c,p),e.NW(a,0,p,!0)):b.error('Object "'+a.name+'" has no applied animation')};a.stop=function(a,b){e.is_animated(a)&&(b=b||e.SLOT_0,e.stop(a,b))};a.is_play=function(a,
b){if(!e.is_animated(a))return!1;b=b||e.SLOT_0;return e.is_play(a,b)};a.set_frame=function(a,b,c){e.is_animated(a)&&(c=c||e.SLOT_0,e.set_frame(a,b,c))};a.set_first_frame=function(a,b){e.is_animated(a)&&e.set_first_frame(a,b)};a.set_last_frame=function(a,b){if(e.is_animated(a)){b=b||e.SLOT_0;var c=e.get_anim_start_frame(a,b),g=e.get_anim_length(a,b);e.set_frame(a,c+g-e.RK,b)}};a.get_frame=function(a,b){if(!e.is_animated(a))return 0;b=b||e.SLOT_0;return e.lA(a,b)};a.set_speed=function(a,b,c){e.is_animated(a)&&
(c=c||e.SLOT_0,e.set_speed(a,b||1,c))};a.get_speed=function(a,b){if(!e.is_animated(a))return 0;b=b||e.SLOT_0;return a.pa[b]?e.get_speed(a,b):0};a.get_anim_start_frame=function(a,b){return e.is_animated(a)&&(b=b||e.SLOT_0,a.pa[b])?e.get_anim_start_frame(a,b):-1};a.get_anim_length=function(a,b){return e.is_animated(a)&&(b=b||e.SLOT_0,a.pa[b])?e.get_anim_length(a,b):-1};a.set_behavior=function(a,b,c){e.is_animated(a)&&(c=c||e.SLOT_0,e.set_behavior(a,b,c))};a.get_behavior=function(a,b){if(!e.is_animated(a))return null;
b=b||e.SLOT_0;return e.get_behavior(a,b)};a.apply_smoothing=function(a,b,c,k){k=k||e.SLOT_0;e.is_animated(a)&&e.apply_smoothing(a,b,c,k)};a.frame_to_sec=function(a){return e.frame_to_sec(a)};a.get_slot_num_by_anim=function(a,b){return e.is_animated(a)&&b?e.get_slot_num_by_anim(a,b):-1};a.get_anim_type=function(a,b){return e.is_animated(a)?e.get_anim_type(a,b):null};a.apply_to_first_empty_slot=function(a,b){return e.apply_to_first_empty_slot(a,b)};a.get_skel_mix_factor=function(a){return a.A.nf};a.set_skel_mix_factor=
function(a,g,p,k){c.is_armature(a)?(g=Math.min(Math.max(g,0),1),a.A.nf!=g&&e.set_skel_mix_factor(a,g,p||0,k||null)):b.error("Can't blend animation. Object \""+a.name+'" is not armature')};a.set_skeletal_slots=function(a,b,c,e){b=void 0==b?-1:b;c=void 0==b?-1:c;var g=a.A.ei;0<=b&&(g[0]=b);0<=c&&(g[1]=c);a.A.nf=e||0};a.get_first_skeletal_slot=function(a){return a.A.ei[0]};a.get_second_skeletal_slot=function(a){return a.A.ei[1]};a.mix_from_cur_pos=function(a,b,c,k){e.mix_from_cur_pos(a,b,c||0,k||null)}};b4w.module.anchors=function(a,u){var e=u("__anchors");a.attach_move_cb=e.attach_move_cb;a.detach_move_cb=e.detach_move_cb;a.is_anchor=e.is_anchor;a.get_element_id=e.get_element_id;a.update=function(){e.update(!0)}};b4w.module.armature=function(a,u){var e=u("__armature"),c=u("__obj_util"),b=u("__transform"),n=u("__print");a.get_bone_tsr=function(a,b,k){if(!c.is_armature(a))return null;if(!e.lu(a,b))return n.error('There is no bone: "',b,'" in "',a.name,'".'),null;k||(k=new Float32Array(8));e.get_bone_tsr(a,b,!1,!1,k);return k};a.get_bone_tsr_rel=function(a,b,k){if(!c.is_armature(a))return null;if(!e.lu(a,b))return n.error('There is no bone: "',b,'" in "',a.name,'".'),null;k||(k=new Float32Array(8));e.get_bone_tsr(a,
b,!1,!0,k);return k};a.set_bone_tsr=function(a,p,k){c.is_armature(a)&&(e.lu(a,p)?(e.set_bone_tsr(a,p,k,!1),b.V(a)):n.error('There is no bone: "',p,'" in "',a.name,'".'))};a.set_bone_tsr_rel=function(a,p,k){c.is_armature(a)&&(e.lu(a,p)?(e.set_bone_tsr(a,p,k,!0),b.V(a)):n.error('There is no bone: "',p,'" in "',a.name,'".'))}};b4w.module.assets=function(a,u){var e=u("__assets");a.AT_ARRAYBUFFER=e.AT_ARRAYBUFFER;a.AT_ARRAYBUFFER_ZIP=e.AT_ARRAYBUFFER_ZIP;a.AT_JSON=e.AT_JSON;a.AT_JSON_ZIP=e.AT_JSON_ZIP;a.AT_TEXT=e.AT_TEXT;a.AT_AUDIOBUFFER=e.AT_AUDIOBUFFER;a.AT_IMAGE_ELEMENT=e.AT_IMAGE_ELEMENT;a.AT_AUDIO_ELEMENT=e.AT_AUDIO_ELEMENT;a.AT_VIDEO_ELEMENT=e.AT_VIDEO_ELEMENT;a.AT_SEQ_VIDEO_ELEMENT=e.AT_SEQ_VIDEO_ELEMENT;a.enqueue=function(a,b,n,g){a.length&&e.enqueue(a,b,n,g)}};b4w.module.camera=function(a,u){function e(a,b){if(!g.is_camera(a))return k.error("get_view_vector(): Wrong camera object"),null;b=b||new Float32Array(3);var c=h.get_quat_view(a.A.D);d.quat_to_dir(c,d.AXIS_MZ,b);return b}var c=u("__camera"),b=u("__container"),n=u("__math"),g=u("__obj_util"),p=u("__physics"),k=u("__print"),x=u("__scenes"),v=u("__transform"),h=u("__tsr"),d=u("__util"),t=u("__vec3"),q=u("__vec4"),G=u("__quat"),H=new Float32Array(2),z=new Float32Array(3),l=new Float32Array(3),F=new Float32Array(4),
r=G.create(),E={},w={};a.MS_STATIC=c.MS_STATIC;a.MS_TARGET_CONTROLS=c.MS_TARGET_CONTROLS;a.MS_EYE_CONTROLS=c.MS_EYE_CONTROLS;a.MS_HOVER_CONTROLS=c.MS_HOVER_CONTROLS;a.static_setup=function(a,b){if(g.is_camera(a)){c.qt(a);a.A.pb=c.MS_STATIC;if(b){var d=b.pos||h.get_trans_view(a.A.D);b.look_at?c.GI(a,d,b.look_at):v.set_translation(a,d)}v.V(a);p.sync_transform(a);c.Do(a)}else k.error("static_setup(): Wrong camera object")};a.static_set_look_at=function(a,b,d){c.is_static_camera(a)?(b=b||h.get_trans_view(a.A.D),
d?c.GI(a,b,d):v.set_translation(a,b),v.V(a),p.sync_transform(a)):k.error("static_set_look_at(): Wrong camera object or camera move style")};a.static_set_rotation=function(a,b){c.is_static_camera(a)?(v.set_rotation(a,b),v.V(a),p.sync_transform(a)):k.error("static_set_rotation(): Wrong camera object or camera move style")};a.static_get_rotation=function(a,b){if(!c.is_static_camera(a))return k.error("static_get_rotation(): Wrong camera object or camera move style"),null;b=b||new Float32Array(4);return v.get_rotation(a,
b)};a.eye_setup=function(a,b){if(g.is_camera(a))if(b&&b.horiz_rot_lim&&("number"!=typeof b.horiz_rot_lim.left||"number"!=typeof b.horiz_rot_lim.right))k.error("eye_setup(): Wrong horizontal limits object.");else if(b&&b.vert_rot_lim&&("number"!=typeof b.vert_rot_lim.down||"number"!=typeof b.vert_rot_lim.up))k.error("eye_setup(): Wrong vertical limits object.");else{c.qt(a);a.A.pb=c.MS_EYE_CONTROLS;if(b){var d=b.pos||h.get_trans_view(a.A.D);c.NI(a,d,b.look_at,b.horiz_rot_lim,b.vert_rot_lim)}v.V(a);
p.sync_transform(a);c.Do(a)}else k.error("eye_setup(): Wrong camera object")};a.eye_set_look_at=function(a,b,d){c.is_eye_camera(a)?(b=b||h.get_trans_view(a.A.D),d?c.iV(a,b,d):v.set_translation(a,b),c.correct_up(a,a.A.pe,!0),v.V(a),p.sync_transform(a)):k.error("eye_set_look_at(): Wrong camera object or camera move style")};a.eye_rotate=function(b,d,e,g){k.gd("eye_rotate","rotate_camera");c.is_eye_camera(b)?a.rotate_camera(b,d,e,g||!1):k.error("eye_rotate(): Wrong camera object or camera move style")};
a.eye_set_vertical_limits=function(a,b){c.is_eye_camera(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.nx(a,b),v.V(a),p.sync_transform(a)):k.error("eye_set_vertical_limits(): Incorrect limits object."):k.error("eye_set_vertical_limits(): Wrong camera object or camera move style")};a.eye_get_vertical_limits=function(a,b,d){if(!c.is_eye_camera(a))return k.error("eye_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.A;return a.Xa?(b=b||{},d?(b.down=a.Xa.jo,b.up=a.Xa.Kp):
(b.down=a.Xa.down,b.up=a.Xa.up),b.camera_space=d||!1,b):null};a.eye_set_horizontal_limits=function(a,b){c.is_eye_camera(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.mx(a,b),v.V(a),p.sync_transform(a)):k.error("eye_set_horizontal_limits(): Incorrect limits object."):k.error("eye_set_horizontal_limits(): Wrong camera object or camera move style")};a.eye_get_horizontal_limits=function(a,b,d){if(!c.is_eye_camera(a))return k.error("eye_get_horizontal_limits(): Wrong camera object or camera move style"),
null;a=a.A;return a.Vb?(b=b||{},d?(b.left=a.Vb.Ko,b.right=a.Vb.jp):(b.left=a.Vb.left,b.right=a.Vb.right),b.camera_space=d||!1,b):null};a.target_setup=function(a,b){if(g.is_camera(a))if(!b.horiz_rot_lim||"number"==typeof b.horiz_rot_lim.left&&"number"==typeof b.horiz_rot_lim.right)if(!b.vert_rot_lim||"number"==typeof b.vert_rot_lim.down&&"number"==typeof b.vert_rot_lim.up){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){k.error("target_setup(): Wrong distance limits object");
return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.ks&&("number"!=typeof b.ks.min_y||"number"!=typeof b.ks.max_y||b.ks.min_y>b.ks.max_y))k.error("target_setup(): Wrong pivot limits object");else{c.qt(a);a.A.pb=c.MS_TARGET_CONTROLS;var d=b.pos||h.get_trans_view(a.A.D),f=b.pivot;f||(f=e(a,z),f=t.add(d,f,f));c.QI(a,d,f,b.horiz_rot_lim,b.vert_rot_lim,b.dist_lim,b.ks,b.use_panning||!1);v.V(a);p.sync_transform(a);c.Do(a)}}else k.error("target_setup(): Wrong vertical limits object");
else k.error("target_setup(): Wrong horizontal limits object");else k.error("target_setup(): Wrong camera object")};a.target_rotate=function(b,d,e,g){k.gd("target_rotate","rotate_camera");c.is_target_camera(b)?a.rotate_camera(b,d,e,g||!1):k.error("target_rotate(): Wrong camera object or camera move style")};a.target_set_trans_pivot=function(a,b,d){c.is_target_camera(a)?(b=b||h.get_trans_view(a.A.D),d=d||a.A.pivot,c.hC(a,b,d),v.V(a),p.sync_transform(a)):k.error("target_set_trans_pivot(): Wrong camera object or camera move style")};
a.target_set_pivot_translation=function(a,b){c.is_target_camera(a)?(c.rV(a,b),v.V(a),p.sync_transform(a)):k.error("target_set_pivot_translation(): Wrong camera object or camera move style")};a.target_set_distance=function(a,b){if(c.is_target_camera(a)){var d=v.bs(a,a.A.pivot);v.move_local(a,0,0,Math.max(0,b)-d);v.V(a);p.sync_transform(a)}else k.error("target_set_distance(): Wrong camera object or camera move style")};a.target_get_distance=function(a){return c.is_target_camera(a)?v.bs(a,a.A.pivot):
(k.error("target_get_distance(): Wrong camera object or camera move style"),0)};a.target_zoom_object=function(a,b){if(c.is_target_camera(a)){var d=v.get_object_center(b,!1,z),e=v.get_object_size(b),f=x.get_active(),f=g.Da(a,f).ja[0],f=c.aR(f)/2,e=e/Math.sin(f),f=v.bs(a,d);c.hC(a,h.get_trans_view(a.A.D),d);v.V(a);v.move_local(a,0,0,e-f);v.V(a);p.sync_transform(a)}else k.error("target_zoom_object(): Wrong camera object or camera move style")};a.target_get_pivot=function(a,b){if(!c.is_target_camera(a))return k.error("target_get_pivot(): Wrong camera object or camera move style"),
null;b=b||new Float32Array(3);t.copy(a.A.pivot,b);return b};a.target_set_distance_limits=function(a,b){if(c.is_target_camera(a)){if(b){if("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max){k.error("target_set_distance_limits(): Wrong limits object");return}b.min=Math.max(b.min,0);b.max=Math.max(b.max,0)}c.wI(a,b);v.V(a);p.sync_transform(a)}else k.error("target_set_distance_limits(): Wrong camera object or camera move style")};a.target_get_distance_limits=function(a,b){if(!c.is_target_camera(a))return k.error("target_get_distance_limits(): Wrong camera object or camera move style"),
null;var d=a.A;return d.Kb?(b=b||{},b.min=d.Kb.min,b.max=d.Kb.max,b):null};a.target_set_vertical_limits=function(a,b){c.is_target_camera(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.nx(a,b),v.V(a),p.sync_transform(a)):k.error("target_set_vertical_limits(): Wrong limits object"):k.error("target_set_vertical_limits(): Wrong camera object or camera move style")};a.target_get_vertical_limits=function(a,b,d){if(!c.is_target_camera(a))return k.error("target_get_vertical_limits(): Wrong camera object or camera move style"),
null;a=a.A;return a.Xa?(b=b||{},d?(b.down=a.Xa.jo,b.up=a.Xa.Kp):(b.down=a.Xa.down,b.up=a.Xa.up),b.camera_space=d||!1,b):null};a.target_set_horizontal_limits=function(a,b){c.is_target_camera(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.mx(a,b),v.V(a),p.sync_transform(a)):k.error("target_set_horizontal_limits(): Wrong limits object"):k.error("target_set_horizontal_limits(): Wrong camera object or camera move style")};a.target_get_horizontal_limits=function(a,b,d){if(!c.is_target_camera(a))return k.error("target_get_horizontal_limits(): Wrong camera object or camera move style"),
null;a=a.A;return a.Vb?(b=b||{},d?(b.left=a.Vb.Ko,b.right=a.Vb.jp):(b.left=a.Vb.left,b.right=a.Vb.right),b.camera_space=d||!1,b):null};a.target_set_pivot_limits=function(a,b){c.is_target_camera(a)?b&&("number"!=typeof b.min_z||"number"!=typeof b.max_z||b.min_z>b.max_z)?k.error("target_set_pivot_limits(): Wrong limits object"):(c.II(a,b),v.V(a),p.sync_transform(a)):k.error("target_set_pivot_limits(): Wrong camera object or camera move style")};a.target_get_pivot_limits=function(a,b){if(!c.is_target_camera(a))return k.error("target_get_pivot_limits(): Wrong camera object or camera move style"),
null;var d=a.A;return d.je?(b=b||{},b.min_z=d.je.min_z,b.max_z=d.je.max_z,b):null};a.target_pan_pivot=function(a,b,d){if(c.is_target_camera(a)){var e=a.A;e.use_panning&&(z[0]=b,z[1]=-d,z[2]=0,h.transform_dir_vec3(z,e.D,z),t.add(e.pivot,z,e.pivot),b=h.get_trans_view(e.D),t.add(b,z,b),v.V(a),p.sync_transform(a))}else k.error("target_pan_pivot(): wrong object")};a.target_switch_panning=function(a,b){if(!c.is_target_camera(a))return k.error("target_switch_panning(): Wrong camera object or camera move style"),
null;a.A.use_panning=b};a.hover_setup_rel=function(b,e){a.hover_setup(b,{pos:e.pos,pivot:e.pivot});var f="undefined"==typeof e.dist_interval?0:Math.max(e.dist_interval,0),g="undefined"==typeof e.angle_interval?0:Math.max(e.angle_interval,0),h="undefined"==typeof e.t?.5:d.clamp(e.t,0,1),k=a.hover_get_distance_limits(b,E);k.min=Math.max(k.min-h*f,0);k.max+=(1-h)*f;f=a.hover_get_vertical_limits(b,w);f.down=d.clamp(f.down+h*g,-Math.PI/2,0);f.up=d.clamp(f.up-(1-h)*g,-Math.PI/2,0);c.hover_set_distance_limits(b,
k);c.hover_set_vertical_limits(b,f);v.V(b);p.sync_transform(b);c.Do(b)};a.hover_setup=function(a,b){if(g.is_camera(a)){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){k.error("hover_setup(): Wrong distance limits object");return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.hover_angle_lim&&("number"!=typeof b.hover_angle_lim.down||"number"!=typeof b.hover_angle_lim.up||b.hover_angle_lim.down<
b.hover_angle_lim.up))k.error("hover_setup(): Wrong hover angle limits object");else if(b.horiz_trans_lim&&("number"!=typeof b.horiz_trans_lim.min||"number"!=typeof b.horiz_trans_lim.max||b.horiz_trans_lim.min>b.horiz_trans_lim.max))k.error("hover_setup(): Wrong horizontal translation limits object");else if(b.vert_trans_lim&&("number"!=typeof b.vert_trans_lim.min||"number"!=typeof b.vert_trans_lim.max||b.vert_trans_lim.min>b.vert_trans_lim.max))k.error("hover_setup(): Wrong vertical translation limits object");
else{c.qt(a);a.A.pb=c.MS_HOVER_CONTROLS;var d=b.pos||h.get_trans_view(a.A.D);c.OI(a,d,b.pivot,b.dist_lim,b.hover_angle_lim,b.horiz_trans_lim,b.vert_trans_lim,b.enable_horiz_rot||!1);v.V(a);p.sync_transform(a);c.Do(a)}}else k.error("hover_setup(): Wrong camera object")};a.hover_rotate=function(b,d,e,g){k.gd("hover_rotate","rotate_camera");c.is_hover_camera(b)?a.rotate_camera(b,d,e,g||!1):k.error("hover_rotate(): Wrong camera object or camera move style")};a.hover_set_pivot_translation=function(a,b){c.is_hover_camera(a)?
(c.FI(a,b),v.V(a),p.sync_transform(a)):k.error("hover_set_pivot_translation(): Wrong camera object or camera move style")};a.hover_get_pivot=function(a,b){if(!c.is_hover_camera(a))return k.error("hover_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);t.copy(a.A.wc,b);return b};a.hover_get_distance=function(a){return c.is_hover_camera(a)?v.bs(a,a.A.wc):(k.error("hover_get_distance(): Wrong camera object or camera move style"),0)};a.hover_set_vertical_limits=function(a,
b){c.is_hover_camera(a)?"number"!=typeof b.down||"number"!=typeof b.up||b.down<b.up?k.error("hover_set_vertical_limits(): Wrong limits object"):(c.hover_set_vertical_limits(a,b),v.V(a),p.sync_transform(a)):k.error("hover_set_vertical_limits(): Wrong camera object or camera move style")};a.hover_get_vertical_limits=function(a,b){if(!c.is_hover_camera(a))return k.error("hover_get_vertical_limits(): Wrong camera object or camera move style"),null;var d=a.A;b=b||{};b.down=d.Xa.down;b.up=d.Xa.up;return b};
a.hover_set_distance_limits=function(a,b){c.is_hover_camera(a)?"number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max?k.error("hover_set_distance_limits(): Wrong limits object"):(b.min=Math.max(b.min,0),b.max=Math.max(b.max,0),c.hover_set_distance_limits(a,b),v.V(a),p.sync_transform(a)):k.error("hover_set_distance_limits(): Wrong camera object or camera move style")};a.hover_get_distance_limits=function(a,b){if(!c.is_hover_camera(a))return k.error("hover_get_distance_limits(): Wrong camera object or camera move style"),
null;var d=a.A;b=b||{};b.min=d.Kb.min;b.max=d.Kb.max;return b};a.hover_set_vert_trans_limits=function(a,b){c.is_hover_camera(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max)?k.error("hover_set_vert_trans_limits(): Wrong limits object"):(c.LI(a,b),v.V(a),p.sync_transform(a)):k.error("hover_set_vert_trans_limits(): Wrong camera object or camera move style")};a.hover_get_vert_trans_limits=function(a,b){if(!c.is_hover_camera(a))return k.error("hover_get_vert_trans_limits(): Wrong camera object or camera move style"),
null;var d=a.A;return d.Fd?(b=b||{},b.min=d.Fd.min,b.max=d.Fd.max,b):null};a.hover_set_horiz_trans_limits=function(a,b){c.is_hover_camera(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max)?k.error("hover_set_horiz_trans_limits(): Wrong limits object"):(c.EI(a,b),v.V(a),p.sync_transform(a)):k.error("hover_set_horiz_trans_limits(): Wrong camera object or camera move style")};a.hover_get_horiz_trans_limits=function(a,b){if(!c.is_hover_camera(a))return k.error("hover_get_horiz_trans_limits(): Wrong camera object or camera move style"),
null;var d=a.A;return d.Ed?(b=b||{},b.min=d.Ed.min,b.max=d.Ed.max,b):null};a.hover_switch_horiz_rotation=function(a,b){if(!c.is_hover_camera(a))return k.error("hover_switch_horiz_rotation(): Wrong camera object or camera move style"),null;a.A.ui=b};a.is_static_camera=c.is_static_camera;a.is_target_camera=c.is_target_camera;a.is_eye_camera=c.is_eye_camera;a.is_hover_camera=c.is_hover_camera;a.get_move_style=function(a){return g.is_camera(a)?c.get_move_style(a):(k.error("get_move_style(): Wrong camera object"),
null)};a.set_translation=function(a,b){if(g.is_camera(a)){var d=a.A;if(c.is_target_camera(a)){var e=h.get_trans_view(d.D),e=t.subtract(b,e,z);t.add(e,d.pivot,d.pivot)}else c.is_hover_camera(a)&&(e=h.get_trans_view(d.D),e=t.subtract(b,e,z),t.add(e,d.wc,d.wc));v.set_translation(a,b);v.V(a);p.sync_transform(a)}else k.error("set_translation(): Wrong camera object")};a.get_translation=function(a,b){if(!g.is_camera(a))return k.error("get_translation(): Wrong camera object"),null;b=b||new Float32Array(3);
return v.get_translation(a,b)};a.rotate_camera=function(a,b,d,e){g.is_camera(a)?(e?c.oV(a,b,d):c.DU(a,b,d),v.V(a),p.sync_transform(a)):k.error("rotate_camera(): Wrong camera object")};a.set_velocities=function(a,b){if(g.is_camera(a)){var c=a.A;"number"==typeof b.trans&&(c.Up=d.clamp(b.trans,0,Infinity));"number"==typeof b.rot&&(c.Tp=d.clamp(b.rot,0,Infinity));"number"==typeof b.zoom&&(c.Vp=d.clamp(b.zoom,0,.99))}else k.error("set_velocities(): Wrong camera object")};a.get_velocities=function(a,b){if(!g.is_camera(a))return k.error("get_velocities(): Wrong camera object"),
null;var c=a.A;b=b||{};b.trans=c.Up;b.rot=c.Tp;b.zoom=c.Vp;return b};a.is_look_up=function(a){if(!g.is_camera(a))return k.error("is_look_up(): Wrong camera object"),!1;a=h.get_quat_view(a.A.D);return 0<=d.quat_to_dir(a,d.AXIS_MZ,z)[1]};a.get_camera_angles=function(a,b){if(!g.is_camera(a))return k.error("get_camera_angles(): Wrong camera object"),null;b=b||new Float32Array(2);c.get_camera_angles(a,b);return b};a.get_camera_angles_char=function(a,b){if(!g.is_camera(a))return k.error("get_camera_angles_char(): Wrong camera object"),
null;b=b||new Float32Array(2);c.get_camera_angles_char(a,b);return b};a.get_camera_angles_dir=function(a,b){b=b||new Float32Array(2);var e=t.normalize(a,z),e=d.qI(d.AXIS_MZ,e,r);d.correct_cam_quat_up(e,!0);c.kA(e,b);return b};a.set_stereo_distance=function(a,b){if(g.is_camera(a))for(var d=x.get_active(),d=g.Da(a,d).ja,e=0;e<d.length;e++){var f=d[e];f.type!=c.Dc&&f.type!=c.Lc&&f.type!=c.kf&&f.type!=c.Oe||c.qV(f,b,f.Lf)}else k.error("set_stereo_distance(): Wrong camera object")};a.get_stereo_distance=
function(a){if(!g.is_camera(a))return k.error("get_stereo_distance(): Wrong camera object"),0;var b=x.get_active();a=g.Da(a,b).ja;for(b=0;b<a.length;b++){var d=a[b];if(d.type==c.Dc||d.type==c.Lc)return d.xl}return 0};a.set_eye_distance=function(a,b){if(g.is_camera(a)){var d=x.get_active(),d=g.Da(a,d).ja;c.set_eye_distance(d,b)}else k.error("set_eye_distance(): Wrong camera object")};a.get_eye_distance=function(a){if(!g.is_camera(a))return k.error("get_eye_distance(): Wrong camera object"),0;var b=
x.get_active();a=g.Da(a,b).ja;for(b=0;b<a.length;b++){var d=a[b];if(d.type==c.Dc||d.type==c.Lc||d.type==c.kf||d.type==c.Oe)return d.Lf}return 0};a.set_vertical_axis=function(a,b){g.is_camera(a)?(t.copy(b,a.A.pe),v.V(a),p.sync_transform(a)):k.error("set_vertical_axis(): Wrong camera object")};a.get_vertical_axis=function(a,b){if(g.is_camera(a))return b||(b=t.create()),t.copy(a.A.pe,b),b;k.error("get_vertical_axis(): Wrong camera object")};a.translate_view=function(a,b,d){if(g.is_camera(a)){var e=x.get_active();
a=g.Da(a,e).ja;for(e=0;e<a.length;e++){var f=a[e];t.set(-b,-d,0,f.ot.trans);f.xc?c.JI(f,!1):c.set_projection(f,!1)}}else k.error("translate_view(): Wrong camera object")};a.get_view_vector=e;a.get_fov=function(a){if(!g.is_camera(a))return k.error("get_fov(): Wrong camera object"),0;var b=x.get_active();a=g.Da(a,b).ja;return c.get_fov(a[0])};a.set_fov=function(a,b){if(g.is_camera(a))for(var d=x.get_active(),d=g.Da(a,d).ja,e=0;e<d.length;e++){var f=d[e];c.set_fov(f,b);f.xc?c.JI(f,!1):c.set_projection(f,
!1)}else k.error("set_fov(): Wrong camera object")};a.set_hmd_fov=function(){k.ga("set_hmd_fov() deprecated")};a.correct_up=function(a,b,d){g.is_camera(a)?(b=b||a.A.pe,c.correct_up(a,b,d||!1),v.V(a),p.sync_transform(a)):k.error("correct_up(): Wrong camera object")};a.set_ortho_scale=function(a,b){if(g.is_camera(a)&&c.is_ortho_camera(a)){var d=a.A;if(c.is_target_camera(a)){var e=h.get_trans_view(d.D),e=t.dist(e,d.pivot);d.Tk=b/2*d.Sk/e}else c.is_hover_camera(a)?(e=h.get_trans_view(d.D),e=t.distance(e,
d.wc),d.Tk=b/2*d.Sk/e):(d=x.get_active(),g.Da(a,d).ja[0].mc=b/2);c.QW(a)}else k.error("set_ortho_scale(): Wrong camera object")};a.get_ortho_scale=function(a){if(!g.is_camera(a)||!c.is_ortho_camera(a))return k.error("get_ortho_scale(): Wrong camera object"),0;var b=x.get_active();return 2*g.Da(a,b).ja[0].mc};a.is_ortho_camera=function(a){return g.is_camera(a)?c.is_ortho_camera(a):(k.error("is_ortho_camera(): Wrong camera object"),!1)};a.calc_ray=function(a,e,q,p){if(!g.is_camera(a))return k.error("calc_ray(): Wrong camera object"),
null;var f=x.get_active(),r=g.Da(a,f).ja[0];p&&3==p.length?k.ga('dest parameter in the function "calc_ray" should be type of parametric line.'):p=p||new Float32Array(6);switch(r.type){case c.Kc:case c.lf:case c.Dc:case c.Lc:var w=Math.tan(c.SR(r)/2),u=w*r.sb,f=z;e=b.Iq(e,q,H,r);f[0]=(2*e[0]/r.width-1)*u;f[1]=(1-2*e[1]/r.height)*w;f[2]=-1;h.transform_dir_vec3(f,a.A.D,f);t.normalize(f,f);3==p.length?t.copy(f,p):(a=v.get_translation(a,l),n.set_pline_initial_point(p,a),n.set_pline_directional_vec(p,f));
return p;case c.te:return f=z,e=b.Iq(e,q,H,r),f[0]=(2*e[0]/r.width-1)*r.top*r.sb,f[1]=(1-2*e[1]/r.height)*r.top,f[2]=0,h.transform_vec3(f,a.A.D,f),t.copy(f,p),a=h.get_quat_view(a.A.D,F),t.transformQuat(d.AXIS_MZ,a,f),n.set_pline_directional_vec(p,f),p;default:return k.error("calc_ray(): Non-compatible camera"),p}};a.project_point=function(a,b,d){if(!g.is_camera(a))return k.error("project_point(): Wrong camera object"),null;d=d||new Float32Array(2);return c.project_point(a,b,d)};a.has_distance_limits=
function(a){return(c.is_target_camera(a)||c.is_hover_camera(a))&&null!==a.A.Kb};a.has_vertical_rot_limits=function(a){return(c.is_eye_camera(a)||c.is_target_camera(a)||c.is_hover_camera(a))&&null!==a.A.Xa};a.has_horizontal_rot_limits=function(a){return(c.is_target_camera(a)||c.is_eye_camera(a))&&null!==a.A.Vb};a.has_vertical_trans_limits=function(a){return c.is_hover_camera(a)&&null!==a.A.Fd};a.has_horizontal_trans_limits=function(a){return c.is_hover_camera(a)&&null!==a.A.Ed};a.get_frustum_planes=
function(a,b){if(!g.is_camera(a))return k.error("get_frustum_planes(): Wrong camera object"),null;var c=x.get_active(),c=g.Da(a,c).ja[0].Cm;q.copy(c.left,b.left);q.copy(c.right,b.right);q.copy(c.top,b.top);q.copy(c.bottom,b.bottom);q.copy(c.near,b.near);q.copy(c.far,b.far);return b};a.set_projection=function(a,b){g.is_camera(a)?c.lV(a,b):k.error("set_projection(): Wrong camera object")}};b4w.module.config=function(a,u){var e=u("__config"),c=u("__compat"),b=u("__debug"),n=u("__data"),g=u("__print");a.P_LOW=e.P_LOW;a.P_HIGH=e.P_HIGH;a.P_ULTRA=e.P_ULTRA;a.P_CUSTOM=e.P_CUSTOM;a.P_AUTO=e.P_AUTO;a.set=e.set;a.get=e.get;a.reset=e.reset;a.reset_limits=e.reset_limits;a.get_std_assets_path=e.get_assets_path;a.get_assets_path=e.get_assets_path;a.apply_quality=function(a){n.is_primary_loaded()?g.error("Cannot change quality profile after a scene is loaded."):(e.set("quality",a),b.tv()&&(e.apply_quality(),
c.DI(b.tv(),!1)))}};b4w.module.controls=function(a,u){var e=u("__controls"),c=u("__physics"),b=u("__print");a.CT_POSITIVE=e.CT_POSITIVE;a.CT_CONTINUOUS=e.CT_CONTINUOUS;a.CT_TRIGGER=e.CT_TRIGGER;a.CT_SHOT=e.CT_SHOT;a.CT_LEVEL=e.CT_LEVEL;a.CT_CHANGE=e.CT_CHANGE;a.KEY_BACKSPACE=8;a.KEY_TAB=9;a.KEY_ENTER=13;a.KEY_SHIFT=16;a.KEY_CTRL=17;a.KEY_ALT=18;a.KEY_PAUSE=19;a.KEY_CAPSLOCK=20;a.KEY_ESC=27;a.KEY_SPACE=32;a.KEY_LEFT=37;a.KEY_UP=38;a.KEY_RIGHT=39;a.KEY_DOWN=40;a.KEY_1=49;a.KEY_2=50;a.KEY_3=51;a.KEY_4=52;a.KEY_5=53;a.KEY_6=
54;a.KEY_7=55;a.KEY_8=56;a.KEY_9=57;a.KEY_A=65;a.KEY_B=66;a.KEY_C=67;a.KEY_D=68;a.KEY_E=69;a.KEY_F=70;a.KEY_G=71;a.KEY_H=72;a.KEY_I=73;a.KEY_J=74;a.KEY_K=75;a.KEY_L=76;a.KEY_M=77;a.KEY_N=78;a.KEY_O=79;a.KEY_P=80;a.KEY_Q=81;a.KEY_R=82;a.KEY_S=83;a.KEY_T=84;a.KEY_U=85;a.KEY_V=86;a.KEY_W=87;a.KEY_X=88;a.KEY_Y=89;a.KEY_Z=90;a.KEY_NUM0=96;a.KEY_NUM1=97;a.KEY_NUM2=98;a.KEY_NUM3=99;a.KEY_NUM4=100;a.KEY_NUM5=101;a.KEY_NUM6=102;a.KEY_NUM7=103;a.KEY_NUM8=104;a.KEY_NUM9=105;a.KEY_MULT=106;a.KEY_ADD=107;a.KEY_SUB=
109;a.KEY_DEC_POINT=110;a.KEY_DIV=111;a.KEY_SEMI_COLON=186;a.KEY_EQUAL_SIGN=187;a.KEY_COMMA=188;a.KEY_DASH=189;a.KEY_PERIOD=190;a.KEY_FORWARD_SLASH=191;a.KEY_GRAVE_ACCENT=192;a.KEY_LEFT_SQ_BRACKET=219;a.KEY_BACK_SLASH=220;a.KEY_RIGHT_SQ_BRACKET=221;a.KEY_SINGLE_QUOTE=222;a.PL_SINGLE_TOUCH_MOVE=e.PL_SINGLE_TOUCH_MOVE;a.PL_MULTITOUCH_MOVE_ZOOM=e.PL_MULTITOUCH_MOVE_ZOOM;a.PL_MULTITOUCH_MOVE_PAN=e.PL_MULTITOUCH_MOVE_PAN;a.PL_MULTITOUCH_MOVE_ROTATE=e.PL_MULTITOUCH_MOVE_ROTATE;a.default_AND_logic_fun=e.default_AND_logic_fun;
a.default_OR_logic_fun=e.default_OR_logic_fun;a.create_gamepad_btn_sensor=e.create_gamepad_btn_sensor;a.create_gamepad_axis_sensor=e.create_gamepad_axis_sensor;a.create_gamepad_position_sensor=e.create_gamepad_position_sensor;a.create_gamepad_orientation_sensor=e.create_gamepad_orientation_sensor;a.create_custom_sensor=e.create_custom_sensor;a.create_keyboard_sensor=e.create_keyboard_sensor;a.create_collision_sensor=function(a,b,c){return e.create_collision_sensor(a,b||"ANY",c||!1)};a.create_collision_impulse_sensor=
e.create_collision_impulse_sensor;a.create_ray_sensor=function(a,g,p,k,x,v,h){if(a&&!c.sa(a))b.ga("No physics for object "+a.name);else return e.create_ray_sensor(a,g,p,k||"ANY",x||!1,v||!1,h||!1)};a.create_mouse_click_sensor=e.create_mouse_click_sensor;a.create_mouse_wheel_sensor=e.create_mouse_wheel_sensor;a.create_mouse_move_sensor=e.create_mouse_move_sensor;a.create_plock_mouse_sensor=e.create_plock_mouse_sensor;a.create_plock_sensor=e.create_plock_sensor;a.create_touch_move_sensor=e.create_touch_move_sensor;
a.create_touch_zoom_sensor=e.create_touch_zoom_sensor;a.create_touch_rotate_sensor=e.create_touch_rotate_sensor;a.create_touch_click_sensor=e.create_touch_click_sensor;a.create_motion_sensor=e.create_motion_sensor;a.create_vertical_velocity_sensor=e.create_vertical_velocity_sensor;a.create_gyro_angles_sensor=e.create_gyro_angles_sensor;a.create_gyro_quat_sensor=e.create_gyro_quat_sensor;a.create_gyro_delta_sensor=e.create_gyro_delta_sensor;a.create_hmd_quat_sensor=e.create_hmd_quat_sensor;a.create_hmd_position_sensor=
e.create_hmd_position_sensor;a.create_timer_sensor=function(a,b){return e.create_timer_sensor(a,b||!1)};a.reset_timer_sensor=e.reset_timer_sensor;a.create_elapsed_sensor=e.create_elapsed_sensor;a.create_timeline_sensor=e.create_timeline_sensor;a.create_selection_sensor=function(a,b){return e.create_selection_sensor(a,b||!1)};a.create_callback_sensor=function(a,b){return e.create_callback_sensor(a,b||0)};a.set_custom_sensor=function(a,b){e.OU(a,b)};a.get_custom_sensor=function(a){return a.value};a.get_sensor_value=
e.get_sensor_value;a.get_sensor_payload=e.get_sensor_payload;a.create_sensor_manifold=function(a,b,c,k,x,v,h){x=x||e.default_AND_logic_fun;e.create_sensor_manifold(a,b,c,k,x,v,void 0===h?null:h)};a.create_kb_sensor_manifold=function(a,b,c,k,x,v){k=e.create_keyboard_sensor(k);e.create_sensor_manifold(a,b,c,[k],e.default_AND_logic_fun,x,void 0===v?null:v)};a.check_sensor_manifolds=function(a){return e.check_sensor_manifold(a,null)};a.check_sensor_manifold=e.check_sensor_manifold;a.remove_sensor_manifold=
e.remove_sensor_manifold;a.reset=e.reset;a.set_plock_smooth_factor=e.set_plock_smooth_factor};b4w.module.constraints=function(a,u){var e=u("__camera"),c=u("__constraints"),b=u("__obj_util"),n=u("__physics"),g=u("__print"),p=u("__transform"),k=u("__util"),x=u("__vec3");a.append_stiff=function(a,e,d,k,q){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(d=d||new Float32Array(3),q=q||1,k=k?k:[0,0,0,1],e instanceof Array&&2==e.length?c.XM(a,e[0],e[1],d,k,q):c.bE(a,e,d,k,q),p.V(a),n.sync_transform(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):
g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_semi_stiff=function(a,e,d,t,q,x,u,z){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(q=k.fe(q)?q:Math.PI/2,x=k.fe(x)?x:-Math.PI/2,u=k.fe(u)?u:Math.PI/2,z=k.fe(z)?z:-Math.PI/2,d=d||new Float32Array(3),t=t?new Float32Array(t):null,c.VM(a,e,d,t,q,x,u,z),p.V(a),n.sync_transform(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.append_semi_stiff_cam=function(b,c,d,k,n,p,x,u){g.gd("append_semi_stiff_cam","append_semi_stiff");e.is_eye_camera(b)?a.append_semi_stiff(b,c,d,k,n,p,x,u):g.error("append_semi_stiff_cam(): wrong object type, only EYE camera objects can be parented.")};a.append_semi_soft_cam=function(b,c,d,k){g.gd("append_semi_soft_cam","append_semi_soft");e.is_eye_camera(b)?a.append_semi_soft(b,c,d,k):g.error("append_semi_soft_cam(): wrong object type, only EYE camera objects can be parented.")};a.append_semi_soft=
function(a,e,d,t){if(b.is_dynamic(a))if(c.yh(a,e))if(c.xh(a,e)){if(!k.fe(t)||0>t)t=.25;d=d||new Float32Array(3);c.UM(a,e,d,t);p.V(a);n.sync_transform(a)}else g.error("Constraint recursion is forbidden.");else g.error("Can not apply constraint. Object and target must be different.");else g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_stiff_trans=function(a,e,d){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(d=d||new Float32Array(3),c.YM(a,e,d),p.V(a),n.sync_transform(a)):g.error("Constraint recursion is forbidden."):
g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_copy_loc=function(a,e,d,k,q){if(b.is_dynamic(a))if(c.yh(a,e))if(c.xh(a,e)){k=k||!1;d=d||"XYZ";q=q||1;var h=p.get_translation(a,new Float32Array(3)),t=new Float32Array(3);t[0]=-1!=d.indexOf("-X")?-1:-1!=d.indexOf("X")?1:0;t[1]=-1!=d.indexOf("-Y")?-1:-1!=d.indexOf("Y")?1:0;t[2]=-1!=d.indexOf("-Z")?-1:-1!=d.indexOf("Z")?1:0;c.MM(a,e,h,t,k,q);p.V(a);n.sync_transform(a)}else g.error("Constraint recursion is forbidden.");
else g.error("Can not apply constraint. Object and target must be different.");else g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_copy_trans=function(a,e,d){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(c.OM(a,e,d||1),p.V(a),n.sync_transform(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_copy_rot=function(a,e,d,k,q){if(b.is_dynamic(a))if(c.yh(a,e))if(c.xh(a,
e)){d=d||"XYZ";var h=new Float32Array(3);h[0]=-1!=d.indexOf("-X")?-1:-1!=d.indexOf("X")?1:0;h[1]=-1!=d.indexOf("-Y")?-1:-1!=d.indexOf("Y")?1:0;h[2]=-1!=d.indexOf("-Z")?-1:-1!=d.indexOf("Z")?1:0;c.NM(a,e,h,k||!1,q||1);p.V(a);n.sync_transform(a)}else g.error("Constraint recursion is forbidden.");else g.error("Can not apply constraint. Object and target must be different.");else g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_stiff_trans_rot=function(a,e,d,k){b.is_dynamic(a)?c.yh(a,e)?
c.xh(a,e)?(d=d||new Float32Array(3),k=k?new Float32Array(k):[0,0,0,1],c.ZM(a,e,d,k),p.V(a),n.sync_transform(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_track=function(a,e,d,t,q,u){if(b.is_dynamic(a))if(c.yh(a,e))if(c.xh(a,e)){var h=k.AXIS_Y;"-Y"==d?h=k.AXIS_MY:"Y"==d?h=k.AXIS_Y:"-X"==d?h=k.AXIS_MX:"X"==d?h=k.AXIS_X:"-Z"==d?h=k.AXIS_MZ:"Z"==d&&(h=k.AXIS_Z);
d=k.AXIS_Z;"X"==t?d=k.AXIS_X:"Y"==t&&(d=k.AXIS_Y);1==Math.abs(x.dot(h,d))?g.error("Can not use parallel vectors for track and up axes."):(c.$M(a,e,h,d,q||!1,u||1),p.V(a),n.sync_transform(a))}else g.error("Constraint recursion is forbidden.");else g.error("Can not apply constraint. Object and target must be different.");else g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_follow=function(a,e,d,k){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(c.RM(a,e,d,k),p.V(a),n.sync_transform(a)):g.error("Constraint recursion is forbidden."):
g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.append_stiff_viewport=function(a,e,d){b.is_dynamic(a)?c.yh(a,e)?c.xh(a,e)?(d=d||{},c.append_stiff_viewport(a,e,d),p.V(a),n.sync_transform(a)):g.error("Constraint recursion is forbidden."):g.error("Can not apply constraint. Object and target must be different."):g.error('Wrong object: "'+a.name+'" is not dynamic.')};a.remove=function(a,b){b=b||!1;a.uc&&c.remove(a,b);b&&
p.V(a)}};b4w.module.container=function(a,u){var e=u("__container"),c=u("__print");a.get_canvas=e.get_canvas;a.get_canvas_hud=e.get_canvas_hud;a.get_container=e.get_container;a.insert_to_container=function(a,n){2!=arguments.length?c.error("insert_to_container(): two arguments required"):a&&n&&e.insert_to_container(a,n)};a.set_canvas_offsets=function(a,n){c.ga("container.set_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");return e.set_canvas_offsets(a,n)};
a.update_canvas_offsets=function(){c.ga("container.update_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");e.update_canvas_offsets()};a.client_to_canvas_coords=function(a,c,g){g||(g=new Float32Array(2));return e.client_to_canvas_coords(a,c,g)};a.client_to_element_coords=function(a,c,g,p){p||(p=new Float32Array(2));return e.client_to_element_coords(a,c,g,p)};a.get_coords_target_space=function(a,c,g){g||(g=new Float32Array(2));return e.get_coords_target_space(a,
c,g)};a.force_offsets_updating=function(){c.ga("container.force_offsets_updating() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");e.force_offsets_updating()};a.resize=function(a,c,g){e.resize(a,c,g)};a.resize_to_container=function(a){e.resize_to_container(a||!1)}};b4w.module.data=function(a,u){var e=u("__data"),c=u("__loader");a.load=e.load;a.unload=function(a){e.unload(a|0)};a.set_debug_resources_root=e.set_debug_resources_root;a.is_primary_loaded=e.is_primary_loaded;a.is_idle=c.Mm;a.load_and_add_new=e.load;a.cleanup=a.unload;a.activate_media=e.activate_media;a.prefetch=e.prefetch;a.unfetch=e.unfetch};b4w.module.debug=function(a,u){function e(a,b,c,d){y.group(C.Sx(a),d);for(a=0;a<c.length;a++){var e=c[a],f=e.A;if(f.type==d)for(var g=!1,h=0;h<b.length;h++){for(var k=b[h].La,l=0;l<k.length;l++){var m=k[l];if(m.$b&&m.ug==f){"STATIC"==d?y.md(e.Gd,e):y.md(e.name,e);g=!0;break}}if(g)break}}y.groupEnd()}function c(a){var b={};if(!a)return b;a=a.split("\n");for(var c=0;c<a.length;c++){var d=a[c];if(-1!=d.search(new RegExp(/^[A-Z.]+ ?/))){var e=d.split(" ")[0];e in b||(b[e]=0);b[e]++}}d=c=a=0;for(e in b)switch(e){case "KIL":case "TEX":case "TXB":case "TXP":case "KIL.F":case "TEX.F":case "TXB.F":case "TXD.F":case "TXL.F":case "TXQ.F":case "TXP.F":c+=
b[e];a+=b[e];break;case "ATTRIB":d+=b[e];break;case "ADDRESS":case "PARAM":case "TEMP":case "ALIAS":case "OUTPUT":break;case "END":break;default:a+=b[e]}b.ALL_OPS=a;b.TEX_OPS=c;b.ATTRIBS=d;return b}function b(a,b){var c=new XMLHttpRequest;c.open("POST",a,!1);c.send(b);if(200==c.status)return c.responseText;y.error(c.responseText);throw"Error POST XHR: "+c.status;}function n(a){a.sort(function(a,b){return b.dA.ALL_OPS-a.dA.ALL_OPS});for(var b=0;b<a.length;b++){var c=a[b],d=c.dA,e=c.uX,f=g(c.NP),f=
f.length?"\t\t("+f.join(", ")+")":"\t\t(NA)";y.groupCollapsed("VERT ->","OPS",e.ALL_OPS,"ATT",e.ATTRIBS,"TEX",e.TEX_OPS,"\t\tFRAG ->","OPS",d.ALL_OPS,"TEX",d.TEX_OPS,f);y.groupCollapsed("directives");for(var h=c.eb.Ah.slice().sort(),f=0;f<h.length;f++){var k=h[f];y.md(k[0],k[1])}y.groupEnd();y.groupCollapsed("node elements");h=c.eb.$e;for(f=0;f<h.length;f++)y.md(h[f]);y.groupEnd();y.groupCollapsed("vert source");y.md(c.sX);y.groupEnd();y.groupCollapsed("vert translated source");y.md(c.tX);y.groupEnd();
f=["ALL_OPS","TEX_OPS","ATTRIBS"];y.groupCollapsed("vert ops stats");for(var l in e)-1==f.indexOf(l)&&y.md(l,e[l]);y.groupEnd();y.groupCollapsed("vert assembly");y.md(c.rX);y.groupEnd();y.groupCollapsed("frag source");y.md(c.OQ);y.groupEnd();y.groupCollapsed("frag translated source");y.md(c.PQ);y.groupEnd();y.groupCollapsed("frag ops stats");for(l in d)-1==f.indexOf(l)&&y.md(l,d[l]);y.groupEnd();y.groupCollapsed("frag assembly");y.md(c.GQ);y.groupEnd();y.groupEnd()}}function g(a){for(var b=[],c=N.Ar(),
d=0;d<c.length;d++)for(var e=c[d],f=E.Sb(e,"MESH",E.DATA_ID_ALL),g=0;g<f.length;g++){var h=w.Da(f[g],e);if(h&&h.$.length)for(var h=h.$,k=0;k<h.length;k++){var l=h[k];if(l.zb==a)for(var m=0;m<l.cc.length;m++){var n=l.cc[m];-1==b.indexOf(n)&&b.push(n)}}}return b}function p(a){function b(){fa.push(b);return a.apply(a,arguments)}return b}function k(a,b,c,d,e){if(typeof b!=typeof a)throw"debug.eqv: wrong expected data type";if(a.length!=b.length)throw"debug.eqv: wrong expected vector length";c=c?c:1E-6;
for(var f=0;f<a.length;f++){if("number"!=typeof b[f]||isNaN(b[f]))throw"debug.eqv: wrong expected data type";if("number"!=typeof a[f]||isNaN(a[f]))throw"debug.eqv: wrong result data type";if(b[f]>a[f]+c||b[f]<a[f]-c)throw"debug.eqv: wrong result";}x(d,e,"eqv")}function x(a,b,c){a=a||"";b=b||"";if(aa){if(""==a)throw"debug."+c+': no error is expected, but got "'+Z+'"';if(Z!=a)throw"debug."+c+': error "'+a+'" is expected, but got "'+Z+'"';}else if(""!=a)throw"debug."+c+': error "'+a+'" is expected, but got nothing';
if(ma){if(""==b)throw"debug."+c+': no warning is expected, but got "'+pa+'"';if(pa!=b)throw"debug."+c+': warning "'+b+'" is expected, but got "'+pa+'"';}else if(""!=b)throw"debug."+c+': warning "'+b+'" is expected, but got nothing';aa=ma=!1}function v(){U&&(E.Zo(U,!1,!1,!1),H.$H(U),E.Zo(U,!0,!0,!0),E.remove_object(U),U=null)}var h=u("__batch"),d=u("__config"),t=u("__compat"),q=u("__controls"),G=u("__container"),H=u("__data"),z=u("__debug"),l=u("__extensions"),F=u("__geometry"),r=u("__loader"),E=u("__objects"),
w=u("__obj_util"),f=u("__physics"),y=u("__print"),D=u("__renderer"),N=u("__scenes"),M=u("__scenegraph"),B=u("__sfx"),J=u("__shaders"),C=u("__subscene"),A=u("__textures"),X=u("__transform"),m=u("__tsr"),K=u("__util"),R=u("__vec3"),O=m.create(),S=new Float32Array(2),ga=R.create(),sa=R.create(),U=null,ia=d.L,fa=[],pa="",Z="",ma=!1,aa=!1,ea=!0,wa=new Uint8Array(4);a.DV_NONE=z.DV_NONE;a.DV_OPAQUE_WIREFRAME=z.DV_OPAQUE_WIREFRAME;a.DV_TRANSPARENT_WIREFRAME=z.DV_TRANSPARENT_WIREFRAME;a.DV_FRONT_BACK_VIEW=
z.DV_FRONT_BACK_VIEW;a.DV_BOUNDINGS=z.DV_BOUNDINGS;a.DV_CLUSTERS_VIEW=z.DV_CLUSTERS_VIEW;a.DV_BATCHES_VIEW=z.DV_BATCHES_VIEW;a.DV_RENDER_TIME=z.DV_RENDER_TIME;a.physics_stats=function(){f.UP()};a.physics_id=function(a){y.log("O",f.BQ(a));var b=f.ZQ();if(b)for(var b=b.Ac.La,c=0;c<b.length;c++){var d=b[c];d.N.ia==a&&y.log("B",d)}else y.error("No active physics scene.")};a.visible_objects=function(){for(var a=N.get_active(),b=E.Sb(a,"MESH",E.DATA_ID_ALL),a=N.Bg(a,[C.Hb,C.cd,C.Yd]),c=0;c<a.length;c++){var d=
a[c],f=d.Za;f.length&&(e(d,f,b,"DYNAMIC"),e(d,f,b,"STATIC"))}};a.object_info=function(a){for(var b=N.get_active(),c=E.Sb(b,"MESH",E.DATA_ID_ALL),d=0;d<c.length;d++){var e=c[d];if(e.name==a){y.log("Object",e);for(var f=N.iA(b),g=0;g<f.length;g++){for(var h=f[g],k=[],l=h.Za,m=0;m<l.length;m++)for(var n=l[m].La,q=0;q<n.length;q++)n[q].ug==e.A&&k.push(n[q]);y.log("Subscene "+h.type,k)}}}};a.objects_stat=function(){var a=N.get_active();y.log("Armatures: "+E.Sb(a,"ARMATURE",E.DATA_ID_ALL).length);y.log("Cameras: "+
E.Sb(a,"CAMERA",E.DATA_ID_ALL).length);y.log("Curves: "+E.Sb(a,"CURVE",E.DATA_ID_ALL).length);y.log("Empties: "+E.Sb(a,"EMPTY",E.DATA_ID_ALL).length);y.log("Lamps: "+E.Sb(a,"LAMP",E.DATA_ID_ALL).length);y.log("Meshes: "+E.Sb(a,"MESH",E.DATA_ID_ALL).length);y.log("Speakers: "+E.Sb(a,"SPEAKER",E.DATA_ID_ALL).length)};a.num_vertices=function(){for(var a=0,b=N.get_active(),b=N.Bg(b,[C.Hb,C.cd,C.Yd]),c=0;c<b.length;c++)for(var d=b[c].Za,e=0;e<d.length;e++)for(var f=d[e].La,g=0;g<f.length;g++){var h=f[g].ya;
h&&(a+=h.num_vertices)}return a};a.num_triangles=function(){for(var a=0,b=N.get_active(),b=N.Bg(b,[C.Hb,C.cd,C.Yd]),c=0;c<b.length;c++)for(var d=b[c].Za,e=0;e<d.length;e++)for(var f=d[e].La,g=0;g<f.length;g++){var h=f[g].ya;h&&(a+=h.num_triangles)}return a};a.num_draw_calls=function(){for(var a=N.get_active(),b=N.Bg(a,[C.Hb,C.cd,C.Yd,C.Zd,C.Xf]),c=0,d=0;d<b.length;d++)for(var e=b[d],e=e.Za,f=0;f<e.length;f++)c+=e[f].La.length;a=N.Bg(a,[C.wd,C.jf]);for(d=0;d<a.length;d++)for(e=a[d],e=e.Za,f=0;f<e.length;f++)c+=
6*e[f].La.length;return c};a.num_shaders=function(){return K.Bj(J.iG())};a.geometry_stats=function(){for(var a=N.get_active(),b=N.iA(a),a={},c=0;c<b.length;c++){var d=b[c];if(d.type!=C.uk&&d.type!=C.qh)for(var e=d.Za,f=0;f<e.length;f++)for(var g=e[f].La,h=0;h<g.length;h++){var k=g[h].ya,l=g[h].ug;k&&(d.type!=C.Ne&&d.type!=C.rh||l.Nw||l.Mw)&&(a[k.id]=k)}}var c=b=0,m;for(m in a)d=a[m].ra,d.ao&&(c+=d.ao/1048576),b+=d.co/1048576;return{vbo_memory:b,ibo_memory:c}};a.num_textures=function(){for(var a=[],
b=0,c=N.get_active(),c=N.Bg(c,[C.Hb,C.cd,C.Yd]),d=0;d<c.length;d++)for(var e=c[d].Za,f=0;f<e.length;f++)for(var g=e[f].La,h=0;h<g.length;h++){var k=g[h].ya;if(k)for(var k=k.na,l=0;l<k.length;l++){var m=k[l];if("IMAGE"===m.source||"ENVIRONMENT_MAP"===m.source){var n=m.Cb;-1===a.indexOf(n)&&(a.push(n),m=m.width*m.height*4/1048576/m.Vq,m*=1.3333,b+=m)}}}return{number:a.length,memory:b}};a.num_render_targets=function(){for(var a=[],b=0,c=N.get_active(),c=N.iA(c),d=0;d<c.length;d++){var e=c[d];if(e.type!=
C.uk){var f=e.H,g=[f.Qb,f.wf];g.push.apply(g,e.nh);for(e=0;e<g.length;e++){var h=g[e];A.Ho(h)&&-1==a.indexOf(h)&&(a.push(h),b+=f.width*f.height*A.RR(h))}}}return{number:a.length,memory:b/1024/1024}};a.make_camera_frustum_shot=function(){var a=N.get_active();(a=N.Tb(a,C.Hb))&&N.rH(a.H,a,[1,1,0])};a.make_light_frustum_shot=function(){var a=N.get_active(),b=N.Tb(a,C.Hb),a=N.Bg(a,[C.xd]);if(b)for(var c=0;c<a.length;c++){var d=a[c],e;switch(c){case 0:e=[1,0,0];break;case 1:e=[0,1,0];break;case 2:e=[0,
0,1];break;default:e=[1,0,1]}N.rH(d.H,b,e)}};a.scenegraph_to_dot=function(){for(var a=N.Ar(),b=0;b<a.length;b++)y.log("\n"+M.SP(N.uv(a[b])))};a.loading_graph_to_dot=function(a){y.log("\n"+r.WR(a|0))};a.controls_info=q.debug;a.object_distance=function(a,b){var c=m.get_trans_view(a.A.D),d=m.get_trans_view(b.A.D);return R.dist(c,d)};a.msg=z.msg;a.fbmsg=z.fbmsg;a.print_telemetry=z.print_telemetry;a.plot_telemetry=z.plot_telemetry;a.fbres=function(a,b){function c(){z.fbmsg("FBRES",a());setTimeout(c,b)}
b||(b=16);c()};a.assert_constants=function(){var a=new Float32Array([0,0,0,1]),b=new Float32Array([1,0,0]),c=new Float32Array([0,1,0]),d=new Float32Array([0,0,1]),e=new Float32Array([-1,0,0]),f=new Float32Array([0,-1,0]),g=new Float32Array([0,0,-1]);if(!K.Ak(new Float32Array(3),K.Wy))throw"Wrong VEC3_IDENT";if(!K.Ak(a,K.xt))throw"Wrong QUAT4_IDENT";if(!K.Ak(b,K.AXIS_X))throw"Wrong AXIS_X";if(!K.Ak(c,K.AXIS_Y))throw"Wrong AXIS_Y";if(!K.Ak(d,K.AXIS_Z))throw"Wrong AXIS_Z";if(!K.Ak(e,K.AXIS_MX))throw"Wrong AXIS_MX";
if(!K.Ak(f,K.AXIS_MY))throw"Wrong AXIS_MY";if(!K.Ak(g,K.AXIS_MZ))throw"Wrong AXIS_MZ";};a.mute_music=function(){for(var a=B.get_speaker_objects(),b=0;b<a.length;b++){var c=a[b];"BACKGROUND_MUSIC"==B.qA(c)&&B.mute(c,!0)}};a.check_finite=z.check_finite;a.set_debug_params=function(a){var b=N.get_active(),b=N.Bg(b,[C.qh]);if(b.length)for(var c=0;c<b.length;c++){var d=b[c];if("number"==typeof a.debug_view_mode)switch(a.debug_view_mode){case z.DV_NONE:case z.DV_OPAQUE_WIREFRAME:case z.DV_TRANSPARENT_WIREFRAME:case z.DV_FRONT_BACK_VIEW:case z.DV_BOUNDINGS:case z.DV_CLUSTERS_VIEW:case z.DV_BATCHES_VIEW:case z.DV_RENDER_TIME:N.WU(d,
a.debug_view_mode);break;default:y.error("set_debug_params(): Wrong debug view mode")}"number"==typeof a.debug_colors_seed&&N.VU(d,a.debug_colors_seed);"number"==typeof a.uU&&N.nV(d,a.uU);"object"==typeof a.wireframe_edge_color&&N.wV(d,K.f32(a.wireframe_edge_color))}else y.error("Debugging is not available on the scene.")};a.get_error_quantity=function(){return y.rR()};a.get_warning_quantity=function(){return y.TR()};a.clear_errors_warnings=function(){return y.clear_errors_warnings()};a.analyze_shaders=
function(a){var d=J.iG(),e=0,f;for(f in d)a&&-1===f.indexOf(a)||e++;var e="of "+e+" analyzing...",g={};for(f in d)if(!a||-1!==f.indexOf(a)){var h=d[f],k;k=h.xy;var m=h.kv,q=l.nR();if(q){var p=q.getTranslatedShaderSource(k),q=q.getTranslatedShaderSource(m);if(t.detect_mobile())var p=p.replace("#version","#version 300 //"),q=q.replace("#version","#version 300 //"),r=b("/analyze_shader/vert_gles",p),w=b("/analyze_shader/frag_gles",q);else p=p.replace("#version","#version 400 //"),q=q.replace("#version",
"#version 400 //"),r=b("/analyze_shader/vert",p),w=b("/analyze_shader/frag",q);var v=c(r),x=c(w);k={sX:z.tv().getShaderSource(k),tX:p,rX:r,uX:v,OQ:z.tv().getShaderSource(m),PQ:q,GQ:w,dA:x}}else y.warn("WEBGL_debug_shaders extension not found"),k=void 0;if(k){var m=h.eb,u=m.Pf+" + "+m.ye;k.NP=h;k.eb=m;h=g[u]=g[u]||[];h.push(k);y.md(e)}}for(u in g)y.group("%c"+u,"color: #800"),h=g[u],n(h),y.groupEnd()};a.fake_load=z.fake_load;a.test_performance=function(b){if(J.OE())if(l.nA()){var c=ia.gl_debug;ia.gl_debug=
!0;var d=M.aP();N.YF(null,d);for(var e=M.Rb(d,C.kq),f=e.H,d=0;5>d;d++)D.wj(e);ia.gl_debug=c;window.setTimeout(function(){z.dU(e);var a=e.vf;b(a,f.width*f.height*40/(a/1E3)/Math.pow(10,9))},100)}else b(0,0);else window.setTimeout(function(){a.test_performance(b)},100)};a.calc_vbo_garbage_byte_size=z.calc_vbo_garbage_byte_size;a.show_vbo_garbage_info=z.show_vbo_garbage_info;a.print_batches_stat=z.print_batches_stat;a.start_debug=function(a){fa=[];ea=!0;a=u(a);for(var b in a)"function"===typeof a[b]&&
(a[b]=p(a[b]))};a.check_debug_result=function(){return ea};a.test=function(a,b){var c=u("__print"),d=c.error,e=c.ga,f=c.warn;c.error=c.ga=function(){Z=c.dF(arguments,"B4W ERROR").join(" ");aa=!0};c.warn=function(){pa=c.dF(arguments,"B4W WARN").join(" ");ma=!0};aa=ma=!1;try{b();var g=!0}catch(ca){ea=!1,console.error('Test "'+a+'" failed with exception: "'+ca+'"'),aa=ma=g=!1}c.error=d;c.ga=e;c.warn=f;return g};a.pix=function(a){var b=G.tG(),c=G.sG(),d=b/2,e=c/2;G.resize(b,c,!1);b=N.get_active().J.wa;
(c=M.CQ(b))||K.K("Couldn't find onscreen subscene");b=c.H;d=G.Iq(d,e,S,c.H);d[1]=b.height-d[1];d=D.cx(b.We,d[0],d[1],1,1,wa);k(a,d,1)};a.eqs=function(a,b,c,d){if(JSON.stringify(a)!=JSON.stringify(b))throw"debug.eqs: wrong result";x(c,d,"eqs")};a.eqv=k;a.eqf=function(a,b,c,d,e){if("number"!=typeof b||isNaN(b))throw"debug.eqf: wrong expected data type";if("number"!=typeof a||isNaN(a))throw"debug.eqf: wrong result data type";c=c?c:1E-6;if(b>a+c||b<a-c)throw"debug.eqf: wrong result";x(d,e,"eqf")};a.eq=
function(a,b,c,d){if(a!==b)throw"debug.eq: wrong result";x(c,d,"eq")};a.ok=function(a,b,c){if(!a)throw"debug.ok: wrong result";x(b,c,"ok")};a.stat=function(a){var b=[];a=u(a);for(var c in a)-1==fa.indexOf(a[c])&&"function"===typeof a[c]&&b.push(c);if(b.length){y.groupCollapsed(b.length+" function(s) not tested.");for(c=0;c<b.length;c++)y.md(b[c]);y.groupEnd()}else y.group("All functions were tested.")};a.show_normals=function(a,b,c,d){v();b=h.hb(a,b,"MAIN");if(!F.Dj(a)||!b)return y.error("Normals are not avaliable for the dynamic object:",
a.name),!1;var e=b.ra;if(!(e&&e.Fb&&e.Fb.a_position&&e.Fb.a_tbn))return y.error("Normals are not avaliable for the object:",a.name),!1;b=F.$z(e,"a_position");var e=F.$z(e,"a_normal"),f=X.get_tsr(a,O);U=E.create_line("normal_line");a=new Float32Array(2*b.length);for(var g=0;g<b.length;g+=3){var k=ga;k[0]=b[g+0];k[1]=b[g+1];k[2]=b[g+2];var l=m.transform_vec3(k,f,sa);a[2*g+0]=l[0];a[2*g+1]=l[1];a[2*g+2]=l[2];l=R.scale(e.subarray(g,g+3),c,sa);k=R.add(k,l,sa);k=m.transform_vec3(k,f,sa);a[2*g+3]=k[0];a[2*
g+4]=k[1];a[2*g+5]=k[2]}c=h.rv(U);F.draw_line(c,a,!0);D.St(c);c.lc.set([1,1,1,1]);c.Tm=d};a.hide_normals=v};b4w.module.geometry=function(a,u){var e=u("__batch"),c=u("__geometry"),b=u("__print"),n=u("__renderer"),g=u("__tbn");a.extract_vertex_array=function(a,g,n){if(!c.Dj(a))return b.error("Wrong object:",a.name),null;if(a=e.hb(a,g,"MAIN")){if((g=a.ra)&&g.Fb&&("a_normal"==n&&g.Fb.a_tbn||g.Fb[n]))return c.$z(g,n);b.error("Attribute not found:"+n);return null}b.error("Wrong material:",g);return null};a.extract_index_array=function(a,g){if(!c.Dj(a))return b.error("Wrong object:",a.name),null;var k=e.hb(a,
g,"MAIN");if(k){if((k=k.ra)&&k.Fb)return k.ee;b.error("Buffer data not found");return null}b.error("Wrong material:",g);return null};a.update_vertex_array=function(a,g,n,v){if(c.Dj(a))for(var h=["MAIN","SHADOW","COLOR_ID"],d=0;d<h.length;d++){var k=e.hb(a,g,h[d]);k&&(k=k.ra)&&k.Fb&&("a_normal"==n&&k.Fb.a_tbn||k.Fb[n])&&c.GJ(k,n,0,v)}else b.error("Wrong object:",a.name)};a.override_geometry=function(a,k,u,v,h){if(c.Dj(a))if(u instanceof Uint16Array||u instanceof Uint32Array)if(v instanceof Float32Array)for(var d=
["MAIN","SHADOW","COLOR_ID"],p=0;p<d.length;p++){var q=e.hb(a,k,d[p]);if(q){var x=q.ra;if(x){c.HJ(x,q.Bh,u);var H={},z;for(z in x.Fb){var l=x.Fb[z],l=v.length/3*l.oc,F=c.vo(z);H[F]||(H[F]=0);H[F]+=l}F=c.sS(H);x.kc=F;H={};for(z in x.Fb)switch(l=x.Fb[z],F=c.vo(z),H[F]||(H[F]=0),z){case "a_position":c.lt(x.kc,"a_position",v,H[F]);l.offset=H[F];l.length=v.length;H[F]+=l.length;break;case "a_tbn":var r;h&&(r=c.BE(u,v,v));var E=c.AE(u,v,r);l.length=v.length/3*l.oc;for(var w=new Float32Array(l.length),f=
0;f<w.length;f+=4)w[f]=1,w[f+3]=1;E=g.Bm(E,w);c.lt(x.kc,"a_tbn",E,H[F]);l.offset=H[F];H[F]+=l.length;break;default:l.offset=H[F],l.length=v.length/3*l.oc,E=new (c.lR(F))(l.length),c.lt(x.kc,z,E,H[F]),H[F]+=l.length}c.RC(x);n.St(q);(q=e.lg(a,q))&&q.ra&&(q.ra=x)}}}else b.error("Wrong positions_array type");else b.error("Wrong ibo_array type");else b.error("Wrong object:",a.name)};a.set_shape_key_value=function(a,e,g){c.check_shape_keys(a)?c.BA(a,e)?c.dz(a,e,parseFloat(g)):b.error("Wrong key name:",
e):b.error("Wrong object:",a.name)};a.check_shape_keys=function(a){return c.check_shape_keys(a)};a.get_shape_keys_names=function(a){return c.check_shape_keys(a)?c.get_shape_keys_names(a):(b.error("Wrong object:",a.name),[])};a.get_shape_key_value=function(a,e){return c.check_shape_keys(a)?c.BA(a,e)?c.get_shape_key_value(a,e):(b.error("Wrong key name:",e),0):(b.error("Wrong object:",a.name),0)};a.draw_line=function(a,g,u){u=u||!1;if(g instanceof Float32Array){if(a=e.rv(a))c.draw_line(a,g,u),n.St(a)}else b.error("Wrong positions type")}};b4w.module.hud=function(a,u){var e=u("__hud"),c=u("__print");a.draw_mixer_strip=function(a,n,g,p,k,u,v){c.gd("draw_mixer_strip","screen.draw_mixer_strip");e.draw_mixer_strip(a,n,g,p,k,u,v)};a.plot_array=function(a,n,g,p,k,u,v){c.gd("plot_array","screen.plot_array");e.plot_array(a,n,g,p,k,u,v)}};b4w.module.input=function(a,u){function e(a){k.gd("enable_split_screen","screen.request_split_screen");var e=c.get_device_by_type_element(c.DEVICE_HMD);if(!e)return!1;if(t)return!0;var f=c.get_vector_param(e,c.kD,h),l=c.get_vector_param(e,c.lD,d);b.set_hmd_fov(a,f,l);if(f=c.get_value_param(e,H))l=x.get_active(),a=p.Da(a,l).ja,b.set_eye_distance(a,f);a={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};c.get_value_param(e,c.HMD_WEBVR_TYPE)&(c.HMD_NON_WEBVR|c.HMD_WEBVR_MOBILE|c.HMD_WEBVR_DESKTOP)&&
(a.distortion_coefs=[e.distortion_coefs[0],e.distortion_coefs[1]],a.chromatic_aberration_coefs=[e.chromatic_aberration_coefs[0],e.chromatic_aberration_coefs[1],e.chromatic_aberration_coefs[2],e.chromatic_aberration_coefs[3]],e.En||(e.ci&&e.yi&&e.di?a.base_line_factor=(e.ci-e.di)/e.yi:e.di||(a.base_line_factor=e.ci/e.yi)),e.Hh&&e.Pl&&!e.En&&(a.inter_lens_factor=e.Hh/e.Pl),q.enabled||(f=1+e.distortion_coefs[0]+e.distortion_coefs[1],x.Dw(f,f)));x.set_hmd_params(a);g.resize_to_container(!0);c.reset_device(e);
return t=!0}var c=u("__input"),b=u("__camera"),n=u("__config"),g=u("__container"),p=u("__obj_util"),k=u("__print"),x=u("__scenes"),v=u("__vec4"),h=v.create(),d=v.create(),t=!1,q=n.rm,G=n.L;a.GMPD_BUTTON_12=c.GMPD_BUTTON_12;a.GMPD_BUTTON_13=c.GMPD_BUTTON_13;a.GMPD_BUTTON_15=c.GMPD_BUTTON_15;a.GMPD_BUTTON_14=c.GMPD_BUTTON_14;a.GMPD_BUTTON_3=c.GMPD_BUTTON_3;a.GMPD_BUTTON_0=c.GMPD_BUTTON_0;a.GMPD_BUTTON_1=c.GMPD_BUTTON_1;a.GMPD_BUTTON_2=c.GMPD_BUTTON_2;a.GMPD_BUTTON_5=c.GMPD_BUTTON_5;a.GMPD_BUTTON_7=
c.GMPD_BUTTON_7;a.GMPD_BUTTON_4=c.GMPD_BUTTON_4;a.GMPD_BUTTON_6=c.GMPD_BUTTON_6;a.GMPD_BUTTON_8=c.GMPD_BUTTON_8;a.GMPD_BUTTON_9=c.GMPD_BUTTON_9;a.GMPD_BUTTON_10=c.GMPD_BUTTON_10;a.GMPD_BUTTON_11=c.GMPD_BUTTON_11;a.GMPD_BUTTON_16=c.GMPD_BUTTON_16;a.GMPD_BUTTON_17=c.GMPD_BUTTON_17;a.GMPD_BUTTON_18=c.GMPD_BUTTON_18;a.GMPD_BUTTON_19=c.GMPD_BUTTON_19;a.GMPD_BUTTON_20=c.GMPD_BUTTON_20;a.GMPD_BUTTON_21=c.GMPD_BUTTON_21;a.GMPD_BUTTON_22=c.GMPD_BUTTON_22;a.GMPD_BUTTON_23=c.GMPD_BUTTON_23;a.GMPD_BUTTON_24=
c.GMPD_BUTTON_24;a.GMPD_BUTTON_25=c.GMPD_BUTTON_25;a.GMPD_TRACKPAD_BUTTON=c.GMPD_TRACKPAD_BUTTON;a.GMPD_TRIGGER_BUTTON=c.GMPD_TRIGGER_BUTTON;a.GMPD_GRIPS_BUTTON=c.GMPD_GRIPS_BUTTON;a.GMPD_MENU_BUTTON=c.GMPD_MENU_BUTTON;a.GMPD_AXIS_0=c.GMPD_AXIS_0;a.GMPD_AXIS_1=c.GMPD_AXIS_1;a.GMPD_AXIS_2=c.GMPD_AXIS_2;a.GMPD_AXIS_3=c.GMPD_AXIS_3;a.GMPD_AXIS_4=c.GMPD_AXIS_4;a.GMPD_AXIS_5=c.GMPD_AXIS_5;a.GMPD_AXIS_6=c.GMPD_AXIS_6;a.GMPD_AXIS_7=c.GMPD_AXIS_7;a.GMPD_AXIS_8=c.GMPD_AXIS_8;a.GMPD_AXIS_9=c.GMPD_AXIS_9;a.GMPD_AXIS_10=
c.GMPD_AXIS_10;a.GMPD_AXIS_11=c.GMPD_AXIS_11;a.HMD_ORIENTATION_QUAT=c.HMD_ORIENTATION_QUAT;a.HMD_POSITION=c.HMD_POSITION;a.HMD_WEBVR_TYPE=c.HMD_WEBVR_TYPE;a.HMD_WEBVR_DESKTOP=c.HMD_WEBVR_DESKTOP;a.HMD_WEBVR_MOBILE=c.HMD_WEBVR_MOBILE;a.HMD_NON_WEBVR=c.HMD_NON_WEBVR;a.HMD_WEBVR1=c.HMD_WEBVR1;a.HMD_WEBVR1_1=c.HMD_WEBVR1_1;var H=c.HMD_EYE_DISTANCE;a.HMD_EYE_DISTANCE=H;a.HMD_DISTORTION=c.HMD_DISTORTION;a.HMD_BASELINE_DIST=c.HMD_BASELINE_DIST;a.HMD_SCREEN_LENS_DIST=c.HMD_SCREEN_LENS_DIST;a.HMD_SCREEN_WIDTH=
c.HMD_SCREEN_WIDTH;a.HMD_SCREEN_HEIGHT=c.HMD_SCREEN_HEIGHT;a.HMD_BEVEL_SIZE=c.HMD_BEVEL_SIZE;a.MOUSE_LOCATION=c.MOUSE_LOCATION;a.MOUSE_DOWN_WHICH=c.MOUSE_DOWN_WHICH;a.MOUSE_UP_WHICH=c.MOUSE_UP_WHICH;a.MOUSE_WHEEL=c.MOUSE_WHEEL;a.KEYBOARD_UP=c.KEYBOARD_UP;a.KEYBOARD_DOWN=c.KEYBOARD_DOWN;a.TOUCH_START=c.TOUCH_START;a.TOUCH_MOVE=c.TOUCH_MOVE;a.TOUCH_END=c.TOUCH_END;a.GYRO_ORIENTATION_QUAT=c.GYRO_ORIENTATION_QUAT;a.GYRO_ORIENTATION_ANGLES=c.GYRO_ORIENTATION_ANGLES;var z={};z[c.DEVICE_HMD]=[c.HMD_ORIENTATION_QUAT,
c.HMD_POSITION];z[c.DEVICE_MOUSE]=[c.MOUSE_LOCATION];var l={};l[c.DEVICE_HMD]=[c.HMD_WEBVR_TYPE];var F={};F[c.DEVICE_MOUSE]=[c.MOUSE_LOCATION,c.MOUSE_DOWN_WHICH,c.MOUSE_UP_WHICH,c.MOUSE_WHEEL];F[c.DEVICE_KEYBOARD]=[c.KEYBOARD_UP,c.KEYBOARD_DOWN];F[c.DEVICE_TOUCH]=[c.TOUCH_START,c.TOUCH_MOVE,c.TOUCH_END];F[c.DEVICE_GYRO]=[c.GYRO_ORIENTATION_QUAT,c.GYRO_ORIENTATION_ANGLES];var r={};r[c.DEVICE_HMD]=[c.HMD_DISTORTION,c.HMD_EYE_DISTANCE,c.HMD_BASELINE_DIST,c.HMD_SCREEN_LENS_DIST,c.HMD_SCREEN_WIDTH,c.HMD_SCREEN_HEIGHT,
c.HMD_BEVEL_SIZE];a.DEVICE_GYRO=c.DEVICE_GYRO;a.DEVICE_HMD=c.DEVICE_HMD;a.DEVICE_MOUSE=c.DEVICE_MOUSE;a.DEVICE_KEYBOARD=c.DEVICE_KEYBOARD;a.DEVICE_TOUCH=c.DEVICE_TOUCH;a.can_use_device=c.can_use_device;a.get_device_by_type_element=c.get_device_by_type_element;a.switch_prevent_default=function(a,b){a&&c.switch_prevent_default(a,b)};a.register_device=function(){k.ga("input.register_device() deprecated")};a.reset_device=function(a){a&&a.type==c.DEVICE_HMD?c.reset_device(a):k.error("reset_device is undefined for device.")};
a.get_vector_param=function(a,b,d){if(a&&a.type in z&&0<=z[a.type].indexOf(b))return c.get_vector_param(a,b,d);k.error("device hasn't param: ",b);return null};a.get_value_param=function(a,b){if(a&&a.type in l&&0<=l[a.type].indexOf(b))return c.get_value_param(a,b);k.error("device hasn't param: ",b);return null};a.attach_param_cb=function(a,b,d){d=d||null;if(a&&a.type in F&&0<=F[a.type].indexOf(b))return c.attach_param_cb(a,b,d);k.error("device hasn't param: ",b)};a.detach_param_cb=function(a,b,d){d=
d||null;if(a&&a.type in F&&0<=F[a.type].indexOf(b))return c.detach_param_cb(a,b,d);k.error("device hasn't param: ",b)};a.set_config=function(a,b,d){if(a&&a.type in r&&0<=r[a.type].indexOf(b))return c.set_config(a,b,d);k.error("device hasn't config: ",b)};a.request_fullscreen_hmd=function(){k.gd("request_fullscreen_hmd","screen.request_fullscreen_hmd");if(x.Pa()){var a=x.Ok(x.get_active());if(a&&(e(a),a=c.get_device_by_type_element(c.DEVICE_HMD))){var b=a.ud;b&&!b.isPresenting&&(b.capabilities.canPresent?
(a=g.get_canvas(),b.requestPresent([{source:a}]).then(function(){if(!G.is_mobile_device){var a=b.getEyeParameters("left"),c=b.getEyeParameters("right");g.resize(2*Math.max(a.renderWidth,c.renderWidth),Math.max(a.renderHeight,c.renderHeight),!1)}},function(){k.error("HMD fullscreen request failed.")})):k.error("HMD fullscreen request failed."))}}};a.enable_split_screen=e;a.disable_split_screen=function(){k.gd("disable_split_screen","screen.exit_split_screen");var a=c.get_device_by_type_element(c.DEVICE_HMD);
if(!t||!a||!a.xg)return!1;x.set_hmd_params({enable_hmd_stereo:!1});a=1/(1+a.distortion_coefs[0]+a.distortion_coefs[1]);x.Dw(a,a);g.resize_to_container(!0);return!0};a.set_gamepad_key=function(a,b,d){switch(a){case 0:a=c.tt;break;case 1:a=c.Ky;break;case 2:a=c.Ly;break;case 3:a=c.My;break;default:a=c.tt}a=c.get_device_by_type_element(a);c.set_config(a,b,d)};a.get_pressed_gmpd_btn=c.get_pressed_gmpd_btn;a.get_moved_gmpd_axis=c.get_moved_gmpd_axis;a.get_gamepad_position=c.get_gamepad_position;a.get_gamepad_orientation=
c.get_gamepad_orientation;a.check_enable_gamepad_indices=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=[],c=0;c<a.length;c++)a[c]&&b.push(c);return b};a.get_vr_controller_id=function(a){for(var b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],c=0,d=0;4>c;c++){var e=b[c];if(e&&(""==e.id||"OpenVR Gamepad"==e.id||"Oculus Touch (Left)"==e.id||"Oculus Touch (Right)"==
e.id)){if(d==a)return d;d++}}return a};a.add_click_listener=function(a,b){a&&b&&c.add_click_listener(a,b)};a.remove_click_listener=function(a,b){a&&b&&c.remove_click_listener(a,b)}};b4w.module.lights=function(a,u){function e(a){for(var c=k.get_active(),e=n.Sb(c,"LAMP",n.DATA_ID_ALL),g=0;g<e.length;g++){var l=e[g];if("SUN"==l.Eb.type){var f=l;break}}if(!f)p.error("There is no sun on the scene");else if("number"==typeof a.hor_position&&"number"==typeof a.vert_position){e=h.deg_to_rad(180-a.hor_position);a=h.deg_to_rad(90-a.vert_position);g=f.A;x.set_rotation_euler(f,[a,0,e]);e=new Float32Array(3);l=v.get_quat_view(g.D);h.quat_to_dir(l,h.AXIS_Z,e);g=v.get_trans_view(g.D);g=d.length(g);
d.copy(e,t);d.scale(t,g,t);x.set_translation(f,t);x.V(f);e=f.Eb;if(e.IF){g=c.world.horizon_color;l=c.world.zenith_color;a=Math.cos(Math.abs(a));var q=Math.max(a,.1)*c.world.light_settings.environment_energy;b.set_light_energy(e,Math.max(Math.min(3*a,1),0)*e.zF);k.set_environment_colors(c,q,g,l)}k.at(f,c)}}function c(a){if(g.is_lamp(a))return a.Eb.type;p.error("get_light_type(): Wrong object");return""}var b=u("__lights"),n=u("__objects"),g=u("__obj_util"),p=u("__print"),k=u("__scenes"),x=u("__transform"),
v=u("__tsr"),h=u("__util"),d=u("__vec3"),t=new Float32Array(3),q,G,H,z=60;a.get_lamps=function(a){var b=k.get_active(),b=n.Sb(b,"LAMP",n.DATA_ID_ALL);if(!a)return b;for(var c=[],d=0;d<b.length;d++){var e=b[d];e.Eb.type===a&&c.push(e)}return c};a.get_sun_params=function(){for(var a=k.get_active(),a=n.Sb(a,"LAMP",n.DATA_ID_ALL),b=null,c=0;c<a.length;c++){var d=a[c];if("SUN"==d.Eb.type){b=d;break}}return b?(b=b.Eb.direction,a=h.rad_to_deg(Math.atan2(-b[1],b[0]))+90,180<a&&(a-=360),b=h.rad_to_deg(Math.atan2(b[2],
Math.sqrt(b[0]*b[0]+b[1]*b[1]))),c={},c.hor_position=a,c.vert_position=b,c):null};a.set_sun_params=e;a.set_day_time=function(a){for(var b=k.get_active(),b=n.Sb(b,"LAMP",n.DATA_ID_ALL),c=0;c<b.length;c++){var d=b[c];if("SUN"==d.Eb.type){var g=d;break}}g?(g=-Math.cos(a/12*Math.PI)*z,b={},b.hor_position=12>a?15*a:15*(a-24),b.vert_position=g,e(b)):p.error("There is no sun on the scene")};a.set_date=function(a){q=a.getFullYear();G=a.getMonth();H=a.getDate();q?1582==q&&9==G&&4<H&&15>H&&p.error("The dates 5 through 14 October, 1582, do not exist in the Gregorian system!"):
p.error("There is no year 0 in the Julian system!")};a.set_max_sun_angle=function(a){z=Math.min(Math.max(a,0),90)};a.get_light_params=function(a){if(g.is_lamp(a))var b=a.Eb;else return p.error("get_light_params(): Wrong object"),null;if(a=c(a))switch(a){case "SPOT":var d={light_type:a,light_color:new Float32Array(3),light_energy:b.jg,light_spot_blend:b.Os,light_spot_size:b.on,light_distance:b.distance};d.light_color.set(b.color);break;case "POINT":d={light_type:a,light_color:new Float32Array(3),light_energy:b.jg,
light_distance:b.distance};d.light_color.set(b.color);break;default:d={light_type:a,light_color:new Float32Array(3),light_energy:b.jg},d.light_color.set(b.color)}return d?d:null};a.get_light_type=c;a.set_light_params=function(a,c){if(g.is_lamp(a)){var d=a.Eb,e=k.get_active(),h=!1;"number"==typeof c.light_energy&&b.set_light_energy(d,c.light_energy);"object"==typeof c.light_color&&b.set_light_color(d,c.light_color);"number"==typeof c.light_spot_blend&&(b.gV(d,c.light_spot_blend),h=!0);"number"==typeof c.light_spot_size&&
(b.hV(d,c.light_spot_size),h=!0);"number"==typeof c.light_distance&&(b.fV(d,c.light_distance),h=!0);k.at(a,e);h&&k.qW(e)}else p.error("set_light_params(): Wrong object")};a.get_light_energy=function(a){return g.is_lamp(a)?a.Eb.jg:(p.error("get_light_energy(): Wrong object"),0)};a.set_light_energy=function(a,c){if(g.is_lamp(a)){var d=k.get_active();b.set_light_energy(a.Eb,c);k.at(a,d)}else p.error("set_light_energy(): Wrong object")};a.get_light_color=function(a,b){if(!g.is_lamp(a))return p.error("get_light_color(): Wrong object"),
null;b=b||new Float32Array(3);b.set(a.Eb.color);return b};a.set_light_color=function(a,c){if(g.is_lamp(a)){var d=k.get_active();b.set_light_color(a.Eb,c);k.at(a,d)}else p.error("set_light_color(): Wrong object")}};b4w.module.logic_nodes=function(a,u){var e=u("__logic_nodes");a.append_custom_callback=function(a,b){e.QM(a,b)};a.remove_custom_callback=function(a){e.mU(a)};a.run_entrypoint=function(a,b){e.GU(a,b)}};b4w.module.material=function(a,u){var e=u("__batch"),c=u("__config"),b=u("__geometry"),n=u("__objects"),g=u("__obj_util"),p=u("__print"),k=u("__shaders"),x=u("__util"),v=u("__scenes"),h=c.L;a.inherit_material=function(a,c,e,g){if(b.Dj(e)&&b.Dj(a)){var d=a.Ye.hl.indexOf(c);if(-1==d)p.error('inherit_material(): material "'+c+'" not found on the object "'+a.Gd+'".');else{var h=e.Ye.hl.indexOf(g);-1==h?p.error('inherit_material(): material "'+g+'" not found on the object "'+e.Gd+'".'):(0==e.vk.data.submeshes[h].shade_tangs.length&&
a.nc[d].oe&&p.warn('The target material "'+g+'" was exported without tangent shading data. However, the "'+c+'" material requires it. It\'s needed to enable the "Tangent Shading" option on the target material for correct rendering.'),n.inherit_material(a,c,e,g))}}else p.error('inherit_material(): both objects "'+a.Gd+'" and "'+e.Gd+'" must have the "Dynamic Geometry & Materials" flag enabled.')};a.get_materials_names=function(a){var b=[];if(!g.ob(a))return p.error('get_materials_names(): Object "'+
a.name+'" is not a dynamic MESH.'),b;a=a.S;for(var c=0;c<a.length;c++)for(var d=a[c].$,e=0;e<d.length;e++){var h=d[e];if("MAIN"==h.type)for(var k=0;k<h.cc.length;k++)-1==b.indexOf(h.cc[k])&&b.push(h.cc[k])}return b};a.set_diffuse_color=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");d?d.xb?p.error("set_diffuse_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(d.lc.set(c),(a=e.lg(a,b,"MAIN"))&&a.lc.set(c)):p.error('set_diffuse_color(): Material "'+
b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_diffuse_color(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_diffuse_color=function(a,b){var c=new Float32Array(4);if(!g.ob(a))return p.error('get_diffuse_color(): Object "'+a.name+'" is not a dynamic MESH.'),c;var d=e.hb(a,b,"MAIN");if(!d)return p.error('get_diffuse_color(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),c;if(d.xb)return p.error("get_diffuse_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
c;c.set(d.lc);return c};a.set_diffuse_intensity=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");if(d)if(d.xb)p.error("set_diffuse_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.de=c,a=e.lg(a,b,"MAIN"))a.de=c}else p.error('set_diffuse_intensity(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_diffuse_intensity(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_diffuse_intensity=function(a,b){if(!g.ob(a))return p.error('get_diffuse_intensity(): Object "'+
a.name+'" is not a dynamic MESH.'),0;var c=e.hb(a,b,"MAIN");return c?c.xb?(p.error("get_diffuse_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.de:(p.error('get_diffuse_intensity(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.set_specular_color=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");d?d.xb?p.error("set_specular_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):
(d.me.set(c),(a=e.lg(a,b,"MAIN"))&&a.me.set(c)):p.error('set_specular_color(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_specular_color(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_specular_color=function(a,b){var c=new Float32Array(3);if(!g.ob(a))return p.error('get_specular_color(): Object "'+a.name+'" is not a dynamic MESH.'),c;var d=e.hb(a,b,"MAIN");if(!d)return p.error('get_specular_color(): Material "'+b+'" wasn\'t found on the object "'+a.name+
'".'),c;if(d.xb)return p.error("get_specular_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),c;c.set(d.me);return c};a.set_specular_color_factor=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");if(d)if(d.xb)p.error("set_specular_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.bk=c,a=e.lg(a,b,"MAIN"))a.bk=c}else p.error('set_specular_color_factor(): Material "'+b+'" wasn\'t found on the object "'+
a.name+'".')}else p.error('set_specular_color_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_specular_color_factor=function(a,b){if(!g.ob(a))return p.error('get_specular_color_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.hb(a,b,"MAIN");return c?c.xb?(p.error("get_specular_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.bk:(p.error('get_specular_color_factor(): Material "'+b+'" wasn\'t found on the object "'+
a.name+'".'),0)};a.set_specular_intensity=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");d?d.xb?p.error("set_specular_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(d.He[0]=c,(a=e.lg(a,b,"MAIN"))&&(a.He[0]=c)):p.error('set_specular_intensity(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_specular_intensity(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_specular_intensity=function(a,b){if(!g.ob(a))return p.error('get_specular_intensity(): Object "'+
a.name+'" is not a dynamic MESH.'),0;var c=e.hb(a,b,"MAIN");return c?c.xb?(p.error("get_specular_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.He[0]:(p.error('get_specular_intensity(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.check_specular_intensity=function(a,b){p.ga("check_specular_intensity() is deprecated, not needed anymore");var c=e.hb(a,b,"MAIN");return!(!c||!c.He[0])};a.set_specular_hardness=function(a,
b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");d?d.xb?p.error("set_specular_hardness(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(d.He[1]=c,(a=e.lg(a,b,"MAIN"))&&(a.He[1]=c)):p.error('set_specular_hardness(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_specular_hardness(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_specular_hardness=function(a,b){if(!g.ob(a))return p.error('get_specular_hardness(): Object "'+a.name+
'" is not a dynamic MESH.'),0;var c=e.hb(a,b,"MAIN");return c?c.xb?(p.error("get_specular_hardness(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.He[1]:(p.error('get_specular_hardness(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.check_specular_hardness=function(a,b){p.ga("check_specular_hardness() is deprecated, not needed anymore");var c=e.hb(a,b,"MAIN");return!(!c||!c.He[1])};a.set_emit_factor=function(a,b,c){if(g.ob(a)){var d=
e.hb(a,b,"MAIN");if(d)if(d.xb)p.error("set_emit_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.Bd=c,a=e.lg(a,b,"MAIN"))a.Bd=c}else p.error('set_emit_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_emit_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_emit_factor=function(a,b){if(!g.ob(a))return p.error('get_emit_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.hb(a,b,
"MAIN");return c?c.xb?(p.error("get_emit_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.Bd:(p.error('get_emit_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.set_ambient_factor=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");if(d)if(d.xb)p.error("set_ambient_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.yd=c,a=e.lg(a,b,"MAIN"))a.yd=c}else p.error('set_ambient_factor(): Material "'+
b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_ambient_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_ambient_factor=function(a,b){if(!g.ob(a))return p.error('get_ambient_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.hb(a,b,"MAIN");return c?c.xb?(p.error("get_ambient_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.yd:(p.error('get_ambient_factor(): Material "'+b+'" wasn\'t found on the object "'+
a.name+'".'),0)};a.set_diffuse_color_factor=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");if(d)if(d.xb)p.error("set_diffuse_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(d.ti=c,a=e.lg(a,b,"MAIN"))a.ti=c}else p.error('set_diffuse_color_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_diffuse_color_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_diffuse_color_factor=function(a,
b){if(!g.ob(a))return p.error('get_diffuse_color_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.hb(a,b,"MAIN");return c?c.xb?(p.error("get_diffuse_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):c.ti:(p.error('get_diffuse_color_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.set_alpha_factor=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");if(d)if(d.xb)p.error("set_alpha_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");
else{if(d.Jg=c,a=e.lg(a,b,"MAIN"))a.Jg=c}else p.error('set_alpha_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_alpha_factor(): Object "'+a.name+'" is not a dynamic MESH.')};a.get_alpha_factor=function(a,b){if(!g.ob(a))return p.error('get_alpha_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var c=e.hb(a,b,"MAIN");return c?c.xb?(p.error("get_alpha_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):
c.Jg:(p.error('get_alpha_factor(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),0)};a.get_material_extended_params=function(a,b){if(!g.ob(a))return p.error('get_material_extended_params(): Object "'+a.name+'" is not a dynamic MESH.'),null;var c=e.hb(a,b,"MAIN");if(!c)return p.error('get_material_extended_params(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),null;if(c.xb)return p.error("get_material_extended_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
null;var d={};d.reflect_factor=c.reflect_factor;d.fresnel=c.Fh[0];d.fresnel_factor=5*(1-c.Fh[1]);d.parallax_scale=c.parallax_scale;d.parallax_steps=parseFloat(e.jd(c,"PARALLAX_STEPS")[1]);return d};a.set_material_extended_params=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");if(d)if(d.xb)p.error("set_material_extended_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var h=[d];(d=e.lg(a,b,"MAIN"))&&h.push(d);for(a=0;a<h.length;a++)d=h[a],"number"==
typeof c.reflect_factor&&(d.reflect_factor=c.reflect_factor),"number"==typeof c.fresnel&&(d.Fh[0]=c.fresnel),"number"==typeof c.fresnel_factor&&(d.Fh[1]=1-c.fresnel_factor/5),"number"==typeof c.parallax_scale&&(d.parallax_scale=c.parallax_scale),"number"==typeof c.parallax_steps&&(e.yb(d,"PARALLAX_STEPS",k.X(c.parallax_steps)),e.Ic(d),v.gI(d))}else p.error('set_material_extended_params(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".')}else p.error('set_material_extended_params(): Object "'+
a.name+'" is not a dynamic MESH.')};a.get_water_material_params=function(a,b){if(!g.ob(a))return p.error('get_water_material_params(): Object "'+a.name+'" is not a dynamic MESH.'),null;var c=e.hb(a,b,"MAIN");if(!c||!c.Sf)return p.error('get_water_material_params(): Material "'+b+'" wasn\'t found on the object "'+a.name+"\" or it's not a water material."),null;if(c.xb)return p.error("get_water_material_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
null;var d={};d.shore_smoothing=h.shore_smoothing&&c.Dn&&!!parseFloat(e.jd(c,"SHORE_SMOOTHING")[1]);d.absorb_factor=parseFloat(e.jd(c,"ABSORB")[1]);d.foam_factor=c.foam_factor;d.shallow_water_col=new Float32Array(3);d.shore_water_col=new Float32Array(3);d.shallow_water_col_fac=0;d.shore_water_col_fac=0;h.lp&&(d.shallow_water_col.set(c.shallow_water_col),d.shore_water_col.set(c.shore_water_col),d.shallow_water_col_fac=c.shallow_water_col_fac,d.shore_water_col_fac=c.shore_water_col_fac);d.norm_uv_velocity=
c.Ol;d.water_dynamic=h.water_dynamic&&c.water_dynamic&&!!parseFloat(e.jd(c,"DYNAMIC")[1]);d.sss_strength=parseFloat(e.jd(c,"SSS_STRENGTH")[1]);d.sss_width=parseFloat(e.jd(c,"SSS_WIDTH")[1]);d.waves_height=parseFloat(e.jd(c,"WAVES_HEIGHT")[1]);d.waves_length=parseFloat(e.jd(c,"WAVES_LENGTH")[1]);d.dst_noise_scale0=parseFloat(e.jd(c,"DST_NOISE_SCALE_0")[1]);d.dst_noise_scale1=parseFloat(e.jd(c,"DST_NOISE_SCALE_1")[1]);d.dst_noise_freq0=parseFloat(e.jd(c,"DST_NOISE_FREQ_0")[1]);d.dst_noise_freq1=parseFloat(e.jd(c,
"DST_NOISE_FREQ_1")[1]);d.dir_min_shore_fac=parseFloat(e.jd(c,"DIR_MIN_SHR_FAC")[1]);d.dir_freq=parseFloat(e.jd(c,"DIR_FREQ")[1]);d.dir_noise_scale=parseFloat(e.jd(c,"DIR_NOISE_SCALE")[1]);d.dir_noise_freq=parseFloat(e.jd(c,"DIR_NOISE_FREQ")[1]);d.dir_min_noise_fac=parseFloat(e.jd(c,"DIR_MIN_NOISE_FAC")[1]);d.dst_min_fac=parseFloat(e.jd(c,"DST_MIN_FAC")[1]);d.waves_hor_fac=parseFloat(e.jd(c,"WAVES_HOR_FAC")[1]);return d};a.set_water_material_params=function(a,b,c){if(g.ob(a)){var d=e.hb(a,b,"MAIN");
if(d&&d.Sf)if(d.xb)p.error("set_water_material_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var n=[d];(d=e.lg(a,b,"MAIN"))&&n.push(d);for(a=0;a<n.length;a++)d=n[a],"boolean"==typeof c.shore_smoothing&&(h.shore_smoothing&&d.Dn&&c.shore_smoothing?e.yb(d,"SHORE_SMOOTHING",1):e.yb(d,"SHORE_SMOOTHING",0)),"number"==typeof c.absorb_factor&&(b=k.X(parseFloat(c.absorb_factor)),e.yb(d,"ABSORB",b)),"number"==typeof c.foam_factor&&h.po&&(d.foam_factor=
c.foam_factor),h.lp&&("object"==typeof c.shallow_water_col&&d.shallow_water_col.set(c.shallow_water_col),"number"==typeof c.shallow_water_col_fac&&(d.shallow_water_col_fac=c.shallow_water_col_fac),"object"==typeof c.shore_water_col&&d.shore_water_col.set(c.shore_water_col),"number"==typeof c.shore_water_col_fac&&(d.shore_water_col_fac=c.shore_water_col_fac)),"number"==typeof c.norm_uv_velocity&&(d.Ol=c.norm_uv_velocity),h.water_dynamic&&d.water_dynamic&&("boolean"==typeof c.water_dynamic&&(c.water_dynamic?
e.yb(d,"DYNAMIC",1):e.yb(d,"DYNAMIC",0)),"number"==typeof c.sss_strength&&(b=k.X(parseFloat(c.sss_strength)),e.yb(d,"SSS_STRENGTH",b)),"number"==typeof c.sss_width&&(b=k.X(parseFloat(c.sss_width)),e.yb(d,"SSS_WIDTH",b)),"number"==typeof c.waves_height&&(b=k.X(parseFloat(c.waves_height)),e.yb(d,"WAVES_HEIGHT",b)),"number"==typeof c.waves_length&&(b=k.X(parseFloat(c.waves_length)),e.yb(d,"WAVES_LENGTH",b)),"number"==typeof c.dst_noise_scale0&&(b=k.X(parseFloat(c.dst_noise_scale0)),e.yb(d,"DST_NOISE_SCALE_0",
b)),"number"==typeof c.dst_noise_scale1&&(b=k.X(parseFloat(c.dst_noise_scale1)),e.yb(d,"DST_NOISE_SCALE_1",b)),"number"==typeof c.dst_noise_freq0&&(b=k.X(parseFloat(c.dst_noise_freq0)),e.yb(d,"DST_NOISE_FREQ_0",b)),"number"==typeof c.dst_noise_freq1&&(b=k.X(parseFloat(c.dst_noise_freq1)),e.yb(d,"DST_NOISE_FREQ_1",b)),"number"==typeof c.dir_min_shore_fac&&(b=k.X(parseFloat(c.dir_min_shore_fac)),e.yb(d,"DIR_MIN_SHR_FAC",b)),"number"==typeof c.dir_freq&&(b=k.X(parseFloat(c.dir_freq)),e.yb(d,"DIR_FREQ",
b)),"number"==typeof c.dir_noise_scale&&(b=k.X(parseFloat(c.dir_noise_scale)),e.yb(d,"DIR_NOISE_SCALE",b)),"number"==typeof c.dir_noise_freq&&(b=k.X(parseFloat(c.dir_noise_freq)),e.yb(d,"DIR_NOISE_FREQ",b)),"number"==typeof c.dir_min_noise_fac&&(b=k.X(parseFloat(c.dir_min_noise_fac)),e.yb(d,"DIR_MIN_NOISE_FAC",b)),"number"==typeof c.dst_min_fac&&(b=k.X(parseFloat(c.dst_min_fac)),e.yb(d,"DST_MIN_FAC",b)),"number"==typeof c.waves_hor_fac&&(b=k.X(parseFloat(c.waves_hor_fac)),e.yb(d,"WAVES_HOR_FAC",b))),
e.Ic(d),v.gI(d)}else p.error('set_water_material_params(): Material "'+b+'" wasn\'t found on the object "'+a.name+"\" or it's not a water material.")}else p.error('set_water_material_params(): Object "'+a.name+'" is not a dynamic MESH.')};a.set_line_params=function(a,b){if(g.is_line(a)){var c=e.rv(a);c?(x.fe(b.color)&&c.lc.set(b.color),x.fe(b.width)&&(c.Tm=b.width)):p.error("set_line_params(): Couldn't set line parameters!")}else p.error('set_line_params(): Object "'+a.name+'" is not a LINE object.')};
a.get_line_params=function(a){if(!g.is_line(a))return p.error('get_line_params(): Object "'+a.name+'" is not a LINE object.'),null;a=e.rv(a);return a?{color:new Float32Array(a.lc),width:a.Tm}:(p.error("get_line_params(): Couldn't get line parameters!"),null)};a.set_nodemat_value=function(a,b,c){var d=g.ob(a),h=g.is_world(a),k=h?n.Bv(a):a.name;if(d||h){if(d){var l=b[0],q=1,r=e.Lk(a,l,"MAIN")||e.Lk(a,l,"PARTICLES");if(!r){p.error('set_nodemat_value(): Material "'+l+'" wasn\'t found on the object "'+
k+'".');return}}else if(h&&(d=v.get_active(),l="",q=0,r=e.Br(a,d),!r)){p.error("set_nodemat_value(): Sky node material wasn't found on the world object \""+k+'".');return}q=n.Dr(r.Gf,b,q);null===q?p.error('set_nodemat_value(): Value node "'+b[b.length-1]+'" was not found in the object "'+k+'".'):n.set_nodemat_value(a,l,q,c)}else p.error('set_nodemat_value(): Object "'+k+'" is not a dynamic MESH or WORLD.')};a.get_nodemat_value=function(a,b){var c=g.ob(a),d=g.is_world(a),h=d?n.Bv(a):a.name;if(!c&&
!d)return p.error('get_nodemat_value(): Object "'+h+'" is not a dynamic MESH or WORLD.'),0;if(c){var c=b[0],k=1,l=e.Lk(a,c,"MAIN")||e.Lk(a,c,"PARTICLES");if(!l)return p.error('get_nodemat_value(): Material "'+c+'" wasn\'t found on the object "'+h+'".'),0}else if(d&&(l=v.get_active(),k=0,l=e.Br(a,l),!l))return p.error("get_nodemat_value(): Sky node material wasn't found on the world object \""+h+'".'),0;k=n.Dr(l.Gf,b,k);return null===k?(p.error('get_nodemat_value(): Value node "'+b[b.length-1]+'" was not found in the object "'+
h+'".'),0):n.get_nodemat_value(l,k)};a.set_nodemat_rgb=function(a,b,c,h,k){var d=g.ob(a),l=g.is_world(a),q=l?n.Bv(a):a.name;if(d||l){if(d){var r=b[0],t=1,w=e.Lk(a,r,"MAIN")||e.Lk(a,r,"PARTICLES");if(!w){p.error('set_nodemat_rgb(): Material "'+r+'" wasn\'t found on the object "'+q+'".');return}}else if(l&&(d=v.get_active(),r="",t=0,w=e.Br(a,d),!w)){p.error("set_nodemat_rgb(): Sky node material wasn't found on the world object \""+q+'".');return}t=n.Cr(w.Ff,b,t);null===t?p.error('set_nodemat_rgb(): RGB node "'+
b[b.length-1]+'" was not found in the object "'+q+'".'):n.set_nodemat_rgb(a,r,t,c,h,k)}else p.error('set_nodemat_rgb(): Object "'+q+'" is not a dynamic MESH or WORLD.')};a.get_nodemat_rgb=function(a,b,c){var d=g.ob(a),h=g.is_world(a),k=h?n.Bv(a):a.name;if(!d&&!h)return p.error('get_nodemat_rgb(): Object "'+k+'" is not a dynamic MESH or WORLD.'),null;if(d){var d=b[0],l=1,q=e.Lk(a,d,"MAIN")||e.Lk(a,d,"PARTICLES");if(!q)return p.error('get_nodemat_rgb(): Material "'+d+'" wasn\'t found on the object "'+
k+'".'),null}else if(h&&(q=v.get_active(),l=0,q=e.Br(a,q),!q))return p.error("get_nodemat_rgb(): Sky node material wasn't found on the world object \""+k+'".'),null;a=n.Cr(q.Ff,b,l);if(null===a)return p.error('get_nodemat_rgb(): RGB node "'+b[b.length-1]+'" was not found in the object "'+k+'".'),null;c||(c=new Float32Array(3));return n.get_nodemat_rgb(q,a,c)};a.is_node_material=function(a,b){if(!g.ob(a))return p.error('is_node_material(): Object "'+a.name+'" is not a dynamic MESH.'),!1;var c=e.hb(a,
b,"MAIN");return c?c.xb:(p.error('is_node_material(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),!1)};a.is_water_material=function(a,b){if(!g.ob(a))return p.error('is_water_material(): Object "'+a.name+'" is not a dynamic MESH.'),!1;var c=e.hb(a,b,"MAIN");return c?c.Sf&&!c.xb:(p.error('is_water_material(): Material "'+b+'" wasn\'t found on the object "'+a.name+'".'),!1)}};b4w.module.math=function(a,u){var e=u("__vec3"),c=u("__util"),b=u("__math"),n=new Float32Array(3);a.create_pline_from_points=function(a,c){var g=new Float32Array(6);b.set_pline_initial_point(g,a);e.subtract(c,a,n);b.set_pline_directional_vec(g,n);return g};a.create_pline_from_point_vec=function(a,c){var e=new Float32Array(6);b.set_pline_initial_point(e,a);b.set_pline_directional_vec(e,c);return e};a.create_pline=function(){return new Float32Array(6)};a.get_pline_directional_vec=b.get_pline_directional_vec;
a.get_pline_initial_point=b.get_pline_initial_point;a.set_pline_initial_point=b.set_pline_initial_point;a.set_pline_directional_vec=b.set_pline_directional_vec;a.line_plane_intersect=c.line_plane_intersect;a.calc_pline_point=b.calc_pline_point;a.point_plane_dist=b.point_plane_dist;a.linear_tween=b.linear_tween;a.ease_in_quad=b.ease_in_quad;a.ease_out_quad=b.ease_out_quad;a.ease_in_out_quad=b.ease_in_out_quad;a.ease_in_cubic=b.ease_in_cubic;a.ease_out_cubic=b.ease_out_cubic;a.ease_in_out_cubic=b.ease_in_out_cubic;
a.ease_in_quart=b.ease_in_quart;a.ease_out_quart=b.ease_out_quart;a.ease_in_out_quart=b.ease_in_out_quart;a.ease_in_quint=b.ease_in_quint;a.ease_out_quint=b.ease_out_quint;a.ease_in_out_quint=b.ease_in_out_quint;a.ease_in_sine=b.ease_in_sine;a.ease_out_sine=b.ease_out_sine;a.ease_in_out_sine=b.ease_in_out_sine;a.ease_in_expo=b.ease_in_expo;a.ease_out_expo=b.ease_out_expo;a.ease_in_out_expo=b.ease_in_out_expo;a.ease_in_circ=b.ease_in_circ;a.ease_out_circ=b.ease_out_circ;a.ease_in_out_circ=b.ease_in_out_circ;
a.ease_in_elastic=b.ease_in_elastic;a.ease_out_elastic=b.ease_out_elastic;a.ease_in_out_elastic=b.ease_in_out_elastic;a.ease_in_back=b.ease_in_back;a.ease_out_back=b.ease_out_back;a.ease_in_out_back=b.ease_in_out_back;a.ease_in_bounce=b.ease_in_bounce;a.ease_out_bounce=b.ease_out_bounce;a.ease_in_out_bounce=b.ease_in_out_bounce};b4w.module.particles=function(a,u){var e=u("__particles"),c=u("__print");a.set_size=function(a,n,g){e.vB(a,n)?e.set_size(a,n,g):c.error('set_size(): Object "'+a.name+'" has not a particle system named "'+n+'"')};a.set_normal_factor=function(a,n,g){e.vB(a,n)?e.set_normal_factor(a,n,g):c.error('set_normal_factor(): Object "'+a.name+'" has not a particle system named "'+n+'"')};a.set_factor=function(a,n,g){e.vB(a,n)?(g=Math.min(g,1),g=Math.max(g,0),e.set_factor(a,n,g)):c.error('set_factor(): Object "'+
a.name+'" has not a particle system named "'+n+'"')}};b4w.module.physics=function(a,u){function e(a,b,c,e){return g.bQ(a,e[c[0]],e[c[1]],e[c[2]])}function c(a,b,c,e,d){b=Math.abs(a[2]-b[2]);return b<d&&p.DS(a,c,e)?b:Number.MAX_VALUE}var b=u("__physics"),n=u("__print"),g=u("__util"),p=u("__navmesh");a.CM_WALK=0;a.CM_RUN=1;a.CM_CLIMB=2;a.CM_FLY=3;a.enable_simulation=function(a){b.sa(a)?b.enable_simulation(a):n.ga("No physics for object "+a.name)};a.disable_simulation=function(a){b.sa(a)?b.disable_simulation(a):n.ga("No physics for object "+a.name)};a.has_physics=
function(a){return b.sa(a)};a.has_simulated_physics=function(a){return b.has_simulated_physics(a)};a.has_dynamic_physics=function(a){return b.has_dynamic_physics(a)};a.set_gravity=function(a,c){n.gd("set_gravity","set_object_gravity");b.sa(a)?b.set_gravity(a,0,0,-c):n.ga("No physics for object "+a.name)};a.set_object_gravity=function(a,c){b.sa(a)?b.set_gravity(a,c[0],c[1],c[2]):n.ga("No physics for object "+a.name)};a.set_transform=function(a,c,e){b.sa(a)?b.set_transform(a,c,e):n.ga("No physics for object "+
a.name)};a.sync_transform=function(a){b.sa(a)?b.sync_transform(a):n.ga("No physics for object "+a.name)};a.apply_velocity=function(a,c,e,g){b.sa(a)?b.apply_velocity(a,c,e,g):n.ga("No physics for object "+a.name)};a.apply_velocity_world=function(a,c,e,g){b.sa(a)?b.apply_velocity_world(a,c,e,g):n.ga("No physics for object "+a.name)};a.apply_force=function(a,c,e,g){b.sa(a)?b.apply_force(a,c,e,g,!1):n.ga("No physics for object "+a.name)};a.apply_force_world=function(a,c,e,g){b.sa(a)?b.apply_force(a,c,
e,g,!0):n.ga("No physics for object "+a.name)};a.apply_torque=function(a,c,e,g){b.sa(a)?b.apply_torque(a,c,e,g):n.ga("No physics for object "+a.name)};a.set_angular_velocity=function(a,c,e,g){b.sa(a)?b.set_angular_velocity(a,c,e,g):n.ga("No physics for object "+a.name)};a.vehicle_throttle=function(a,c){b.sa(a)?(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||n.error("Wrong object"),b.vehicle_throttle(a,g.clamp(c,-1,1))):n.ga("No physics for object "+a.name)};a.vehicle_throttle_inc=function(a,c,e){if(b.sa(a)){b.is_vehicle_chassis(a)||
b.is_vehicle_hull(a)||n.error("Wrong object");c=g.clamp(c,0,1);var h=a.R.ko;-1==e||1==e?h=Math.max(-1,Math.min(h+e*c,1)):!e&&0<=h?h=Math.max(0,h-c):!e&&0>h?h=Math.min(0,h+c):n.error("Wrong steering direction");b.vehicle_throttle(a,g.clamp(h,-1,1))}else n.ga("No physics for object "+a.name)};a.vehicle_steer=function(a,c){b.sa(a)?(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||n.error("Wrong object"),b.vehicle_steer(a,g.clamp(c,-1,1))):n.ga("No physics for object "+a.name)};a.vehicle_steer_inc=function(a,
c,e){if(b.sa(a)){b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||n.error("Wrong object");c=g.clamp(c,0,1);var h=a.R.zp;-1==e||1==e?h=Math.max(-1,Math.min(h+e*c,1)):!e&&0<=h?h=Math.max(0,h-c):!e&&0>h?h=Math.min(0,h+c):n.error("Wrong steering direction");b.vehicle_steer(a,g.clamp(h,-1,1))}else n.ga("No physics for object "+a.name)};a.vehicle_brake=function(a,c){b.sa(a)?(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||n.error("Wrong object"),b.vehicle_brake(a,g.clamp(c,0,1))):n.ga("No physics for object "+
a.name)};a.vehicle_brake_inc=function(a,c){if(b.sa(a)){b.is_vehicle_chassis(a)||b.is_vehicle_hull(a)||n.error("Wrong object");c=g.clamp(c,-1,1);var e=a.R.Eq;b.vehicle_brake(a,g.clamp(e+e*c,0,1))}else n.ga("No physics for object "+a.name)};a.is_vehicle_chassis=function(a){return b.is_vehicle_chassis(a)};a.is_vehicle_hull=function(a){return b.is_vehicle_hull(a)};a.get_vehicle_name=function(a){if(!b.sa(a))return n.ga("No physics for object "+a.name),null;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return a.Of.name;
n.error("Wrong object");return null};a.get_vehicle_throttle=function(a){if(!b.sa(a))return n.ga("No physics for object "+a.name),null;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return a.R.ko;n.error("Wrong object");return null};a.get_vehicle_steering=function(a){if(!b.sa(a))return n.ga("No physics for object "+a.name),0;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return a.R.zp;n.error("Wrong object");return 0};a.get_vehicle_brake=function(a){if(!b.sa(a))return n.ga("No physics for object "+
a.name),0;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return a.R.Eq;n.error("Wrong object");return 0};a.get_vehicle_speed=function(a){if(!b.sa(a))return n.ga("No physics for object "+a.name),0;if(b.is_vehicle_chassis(a)||b.is_vehicle_hull(a))return b.get_vehicle_speed(a);n.error("Wrong object");return 0};a.is_character=function(a){return b.xG(a)};a.set_character_move_dir=function(a,c,e){b.sa(a)?b.set_character_move_dir(a,c,e):n.ga("No physics for object "+a.name)};a.set_character_move_type=function(a,
c){b.sa(a)?b.set_character_move_type(a,c):n.ga("No physics for object "+a.name)};a.set_character_walk_velocity=function(a,c){b.sa(a)?b.set_character_walk_velocity(a,c):n.ga("No physics for object "+a.name)};a.set_character_run_velocity=function(a,c){b.sa(a)?b.set_character_run_velocity(a,c):n.ga("No physics for object "+a.name)};a.set_character_fly_velocity=function(a,c){b.sa(a)?b.set_character_fly_velocity(a,c):n.ga("No physics for object "+a.name)};a.character_jump=function(a){b.sa(a)?b.character_jump(a):
n.ga("No physics for object "+a.name)};a.character_rotation_inc=function(a,c,e){b.sa(a)?b.character_rotation_inc(a,c,e):n.ga("No physics for object "+a.name)};a.set_character_rotation=function(a,c,e){b.sa(a)?b.set_character_rotation(a,c,e):n.ga("No physics for object "+a.name)};a.set_character_rotation_v=function(a,c){b.sa(a)?b.set_character_rotation_v(a,c):n.ga("No physics for object "+a.name)};a.set_character_rotation_h=function(a,c){b.sa(a)?b.set_character_rotation_h(a,c):n.ga("No physics for object "+
a.name)};a.set_character_vert_move_dir_angle=function(a,c){b.sa(a)?b.set_character_vert_move_dir_angle(a,c):n.ga("No physics for object "+a.name)};a.append_collision_test=function(a,c,e,g){b.sa(a)?b.append_collision_test(a,c||"ANY",e,g||!1):n.ga("No physics for object "+a.name)};a.remove_collision_test=function(a,c,e){b.sa(a)?b.remove_collision_test(a,c||"ANY",e):n.ga("No physics for object "+a.name)};a.apply_collision_impulse_test=function(a,c){b.sa(a)?b.apply_collision_impulse_test(a,c):n.ga("No physics for object "+
a.name)};a.clear_collision_impulse_test=function(a){b.sa(a)?b.clear_collision_impulse_test(a):n.ga("No physics for object "+a.name)};a.append_ray_test=function(a,c,e,g,d,p){a=a||null;return null==a||b.sa(a)?b.append_ray_test(a,c,e,g||"ANY",d,p||!1,!1,!1,!1):(n.ga("No physics for object "+a.name),0)};a.append_ray_test_ext=function(a,c,e,g,d,p,q,u,H){a=a||null;return null==a||b.sa(a)?b.append_ray_test(a,c,e,g||"ANY",d,p||!1,q||!1,u||!1,H||!1):(n.ga("No physics for object "+a.name),0)};a.remove_ray_test=
function(a){b.VG(a)?b.remove_ray_test(a):n.error("Wrong ray test ID")};a.change_ray_test_from_to=function(a,c,e){b.VG(a)?b.change_ray_test_from_to(a,c,e):n.error("Wrong ray test ID")};a.apply_constraint=function(a,c,e,g,d,p,q,u,H,z){b.sa(c)&&b.sa(d)?b.apply_constraint(a,c,e,g,d,p,q,u,H,z):n.error("Wrong objects")};a.clear_constraint=function(a){b.sa(a)&&b.ZR(a)?b.clear_constraint(a):n.error("Wrong object")};a.pull_to_constraint_pivot=function(a,c,e,g,d,p){b.sa(a)&&b.sa(g)?b.pull_to_constraint_pivot(a,
c,e,g,d,p):n.error("Wrong objects")};a.navmesh_get_island=function(a,c,g){g||(g=e);if(b.sa(a)){var h=a.N.Zr;return h?p.navmesh_get_island(h,c,g):(n.error(a.name+" is not a navigation mesh object"),null)}n.ga("No physics for object "+a.name)};a.navmesh_find_path=function(a,g,v,h){if(b.sa(a)){var d=a.N.Zr;if(!d)return n.error(a.name+" is not a navigation mesh object"),null;h=h||{};a={};a.do_not_pull_string=!!h.do_not_pull_string;a.distance_to_closest=h.distance_to_closest||e;a.distance_to_farthest=
h.distance_to_farthest||c;a.island=h.island||0;a.allowed_distance=h.allowed_distance||Number.MAX_VALUE;a.return_normals=h.return_normals||!1;return p.navmesh_find_path(d,g,v,a)}n.ga("No physics for object "+a.name)}};b4w.module.rgb=function(a,u){var e=u("__util"),c=new Float32Array(3);a.create=function(){return new Float32Array(3)};a.from_values=function(a,c,e){var b=new Float32Array(3);b[0]=a;b[1]=c;b[2]=e;return b};a.set=function(a,c,e,p){p[0]=a;p[1]=c;p[2]=e;return p};a.css_to_rgb=function(a,c,g,p){p=p||new Float32Array(3);p[0]=a/255;p[1]=c/255;p[2]=g/255;e.eJ(p,p);return p};a.rgb_to_css=function(a){a=e.VA(a,c);return[Math.round(255*a[0]),Math.round(255*a[1]),Math.round(255*a[2])]};a.rgb_to_css_hex=function(a){function b(a){a=
Math.round(255*a).toString(16);return 1==a.length?"0"+a:a}a=e.VA(a,c);return"#"+b(a[0])+b(a[1])+b(a[2])}};
b4w.module.rgba=function(a,u){var e=u("__util"),c=new Float32Array(3);a.create=function(){var a=new Float32Array(4);a[3]=1;return a};a.from_values=function(a,c,e,p){var b=new Float32Array(4);b[0]=a;b[1]=c;b[2]=e;b[3]=p;return b};a.set=function(a,c,e,p,k){k[0]=a;k[1]=c;k[2]=e;k[3]=p;return k};a.css_to_rgba=function(a,c,g,p,k){k=k||new Float32Array(4);k[0]=a/255;k[1]=c/255;k[2]=g/255;k[3]=p;e.eJ(k,k);return k};a.rgba_to_css=function(a){var b=e.VA(a,c);return[Math.round(255*b[0]),Math.round(255*b[1]),
Math.round(255*b[2]),a[3]]}};b4w.module.scenes=function(a,u){function e(){var a=g.get_canvas();return x.pick_object(a.clientWidth/2,a.clientHeight/2)}function c(a){return v.ob(a)||v.is_empty(a)||v.is_line(a)||v.is_lamp(a)}var b=u("__batch"),n=u("__camera"),g=u("__container"),p=u("__data"),k=u("__graph"),x=u("__objects"),v=u("__obj_util"),h=u("__print"),d=u("__scenes"),t=u("__scenegraph"),q=u("__subscene"),G=u("__util");a.DATA_ID_ALL=x.DATA_ID_ALL;a.set_active=function(a){var b=d.Ar();d.set_active(G.keysearch("name",a,b))};a.get_active=
function(){return d.Pa()?d.get_active().name:""};a.get_scenes=function(){for(var a=d.Ar(),b=[],c=0;c<a.length;c++)b.push(a[c].name);return b};a.get_active_camera=function(){if(d.Pa())return d.Ok(d.get_active());h.error("No active scene");return!1};a.get_object_by_name=function(a,b){var c=x.Vc(x.Oy,a,b|0,!0);if(c)return c;h.error("get object "+a+": not found")};a.get_object_by_dupli_name=function(a,b,c){if(a=x.Vc(x.Ny,a,b,c|0))return a;h.error("get object "+b+": not found")};a.get_object_by_dupli_name_list=
function(a,b){var c=x.Vc(x.Id,a,b|0);if(c)return c;h.error("get object "+a+": not found")};a.get_world_by_name=function(a,b){var c=x.get_world_by_name(a,b|0);if(c)return c;h.error("get object "+a+": not found")};a.get_object_data_id=function(a){return v.get_object_data_id(a)};a.pick_object=function(a,b){var c=d.Gh();return c?(c=d.Tb(c,q.Hg))&&c.enable_hmd_stereo?(h.ga("pick_object() is not available in the stereo rendering mode. Use scenes.pick_center instead."),e()):x.pick_object(a,b):(h.error("No active scene"),
null)};a.pick_center=e;a.outlining_is_enabled=function(a){return a&&a.A&&a.A.Xc};a.set_outline_intensity=function(a,b){a&&a.A&&a.A.Xc?x.set_outline_intensity(a,b):h.error("set_outline_intensity(): wrong object")};a.get_outline_intensity=function(a){if(a&&a.A&&a.A.Xc)return a.A.Ki;h.error("get_outline_intensity(): wrong object");return 0};a.apply_outline_anim=function(a,b,c,d){a&&a.A&&a.A.Xc?x.apply_outline_anim(a,b,c,d):h.error("apply_outline_anim(): wrong object")};a.apply_outline_anim_def=function(a){if(a&&
a.A&&a.A.Xc){var b=a.A.Ji;x.apply_outline_anim(a,b.il,b.jl,b.kl)}else h.error("apply_outline_anim_def(): wrong object")};a.clear_outline_anim=function(a){a&&a.A&&a.A.Xc?x.clear_outline_anim(a):h.error("clear_outline_anim(): wrong object")};a.set_outline_color=d.set_outline_color;a.get_outline_color=function(a){var b=d.get_active();if(b=d.Tb(b,q.Jn))return a=a||new Float32Array(3),a.set(b.Nh),a};a.set_hmd_params=function(a){d.Pa()?a&&(!a.distortion_coefs||a.distortion_coefs instanceof Array||(a.distortion_coefs=
null),!a.chromatic_aberration_coefs||a.chromatic_aberration_coefs instanceof Array||(a.chromatic_aberration_coefs=null),"number"!=typeof a.base_line_factor&&(a.base_line_factor=null),"number"!=typeof a.inter_lens_factor&&(a.inter_lens_factor=null),"boolean"!=typeof a.enable_hmd_stereo&&(a.enable_hmd_stereo=null),d.set_hmd_params(a)):h.error("No active scene")};a.get_shadow_params=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active(),b=d.Tb(a,q.xd);if(!b)return null;var c=
a.J.Zc,e=d.Tb(a,q.Hb),g=d.Tb(a,q.Yf),k={};k.csm_resolution=c.csm_resolution;k.self_shadow_polygon_offset=b.self_shadow_polygon_offset;g&&(k.self_shadow_normal_offset=g.self_shadow_normal_offset);k.enable_csm=c.enable_csm;k.csm_num=c.csm_num;k.csm_first_cascade_border=c.csm_first_cascade_border;k.first_cascade_blur_radius=c.first_cascade_blur_radius;k.csm_last_cascade_border=c.csm_last_cascade_border;k.last_cascade_blur_radius=c.last_cascade_blur_radius;k.fade_last_cascade=c.fade_last_cascade;k.blend_between_cascades=
c.blend_between_cascades;c.enable_csm?(k.csm_borders=d.mR(a,e.H),k.blur_radii=new Float32Array(c.csm_num),k.blur_radii.set(e.H.bp.subarray(0,c.csm_num))):(k.csm_borders=null,k.blur_radii=null);return k};a.set_shadow_params=function(a){if(d.Pa()){var c=d.get_active();"number"==typeof a.self_shadow_polygon_offset&&k.fa(c.J.wa,function(b,c){c.type==q.xd&&(c.self_shadow_polygon_offset=a.self_shadow_polygon_offset)});for(var e=d.Bg(c,[q.Yf]),g=0;g<e.length;g++){var p=e[g];"number"==typeof a.self_shadow_normal_offset&&
(p.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(p.pcf_blur_radius=a.pcf_blur_radius)}e=d.Bg(c,[q.cd]);for(g=0;g<e.length;g++){var t=e[g];"number"==typeof a.self_shadow_normal_offset&&(t.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(t.pcf_blur_radius=a.pcf_blur_radius);t.Na=!0}e=c.J.Zc;"number"==typeof a.csm_first_cascade_border&&(e.csm_first_cascade_border=a.csm_first_cascade_border);"number"==typeof a.first_cascade_blur_radius&&
(e.first_cascade_blur_radius=a.first_cascade_blur_radius);"number"==typeof a.csm_last_cascade_border&&(e.csm_last_cascade_border=a.csm_last_cascade_border);"number"==typeof a.last_cascade_blur_radius&&(e.last_cascade_blur_radius=a.last_cascade_blur_radius);if(p){t=p.Za;for(g=0;g<t.length;g++)for(var w=t[g].La,f=0;f<w.length;f++){var u=w[f];if(u.ug.Td){var x=u.ya;b.gE(x,e);b.Ic(x);q.Rc(p,u)}}p.Na=!0}p=v.Da(c.bj,c).ja;for(g=0;g<p.length;g++)n.QC(p[g],e);d.dC(c)}else h.error("No active scene")};a.get_environment_colors=
function(){if(!d.Pa())return h.error("No active scene"),[];var a=d.get_active();return d.get_environment_colors(a)};a.set_environment_colors=function(a,b,c){if(d.Pa()){var e=d.get_active(),g=d.Tb(e,q.Hb);d.set_environment_colors(e,a||0==a?parseFloat(a):g.kg,b||0==b?b:g.Md,c||0==c?c:g.Xd)}else h.error("No active scene")};a.get_fog_color_density=function(a){if(!d.Pa())return h.error("No active scene"),!1;var b=d.get_active();return d.get_fog_color_density(b,a)};a.set_fog_color_density=function(a){if(d.Pa()){var b=
d.get_active();d.set_fog_color_density(b,a)}else h.error("No active scene")};a.get_fog_params=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active(),b={};b.fog_intensity=d.vR(a);b.fog_depth=d.tR(a);b.fog_start=d.wR(a);b.fog_height=d.uR(a);return b};a.set_fog_params=function(a){if(d.Pa()){var b=d.get_active();"number"==typeof a.fog_intensity&&d.zI(b,a.fog_intensity);"number"==typeof a.fog_depth&&d.xI(b,a.fog_depth);"number"==typeof a.fog_start&&d.AI(b,a.fog_start);"number"==
typeof a.fog_height&&d.yI(b,a.fog_height)}else h.error("No active scene")};a.get_ssao_params=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active();return d.get_ssao_params(a)};a.set_ssao_params=function(a){if(d.Pa()){var c=d.get_active(),e=d.Bg(c,[q.Bt]),c=d.Bg(c,[q.Vy]);if(!e.length)return h.error("SSAO is not enabled on the scene"),0;for(var g=0;g<e.length;g++){var k=e[g],n=c[g],p=a,f=d.get_active(),v=k.Za[0].La[0],u=v.ya,x=n.Za[0].La[0],H=x.ya;if("quality"in p){var B=
p.quality;8===B||16===B||24===B||32===B?(k.pn=B,b.yb(u,"SSAO_QUALITY","SSAO_QUALITY_"+B),b.Ic(u),q.Rc(k,v)):h.error('set_ssao_params(): Wrong "quality" value.')}"use_hemisphere"in p&&(k.wp=p.use_hemisphere,b.yb(u,"SSAO_HEMISPHERE",p.use_hemisphere|0),b.Ic(u),q.Rc(k,v));"use_blur_depth"in p&&(n.sp=p.use_blur_depth,b.yb(H,"SSAO_BLUR_DEPTH",p.use_blur_depth|0),b.Ic(H),q.Rc(n,x),t.mm(f.J.wa,n,H));"ssao_white"in p&&(k.ssao_white=p.ssao_white,b.yb(u,"SSAO_WHITE",p.ssao_white|0),b.Ic(u),q.Rc(k,v));"blur_discard_value"in
p&&(n.tp=p.blur_discard_value);"radius_increase"in p&&(k.yp=p.radius_increase);"influence"in p&&(k.xp=p.influence);"dist_factor"in p&&(k.vp=p.dist_factor);if("boolean"==typeof p.ssao_only){f=d.Tb(f,q.Hb);f.ssao_only=p.ssao_only;v=f.Za;u=[];for(x=0;x<v.length;x++)for(H=v[x].La,B=0;B<H.length;B++){var G=H[B].ya;b.yb(G,"SSAO_ONLY",p.ssao_only|0);b.Ic(G);u.push(H[B])}for(x=0;x<u.length;x++)q.Rc(f,u[x])}k.Na=!0;n.Na=!0}}else h.error("No active scene")};a.get_color_correction_params=function(){if(!d.Pa())return h.error("No active scene"),
null;var a=d.get_active(),a=d.Tb(a,q.Iy);if(!a)return null;var b={};b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b};a.set_color_correction_params=function(a){if(d.Pa()){var b=d.get_active();if(b=d.Tb(b,q.Iy))"brightness"in a&&(b.brightness=a.brightness),"contrast"in a&&(b.contrast=a.contrast),"exposure"in a&&(b.exposure=a.exposure),"saturation"in a&&(b.saturation=a.saturation),b.Na=!0}else h.error("No active scene")};a.get_sky_params=function(){if(!d.Pa())return h.error("No active scene"),
!1;var a=d.get_active();return d.get_sky_params(a)};a.set_sky_params=function(a){if(d.Pa()){var b=d.get_active(),c=d.Tb(b,q.re);c&&("color"in a&&c.vl.set(a.color),"rayleigh_brightness"in a&&(c.rayleigh_brightness=a.rayleigh_brightness),"mie_brightness"in a&&(c.mie_brightness=a.mie_brightness),"spot_brightness"in a&&(c.spot_brightness=a.spot_brightness),"scatter_strength"in a&&(c.scatter_strength=a.scatter_strength),"rayleigh_strength"in a&&(c.rayleigh_strength=a.rayleigh_strength),"mie_strength"in
a&&(c.mie_strength=a.mie_strength),"rayleigh_collection_power"in a&&(c.rayleigh_collection_power=a.rayleigh_collection_power),"mie_collection_power"in a&&(c.mie_collection_power=a.mie_collection_power),"mie_distribution"in a&&(c.mie_distribution=a.mie_distribution),c.Na=!0,c.Qo=!0,d.ZW(b,c))}else h.error("No active scene")};a.get_dof_params=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active();return d.Tb(a,q.hq)?d.get_dof_params(a):null};a.set_dof_params=function(a){if(d.Pa()){var b=
d.get_active();d.set_dof_params(b,a)}else h.error("No active scene")};a.get_god_rays_params=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active();return d.Tb(a,q.In)?d.get_god_rays_params(a):null};a.set_god_rays_params=function(a){if(d.Pa()){var b=d.get_active();d.set_god_rays_params(b,a)}else h.error("No active scene")};a.get_bloom_params=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active();return d.Tb(a,q.bq)?d.get_bloom_params(a):null};a.set_bloom_params=
function(a){if(d.Pa()){var b=d.get_active();d.set_bloom_params(b,a)}else h.error("No active scene")};a.get_glow_material_params=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active();return d.Tb(a,q.iq)?d.get_glow_material_params(a):null};a.set_glow_material_params=function(a){if(d.Pa()){var b=d.get_active();d.set_glow_material_params(b,a)}else h.error("No active scene")};a.get_wind_params=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active();return d.get_wind_params(a)};
a.set_wind_params=function(a){if(d.Pa()){var b=d.get_active();x.set_wind_params(b,a)}else h.error("No active scene")};a.get_water_surface_level=function(a,b){if(!d.Pa())return h.error("No active scene"),0;var c=d.get_active();return c.J.td?d.get_water_surface_level(c,a,b):(h.error("No water parameters on the active scene"),0)};a.set_water_params=function(a){if(d.Pa()){var b=d.get_active();d.set_water_params(b,a)}else h.error("No active scene")};a.get_water_mat_params=function(a){if(d.Pa()){var b=
d.get_active();d.get_water_mat_params(b,a)}else h.error("No active scene")};a.update_scene_materials_params=function(){if(d.Pa()){var a=d.get_active();d.OJ(a)}else h.error("No active scene")};a.hide_object=function(a,b){b=b||!1;c(a)?b?d.im(a,!0):d.Lq(a,!0):h.error("show/hide is only supported for dynamic objects.")};a.show_object=function(a,b){b=b||!1;c(a)?b?d.im(a,!1):d.Lq(a,!1):h.error("show/hide is only supported for dynamic objects.")};a.is_hidden=function(a){if(c(a))return d.is_hidden(a);h.error("show/hide is only supported for dynamic meshes/empties and lamps");
return!1};a.is_visible=function(a){return a.A.is_visible};a.check_object_by_name=function(a,b){return x.Vc(x.Oy,a,b|0,!0)?!0:!1};a.check_object_by_dupli_name=function(a,b,c){return x.Vc(x.Ny,a,b,c|0)?!0:!1};a.check_object_by_dupli_name_list=function(a,b){return x.Vc(x.Id,a,b|0)?!0:!1};a.get_all_objects=function(a,b){var c=d.get_active();a||(a="ALL");b||0===b||(b=x.DATA_ID_ALL);return x.pG(c,a,b)};a.get_object_name=function(a){return a?a.Gd:(h.error("Wrong object name"),"")};a.get_object_name_hierarchy=
function(a){if(!a)return h.error("Wrong object name"),null;for(var b=[];a;)b.push(a.Gd),a=v.get_dg_parent(a);return b.reverse()};a.get_object_type=function(a){return a&&a.type?a.type:(h.error("Wrong object"),"UNDEFINED")};a.get_object_children=function(a){return a.ve.slice(0)};a.get_first_character=function(){return x.get_first_character(d.get_active())};a.get_shore_dist=function(a,b){b||0===b||(b=1);if(!d.Pa())return h.error("No active scene"),0;var c=d.get_active();return d.get_shore_dist(c,a,b)};
a.get_cam_water_depth=function(){return d.get_cam_water_depth()};a.get_type_mesh_object=function(a){return v.is_mesh(a)?a.A.type:""};a.get_meta_tags=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active();return d.get_meta_tags(a)};a.get_custom_prop=function(){if(!d.Pa())return h.error("No active scene"),!1;var a=d.get_active();return d.get_custom_prop(a)};a.append_object=function(a,b){if(b)var c=d.Ar(),c=G.keysearch("name",b,c);else c=d.get_active();d.append_object(c,a,!0)};
a.remove_object=function(a){v.ob(a)||v.is_empty(a)||v.is_line(a)?(x.Zo(a,a.A.Xv,!1,!1),p.$H(a),x.Zo(a,!0,!0,!0),x.remove_object(a)):h.error("Can't remove object \""+a.name+'". It must be dynamic and type of MESH or EMPTY.')};a.marker_frame=function(a){var b=d.get_active();if(b.timeline_markers&&a in b.timeline_markers)return d.marker_frame(b,a);h.error('"'+a+'" marker not found.');return 0};a.get_mb_params=function(){var a=d.get_active();return(a=d.Tb(a,q.ai))?{mb_factor:a.mb_factor,mb_decay_threshold:a.mb_decay_threshold}:
null};a.set_mb_params=function(a){var b=d.get_active(),b=d.Bg(b,[q.ai]);if(b.length)for(var c=0;c<b.length;c++){var e=b[c];"number"==typeof a.mb_decay_threshold&&(e.mb_decay_threshold=a.mb_decay_threshold);"number"==typeof a.mb_factor&&(e.mb_factor=a.mb_factor)}else h.error("The motion blur subscene doesn't exist.")};a.can_select_objects=function(){var a=d.get_active();return!!d.Tb(a,q.Ne)}};b4w.module.screen=function(a,u){function e(){}function c(){}function b(a,b,c){function d(){document.fullscreenElement===a||document.webkitFullscreenElement===a||document.mozFullScreenElement===a||document.webkitIsFullScreen||document.msFullscreenElement===a?b():(document.removeEventListener("fullscreenchange",d,!1),document.removeEventListener("webkitfullscreenchange",d,!1),document.removeEventListener("mozfullscreenchange",d,!1),document.removeEventListener("MSFullscreenChange",d,!1),c())}a=a||k.get_container();
b=b||function(){};c=c||function(){};document.addEventListener("fullscreenchange",d,!1);document.addEventListener("webkitfullscreenchange",d,!1);document.addEventListener("mozfullscreenchange",d,!1);document.addEventListener("MSFullscreenChange",d,!1);a.UB=a.UB||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;a.UB?a.UB():q.error("B4W App: request fullscreen method is not supported")}function n(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||
document.msExitFullscreen;"function"!=typeof a&&q.error("B4W App: exit fullscreen method is not supported");a.apply(document)}function g(a){var b=h.get_device_by_type_element(h.DEVICE_HMD);if(b&&!F){var c=h.get_value_param(b,h.HMD_WEBVR_TYPE);if(c&h.HMD_WEBVR1_1){var d=b.ud,e=d.getEyeParameters("left"),d=d.getEyeParameters("right");k.resize(2*Math.max(e.renderWidth,d.renderWidth),Math.max(e.renderHeight,d.renderHeight),!1)}else e=k.get_canvas(),e=Math.max(2*e.height,e.width),k.resize(e,e/2,!1);e=
h.get_vector_param(b,h.kD,z);d=h.get_vector_param(b,h.lD,l);p.set_hmd_fov(a,e,d,!(c&h.HMD_WEBVR1_1));e={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};c&(h.HMD_NON_WEBVR|h.HMD_WEBVR_MOBILE|h.HMD_WEBVR_DESKTOP)&&(e.distortion_coefs=[b.distortion_coefs[0],b.distortion_coefs[1]],e.chromatic_aberration_coefs=[b.chromatic_aberration_coefs[0],b.chromatic_aberration_coefs[1],b.chromatic_aberration_coefs[2],b.chromatic_aberration_coefs[3]],b.En||(b.ci&&b.yi&&b.di?e.base_line_factor=(b.ci-
b.di)/b.yi:b.di||(e.base_line_factor=b.ci/b.yi)),b.Hh&&b.Pl&&!b.En&&(e.inter_lens_factor=b.Hh/b.Pl));r.enabled||G.Dw(.5,1);G.set_hmd_params(e);if(b=h.get_value_param(b,h.HMD_EYE_DISTANCE))c=G.get_active(),a=t.Da(a,c).ja,p.set_eye_distance(a,b);G.oU();F=!0}}var p=u("__camera"),k=u("__container"),x=u("__config"),v=u("__hud"),h=u("__input"),d=u("__main"),t=u("__obj_util"),q=u("__print"),G=u("__scenes"),H=u("__vec4"),z=H.create(),l=H.create(),F=!1,r=x.rm;a.draw_mixer_strip=v.draw_mixer_strip;a.plot_array=
v.plot_array;a.request_fullscreen=b;a.exit_fullscreen=n;a.check_fullscreen=h.check_fullscreen;a.request_fullscreen_hmd=function(a,c,d){if("HMD"!=!x.get("stereo")||"NONE"==x.get("stereo")&&x.get("is_mobile_device")){var f=h.get_device_by_type_element(h.DEVICE_HMD);if(f&&h.get_value_param(f,h.HMD_WEBVR_TYPE)&h.HMD_WEBVR1){var g=f.ud;g&&!g.isPresenting&&(c=c||function(){},d=d||function(){},e=function(){g.isPresenting?c():(window.removeEventListener("vrdisplaypresentchange",e),d())},window.addEventListener("vrdisplaypresentchange",
e,!1),g.capabilities.canPresent?(a=k.get_canvas(),g.requestPresent([{source:a}]).then(function(){},function(){q.error("HMD fullscreen request failed.")})):q.error("HMD fullscreen request failed."))}else b(a,c,d)}};a.exit_fullscreen_hmd=function(){if("HMD"!=!x.get("stereo")||"NONE"==x.get("stereo")&&x.get("is_mobile_device")){var a=h.get_device_by_type_element(h.DEVICE_HMD);a&&h.get_value_param(a,h.HMD_WEBVR_TYPE)&h.HMD_WEBVR1?(a=a.ud)&&a.isPresenting&&(a.exitPresent(),k.resize_to_container(!0)):n()}};
a.check_fullscreen_hmd=function(){var a=h.get_device_by_type_element(h.DEVICE_HMD),b=h.get_value_param(a,h.HMD_WEBVR_TYPE)&h.HMD_WEBVR1;return a&&(b&&a.ud||!b&&h.check_fullscreen())?!0:!1};a.request_split_screen=function(a,b){var d=h.get_device_by_type_element(h.DEVICE_HMD);if(!d)return!1;if(F)return!0;c=b;if(G.Pa()){var e=G.Ok(G.get_active());e&&(d.xg?(g(e),a&&a()):(h.zU(d),d.ys=function(){g(e);a&&a()}))}};a.exit_split_screen=function(){var a=h.get_device_by_type_element(h.DEVICE_HMD);if(!F||!a||
!a.xg)return!1;G.set_hmd_params({enable_hmd_stereo:!1});F=!1;c&&c();G.pU();r.enabled||G.Dw(2,1);k.resize_to_container(!0);return!0};a.shot=function(a,b){a=a||"image/png";d.canvas_data_url(function(b){var c="screenshot."+a.split("/")[1];navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(b,c):(c=window.document.createElement("a"),document.body.appendChild(c),c.style.display="none",c.href=b,c.download="screenshot."+a.split("/")[1],c.click(),document.body.removeChild(c))},a,b||1,!0)}};b4w.module.sfx=function(a,u){var e=u("__obj_util"),c=u("__scenes"),b=u("__sfx"),n=u("__print");a.play=function(a,c,e){b.play(a,c||0,e||0)};a.play_def=function(a){b.play_def(a)};a.is_playing=function(a){return b.is_playing(a)};a.stop=function(a){b.stop(a)};a.pause=function(a){b.KV(a)};a.resume=function(a){b.MV(a)};a.loop_stop=function(a,c,e){b.loop_stop(a,c||0,e||!1)};a.playrate=function(a,c){b.playrate(a,c)};a.get_playrate=function(a){return b.get_playrate(a)};a.cyclic=function(a,c){b.cyclic(a,c)};
a.is_cyclic=function(a){return b.is_cyclic(a)};a.listener_reset_speed=function(){b.listener_stride()};a.listener_stride=function(){b.listener_stride()};a.speaker_reset_speed=function(a){b.speaker_stride(a)};a.speaker_stride=function(a){b.speaker_stride(a)};a.get_volume=function(a){return a&&"object"===typeof a?b.get_volume(a):b.FR()};a.set_volume=function(a,c){a&&"object"===typeof a?b.set_volume(a,c):b.jV(c)};a.mute=function(a,c){a&&"object"===typeof a?b.mute(a,c):b.yT(c)};a.is_muted=function(a){return a&&
"object"===typeof a?b.is_muted(a):b.BS()};a.get_speaker_objects=function(){return b.get_speaker_objects().slice(0)};a.check_active_speakers=b.check_active_speakers;a.set_compressor_params=function(a){b.set_compressor_params(c.get_active(),a)};a.get_compressor_params=function(){return b.get_compressor_params(c.get_active())};a.duck=function(a,c,e){a&&"object"===typeof a?b.duck(a,c,e):b.fQ(c,e)};a.unduck=function(a){a&&"object"===typeof a?b.unduck(a):b.pW()};a.apply_playlist=b.apply_playlist;a.clear_playlist=
b.clear_playlist;a.detect_audio_container=b.detect_audio_container;a.detect_video_container=b.detect_video_container;a.set_positional_params=b.set_positional_params;a.get_positional_params=b.get_positional_params;a.set_filter_params=b.set_filter_params;a.get_filter_params=b.get_filter_params;a.get_filter_freq_response=b.get_filter_freq_response;a.get_duration=function(a){return a&&e.is_speaker(a)?b.get_duration(a):(n.error('Object "'+(a?a.name:void 0)+'" is not a valid speaker'),0)}};b4w.module.textures=function(a,u){var e=u("__print"),c=u("__scenes"),b=u("__textures"),n=u("__obj_util"),g=u("__util"),p=u("__assets");a.play_video=function(a,g){g||(g=0);var k=b.uA(a,g);k?c.get_active().b4w_use_nla&&b.ZC(k)?e.error("NLA texture can't be controlled directly through API."):b.play_video(k):e.error('Texture with name "'+a+'" not found!')};a.pause_video=function(a,g){g||(g=0);var k=b.uA(a,g);k?c.get_active().b4w_use_nla&&b.ZC(k)?e.error("NLA texture can't be controlled directly through API."):
b.pause_video(k):e.error('Texture with name "'+a+'" not found!')};a.reset_video=function(a,g){g||(g=0);var k=b.uA(a,g);k?c.get_active().b4w_use_nla&&b.ZC(k)?e.error("NLA texture can't be controlled directly through API."):b.reset_video(k):e.error('Texture with name "'+a+'" not found!')};a.get_canvas_ctx=function(a,c){if(n.is_mesh(a)){var g=b.gR(a,c);if(g)return g;e.error("Couldn't find canvas texture with this name: "+c)}else e.error("Object must be type of mesh.");return null};a.update_canvas_ctx=
function(a,c){if(!n.is_mesh(a))return e.error("Object must be type of mesh."),!1;var g=b.Av(a,c);if(!g||"CANVAS"!=g.source)return e.error("Couldn't find canvas texture \""+c+'" in object "'+a.name+'".'),!1;b.bX(g);return!0};a.change_image=function(a,c,n,h){e.gd("change_image","replace_image");h=h||function(){};var d=b.Av(a,c);if(d)if(d.Ci)e.error("Changing video textures is forbidden."),h(!1);else{var k=g.Ii(n);d.Rk==k?h(!0):p.enqueue([{id:n,type:p.AT_IMAGE_ELEMENT,url:n,request_method:"GET"}],function(e){e?
(b.change_image(a,d,c,e,n),h(!0)):h(!1)},null,null)}else e.error("Couldn't find texture \""+c+'" in object "'+a.name+'".'),h(!1)};a.replace_image=function(a,c,g,h){h=h||function(){};var d=b.Av(a,c);d?d.Ci?(e.error("Changing video textures is forbidden."),h(!1)):"src"in g?b.change_image(a,d,c,g,g.src):(e.error("Incorrect image."),h(!1)):(e.error("Couldn't find texture \""+c+'" in object "'+a.name+'".'),h(!1))};a.get_texture_names=function(a){if(n.is_mesh(a))return b.get_texture_names(a);e.error("Object must be type of mesh.");
return[]}};b4w.module.time=function(a,u){var e=u("__time");a.set_timeout=e.set_timeout;a.clear_timeout=e.clear_timeout;a.get_timeline=e.get_timeline;a.animate=e.animate;a.clear_animation=e.clear_animation};b4w.module.transform=function(a,u){var e=u("__boundings"),c=u("__obj_util"),b=u("__physics"),n=u("__print"),g=u("__quat"),p=u("__transform"),k=u("__tsr"),x=u("__util"),v=k.create(),h=new Float32Array(3),d=new Float32Array(4);a.set_translation=function(a,d,e,g){c.is_dynamic(a)?(h[0]=d,h[1]=e,h[2]=g,p.set_translation(a,h),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_translation_rel=function(a,d,e,g){c.is_dynamic(a)?(h[0]=d,h[1]=e,h[2]=g,p.set_translation_rel(a,
h),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_translation_v=function(a,d){c.is_dynamic(a)?(p.set_translation(a,d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_translation_rel_v=function(a,d){c.is_dynamic(a)?(p.set_translation_rel(a,d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_translation_obj_rel=function(a,d,e,g,u){c.is_dynamic(a)?(h[0]=d,h[1]=e,h[2]=g,d=k.get_trans_view(u.A.D),
u=k.get_quat_view(u.A.D),x.transform_vec3(h,1,u,d,h),p.set_translation(a,h),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_translation=function(a,b){b||(b=new Float32Array(3));p.get_translation(a,b);return b};a.get_translation_rel=function(a,b){b||(b=new Float32Array(3));p.get_translation_rel(a,b);return b};a.set_rotation=function(a,e,g,h,k){c.is_dynamic(a)?(d[0]=e,d[1]=g,d[2]=h,d[3]=k,p.set_rotation(a,d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.set_rotation_rel=function(a,e,g,h,k){c.is_dynamic(a)?(d[0]=e,d[1]=g,d[2]=h,d[3]=k,p.set_rotation_rel(a,d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_rotation_v=function(a,d){c.is_dynamic(a)?(p.set_rotation(a,d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_rotation_rel_v=function(a,d){c.is_dynamic(a)?(p.set_rotation_rel(a,d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.get_rotation_rel_v=function(a,b){if(c.is_dynamic(a))return p.get_rotation_rel(a,b),b;n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_rotation=function(a,b){b||(b=new Float32Array(4));p.get_rotation(a,b);return b};a.get_rotation_rel=function(a,b){b||(b=new Float32Array(4));p.get_rotation_rel(a,b);return b};a.set_rotation_euler=function(a,d,e,g){c.is_dynamic(a)?(h[0]=d,h[1]=e,h[2]=g,p.set_rotation_euler(a,h),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.get_rotation_euler=function(a,b){b||(b=new Float32Array(3));p.get_rotation_euler(a,b);return b};a.get_rotation_euler_rel=function(a,b){b||(b=new Float32Array(3));p.get_rotation_euler_rel(a,b);return b};a.set_rotation_euler_rel=function(a,d,e,g){c.is_dynamic(a)?(h[0]=d,h[1]=e,h[2]=g,p.set_rotation_euler_rel(a,h),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_rotation_euler_v=function(a,d){c.is_dynamic(a)?(p.set_rotation_euler(a,
d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_rotation_euler_rel_v=function(a,d){c.is_dynamic(a)?(p.set_rotation_euler_rel(a,d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_scale=function(a,b){c.is_dynamic(a)?(p.set_scale(a,b),p.V(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_scale_rel=function(a,b){c.is_dynamic(a)?(p.set_scale_rel(a,b),p.V(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.get_scale=function(a){return p.get_scale(a)};a.get_scale_rel=function(a){return p.get_scale_rel(a)};a.empty_reset_transform=function(a){if("EMPTY"!=a.type)n.error("Wrong object: "+a.name);else{for(var d=0;d<a.ve.length;d++)if(!c.is_dynamic(a.ve[d])){n.error('Wrong object: "'+a.ve[d].name+'" is not dynamic.');return}p.set_translation(a,[0,0,0]);p.set_rotation(a,[0,0,0,1]);p.set_scale(a,1);p.V(a);b.sync_transform(a)}};a.get_object_size=function(a){return c.is_mesh(a)?p.get_object_size(a):(n.error("Wrong object: "+
a.name),0)};a.get_object_center=function(a,b,d){if(!c.is_mesh(a))return n.error("Wrong object: "+a.name),null;d||(d=new Float32Array(3));return p.get_object_center(a,b,d)};a.move_local=function(a,d,e,g){c.is_dynamic(a)?(p.move_local(a,d,e,g),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.rotate_x_local=function(a,e){if(c.is_dynamic(a)){var h=g.setAxisAngle(x.AXIS_X,e,d);p.ZB(a,h);p.V(a);b.sync_transform(a)}else n.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.rotate_y_local=function(a,e){if(c.is_dynamic(a)){var h=g.setAxisAngle(x.AXIS_MY,e,d);p.ZB(a,h);p.V(a);b.sync_transform(a)}else n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.rotate_z_local=function(a,e){if(c.is_dynamic(a)){var h=g.setAxisAngle(x.AXIS_Z,e,d);p.ZB(a,h);p.V(a);b.sync_transform(a)}else n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_object_bounding_box=function(a){return e.nu(a.A.wh)};a.set_tsr=function(a,d){c.is_dynamic(a)?(p.set_tsr(a,d),p.V(a),b.sync_transform(a)):
n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_tsr_rel=function(a,d){c.is_dynamic(a)?(p.set_tsr_rel(a,d),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_tsr=function(a,b){b||(b=new Float32Array(8));p.get_tsr(a,b);return b};a.get_tsr_rel=function(a,b){b||(b=new Float32Array(8));p.get_tsr_rel(a,b);return b};a.distance=function(a,b){return p.distance(a,b)};a.set_matrix=function(a,d){c.is_dynamic(a)?(k.from_mat4(d,v),p.set_tsr(a,v),p.V(a),b.sync_transform(a)):
n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.set_matrix_rel=function(a,d){c.is_dynamic(a)?(k.from_mat4(d,v),p.set_tsr_rel(a,v),p.V(a),b.sync_transform(a)):n.error('Wrong object: "'+a.name+'" is not dynamic.')};a.get_matrix=function(a,b){b||(b=new Float32Array(16));p.get_tsr(a,v);k.to_mat4(v,b);return b};a.get_matrix_rel=function(a,b){b||(b=new Float32Array(16));p.get_tsr_rel(a,v);k.to_mat4(v,b);return b}};b4w.module.tsr=function(a,u){var e=u("__mat4"),c=u("__tsr");a.create=c.create;a.from_values=c.from_values;a.copy=c.copy;a.identity=c.identity;a.set_sep=c.set_sep;a.set_trans=c.set_trans;a.set_scale=c.set_scale;a.set_transcale=c.set_transcale;a.set_quat=c.set_quat;a.get_trans_view=c.get_trans_view;a.get_scale=c.get_scale;a.get_quat_view=c.get_quat_view;a.invert=c.invert;a.to_mat4=function(a,n){n||(n=e.create());c.to_mat4(a,n);return n};a.from_mat4=c.from_mat4;a.multiply=c.multiply;a.transform_vec3=
c.transform_vec3;a.transform_vec3_inv=c.transform_vec3_inv;a.transform_vectors=c.transform_vectors;a.transform_dir_vectors=c.transform_dir_vectors;a.transform_dir_vec3=c.transform_dir_vec3;a.transform_tangents=c.transform_tangents;a.translate=c.translate;a.interpolate=function(a,e,g,p){p||(p=c.create());c.interpolate(a,e,g,p);return p}};b4w.module.util=function(a,u){var e=u("__compat"),c=u("__print"),b=u("__quat"),n=u("__tbn"),g=u("__util"),p=u("__vec3");a.AXIS_X=new Float32Array([1,0,0]);a.AXIS_Y=new Float32Array([0,1,0]);a.AXIS_Z=new Float32Array([0,0,1]);a.AXIS_MX=new Float32Array([-1,0,0]);a.AXIS_MY=new Float32Array([0,-1,0]);a.AXIS_MZ=new Float32Array([0,0,-1]);a.XYX=g.XYX;a.YZY=g.YZY;a.ZXZ=g.ZXZ;a.XZX=g.XZX;a.YXY=g.YXY;a.ZYZ=g.ZYZ;a.XYZ=g.XYZ;a.YZX=g.YZX;a.ZXY=g.ZXY;a.XZY=g.XZY;a.YXZ=g.YXZ;a.ZYX=g.ZYX;a.f32=function(a){return g.f32(a||
0)};a.assert=g.assert;a.keyfind=g.keyfind;a.keysearch=g.keysearch;a.matrix_to_quat=function(a){return g.matrix_to_quat(a)};a.euler_to_quat=function(a,b){b||(b=new Float32Array(4));return g.euler_to_quat(a,b)};a.ordered_angles_to_quat=function(a,c,e){e||(e=b.create());return g.ordered_angles_to_quat(a,c,e)};a.quat_to_ordered_angles=function(a,b,c){c||(c=p.create());return g.quat_to_ordered_angles(a,b,c)};a.quat_to_euler=function(a,b){b||(b=new Float32Array(3));return g.quat_to_euler(a,b)};a.sign=g.sign;
a.clamp=g.clamp;a.quat_to_dir=g.quat_to_dir;a.ground_project_cam_quat=function(a,b){return g.quat_project(a,g.AXIS_MZ,g.AXIS_Z,g.AXIS_Y,b)};a.cam_quat_to_mesh_quat=function(a,b){return g.cam_quat_to_mesh_quat(a,b)};a.quat_project=function(a,b,e,h,d){return 0!=p.dot(e,h)?(c.error("Wrong in-plane direction"),null):g.quat_project(a,b,e,h,d)};a.hash_code=g.hash_code;a.smooth=g.smooth;a.smooth_v=g.smooth_v;a.is_vector=g.is_vector;a.correct_cam_quat_up=g.correct_cam_quat_up;a.quat_to_angle_axis=g.quat_to_angle_axis;
a.random_from_array=g.random_from_array;a.horizontal_direction=g.horizontal_direction;a.angle_wrap_0_2pi=g.angle_wrap_0_2pi;a.angle_wrap_periodic=g.angle_wrap_periodic;a.smooth_step=g.smooth_step;a.lerp=g.lerp;a.deg_to_rad=g.deg_to_rad;a.rad_to_deg=g.rad_to_deg;a.dir_to_quat=g.dir_to_quat;a.is_ie11=e.is_ie11;a.gen_tbn_quats=n.get;a.trunc=g.trunc};b4w.module.version=function(a,u){var e=u("__version");a.version=e.version;a.version_str=e.version_str;a.type=e.type;a.date=e.date;a.date_str=e.date_str;a.get_build_version=e.get_build_version};b4w.module.objects=function(a,u){var e=u("__geometry"),c=u("__objects"),b=u("__batch"),n=u("__obj_util"),g=u("__print"),p=u("__scenes"),k=u("__util");a.get_meta_tags=function(a){if(a)return c.get_meta_tags(a)};a.get_custom_prop=function(a){if(a)return c.get_custom_prop(a)};a.copy=function(a,b,h){return n.is_mesh(a)?n.is_dynamic(a)?e.Dj(a)||e.check_shape_keys(a)||!h?-1==c.Sb(p.get_active(),"MESH",c.DATA_ID_ALL).indexOf(a)?(g.error('object "'+a.name+'" does not belong to the active scene.'),!1):c.copy(a,
b||"",h):(g.error('object "'+a.name+'" has not dynamic geometry for deep copying.'),!1):(g.error('object "'+a.name+'" is not dynamic.'),!1):(g.error('object "'+a.name+'" is not of type "MESH".'),!1)};a.set_nodemat_value=function(a,e,h){g.gd("set_nodemat_value","material.set_nodemat_value");if(n.ob(a)){var d=e[0],k=b.hb(a,d,"MAIN");if(null===k)return g.error('Material "'+d+'" was not found in the object "'+a.name+'".'),null;k=c.Dr(k.Gf,e,1);if(null===k)return g.error('Value node "'+e[e.length-1]+'" was not found in the object "'+
a.name+'".'),null;c.set_nodemat_value(a,d,k,h)}else g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.get_nodemat_value=function(a,e){g.gd("get_nodemat_value","material.get_nodemat_value");if(!n.ob(a))return g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),0;var h=e[0],d=b.hb(a,h,"MAIN");if(null===d)return g.error('Material "'+h+'" was not found in the object "'+a.name+'".'),0;h=c.Dr(d.Gf,e,1);return null===h?(g.error('Value node "'+
e[e.length-1]+'" was not found in the object "'+a.name+'".'),0):c.get_nodemat_value(d,h)};a.set_nodemat_rgb=function(a,e,h,d,k){g.gd("set_nodemat_rgb","material.set_nodemat_rgb");if(n.ob(a)){var p=e[0],t=b.hb(a,p,"MAIN");null===t?g.error('Material "'+p+'" was not found in the object "'+a.name+'".'):(t=c.Cr(t.Ff,e,1),null===t?g.error('RGB node "'+e[e.length-1]+'" was not found in the object "'+a.name+'".'):c.set_nodemat_rgb(a,p,t,h,d,k))}else g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};
a.get_nodemat_rgb=function(a,e,h){g.gd("get_nodemat_rgb","material.get_nodemat_rgb");if(!n.ob(a))return g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),null;var d=e[0],k=b.hb(a,d,"MAIN");if(null===k)return g.error('Material "'+d+'" was not found in the object "'+a.name+'".'),null;d=c.Cr(k.Ff,e);if(null===d)return g.error('RGB node "'+e[e.length-1]+'" was not found in the object "'+a.name+'".'),null;h||(h=new Float32Array(3));return c.get_nodemat_rgb(k,d,h)};a.update_boundings=
function(a){n.is_mesh(a)?e.Dj(a)||e.check_shape_keys(a)?c.update_boundings(a):g.error('object "'+a.name+'" has not dynamic geometry.'):g.error('The type of the object "'+a.name+'" is not "MESH".')};a.get_parent=n.get_parent;a.get_dg_parent=n.get_dg_parent;a.is_mesh=n.is_mesh;a.is_armature=n.is_armature;a.is_speaker=n.is_speaker;a.is_camera=n.is_camera;a.is_lamp=n.is_lamp;a.is_empty=n.is_empty;a.is_line=n.is_line;a.is_world=n.is_world;a.get_selectable_objects=function(){return c.get_selectable_objects()};
a.get_outlining_objects=function(){return c.get_outlining_objects()};a.is_dynamic=n.is_dynamic;a.set_wind_bending_params=function(a,e){if(n.ob(a)){var h=a.A;if(h.Me){if("number"==typeof e.angle){var d=b.rK(k.deg_to_rad(e.angle),h.ij,h.D[3]);h.Tf=d}"number"==typeof e.main_frequency&&(h.Uf=e.main_frequency);"number"==typeof e.detail_frequency&&(h.yf=e.detail_frequency);"number"==typeof e.detail_amplitude&&(h.xf=e.detail_amplitude);"number"==typeof e.branch_amplitude&&(h.sf=e.branch_amplitude);c.dV(a)}else g.error('The "'+
a.name+"\" object doesn't have wind bending parameters.")}else g.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.get_wind_bending_params=function(a){a=a.A;if(!a.Me)return null;var c={},e=k.rad_to_deg(b.zX(a.Tf,a.ij,a.D[3]));c.angle=e;c.main_frequency=a.Uf;c.detail_frequency=a.yf;c.detail_amplitude=a.xf;c.branch_amplitude=a.sf;return c};a.create_line=function(a){return c.create_line(a)};a.hide_all_by_data_id=function(a){a=c.get_all_objects("ALL",a);for(var b=0;b<
a.length;b++)p.im(a[b],!0)};a.show_all_by_data_id=function(a){a=c.get_all_objects("ALL",a);for(var b=0;b<a.length;b++)p.im(a[b],!1)}};b4w.module.main=function(a,u){function e(){}function c(){}function b(){}function n(){window.performance||(A.log("Apply performance workaround"),window.performance={});var a=Date.now();window.performance.now||(A.log("Apply performance.now() workaround"),window.performance.now=function(){return Date.now()-a});S.KI(0)}function g(a,b){for(var c=null,d=b?da:wa,e=0;e<d.length;e++){var f=d[e];try{c=a.getContext(f,fa)}catch(la){}if(c)break}c&&z.YP(c);return c}function p(a,b,e){a.addEventListener("webglcontextlost",
function(a){a.preventDefault();A.error("WebGL context lost");x()},!1);w.yg(e);var g=w.get_renderer_info();g&&A.log("%cRENDERER INFO:","color: #00a",e.getParameter(g.UNMASKED_VENDOR_WEBGL)+", "+e.getParameter(g.UNMASKED_RENDERER_WEBGL));X.yg(e);f.yg(e);O.yg(e);R.yg(e);l.yg(e);E.yg(e);r.xV(a);l.init(a,b);m.MI(a.width,a.height,1);K.init();y.init();c=d();h()}function k(){e=function(){}}function x(){v()||(ma=performance.now()/1E3,K.pause(),C.pause(),O.pause(),t.pause())}function v(){return aa<ma}function h(){var a=
"HMD"===pa.stereo&&y.UR();a?a.requestAnimationFrame(h):Ga(h);var b=performance.now()/1E3;Z||(Z=b);var d=b-Z;if(!(d<1/pa.max_fps)){for(var f=S.get_timeline(),g=0;g<ea.length;g++)ea[g](f,d);v()||(aa>Z&&(d-=aa-Math.max(ma,Z)),S.ZU(d),f+=d,S.KI(f),E.update(),G.update(),r.update(),g=d,r.is_primary_loaded()&&(D.reset(),ga.update(g),B.update(f,g),N.update(f,g),K.update(f,g),g&&q.update(g),r.is_primary_loaded()&&(C.update(f,g),r.is_primary_loaded()&&(y.update(f),F.update(f,g),r.is_primary_loaded()&&(t.update(!1),
J.update(f,g),ia.update(),e(g,f),r.is_primary_loaded()&&(m.update(f,g),t.RJ(),M.frame()))))),c(d));Z=b;a&&a.isPresenting&&a.submitFrame()}}function d(){var a=60,c=0,d=pa.SF,e=pa.HQ;return function(f){f<1/pa.max_fps||(a=sa.smooth(1/f,a,f,d),f=C.xR(),(c=(c+1)%e)||b(Math.round(a),f))}}var t=u("__anchors"),q=u("__animation"),G=u("__assets"),H=u("__config"),z=u("__compat"),l=u("__container"),F=u("__controls"),r=u("__data"),E=u("__debug"),w=u("__extensions"),f=u("__geometry"),y=u("__input"),D=u("__hud"),
N=u("__nla"),M=u("__main"),B=u("__logic_nodes"),J=u("__objects"),C=u("__physics"),A=u("__print"),X=u("__renderer"),m=u("__scenes"),K=u("__sfx"),R=u("__shaders"),O=u("__textures"),S=u("__time"),ga=u("__transform"),sa=u("__util"),U=u("__version"),ia=u("__particles"),fa=H.context,pa=H.L,Z=0,ma=0,aa=0,ea=[],wa=["webgl","experimental-webgl"],da=["webgl2","experimental-webgl2"],W=null,Ga=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/pa.max_fps)}}();a.init=function(a,b){A.uV(pa.console_verbose);var c=U.version_str()+" "+U.type()+" ("+U.date_str()+")";A.log("%cINIT ENGINE","color: #00a",c);A.log("%cUSER AGENT:","color: #00a",navigator.userAgent);if(!window.WebGLRenderingContext)return null;n();b?D.init(b):(H.L.show_hud_debug_info=!1,H.ka.yw=!1);z.cN();z.wz("Chrome")||z.wz("Firefox")||(pa.gb=!1);c=g(a,pa.gb);!c&&pa.gb&&(pa.gb=
!1,c=g(a,!1));if(!c)return null;A.log("%cINIT WEBGL "+(pa.gb?"2":"1"),"color: #00a");W=c;p(a,b,c);H.apply_quality();z.DI(c,!0);H.kV();R.$S();pa.Rv&&(a.style["touch-action"]="none");A.log("%cSET PRECISION:","color: #00a",pa.precision);return c};a.set_fps_callback=function(a){b=a};a.clear_fps_callback=function(){b=function(){}};a.set_render_callback=function(a){e=a};a.clear_render_callback=function(){k()};a.pause=x;a.resume=function(){v()&&(aa=performance.now()/1E3,K.resume(),C.resume(),O.play(!0),
t.resume())};a.is_paused=v;a.reset=function(){r.unload(0);r.reset();w.reset();X.reset();f.reset();O.AU();R.reset();E.reset();l.reset();r.reset();l.reset();S.reset();K.reset();aa=ma=Z=0;b=function(){};c=function(){};e=function(){};ea.length=0;W=null};a.canvas_data_url=function(a,b,c,d){M.canvas_data_url(a,b,c,d)};a.detect_mobile=function(){return z.detect_mobile()};a.append_loop_cb=function(a){for(var b=0;b<ea.length;b++)if(ea[b]==a)return;ea.push(a)};a.remove_loop_cb=function(a){for(var b=0;b<ea.length;b++)if(ea[b]==
a){ea.splice(b,1);break}};a.get_renderer_info=function(){var a=w.get_renderer_info();return a?{vendor:W.getParameter(a.UNMASKED_VENDOR_WEBGL),renderer:W.getParameter(a.UNMASKED_RENDERER_WEBGL)}:null}};b4w.module.nla=function(a,u){var e=u("__nla"),c=u("__time"),b=u("__print"),n=u("__util");a.set_frame=function(a){a=n.clamp(a,e.get_frame_start(),e.get_frame_end());e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):e.set_frame(a,c.get_timeline())};a.get_frame=function(){return e.get_frame(c.get_timeline())};a.stop=function(){e.check_logic_nodes()&&b.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");e.uC()};a.play=function(a){e.check_logic_nodes()&&
b.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");e.ZH(a)};a.is_play=function(){return e.is_play()};a.get_frame_start=function(){return e.get_frame_start()};a.get_frame_end=function(){return e.get_frame_end()};a.check_nla=function(){return e.check_nla()};a.check_logic_nodes=function(){return e.check_logic_nodes()};a.set_range=function(a,c){e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):(c=parseFloat(c)||e.get_frame_end(),a=parseFloat(a)||
e.get_frame_end(),c=n.clamp(c,e.get_frame_start(),e.get_frame_end()),a=n.clamp(a,e.get_frame_start(),c),e.set_range(a,c))};a.reset_range=function(){e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):e.reset_range()};a.set_cyclic=function(a){e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):e.set_cyclic(a)};a.clear_callback=function(){e.check_logic_nodes()?b.error("The active scene is using the Logic Editor."):e.clear_callback()}};b4w.module.app=function(a,u){function e(){var a=M.is_paused();document.addEventListener("visibilitychange",function(){document.hidden?(a=M.is_paused(),M.pause()):a||M.resume()},!1)}function c(){var a=0,b=w.get_container(),c=M.is_paused(),d=!0;M.append_loop_cb(function(){if(!(a%10)){var e=b.getBoundingClientRect();e.top>window.innerHeight||0>e.bottom?(d&&(c=M.is_paused()),M.pause(),d=!1):c||d||(M.resume(),d=!0)}a++})}function b(a,b,c,d){var e=document.createElement("canvas"),f=document.getElementById(a);
f||(J.error('Warning: canvas container "'+a+'" not found, appending to body'),f=document.body);e.style.position="absolute";e.style.left=0;e.style.top=0;e.style.width=f.offsetWidth+"px";e.style.height=f.offsetHeight+"px";e.width=f.offsetWidth*window.devicePixelRatio;e.height=f.offsetHeight*window.devicePixelRatio;b?(a=document.createElement("canvas"),a.style.position="absolute",e.style.left=0,e.style.top=0,a.style.pointerEvents="none"):a=null;f.appendChild(e);if(!M.init(e,a))return c&&z("Browser could not initialize WebGL",
"For more info visit","https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup",d),!1;a&&w.insert_to_container(a,"LAST");return!0}function n(a,b){a?(b&&(document.getElementById(b).style.display="block"),O=document.getElementById(a)):(O=document.createElement("div"),O.innerHTML=0,O.style.cssText="position:absolute;font-family: Arial, sans-serif;top: 20px;right: 20px;text-shadow: 0px 0px 6px #000;font-size: 40px;line-height: 50px;font-weight: bold;color: #fff;",w.insert_to_container(O,
"JUST_AFTER_CANVAS"))}function g(a,b){var c=String(a);b&&(c+="/"+String(b));O.innerHTML=c}function p(a){a=document.getElementById(a);var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);return b}function k(a,b,c){var d=Math.max(F.hover_get_distance(a),1),e=X.get_rotation(a,ea);b=m.quat_to_dir(e,b,ma);b[2]=0;K.normalize(b,b);K.scale(b,d*c,b);c=X.get_translation(a,aa);K.add(c,b,c);F.set_translation(a,c)}function x(a,b){var c=F.hover_get_vertical_limits(a,da);if(c.up!=c.down){var d=F.get_camera_angles(a,
Z)[1],c=(c.down-d)/(c.down-c.up),d=F.hover_get_distance_limits(a,da),c=Math.max(c,2/d.max);F.rotate_camera(a,0,c*b)}}function v(a,b,c,d){X.move_local(a,5*b,5*c,5*d)}function h(a,b,c){var d=F.target_get_distance(a),e=Math.abs(b);c=Math.pow(e*c,1-Math.pow(e*c,.15));X.move_local(a,0,0,0>b?.001<d?-d*c:0:c/(1-c)*d)}function d(a,b,c,d){for(var e=c*b;0<a;--a)c+=e,d+=e,e=c*b;return d}function t(a,b,c,e,f){f?(f=F.target_get_pivot(a,ma),a=F.get_translation(a),a=K.dist(f,a)+e,e=0<b?d(b,-c,a,e):d(-b,c/(1-c),
a,e)):e-=2*b*c;return e}function q(a,b,c,d,e,g){function l(a,b,c,d){if(1==c){F.get_velocities(a,H);var e=J?.003*H.trans:.003*H.rot;c=f.get_sensor_value(a,b,0);f.get_sensor_payload(a,b,0).gesture===f.PL_SINGLE_TOUCH_MOVE?(Da+="X"==d?-c*e:0,Ya+="Y"==d?-c*e:0):f.get_sensor_payload(a,b,0).gesture===f.PL_MULTITOUCH_MOVE_PAN&&(a=J?.003*H.rot:7.5E-4*H.trans,Cb+="X"==d?-c*a:0,Gb+="Y"==d?-c*a:0)}}function n(a,b,c,d){if(1==c){c=f.get_sensor_value(a,b,1);F.get_velocities(a,H);if(J)e=.003*H.trans,g=7.5E-4*H.rot;
else var e=.003*H.rot,g=7.5E-4*H.trans;if(1===f.get_sensor_payload(a,b,0).which)ka+="X"==d?-c*e:0,hc+="Y"==d?-c*e:0;else if(2===f.get_sensor_payload(a,b,0).which||3===f.get_sensor_payload(a,b,0).which)qa+="X"==d?-c*g:0,Q+="Y"==d?-c*g:0}}function p(a){return a[0]&&(a[1]||a[2]||-.1>a[3])}function q(a){return a[0]&&(a[1]||a[2]||.1<a[3])}function r(a){return a[0]&&(a[1]||-.1>a[2])}function u(a){return a[0]&&(a[1]||.1<a[2])}function w(a){return a[0]&&(a[1]||a[2]||a[3])}function C(a,b,c){if(1==c)switch(c=
f.get_sensor_value(a,b,0),F.get_velocities(a,H),b){case "FORWARD":z?M[0]=1:J?(b=F.get_camera_angles(a,Z)[1],b=Math.abs(b)>=Math.PI/4?m.AXIS_Y:m.AXIS_MZ,k(a,b,.5*H.trans*c)):D?h(a,-H.zoom,c):v(a,0,0,-H.trans*c);break;case "BACKWARD":z?M[0]=-1:J?(b=F.get_camera_angles(a,Z)[1],b=Math.abs(b)>=Math.PI/4?m.AXIS_MY:m.AXIS_Z,k(a,b,.5*H.trans*c)):D?h(a,H.zoom,c):v(a,0,0,H.trans*c);break;case "UP":J?x(a,30*-H.zoom*c):z||v(a,0,H.trans*c,0);break;case "DOWN":J?x(a,30*H.zoom*c):z||v(a,0,-H.trans*c,0);break;case "LEFT":z?
M[1]=1:J?k(a,m.AXIS_MX,.5*H.trans*c):v(a,-H.trans*c,0,0);break;case "RIGHT":z?M[1]=-1:J?k(a,m.AXIS_X,.5*H.trans*c):v(a,H.trans*c,0,0);break;case "ROT_LEFT":D?F.rotate_camera(a,.75*-H.rot*c,0):F.rotate_camera(a,.75*H.rot*c,0);break;case "ROT_RIGHT":D?F.rotate_camera(a,.75*H.rot*c,0):F.rotate_camera(a,.75*-H.rot*c,0);break;case "ROT_UP":D?F.rotate_camera(a,0,.75*-H.rot*c):F.rotate_camera(a,0,.75*H.rot*c);break;case "ROT_DOWN":D?F.rotate_camera(a,0,.75*H.rot*c):F.rotate_camera(a,0,.75*-H.rot*c)}else switch(b){case "FORWARD":case "BACKWARD":z&&
(M[0]=0);break;case "LEFT":case "RIGHT":z&&(M[1]=0)}z&&(B.set_character_move_dir(z,M[0],M[1]),a=F.get_camera_angles_char(a,pa),B.set_character_rotation_h(z,a[0]),B.set_character_vert_move_dir_angle(z,a[1]))}S=a;ga=b;sa=c;U=d;ia=e;fa=g;var y=A.get_active_camera();G(y);var D=!1,z=null,J=!1;switch(F.get_move_style(y)){case F.MS_TARGET_CONTROLS:D=!a;break;case F.MS_EYE_CONTROLS:z=A.get_first_character();break;case F.MS_STATIC:return;case F.MS_HOVER_CONTROLS:J=!0}var H=F.get_velocities(y,wa);a=f.create_elapsed_sensor();
if(B.has_simulated_physics(y)){var O=f.create_collision_sensor(y,null,!0);f.create_sensor_manifold(y,"CAMERA_COLLISION",f.CT_POSITIVE,[O],null,function(a,b){var c=f.get_sensor_payload(a,b,0).coll_dist;if(0>c){var d=f.get_sensor_payload(a,b,0).coll_norm,e=ma;K.scale(d,-.25*c,e);c=X.get_translation(a,aa);K.add(c,e,c);X.set_translation_v(a,c)}})}if(z){var O=X.get_translation(y),P=X.get_rotation(y),P=m.cam_quat_to_mesh_quat(P);O[2]-=.5;B.set_transform(z,O,P);E.append_stiff_trans(y,z,[0,0,.5]);var M=new Float32Array(2),
W=!0;B.set_character_move_type(z,B.CM_FLY);f.create_kb_sensor_manifold(y,"TOGGLE_CHAR_MOVE_TYPE",f.CT_SHOT,f.KEY_C,function(){W=!W;B.set_character_move_type(z,W?B.CM_FLY:B.CM_WALK)})}var ba,Ga,L,ja,ua,da,ea,Za,za;g?O=P=da=ea=Za=za=f.create_custom_sensor(0):(za=N.check_enable_gamepad_indices(),P=za.length?za[za.length-1]:0,O=f.create_gamepad_btn_sensor(N.GMPD_BUTTON_6,P),P=f.create_gamepad_btn_sensor(N.GMPD_BUTTON_7,P),da=f.create_gamepad_axis_sensor(N.GMPD_AXIS_0,za),ea=f.create_gamepad_axis_sensor(N.GMPD_AXIS_1,
za),Za=f.create_gamepad_axis_sensor(N.GMPD_AXIS_2,za),za=f.create_gamepad_axis_sensor(N.GMPD_AXIS_3,za));b?b=ba=Ga=L=ja=ua=f.create_custom_sensor(0):(b=f.create_keyboard_sensor(f.KEY_W),ba=f.create_keyboard_sensor(f.KEY_S),Ga=f.create_keyboard_sensor(f.KEY_A),L=f.create_keyboard_sensor(f.KEY_D),ja=f.create_keyboard_sensor(f.KEY_R),ua=f.create_keyboard_sensor(f.KEY_F));var Pa=f.create_keyboard_sensor(f.KEY_UP),Ra=f.create_keyboard_sensor(f.KEY_DOWN),La=f.create_keyboard_sensor(f.KEY_LEFT),Oa=f.create_keyboard_sensor(f.KEY_RIGHT);
J||(f.create_sensor_manifold(y,"FORWARD",f.CT_CONTINUOUS,[a,b,ea],r,C),f.create_sensor_manifold(y,"BACKWARD",f.CT_CONTINUOUS,[a,ba,ea],u,C));D?(f.create_sensor_manifold(y,"ROT_UP",f.CT_CONTINUOUS,[a,Pa,ja,za],p,C),f.create_sensor_manifold(y,"ROT_DOWN",f.CT_CONTINUOUS,[a,Ra,ua,za],q,C),f.create_sensor_manifold(y,"ROT_LEFT",f.CT_CONTINUOUS,[a,La,Ga,Za],p,C),f.create_sensor_manifold(y,"ROT_RIGHT",f.CT_CONTINUOUS,[a,Oa,L,Za],q,C)):J?(f.create_sensor_manifold(y,"LEFT",f.CT_CONTINUOUS,[a,La,Ga,da],p,C),
f.create_sensor_manifold(y,"RIGHT",f.CT_CONTINUOUS,[a,Oa,L,da],q,C),f.create_sensor_manifold(y,"FORWARD",f.CT_CONTINUOUS,[a,Pa,b,ea],p,C),f.create_sensor_manifold(y,"BACKWARD",f.CT_CONTINUOUS,[a,Ra,ba,ea],q,C),f.create_sensor_manifold(y,"UP",f.CT_CONTINUOUS,[a,ua,za],u,C),f.create_sensor_manifold(y,"DOWN",f.CT_CONTINUOUS,[a,ja,za],r,C)):(f.create_sensor_manifold(y,"UP",f.CT_CONTINUOUS,[a,ja,O],w,C),f.create_sensor_manifold(y,"DOWN",f.CT_CONTINUOUS,[a,ua,P],w,C),f.create_sensor_manifold(y,"LEFT",f.CT_CONTINUOUS,
[a,Ga,da],r,C),f.create_sensor_manifold(y,"RIGHT",f.CT_CONTINUOUS,[a,L,da],u,C),f.create_sensor_manifold(y,"ROT_UP",f.CT_CONTINUOUS,[a,Pa,za],r,C),f.create_sensor_manifold(y,"ROT_DOWN",f.CT_CONTINUOUS,[a,Ra,za],u,C),f.create_sensor_manifold(y,"ROT_LEFT",f.CT_CONTINUOUS,[a,La,Za],r,C),f.create_sensor_manifold(y,"ROT_RIGHT",f.CT_CONTINUOUS,[a,Oa,Za],u,C));if(!c){var Sa=0;c=f.create_mouse_wheel_sensor(d);var Ja=0;ea=f.create_touch_zoom_sensor(d);f.create_sensor_manifold(y,"MOUSE_WHEEL",f.CT_LEVEL,[c],
null,function(a,b,c){1==c&&(b=f.get_sensor_value(a,b,0),F.get_velocities(a,H),D||J?Sa=t(a,b,H.zoom,Sa,D):(H.trans*=1+b*H.zoom,F.set_velocities(a,H)))});f.create_sensor_manifold(y,"TOUCH_ZOOM",f.CT_LEVEL,[ea],null,function(a,b,c){1==c&&(c=f.get_sensor_value(a,b,0),F.get_velocities(a,H),f.get_sensor_payload(a,b,0)===f.PL_MULTITOUCH_MOVE_ZOOM&&(Ja=t(a,c,.03*H.zoom,Ja,D)))});f.create_sensor_manifold(y,"ZOOM_INTERPOL",f.CT_POSITIVE,[a],null,function(a,b){if(D||J)if(1E-5<Math.abs(Sa)||1E-5<Math.abs(Ja)){var c=
f.get_sensor_value(a,b,0),d=m.smooth(Sa,0,c,.1*R);Sa-=d;c=m.smooth(Ja,0,c,.15*R);Ja-=c;J?x(a,-(d+c)):(d=F.target_get_distance(a)+d+c,d=Math.max(d,.001),F.target_set_distance(a,d))}else Ja=Sa=0})}var ka=0,hc=0,qa=0,Q=0,Ha=0,$a=0;g||(g=function(a){F.get_velocities(a,H);Ha+=.002*H.trans},c=function(a){F.get_velocities(a,H);$a+=.05*H.zoom},ea=function(a){F.get_velocities(a,H);Ha-=.002*H.trans},za=function(a){F.get_velocities(a,H);$a-=.05*H.zoom},D?(f.create_sensor_manifold(y,"GMPD_PAN_Y_POS",f.CT_CONTINUOUS,
[O],null,c),f.create_sensor_manifold(y,"GMPD_PAN_Y_NEG",f.CT_CONTINUOUS,[P],null,za),f.create_sensor_manifold(y,"GMPD_PAN_X_POS",f.CT_CONTINUOUS,[da],function(a){return-.1>a[0]},ea),f.create_sensor_manifold(y,"GMPD_PAN_X_NEG",f.CT_CONTINUOUS,[da],function(a){return.1<a[0]},g)):J&&(f.create_sensor_manifold(y,"GMPD_PAN_X_POS",f.CT_CONTINUOUS,[Za],function(a){return-.1>a[0]},ea),f.create_sensor_manifold(y,"GMPD_PAN_X_NEG",f.CT_CONTINUOUS,[Za],function(a){return.1<a[0]},g)));if(e){e=f.create_mouse_move_sensor("X",
window);g=f.create_mouse_move_sensor("Y",window);O=f.create_mouse_click_sensor(d);c=f.create_mouse_click_sensor(window);var Xa=!1,P=function(a){a[2]?Xa=!0:a[0]||(Xa=!1);return Xa&&a[0]};f.create_sensor_manifold(y,"MOUSE_X",f.CT_POSITIVE,[c,e,O],P,n,"X");f.create_sensor_manifold(y,"MOUSE_Y",f.CT_POSITIVE,[c,g,O],P,n,"Y");e=N.get_device_by_type_element(N.DEVICE_MOUSE,window);N.switch_prevent_default(e,!1)}else e=f.create_mouse_move_sensor("X",d),g=f.create_mouse_move_sensor("Y",d),O=f.create_mouse_click_sensor(d),
f.create_sensor_manifold(y,"MOUSE_X",f.CT_POSITIVE,[O,e],null,n,"X"),f.create_sensor_manifold(y,"MOUSE_Y",f.CT_POSITIVE,[O,g],null,n,"Y");var Da=0,Ya=0,Cb=0,Gb=0;e=f.create_touch_move_sensor("X",d);d=f.create_touch_move_sensor("Y",d);f.create_sensor_manifold(y,"TOUCH_X",f.CT_POSITIVE,[e],null,l,"X");f.create_sensor_manifold(y,"TOUCH_Y",f.CT_POSITIVE,[d],null,l,"Y");f.create_sensor_manifold(y,"ROT_TRANS_INTERPOL",f.CT_POSITIVE,[a],null,function(a,b){if(1E-5<Math.abs(ka)||1E-5<Math.abs(hc)||1E-5<Math.abs(Da)||
1E-5<Math.abs(Ya)||1E-5<Math.abs(qa)||1E-5<Math.abs(Q)||1E-5<Math.abs(Cb)||1E-5<Math.abs(Gb)||1E-5<Math.abs(Ha)||1E-5<Math.abs($a)){var c=f.get_sensor_value(a,b,0),d=m.smooth(ka,0,c,.08*R),e=m.smooth(hc,0,c,.08*R);ka-=d;hc-=e;var g=m.smooth(Da,0,c,.12*R),h=m.smooth(Ya,0,c,.12*R);Da-=g;Ya-=h;var l=m.smooth(qa,0,c,.08*R),n=m.smooth(Q,0,c,.08*R);qa-=l;Q-=n;var p=m.smooth(Cb,0,c,.12*R),q=m.smooth(Gb,0,c,.12*R);Cb-=p;Gb-=q;var r=m.smooth(Ha,0,c,.08*R),c=m.smooth($a,0,c,.08*R);Ha-=r;$a-=c;D?(F.rotate_camera(a,
d+g,e+h),e=F.target_get_distance(a),F.target_pan_pivot(a,e*(l+p+r),e*(n+q+c))):J?(d+g&&k(a,m.AXIS_X,.2*(d+g)),e+h&&(n=F.get_camera_angles(a,Z)[1],k(a,Math.abs(n)>Math.PI/4?m.AXIS_MY:m.AXIS_Z,.2*(e+h))),F.rotate_camera(a,l+p+r,0)):(F.rotate_camera(a,.5*(d+g),.5*(e+h)),z&&(l=F.get_camera_angles_char(a,pa),B.set_character_rotation_h(z,l[0]),B.set_character_vert_move_dir_angle(z,l[1])))}});f.create_kb_sensor_manifold(y,"DEC_STEREO_DIST",f.CT_SHOT,f.KEY_LEFT_SQ_BRACKET,function(a){var b=F.get_stereo_distance(a);
F.set_stereo_distance(a,.9*b)});f.create_kb_sensor_manifold(y,"INC_STEREO_DIST",f.CT_SHOT,f.KEY_RIGHT_SQ_BRACKET,function(a){var b=F.get_stereo_distance(a);F.set_stereo_distance(a,1.1*b)})}function G(a){var b=F.get_move_style(a),c=f.create_callback_sensor(function(){var c=F.get_move_style(a),d=c!=b;b=c;return d});f.create_sensor_manifold(a,"CHANGE_MOVE_STYLE",f.CT_POSITIVE,[c],null,function(){H();q(S,ga,sa,U,ia,fa)})}function H(){var a=A.get_active_camera();f.check_sensor_manifold(a,"TOGGLE_CHAR_MOVE_TYPE")&&
A.get_first_character()&&E.remove(a);for(var b="FORWARD BACKWARD ROT_UP ROT_DOWN ROT_LEFT ROT_RIGHT UP DOWN LEFT RIGHT MOUSE_WHEEL TOUCH_ZOOM ZOOM_INTERPOL MOUSE_X MOUSE_Y TOUCH_X TOUCH_Y ROT_TRANS_INTERPOL CHANGE_MOVE_STYLE TOGGLE_CHAR_MOVE_TYPE".split(" "),c=0;c<b.length;c++)f.remove_sensor_manifold(a,b[c])}function z(a,b,c,d){var e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div");if(d)for(var h=0;h<d.length;h++){var k=document.getElementById(d[h]);k&&
k.parentNode.removeChild(k)}e.style.cssText="z-index:10;width:100%;height:auto;position:absolute;top:50%;margin-top:150px;text-align:center;";f.style.cssText="color:#fff;font-size:24px;";g.style.cssText="color:#fff;font-size:20px;";f.innerHTML=a;g.innerHTML=b+'   <a style="color:#fff;font-size:20px;width:100%;" href="'+c+'">'+c.replace("https://www.","")+"</a>";e.appendChild(f);e.appendChild(g);document.body.appendChild(e)}function l(a,b,c,d,e){function f(){var h=performance.now()-g;e(b+h*(c-b)/d);
(h>=d||!a.parentNode)&&M.remove_loop_cb(f)}var g=performance.now();M.append_loop_cb(f)}var F=u("camera"),r=u("config"),E=u("constraints"),w=u("container"),f=u("controls"),y=u("data"),D=u("debug"),N=u("input"),M=u("main"),B=u("physics"),J=u("print"),C=u("screen"),A=u("scenes"),X=u("transform"),m=u("util"),K=u("vec3"),R=1,O=null,S=!1,ga=!1,sa=!1,U=null,ia=!1,fa=!1,pa=new Float32Array(2),Z=new Float32Array(2),ma=new Float32Array(3),aa=new Float32Array(3),ea=new Float32Array(4),wa={},da={};a.init=function(a){function d(){var a=
b(l,H,C,p),d=w.get_canvas();if(a){var f=w.get_container();w.resize_to_container();z&&(n(q,u),M.set_fps_callback(g));B&&(e(),c());t&&M.append_loop_cb(function(){f.style.height=f.clientWidth/t+"px"});m&&M.append_loop_cb(function(){w.resize_to_container()});E&&M.append_loop_cb(function(){w.force_offsets_updating()});x&&r.reset_limits();G==r.P_AUTO?D.test_performance(function(a,b){0==a?(J.log("QUALITY TEST RESULT: UNSUPPORTED, using HIGH"),r.apply_quality(r.P_HIGH)):1.5>b?(J.log("QUALITY TEST RESULT: LOW ("+
b.toFixed(1)+" GB/s)"),r.apply_quality(r.P_LOW)):(J.log("QUALITY TEST RESULT: HIGH ("+b.toFixed(1)+" GB/s)"),r.apply_quality(r.P_HIGH));k(d,!0)}):k(d,!0)}else k(d,!1)}function h(a){a.keyCode==f.KEY_P&&(M.is_paused()?M.resume():M.pause())}function k(){}a=a||{};var m=!1,l=null,p=null,q=null,t=0,u=null,v=!0,x=!1,B=!0,C=!0,A=!1,z=!1,F=!1,E=!1,G=r.get("quality"),K;for(K in a)switch(K){case "canvas_container_id":l=a.canvas_container_id;break;case "callback":k=a.callback;break;case "autoresize":m=a.autoresize;
break;case "show_hud_debug_info":F=a.show_hud_debug_info;break;case "sfx_mix_mode":A=a.sfx_mix_mode;break;case "show_fps":z=a.show_fps;break;case "track_container_position":E=a.track_container_position;J.ga("track_container_position deprecated. Not needed anymore. Use the container.get_coords_target_space method.");break;case "fps_wrapper_id":u=a.fps_wrapper_id;break;case "fps_elem_id":q=a.fps_elem_id;break;case "error_purge_elements":p=a.error_purge_elements;break;case "report_init_failure":C=a.report_init_failure;
break;case "pause_invisible":B=a.pause_invisible;break;case "key_pause_enabled":v=a.key_pause_enabled;break;case "force_container_ratio":t=a.force_container_ratio;break;case "min_capabilities":x=a.min_capabilities;break;case "quality":G=a.quality;break;default:r.set(K,a[K])}G!=r.P_AUTO&&r.set("quality",G);v&&document.addEventListener("keydown",h,!1);r.set("show_hud_debug_info",F);r.set("sfx_mix_mode",A);var H=F||A||null;"complete"==document.readyState?window.setTimeout(d,0):window.addEventListener("load",
d,!1);window.addEventListener("unload",function(){y.cleanup()},!1)};a.set_onclick=function(a,b){var c=p(a);c.addEventListener("mouseup",function(){b(c.value)},!1)};a.set_onchange=function(a,b){var c=p(a);c.addEventListener("change",function(){var a=c.checked;b(void 0!=a?a:c.value)},!1)};a.set_onkeypress=function(a,b){var c=p(a);c.addEventListener("keypress",function(a){b(a.keyCode,c.value)},!1)};a.enable_camera_controls=q;a.disable_camera_controls=H;a.enable_object_controls=function(a){function b(a){return a[0]&&
(a[1]||a[2])}function c(a,b,c){if(1==c)switch(c=f.get_sensor_value(a,b,0),b){case "FORWARD":d?B.vehicle_throttle(a,1):X.move_local(a,0,-1*c,0);break;case "BACKWARD":d?B.vehicle_throttle(a,-1):X.move_local(a,0,1*c,0);break;case "LEFT":d?B.vehicle_steer(a,-1):X.move_local(a,1*c,0,0);break;case "RIGHT":d?B.vehicle_steer(a,1):X.move_local(a,-1*c,0,0)}else switch(b){case "FORWARD":case "BACKWARD":d&&B.vehicle_throttle(a,0);break;case "LEFT":case "RIGHT":d&&B.vehicle_steer(a,0)}}var d=B.is_vehicle_chassis(a)||
B.is_vehicle_hull(a),e=f.create_elapsed_sensor(),g=f.create_keyboard_sensor(f.KEY_W),h=f.create_keyboard_sensor(f.KEY_S),k=f.create_keyboard_sensor(f.KEY_A),m=f.create_keyboard_sensor(f.KEY_D),l=f.create_keyboard_sensor(f.KEY_UP),n=f.create_keyboard_sensor(f.KEY_DOWN),p=f.create_keyboard_sensor(f.KEY_LEFT),q=f.create_keyboard_sensor(f.KEY_RIGHT);f.create_sensor_manifold(a,"FORWARD",f.CT_CONTINUOUS,[e,g,l],b,c);f.create_sensor_manifold(a,"BACKWARD",f.CT_CONTINUOUS,[e,h,n],b,c);f.create_sensor_manifold(a,
"LEFT",f.CT_CONTINUOUS,[e,k,p],b,c);f.create_sensor_manifold(a,"RIGHT",f.CT_CONTINUOUS,[e,m,q],b,c)};a.disable_object_controls=function(a){for(var b=["FORWARD","BACKWARD","LEFT","RIGHT"],c=0;c<b.length;c++)f.remove_sensor_manifold(a,b[c])};a.enable_debug_controls=function(){f.create_kb_sensor_manifold(null,"CAMERA_SHOT",f.CT_SHOT,f.KEY_K,function(){D.make_camera_frustum_shot()});f.create_kb_sensor_manifold(null,"LIGHT_SHOT",f.CT_SHOT,f.KEY_L,function(){D.make_light_frustum_shot()});f.create_kb_sensor_manifold(null,
"TELEMETRY",f.CT_SHOT,f.KEY_T,function(){D.plot_telemetry()})};a.request_fullscreen=function(a,b,c){J.gd("request_fullscreen","screen.request_fullscreen");C.request_fullscreen(a,b,c)};a.exit_fullscreen=function(){J.gd("exit_fullscreen","screen.exit_fullscreen");C.exit_fullscreen()};a.check_fullscreen=function(){J.gd("check_fullscreen","screen.check_fullscreen");return C.check_fullscreen()};a.report_app_error=z;a.get_url_params=function(a){a=!!a;var b=decodeURIComponent(location.href.toString());if(-1==
b.indexOf("?"))return null;for(var b=b.split("?")[1].split("&"),c={},d=0;d<b.length;d++){var e=b[d].split("="),f=e[0];1<e.length?(e=e[1],a?f in c?c[f].push(e):c[f]=[e]:c[f]=e):a?f in c||(c[f]=[]):c[f]=""}return c};a.css_animate=function(a,b,c,d,e,f,g,h){if(a&&b&&isFinite(c)&&isFinite(d)&&isFinite(e)){f=f||"";g=g||"";h=h||function(){};var k=a.style,m=b.charAt(0).toUpperCase()+b.slice(1);if(void 0==k[b])if(void 0!=k["webkit"+m])b="webkit"+m;else if(void 0!=k["ms"+m])b="ms"+m;else if(void 0!=k["moz"+
m])b="moz"+m;else return;l(a,c,d,e,function(e){a&&(k[b]=f+e+g,c>d&&e<=d||c<d&&e>=d)&&(k[b]=f+d+g,h())})}};a.attr_animate=function(a,b,c,d,e,f){a&&b&&isFinite(c)&&isFinite(d)&&isFinite(e)&&(f=f||function(){},l(a,c,d,e,function(e){a&&(0<=e&&a.setAttribute(b,e),c>d&&e<=d||c<d&&e>=d)&&(a.setAttribute(b,d),f())}))};a.queue_animate=function(b){if(b.length){var c=b.shift(),d=c.elem,e=c.prop,f=c.from,g=c.to,h=c.duration,k=c.opt_prefix,m=c.opt_suffix,l=function(){c.cb&&c.cb();a.queue_animate(b)};"css"==c.type?
a.css_animate(d,e,f,g,h,k,m,l):"attr"==c.type&&a.attr_animate(d,e,f,g,h,l)}};a.set_camera_smooth_factor=function(a){R=a};a.get_camera_smooth_factor=function(){return R}};b4w.module.camera_anim=function(a,u){function e(a,b,d,e,f){d=v.angle_wrap_0_2pi(b-d);d=Math.min(d,2*Math.PI-d);b=v.angle_wrap_0_2pi(e-b);b=Math.min(b,2*Math.PI-b);if(1E-6>Math.abs(d)||1E-6>2*Math.PI-Math.abs(d))d=0;if(1E-6>Math.abs(b)||1E-6>2*Math.PI-Math.abs(b))b=0;c.is_eye_camera(a)?(f[0]=b,f[1]=d):(f[0]=d,f[1]=b);return f}var c=u("camera"),b=u("controls"),n=u("print"),g=u("scenes"),p=u("time"),k=u("transform"),x=u("tsr"),v=u("util"),h=u("vec3"),d=new Float32Array(2),t=new Float32Array(2),q=new Float32Array(3),
G=new Float32Array(3),H=new Float32Array(3),z=x.create(),l=x.create(),F=x.create(),r={},E=!1,w=!1,f=!1,y=!1;a.track_to_target=function(a,e,f,g,l,r,u,w){if(c.is_eye_camera(a)){if(v.is_vector(e))var m=e;else m=q,k.get_object_center(e,!1,m);f=f||1;g=g||2;l=l||1;r=r||1;var x=k.get_translation(a,G);e=h.subtract(m,x,H);var m=c.get_camera_angles(a,d),B=c.get_camera_angles_dir(e,t),C=B[0]-m[0],A=B[1]-m[1],y=Math.abs(Math.acos(Math.cos(C)*Math.cos(A))/f),z=h.length(e)*(1-1/g),D=function(a){return 6*a*(1-a)},
F=p.get_timeline(),E=0,J=function(){b.remove_sensor_manifold(a,"TRACK_TO_TARGET");u&&u()};f=b.create_timeline_sensor();g=b.create_elapsed_sensor();b.create_sensor_manifold(a,"TRACK_TO_TARGET",b.CT_CONTINUOUS,[f,g],null,function(d,e,f){c.is_eye_camera(d)?1==f&&(f=b.get_sensor_value(d,e,0)-F,e=b.get_sensor_value(d,e,1),f<y?(f=D(f/y),c.rotate_camera(a,f*C*e/y,f*A*e/y)):f<y+l?(E||(c.rotate_camera(a,B[0],B[1],!0),E++),f=D(f-y/l),e=f*z*e/l,k.move_local(d,0,0,-e)):f<y+l+r?1>=E&&(c.rotate_camera(a,B[0],B[1],
!0),c.eye_set_look_at(a,x),k.move_local(d,0,0,-z),w&&w(),E++):f<y+l+r+l?(2>=E&&(c.rotate_camera(a,B[0],B[1],!0),c.eye_set_look_at(a,x),k.move_local(d,0,0,-z),E++),f=D(f-y-l-r/l),e=f*z*e/l,k.move_local(d,0,0,e)):(c.rotate_camera(a,B[0],B[1],!0),c.eye_set_look_at(a,x),J())):J()})}else n.error("track_to_target(): Wrong camera object or camera move style")};a.auto_rotate=function(a,f,h){function k(f,g,h){if(1==h)if(h=c.get_move_style(f),h==c.MS_STATIC)l();else if(h!=c.MS_TARGET_CONTROLS&&h!=c.MS_EYE_CONTROLS||
!c.has_horizontal_rot_limits(f))q=null,g=b.get_sensor_value(f,g,0),c.rotate_camera(f,g*a,0);else{h=h==c.MS_EYE_CONTROLS?c.eye_get_horizontal_limits(f,r):c.target_get_horizontal_limits(f,r);if(null===q||h.left!=q.left||h.right!=q.right){q=q||{};q.left=h.left;q.right=h.right;u=Math.min(.2,v.angle_wrap_0_2pi(q.right-q.left)/2);h=p;var k=q,n=c.get_camera_angles(h,d)[0];h=e(h,n,k.left,k.right,t);m=a*Math.min(1,h[0]/.2,h[1]/.2)}g=b.get_sensor_value(f,g,0);h=c.get_camera_angles(f,d)[0];h=e(f,h,q.left,q.right,
t);h[1]>u&&h[0]>u?m=v.sign(m)*a:h[1]<u?m-=Math.pow(a,2)/.4*g:h[0]<u&&(m+=Math.pow(a,2)/.4*g);c.rotate_camera(f,g*m,0)}}function l(){b.remove_sensor_manifold(p,"AUTO_ROTATE");b.remove_sensor_manifold(p,"DISABLE_AUTO_ROTATE");f()}f=f||function(){};var p=g.get_active_camera();if(c.is_static_camera(p))n.error("auto_rotate(): Wrong camera move style");else{var q={},u=0,m=0;if(b.check_sensor_manifold(p,"AUTO_ROTATE"))l();else{var w=b.create_mouse_move_sensor("X"),x=b.create_mouse_move_sensor("Y"),y=b.create_mouse_click_sensor(),
z=b.create_touch_move_sensor(),D=b.create_touch_zoom_sensor(),E=b.create_elapsed_sensor();h=h?b.create_mouse_wheel_sensor():b.create_custom_sensor(0);b.create_sensor_manifold(p,"DISABLE_AUTO_ROTATE",b.CT_LEVEL,[w,x,y,z,D,h],function(a){return a[0]&&a[2]||a[1]&&a[2]||a[3]||a[4]||a[5]},l);b.create_sensor_manifold(p,"AUTO_ROTATE",b.CT_CONTINUOUS,[E],function(a){return a[0]},k)}}};a.is_auto_rotate=function(){var a=g.get_active_camera();return b.check_sensor_manifold(a,"AUTO_ROTATE")};a.check_auto_rotate=
function(){var a=g.get_active_camera();return c.get_move_style(a)==c.MS_STATIC?!1:!0};a.move_camera_to_point=function(a,b,d,e,g){if(c.get_move_style(a)!=c.MS_STATIC)n.error("move_camera_to_point(): wrong camera type");else if(!E)if(a)if(b){d=d||1;e=e||.01;var r=v.is_vector(a)?a:k.get_tsr(a,z),t=v.is_vector(b)?b:k.get_tsr(b,l);b=h.distance(x.get_trans_view(r),x.get_trans_view(t))/d;d=v.quat_to_dir(x.get_quat_view(r),v.AXIS_MZ,q);var u=v.quat_to_dir(x.get_quat_view(t),v.AXIS_MZ,G);d=Math.min(Math.abs(h.dot(d,
u)),1);e=1E3*Math.max(b,Math.acos(d)/e);E=!0;var m=p.animate(0,1,e,function(b){var c=x.interpolate(r,t,v.smooth_step(b),F);f?(p.clear_animation(m),E=f=!1):(k.set_tsr(a,c),1==b&&(E=!1,g&&g()))})}else n.error("move_camera_to_point(): you must specify the point object");else n.error("move_camera_to_point(): you must specify the camera object")};a.rotate_camera=function(a,b,d,e,f){if(c.get_move_style(a)==c.MS_STATIC)n.error("rotate_camera(): not supported for STATIC cameras");else if(!w)if(a)if(b||d){e=
e||1E3;w=!0;var g=0,h=p.animate(0,b,e,function(d){y||d>=b?(y=!1,p.clear_animation(h),w&&(w=!1,f&&f())):(c.rotate_camera(a,g-d,0),g=d)}),k=0,m=p.animate(0,d,e,function(b){y||b>=d?(y=!1,p.clear_animation(m),w&&(w=!1,f&&f())):(c.rotate_camera(a,0,k-b),k=b)})}else n.error("rotate_camera(): you must specify the rotation angle");else n.error("rotate_camera(): you must specify the camera object")};a.stop_cam_moving=function(){f=!0};a.stop_cam_rotating=function(){y=!0};a.is_moving=function(){return E};a.is_rotating=
function(){return w}};b4w.module.gp_conf=function(a,u){function e(){B.length=0;for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)a[b]&&B.push(a[b]);return B}function c(a){var b=G.get(a+"_gmpd_stngs","b4w");if(b){var b=JSON.parse(b),c;for(c in b)q.set_gamepad_key(a,c,b[c])}else c=JSON.stringify(z),G.set(a+"_gmpd_stngs",c,"b4w")}function b(a){X=!0;var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),
e=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),k=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div"),r=document.createElement("div"),t=document.createElement("div"),u=document.createElement("div"),w=document.createElement("div"),v=document.createElement("div"),B=document.createElement("div"),y=document.createElement("div"),z=document.createElement("div"),D=document.createElement("div"),
E=document.createElement("div"),F=document.createElement("div"),G=document.createElement("div");f=b;b.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg26627" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="128.51mm" viewBox="0 0 636.63517 455.33329" width="179.67mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs26629"><linearGradient id="linearGradient4691"><stop id="stop4693" offset="0"/><stop id="stop4695" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4358"><stop id="stop4360" stop-color="#2e2e2e" offset="0"/><stop id="stop4362" stop-color="#2e2e2e" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4364" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="matrix(-1 0 0 1 1531.4 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4368" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="translate(-896.37 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4430" x1="959.32" gradientUnits="userSpaceOnUse" y1="653.07" gradientTransform="matrix(-1 0 0 1 1531.4 70.097)" x2="1467.6" y2="653.07"><stop id="stop4426" stop-color="#4f4f4f" offset="0"/><stop id="stop4428" stop-color="#4f4f4f" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4701" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="translate(-52.276 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4713" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="matrix(-1 0 0 1 689.01 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4725" x1="367.39" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="125.6" gradientTransform="matrix(-1.3272 0 0 .68317 806.95 579.14)" x2="367.39" y2="116.11"/></defs><metadata id="metadata26632"><rdf:RDF><cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>    <dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -597.03)"><g id="g20" fill-rule="evenodd"><path id="path4209" fill="#434343" d="m576.71 1052.4c42.015-1.9097 64.296-46.468 59.204-122.86-5.0928-76.387-27.374-175.69-44.562-224.7-17.188-49.015-25.501-62.531-26.737-65.565-3.7697-9.2504-11.278-19.949-62.379-27.691-28.97-4.3891-16.697-7.9577-27.084-9.4696-17.96-2.6141-43.609-1.229-52.203 1.6354-8.594 2.8645-12.709 29.16-24.486 35.207-11.777 6.0473-19.416 10.185-80.149 10.185s-68.372-4.1376-80.149-10.185c-11.777-6.0473-18.113-32.099-25.736-36.993-11.183-7.1796-26.985-5.6722-54.891-0.57481-5.64 1.0302-1.1304 7.6212-18.165 12.509-32.913 9.4438-52.094 3.7056-65.087 20.831-1.9807 2.6106-11.822 21.096-29.01 70.111-17.179 48.95-39.46 148.25-44.553 224.64-5.0929 76.39 17.188 120.99 59.204 122.89 73.339-1.7 55.219-116.53 258.4-116.53s185.05 114.82 258.4 116.49z"/><path id="path4366" fill="url(#linearGradient4368)" d="m249.77 838.51c-107.76 0-171.55 96.288-176.84 121.23-5.2294 24.634-17.658 55.705 3.8195 53.789 9.6996-0.8655 18.053-15.713 37.559-38.193 18.78-21.643 41.379-54.425 96.763-54.425s73.209-44.877 75.119-53.152c1.9098-8.2752 2.4146-27.976-36.418-29.25z"/><path id="path4217" fill="url(#linearGradient4364)" d="m385.23 838.51c107.76 0 171.55 96.288 176.84 121.23 5.2293 24.634 17.658 55.705-3.8195 53.789-9.6996-0.8655-18.053-15.713-37.559-38.193-18.78-21.643-41.379-54.425-96.763-54.425s-73.209-44.877-75.119-53.152c-1.9098-8.2752-2.4146-27.976 36.418-29.25z"/><path id="path4370" fill="url(#linearGradient4430)" d="m572.06 654.81c-60.48-19.09-76.79-18.6-89.84-17.96-13.05 0.63657-22.638 16.617-45.237 49.4s-67.48 125.27-116.23 125.27c-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-32.008-48.942-45.059-49.579-13.05-0.63648-35.251 1.8354-95.728 20.932l1.1161-2.3404c60.494-19.1 81.754-20.83 94.804-20.19 13.05 0.63657 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63648 28.783-1.6248 89.26 17.472"/><path id="path4315" fill="#343434" d="m570.99 652.48c-60.477-19.097-76.074-18.269-89.124-17.633-13.05 0.63658-22.281 14.832-44.88 47.614-22.599 32.783-67.48 125.27-116.23 125.27-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-31.83-46.978-44.88-47.614-13.05-0.63648-34.715 1.2996-95.192 20.396l1.1161-2.3404c60.474-19.1 81.024-22.26 94.074-21.62 13.05 0.63658 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63647 27.71-0.17274 88.186 18.924"/></g><g id="g15645" transform="matrix(.75439 0 0 1 1558.5 -6638.3)" fill-rule="evenodd"><rect id="rect15584" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6558.3" x="100.71" fill="#4164bb"/><rect id="rect15331" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6554.6" x="100.71" fill="#5276cf"/></g><text id="text15623-9" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="22px" line-height="430.99999428%" y="-53.755863" x="1792.7805" font-family="&apos;Noto Sans CJK TC&apos;" fill="#ffffff"><tspan id="tspan15625-5" y="-53.755863" x="1792.7805"/></text><text id="text15657" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="13px" line-height="430.99999428%" y="-3.7607465" x="1670.2437" font-family="&apos;Noto Sans CJK TC&apos;" fill="#828282"><tspan id="tspan15659" y="-3.7607465" x="1670.2437"/></text><g id="g34" fill-rule="evenodd"><path id="path4675" fill="#303030" d="m551.75 628.4c9.3003 4.1796 8.2375 11.558 2.1302 9.9581-6.1073-1.6003-33.792-9.1405-46.239-11.577-12.446-2.4363-34.904-3.0623-36.951-4.0165-2.0474-0.95416 0.93313-7.7247 5.491-7.3449 23.258 0.91012 59.905 6.0339 75.569 12.98z"/><path id="path4677" fill="#303030" d="m474.88 602.61c3.6488 0.63684 4.1169 1.3708 2.4115 5.2499-0.80967 1.8416-1.261 3.904-3.4715 3.7336-4.456-0.34344-16.578-1.2846-25.692-1.3764-9.1139-0.0918-23.83 1.217-25.307 0.79399-1.4771-0.42301-1.8834-4.9141 1.7769-6.7458 4.6221-1.3593 38.698-3.2021 50.281-1.6553z"/><path id="path4699" opacity=".384" fill="url(#linearGradient4701)" d="m475.53 611.7c-11.693-0.63604-8.4597-0.73151-44.068 54.448-6.5182 8.6489-22.874 37.231-36.865 35.326-6.7491-1.4177 15.436-67.299 22.724-75.767 11.112-12.911 19.255-16.122 58.209-14.007z"/><path id="path4703" fill="#303030" d="m84.068 628.4c-9.3003 4.1796-8.2375 11.558-2.1302 9.9581 6.1073-1.6003 33.792-9.1405 46.239-11.577 12.446-2.4363 34.904-3.0623 36.951-4.0165 2.0474-0.95416-0.93313-7.7247-5.491-7.3449-23.258 0.91012-59.905 6.0339-75.569 12.98z"/><path id="path4705" fill="#303030" d="m161.86 602.61c-3.6488 0.63684-4.1169 1.3708-2.4115 5.2499 0.80967 1.8416 1.261 3.904 3.4715 3.7336 4.456-0.34344 16.578-1.2846 25.692-1.3764 9.1139-0.0918 23.83 1.217 25.307 0.79399 1.4771-0.42301 1.8834-4.9141-1.7769-6.7458-4.6221-1.3593-38.698-3.2021-50.281-1.6553z"/><path id="path4711" opacity=".384" fill="url(#linearGradient4713)" d="m161.2 611.7c11.693-0.63604 8.4597-0.73151 44.068 54.448 6.5182 8.6489 22.874 37.231 36.865 35.326 6.7491-1.4177-15.436-67.299-22.724-75.767-11.112-12.911-19.255-16.122-58.209-14.007z"/><path id="path4717" opacity=".115" fill="url(#linearGradient4725)" d="m413.37 645.84c-9.0496 10.007-29.401 19.937-36.775 19.937h-52.205c-31.171 0-37.359 0.34506-47.75 0.51758-10.39 0.17253-18.682 0.65628-23.653-3.278-5.0513-3.9977-24-15.425-24-15.425 53.346 4.1464 144.49 4.3368 184.38-1.7523z"/></g></g><g id="layer1-0" fill-rule="evenodd" transform="translate(159.08 -720.76)"><g id="g4527-3" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g><g id="layer1-7" fill-rule="evenodd" transform="translate(352.57 -719.72)"><g id="g4527-3-4" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8-9" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3-5" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506-2" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g></svg>')+
"');width: 637px;height: 455px;background-size: 100% 100%;left: 50%;margin-bottom: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);bottom: 0px;";c.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3904" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="35.924mm" width="35.926mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 127.29808 127.28933"><metadata id="metadata3909"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -925.07)"><ellipse id="circle4330" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="63.649" ry="63.645" cy="988.72" cx="63.649" fill="#303030"/><ellipse id="circle4223" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="59.705" ry="59.701" cy="988.72" cx="63.649" fill="#4c4c4c"/></g></svg>')+
"');position: absolute;top: 47px;left: 65px;width: 135px;height: 135px;";d.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;left: 49px;top: 8px;position: absolute;";e.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 84px;position: absolute;";g.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;bottom: 11px;left: 51px;position: absolute;";h.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 13px;position: absolute;";k.style.cssText="position: absolute;top: 55px;left: 434px;width: 150px;height: 150px;";m.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;top: 0px;position: absolute;";n.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 107px;top: 51px;position: absolute;";p.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;bottom: 0px;position: absolute;";r.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;top: 51px;position: absolute;";t.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 222px;left: 183px;width: 85px;height: 85px;";u.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 223px;left: 376px;width: 85px;height: 85px;";w.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 227px;width: 34px;height: 34px;";v.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 376px;width: 34px;height: 34px;";B.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>')+
"');position: absolute;top: 4px;left: 78px;width: 79px;height: 33px;";y.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: 4px;left: 477px;width: 79px;height: 33px;";z.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 425px;width: 50px;height: 17px;";D.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 164px;width: 50px;height: 17px;";E.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>')+
"');position: absolute;top: 68px;left: 274px;width: 92px;height: 92px;";F.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 186px;left: 148px;width: 157px;height: 157px;";G.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 187px;left: 339px;width: 157px;height: 157px;";b.appendChild(F);b.appendChild(G);c.appendChild(d);c.appendChild(e);c.appendChild(g);c.appendChild(h);b.appendChild(c);k.appendChild(m);k.appendChild(n);k.appendChild(p);k.appendChild(r);b.appendChild(k);b.appendChild(t);b.appendChild(u);b.appendChild(w);b.appendChild(v);b.appendChild(B);b.appendChild(y);b.appendChild(z);a.appendChild(b);b.appendChild(D);b.appendChild(E);J.length=0;l.length=0;C.length=0;A.length=0;J.push(p,
n,r,m,B,y,D,z,w,v,t,u,d,g,h,e,E);l.push('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>',
'<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>');
C.push(t,t,u,u);A.push(F,G);for(a=0;a<J.length;a++)J[a].setAttribute("id","pad_btn_"+a),J[a].setAttribute("data-colorstate","B"),J[a].setAttribute("data-key",a),J[a].setAttribute("data-svgid",a);F.setAttribute("id","pad_left_axis");F.setAttribute("data-colorstate","GR");F.setAttribute("data-key",q.GMPD_AXIS_0);F.setAttribute("data-svgid",l.length);G.setAttribute("id","pad_right_axis");G.setAttribute("data-colorstate","GR");G.setAttribute("data-key",q.GMPD_AXIS_2);G.setAttribute("data-svgid",l.length+
1);l.push('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>',
'<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>');
x(J,H);x(A,"#e6e6e6")}function n(a){return[t.create_gamepad_btn_sensor(q.GMPD_BUTTON_0,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_1,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_2,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_3,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_4,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_5,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_6,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_7,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_8,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_9,
a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_10,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_11,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_12,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_13,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_14,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_15,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_16,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_17,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_18,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_19,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_20,
a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_21,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_22,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_23,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_24,a),t.create_gamepad_btn_sensor(q.GMPD_BUTTON_25,a)]}function g(a){return[t.create_gamepad_axis_sensor(q.GMPD_AXIS_0,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_1,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_2,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_3,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_4,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_5,
a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_6,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_7,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_8,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_9,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_10,a),t.create_gamepad_axis_sensor(q.GMPD_AXIS_11,a)]}function p(a,b){var c=document.createElement("input");c.style.cssText="display: inline-block;position = relative;";c.setAttribute("type","radio");c.setAttribute("name","choice");var d=document.createElement("label");d.textContent=
b;d.style.cssText="position = relative;display: inline-block;color: white;";a.appendChild(c);a.appendChild(d);return c}function k(a){w.removeChild(f);f=null;switch(a){case "PAD":N.checked=!0;b(w);break;case "WHEEL":D.checked=!0;var c=w;X=!1;var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),k=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div"),
r=document.createElement("div"),t=document.createElement("div"),u=document.createElement("div"),v=document.createElement("div"),B=document.createElement("div"),y=document.createElement("div"),z=document.createElement("div"),F=document.createElement("div"),E=document.createElement("div"),G=document.createElement("div"),K=document.createElement("div"),M=document.createElement("div"),ca=document.createElement("div"),Ca=document.createElement("div"),la=document.createElement("div"),V=document.createElement("div");
a=document.createElement("div");var ta=document.createElement("div"),xa=document.createElement("div"),I=document.createElement("div"),Ka=document.createElement("div"),Va=document.createElement("div");f=d;var Ia="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>')+
"');width: 19px;height: 19px;background-size: 100% 100%;";d.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="112.08413mm" height="128.46834mm" viewBox="0 0 397.14849 455.20277" id="svg3440" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel.svg"><defs id="defs3442" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.98994949" inkscape:cx="421.01508" inkscape:cy="52.510802" inkscape:document-units="px" inkscape:current-layer="g87" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3445"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-2.3645008e-8,-597.15942)"><path inkscape:connector-curvature="0" style="fill:#4d4d4d;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4140" d="m 307.84153,715.52552 c -4.35995,43.11849 -2.78952,86.66385 -15.90234,128.54337 -10.85452,25.86023 -13.33477,47.2976 6.91492,61.09536 7.23778,50.7442 78.38013,47.39232 82.20535,0 23.06079,-14.19054 13.49405,-42.79138 6.91492,-61.09536 -17.40045,-40.83001 -4.82581,-86.43019 -15.90235,-128.54337 -8.3177,-20.33228 -56.75348,-20.7661 -64.22927,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#cccccc;stroke:#1a1a1a;stroke-width:2.09465766;stroke-miterlimit:4;stroke-dasharray:none" id="path4266" d="m 313.11812,724.1957 -3.84514,68.80568 c 4.64168,13.40814 62.19981,10.8172 61.83082,0 l -3.84515,-68.80568 c -4.46942,-24.00369 -52.58756,-18.95946 -54.13979,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#353535;stroke:#2c2c2c;stroke-width:2.11880326;stroke-miterlimit:4;stroke-dasharray:none" id="path4156" d="m 304.91419,870.673 c -12.36924,67.40381 80.42804,69.69607 70.55134,0 -6.57605,-36.5947 -65.0964,-34.8253 -70.55134,0 z m 60.53812,3.9862 c 8.65841,48.24354 -57.58987,49.86644 -50.52489,0 4.7009,-26.27069 46.6394,-24.84292 50.52489,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#e6e6e6;stroke:#969696;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4011" d="m 106.04576,696.97906 c -11.197076,4.25792 -17.123706,8.24834 -17.123706,8.24834 l -66.18493,16.33946 1.40291,30.64619 46.54715,-7.67623 c 17.00932,-1.6438 32.551896,8.94676 38.302026,23.34506 l 2.78663,65.4778 27.6363,0 2.78663,-65.4778 c 8.0428,-15.3291 20.46247,-27.10803 38.30202,-23.34506 l 46.54716,7.67623 1.40291,-30.64619 -66.18493,-16.33946 c 0,0 -5.92627,-3.99074 -17.12371,-8.24834 -13.45408,-4.31874 -26.62772,-4.20804 -39.08982,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#252525;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path2996" d="m 38.311064,931.09899 c -8.01574,5.05649 -22.76006,21.74743 -26.34852,58.0567 -4.1290804,35.18581 -4.8394604,60.59901 28.55878,61.68771 l 162.934726,0 c 39.19437,1.1693 30.46155,-41.5992 28.55878,-61.68771 -3.58839,-36.30927 -18.33277,-52.99983 -26.34851,-58.0567 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#373737;stroke:#6e6e6e;stroke-width:2.83429575;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none" id="path3019" d="m 26.230254,979.1291 c -11.50334,14.44882 -11.98241,47.3999 -0.33519,57.1202 l 191.802226,0 c 12.10111,-12.3068 9.93082,-46.99573 -0.33518,-57.1202 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#808080;stroke:#1a1a1a;stroke-width:2.14882827;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4133" d="m 360.82498,854.6914 a 20.634815,21.265151 0 1 1 -41.269,0 20.634815,21.265151 0 1 1 41.269,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#333333;stroke:#000000;stroke-width:2.11880326;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4280" d="m 351.64051,761.132 a 11.444622,11.75148 0 1 1 -22.88896,0 11.444622,11.75148 0 1 1 22.88896,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#313131;stroke:#565656;stroke-width:2.93434715;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path3993" d="m 125.52855,598.62659 c -68.528026,0 -124.0613764,57.81925 -124.0613764,129.13695 0,71.31265 55.5370404,129.13696 124.0613764,129.13696 68.52804,0 124.07984,-57.81926 124.07984,-129.13696 0,-71.31264 -55.55611,-129.13695 -124.07984,-129.13695 z m -1.00095,23.63932 c 10.01261,0.0734 20.238,1.32074 28.95237,3.51006 11.62203,3.80301 21.53624,8.52304 31.01135,16.15381 26.21752,19.0207 43.36275,50.36277 43.36275,85.83029 0,58.01564 -45.80548,105.05244 -102.30928,105.05244 -56.500726,0 -102.309276,-47.03364 -102.309276,-105.05244 0,-32.14848 14.06783,-60.91918 36.22336,-80.19121 11.45168,-11.11714 23.14136,-17.13322 37.3943,-21.79731 7.855846,-2.48302 17.655666,-3.5835 27.668276,-3.51006 z" stroke-miterlimit="4" /><g style="stroke-miterlimit:4;stroke-dasharray:none" id="g4127" stroke-miterlimit="4" transform="matrix(0.61498728,0,0,0.63147657,-18.171616,453.28593)"><g id="g4111"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="rect3040" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path3024" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4115" transform="translate(97.984785,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4117" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4119" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4121" transform="translate(195.96959,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4123" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4125" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g></g><g style="fill:#666666;stroke:#969696;stroke-width:3.99777174;stroke-miterlimit:4;stroke-dasharray:none" id="g4051" transform="translate(-42.878584,98.083591)" stroke-miterlimit="4"><g id="g4437" transform="matrix(0.74686368,0,0,0.74686368,-73.374214,285.30447)"><path inkscape:connector-curvature="0" id="rect4348" style="color:#000000;text-indent:0;text-transform:none;block-progression:tb;fill:#ffffff" d="m 567.31,584.22 0,42.25 0,3.4062 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.4062,0 0,-43.969 0,-1.6875 -1.7188,0 -28.75,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 z" /><g style="fill:#a02c2c;stroke:#ffffff;stroke-width:3.4000001;stroke-linecap:square" id="g87" /></g></g></g></svg>')+
"');width: 397px;height: 455px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);background-size: 100% 100%;left: 50%;margin-left: 25px;margin-bottom: 40px;bottom: 0px;";e.style.cssText=Ia+"top: 132px;left: 331px;";g.style.cssText=Ia+"top: 122px;left: 315px;";h.style.cssText=Ia+"top: 122px;left: 347px;";k.style.cssText=Ia+"top: 113px;left: 331px;";m.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 166px;";n.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 36px;";p.style.cssText=Ia+"top: 107px;left: 141px;";r.style.cssText=Ia+"top: 107px;left: 90px;";t.style.cssText=Ia+"top: 185px;left: 321px;";u.style.cssText=Ia+"top: 185px;left: 340px;";v.style.cssText=Ia+"top: 179px;left: 358px;";B.style.cssText=Ia+"top: 178px;left: 303px;";y.style.cssText=Ia+"top: 210px;left: 299px;";z.style.cssText=Ia+"top: 279px;left: 299px;";F.style.cssText=Ia+"top: 210px;left: 321px;";E.style.cssText=Ia+
"top: 279px;left: 321px;";G.style.cssText=Ia+"top: 210px;left: 344px;";K.style.cssText=Ia+"top: 278px;left: 344px;";M.style.cssText=Ia+"top: 124px;left: 147px;";ca.style.cssText=Ia+"top: 138px;left: 133px;";Ca.style.cssText=Ia+"top: 124px;left: 82px;";la.style.cssText=Ia+"top: 138px;left: 96px;";V.style.cssText=Ia+"top: 278px;left: 367px;";Ia="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>')+
"');width: 19px;height: 46px;background-size: 100% 100%;";a.style.cssText=Ia+"top: 291px;left: 50px;";ta.style.cssText=Ia+"top: 291px;left: 111px;";xa.style.cssText=Ia+"top: 291px;left: 171px;";I.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>')+
"');width: 297px;height: 179px;background-size: 100% 100%;top: 43px;left: -25px;";Ka.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>')+
"');width: 33px;height: 10px;background-size: 100% 100%;top: 159px;left: 324px;";Va.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>')+
"');width: 10px;height: 33px;background-size: 100% 100%;top: 148px;left: 335px;";c.appendChild(d);d.appendChild(a);d.appendChild(ta);d.appendChild(xa);d.appendChild(I);d.appendChild(Ka);d.appendChild(Va);d.appendChild(e);d.appendChild(g);d.appendChild(h);d.appendChild(k);d.appendChild(m);d.appendChild(n);d.appendChild(p);d.appendChild(r);d.appendChild(t);d.appendChild(u);d.appendChild(v);d.appendChild(B);d.appendChild(y);d.appendChild(z);d.appendChild(F);d.appendChild(E);d.appendChild(G);d.appendChild(K);
d.appendChild(M);d.appendChild(ca);d.appendChild(Ca);d.appendChild(la);d.appendChild(V);J.length=0;l.length=0;C.length=0;A.length=0;J.push(e,g,h,k,m,n,p,r,t,u,v,B,y,z,F,E,G,K,M,ca,Ca,la,V);l.push('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>');
A.push(I,a,xa,ta,Ka,Va);for(c=0;c<J.length;c++)J[c].setAttribute("id","wheel_btn_"+c),J[c].setAttribute("data-colorstate","B"),J[c].setAttribute("data-key",c),J[c].setAttribute("data-svgid",c);for(c=0;c<A.length;c++)J[c].setAttribute("id","wheel_axis_"+c),J[c].setAttribute("data-colorstate","GR");I.setAttribute("data-key",q.GMPD_AXIS_0);I.setAttribute("data-svgid",l.length);a.setAttribute("data-key",q.GMPD_AXIS_1);a.setAttribute("data-svgid",l.length+1);xa.setAttribute("data-key",q.GMPD_AXIS_2);xa.setAttribute("data-svgid",
l.length+2);ta.setAttribute("data-key",q.GMPD_AXIS_3);ta.setAttribute("data-svgid",l.length+3);Ka.setAttribute("data-key",q.GMPD_AXIS_4);Ka.setAttribute("data-svgid",l.length+4);Va.setAttribute("data-key",q.GMPD_AXIS_5);Va.setAttribute("data-svgid",l.length+5);l.push('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>');
x(J,H);x(A,"#e6e6e6")}}function x(a,b){function c(a){a=a.target;if(!(0>F||"G"==a.getAttribute("data-colorstate")))if(E){if("R"==a.getAttribute("data-colorstate")&&(r=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",E=0),"B"==a.getAttribute("data-colorstate")||"GR"==a.getAttribute("data-colorstate")){var c=parseFloat(r.getAttribute("data-svgid"));r.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[c])+"')";r.setAttribute("data-colorstate",
a.getAttribute("data-colorstate"));r=a;c=parseFloat(a.getAttribute("data-svgid"));a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R")}}else{var c=parseFloat(a.getAttribute("data-svgid")),d="B"==a.getAttribute("data-colorstate")?1:2;E=d;a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R");document.getElementById("action_label").textContent=
1==d?"Now press the button on the device":"Now move the axis on the device";r=a}}for(var d=0;d<a.length;d++)q.add_click_listener(a[d],c)}function v(a){var b=document.createElement("label");b.style.cssText="position: relative;display: inline-block;width: 50px;color: white;margin: 0 10px;font-size: 36px;line-height: 50px;background-color: black;border: 3px solid white;border-radius: 5px;height: 50px;";b.textContent=a;return b}function h(){var a=window.innerWidth,b=window.innerHeight;w.style.zoom=750>=
b&&400<b||750>=a&&400<a?"0.5":400>=a||400>=b?"0.3":"1"}var d=u("container"),t=u("controls"),q=u("input"),G=u("storage"),H=RegExp("#5276cf","g"),z={};z[q.GMPD_BUTTON_12]=q.GMPD_BUTTON_12;z[q.GMPD_BUTTON_13]=q.GMPD_BUTTON_13;z[q.GMPD_BUTTON_15]=q.GMPD_BUTTON_15;z[q.GMPD_BUTTON_14]=q.GMPD_BUTTON_14;z[q.GMPD_BUTTON_3]=q.GMPD_BUTTON_3;z[q.GMPD_BUTTON_0]=q.GMPD_BUTTON_0;z[q.GMPD_BUTTON_1]=q.GMPD_BUTTON_1;z[q.GMPD_BUTTON_2]=q.GMPD_BUTTON_2;z[q.GMPD_BUTTON_5]=q.GMPD_BUTTON_5;z[q.GMPD_BUTTON_7]=q.GMPD_BUTTON_7;
z[q.GMPD_BUTTON_4]=q.GMPD_BUTTON_4;z[q.GMPD_BUTTON_6]=q.GMPD_BUTTON_6;z[q.GMPD_BUTTON_8]=q.GMPD_BUTTON_8;z[q.GMPD_BUTTON_9]=q.GMPD_BUTTON_9;z[q.GMPD_BUTTON_10]=q.GMPD_BUTTON_10;z[q.GMPD_BUTTON_11]=q.GMPD_BUTTON_11;z[q.GMPD_BUTTON_16]=q.GMPD_BUTTON_16;var l=[],F=-1,r=null,E=0,w=null,f=null,y=null,D=null,N=null,M=null,B=[],J=[],C=[],A=[],X=!0,m={};m[q.GMPD_AXIS_0]=-2;m[q.GMPD_AXIS_1]=-2;m[q.GMPD_AXIS_2]=-2;m[q.GMPD_AXIS_3]=-2;m[q.GMPD_AXIS_4]=-2;m[q.GMPD_AXIS_5]=-2;m[q.GMPD_AXIS_6]=-2;m[q.GMPD_AXIS_7]=
-2;m[q.GMPD_AXIS_8]=-2;m[q.GMPD_AXIS_9]=-2;m[q.GMPD_AXIS_10]=-2;m[q.GMPD_AXIS_11]=-2;a.show=function(){var a=document.createElement("div");w=a;a.style.cssText="position: absolute;width: 720px;height: 750px;top: 50%;left: 50%;-moz-transform: translateY(-50%) translateX(-50%);-ms-transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);transform: translateY(-50%) translateX(-50%);background-color: black;border: 4px solid white;border-radius: 35px;box-shadow: 0px 0px 20px 0px rgba(50, 50, 50, 1);";
d.insert_to_container(a,"LAST");b(a);var f=document.createElement("div");f.style.cssText="position: absolute;width: 637px;top: 0px;font-family: sans-serif;text-align: center;margin-top: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);left: 50%;";var u=document.createElement("div");u.innerHTML="Select a device";u.style.cssText="color: #fff;display: inline-block;";f.appendChild(u);for(u=0;4>u;u++){var x=n(u),B=function(){return!0},
z=function(a,b){if(b==F)for(var c=0;c<J.length;c++){var d=J[c],e=t.get_sensor_value(a,b,c),f=c;if(E)e=q.get_pressed_gmpd_btn(F),0<=e&&r&&1==E&&(d=r.getAttribute("data-key"),q.set_gamepad_key(F,d,e),f=G.get(F+"_gmpd_stngs","b4w")||"{}",f=JSON.parse(f),f[d]=e,G.set(F+"_gmpd_stngs",JSON.stringify(f),"b4w"),r=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",E=0);else{if(e&&"B"==d.getAttribute("data-colorstate")){var g=l[f];d.style.backgroundImage=
"url('data:image/svg+xml;base64,"+btoa(g.replace(H,"#00ff00"))+"')";d.setAttribute("data-colorstate","G")}e||"B"==d.getAttribute("data-colorstate")||(g=l[f],d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(g)+"')",d.setAttribute("data-colorstate","B"))}}};t.create_sensor_manifold(null,u,t.CT_CONTINUOUS,x,B,z)}0<e().length&&(F=0);var U=[],u=document.createElement("div");u.style.cssText="margin-top: 20px;";for(x=0;4>x;x++)z=v(x),x==F&&(z.style.backgroundColor="green",y=z),c(x),u.appendChild(z),
z.setAttribute("data-device_type","PAD"),U.push(z),q.add_click_listener(z,function(a){var b=e();a=a.target;for(var d=0;d<b.length;d++)U[d]==a&&(F=d,y=a,c(F),k(a.getAttribute("data-device_type")))});f.appendChild(u);M=document.createElement("label");M.style.cssText="position: relative;display: block;color: white;";f.appendChild(M);u=document.createElement("div");u.style.cssText="margin-top: 20px;";x=p(u,"Pad");z=p(u,"Wheel");x.setAttribute("checked","true");x.onchange=function(){k("PAD");y&&y.setAttribute("data-device_type",
"PAD")};z.onchange=function(){k("WHEEL");y&&y.setAttribute("data-device_type","WHEEL")};x.setAttribute("id","test");N=x;D=z;x=document.createElement("label");x.style.cssText+="color: #fff;display: block;";u.appendChild(x);x.textContent="Click on the buttons & arrows to setup your controller";x.setAttribute("id","action_label");f.appendChild(u);a.appendChild(f);a=t.create_elapsed_sensor();t.create_sensor_manifold(null,"UPDATE_GAMEPAD_DATA",t.CT_CONTINUOUS,[a],B,function(){var a=e(),b=a.length;-1==
F&&a.length&&(F=a[0].index,y=U[F]);for(var c=0;c<U.length;c++)c<b?(U[c].textContent=a[c].index,U[c]==y?(U[c].style.backgroundColor="green",M.textContent="Selected device: "+a[c].index+". Data: "+a[c].id):U[c].style.backgroundColor="blue"):U[c].style.backgroundColor="black";b||(F=-1,M.textContent="")});for(u=0;4>u;u++)x=g(u),z=function(a,b){if(b=="AXES"+F){for(var c=0;c<C.length;c+=2){var d=C[c],e=a,f=b,g=c,h=20*t.get_sensor_value(e,f,g),e=20*t.get_sensor_value(e,f,g+1);d.style.transform="translate3d("+
h+"px, "+e+"px, 0px) rotate(0rad)"}if(X)for(c=0;12>c;c+=2){if(e=a,f=b,d=c,!(d+1>2*A.length)){h=t.get_sensor_value(e,f,d);e=t.get_sensor_value(e,f,d+1);if(-2<m[d]){var k=h-m[d],n=e-m[d+1],f=A[Math.floor(d/2)],g=f.getAttribute("data-svgid");E?2==E&&(k=q.get_moved_gmpd_axis(F),0<=k&&(k%2&&k--,E=0,f.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[g])+"')",f=parseFloat(r.getAttribute("data-key")),q.set_gamepad_key(F,f,k),q.set_gamepad_key(F,f+1,k+1),r=null,document.getElementById("action_label").textContent=
"Click on the buttons & arrows to setup your controller")):f.style.backgroundImage=k||n?"url('data:image/svg+xml;base64,"+btoa(l[g].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(l[g])+"')"}m[d]=h;m[d+1]=e}}else for(c=0;12>c;c++)(d=c,d>=A.length)||(h=t.get_sensor_value(a,b,d),-2<m[d]&&((g=h-m[d],e=A[d],f=e.getAttribute("data-svgid"),E)?2==E&&(g=q.get_moved_gmpd_axis(F),0<=g&&(E=0,e.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[f])+"')",e=parseFloat(r.getAttribute("data-key")),
q.set_gamepad_key(F,e,g),r=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):e.style.backgroundImage=g?"url('data:image/svg+xml;base64,"+btoa(l[f].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(l[f])+"')"),m[d]=h)}},t.create_sensor_manifold(null,"AXES"+u,t.CT_CONTINUOUS,x,function(){return!0},z);h();window.addEventListener("resize",h)};a.hide=function(){E=0;F=-1;N=D=r=y=null;C.length=0;J.length=0;A.length=
0;d.get_container().removeChild(w);w=null;t.remove_sensor_manifold(null,"UPDATE_GAMEPAD_DATA");for(var a=0;4>a;a++)t.remove_sensor_manifold(null,a),t.remove_sensor_manifold(null,"AXES"+a);window.removeEventListener("resize",h)};a.update=function(){for(var a=0;4>a;a++)c(a)}};b4w.module.gyroscope=function(a,u){function e(a){var e=b.create_gyro_angles_sensor(),l=b.create_gyro_quat_sensor(),n=!0;b.create_sensor_manifold(a,"CAMERA_ROTATE_GYRO",b.CT_CONTINUOUS,[e,l],null,function(a,e,l){if(0<l)if(c.is_eye_camera(a))e=b.get_sensor_payload(a,e,1),l=k.transformQuat(p.AXIS_MY,e,h),c.set_vertical_axis(a,l),g.set_rotation_v(a,e);else{v=b.get_sensor_payload(a,e,0);n&&(x[0]=v[0],x[1]=v[1],x[2]=v[2],n=!1);l=e=0;window.orientation||(e=v[1]-x[1],l=v[0]-x[0],v[1]>t&&v[1]<d&&(l=0));if(180==
window.orientation){e=v[1]-x[1];0>v[1]&&(e=-e);l=x[0]-v[0];if(e>Math.PI/2||e<-Math.PI/2)e=0;v[1]>-d&&v[1]<-t&&(l=0)}if(-90==window.orientation){e=v[0]-x[0];if(e>Math.PI/2||e<-Math.PI/2)e=0;l=x[1]-v[1];if(v[0]>q||v[0]<G)l=0}if(90==window.orientation){e=x[0]-v[0];if(e>Math.PI/2||e<-Math.PI/2)e=0;l=v[1]-x[1];if(v[0]>q||v[0]<G)l=0}c.rotate_camera(a,l,e);x[0]=v[0];x[1]=v[1];x[2]=v[2]}})}var c=u("camera"),b=u("controls"),n=u("scenes"),g=u("transform"),p=u("util"),k=u("vec3"),x=new Float32Array(3),v=new Float32Array(3),
h=k.create(),d=p.deg_to_rad(110),t=p.deg_to_rad(70),q=p.deg_to_rad(70),G=-p.deg_to_rad(70);a.enable_camera_rotation=function(){var a=n.get_active_camera();e(a)};a.disable_camera_rotation=function(){var a=n.get_active_camera();b.remove_sensor_manifold(a,"CAMERA_ROTATE_GYRO")}};b4w.module.hmd_conf=function(a,u){function e(){if(!t.can_use_device(t.DEVICE_HMD))return!1;var a=t.get_device_by_type_element(t.DEVICE_HMD),a=t.get_value_param(a,t.HMD_WEBVR_TYPE);return a&(t.HMD_NON_WEBVR|t.HMD_WEBVR_MOBILE|t.HMD_WEBVR_DESKTOP)&&!(a&t.HMD_WEBVR1)}function c(a){a=a.target.value;var b=y[a],c;for(c in w)if(c in b){var d=document.getElementById(c+"_slider");d&&(d.disabled="custom"!==a,d.value=b[c]);if(d=document.getElementById(c+"_number"))d.disabled="custom"!==a,d.value=b[c];w[c]=b[c]}}
function b(){d.remove_sensor_manifold(null,"UPDATE_HMD_RENDERING");g();k();z&&(z=!1,h.get_container().removeChild(l),document.head.removeChild(F),F=r=l=null)}function n(){g(!0);k();for(var a in w){var b=document.getElementById(a+"_slider");b&&(b.value=w[a]);if(b=document.getElementById(a+"_number"))b.value=w[a]}}function g(a){var b=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,c=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,d=0,e=0,g=0,h;a:{h=
N;var k=navigator.userAgent||navigator.vendor||window.opera;if(1==h.format&&h.devices&&h.devices.length)for(var l=0;l<h.devices.length;l++){var n=h.devices[l];if(n.rules&&("ios"==n.type&&f||"android"==n.type)){for(var p=!1,r=0;r<n.rules.length;r++){var t=n.rules[r];if(t.ua&&0<=k.indexOf(t.ua)||!t.ua&&t.res&&t.res[0]&&t.res[1]&&Math.min(b,c)==Math.min(t.res[0],t.res[1])&&Math.max(b,c)==Math.max(t.res[0],t.res[1])){p=!0;break}}if(p){h=l;break a}}}else q.error("DPDB isn't correct.");h=-1}-1!=h&&(g=N.devices[h],
e=g.dpi[1]||g.dpi,d=Math.round(25.4*b/(g.dpi[0]||g.dpi)),e=Math.round(25.4*c/e),g=Math.round(g.bw));b=G.get("hmd_conf","b4w");b=JSON.parse(b?b:"{}");a?(w.first_distortion=.34,w.second_distortion=.55,w.bevel_size=g||4,w.screen_width=d||110,w.screen_height=e||65,w.screen_lense=50,w.ipd=64,w.baseline=32):(w.first_distortion="first_distortion"in b?parseFloat(b.first_distortion):.34,w.second_distortion="second_distortion"in b?parseFloat(b.second_distortion):.55,w.bevel_size="bevel_size"in b?parseFloat(b.bevel_size):
g||4,w.screen_width="screen_width"in b?parseFloat(b.screen_width):d||110,w.screen_height="screen_height"in b?parseFloat(b.screen_height):e||65,w.screen_lense="screen_lense"in b?parseFloat(b.screen_lense):50,w.ipd="ipd"in b?parseFloat(b.ipd):64,w.baseline="baseline"in b?parseFloat(b.baseline):32);E=!0}function p(){G.set("hmd_conf",JSON.stringify(w),"b4w");b()}function k(){if(E){var a=t.get_device_by_type_element(t.DEVICE_HMD);a&&(t.set_config(a,t.HMD_DISTORTION,[w.first_distortion,w.second_distortion]),
t.get_value_param(a,t.HMD_WEBVR_TYPE)&(t.HMD_NON_WEBVR|t.HMD_WEBVR_MOBILE)&&(t.set_config(a,t.HMD_BEVEL_SIZE,.001*w.bevel_size),t.set_config(a,t.HMD_SCREEN_WIDTH,.001*w.screen_width),t.set_config(a,t.HMD_SCREEN_HEIGHT,.001*w.screen_height),t.set_config(a,t.HMD_SCREEN_LENS_DIST,.001*w.screen_lense),t.set_config(a,t.HMD_EYE_DISTANCE,.001*w.ipd),t.set_config(a,t.HMD_BASELINE_DIST,.001*w.baseline)));E=!1}}function x(a){var b=a.target.id.split("_"),b=b.splice(0,b.length-1).join("_");b in w&&w[b]!=a.target.value&&
(E=!0,w[b]=a.target.value,document.getElementById(b+"_slider").value=a.target.value,document.getElementById(b+"_number").value=a.target.value)}function v(a,b,c){var d=document.createElement("button");d.onclick=a;d.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 160px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;padding-left: 8px;line-height: 28px;margin-right:"+
c+";box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";d.innerHTML=b;return d}var h=u("container"),d=u("controls"),t=u("input"),q=u("print"),G=u("storage"),H=u("util"),z=!1,l=null,F=null,r=null,E=!0,w={profile:"custom",first_distortion:0,second_distortion:0,bevel_size:0,screen_width:0,screen_height:0,screen_lense:0,ipd:0,baseline:0},f=/iPad|iPhone|iPod/.test(navigator.platform),y={oculus_dk2:{name:"Oculus Rift DK2",type:2,first_distortion:.22,second_distortion:.28},cardboard_1:{name:"Cardboard (2014)",
type:1,ipd:60,baseline:35,screen_lense:42,first_distortion:.441,second_distortion:.156},cardboard_2:{name:"Cardboard (2015)",type:1,ipd:64,baseline:35,screen_lense:39,first_distortion:.34,second_distortion:.55},custom:{name:"Custom",type:0,ipd:64,baseline:35,screen_lense:39,first_distortion:0,second_distortion:0}},D=[{label:"Tray to lens-center distance.",Eo:!0,inputs:[{id:"baseline",max:"50",step:"0.5"}]},{label:"Interpupillary distance.",Eo:!0,inputs:[{id:"ipd",max:"100",step:"1"}]},{label:"Screen to lense distance.",
Eo:!0,inputs:[{id:"screen_lense",max:"100",step:"1"}]},{label:"Screen height.",Eo:!0,inputs:[{id:"screen_height",max:"150",step:"1"}]},{label:"Screen width.",Eo:!0,inputs:[{id:"screen_width",max:"200",step:"1"}]},{label:"Bevel width.",Eo:!0,inputs:[{id:"bevel_size",max:"20",step:"1"}]},{label:"Distortion coefficients.",inputs:[{id:"first_distortion",max:"1.0",step:"0.01"},{id:"second_distortion",max:"1.0",step:"0.01"}]}];a.check=e;a.show=function(a){if(e()){var f=h.get_container();F=document.createElement("style");
F.innerHTML="."+a+" input[type=range]::-webkit-slider-runnable-track {width: 100%; height: 8px;cursor: pointer;background-color: #fff;border: 2px solid rgba(98, 98, 98, .2);box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);}."+a+" input[type=range]::-webkit-slider-thumb {box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);height: 30px;width: 16px;border-radius: 2px;background-color: #323232;cursor: pointer;margin-top: -13px;-webkit-appearance: none;}";document.head.appendChild(F);if(!z){z=!0;g();var q=
t.get_device_by_type_element(t.DEVICE_MOUSE,f);t.switch_prevent_default(q,!1);q=t.get_device_by_type_element(t.DEVICE_TOUCH,f);t.switch_prevent_default(q,!1);l=document.createElement("div");l.className=a;f.appendChild(l);r=document.createElement("div");l.appendChild(r);r.style.cssText="background-color: #484848;border: 2px solid rgba(150, 150, 150, 0.7);box-shadow: 0px 0px 10px 0px rgba(150, 150, 150, 0.7);position: relative;width: 524px;padding: 16px;overflow: hidden;";a=G.get("hmd_conf","b4w");
a=JSON.parse(a?a:"{}").profile||"custom";f=document.createElement("div");q=document.createElement("label");q.innerHTML="Profile: ";q.className="text_label";q.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 120px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
f.appendChild(q);q=document.createElement("select");f.appendChild(q);q.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";var u=t.get_device_by_type_element(t.DEVICE_HMD);if(u)for(var A in y)if(0==y[A].type||t.get_value_param(u,
t.HMD_WEBVR_TYPE)&(t.HMD_NON_WEBVR|t.HMD_WEBVR_MOBILE)&&1==y[A].type){var E=document.createElement("option");E.value=A;E.text=y[A].name;q.appendChild(E)}q.value=a;H.is_ie11()?q.onchange=c:q.oninput=c;r.appendChild(f);A=t.get_device_by_type_element(t.DEVICE_HMD);for(a=0;a<D.length;a++)if(t.get_value_param(A,t.HMD_WEBVR_TYPE)&(t.HMD_NON_WEBVR|t.HMD_WEBVR_MOBILE)||!D[a].Eo){f=D[a];u=a;q=document.createElement("div");E=document.createElement("label");E.className="text_label";var m="8px";u%2&&(m="0");
E.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 100%;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";E.textContent=f.label;q.appendChild(E);q.style.cssText="margin-top: 16px;float: left;width: 240px;margin-right: "+m+";border-top: 2px solid rgba(98, 98, 98, .4);box-sizing: border-box;-webkit-box-sizing: border-box;padding-top: 8px;";
for(u=0;u<f.inputs.length;u++){E=f.inputs[u];m=document.createElement("div");m.className="row";var K=document.createElement("input");K.className="input_slider";K.style.cssText="-webkit-appearance: none;width: 192px;display: block;float: left;height: 8px;margin-bottom: 16px;margin-top: 16px;box-sizing: border-box;margin-right: 8px;margin-left: 0;";K.setAttribute("id",E.id+"_slider");K.setAttribute("type","range");K.setAttribute("min","0.00");K.setAttribute("step",E.step);K.setAttribute("value",w[E.id]);
K.setAttribute("max",E.max);m.appendChild(K);var R=document.createElement("input");R.className="input_text";R.setAttribute("id",E.id+"_number");R.setAttribute("type","number");R.setAttribute("min","0.00");R.setAttribute("step",E.step);R.setAttribute("value",w[E.id]);R.setAttribute("max",E.max);m.appendChild(R);R.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 40px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;box-sizing: border-box;line-height: 28px;margin-top: 4px;margin-right: 0;margin-left: 0;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
H.is_ie11()?(K.onchange=x,R.onchange=x):(K.oninput=x,R.oninput=x);q.appendChild(m)}r.appendChild(q)}A=document.createElement("div");a=v(p,"SAVE","4px");f=v(b,"CANCEL","4px");q=v(n,"RESET","0px");A.className="row";A.style.cssText="padding-top: 32px;clear: both;box-sizing: border-box;-webkit-box-sizing: border-box;";A.appendChild(a);A.appendChild(f);A.appendChild(q);r.appendChild(A);A=d.create_timeline_sensor();d.create_sensor_manifold(null,"UPDATE_HMD_RENDERING",d.CT_CONTINUOUS,[A],null,k)}}};a.hide=
b;a.reset=n;a.update=function(){g();k()};var N={_comment:"AUTOMATICALLY GENERATED BY generate_dpdb.py. DO NOT EDIT.",format:1,last_updated:"2016-01-26T23:11:18Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},
{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,
518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},
{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},
{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],
dpi:[403.4,402.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],
bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},
{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},
{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],
dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,
bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},
{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1E3},{type:"ios",
rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1E3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1E3}]}};b4w.module.hmd=function(a,u){function e(){n.remove_sensor_manifold(null,"VR_CONTROLLERS")}function c(a,c){function e(c,e,g){if(0<g&&(g=k.get_active_camera())&&b.is_eye_camera(g)){var m=n.get_sensor_payload(c,e,1);c=n.get_sensor_payload(c,e,2);c=d.add(c,N,l);v.set_translation_v(g,c);if(m)if(1==a){var m=p.multiply(D,m,y),u=d.transformQuat(h.AXIS_MY,m,l);b.set_vertical_axis(g,u);v.set_rotation_v(g,m)}else if(2==a||3==a){c=v.get_rotation(g,w);c=p.invert(c,w);e=p.multiply(t,c,w);c=b.get_vertical_axis(g,
l);Math.abs(c[2])<Math.PI/4?u=d.cross(c,h.AXIS_MY,F):Math.abs(c[1])<Math.PI/4&&(u=d.cross(c,h.AXIS_Z,F));d.normalize(u,u);e=d.transformQuat(u,e,r);var x=d.dot(c,e);e=d.scaleAndAdd(e,c,-x,r);d.normalize(e,e);c=d.cross(c,u,l);u=Math.acos(h.clamp(d.dot(u,e),0,1));c=h.sign(d.dot(e,c));q+=u*c;u=p.setAxisAngle(h.AXIS_Z,-q,w);3==a?m=p.multiply(u,m,E):(c=h.quat_project(m,h.AXIS_MZ,h.AXIS_Z,h.AXIS_Y,f),c=p.invert(c,f),m=p.multiply(c,m,f),m=p.multiply(u,m,E));u=d.transformQuat(h.AXIS_MY,m,l);b.set_vertical_axis(g,
u);v.set_rotation_v(g,m);p.copy(m,t)}}}if(c){var g=k.get_active_camera();g&&x.request_split_screen(function(){b.is_eye_camera(g)||(G=b.is_target_camera(g),H=b.is_hover_camera(g),z=b.is_static_camera(g),b.eye_setup(g));var a=n.create_elapsed_sensor(),d=n.create_hmd_position_sensor();t=v.get_rotation(g,t);n.create_sensor_manifold(null,"HMD_ROTATE_CAMERA",n.CT_CONTINUOUS,[a,c,d],null,e)})}}var b=u("camera"),n=u("controls"),g=u("input"),p=u("quat"),k=u("scenes"),x=u("screen"),v=u("transform"),h=u("util"),
d=u("vec3"),t=p.create(),q=0,G=!1,H=!1,z=!1,l=d.create(),F=d.create(),r=d.create(),E=p.create(),w=p.create(),f=p.create(),y=p.create(),D=p.create(),N=d.create(),M={pivot:d.create()};a.HMD_NONE_MOUSE_ALL_AXES=0;a.HMD_ALL_AXES_MOUSE_NONE=1;a.HMD_ROLL_PITCH_MOUSE_YAW=2;a.HMD_ALL_AXES_MOUSE_YAW=3;a.enable_hmd=function(a){var b;if(b=g.get_device_by_type_element(g.DEVICE_HMD))b=g.get_value_param(b,g.HMD_WEBVR_TYPE)&(g.HMD_WEBVR_MOBILE|g.HMD_WEBVR_DESKTOP|g.HMD_WEBVR1)?n.create_hmd_quat_sensor():n.create_gyro_quat_sensor(),
c(a,b)};a.check_browser_support=function(){return!!g.can_use_device(g.DEVICE_HMD)};a.enable_controllers=function(a,b){e();if(a||b){var c=g.get_vr_controller_id(0),f=n.create_gamepad_position_sensor(c),c=n.create_gamepad_orientation_sensor(c),h=g.get_vr_controller_id(1),k=n.create_gamepad_position_sensor(h),h=n.create_gamepad_orientation_sensor(h);n.create_sensor_manifold(null,"VR_CONTROLLERS",n.CT_CONTINUOUS,[f,k,c,h],null,function(c,e){if(a){var f=n.get_sensor_payload(c,e,0),g=n.get_sensor_payload(c,
e,2);d.add(N,f,f);v.set_translation_v(a,f);v.set_rotation_v(a,g)}b&&(f=n.get_sensor_payload(c,e,1),g=n.get_sensor_payload(c,e,3),d.add(N,f,f),v.set_translation_v(b,f),v.set_rotation_v(b,g))})}};a.disable_controllers=e;a.disable_hmd=function(){if(n.check_sensor_manifold(null,"HMD_ROTATE_CAMERA")){n.remove_sensor_manifold(null,"HMD_ROTATE_CAMERA");x.exit_split_screen();var a=k.get_active_camera();G?b.target_setup(a,M):H?b.hover_setup(a,M):z&&b.static_setup(a,M);b.set_vertical_axis(a,h.AXIS_Z);var c=
v.get_rotation(a,E);v.set_rotation_v(a,c)}};a.set_rotate_quat=function(a){p.copy(a,D)};a.get_rotate_quat=function(a){p.copy(D,a);return a};a.set_position=function(a){p.copy(a,N)};a.get_position=function(a){p.copy(N,a);return a}};b4w.module.fps=function(a,u){function e(){}function c(a,b,c){var d=w.get_active_camera();F.rotate_camera(d,b,c);b=F.get_camera_angles_char(d,ma);E.set_character_rotation_h(a,b[0]);E.set_character_vert_move_dir_angle(a,b[1])}function b(a,b,c,d){if(.01<Math.abs(R[0])||.01<Math.abs(R[1]))c=r.get_sensor_value(a,b,0),b=f.smooth(R[0],0,c,.2*O),c=f.smooth(R[1],0,c,.2*O),R[0]-=b,R[1]-=c,d(a,-b*S,-c*S)}function n(a){var b=document.createElement("div");b.style.cssText="position: absolute;left: 10px;bottom: 70px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);";
b.setAttribute("id","B4W_DEFAULT_BTN_1");var c=document.createElement("div");c.style.cssText="position: absolute;left: 10px;bottom: 10px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);transform: rotate(180deg);transform-origin: center;";
c.setAttribute("id","B4W_DEFAULT_BTN_2");a.appendChild(b);a.appendChild(c)}function g(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)}function p(a,c){if(g(a)&&!y.detect_mobile()){var d=r.create_plock_mouse_sensor(a),h=U?U:r.create_plock_sensor(a);U=h;r.create_sensor_manifold(c,"FPS_PLOCK",r.CT_CONTINUOUS,[d,h],function(a){return a[0]&&a[1]},function(a,b,c){0<c&&(b=r.get_sensor_payload(a,b,0),e(a,-b.coords[0]*S,-b.coords[1]*S))});r.create_sensor_manifold(null,
"FPS_ACTIVATE_PLOCK",r.CT_TRIGGER,[h],function(a){return a[0]},function(b,c,d){0<d?ia.Vz&&ia.Vz(a):ia.gr&&ia.gr(a)})}else{if(y.detect_mobile())var d=r.create_touch_move_sensor("XY",a),h=r.create_touch_click_sensor(a),k=4;else{var d=r.create_mouse_move_sensor("XY",a),h=r.create_mouse_click_sensor(a),k=2,l=w.get_active_camera(),n=r.create_elapsed_sensor(),p=r.create_gamepad_axis_sensor(N.GMPD_AXIS_2),q=r.create_gamepad_axis_sensor(N.GMPD_AXIS_3);r.create_sensor_manifold(c,"FPS_CAM_ROT",r.CT_CONTINUOUS,
[n,p,q],function(a){return.05<Math.abs(a[1])||.05<Math.abs(a[2])},function(a,b,c){if(0<c){var d=r.get_sensor_value(a,b,0);c=r.get_sensor_value(a,b,1);b=r.get_sensor_value(a,b,2);d*=2.5;b=-(.05>Math.abs(b)?0:b)*d;c=-(.05>Math.abs(c)?0:c)*d;b=f.clamp(b,m,K);F.rotate_camera(l,c,b);c=F.get_camera_angles(l,ma);E.set_character_rotation_h(a,c[0]+Math.PI)}})}var t=0,u=0;r.create_sensor_manifold(null,"FPS_DRAG_PRESS",r.CT_SHOT,[h],function(a){return a[0]},function(a,b,c){1==c&&(a=r.get_sensor_payload(a,b,
0).coords,t=a[0],u=a[1])});r.create_sensor_manifold(null,"FPS_DRAG_MOVE",r.CT_CONTINUOUS,[d,h],function(a){return a[0]&&a[1]},function(a,b,c){1==c&&(a=r.get_sensor_payload(a,b,0).coords,R[0]+=(a[0]-t)*k,R[1]+=(a[1]-u)*k,t=a[0],u=a[1])});d=r.create_elapsed_sensor();r.create_sensor_manifold(c,"FPS_SMOOTH_DRAG",r.CT_CONTINUOUS,[d],null,b,e)}}function k(a,b){N.add_click_listener(a,function(){M.request_fullscreen_hmd(a,function(){r.check_sensor_manifolds(b,"FPS_PLOCK")&&r.remove_sensor_manifold(b,"FPS_PLOCK");
r.check_sensor_manifolds(null,"FPS_ACTIVATE_PLOCK")&&r.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK");r.check_sensor_manifolds(b,"FPS_CAM_ROT")&&r.remove_sensor_manifold(b,"FPS_CAM_ROT");r.check_sensor_manifolds(null,"FPS_DRAG_PRESS")&&r.remove_sensor_manifold(null,"FPS_DRAG_PRESS");r.check_sensor_manifolds(null,"FPS_DRAG_MOVE")&&r.remove_sensor_manifold(null,"FPS_DRAG_MOVE");r.check_sensor_manifolds(b,"FPS_SMOOTH_DRAG")&&r.remove_sensor_manifold(b,"FPS_SMOOTH_DRAG");A.enable_hmd(A.HMD_ALL_AXES_MOUSE_NONE);
x(b);wa&&wa()},function(){r.remove_sensor_manifold(b,"FPS_CHARECTER_VR_ROT");A.disable_hmd();p(a,b);da&&da()})})}function x(a){var b=r.create_elapsed_sensor(),c=w.get_active_camera();r.create_sensor_manifold(a,"FPS_CHARECTER_VR_ROT",r.CT_CONTINUOUS,[b],null,function(a){var b=F.get_camera_angles_char(c,ma)[0];E.set_character_rotation_h(a,b)})}function v(){var a=A.check_browser_support()&&!y.detect_mobile(),b=N.get_device_by_type_element(N.DEVICE_HMD);b&&(a=a&&N.get_value_param(b,N.HMD_WEBVR_TYPE)&
N.HMD_WEBVR1);return a}function h(a,b,c,d){function e(a){if(h()){4==k.Fk.id&&(a=0);a=0<a?1:a;var d=m+p;p=-(0>a?-1:a);a=q+r;var e=m+p;E.set_character_move_dir(b,a,e);c&&c(a,e);g(a,e);u&&d!=e&&u(a,e,0)}}function f(a){if(h()){a=0<a?1:a;var d=q+r;r=-(0>a?-1:a);a=q+r;var e=m+p;E.set_character_move_dir(b,a,e);c&&c(a,e);g(a,e);u&&d!=a&&u(a,e,0)}}function g(a,b){var c=k.Fk.id;a||b||4==c?0==c&&(0<t?H(k,2):H(k,1)):H(k,0)}function h(){return Z?(r=q=p=m=0,!1):!0}y.detect_mobile()&&n(a.parentElement?a.parentElement:
a);var k=z(b),m=0,p=0,q=0,r=0,t=-1,u=d.move_dir_cd;a=d.nN;var w=d.BU,v=d.MS,x=d.GS,C=d.HU,B=d.EQ;l(1,d.FQ,function(a){if(h()){var d=q+r;q=a;a=q+r;var e=m+p;E.set_character_move_dir(b,a,e);c&&c(a,e);g(a,e);u&&d!=a&&u(a,e,0)}});l(1,a,f);l(1,w,e);l(1,v,function(a){if(h()){4==k.Fk.id&&(a=0);var d=m+p;m=a;a=q+r;var e=m+p;E.set_character_move_dir(b,a,e);c&&c(a,e);g(a,e);u&&d!=e&&u(a,e,0)}});l(1,x,function(a){h()&&0<a&&(E.character_jump(b),u&&u(q+r,m+p,1))});l(3,[N.GMPD_AXIS_0],e);l(3,[N.GMPD_AXIS_1],f);
l(1,C,function(a){t=a;Math.abs(q+r)+Math.abs(m+p)?(0<a?H(k,2):H(k,1),u&&u(q+r,m+p,0)):H(k,0)});l(1,B,function(a){0<a&&(a=sa.Fk.id,1==a||0==a?H(k,3):H(k,1))})}function d(){sa||(sa={Z:[],Fk:null,lock:!1,LS:null});return sa}function t(a,b,c,d){a.Z.push({id:b,az:c,FE:d,EE:null,sz:null})}function q(a){for(var b=[],c=0;c<a.Z;c++){var d=a.Z[c].id;if(0<=b.indexOf(d))return!1;b.push(d)}for(c=0;c<a.Z;c++)for(var d=a.Z[c],e=0;e<d.az.length;e++)if(0>b.indexOf(d.az[e]))return!1;return!0}function G(a,b){for(var c=
null,d=0;d<a.Z.length;d++)if(a.Z[d].id==b){c=a.Z[d];break}return c}function H(a,b){a.LS=b;if(!a.lock){var c=a.Fk,d=c.id;if(0<=c.az.indexOf(b)){var e=!0;c.EE&&(e=c.EE(d,b));e&&(a.Fk=G(a,b),c.FE&&c.FE(d,b),c.sz&&c.sz(d,b))}}}function z(a){function b(b,c){switch(c){case 0:case 1:E.set_character_move_type(a,E.CM_WALK);break;case 2:E.set_character_move_type(a,E.CM_RUN);break;case 3:E.set_character_move_type(a,E.CM_FLY);break;case 4:E.set_character_move_type(a,E.CM_CLIMB)}}var c=d();t(c,0,[1,3,2,4],b);
t(c,1,[2,3,4,0],b);t(c,2,[1,3,4,0],b);t(c,3,[1],b);t(c,4,[1,2,0],b);q(c);c.Fk=G(c,0);return sa}function l(a,b,c){if(b.length){for(var d=[],e=0;e<b.length;e++)if("number"==typeof b[e])300>b[e]?d.push(r.create_keyboard_sensor(b[e])):326>b[e]?d.push(r.create_gamepad_btn_sensor(b[e],fa)):d.push(r.create_gamepad_axis_sensor(b[e]));else if("string"==typeof b[e]){var f=document.getElementById(b[e]);f?d.push(r.create_touch_click_sensor(f)):X.error("Couldn't find element with "+b[e]+" ID.")}b=function(){return!1};
e=r.CT_SHOT;f=function(){};switch(a){case 1:e=r.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};f=function(a,b,d){0<d?c(1):c(0)};break;case 2:e=r.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};f=function(a,b,d){0>d?c(1):c(0)};break;case 3:e=r.CT_CONTINUOUS,b=function(a){for(var b=0;b<a.length;b++)if(.05<Math.abs(a[b]))return!0;return!1},f=function(a,b,d,e){if(0<d)for(d=0;d<e;d++){var f=r.get_sensor_value(a,b,d);if(.05<Math.abs(f)){c(f);
break}}else c(0)}}r.create_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+ga.toString(),e,d,b,f,d.length);ga++}}var F=u("camera"),r=u("controls"),E=u("physics"),w=u("scenes"),f=u("util"),y=u("main"),D=u("container"),N=u("input"),M=u("screen"),B=u("transform"),J=u("constraints"),C=u("vec3"),A=u("hmd"),X=u("print"),m=(-Math.PI+.1)/2,K=(Math.PI-.1)/2,R=new Float32Array(2),O=1,S=4E-4,ga=0,sa=null,U=null,ia={Vz:null,gr:null},fa=0,pa=4,Z=!1,ma=new Float32Array(2),aa=new Float32Array(3),ea=new Float32Array(3),
wa=null,da=null;a.append_switch_vr_cbs=function(a){wa=a};a.CS_STAY=0;a.CS_WALK=1;a.CS_RUN=2;a.CS_FLY=3;a.CS_CLIMB=4;a.AT_PRESSED=1;a.AT_RELEASED=2;a.AT_CONTINUOUS=3;a.bind_action=l;a.enable_fps_controls=function(a){a=a||{lock_camera:!0};var b=a.character||w.get_first_character();if(b){var d=a.element||D.get_canvas(),f=a.motion_cb||null;fa=a.gamepad_id||0;var g=a.forward_sens||[r.KEY_W,N.GMPD_BUTTON_12],l=a.backward_sens||[r.KEY_S,N.GMPD_BUTTON_13],m=a.right_sens||[r.KEY_D,N.GMPD_BUTTON_15],n=a.left_sens||
[r.KEY_A,N.GMPD_BUTTON_14],q=a.jump_sens||[r.KEY_SPACE,N.GMPD_BUTTON_1],t=a.s_||[r.KEY_SHIFT,N.GMPD_BUTTON_7],u=a.fly_sens||[];y.detect_mobile()&&(g.push("B4W_DEFAULT_BTN_1"),l.push("B4W_DEFAULT_BTN_2"));g={FQ:g,nN:l,BU:m,MS:n,GS:q,HU:t,EQ:u,move_dir_cd:a.move_dir_cd||null};e=a.rotation_cb||c;l="undefined"!=typeof a.lock_camera?a.lock_camera:!0;a=w.get_active_camera();l&&(l=B.get_translation(a,aa),m=B.get_translation(b,ea),C.subtract(l,m,l),J.append_stiff_trans(a,b,l));a=F.get_camera_angles_char(a,
ma);E.set_character_rotation_h(b,a[0]);E.set_character_vert_move_dir_angle(b,a[1]);v()&&k(d,b);p(d,b);h(d,b,f,g)}};a.disable_fps_controls=function(a,b){a=a||w.get_first_character();b=b||D.get_container();if(a){for(var c=0;c<ga;c++)r.remove_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+c.toString());var c=a,d=b;g(d)&&!y.detect_mobile()&&(ia.gr&&ia.gr(d),r.remove_sensor_manifold(c,"FPS_PLOCK"),r.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK"));c=a;if(!g(b)||y.detect_mobile())r.remove_sensor_manifold(c,
"FPS_CAM_ROT"),r.remove_sensor_manifold(c,"FPS_DRAG_PRESS"),r.remove_sensor_manifold(c,"FPS_DRAG_MOVE"),r.remove_sensor_manifold(c,"FPS_SMOOTH_DRAG");c=a;v()&&r.remove_sensor_manifold(c,"FPS_CHARECTER_VR_ROT");c=b;if(y.detect_mobile()){var d=document.getElementById("B4W_DEFAULT_BTN_1"),e=document.getElementById("B4W_DEFAULT_BTN_2");d&&c.removeChild(d);e&&c.removeChild(e)}}};a.set_state_change_cb=function(a,b){G(sa,a).sz=b};a.set_cam_smooth_factor=function(a){r.set_plock_smooth_factor(a);O=a};a.get_cam_smooth_factor=
function(){return O};a.set_cam_sensitivity=function(a){S=a/2E5};a.get_cam_sensitivity=function(){return 2E5*S};a.set_plock_enable_cb=function(a){ia.Vz=a};a.set_plock_disable_cb=function(a){ia.gr=a};a.get_character_state=function(){return sa.Fk.id};a.add_new_state=function(){return pa++};a.add_state=function(a,b,c){var e=d();t(e,a,b,c);q(e)||X.error("Incorrect state machine.")};a.switch_state=function(a){var b=d();H(b,a)};a.lock_character=function(){d().lock=!0};a.unlock_character=function(){d().lock=
!1};a.is_character_locked=function(){return d().lock};a.set_rotation_cb=function(a){a?e=a:e=c};a.freeze_movements=function(){Z=!0};a.unfreeze_movements=function(){Z=!1}};b4w.module.mixer=function(a,u){function e(){F=l.length=0;r=c();E=new Float32Array(r.length);w=new Float32Array(r.length);var a=G.get_speaker_objects();if(a.length){l.push(b());for(var d=0;d<a.length;d++)l.push(g(a[d]));l.sort(function(a,b){return"MASTER"==a.id?-1:"MASTER"==b.id?1:"COMPRESSOR"==a.id?-1:"COMPRESSOR"==b.id?1:a.id.toUpperCase()<b.id.toUpperCase()?-1:a.id.toUpperCase()>b.id.toUpperCase()?1:0})}}function c(){for(var a=new Float32Array(100),b=0,c=0;100>c;c++)a[c]=20*Math.pow(1E3,b),b+=1/
99;return a}function b(){var a=n("MASTER"),b=G.get_compressor_params();b&&(a.da.push(["THRESHOLD",b.threshold,-100,0,100,!1]),a.da.push(["KNEE",b.knee,0,40,40,!1]),a.da.push(["RATIO",b.ratio,1,20,20,!1]),a.da.push(["ATTACK",b.attack,0,1,1E3,!1]),a.da.push(["RELEASE",b.release,0,1,1E3,!1]));a.da.push(["VOLUME",G.get_volume(null),0,1,50,!1]);a.mute=G.is_muted(null)?1:0;a.kh=-1;return a}function n(a){return{id:a,da:[],Vl:0,mute:-1,kh:-1,qc:null}}function g(a){var b=n(t.get_object_name(a));b.mute=G.is_muted(a)?
1:0;b.kh=0;b.qc=a;return b}function p(a){if(a.qc){a.da.length=0;var b=G.get_positional_params(a.qc);b&&(a.da.push(["DIST_REF",b.dist_ref,0,1E3,1E4,!1]),a.da.push(["ATTENUATION",b.attenuation,0,50,1E3,!1]),a.da.push(["DIST_MAX",b.dist_max,0,1E4,1E4,!1]));if(b=G.get_filter_params(a.qc))a.da.push(["EQ_FREQ",b.freq,20,2E4,100,!0]),a.da.push(["EQ_Q",b.Q,0,10,100,!1]),a.da.push(["EQ_GAIN",b.gain,-70,30,100,!1]);a.da.push(["VOLUME",G.get_volume(a.qc),0,1,50,!1]);H.clamp(a.Vl,0,a.da.length-1)}}function k(a){for(var b=
0;b<l.length;b++){var c=l[b];if(c!=a&&1==c.kh)return!0}return!1}function x(a){for(var b=0;b<l.length;b++){var c=l[b];c!=a&&0==c.mute&&0==c.kh&&G.mute(c.qc,!1)}}function v(){if(!l.length)return[0,-1];var a=8*Math.floor(F/8),b=a+7,a=H.clamp(a,0,l.length-1),b=H.clamp(b,0,l.length-1);return[a,b]}var h=u("controls"),d=u("print"),t=u("scenes"),q=u("screen"),G=u("sfx"),H=u("util"),z="SWITCH_STRIP SWITCH_STRIP_HOLD SWITCH_PARAM INC_DEC INC_DEC_HOLD MUTE_SOLO".split(" "),l=[],F=0,r=null,E=null,w=null;a.enable_mixer_controls=
function(){function a(a,b,c){if(1==c){var e=h.get_sensor_value(a,b,0)?-1:1,f=l[F];if(f)switch(c=f.da[f.Vl],c[1]=c[5]?c[1]*Math.pow(c[3]/c[2],e/c[4]):c[1]+(c[3]-c[2])/c[4]*e,c[1]=H.clamp(c[1],c[2],c[3]),c[0]){case "VOLUME":"MASTER"!=f.id?G.set_volume(f.qc,c[1]):G.set_volume(null,c[1]);break;case "DIST_REF":e=G.get_positional_params(f.qc);e.dist_ref=c[1];G.set_positional_params(f.qc,e);break;case "ATTENUATION":e=G.get_positional_params(f.qc);e.attenuation=c[1];G.set_positional_params(f.qc,e);break;
case "DIST_MAX":e=G.get_positional_params(f.qc);e.dist_max=c[1];G.set_positional_params(f.qc,e);break;case "EQ_FREQ":e=G.get_filter_params(f.qc);e.freq=c[1];G.set_filter_params(f.qc,e);break;case "EQ_Q":e=G.get_filter_params(f.qc);e.Q=c[1];G.set_filter_params(f.qc,e);break;case "EQ_GAIN":e=G.get_filter_params(f.qc);e.gain=c[1];G.set_filter_params(f.qc,e);break;case "THRESHOLD":f=G.get_compressor_params();f.threshold=c[1];G.set_compressor_params(f);break;case "KNEE":f=G.get_compressor_params();f.knee=
c[1];G.set_compressor_params(f);break;case "RATIO":f=G.get_compressor_params();f.ratio=c[1];G.set_compressor_params(f);break;case "ATTACK":f=G.get_compressor_params();f.attack=c[1];G.set_compressor_params(f);break;case "RELEASE":f=G.get_compressor_params();f.release=c[1];G.set_compressor_params(f);break;default:d.error("Unknown strip param")}"INC_DEC"==b?h.reset_timer_sensor(a,b,2,.35):h.reset_timer_sensor(a,b,2,.05)}else h.reset_timer_sensor(a,b,2,10)}function b(a,b,c){if(1==c){c=h.get_sensor_value(a,
b,0)?-1:1;if(l.length){1==c&&F<l.length-1?F++:-1==c&&0<F&&F--;c=v();for(var d=c[0];d<=c[1];d++)p(l[d])}"SWITCH_STRIP"==b?h.reset_timer_sensor(a,b,2,.15+.3):h.reset_timer_sensor(a,b,2,.15)}else h.reset_timer_sensor(a,b,2,10)}e();var c=h.create_keyboard_sensor(h.KEY_NUM4),g=h.create_keyboard_sensor(h.KEY_NUM6),n=h.create_keyboard_sensor(h.KEY_NUM8),t=h.create_keyboard_sensor(h.KEY_NUM2),u=h.create_keyboard_sensor(h.KEY_ADD),C=h.create_keyboard_sensor(h.KEY_SUB),A=h.create_keyboard_sensor(h.KEY_NUM7),
z=h.create_keyboard_sensor(h.KEY_NUM9),m=h.create_timer_sensor(.15,!0),K=h.create_timer_sensor(.05,!0),c=[c,g,m];h.create_sensor_manifold(null,"SWITCH_STRIP",h.CT_TRIGGER,c,function(a){return a[0]||a[1]},b);h.create_sensor_manifold(null,"SWITCH_STRIP_HOLD",h.CT_SHOT,c,function(a){return(a[0]||a[1])&&a[2]},b);h.create_sensor_manifold(null,"SWITCH_PARAM",h.CT_SHOT,[n,t],function(a){return a[0]||a[1]},function(a,b){var c=h.get_sensor_value(a,b,0)?-1:1,d=l[F];d&&(1==c&&d.Vl<d.da.length-1?d.Vl++:-1==c&&
0<d.Vl&&d.Vl--)});n=[C,u,K];h.create_sensor_manifold(null,"INC_DEC",h.CT_TRIGGER,n,function(a){return a[0]||a[1]},a);h.create_sensor_manifold(null,"INC_DEC_HOLD",h.CT_SHOT,n,function(a){return(a[0]||a[1])&&a[2]},a);h.create_sensor_manifold(null,"MUTE_SOLO",h.CT_SHOT,[A,z],function(a){return a[0]||a[1]},function(a,b){if(h.get_sensor_value(a,b,0)){var c=l[F];c&&0<=c.mute&&("MASTER"!=c.id?0==c.mute?(c.mute=1,G.mute(c.qc,!0),1==c.kh&&(c.kh=0,k(c)||x(c))):(c.mute=0,k(c)||G.mute(c.qc,!1)):0==c.mute?(c.mute=
1,G.mute(null,!0)):(c.mute=0,G.mute(null,!1)))}else if((c=l[F])&&0<=c.kh)if(0==c.kh){c.kh=1;G.mute(c.qc,!1);1==c.mute&&(c.mute=0);for(var d=0;d<l.length;d++){var e=l[d];e!=c&&0==e.mute&&0==e.kh&&G.mute(e.qc,!0)}}else c.kh=0,k(c)?G.mute(c.qc,!0):x(c)});A=h.create_elapsed_sensor();h.create_sensor_manifold(null,"MIXER_DRAW",h.CT_CONTINUOUS,[A],null,function(){if(l[F])for(var a=v(),b=a[0];b<=a[1];b++){var c=l[b];q.draw_mixer_strip(c.id,b==F,b%8,c.da,c.Vl,c.mute,c.kh);if(c.qc&&G.get_filter_params(c.qc)){G.get_filter_freq_response(c.qc,
r,E,w);for(c=0;c<E.length;c++)E[c]=20*Math.log(E[c])/Math.LN10;q.plot_array("EQ",b%8,E,20,2E4,-10,10)}}});A=h.create_timer_sensor(1,!0);h.create_sensor_manifold(null,"MIXER_UPDATE",h.CT_TRIGGER,[A],null,function(){for(var a=v(),b=a[0];b<=a[1];b++)p(l[b])})};a.disable_mixer_controls=function(){for(var a=0;z.length;a++)h.remove_sensor_manifold(null,z[a])}};b4w.module.npc_ai=function(a,u){function e(a,b){var c=b.destination,d=b.ez,e=r;t.get_translation(b.collider,e);var g=0,h=e[2];c[2]=h;switch(b.type){case N:if(b.random&&b.pl){c[0]=(12*Math.random()-6)*b.speed+d[0];c[1]=-(12*Math.random()-6)*b.speed+d[1];var l=y,d=E,n=b.speed,u=b.rot_speed;t.get_rotation(b.collider,l);q.transformQuat(z.AXIS_MY,l,d);d[2]=0;q.normalize(d,d);l=.5*n/Math.sin(u/2);e=q.dist(c,e);e<2*l&&q.scaleAndAdd(c,d,2*l-e,c);b.pl=!1}b.wA&&(g=b.wA-h,e=b.speed*a,g>e?g=e:g<-e&&(g=-e));b.mk=
g;break;case M:case B:b.Wp?g=b.Wp:b.mk&&(g=b.mk,b.type==B&&(g*=a)),b.random&&b.pl&&(b.type==B?(b.speed=Math.random()+.1,e=b.xH-b.AH):e=b.max_height-b.min_height,c[0]=10*Math.random()-5+d[0],c[1]=10*Math.random()-5+d[1],c[2]=h-(Math.random()*e-.5*e),b.pl=!1)}g&&(c[2]=h+g);var c=F,e=r,l=E,g=D,u=b.rig,d=b.collider,h=b.destination,x=b.speed,C=b.actions,G=k.get_current_anim_name(u);if(!k.is_play(u)||!C.idle||-1==C.idle.indexOf(G)){t.get_translation(d,c);var n=h[0]-c[0],H=h[1]-c[1],n=Math.sqrt(n*n+H*H);
if(n>2*x*a)b.state=20,z.horizontal_direction(h,c,l),C=b.rig,k.is_animated(C)&&(u=b.speed,x=k.get_frame(C),C=k.get_anim_length(C),u=C/24*(1-x/C)*u,.9>n/u&&q.scaleAndAdd(h,l,u-n,h)),n=y,u=w,t.get_rotation(b.collider,n),q.transformQuat(z.AXIS_MY,n,e),u[0]=e[0],u[1]=e[1],u[2]=0,q.normalize(u,u),x=q.dot(u,l),C=a/(Math.abs(Math.acos(x))/Math.PI)*b.rot_speed*b.$B,v.rotationTo(u,l,g),v.rotationTo(z.AXIS_MY,u,n),1<=Math.abs(x)?v.copy(n,g):(v.multiply(g,n,g),v.slerp(n,g,Math.min(C,1),g)),l=a,b.type!=M&&(l=
Math.max(l,1/60),n=f,u=y,v.setAxisAngle(z.AXIS_X,-Math.asin(-e[2]),u),v.setAxisAngle(z.AXIS_X,-Math.atan(b.mk/(b.speed*l)),n),v.slerp(u,n,l,n),v.multiply(g,n,g)),t.set_rotation_v(d,g),e=E,d=w,z.quat_to_dir(g,z.AXIS_MY,e),q.scale(e,b.speed*a,d),q.add(d,c,d),d[2]=b.type!=N?(h[2]-c[2])*a*.1+c[2]:h[2],t.set_translation_v(b.collider,d);else if(b.type==N)C.move?G&&-1!=C.move.indexOf(G)&&k.is_play(u)?b.state=20:(b.state=10,b.pl=!0):(b.state=10,b.pl=!0);else if(b.type==B||b.type==M)b.pl=!0;if(p(b)&&(c=b.rig,
!k.is_play(c))){g=null;switch(b.state){case 10:g=b.actions;g=g.idle?z.random_from_array(g.idle):null;break;case 20:g=k.get_current_anim_name(b.rig),e=h=b.actions,e.move_blends&&-1==e.move_blends.indexOf(g)&&e.move&&-1!=e.move.indexOf(g)&&.33<Math.random()?(h=b.actions,g=h.move_blends[h.move.indexOf(g)]):(e=b.actions,e.move&&(-1!=e.move.indexOf(g)||!e.move_blends&&!e.move_start||!e.move_start&&!g||e.move_blends&&-1!=e.move_blends.indexOf(g)||e.move_start&&-1!=e.move_start.indexOf(g))?(h=b.actions,
h.move_blends?(e=h.move_blends.indexOf(g),-1!=e?(g=e+1,g=g<h.move.length?g:0,g=h.move[g]):g=-1!=h.move.indexOf(g)?g:z.random_from_array(h.move)):g=z.random_from_array(h.move)):(e=b.actions,g=e.move_start&&-1==e.move_start.indexOf(g)&&e.move&&-1==e.move.indexOf(g)?z.random_from_array(h.move_start):null))}g&&(k.apply(c,g),k.set_behavior(c,k.AB_FINISH_RESET),k.set_frame(c,0),k.play(c))}}}function c(a,b,c,d){if(d)if(1==c)switch(d.type){case M:a:{for(c=0;3>c;c++){var e=x.get_sensor_payload(a,b,c).hit_fract;
if(e){b=e;break a}}b=void 0}b=100*b;d.mk=b<d.min_height?10:b>d.max_height?-10:0;break;case N:a=x.get_sensor_payload(a,b,0);d.wA=a.hit_pos[2];break;case B:a=x.get_sensor_payload(a,b,0),"CLOSE_GROUND"==b?(d.mk=100*a.hit_fract-1,d.mk=.1>d.mk?.05:0):"CLOSE_WATER"==b&&(d.Wp=100*a.hit_fract,d.Wp=d.Wp<d.AH?-.02:d.Wp>d.xH?.02:0)}else d.mk=0}function b(){for(var a=0;a<l.length;a++){var b=l[a];n(b);g(b);k.get_current_anim_name(b.rig)&&k.play(b.rig)}}function n(a){var b=q.create(),d=a.collider;switch(a.type){case M:var e=
x.create_ray_sensor(d,b,[0,0,-100],"TERRAIN",!0,!0),f=x.create_ray_sensor(d,b,[0,0,-100],"STONE",!0,!0),b=x.create_ray_sensor(d,b,[0,0,-100],"WATER",!0,!0),e=[e,f,b];x.create_sensor_manifold(d,"CLOSE_GROUND",x.CT_CONTINUOUS,e,function(a){return a[0]||a[1]||a[2]},c,a);break;case N:e=x.create_ray_sensor(d,[0,0,1],[0,0,-99],"TERRAIN",!0,!0);e=[e];x.create_sensor_manifold(d,"CLOSE_GROUND",x.CT_CONTINUOUS,e,null,c,a);break;case B:e=x.create_ray_sensor(d,[0,0,1],[0,0,-99],"TERRAIN",!0,!0),b=x.create_ray_sensor(d,
b,[0,0,100],"WATER",!0,!0),e=[e],x.create_sensor_manifold(d,"CLOSE_WATER",x.CT_CONTINUOUS,[b],null,c,a),x.create_sensor_manifold(d,"CLOSE_GROUND",x.CT_CONTINUOUS,e,null,c,a)}}function g(a){var b=a.collider;if(a.type==N){var c=x.create_collision_sensor(b,"CONSTRUCTION",!1);x.create_sensor_manifold(b,"CONSTRUCTION_COLL",x.CT_CONTINUOUS,[c],null,function(b,c,d){1==d?(q.copy(a.ez,a.destination),a.$B=4):a.$B=1})}}function p(a){var b=a.rig;if(!k.is_play(b))return!0;b=k.get_current_anim_name(b);if(!b)return!0;
var c=a.actions;switch(a.state){case 10:if(!c.idle)return!1;break;case 20:if(!c.move||-1!=c.move.indexOf(b)||c.move_start&&-1!=c.move_start.indexOf(b)||c.move_blends&&-1!=c.move_blends.indexOf(b))return!1;break;default:return!1}return!0}var k=u("animation"),x=u("controls"),v=u("quat"),h=u("scenes"),d=u("time"),t=u("transform"),q=u("vec3"),G=u("physics"),H=u("print"),z=u("util"),l=[],F=new Float32Array(3),r=new Float32Array(3),E=new Float32Array(3),w=new Float32Array(3),f=new Float32Array(4),y=new Float32Array(4),
D=new Float32Array(4),N=a.NT_WALKING=10,M=a.NT_FLYING=20,B=a.NT_SWIMMING=30;a.new_event_track=function(a){var b={obj:null,rig:null,collider:null,empty:null,type:N,state:10,actions:{},ez:new Float32Array(3),destination:new Float32Array(3),path:[],start:[],ended:[],ev:[],delay:[],random:!0,pl:!0,wA:0,mk:0,Wp:0,$B:1,speed:1,rot_speed:.1,max_height:0,min_height:0,xH:0,AH:0};if("object"!=typeof a.obj)H.error("Can't create event track. Wrong object.");else if("object"!=typeof a.rig)H.error("Can't create event track. Wrong rig object.");
else if("object"==typeof a.collider&&G.has_physics(a.collider)){b.obj=a.obj;b.collider=a.collider;b.rig=a.rig;t.get_translation(a.collider,b.ez);"object"==typeof a.actions&&(b.actions=a.actions);"boolean"==typeof a.random&&(b.random=a.random);"number"==typeof a.type&&(b.type=a.type);"number"==typeof a.speed&&(b.speed=a.speed);"number"==typeof a.rot_speed&&(b.rot_speed=a.rot_speed);"number"==typeof a.max_height&&(b.max_height=a.max_height);"number"==typeof a.min_height&&(b.min_height=a.min_height);
if(!b.random){for(var c=0;c<a.path.length;c++)b.start[c]=-1,b.ended[c]=!1,b.ev[c]=!1;b.path=a.path;b.delay=a.delay}a=a.actions;var c=k.get_current_anim_name(b.rig),d;for(d in a)for(var e=a[d],f=0;f<e.length;f++)k.apply(b.rig,e[f]);c&&k.apply(b.rig,c);l.push(b)}else H.error("Can't create event track. Wrong collider object.")};a.enable_animation=function(){if(l.length){b();var a=x.create_elapsed_sensor();x.create_sensor_manifold(l[0].collider,"ELAPSED",x.CT_CONTINUOUS,[a],function(a){return a[0]},function(a,
b,c){if(1==c)for(a=x.get_sensor_value(a,b,0),b=0;b<l.length;b++){c=l[b];var f=a;if(h.is_visible(c.obj))if(c.random)e(f,c);else{for(var g=d.get_timeline(),k=0;k<c.path.length;k++)if(!c.ended[k]){c.ev[k]||(c.ev[k]=!0,c.destination[0]=c.path[k][0],c.destination[1]=c.path[k][1],c.destination[2]=c.path[k][2],c.start[k]=g+c.delay[k]);if(g<c.start[k])break;e(f,c);c.ended[k]=c.pl;break}a:{for(f=0;f<c.path.length;f++)if(0==c.ended[f]){f=!1;break a}f=!0}if(f)for(f=0;f<c.path.length;f++)c.ev[f]=!1,c.ended[f]=
!1}}})}};a.disable_animation=function(){if(!(0>=l.length))for(var a=0;a<l.length;a++){var b=l[a];x.check_sensor_manifolds(b.collider)&&x.remove_sensor_manifold(b.collider);k.is_play(b.rig)&&k.stop(b.rig)}}};b4w.module.mouse=function(a,u){function e(){1==D&&(D=0);var a=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock;"function"===typeof a&&a.apply(document);d.remove_sensor_manifold(G.get_active_camera(),"SMOOTH_PL")}function c(a){2==D&&(D=0);a.removeEventListener("mousedown",n,!1);a.removeEventListener("mouseup",g,!1);a.removeEventListener("mousemove",b,!1);d.remove_sensor_manifold(G.get_active_camera(),"SMOOTH_DRAG")}function b(a){if(f()){if(M)var b=h.get_coords_target_space(a,
w);else b=w,b[0]=a.clientX,b[1]=a.clientY;E[0]+=2*(b[0]-F);E[1]+=2*(b[1]-r);F=b[0];r=b[1]}a.preventDefault()}function n(a){if(M)var c=h.get_coords_target_space(a,w);else c=w,c[0]=a.clientX,c[1]=a.clientY;F=c[0];r=c[1];a.currentTarget.addEventListener("mousemove",b,!1);a.preventDefault()}function g(a){a.currentTarget.removeEventListener("mousemove",b,!1);a.preventDefault()}function p(a,b,c,e){if(.01<Math.abs(E[0])||.01<Math.abs(E[1]))b=d.get_sensor_value(a,b,0),a=H.smooth(E[0],0,b,.1*l),b=H.smooth(E[1],
0,b,.1*l),E[0]-=a,E[1]-=b,e(4E-4*-a,4E-4*-b)}function k(a,b){var c=G.get_first_character(),d=G.get_active_camera();v.rotate_camera(d,a,b);c&&(d=v.get_camera_angles_char(d,w),t.set_character_rotation_h(c,d[0]),t.set_character_vert_move_dir_angle(c,d[1]))}function x(a){N?(a=h.get_coords_target_space(a,!1,w),a=G.pick_object(a[0],a[1])):a=G.pick_object(a.clientX,a.clientY);a?(G.outlining_is_enabled(a)&&G.set_outline_intensity(a,1),G.outlining_is_enabled(y)&&a!=y&&G.set_outline_intensity(y,0)):G.outlining_is_enabled(y)&&
G.set_outline_intensity(y,0);y=a}var v=u("camera"),h=u("container"),d=u("controls"),t=u("physics"),q=u("print"),G=u("scenes"),H=u("util"),z=u("main"),l=1,F=0,r=0,E=new Float32Array(2),w=new Float32Array(2),f=null,y=null,D=0,N=!1,M=!1;a.request_pointerlock=function(a,b,e,f,g,h){function l(){if(document.pointerLockElement===a||document.webkitPointerLockElement===a||document.mozPointerLockElement===a){c(a);a.addEventListener("mousemove",f,!1);var g=G.get_active_camera();if(!d.check_sensor_manifold(g,
"SMOOTH_PL")){var k=d.create_elapsed_sensor();d.create_sensor_manifold(g,"SMOOTH_PL",d.CT_CONTINUOUS,[k],null,p,h)}b()}else a.removeEventListener("mousemove",f,!1),D=0,document.removeEventListener("pointerlockchange",l,!1),document.removeEventListener("webkitpointerlockchange",l,!1),document.removeEventListener("mozpointerlockchange",l,!1),e()}if(1!=D){D=1;b=b||function(){};e=e||function(){};h=h||k;g=g||function(){return!0};f=f||function(a){if(g()){if("number"==typeof a.movementX){var b=a.movementX;
a=a.movementY}else"number"==typeof a.webkitMovementX?(b=a.webkitMovementX,a=a.webkitMovementY):"number"==typeof a.mozMovementX?(b=a.mozMovementX,a=a.mozMovementY):a=b=0;E[0]+=b;E[1]+=a}};document.addEventListener("pointerlockchange",l,!1);document.addEventListener("webkitpointerlockchange",l,!1);document.addEventListener("mozpointerlockchange",l,!1);var m=a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock;"function"===typeof m?m.apply(a):q.error("Pointer lock is not available")}};
a.exit_pointerlock=e;a.check_pointerlock=function(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)?!0:!1};a.request_mouse_drag=function(a,b,c,h){2!=D&&(D=2,e(),f=b||function(){return!0},c=c||k,M=!!h,a.addEventListener("mousedown",n,!1),a.addEventListener("mouseup",g,!1),a=G.get_active_camera(),d.check_sensor_manifold(a,"SMOOTH_DRAG")||(b=d.create_elapsed_sensor(),d.create_sensor_manifold(a,"SMOOTH_DRAG",d.CT_CONTINUOUS,[b],null,p,c)))};a.exit_mouse_drag=
c;a.enable_mouse_hover_outline=function(a){N=!!a;z.detect_mobile()||h.get_canvas().addEventListener("mousemove",x)};a.disable_mouse_hover_outline=function(){z.detect_mobile()||(h.get_canvas().removeEventListener("mousemove",x),y&&G.set_outline_intensity(y,0))};a.get_coords_x=function(a,b,c){return c?h.get_coords_target_space(a,b,w)[0]:"clientX"in a?a.clientX:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientX"in a[0]?a[0].clientX:-1};a.get_coords_y=function(a,b,c){return c?
h.get_coords_target_space(a,b,w)[1]:"clientY"in a?a.clientY:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientY"in a[0]?a[0].clientY:-1};a.set_plock_smooth_factor=function(a){l=a};a.get_plock_smooth_factor=function(){return l}};b4w.module.preloader=function(a,u){var e=u("container"),c,b,n,g,p,k,x,v,h=null;a.create_preloader=function(a){var d="#484848",h="#5276cf",k="rgba(150, 150, 150, 0.7)",p="#fff",u;for(u in a)switch(u){case "container_color":d=a.container_color;break;case "bar_color":h=a.bar_color;break;case "frame_color":k=a.frame_color;break;case "font_color":p=a.font_color}a=document.createElement("div");u=a.cloneNode(!1);var l=a.cloneNode(!1),v=a.cloneNode(!1),r=e.get_container();l.appendChild(u);l.appendChild(v);
a.appendChild(l);r.appendChild(a);a.style.cssText="background-color: "+d+";width: 100%;height: 100%;position: absolute;top: 0;left: 0;";l.style.cssText="position: absolute;left: 50%;top: 50%;margin-left: -150px;margin-top: -30px;width: 300px;height: 28px;box-shadow: 0px 0px 10px 0px "+k+";border: 2px solid "+k+";";u.style.cssText="position: absolute;width: 0%;top: 0;left: 0;background-color: "+h+";height: 100%;";v.style.cssText="font-family: Arial, sans-serif;line-height: 28px;height: 100%;width: 100%;top: 0;left: 0;text-align: center;position: absolute;font-size: 16px;font-weight: bold;text-shadow: 0px 0px 6px "+
k+";color: "+p+";";c=u;b=v;n=a;g="DEFAULT"};a.create_simple_preloader=function(a){var d=null,e=null,k="#bf9221",u="#000",v;for(v in a)switch(v){case "canvas_container_id":d=a.canvas_container_id;break;case "background_container_id":e=a.background_container_id;break;case "bg_color":u=a.bg_color;break;case "bar_color":k=a.bar_color}a=document.createElement("div");v=document.createElement("div");a.id="simple_preloader_container";var l=document.createElement("div"),x=document.createElement("div"),e=document.getElementById(e);
h=document.getElementById(d);a.style.cssText="z-index: 4;background-color: "+u+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";v.style.cssText="position: absolute;left: 50%;top: 82%;width: 300px;height: 20px;margin-left: -150px;margin-top: -10px;border-style:solid;border-width:4px;border-color: #000;border-radius: 0px;";l.style.cssText="position: absolute;left: 0px;top: 1px;width: 0px;height: 18px;background-color: "+k+";border-radius: 0px;";x.style.cssText="position: absolute;left: 50%;top: 50%;width: 100%;height: 100%;margin-left: -150px;margin-top: -10px;text-align: center;font-size: 17px;font-weight: bold;color: #000;font-family: Verdana;"+
v.appendChild(l);v.appendChild(x);a.appendChild(v);document.body.appendChild(a);g="SIMPLE";n=a;c=l;b=x;p=e};a.create_rotation_preloader=function(a){var c=null,d=null,e="rgba(0,0,0,0)",u="",v="",l="rgba(0,0,0,0)",x;for(x in a)switch(x){case "canvas_container_id":c=a.canvas_container_id;break;case "background_container_id":d=a.background_container_id;break;case "frame_bg_color":e=a.frame_bg_color;break;case "bg_color":l=a.bg_color;break;case "frame_class":u=a.frame_class;break;case "anim_elem_class":v=
a.anim_elem_class}a=document.createElement("div");x=document.createElement("div");var r=document.createElement("div"),E=document.createElement("div"),d=document.getElementById(d);h=document.getElementById(c);a.style.cssText="z-index: 4;background-color: "+l+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";x.style.cssText="position: absolute;left: 50%;top: 50%;width: 117px;height: 117px;margin-left: -58px;margin-top: -58px;background-color: "+e+";";r.style.cssText=
"position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;background-position: center;background-repeat: no-repeat;";E.style.cssText="position: absolute;width: 100%;height: 100%;text-align: center;margin-top: 38px;font-size: 36px;color: #ffffff;font-family: Arial;font-weight: bold;";r.className=v;x.appendChild(r);x.className=u;x.appendChild(E);a.appendChild(x);h.appendChild(a);g="ROTATION";n=a;k=r;b=E;p=d};a.create_advanced_preloader=function(a){var d=a.preloader_width,d=d/(d-a.img_width),e=
document.getElementById(a.preloader_bar_id),k=document.getElementById(a.fill_band_id),u=document.getElementById(a.preloader_caption_id),z=document.getElementById(a.preloader_container_id),l=document.getElementById(a.background_container_id);h=document.getElementById(a.canvas_container_id);g="ADVANCED";c=e;x=k;v=d;b=u;n=z;p=l};a.update_preloader=function(a){b.innerHTML=a+"%";"SIMPLE"==g?c.style.width=a+"%":"ADVANCED"==g?(c.style.width=a/v+"%",x.style.width=100-a+"%"):"ROTATION"==g?k.style.transform=
"rotate("+a+"deg)":"DEFAULT"==g&&(c.style.width=a+"%");100==a&&(n.parentNode.removeChild(n),p&&p.parentNode.removeChild(p))}};b4w.module.storage=function(a,u){function e(a){return n[a?a:b]?JSON.parse(n[a?a:b]):{}}var c=u("print"),b="b4w",n=null;a.init=function(a){a?"b4w"!==a?b=a:c.error("b4w prefix denied"):c.warn("Prefix should be a string. Last declared storage prefix will be used.")};a.set=function(a,c,k){var g=e(k);g[a]=String(c);n[k?k:b]=JSON.stringify(g)};a.cleanup=function(a){delete n[a?a:b]};a.get=function(a,b){var c=e(b);return c[a]?c[a]:""};a.debug=function(a){c.log(e(a?a:b))};try{n=window.localStorage;try{n.tmp=
null,delete n.tmp}catch(g){c.warn("localStorage quota is limited. Disabling localStorage"),n=null}}catch(g){c.warn("Applying chrome localStorage bug workaround"),n=null}n||(c.warn("localStorage is not available, initializing temporary storage"),n={})};b4w.module.screenshooter=function(a,u){var e=u("screen"),c=u("print");a.shot=function(a,n){c.gd("shot","screen.shot");e.shot(a,n)}};
//# sourceMappingURL=/deploy/apps/common/b4w.min.js.map