

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>物体 &mdash; Blend4Web 17.06 用户手册</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="关于这些文档"
              href="about.html"/>
    <link rel="top" title="Blend4Web 17.06 用户手册" href="index.html"/>
        <link rel="next" title="网格" href="meshes.html"/>
        <link rel="prev" title="场景设置" href="scene_settings.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Blend4Web. 用户手册
        

        
        </a>

        
          
          
            <div class="version">
              v17.06
            </div>
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="engine_features.html">引擎功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">安装和更新</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">工作流程</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_manager.html">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">场景预览器</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_player.html">网络播放器</a></li>
<li class="toctree-l1"><a class="reference internal" href="addon.html">插件</a></li>
<li class="toctree-l1"><a class="reference internal" href="scene_settings.html">场景设置</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">物体</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#types">类型</a></li>
<li class="toctree-l2"><a class="reference internal" href="#static-and-dynamic-objects">静态和动态物体</a></li>
<li class="toctree-l2"><a class="reference internal" href="#settings">设置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#object-tab">物体选项卡</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#transform-panel">变换面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#groups-panel">组面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#levels-of-detail-panel">层次细节面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#animation-panel">动画面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#export-options-panel">导出选项面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rendering-properties-panel">渲染属性面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shadows-panel">阴影面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#billboard-panel">广告牌面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reflections-panel">反射面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#selection-and-outlining-panel">选择和轮廓面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#anchors-panel">锚面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#meta-tags-panel">元标签面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relations-panel">关系面板。</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wind-bending-panel">风弯曲面板</a></li>
<li class="toctree-l4"><a class="reference internal" href="#special-effects-panel">特效面板</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#physics-tab">物理标签</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#object-constraints">Object Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#anchor-settings">锚设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="#object-transform-api">物体变换API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-object-api">获取物体API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#object-selection">物体选择</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copying-objects-instancing">复制物体（实例化）</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#making-a-simple-copy">制作一个简单的复制</a></li>
<li class="toctree-l3"><a class="reference internal" href="#making-a-deep-copy">制作深复制</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removing-objects">删除物体</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quaternions">四元数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#quaternion-example">四元数例子</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#moving-via-tsr-vectors">通过TSR矢量移动</a></li>
<li class="toctree-l2"><a class="reference internal" href="#line-rendering">线渲染</a></li>
<li class="toctree-l2"><a class="reference internal" href="#levels-of-detail">层次细节</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">概述</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specifics-and-differences-from-bge">与BGE的细节和差异</a></li>
<li class="toctree-l3"><a class="reference internal" href="#smooth-lod-switching">平滑LOD切换</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hysteresis">迟滞現象</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="meshes.html">网格</a></li>
<li class="toctree-l1"><a class="reference internal" href="normal_editor.html">法线编辑器</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">相机</a></li>
<li class="toctree-l1"><a class="reference internal" href="materials.html">材质</a></li>
<li class="toctree-l1"><a class="reference internal" href="material_library.html">材质库</a></li>
<li class="toctree-l1"><a class="reference internal" href="node_materials.html">节点材质</a></li>
<li class="toctree-l1"><a class="reference internal" href="logic_editor.html">逻辑编辑器</a></li>
<li class="toctree-l1"><a class="reference internal" href="lighting.html">照明、 阴影和背景</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_effects.html">后期处理效果</a></li>
<li class="toctree-l1"><a class="reference internal" href="stereo_rendering.html">立体渲染</a></li>
<li class="toctree-l1"><a class="reference internal" href="textures.html">纹理</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles.html">粒子系统,流体</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles_instancing.html">粒子系统.实例化</a></li>
<li class="toctree-l1"><a class="reference internal" href="animation.html">动画</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdoor_rendering.html">室外效果</a></li>
<li class="toctree-l1"><a class="reference internal" href="colors.html">色彩管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">音频</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics.html">物理</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">对应用程序开发人员</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers_advanced.html">对于引擎开发者</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_short_manual.html">团队工作。使用 Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems_and_solutions.html">存在的问题及解决方案</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">发布说明</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Blend4Web. 用户手册</a>
      </nav>


      
      <div class="wy-nav-content">
        <div id="lang_cont">
          <a href="#">RU</a>
          <a href="#">EN</a>
          <a href="#">ZH</a>
        </div>
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>物体</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="objects">
<span id="id1"></span><h1><a class="toc-backref" href="#id6">物体</a><a class="headerlink" href="#objects" title="永久链接至标题">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">目录</p>
<ul class="simple">
<li><a class="reference internal" href="#objects" id="id6">物体</a><ul>
<li><a class="reference internal" href="#types" id="id7">类型</a></li>
<li><a class="reference internal" href="#static-and-dynamic-objects" id="id8">静态和动态物体</a></li>
<li><a class="reference internal" href="#settings" id="id9">设置</a><ul>
<li><a class="reference internal" href="#object-tab" id="id10">物体选项卡</a></li>
<li><a class="reference internal" href="#physics-tab" id="id11">物理标签</a></li>
</ul>
</li>
<li><a class="reference internal" href="#object-constraints" id="id12">Object Constraints</a></li>
<li><a class="reference internal" href="#anchor-settings" id="id13">锚设置</a></li>
<li><a class="reference internal" href="#object-transform-api" id="id14">物体变换API</a></li>
<li><a class="reference internal" href="#get-object-api" id="id15">获取物体API</a></li>
<li><a class="reference internal" href="#object-selection" id="id16">物体选择</a></li>
<li><a class="reference internal" href="#copying-objects-instancing" id="id17">复制物体（实例化）</a><ul>
<li><a class="reference internal" href="#making-a-simple-copy" id="id18">制作一个简单的复制</a></li>
<li><a class="reference internal" href="#making-a-deep-copy" id="id19">制作深复制</a></li>
<li><a class="reference internal" href="#removing-objects" id="id20">删除物体</a></li>
</ul>
</li>
<li><a class="reference internal" href="#quaternions" id="id21">四元数</a><ul>
<li><a class="reference internal" href="#quaternion-example" id="id22">四元数例子</a></li>
</ul>
</li>
<li><a class="reference internal" href="#moving-via-tsr-vectors" id="id23">通过TSR矢量移动</a></li>
<li><a class="reference internal" href="#line-rendering" id="id24">线渲染</a></li>
<li><a class="reference internal" href="#levels-of-detail" id="id25">层次细节</a><ul>
<li><a class="reference internal" href="#overview" id="id26">概述</a></li>
<li><a class="reference internal" href="#specifics-and-differences-from-bge" id="id27">与BGE的细节和差异</a></li>
<li><a class="reference internal" href="#smooth-lod-switching" id="id28">平滑LOD切换</a></li>
<li><a class="reference internal" href="#hysteresis" id="id29">迟滞現象</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>物体是在3D场景空间中放置的不同类型（网格，照相机，灯等）的组件。</p>
<div class="section" id="types">
<h2><a class="toc-backref" href="#id7">类型</a><a class="headerlink" href="#types" title="永久链接至标题">¶</a></h2>
<p>该引擎支持以下类型的物体：</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><a class="reference internal" href="meshes.html#meshes"><span>网格(mesh)</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="camera.html#camera"><span>相机</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="lighting.html#lighting"><span>灯光</span></a></p>
</li>
<li><p class="first">空物体</p>
</li>
<li><p class="first"><a class="reference internal" href="animation.html#skeletal-animation"><span>骨架</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="audio.html#audio"><span>声音</span></a></p>
</li>
<li><p class="first">曲线</p>
</li>
<li><p class="first">文本</p>
</li>
<li><p class="first">融球</p>
</li>
<li><p class="first">曲面</p>
</li>
</ul>
</div></blockquote>
<p>在场景导出时，<code class="docutils literal"><span class="pre">CURVE</span></code>，<code class="docutils literal"><span class="pre">TEXT</span></code>，<code class="docutils literal"><span class="pre">METABALL</span></code> 和 <code class="docutils literal"><span class="pre">SURFACE</span></code> 类型的物体转换为 <code class="docutils literal"><span class="pre">MESH</span></code> 类型的物体。</p>
</div>
<div class="section" id="static-and-dynamic-objects">
<span id="static-dynamic-objects"></span><h2><a class="toc-backref" href="#id8">静态和动态物体</a><a class="headerlink" href="#static-and-dynamic-objects" title="永久链接至标题">¶</a></h2>
<p>物体可以是静态或动态的。</p>
<p><strong>静态物体</strong> 是在运行程序时不能移动，动画或以任何其它方式改变的物体。这样的物体可以提高性能，如果它们具有相同的材质可以合并在一起。</p>
<p><strong>动态物体</strong> 在运行的应用程序可以移动，动画或通过其手段改变。它们也可以与其他物体交互，包括静态物体。动态物体不会彼此或与静态物体相结合。</p>
<p>只有 <code class="docutils literal"><span class="pre">MESH</span></code> 和 <code class="docutils literal"><span class="pre">EMPTY</span></code> 类型物体可以是静态的或是动态的。所有其他物体类型，如 <code class="docutils literal"><span class="pre">CAMERA</span></code> 和 <code class="docutils literal"><span class="pre">ARMATURE</span></code>，始终是动态的。</p>
<p>静态 <code class="docutils literal"><span class="pre">MESH</span></code> 物体比动态的渲染得快得多，因此，为了更好的性能，最好将动态网格数保持在最低水平。任何其他类型的物体，静态和动态，不显著影响性能。</p>
<p>具有动画，物理或父关系的是一个动态物体，被认为是动态，以及由下面的逻辑节点控制的物体：</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><code class="docutils literal"><span class="pre">播放动画</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">变换物体</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">移动到</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">继承材质</span></code></p>
</li>
</ul>
</div></blockquote>
<p>API方法是关注物体的运动，复制和动画（包括物体和节点材质）只能应用于动态物体。为了使物体的不动态设置的运动可能，有必要激活设置 <code class="docutils literal"><span class="pre">Force</span> <span class="pre">Dynamic</span> <span class="pre">Object</span></code> 选项。</p>
</div>
<div class="section" id="settings">
<span id="object-settings"></span><h2><a class="toc-backref" href="#id9">设置</a><a class="headerlink" href="#settings" title="永久链接至标题">¶</a></h2>
<p>以下是功能支持所有类型的物体：变换，数据引用，父物体，组成员和一套Blend4Web的特殊属性。</p>
<div class="section" id="object-tab">
<h3><a class="toc-backref" href="#id10">物体选项卡</a><a class="headerlink" href="#object-tab" title="永久链接至标题">¶</a></h3>
<img alt="_images/object_settings.png" class="align-center" src="_images/object_settings.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="transform-panel">
<span id="object-settings-transform"></span><h4>变换面板<a class="headerlink" href="#transform-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_transform.png" class="align-center" src="_images/object_settings_transform.png" />
<dl class="docutils">
<dt><em>变换 &gt; 位置</em></dt>
<dd><p class="first last">位置坐标。</p>
</dd>
<dt><em>变换 &gt; 旋转</em></dt>
<dd><p class="first last">旋转角度。对于物体的旋转所有可用的模式可以使用（<code class="docutils literal"><span class="pre">旋转Mode</span></code>）。但是，只有 <code class="docutils literal"><span class="pre">四元（WXYZ）</span></code> 和 <code class="docutils literal"><span class="pre">XYZ</span> <span class="pre">Euler</span></code> 都支持 <a class="reference internal" href="animation.html#whole-object-anim"><span>物体动画</span></a>.</p>
</dd>
<dt><em>变换 &gt; 缩放</em></dt>
<dd><p class="first last">缩放。所有3分量（X，Y，Z）应该是相同的。缩放不支持物理物体。</p>
</dd>
</dl>
</div>
<div class="section" id="groups-panel">
<span id="object-settings-groups"></span><h4>组面板<a class="headerlink" href="#groups-panel" title="永久链接至标题">¶</a></h4>
<dl class="docutils">
<dt><em>组</em></dt>
<dd><p class="first last">物体所属的物体组</p>
</dd>
</dl>
<img alt="_images/object_settings_groups.png" class="align-center" src="_images/object_settings_groups.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="levels-of-detail-panel">
<span id="object-settings-lod"></span><h4>层次细节面板<a class="headerlink" href="#levels-of-detail-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_lod.png" class="align-center" src="_images/object_settings_lod.png" />
<dl class="docutils">
<dt><em>层次细节&gt; 物体</em></dt>
<dd><p class="first last">用于此层次的细节的物体。</p>
</dd>
<dt><em>层次细节&gt; 距离</em></dt>
<dd><p class="first last">开始使用这个层次细节的距离。</p>
</dd>
</dl>
<p>层次细节的详细描述如下 <a class="reference internal" href="#lods"><span>专门章节</span></a>.</p>
</div>
<div class="section" id="animation-panel">
<span id="object-settings-animation"></span><h4>动画面板<a class="headerlink" href="#animation-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_animation.png" class="align-center" src="_images/object_settings_animation.png" />
<dl class="docutils">
<dt><em>动画 &gt; 应用默认动画</em></dt>
<dd><p class="first last">传到引擎开始后播放物体的动画。</p>
</dd>
<dt><em>动画 &gt; 动画混合</em></dt>
<dd><p class="first last">只对骨骼物体。允许骨骼动画之间进行混合。</p>
</dd>
<dt><em>动画 &gt; 行为</em></dt>
<dd><p class="first last">到达最后一帧时动画的行为：<code class="docutils literal"><span class="pre">完成停止</span></code>  - 停止  <code class="docutils literal"><span class="pre">完成重置</span></code>  - 停止并跳到零帧，<code class="docutils literal"><span class="pre">Loop</span></code>  - 永远重复。</p>
</dd>
</dl>
</div>
<div class="section" id="export-options-panel">
<span id="object-settings-export"></span><h4>导出选项面板<a class="headerlink" href="#export-options-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_export.png" class="align-center" src="_images/object_settings_export.png" />
<dl class="docutils">
<dt><em>导出选项 &gt; 不导出</em></dt>
<dd><p class="first last">不要导出此物体。</p>
</dd>
</dl>
<dl class="docutils" id="apply-modifiers">
<dt><em>导出选项 &gt; 应用修改器</em></dt>
<dd><p class="first last">应用导出物体的修改器。如果使用 <code class="docutils literal"><span class="pre">SKIN</span></code> 修改器，我们建议导出前应用掉它，因为它会重置顶点颜色和UV层可能会导致错误。</p>
</dd>
<dt><em>导出选项 &gt; 应用缩放和修改器</em></dt>
<dd><p class="first last">一旦导出，应用物体的缩放和修改器。</p>
</dd>
<dt><em>导出选项 &gt; 导出顶点动画</em></dt>
<dd><p class="first last">导出以前创建并保存的顶点动画。只适用于 <code class="docutils literal"><span class="pre">MESH</span></code> 类型物体。</p>
</dd>
<dt><em>导出选项 &gt; 导出形变键</em></dt>
<dd><p class="first last">导出形变键。只适用于 <code class="docutils literal"><span class="pre">MESH</span></code> 类型物体。</p>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">以下属性是相互排斥的：<em>应用修改器</em>，<em>应用缩放及修改器</em>，<em>导出顶点动画</em> 和 <em>导出形变键</em> 。</p>
</div>
</div>
<div class="section" id="rendering-properties-panel">
<span id="object-settings-render"></span><h4>渲染属性面板<a class="headerlink" href="#rendering-properties-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_rendering.png" class="align-center" src="_images/object_settings_rendering.png" />
<dl class="docutils">
<dt><em>渲染属性&gt;隐藏</em></dt>
<dd><p class="first last">与此属性启用的物体将在加载时被隐藏。</p>
</dd>
<dt><em>渲染属性&gt;隐藏子物体</em></dt>
<dd><p class="first last">所有的物体的子级和子级的子级等等都将被隐藏起来。仅可用于，启用了 <code class="docutils literal"><span class="pre">Rendering</span> <span class="pre">Properties</span> <span class="pre">&gt;</span> <span class="pre">Hidden</span></code> 属性，并且物体具有任何子项。</p>
</dd>
<dt><em>渲染属性 &gt; 不要渲染</em></dt>
<dd><p class="first">禁止物体的渲染（例如用于有用的物理物体）。</p>
<p class="last">此参数不可用于 <code class="docutils literal"><span class="pre">Empty</span></code> 类型的物体。</p>
</dd>
<dt><em>渲染属性 &gt; 禁止视椎体剔除</em></dt>
<dd><p class="first">禁用视椎体剔除优化。</p>
<p class="last">此参数不可用于 <code class="docutils literal"><span class="pre">Empty</span></code> 类型的物体。</p>
</dd>
<dt><em>渲染属性 &gt; 强制动态物体</em></dt>
<dd><p class="first last">强制物体变成了 <a class="reference internal" href="#static-dynamic-objects"><span>动态物体</span></a>.</p>
</dd>
</dl>
<dl class="docutils" id="dynamic-geom">
<dt><em>渲染属性 &gt; 动态几何体与材质</em></dt>
<dd><p class="first last">允许使用几何更新 API 和为物体继承材质。</p>
</dd>
<dt><em>渲染属性 &gt; 线呈渲染</em></dt>
<dd><p class="first">允许使用该物体到渲染中 <a class="reference internal" href="#line-rendering"><span>参数线条</span></a>.</p>
<p class="last">此参数仅供 <code class="docutils literal"><span class="pre">Empty</span></code> 类型物体。</p>
</dd>
</dl>
</div>
<div class="section" id="shadows-panel">
<span id="object-settings-shadows"></span><h4>阴影面板<a class="headerlink" href="#shadows-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_shadows.png" class="align-center" src="_images/object_settings_shadows.png" />
<dl class="docutils">
<dt><em>阴影 &gt; 投射</em></dt>
<dd><p class="first last">该物体将投射阴影。</p>
</dd>
<dt><em>阴影&gt; 仅投射</em></dt>
<dd><p class="first last">该物体将投射阴影，但仍然看不到自己。成启用 <code class="docutils literal"><span class="pre">阴影&gt;</span> <span class="pre">投射</span></code> 后可用。</p>
</dd>
<dt><em>阴影 &gt; 接受</em></dt>
<dd><p class="first last">该物体将接收来自其他相邻物体的阴影。</p>
</dd>
</dl>
</div>
<div class="section" id="billboard-panel">
<span id="objects-billboarding-properties"></span><h4>广告牌面板<a class="headerlink" href="#billboard-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_billboard.png" class="align-center" src="_images/object_settings_billboard.png" />
<dl class="docutils">
<dt><em>看板</em></dt>
<dd><p class="first last">使用物体作为看板（即自动定向面对摄像机）。</p>
</dd>
</dl>
<dl class="docutils" id="billboarding-preserve">
<dt><em>看板 &gt; 保留全局方向和缩放</em></dt>
<dd><p class="first last">考虑到（世界空间）看板的物体的旋转和缩放。该物体沿Blender的Y轴查看时将朝明显的被引导到相机。启用 <code class="docutils literal"><span class="pre">看板</span></code> 复选框后可用。</p>
</dd>
<dt><em>看板 &gt; 看板类型</em></dt>
<dd><p class="first last">看板方向模式。 <code class="docutils literal"><span class="pre">Spherical</span></code> （默认） - 物体一面始终朝向相机，不管视角，<code class="docutils literal"><span class="pre">Cylindrical</span></code>  - 类似于 <code class="docutils literal"><span class="pre">Spherical</span></code>，但旋转仅限于Blender的世界Z轴。启用看板后变得可用。</p>
</dd>
</dl>
</div>
<div class="section" id="reflections-panel">
<span id="object-settings-reflections"></span><h4>反射面板<a class="headerlink" href="#reflections-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_reflections.png" class="align-center" src="_images/object_settings_reflections.png" />
<dl class="docutils">
<dt><em>反射 &gt; 被反射</em></dt>
<dd><p class="first last">启用后物体被会在动态镜面中被反射。</p>
</dd>
<dt><em>反射 &gt; 仅被反射</em></dt>
<dd><p class="first">物体被反射但仍将看不见自身。开启 <code class="docutils literal"><span class="pre">反射</span> <span class="pre">&gt;</span> <span class="pre">反射性</span></code> 后可用。</p>
<div class="last admonition note">
<p class="first admonition-title">注解</p>
<p>如果  <code class="docutils literal"><span class="pre">Reflexible</span> <span class="pre">Only</span></code> 参数与 <code class="docutils literal"><span class="pre">Shadows</span> <span class="pre">&gt;</span> <span class="pre">Cast</span> <span class="pre">Only</span></code> 参数同时启用，引擎将不会渲染物体本身，而是将渲染它的影子和反射，像下面的图片所示。</p>
<a class="last reference internal image-reference" href="_images/objects_cast_reflexible_only.png"><img alt="_images/objects_cast_reflexible_only.png" class="align-center" src="_images/objects_cast_reflexible_only.png" style="width: 100%;" /></a>
</div>
</dd>
<dt><em>反射 &gt; 反射</em></dt>
<dd><p class="first last">当启用时该物体表面反射的其他物体。</p>
</dd>
<dt><em>反射 &gt; 反射面</em></dt>
<dd><p class="first last">对于一个空物体定义了反射面的Name文本字段。启用 <code class="docutils literal"><span class="pre">反射</span> <span class="pre">&gt;</span> <span class="pre">反射</span></code> 后可用。</p>
</dd>
</dl>
</div>
<div class="section" id="selection-and-outlining-panel">
<span id="object-settings-selection"></span><h4>选择和轮廓面板<a class="headerlink" href="#selection-and-outlining-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_selection.png" class="align-center" src="_images/object_settings_selection.png" />
<dl class="docutils">
<dt><em>选择和外轮廓 &gt; 可选择</em></dt>
<dd><p class="first last">启用 <a class="reference internal" href="#mesh-selection"><span>物体选择</span></a> ，用鼠标或其他输入设备。</p>
</dd>
<dt><em>选择和外轮廓 &gt; 启用外轮廓</em></dt>
<dd><p class="first last">启用物体的 <a class="reference internal" href="postprocessing_effects.html#outline"><span>外轮廓发光</span></a>  。</p>
</dd>
</dl>
</div>
<div class="section" id="anchors-panel">
<span id="object-settings-anchors"></span><h4>锚面板<a class="headerlink" href="#anchors-panel" title="永久链接至标题">¶</a></h4>
<dl class="docutils">
<dt><em>锚 &gt; 启用锚</em></dt>
<dd><p class="first">该参数将启用添加锚（2D标签）到物体的界面。只可用于  <code class="docutils literal"><span class="pre">EMPTY</span></code> 物体。在 <a class="reference internal" href="#objects-anchors"><span>相应章节</span></a> 描述。</p>
<a class="last reference internal image-reference" href="_images/objects_enable_anchors.png"><img alt="_images/objects_enable_anchors.png" class="align-center" src="_images/objects_enable_anchors.png" style="width: 100%;" /></a>
</dd>
</dl>
</div>
<div class="section" id="meta-tags-panel">
<span id="objects-meta-tags"></span><h4>元标签面板<a class="headerlink" href="#meta-tags-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_meta_tags.png" class="align-center" src="_images/object_settings_meta_tags.png" />
<dl class="docutils">
<dt><em>元标签</em></dt>
<dd><p class="first">添加物体的元标签的接口：</p>
<dl class="last docutils">
<dt><em>元标签 &gt; 标题</em></dt>
<dd><p class="first last">物体的标题。</p>
</dd>
<dt><em>元标签 &gt; 类别</em></dt>
<dd><p class="first last">物体的类别。</p>
</dd>
<dt><em>元标签 &gt; 描述</em></dt>
<dd><p class="first last">物体描述。根据 <code class="docutils literal"><span class="pre">说明源</span></code>，此字段接受描述文本本身，或包含的文件的名称。</p>
</dd>
<dt><em>元标签 &gt; 描述源</em></dt>
<dd><p class="first last">为说明来源类型：文本或文本文件。</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="relations-panel">
<span id="object-settings-relations"></span><h4>关系面板。<a class="headerlink" href="#relations-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_relations.png" class="align-center" src="_images/object_settings_relations.png" />
<dl class="docutils">
<dt><em>关系 &gt; 父级</em></dt>
<dd><p class="first">参照父物体。</p>
<p>如果父物体是一个摄像头，<code class="docutils literal"><span class="pre">Viewport</span> <span class="pre">Alignment</span></code> 设置将可见。</p>
<a class="reference internal image-reference" href="_images/objects_viewport_alignment.png"><img alt="_images/objects_viewport_alignment.png" class="align-center" src="_images/objects_viewport_alignment.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="last">这些设置可被用于将物体对准的主控照相机。参考 <a class="reference internal" href="camera.html#camera-viewport-alignment"><span>相机章节</span></a> 的描述。</p>
</dd>
</dl>
</div>
<div class="section" id="wind-bending-panel">
<span id="object-settings-wind"></span><h4>风弯曲面板<a class="headerlink" href="#wind-bending-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_wind.png" class="align-center" src="_images/object_settings_wind.png" />
<dl class="docutils">
<dt><em>风弯曲</em></dt>
<dd><p class="first last">启用风弯曲程序动画。在  <a class="reference internal" href="outdoor_rendering.html#wind-bending"><span>室外渲染</span></a> 页有完整的描述.。</p>
</dd>
</dl>
</div>
<div class="section" id="special-effects-panel">
<span id="object-settings-fx"></span><h4>特效面板<a class="headerlink" href="#special-effects-panel" title="永久链接至标题">¶</a></h4>
<img alt="_images/object_settings_fx.png" class="align-center" src="_images/object_settings_fx.png" />
<dl class="docutils">
<dt><em>特殊效果 &gt; 关闭雾效</em></dt>
<dd><p class="first last">禁用物体的雾。</p>
</dd>
<dt><em>特殊效果 &gt; 焦散</em></dt>
<dd><p class="first last">该物体将渲染自附近水的焦散效果。</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="physics-tab">
<h3><a class="toc-backref" href="#id11">物理标签</a><a class="headerlink" href="#physics-tab" title="永久链接至标题">¶</a></h3>
<a class="reference internal image-reference" href="_images/object_setup_phys.png"><img alt="_images/object_setup_phys.png" class="align-center" src="_images/object_setup_phys.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>检测碰撞</em></dt>
<dd><p class="first last">激活物体的物理。</p>
</dd>
<dt><em>飘浮</em></dt>
<dd><p class="first last">使物体漂浮。在 <a class="reference internal" href="physics.html#physics"><span>physics</span></a> 一节对飘浮物体的设置进行了详细描述。</p>
</dd>
<dt><em>载具</em></dt>
<dd><p class="first last">使用物体作为车辆的一部分。该车辆设置中详细的描述在 <a class="reference internal" href="physics.html#physics"><span>物理</span></a> 一节。</p>
</dd>
<dt><em>角色</em></dt>
<dd><p class="first last">启用物体的角色物理特性。角色设置详细描述在  <a class="reference internal" href="physics.html#physics"><span>物理</span></a> 一节.。</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="object-constraints">
<span id="objects-constraints"></span><h2><a class="toc-backref" href="#id12">Object Constraints</a><a class="headerlink" href="#object-constraints" title="永久链接至标题">¶</a></h2>
<p>Blend4Web engine supports the following object constraints:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Copy</span> <span class="pre">Location</span></code>,</li>
<li><code class="docutils literal"><span class="pre">Copy</span> <span class="pre">Rotation</span></code>,</li>
<li><code class="docutils literal"><span class="pre">Copy</span> <span class="pre">Transforms</span></code> and</li>
<li><code class="docutils literal"><span class="pre">Track</span> <span class="pre">To</span></code>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">When object constraints are used in Blend4Web, the <code class="docutils literal"><span class="pre">Space</span></code> parameter is not taken into account (it is always set to <code class="docutils literal"><span class="pre">World</span> <span class="pre">Space</span></code>).</p>
</div>
<p>These constraints can be set up directly in Blender. Other types of constraints are not currently supported, but some API methods from the <a class="reference external" href="https://www.blend4web.com/api_doc/module-constraints.html">constraints</a> module act similarly. This include:</p>
<ul class="simple">
<li>the <code class="docutils literal"><span class="pre">Copy</span> <span class="pre">Location</span></code> constraint can be emulated with the <a class="reference external" href="https://www.blend4web.com/api_doc/module-constraints.html#.append_copy_loc">append_copy_loc()</a></li>
<li>the <code class="docutils literal"><span class="pre">Copy</span> <span class="pre">Rotation</span></code> constraint works similarly to the <a class="reference external" href="https://www.blend4web.com/api_doc/module-constraints.html#.append_copy_rot">append_copy_rot()</a> method.</li>
<li>the <code class="docutils literal"><span class="pre">Copy</span> <span class="pre">Transforms</span></code> constraint works similarly to the <a class="reference external" href="https://www.blend4web.com/api_doc/module-constraints.html#.append_copy_trans">append_copy_trans()</a> method.</li>
<li>The <code class="docutils literal"><span class="pre">Limit</span> <span class="pre">Distance</span></code> constraint can be emulated with the <a class="reference external" href="https://www.blend4web.com/api_doc/module-constraints.html#.append_follow">append_follow()</a> method, though it should be noted that this method does not set a precise distance between objects (instead, it set a minimum and maximum possible distances).</li>
<li>the <code class="docutils literal"><span class="pre">Track</span> <span class="pre">To</span></code> constraint can be replaced with the <a class="reference external" href="https://www.blend4web.com/api_doc/module-constraints.html#.append_track">append_track()</a> method.</li>
</ul>
<p>Other constraints do not have distinctive counterparts in the API, although their behavior can be to certain extent imitated using API methods.</p>
</div>
<div class="section" id="anchor-settings">
<span id="objects-anchors"></span><h2><a class="toc-backref" href="#id13">锚设置</a><a class="headerlink" href="#anchor-settings" title="永久链接至标题">¶</a></h2>
<p>锚可以用来附加注释到3D物体。不管摄像机位置注释显示在物体附近，甚至在整个动画跟随它。</p>
<a class="reference internal image-reference" href="_images/objects_anchors_example.png"><img alt="_images/objects_anchors_example.png" class="align-center" src="_images/objects_anchors_example.png" style="width: 100%;" /></a>
<p>注释完全可以在Blender中创建。你需要做的是放置一个 <code class="docutils literal"><span class="pre">Empty</span></code> 物体在需要的位置，然后启用 <code class="docutils literal"><span class="pre">Anchor</span></code> 属性。对于注释文本可以在 <code class="docutils literal"><span class="pre">Meta</span> <span class="pre">Tags</span></code>  面板的 <code class="docutils literal"><span class="pre">Title</span></code> 和 <code class="docutils literal"><span class="pre">Description</span></code> 字段进行分配。</p>
<a class="reference internal image-reference" href="_images/objects_anchors_settings.png"><img alt="_images/objects_anchors_settings.png" class="align-center" src="_images/objects_anchors_settings.png" style="width: 100%;" /></a>
<dl class="docutils">
<dt><em>启用锚</em></dt>
<dd><p class="first last">使用此参数可添加锚（2D标签）物体的界面。唯一适用于 <code class="docutils literal"><span class="pre">EMPTY</span></code> 物体。</p>
</dd>
<dt><em>类型</em></dt>
<dd><p class="first">锚类型</p>
<ul class="simple">
<li><p class="first"><code class="docutils literal"><span class="pre">Annotation</span></code> - 内容从 <a class="reference internal" href="#objects-meta-tags"><span>元标签</span></a> 所获得再分配给物体，显示出标准的部分。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Custom</span> <span class="pre">Element</span></code> - 从当前网页的任意HTML元素用作锚。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Generic</span></code> - 一个锚点的位置，可以使用 <code class="docutils literal"><span class="pre">anchors</span></code>  API模块进行检测。</p>
</li>
</ul>
<p class="last">默认值是 <code class="docutils literal"><span class="pre">Annotation</span></code>。</p>
</dd>
<dt><em>HTML元素ID</em></dt>
<dd><p class="first last">这指定了将被用作锚的HTML元素的ID。这是仅当 <code class="docutils literal"><span class="pre">Type</span></code> 参数设置为 <code class="docutils literal"><span class="pre">Custom</span> <span class="pre">Element</span></code>.</p>
</dd>
<dt><em>可见检测</em></dt>
<dd><p class="first last">检测锚物体是否被其他物体重叠。打开此选项会降低性能，应该只在必要时使用。</p>
</dd>
<dt><em>最大宽度</em></dt>
<dd><p class="first last">此参数通过一个预定义的值来限制扩展信息窗口（测量用 CSS像素）。只有当 <code class="docutils literal"><span class="pre">Type</span></code> 参数设置为 <code class="docutils literal"><span class="pre">Annotation</span></code> 时才可用，它被设置为默认值为250。</p>
</dd>
</dl>
</div>
<div class="section" id="object-transform-api">
<span id="index-0"></span><h2><a class="toc-backref" href="#id14">物体变换API</a><a class="headerlink" href="#object-transform-api" title="永久链接至标题">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">请确保您要变换的物体是 <a class="reference internal" href="#static-dynamic-objects"><span>动态物体</span></a>.</p>
</div>
<p>使用 <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html">transform</a> 模块的下列方法在引擎中移动物体：</p>
<dl class="docutils">
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.get_translation">get_translation()</a></dt>
<dd><p class="first last">获得在世界空间的物体中心坐标。带一个参数的方法返回一个新向量（一个非优化选项），同时用两个参数的方法需要一个额外的矢量记录结果。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.get_translation_rel">get_translation_rel()</a></dt>
<dd><p class="first last">类似于 <code class="docutils literal"><span class="pre">get_translation（）</span></code> 方法，但如果此物体有父级，得到的坐标在父级的空间测量。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_translation">set_translation()</a>, <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_translation_v">set_translation_v()</a></dt>
<dd><p class="first last">移动物体的中心到指定的位置。第一种方法需要单独的坐标作为参数，而第二个需要三元矢量（<code class="docutils literal"><span class="pre">Array</span></code> 或 <code class="docutils literal"><span class="pre">Float32Array</span></code>）。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_translation_rel">set_translation_rel()</a>, <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_translation_rel_v">set_translation_rel_v()</a></dt>
<dd><p class="first last">类似 <code class="docutils literal"><span class="pre">set_translation()</span></code> 和 <code class="docutils literal"><span class="pre">set_translation_v()</span></code>，但如果这个物体有父级，设定坐标为测量父级的空间。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.get_rotation">get_rotation()</a></dt>
<dd><p class="first last">获取在世界空间的物体的旋转四元数。类似 <code class="docutils literal"><span class="pre">get_translation()</span></code>，调用此函数也有两种选择。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.get_rotation_rel">get_rotation_rel()</a></dt>
<dd><p class="first last">获取物体的在其父级空间的旋转四元。类似  <code class="docutils literal"><span class="pre">get_translation_rel()</span></code>，调用此函数也有两种选择。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_rotation">set_rotation()</a>, <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_rotation_v">set_rotation_v()</a></dt>
<dd><p class="first last">设置在世界空间物体的旋转四元数。第一个功能需要单独的坐标参数，而第二个需要一个四元矢量（<code class="docutils literal"><span class="pre">Array</span></code> 或 <code class="docutils literal"><span class="pre">Float32Array</span></code> ）。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_rotation_rel">set_rotation_rel()</a>, <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_rotation_rel_v">set_rotation_rel_v()</a></dt>
<dd><p class="first last">设置物体在其父的空间中的旋转四元数。第一个功能需要单独的坐标参数，而第二个需要一个四元矢量（<code class="docutils literal"><span class="pre">Array</span></code> 或 <code class="docutils literal"><span class="pre">Float32Array</span></code>）。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.get_scale">get_scale()</a></dt>
<dd><p class="first last">获取物体在世界空间的缩放。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.get_scale_rel">get_scale_rel()</a></dt>
<dd><p class="first last">获取物体在其父的空间的缩放。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_scale">set_scale()</a></dt>
<dd><p class="first last">设置物体在世界空间的缩放。统一对应于物体的原始缩放。值小于统一值是平均缩小，比统一值大 - 扩大。注意，不是所有的物体可以被缩放。特别是不允许物理物体缩放。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_scale_rel">set_scale_rel()</a></dt>
<dd><p class="first last">设置物体在其父的空间的缩放。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_rotation_euler">set_rotation_euler()</a>, <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_rotation_euler_v">set_rotation_euler_v()</a></dt>
<dd><p class="first last">使用欧拉角设置物体的旋转。一个 <strong>intrinsic</strong> YZX 系统被使用（这意味着角遵循YZX顺序和坐标原点旋转，并且每角采取了一个新的位置）。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_rotation_euler_rel">set_rotation_euler_rel()</a>, <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.set_rotation_euler_rel_v">set_rotation_euler_rel_v()</a></dt>
<dd><p class="first last">使用欧拉角在其父的空间中设置物体的旋转。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.move_local">move_local()</a></dt>
<dd><p class="first last">相对移动到原来的位置的物体（在局部空间）。</p>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.rotate_x_local">rotate_x_local()</a>, <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.rotate_y_local">rotate_y_local()</a>, <a class="reference external" href="https://www.blend4web.com/api_doc/module-transform.html#.rotate_z_local">rotate_z_local()</a></dt>
<dd><p class="first last">相对于物体原来位置的（在本地空间）旋转。</p>
</dd>
</dl>
</div>
<div class="section" id="get-object-api">
<span id="index-1"></span><span id="id2"></span><h2><a class="toc-backref" href="#id15">获取物体API</a><a class="headerlink" href="#get-object-api" title="永久链接至标题">¶</a></h2>
<p>对物体执行任何操作，您首先需要得到它（找到到它的链接）。有几个API函数是做这个的。有链接的物体具有 <code class="docutils literal"><span class="pre">Object3D</span></code> 类型。</p>
<dl class="docutils">
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-scenes.html#.get_object_by_name">get_object_by_name()</a></dt>
<dd><p class="first">按名称获取物体。</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">get_object_by_name</span><span class="p">(</span><span class="s2">&quot;Object&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-scenes.html#.get_object_by_dupli_name">get_object_by_dupli_name()</a></dt>
<dd><p class="first">通过空名称和DUPLI名称找复制物体。</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">get_object_by_dupli_name</span><span class="p">(</span><span class="s2">&quot;Empty&quot;</span><span class="p">,</span> <span class="s2">&quot;Object&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-scenes.html#.get_object_by_dupli_name_list">get_object_by_dupli_name_list()</a></dt>
<dd><p class="first">通过空名称和DUPLI名单（<code class="docutils literal"><span class="pre">String</span></code> 类型元素的数组）获得复制物体。</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">get_object_by_dupli_name_list</span><span class="p">([</span><span class="s2">&quot;Empty1&quot;</span><span class="p">,</span> <span class="s2">&quot;Empty2&quot;</span><span class="p">,</span> <span class="s2">&quot;Object&quot;</span><span class="p">]);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-scenes.html#.get_object_name_hierarchy">get_object_name_hierarchy()</a></dt>
<dd><p class="first">用一个给定的物体，返回物体名层次队列（从最高层的父物体到物体本身）。</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">names</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">get_object_name_hierarchy</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-scenes.html#.check_object_by_name">check_object_by_name()</a></dt>
<dd><p class="first">检查是否具有给定名称的物体在场景存在。</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">object_exists</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">check_object_by_name</span><span class="p">(</span><span class="s2">&quot;Cube&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-scenes.html#.check_object_by_dupli_name">check_object_by_dupli_name()</a></dt>
<dd><p class="first">检查复制物体是空的名字和DUPLI名字出现在场景。</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">object_exists</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">check_object_by_dupli_name</span><span class="p">(</span><span class="s2">&quot;Empty&quot;</span><span class="p">,</span> <span class="s2">&quot;Cube&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-scenes.html#.check_object_by_dupli_name_list">check_object_by_dupli_name_list()</a></dt>
<dd><p class="first">检查复制物体是空的名字和DUPLI名单（<code class="docutils literal"><span class="pre">String</span></code> 类型元素的数组）出现在场景。</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">object_exists</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">check_object_by_dupli_name_list</span><span class="p">([</span><span class="s2">&quot;Empty1&quot;</span><span class="p">,</span> <span class="s2">&quot;Empty2&quot;</span><span class="p">,</span> <span class="s2">&quot;Object&quot;</span><span class="p">]);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</dd>
<dt><a class="reference external" href="https://www.blend4web.com/api_doc/module-scenes.html#.get_object_name">get_object_name()</a></dt>
<dd><p class="first">获取物体的名称。</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">object_name</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">get_object_name</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="object-selection">
<span id="mesh-selection"></span><h2><a class="toc-backref" href="#id16">物体选择</a><a class="headerlink" href="#object-selection" title="永久链接至标题">¶</a></h2>
<p>为了使一个特定的物体能被选择，需要 <code class="docutils literal"><span class="pre">Selection</span> <span class="pre">and</span> <span class="pre">Outlining</span></code> 面板上的 <code class="docutils literal"><span class="pre">Selectable</span></code> 复选框启用。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">确保在 <code class="docutils literal"><span class="pre">Scene</span> <span class="pre">&gt;</span> <span class="pre">Object</span> <span class="pre">Outlining</span></code> 面板被设置为 <code class="docutils literal"><span class="pre">ON</span></code> 或 <code class="docutils literal"><span class="pre">AUTO</span></code>。</p>
</div>
<p>物体选择也可以通过API编程方式，例如，在 <code class="docutils literal"><span class="pre">scenes.js</span></code> 模块有基于二维的画布坐标选择物体的 <code class="docutils literal"><span class="pre">pick_object</span></code> 函数。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">pick_object</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>or using the <a class="reference internal" href="logic_editor.html#logic-switch-select"><span>Logic Editor</span></a>.</p>
<p>如果选择的物体已启用了 <code class="docutils literal"><span class="pre">Object</span> <span class="pre">&gt;</span> <span class="pre">Selection</span></code> 和轮廓面板上的 <code class="docutils literal"><span class="pre">Enable</span> <span class="pre">Outlining</span></code> 和 <code class="docutils literal"><span class="pre">Outline</span> <span class="pre">on</span> <span class="pre">Select</span></code> 选框，那么 <code class="docutils literal"><span class="pre">pick_object</span></code> 函数调用将激活 <a class="reference internal" href="postprocessing_effects.html#outline"><span>外轮廓辉光动画</span></a> 。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">如果选定的物体是透明的（<code class="docutils literal"><span class="pre">Blend</span></code>，<code class="docutils literal"><span class="pre">Add</span></code> 和 <code class="docutils literal"><span class="pre">Sort</span></code> 透明度类型），外轮廓发光只能在具有 <code class="docutils literal"><span class="pre">Alpha</span></code> 高于0.5的部分可见。</p>
</div>
</div>
<div class="section" id="copying-objects-instancing">
<span id="mesh-copy"></span><h2><a class="toc-backref" href="#id17">复制物体（实例化）</a><a class="headerlink" href="#copying-objects-instancing" title="永久链接至标题">¶</a></h2>
<p>它通常需要复制（使的实例）中的应用程序的工作物体。</p>
<dl class="docutils">
<dt>复制物体也有其局限性：</dt>
<dd><ul class="first last simple">
<li><p class="first">只有 <code class="docutils literal"><span class="pre">MESH</span></code> 物体可以被复制</p>
</li>
<li><p class="first">物体应该是 <a class="reference internal" href="#static-dynamic-objects"><span>动态</span></a> （启用 <code class="docutils literal"><span class="pre">渲染属性&gt;强制动态</span> <span class="pre">Object</span></code>）</p>
</li>
<li><p class="first">源物体应该属于活动场景</p>
</li>
</ul>
</dd>
</dl>
<div class="section" id="making-a-simple-copy">
<h3><a class="toc-backref" href="#id18">制作一个简单的复制</a><a class="headerlink" href="#making-a-simple-copy" title="永久链接至标题">¶</a></h3>
<p>在简单复制的情况下，新的物体将共享与原始物体的网格。因此，如果原始物体的网格被改变，则复制的物体的网格也将被改变。为了让简单复制可能的，但它足以打开``Blend4Web&gt;强制动态Object``源物体的属性设置。</p>
</div>
<div class="section" id="making-a-deep-copy">
<h3><a class="toc-backref" href="#id19">制作深复制</a><a class="headerlink" href="#making-a-deep-copy" title="永久链接至标题">¶</a></h3>
<p>在深度复制的情况下，新物体将具有独特的性质，即它会有自己的网格。因此，如果原始物体的网格被改变，则复制的物体的网格将不被改变。另外，在复制的物体在画布纹理不同的纹理和不同一个像它与简单复制的情况。为了使深度复制可能，要求源物体启用 <a class="reference internal" href="#dynamic-geom"><span>渲染属性&gt;动态几何</span></a> 复选框. |</p>
<p>在运行时复制物体可以使用 <code class="docutils literal"><span class="pre">objects.js</span></code> 模块的 <code class="docutils literal"><span class="pre">copy</span></code> 方法进行。此方法需要三个参数：源物体的id，新物体一个唯一的名称和布尔值，以指定复制模式（即简单或深度）。默认情况下，简单复制将被执行。</p>
<p>新创建的物体，应添加到场景。这可以用 <code class="docutils literal"><span class="pre">scenes.js</span></code> 模块的 <code class="docutils literal"><span class="pre">append_object</span></code> 方法进行。新物体应该被传递给它作为参数。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">new_obj</span> <span class="o">=</span> <span class="nx">m_objects</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s2">&quot;New_name&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">m_scenes</span><span class="p">.</span><span class="nx">append_object</span><span class="p">(</span><span class="nx">new_obj</span><span class="p">);</span>
<span class="nx">m_transform</span><span class="p">.</span><span class="nx">set_translation</span><span class="p">(</span><span class="nx">new_obj</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="removing-objects">
<h3><a class="toc-backref" href="#id20">删除物体</a><a class="headerlink" href="#removing-objects" title="永久链接至标题">¶</a></h3>
<p>要删除物体，请使用 <code class="docutils literal"><span class="pre">scenes.js</span></code> 模块的 <code class="docutils literal"><span class="pre">remove_object</span></code> 方法。传递物体作为参数。动态网格-空类型的物体可以用这种方式删除。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nx">m_objects</span><span class="p">.</span><span class="nx">remove_object</span><span class="p">(</span><span class="nx">new_obj</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="quaternions">
<span id="index-2"></span><h2><a class="toc-backref" href="#id21">四元数</a><a class="headerlink" href="#quaternions" title="永久链接至标题">¶</a></h2>
<p>四元数是用于执行旋转的四分量矢量。四元数优于其它旋转方法，例如：</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">四元数没有多解，并且不像欧拉角依赖于的旋转顺序。</p>
</li>
<li><p class="first">四元数的内存使用是更有效的（少2-4倍，取决于所使用的矩阵）。</p>
</li>
<li><p class="first">在一系列旋转的情况下，比矩阵有更好的计算效率。</p>
</li>
<li><p class="first">数值稳定 - 从浮点数不准确而产生乘法错误的补偿。</p>
</li>
<li><p class="first">便捷的插值方法。</p>
</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>四元有一些缺点：</dt>
<dd><ul class="first last simple">
<li><p class="first">用四元数来旋转向量比用矩阵来旋转向量要浪费计算成本。</p>
</li>
<li><p class="first">很难将四元数用到非旋转变换上（例如透视或正交投影）。</p>
</li>
</ul>
</dd>
</dl>
<p>该引擎具有许多功能，能更方便地跟四元数工作：</p>
<dl class="docutils">
<dt><em>quat.multiply</em></dt>
<dd><p class="first last">四元数乘法。需要注意的是用B四元数左乘A四元数A * B  是用A旋转物体。比如，物体已经具有一定的旋转B上，我们加了新的A旋转。</p>
</dd>
<dt><em>quat.setAxisAngle</em></dt>
<dd><p class="first last">四元数是任意相对于任意轴（矢量）的任意角度旋转的另一种表现。从向量的末端来观看时旋转的正方向定义为逆时针。例如 <code class="code docutils literal"><span class="pre">quat.setAxisAngle([1,</span> <span class="pre">0,</span> <span class="pre">0],</span> <span class="pre">Math.PI/2,</span> <span class="pre">quat)</span></code>  用四元数对物体相对于X轴旋转了90度（如果从X轴末端查看是逆时针）。</p>
</dd>
<dt><em>quat.slerp</em></dt>
<dd><p class="first last">四元数球面插值。用于平滑物体的旋转和动画。</p>
</dd>
<dt><em>util.euler_to_quat, util.quat_to_euler</em>.</dt>
<dd><p class="first last">从欧拉角转换到和转换回欧拉角。</p>
</dd>
</dl>
<div class="section" id="quaternion-example">
<h3><a class="toc-backref" href="#id22">四元数例子</a><a class="headerlink" href="#quaternion-example" title="永久链接至标题">¶</a></h3>
<p>我们需要在水平面向右旋转物体60度。我们有一个在Blender里有个名为 “Cessna” 的模型。</p>
<a class="reference internal image-reference" href="_images/objects_aircraft.png"><img alt="_images/objects_aircraft.png" class="align-center" src="_images/objects_aircraft.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>让我们在 <strong>aircraft</strong> 变量保存引用：</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">aircraft</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">get_object_by_name</span><span class="p">(</span><span class="s2">&quot;Cessna&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>旋转：</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">顺时针转动对应于旋转到右侧（即在负方向）。</p>
</li>
<li><p class="first">60 度 = <span class="math">\(\pi/3\)</span> 弧度.</p>
</li>
</ul>
</div></blockquote>
<p>因此，我们得到：</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// compose quaternion</span>
<span class="kd">var</span> <span class="nx">quat_60_Z_neg</span> <span class="o">=</span> <span class="nx">m_quat</span><span class="p">.</span><span class="nx">setAxisAngle</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="nx">m_quat</span><span class="p">.</span><span class="nx">create</span><span class="p">());</span>

<span class="c1">// get old rotation</span>
<span class="kd">var</span> <span class="nx">quat_old</span> <span class="o">=</span> <span class="nx">m_transform</span><span class="p">.</span><span class="nx">get_rotation</span><span class="p">(</span><span class="nx">aircraft</span><span class="p">);</span>

<span class="c1">// left multiply: quat60_Z_neg * quat_old</span>
<span class="kd">var</span> <span class="nx">quat_new</span> <span class="o">=</span> <span class="nx">m_quat</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">quat_60_Z_neg</span><span class="p">,</span> <span class="nx">quat_old</span><span class="p">,</span> <span class="nx">m_quat</span><span class="p">.</span><span class="nx">create</span><span class="p">());</span>

<span class="c1">// set new rotation</span>
<span class="nx">m_transform</span><span class="p">.</span><span class="nx">set_rotation_v</span><span class="p">(</span><span class="nx">aircraft</span><span class="p">,</span> <span class="nx">quat_new</span><span class="p">);</span>
</pre></div>
</div>
<p>优化的版本不创建新的物体：</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// cache arrays as global vars</span>
<span class="kd">var</span> <span class="nx">AXIS_Z</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="kd">var</span> <span class="nx">quat_tmp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">quat_tmp2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="p">...</span>
<span class="c1">// rotate</span>
<span class="nx">m_quat</span><span class="p">.</span><span class="nx">setAxisAngle</span><span class="p">(</span><span class="nx">AXIS_Z</span><span class="p">,</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="nx">quat_tmp</span><span class="p">);</span>
<span class="nx">m_transform</span><span class="p">.</span><span class="nx">get_rotation</span><span class="p">(</span><span class="nx">aircraft</span><span class="p">,</span> <span class="nx">quat_tmp2</span><span class="p">);</span>
<span class="nx">m_quat</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">quat_tmp</span><span class="p">,</span> <span class="nx">quat_tmp2</span><span class="p">,</span> <span class="nx">quat_tmp</span><span class="p">);</span>
<span class="nx">m_transform</span><span class="p">.</span><span class="nx">set_rotation_v</span><span class="p">(</span><span class="nx">aircraft</span><span class="p">,</span> <span class="nx">quat_tmp</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="moving-via-tsr-vectors">
<h2><a class="toc-backref" href="#id23">通过TSR矢量移动</a><a class="headerlink" href="#moving-via-tsr-vectors" title="永久链接至标题">¶</a></h2>
<p>有时用下面格式的矢量来移动物体是很方便的：</p>
<blockquote>
<div><span class="math">\([T_x, T_y, T_z, S, R_x, R_y, R_z, R_w]\)</span></div></blockquote>
<p>在这里 <span class="math">\(T_x, T_y, T_z\)</span> - 位移向量的分量，<span class="math">\(S\)</span> - 比例系数， <span class="math">\(R_x, R_y, R_z, R_w\)</span> - 四元数向量的分量。这个向量故名：TSR或TSR-8。</p>
<p>该向量可通过 <cite>tsr</cite> 模块以及经由 <cite>transform</cite> 模块的  <cite>set_tsr()</cite>/<cite>get_tsr()</cite>  的方法操作。</p>
</div>
<div class="section" id="line-rendering">
<span id="id3"></span><h2><a class="toc-backref" href="#id24">线渲染</a><a class="headerlink" href="#line-rendering" title="永久链接至标题">¶</a></h2>
<p>Blend4Web 引擎还具有功能选项能够渲染点集定义的线。</p>
<a class="reference internal image-reference" href="_images/objects_line_rendering.png"><img alt="_images/objects_line_rendering.png" class="align-center" src="_images/objects_line_rendering.png" style="width: 100%;" /></a>
<p>用于渲染线的API 方法位于 <a class="reference external" href="https://www.blend4web.com/api_doc/module-geometry.html">geometry</a>  模块，可以设置渲染线的样式（即其颜色和厚度）需要用 <a class="reference external" href="https://www.blend4web.com/api_doc/module-material.html#.set_line_params">set_line_params()</a> 的方法，位于 <a class="reference external" href="https://www.blend4web.com/api_doc/module-material.html">material</a> 模块。</p>
<p>若要使用线条的渲染效果，至少需要在场景中存在一个 <code class="docutils literal"><span class="pre">Empty</span></code> 类型物体启用了 <code class="docutils literal"><span class="pre">线渲染</span></code> 选项。</p>
<p>要渲染一条线，你首先必须 <a class="reference internal" href="#get-object-api"><span>获取链接</span></a> 到 <code class="docutils literal"><span class="pre">Empty</span></code> 物体。此物体的起始点将用作线在渲染时的中心坐标。</p>
<p>可以通过调用 <a class="reference external" href="https://www.blend4web.com/api_doc/module-geometry.html#.draw_line">draw_line()</a> API 方法渲染线条。其第一个参数是指向  <code class="docutils literal"><span class="pre">Empty</span></code> 物体 （见上面），而第二个是用于建立一条线的一列顶点数组。该方法也拥有第三个可选的参数，定义渲染模式︰ 方法由成对的顶点定义生成一条或一组线 （后一种情况下的顶点总数应该是偶数）。</p>
<p>如果一个 <code class="docutils literal"><span class="pre">Empty</span></code> 物体在一条线渲染中不止一次使用，只有最后一个将可见。要渲染多条线，您将需要使用多个 <code class="docutils literal"><span class="pre">Empty</span></code> 物体。</p>
<p>下面的示例演示了使用线渲染上面的图片中的坐标轴物体的一部分︰</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">m_scenes</span>    <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;scenes&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">m_material</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;material&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">m_geometry</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">m_rgba</span>      <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">);</span>
<span class="p">...</span>

<span class="c1">//setting up Empty object for line rendering</span>
<span class="kd">var</span> <span class="nx">line_1</span> <span class="o">=</span> <span class="nx">m_scenes</span><span class="p">.</span><span class="nx">get_object_by_name</span><span class="p">(</span><span class="s2">&quot;MyEmpty_1&quot;</span><span class="p">);</span>

<span class="c1">//setting up style parameters for the lines</span>
<span class="nx">m_material</span><span class="p">.</span><span class="nx">set_line_params</span><span class="p">(</span><span class="nx">line_1</span><span class="p">,</span> <span class="p">{</span> <span class="nx">width</span><span class="o">:</span> <span class="mi">3</span>
                                     <span class="nx">color</span><span class="o">:</span> <span class="nx">m_rgba</span><span class="p">.</span><span class="nx">from_values</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
                                    <span class="p">});</span>

<span class="c1">//coordinates for main axes</span>
<span class="kd">var</span> <span class="nx">points_1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="c1">//drawing main axes</span>
<span class="nx">m_geometry</span><span class="p">.</span><span class="nx">draw_line</span><span class="p">(</span><span class="nx">line_1</span><span class="p">,</span> <span class="nx">points_1</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
<p>这个代码列表生成只有物体的主轴，因为列出所有元素将都使代码过长和重复。绘制物体的其他元素它以同样的方式。</p>
</div>
<div class="section" id="levels-of-detail">
<span id="lods"></span><h2><a class="toc-backref" href="#id25">层次细节</a><a class="headerlink" href="#levels-of-detail" title="永久链接至标题">¶</a></h2>
<div class="section" id="overview">
<h3><a class="toc-backref" href="#id26">概述</a><a class="headerlink" href="#overview" title="永久链接至标题">¶</a></h3>
<p>LOD或层次细节是具有不同数量细节的单个物体的版本。层次细节用于优化，这里的想法是，如果一个物体远离相机，您可以渲染更简单的版本 - 例如，具有较少多边形和更简单材质的物体。这可以减少GPU上的负担，而不会降低渲染的质量，因为原始物体的大部分细节从远处将不可见。</p>
<p>LOD通常用于具有高物体数的大型场景。使用此功能时，更紧凑的场景可能无法获得主要的性能提升。视频游戏场景如岛屿，乡村或城镇街道最适合使用LOD。</p>
<p>LOD可以直接在Blender中的 <code class="docutils literal"><span class="pre">Levels</span> <span class="pre">of</span> <span class="pre">Detail</span></code>  <a class="reference internal" href="#object-settings-lod"><span>面板</span></a> 中设置。</p>
<a class="reference internal image-reference" href="_images/objects_lod_list.png"><img alt="_images/objects_lod_list.png" class="align-center" src="_images/objects_lod_list.png" style="width: 100%;" /></a>
<p>在那里，您可以设置用于单个物体的层次细节和距离。每个层次细节都是一个单独的物体。主要规则是显而易见的：层次细节位于列表中越低，对应的物体应该越简单。</p>
<p>您可以通过不同的方式使您的物体更简单：通过减少其多边形数，通过使用不那么复杂的材质（对于节点材质尤其如此）或通过关闭各种效果，如 <a class="reference internal" href="lighting.html#shadows"><span>阴影</span></a>, <a class="reference internal" href="animation.html#animation"><span>动画</span></a> 或者 <a class="reference internal" href="outdoor_rendering.html#wind"><span>风弯曲</span></a>.</p>
<p>您可以根据场景的整体尺度设置层次数量。</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="_images/objects_levels_compare.png"><img alt="_images/objects_levels_compare.png" src="_images/objects_levels_compare.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-text"><em>树木的层次细节：左边的原始物体，右边的LOD</em></span></p>
</div>
</div>
<div class="section" id="specifics-and-differences-from-bge">
<h3><a class="toc-backref" href="#id27">与BGE的细节和差异</a><a class="headerlink" href="#specifics-and-differences-from-bge" title="永久链接至标题">¶</a></h3>
<p>在引擎中设置LOD并使用它们有一些特点。尽管Blender中的BGE模式具有自己的LOD系统，与Blend4Web中使用的LOD系统大致相同，但仍具有以下提及的一些差异。</p>
<ol class="arabic simple">
<li><p class="first">当您将LOD物体应用于其他物体时，LOD物体的位置不会改变。因此，如果您希望物体在运行时占据相同的位置，则应将其手动放置在Blender中的相同位置。这与BGE不同，BGE中所选LOD物体自动移动到主物体的中心。</p>
</li>
<li><p class="first">如果你需要为多个不同的物体设置相同的LOD物体（例如，同一类型的树木，建筑，汽车，或灌木），你应该为每一个物体复制一个副本（即，使每个物体都有复制项，然后将这些物体作为一个LOD）和设置这些副本为LOD。跟BGE不同的是，当你为多个基本物体选择相同的LOD物体时，副本不会自动生成。为了简化创建相同类型的物体，我们建议将基础物体和它的所有LOD物体建到同一个组，然后使用空物体重复复制这一组。</p>
</li>
<li><p class="first">如果物体应该在运行时更改其位置，则应该在Blender中使用父子链接将其LOD附加到它之上，因此LOD物体将复制其变换信息。</p>
</li>
</ol>
</div>
<div class="section" id="smooth-lod-switching">
<h3><a class="toc-backref" href="#id28">平滑LOD切换</a><a class="headerlink" href="#smooth-lod-switching" title="永久链接至标题">¶</a></h3>
<p>LOD系统中最显着的缺点之一是层次细节之间的突然切换会容易被发现并且可能令人讨厌。</p>
<p>引擎支持基于alpha测试的LOD之间的平滑过渡。</p>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="_images/objects_lod_smoothing.png"><img alt="_images/objects_lod_smoothing.png" src="_images/objects_lod_smoothing.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-text"><em>原始物体与其LOD之间平滑过渡.</em></span></p>
</div>
<p>用于此的选项称为 <code class="docutils literal"><span class="pre">LOD</span> <span class="pre">平滑切换</span></code> ，可以在 <code class="docutils literal"><span class="pre">Scene-&gt;Object</span> <span class="pre">Clustering</span> <span class="pre">&amp;</span> <span class="pre">LOD</span></code> <a class="reference internal" href="scene_settings.html#scene-batching"><span>面板</span></a> 中找到.</p>
<p>它旨在实现平滑的LOD转换和设置将应用于此转换的物体类型。应该注意，启用此选项可能会显着降低性能（取决于LOD物体及其材质的数量）。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>平滑LOD转换并不总是必需的。例如，如果您立即将相机变换到一些遥远的物体，您可能不希望LOD切换发生在它的前面。在这样的情况下，应使用 <code class="docutils literal"><span class="pre">lod_leap_smooth_threshold</span></code> 参数。它定义的阈值距离（米），相机在一帧中的距离。如果超过这个值，LODs瞬时切换。参数可以用来在摄像机LOD传送到一个新的位置，或者移动很快时禁用平滑过渡。</p>
<blockquote class="last">
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">m_cfg</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">);</span>

<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;lod_leap_smooth_threshold&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span> <span class="c1">// 5 meters</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="hysteresis">
<h3><a class="toc-backref" href="#id29">迟滞現象</a><a class="headerlink" href="#hysteresis" title="永久链接至标题">¶</a></h3>
<p>LOD在物体的某一距离处被切换。这些层次边界设置在 <code class="docutils literal"><span class="pre">Levels</span> <span class="pre">of</span> <span class="pre">Detail</span></code> 面板上。如果相机在这样的边框附近移动，它可能是经常穿越，这导致频繁的LOD切换。在这种情况下，LOD切换变得非常明显，因此是不需要的。</p>
<p>这个问题可以通过  <code class="docutils literal"><span class="pre">Scene-&gt;Object</span> <span class="pre">Clustering</span> <span class="pre">&amp;</span> <span class="pre">LOD</span></code> <a class="reference internal" href="scene_settings.html#scene-batching"><span>面板</span></a> 中的 <code class="docutils literal"><span class="pre">Max</span> <span class="pre">LOD</span> <span class="pre">Hysteresis</span> <span class="pre">Interval</span></code> 参数设置。它设置用作两个LOD层次之间的间隔（以米为单位）。</p>
<p>例如，如果 <code class="docutils literal"><span class="pre">Max</span> <span class="pre">LOD</span> <span class="pre">Hysteresis</span> <span class="pre">Interval</span></code> 设置为4米，而层次细节之间的距离等于20米，则将在18米的距离处打开一个层次级别，另一个层次将在距离22米处。使用此选项消除了频繁的LOD切换，因为层次细节不再具有确定的边界。该设置是自适应的，可以调整到不同的LOD距离，如果需要，可以减少设置间隔。</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="meshes.html" class="btn btn-neutral float-right" title="网格" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="scene_settings.html" class="btn btn-neutral" title="场景设置" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2014-2017, Triumph.
      最后更新于 2017-06-30.

    </p>
  </div>

  <a href="https://www.blend4web.com">www.blend4web.com</a>

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
  (function() {
    if (window.document.domain != "www.blend4web.com")
      return;

    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter24512171 = new Ya.Metrika({
                    id:24512171,
                    clickmap:false,
                    trackLinks:true,
                    accurateTrackBounce:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
  })();
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/24512171" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v17.06',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();

          var lang_cont = $("#lang_cont");
          var links = lang_cont.children();

          var link_ru = links[0];
          var link_en = links[1];
          var link_zh = links[2];

          var loc = document.location.href;

          var href_ru = loc;
          var href_en = loc;
          var href_zh = loc; 

          if (loc.search("/ru/") != -1) {
              href_en = loc.replace("/ru/", "/en/");
              href_zh = loc.replace("/ru/", "/zh/");
          } else if (loc.search("/en/") != -1) {
              href_ru = loc.replace("/en/", "/ru/");
              href_zh = loc.replace("/en/", "/zh/");
          } else {
              href_ru = loc.replace("/zh/", "/ru/");
              href_en = loc.replace("/zh/", "/en/");
          }

          link_ru.href = href_ru;
          link_en.href = href_en;
          link_zh.href = href_zh;

          lang_cont.css("display", "inline-block")
      });
  </script>
   

</body>
</html>