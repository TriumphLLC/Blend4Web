<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Non-Linear Animation &mdash; User Manual: Blend4Web vv15.07</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.4/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.4/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'v15.07',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="User Manual: Blend4Web vv15.07" href="index.html" />
    <link rel="next" title="For Application Developers" href="developers.html" />
    <link rel="prev" title="Physics" href="physics.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Blend4Web. User Manual</a>
        <span class="navbar-text navbar-version pull-left"><b>v15.07</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_steps.html">Quick Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Installing the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">Scene Viewer</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_player.html">Web Player</a></li>
<li class="toctree-l1"><a class="reference internal" href="addon.html">The Add-on</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="materials.html">Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="textures.html">Textures</a></li>
<li class="toctree-l1"><a class="reference internal" href="node_materials.html">Node Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="lighting.html">Lighting, Shadows and Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_effects.html">Postprocessing Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles.html">Particle System. Fluids</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles_instancing.html">Particle System. Instancing</a></li>
<li class="toctree-l1"><a class="reference internal" href="animation.html">Animation</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdoor_rendering.html">Outdoor Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="gamma_alpha.html">Gamma and Alpha</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">Audio System</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics.html">Physics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Non-Linear Animation</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">For Application Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers_advanced.html">For Engine Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_short_manual.html">Team Work. Using Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems_and_solutions.html">Problems and Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Non-Linear Animation</a><ul>
<li><a class="reference internal" href="#nla-editor">NLA Editor</a><ul>
<li><a class="reference internal" href="#id3">Usage</a></li>
<li><a class="reference internal" href="#id4">Additional settings</a></li>
<li><a class="reference internal" href="#id5">Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nla-script">Visual Programming (NLA Script)</a><ul>
<li><a class="reference internal" href="#play">Play</a></li>
<li><a class="reference internal" href="#select-play">Select &amp; Play</a></li>
<li><a class="reference internal" href="#jump">Jump</a></li>
<li><a class="reference internal" href="#select-jump">Select &amp; Jump</a></li>
<li><a class="reference internal" href="#conditional-jump">Conditional Jump</a></li>
<li><a class="reference internal" href="#register-store">Register Store</a></li>
<li><a class="reference internal" href="#math-operation">Math Operation</a></li>
<li><a class="reference internal" href="#show-object-hide-object">Show Object and Hide Object</a></li>
<li><a class="reference internal" href="#page-redirect">Page Redirect</a></li>
<li><a class="reference internal" href="#page-param">Page Param</a></li>
<li><a class="reference internal" href="#noop">Noop</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api">Controlling via API</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="physics.html" title="Previous Chapter: Physics"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Physics</span>
    </a>
  </li>
  <li>
    <a href="developers.html" title="Next Chapter: For Application Developers"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">For Application ... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control"/>
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container content_container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="nla">
<span id="id1"></span><h1>Non-Linear Animation<a class="headerlink" href="#nla" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nla-editor">
<span id="id2"></span><h2>NLA Editor<a class="headerlink" href="#nla-editor" title="Permalink to this headline">¶</a></h2>
<p>The Blender&#8217;s non-linear editor lets us set the scene&#8217;s behavior in a comfortable way. With its help we can implement simple scenarios. This way coding is not needed for simple scenes and applications.</p>
<a class="reference internal image-reference" href="_images/simple_machinima.jpg"><img alt="_images/simple_machinima.jpg" class="align-center" src="_images/simple_machinima.jpg" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The engine supports controlling the following entities:</p>
<ul class="simple">
<li><p class="first">Any animation the parameters of which can be presented with Actions</p>
</li>
<li><p class="first">Audio playback</p>
</li>
<li><p class="first">Particles emission (in the form of a connection with the global timeline)</p>
</li>
</ul>
<a class="reference internal image-reference" href="_images/nla_editor.jpg"><img alt="_images/nla_editor.jpg" class="align-center" src="_images/nla_editor.jpg" style="width: 100%;" /></a>
<div class="section" id="id3">
<h3>Usage<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p class="first">Activate the <code class="docutils literal"><span class="pre">NLA</span></code> panel under the <code class="docutils literal"><span class="pre">Scene</span></code> tab.</p>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">NLA</span> <span class="pre">Editor</span></code> set up the required behavior for the scene.</p>
</li>
<li><p class="first">Choose the animation time interval on the <code class="docutils literal"><span class="pre">Timeline</span></code> panel.</p>
</li>
</ol>
</div>
<div class="section" id="id4">
<h3>Additional settings<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>The <em>NLA &gt; Cyclic NLA</em> scene setting activates the cyclic NLA animation mode.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use vertex animation, enable  &#8220;Allow NLA&#8221; option on the <a class="reference internal" href="animation.html#ver-anim"><span>vertex animation panel</span></a>.</p>
</div>
</div>
<div class="section" id="id5">
<h3>Limitations<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="first">A simultanious playback of differnet types of animation for the same object is not supported.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="nla-script">
<span id="id6"></span><h2>Visual Programming (NLA Script)<a class="headerlink" href="#nla-script" title="Permalink to this headline">¶</a></h2>
<p>Performed by appending logic slots (NLA Script Slot) under the scene tab in Blender. These slots can extend the scene functionality significantly without any coding.</p>
<a class="reference internal image-reference" href="_images/interactive_nla_example.jpg"><img alt="_images/interactive_nla_example.jpg" class="align-center" src="_images/interactive_nla_example.jpg" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The slots themselves are logic blocks that are executed from the first to the last sequentially except that this slot explicitly contains a transition (<code class="docutils literal"><span class="pre">Jump</span></code> or <code class="docutils literal"><span class="pre">Conditional</span> <span class="pre">Jump</span></code>). When the end of the list is reached the logic stops to execute, or - if <em>NLA &gt; Cyclic NLA</em> checkbox is enabled - starts again.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using <em>NLA &gt; Cyclic NLA</em> together with NLA Script does not result in automatic looping of the animation.</p>
</div>
<p>For implementing complicated logic there are numeric variables called registers. Each of 8 registers can store a single numeric value. The registers can be used for storing some scene state (e.g. this can be a counter of animation playbacks, character&#8217;s health points etc).</p>
<p>NLA Script usage example:</p>
<a class="reference internal image-reference" href="_images/interactive_nla_brick.png"><img alt="_images/interactive_nla_brick.png" class="align-center" src="_images/interactive_nla_brick.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>All possible slots are described below.</p>
<div class="section" id="play">
<h3>Play<a class="headerlink" href="#play" title="Permalink to this headline">¶</a></h3>
<p>Play back the NLA segment starting from the frame to which the marker points. Animation is played back until the next marker is met, or to the end of the timeline. Finally the next slot receives the control.</p>
<a class="reference internal image-reference" href="_images/interactive_nla_anim.png"><img alt="_images/interactive_nla_anim.png" class="align-center" src="_images/interactive_nla_anim.png" style="width: 100%;" /></a>
</div>
<div class="section" id="select-play">
<span id="nla-select-play"></span><h3>Select &amp; Play<a class="headerlink" href="#select-play" title="Permalink to this headline">¶</a></h3>
<p>Wait until the user selects an object (on desktops - with a mouse click, on mobile devices - with a touch). If an object that is specified in this slot is selected - start animation similar to <code class="docutils literal"><span class="pre">Play</span></code> slot. If any other object is selected - immediately transfer the control to the next slot.</p>
<p>The latter functionality can be used for selecting one of the multiple objects. In this case it is convenient to place <code class="docutils literal"><span class="pre">Select</span> <span class="pre">&amp;</span> <span class="pre">Play</span></code> slots in the stack one by one. The result of the user selection is catched up by one of this sequence slots because the transition without animation is performed instantly.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to allow the user to select an object, enable the <code class="docutils literal"><span class="pre">Selectable</span></code> checkbox in its settings, similar to implementation of <a class="reference internal" href="postprocessing_effects.html#outline"><span>object outlining</span></a>.</p>
</div>
</div>
<div class="section" id="jump">
<h3>Jump<a class="headerlink" href="#jump" title="Permalink to this headline">¶</a></h3>
<p>Go to the specified slot.</p>
<a class="reference internal image-reference" href="_images/interactive_nla_jump.png"><img alt="_images/interactive_nla_jump.png" class="align-center" src="_images/interactive_nla_jump.png" style="width: 100%;" /></a>
</div>
<div class="section" id="select-jump">
<h3>Select &amp; Jump<a class="headerlink" href="#select-jump" title="Permalink to this headline">¶</a></h3>
<p>Is similar to the <code class="docutils literal"><span class="pre">Select</span> <span class="pre">&amp;</span> <span class="pre">Play</span></code> slot, except the transition happens instead of animation. This function allows to implement a complicated logic because in this case there is a possibility to identify the user selection results (selecting an object leads to the transition to the named slot which is needn&#8217;t to be the next in the list).</p>
</div>
<div class="section" id="conditional-jump">
<h3>Conditional Jump<a class="headerlink" href="#conditional-jump" title="Permalink to this headline">¶</a></h3>
<p>Go to the specified slot if the certain condition is met. The parameters (operands) can also be registers that are activated using the corresponding switches.</p>
</div>
<div class="section" id="register-store">
<h3>Register Store<a class="headerlink" href="#register-store" title="Permalink to this headline">¶</a></h3>
<p>Save a numeric value in the register.</p>
</div>
<div class="section" id="math-operation">
<h3>Math Operation<a class="headerlink" href="#math-operation" title="Permalink to this headline">¶</a></h3>
<p>Perform a math operation and save the result in the register. Any of parameters (operands) can be either a numeric value or a register.</p>
</div>
<div class="section" id="show-object-hide-object">
<h3>Show Object and Hide Object<a class="headerlink" href="#show-object-hide-object" title="Permalink to this headline">¶</a></h3>
<p>This is used to hide and show 3D objects.</p>
</div>
<div class="section" id="page-redirect">
<h3>Page Redirect<a class="headerlink" href="#page-redirect" title="Permalink to this headline">¶</a></h3>
<p>This serves as a page redirect to other web pages.</p>
</div>
<div class="section" id="page-param">
<h3>Page Param<a class="headerlink" href="#page-param" title="Permalink to this headline">¶</a></h3>
<p>Allows to store any web page parameter in a given numerical register.</p>
</div>
<div class="section" id="noop">
<h3>Noop<a class="headerlink" href="#noop" title="Permalink to this headline">¶</a></h3>
<p>Shortening of &#8220;No Operation&#8221;. When such a slot is processed no actions are performed. This slot is convenient to place together with a <code class="docutils literal"><span class="pre">Jump</span></code> or <code class="docutils literal"><span class="pre">Conditional</span> <span class="pre">Jump</span></code> slot.</p>
</div>
</div>
<div class="section" id="api">
<h2>Controlling via API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>Non-linear animation playback can be controlled via API methods of the <code class="docutils literal"><span class="pre">nla.js</span></code> module.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">m_nla</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;nla&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="nx">m_nla</span><span class="p">.</span><span class="nx">set_frame</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="nx">m_nla</span><span class="p">.</span><span class="nx">get_frame</span><span class="p">();</span>
<span class="c1">// ...</span>
<span class="nx">m_nla</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
<span class="c1">// ...</span>
<span class="nx">m_nla</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>Please note, that if the <a class="reference internal" href="#nla-script"><span>NLA Script</span></a> is used, the <code class="docutils literal"><span class="pre">set_frame</span></code>, <code class="docutils literal"><span class="pre">play</span></code>, <code class="docutils literal"><span class="pre">stop</span></code> methods are not available.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Triumph LLC.<br/>
      Last updated on 2015-07-29.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>