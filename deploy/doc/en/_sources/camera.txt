
Camera
******


Move Styles and General Settings
================================

The camera settings are specified in the "Properties" panel under the
"Camera (Object Data)" tab.

[image]



*Camera Move Style > Move Style*
   Camera control mode:

   * *Target*

        By default the camera is rotating around a fixed point
        (target). The pivot's position can be changed (see camera
        panning).

   * *Eye*

        The "Eye" mode allows rotation and translation as in first
        person view.

   * *Hover*

        In the "Hover" mode the camera is gliding over the horizontal
        plane.

   * *Static*

        In the "Static" mode the camera can be moved via animation or
        through API calls.

*Look At Cursor > Target Location*
   Available for the "Target" mode. This is the position of the camera
   pivot point. The "Look At Cursor" button copies the current 3D
   cursor position into this value.

*Depth of Field*
   Described in the Depth of Field section.


Camera Movement Velocity
========================

Velocity settings of different type are available for camera movement.

*Camera Move Style > Camera Velocities > Translation Velocity*
   Available for the "Target", "Eye" and "Hover" modes. Defines camera
   translation velocity.

*Camera Move Style > Camera Velocities > Rotation Velocity*
   Available for the "Target", "Eye" and "Hover" modes. Defines camera
   rotation velocity.

*Camera Move Style > Camera Velocities > Zoom Velocity*
   Available for the "Target" and "Hover" modes. Defines velocity of
   approaching of the camera to the pivot point.

Default values for the parameters: "Translation Velocity", "Rotation
Velocity": 1; "Zoom Velocity": 0.1.

Allowable values for the parameters: "Translation Velocity", "Rotation
Velocity":
   \left[0,\ \infty \right); "Zoom Velocity": \left[0,\ 1\right).


Limiting the Camera Movement
============================

There are several settings for the camera which limit/change its
movement one way or another. They are grouped as "Camera limits".

[image]



**Target camera**

*Camera Move Style > Camera Limits > Use Distance Limits*
   Set minimum and maximum distances from the camera to the pivot
   point. Allowable values: *Min* \le *Max*. Disabled by default.

*Camera Move Style > Camera Limits > Use Horizontal Rotation Clamping*
   Limit the horizontal (around the Z world axis in Blender) camera
   rotation around the corresponding point. Rotation is performed
   along the arc of a circle between "Left Angle" and "Right Angle"
   values. The rotation arc corresponds to movement from "Left Angle"
   to "Right Angle" anticlockwise. Disabled by default.

*Camera Move Style > Camera Limits > Use Vertical Rotation Clamping*
   Limit the vertical (around the camera's local X axis in Blender)
   camera rotation around the corresponding point. Rotation is
   performed along the arc of a circle between "Down Angle" and "Up
   Angle" values. The rotation arc corresponds to movement from "Down
   Angle" to "Up Angle" clockwise. Disabled by default.

*Camera Move Style > Camera Limits > Use panning mode*
   Allow camera panning.



**Eye Camera**

*Blend4Web > Use Horizontal Rotation Clamping*
   Limit the horizontal (around the world Z axis in Blender) camera
   rotation around its position. Rotation is performed along the arc
   of a circle between "Left Angle" and "Right Angle" values. The
   rotation arc corresponds to movement from "Left Angle" to "Right
   Angle" clockwise. Disabled by default.

*Camera Move Style > Camera Limits > Use Vertical Rotation Clamping*
   Limit the vertical (around the camera's local X axis in Blender)
   camera rotation around its position. Rotation is performed along
   the arc of a circle between "Down Angle" and "Up Angle" values. The
   rotation arc corresponds to movement from "Down Angle" to "Up
   Angle" anticlockwise. Disabled by default.



**Hover Camera**

*Camera Move Style > Camera Limits > Use Horizontal Translation
Limits*
   Limit movement of the pivot point along the Blender's world X axis.
   Allowable values: *Min* \le *Max*. Disabled by default.

*Camera Move Style > Camera Limits > Use Vertical Translation Limits*
   Limit movement of the pivot point along the Blender's world Y axis.
   Allowable values: *Min* \le *Max*. Disabled by default.

*Camera Move Style > Camera Limits > Use Distance Limits*
   Set minimum and maximum distances from the camera to the point of
   intersection between the camera's view direction and the horizontal
   reference plane (Blender's world XOY plane by default). Allowable
   values: *Min* \le *Max*. If turned off, the camera will freely move
   along Blender's world Z axis, the pivot point will not be defined
   and the "Camera Move Style > Camera Limits > Use Horizontal
   Translation Limits" and "Camera Move Style > Camera Limits > Use
   Vertical Translation Limits" settings will limit the position of
   the camera itself. Disabled by default.

*Camera Move Style > Camera Limits > Camera Angle Limits*
   Limit the camera's inclination (the angle between camera view
   direction and the horizontal plane). Becomes available when the
   "Camera Move Style > Camera Limits > Use Distance Limits" option is
   enabled. Allowable values: 0 \le Down Angle \le Up Angle \le 90.
   Default values: *Down Angle = 0, Up Angle = 90*.

*Camera Move Style > Camera Limits > Zero Level*
   A distance between reference plane and the coordinates
   origin.Avaliable in "Hover" move style with the "Camera Move Style
   > Camera Limits > Use Distance Limits" option enabled.

If the "Blend4Web > Use Distance Limits" setting is turned on, the
limits for distance and inclination angle will be applied
simultaneously, to define the camera movement path in the vertical
plane.

Setting incorrect limits for distance or inclination angle will
disable the "Camera Move Style > Camera Limits > Use Distance Limits"
option.

*Camera Move Style > Camera Limits > Use Horizontal Rotation*
   Allow camera rotation in Blender's XOY plane around to the pivot
   point. Becomes available upon turning "Camera Move Style > Camera
   Limits > Use Distance Limits" setting on. Enabled by default.



**Peculiarities of Limiting Settings**

* For EYE/TARGET cameras, interchanging *Left/Right* or *Down/Up*
  values results in movement along the opposite arc of a circle.

* When limiting the camera's horizontal and vertical rotation, it is
  possible to choose between the following coordinate spaces:

*Camera Space*
   All angles are measured relative to the initial camera position and
   orientation.

*World Space*
   Horizontal angles are measured relative to the Y axis in world
   space; vertical angles are measured relative to the Blender's XOY
   plane in world space.

Default value: "Camera Space".

Horizontal limits by the example of the TARGET camera:

Vertical limits by the example of the TARGET camera:


Camera Controls API
===================

   Basic camera controls method are contained in the "camera.js"
   module.

   When working with the camera's APIs (rotation, setting limits), all
   angles are defined in the engine's coordinate system as follows:

   For the "TARGET/HOVER" camera:

For the "EYE" camera:



When setting translation limits for the "HOVER" camera, the limits'
values will correspond to the engine's coordinate axis as follows:

* "Horizontal Translation Limits" - X axis

* "Vertical Translation Limits" - Z axis



**Changing Movement Style of the Camera**

Movement style of the camera (Blend4Web > Move Style option in
Blender) can be changed by using the "set_camera_move_style()" method
of the "app.js" module:

   // ...
   var m_app = require("app");
   var m_cam = require("camera");
   // ...
   m_app.set_camera_move_style(m_cam.MS_TARGET_CONTROLS);
   // ...

If an application does not use the "app.js" module, this can be
achieved by using the "set_move_style()" method of the "camera.js"
module:

   // ...
   var m_cam    = require("camera");
   var m_scenes = require("scenes");
   // ...
   var camera = m_scenes.get_active_camera();
   m_cam.set_move_style(camera, m_cam.MS_TARGET_CONTROLS);
   // ...

Please note that changing movement style of the camera also resets the
camera movement limits and the pivot position (for "TARGET" and
"HOVER" cameras). These parameters should be set again by using the
corresponding methods of the "camera.js" module.
