.. _setup:

******************************
Развёртывание среды разработки
******************************

Вариант установки с развёртыванием дистрибутива SDK рекомендуется для разработчиков 3D-приложений. Если же нужно быстрое ознакомление с возможностями Blend4Web, то, возможно, будет удобнее :ref:`экспресс-установка <quick_install>`.

Для работы необходим дистрибутив движка, браузер с поддержкой WebGL и Blender.

.. _getting_started_distribution:

Установка дистрибутива
======================

Стабильные версии дистрибутива поставляются в виде архива
(``blend4web_sdk_free_YY_MM.zip`` -- бесплатный SDK, ``blend4web_sdk_pro_YY_MM.zip`` --
коммерческий SDK). Для установки достаточно распаковать данный архив в любое
место на диске.

.. index:: Blender; установка

.. _getting_started_addon:

Подключение аддона
==================

.. note::

   Если аддон ранее был установлен с помощью :ref:`экспресс-установки <quick_install>`, то рекомендуется прежде его удалить.

Запустить Blender, загрузить сцену по умолчанию :file:`File > New` (горячие клавиши :file:`Ctrl-N`).
Вызвать окно пользовательских настроек :file:`File > User Preferences...` (горячие клавиши :file:`Ctrl-Alt-U`). Во вкладке  :file:`File` в поле  :file:`Scripts` выбрать путь к директории :file:`blender_scripts`. 

.. image:: src_images/setup/user_preferences_scripts_path.jpg
   :align: center
   :width: 100%

Нажать :file:`Save User Settings` и **перезапустить** Blender.


.. note::

    Вместо этого можно скопировать директорию со скриптами :file:`blender_scripts/addons/blend4web` в уже используемую пользовательскую директорию для скриптов или даже в установочную директорию, например:

    :file:`C:\\Program Files\\Blender Foundation\\Blender\\2.70\\scripts\\addons\\blend4web`.


Повторно загрузить сцену по умолчанию, вызвать окно пользовательских настроек, перейти на вкладку :file:`Addons` и выбрать категорию :file:`Import-Export`. Отметить галочку напротив :file:`Import-Export: Blend4Web`. 

.. image:: src_images/setup/user_preferences_enable_addon.jpg
   :align: center
   :width: 100%

|

Раскрыть вкладку аддона и указать путь к директории с SDK в поле "Path to Blend4Web SDK".

.. image:: src_images/setup/user_preferences_addon_sdk_path.jpg
   :align: center
   :width: 100%

|

Нажать :file:`Save User Settings`. Перезапуск Blender не требуется.

*Для проверки:*

В меню :file:`File > Export` должны появиться опции :file:`Blend4Web (.json)` и :file:`Blend4Web (.html)`. Кроме того должны появиться операторы при выполнении поиска по "B4W" (горячая клавиша :file:`ПРОБЕЛ`).


.. _local_development_server:

Локальный сервер разработки
===========================

Настройки локального сервера разработки находятся в меню :file:`File > User Preferences...` (горячие клавиши :file:`Ctrl-Alt-U`).
Здесь можно изменить номер порта, используемый при создании локального сервера разработки (6687 по умолчанию), или включить автоматический запуск сервера при запуске Blender'a: для этого достаточно включить опцию ``Run development server automatically`` в настройках аддона.

.. image:: src_images/setup/server_setup.png
   :align: center
   :width: 100%

После изменения настроек локального сервера разработчика требуется перезапуск Blender'a.

Если не был настроен автоматический запуск сервера, то его можно стартовать вручную по кнопке ``Start`` во вкладке ``Render->Blend4Web``:

.. image:: src_images/setup/start_serv.png
   :align: center
   :width: 100%

|

.. note::
    
    Если путь к Blend4Web SDK не был указан, запуск локального сервера невозможен. При этом вместо кнопки ``Start`` будет выведено соответствующее сообщение.

    В случае ошибки запуска сервера будет показано окно с описанием причины:

    .. image:: src_images/setup/error.png
       :align: center

    Чаще всего ошибка возникает из-за того, что указанный серверу адрес уже используется другим приложением.

Нажмите кнопку ``Open SDK`` для запуска в браузере обзорной веб-страницы Blend4Web SDK, доступной по адресу http://localhost:6687.

.. image:: src_images/setup/stop_open.png
   :align: center
   :width: 100%

|

При этом будет автоматически запущен браузер, используемой в операционной системе по умолчанию. 

Сервер может быть остановлен по нажатию на кнопку ``Stop``. Сервер также прекращает работу при закрытии программы Blender.


.. index:: просмотрщик; запуск

.. _getting_started_launching_viewer:

Запуск просмотрщика сцен и демо-приложений 
==========================================

На обзорной странице имеются ссылки для запуска просмотрщика сцен и демо-приложений. Для их запуска необходим :ref:`браузер с поддержкой WebGL <browser_webgl_support>`.

.. image:: src_images/setup/sdk_index.jpg
   :align: center
   :width: 100%  

|

.. note::

   Если приложения SDK не отображаются корректно, или появляются сообщения об ошибках, необходимо предпринять действия, описанные в разделе :ref:`renderer_not_working`.




