<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Освещение, тени и фон &mdash; Руководство пользователя: Blend4Web vv15.07</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.4/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.4/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'v15.07',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="author" title="Об этих документах" href="about.html" />
    <link rel="top" title="Руководство пользователя: Blend4Web vv15.07" href="index.html" />
    <link rel="next" title="Постпроцессинговые эффекты" href="postprocessing_effects.html" />
    <link rel="prev" title="Нодовые материалы" href="node_materials.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Blend4Web. Руководство пользователя</a>
        <span class="navbar-text navbar-version pull-left"><b>v15.07</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Содержание <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">Общие сведения</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Функционал движка</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_steps.html">Экспресс-установка</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Развёртывание среды разработки</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Рабочий процесс</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">Просмотрщик сцен</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_player.html">Веб-плеер</a></li>
<li class="toctree-l1"><a class="reference internal" href="addon.html">Аддон</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Объекты</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">Камера</a></li>
<li class="toctree-l1"><a class="reference internal" href="materials.html">Материалы</a></li>
<li class="toctree-l1"><a class="reference internal" href="textures.html">Текстуры</a></li>
<li class="toctree-l1"><a class="reference internal" href="node_materials.html">Нодовые материалы</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Освещение, тени и фон</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_effects.html">Постпроцессинговые эффекты</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles.html">Система частиц. Флюиды</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles_instancing.html">Система частиц. Инстансинг</a></li>
<li class="toctree-l1"><a class="reference internal" href="animation.html">Анимация</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdoor_rendering.html">Рендеринг наружных сцен</a></li>
<li class="toctree-l1"><a class="reference internal" href="gamma_alpha.html">Гамма-коррекция и альфа-композитинг</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">Звуковая подсистема</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics.html">Физика</a></li>
<li class="toctree-l1"><a class="reference internal" href="nla.html">Нелинейная анимация</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Разработчикам приложений</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers_advanced.html">Разработчикам движка</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_short_manual.html">Работа в команде с использованием Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems_and_solutions.html">Проблемы и решения</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Замечания к релизам</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Разделы <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Освещение, тени и фон</a><ul>
<li><a class="reference internal" href="#index-1">Типы затенения</a></li>
<li><a class="reference internal" href="#index-2">Редактор нормалей</a><ul>
<li><a class="reference internal" href="#id4">Основные особенности редактора нормалей:</a></li>
<li><a class="reference internal" href="#id5">Интерфейс редактора вертексных нормалей</a></li>
<li><a class="reference internal" href="#activate">Activate</a></li>
<li><a class="reference internal" href="#show-normals">Show Normals</a></li>
<li><a class="reference internal" href="#id6">Вращение</a></li>
<li><a class="reference internal" href="#split-normals">Split Normals</a></li>
<li><a class="reference internal" href="#average-split">Average Split</a></li>
<li><a class="reference internal" href="#restore">Restore</a></li>
<li><a class="reference internal" href="#tree-foliage-face">Tree, Foliage и Face</a></li>
<li><a class="reference internal" href="#copy-paste">Copy/Paste</a></li>
<li><a class="reference internal" href="#copy-from-mesh">Copy From Mesh</a></li>
</ul>
</li>
<li><a class="reference internal" href="#index-3">Освещение от источников света</a><ul>
<li><a class="reference internal" href="#id8">Типы источников света</a></li>
<li><a class="reference internal" href="#id9">Настройка источников света</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-lighting">Освещение от окружающей среды</a><ul>
<li><a class="reference internal" href="#id11">Активация</a></li>
<li><a class="reference internal" href="#id12">Настройка</a></li>
<li><a class="reference internal" href="#id13">Использование карты окружения</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shadows">Тени</a><ul>
<li><a class="reference internal" href="#id15">Активация</a></li>
<li><a class="reference internal" href="#id16">Настройка</a><ul>
<li><a class="reference internal" href="#id17">Стандартная модель</a></li>
<li><a class="reference internal" href="#id18">Каскады теней</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#index-4">Цвет фона</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="node_materials.html" title="Previous Chapter: Нодовые материалы"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Нодовые материал...</span>
    </a>
  </li>
  <li>
    <a href="postprocessing_effects.html" title="Next Chapter: Постпроцессинговые эффекты"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Постпроцессингов... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control"/>
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container content_container">
  <div class="row">
    <div class="col-md-12">
      
  <span class="target" id="lighting"></span><div class="section" id="index-0">
<span id="id1"></span><h1>Освещение, тени и фон<a class="headerlink" href="#index-0" title="Ссылка на этот заголовок">¶</a></h1>
<div class="section" id="index-1">
<span id="id2"></span><h2>Типы затенения<a class="headerlink" href="#index-1" title="Ссылка на этот заголовок">¶</a></h2>
<p>Результат расчета освещения (затенения) зависит от направления векторов нормалей. Поддерживаются стандартные типы затенения, использующиеся в Blender, <code class="docutils literal"><span class="pre">Shading:</span> <span class="pre">Flat</span></code> (используются нормали граней) и <code class="docutils literal"><span class="pre">Shading:</span> <span class="pre">Smooth</span></code> (используются интерполированные нормали вершин), а также их комбинации.</p>
<a class="reference internal image-reference" href="_images/flat_smooth_shading.png"><img alt="_images/flat_smooth_shading.png" class="align-center" src="_images/flat_smooth_shading.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Если желаемый результат недостижим стандартными средствами, можно воспользоваться <a class="reference internal" href="#normals-editor"><span>редактором нормалей</span></a>.</p>
<p>Результат применения различных типов затенения и использования редактора нормалей:</p>
<a class="reference internal image-reference" href="_images/different_shadings_comparison.jpg"><img alt="_images/different_shadings_comparison.jpg" class="align-center" src="_images/different_shadings_comparison.jpg" style="width: 100%;" /></a>
<ol class="arabic simple">
<li>Flat Shading</li>
<li>Smooth Shading</li>
<li>Smooth Shading + фаска</li>
<li>Smooth Shading + фаска + редактирование нормалей</li>
</ol>
<span class="target" id="normals-editor"></span></div>
<div class="section" id="index-2">
<span id="id3"></span><h2>Редактор нормалей<a class="headerlink" href="#index-2" title="Ссылка на этот заголовок">¶</a></h2>
<p>Редактирование нормалей - достаточно простой и эффективный способ изменить собственное затенение трехмерной модели, не усложняя ее геометрию.</p>
<p>С помощью редактора нормалей, в некоторых случаях, можно достичь результатов, аналогичных применению <a class="reference internal" href="textures.html#normal-map"><span>карт нормалей</span></a>. При этом метод редактирования нормалей является более предпочтительным с точки зрения потребления вычислительных ресурсов и видео-памяти.</p>
<p>Пример работы редактора нормалей:</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/vnt_img01.jpg"><img alt="_images/vnt_img01.jpg" class="align-center" src="_images/vnt_img01.jpg" style="width: 100%;" /></a>
</div></blockquote>
<p>Слева - обычное затенение геометрии, справа - дерево с редактированными нормалями.</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/vnt_img02.jpg"><img alt="_images/vnt_img02.jpg" class="align-center" src="_images/vnt_img02.jpg" style="width: 100%;" /></a>
</div></blockquote>
<p>Слева - ворота с обычным затенением, в центре - ворота с редактированными нормалями, справа - геометрия модели ворот с сеткой.</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/vnt_img03.jpg"><img alt="_images/vnt_img03.jpg" class="align-center" src="_images/vnt_img03.jpg" style="width: 100%;" /></a>
</div></blockquote>
<p>Слева - обычное затенение геометрии травы, справа - трава с редактированными нормалями.</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/vnt_img04.jpg"><img alt="_images/vnt_img04.jpg" class="align-center" src="_images/vnt_img04.jpg" style="width: 100%;" /></a>
</div></blockquote>
<p>Слева - очки с обычным затенением, справа - затенение геометрии с редактированными нормалями.</p>
<div class="section" id="id4">
<h3>Основные особенности редактора нормалей:<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h3>
<ol class="arabic simple">
<li>для хранилища массива данных с направлениями вертексных нормалей используется &#8220;родной&#8221; блок данных Blender (появился в версии 2.74);</li>
<li>редактирование нормалей и отображение затенения теперь происходит в режиме редактирования (<code class="docutils literal"><span class="pre">Edit</span> <span class="pre">Mode</span></code>);</li>
<li>все изменения записываются сразу же автоматически;</li>
<li>вращение нормали выделенного вертекса можно производить непосредственно в окне Viewport&#8217;a по горячим клавишам <code class="docutils literal"><span class="pre">Shift+Ctrl+R</span></code>, подобно остальным операциям вращения в Blender;</li>
<li>редактированные нормали экспортируются автоматически.</li>
</ol>
</div>
<div class="section" id="id5">
<h3>Интерфейс редактора вертексных нормалей<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h3>
<p>Интерфейс редактора нормалей располагается на панели инструментов <code class="docutils literal"><span class="pre">Blend4Web</span> <span class="pre">&gt;</span> <span class="pre">Normal</span> <span class="pre">Editor</span></code>. Перед началом работы редактора для объекта необходимо включить режим затенения <code class="docutils literal"><span class="pre">Shading:</span> <span class="pre">Smooth</span></code> и нажать кнопку <code class="docutils literal"><span class="pre">Activate</span></code> на панели редактора нормалей или выставить галочку <code class="docutils literal"><span class="pre">Auto</span> <span class="pre">Smooth</span></code> в настройках меша.</p>
<a class="reference internal image-reference" href="_images/vnt_img05.jpg"><img alt="_images/vnt_img05.jpg" class="align-center" src="_images/vnt_img05.jpg" style="width: 100%;" /></a>
</div>
<div class="section" id="activate">
<h3>Activate<a class="headerlink" href="#activate" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p>Новая кнопка <code class="docutils literal"><span class="pre">Activate</span></code> включает режим редактирования вертекных нормалей.</p>
<p><em>Использование</em></p>
<p>Достаточно в режиме <code class="docutils literal"><span class="pre">Edit</span> <span class="pre">Mode</span></code> нажать кнопу <code class="docutils literal"><span class="pre">Activate</span></code>, и можно приступать к редактированию вертексных нормалей. Пока она остаётся в активном режиме, затенение объекта и его экспорт будут осуществляться с учетом редактированных вертексных нормалей. Другими словами, после внесения изменений, для их отображения во Viewport&#8217;е Blender и в движке Blend4Web кнопка должна быть оставлена активной.</p>
</div>
<div class="section" id="show-normals">
<h3>Show Normals<a class="headerlink" href="#show-normals" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p>Для удобства в панель продублирована оригинальная кнопка Blender, включающая отображение маркеров вертексных нормалей во Viewport&#8217;е, а так же настройка их длины.</p>
<p><em>Использование</em></p>
<p>Достаточно просто включить кнопку <code class="docutils literal"><span class="pre">Show</span> <span class="pre">Normals</span></code> прямо на панели редактора вертексных нормалей Blend4Web или в правой панели Blender в разделе <code class="docutils literal"><span class="pre">Mesh</span> <span class="pre">Display</span></code> и настроить комфортную длину маркера в поле <code class="docutils literal"><span class="pre">Size</span></code>.</p>
<a class="reference internal image-reference" href="_images/vnt_img07.gif"><img alt="_images/vnt_img07.gif" class="align-center" src="_images/vnt_img07.gif" style="width: 100%;" /></a>
</div>
<div class="section" id="id6">
<h3>Вращение<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p>При помощи этого инструментария можно вращать нормаль каждого вертекса индивидуально.</p>
<p>Кнопка <code class="docutils literal"><span class="pre">Rotate</span></code> (горячие клавиши <code class="docutils literal"><span class="pre">Shift+Ctrl+R</span></code>) позволяет вращать вертексные нормали в привычном для пользователя Blender режиме.</p>
<p><em>Использование</em></p>
<p>Выделив один или несколько вертексов, которые хотите изменить, вращайте их, используя визуальную сферу на панели редактора вертексных нормалей Blend4Web, или задайте направление каждой координате в цифровом значении.</p>
<p>Более удобный вариант манипуляции с вертексными нормалями предоставляет кнопка <code class="docutils literal"><span class="pre">Rotate</span></code>. Вращение происходит по координатам в пространстве экрана, но, как и при обычном вращении объектов в Blender, можно изолировать нужную ось координат и вращать только по ней (нажав <code class="docutils literal"><span class="pre">X</span></code>, <code class="docutils literal"><span class="pre">Y</span></code> или <code class="docutils literal"><span class="pre">Z</span></code>).</p>
<a class="reference internal image-reference" href="_images/vnt_img08.gif"><img alt="_images/vnt_img08.gif" class="align-center" src="_images/vnt_img08.gif" style="width: 100%;" /></a>
</div>
<div class="section" id="split-normals">
<h3>Split Normals<a class="headerlink" href="#split-normals" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p>Режим <code class="docutils literal"><span class="pre">Split</span> <span class="pre">Normals</span></code> позволяет редактировать вертексные нормали индивидуально для каждой грани (<code class="docutils literal"><span class="pre">face</span></code> в Blender), образующей редактируемую вершину (<code class="docutils literal"><span class="pre">vertex</span></code> в Blender). Переключатель вертексных индексов позволяет перемещаться между нормалями разделенного вертекса.</p>
<p>Использование</p>
<p>Перейдя в режим <code class="docutils literal"><span class="pre">Split</span> <span class="pre">Normals</span></code>, выберите нужный вертекc и измените направление его нормали. Прежде всего подвергнется модификации та нормаль, которая имеет наименьший индекс в очереди (то есть 0) редактируемого вертекса. Далее, перемещаясь по индексам, перейдите на следующую нормаль этого вертекса и редактируйте ее.</p>
<a class="reference internal image-reference" href="_images/vnt_img09.gif"><img alt="_images/vnt_img09.gif" class="align-center" src="_images/vnt_img09.gif" style="width: 100%;" /></a>
</div>
<div class="section" id="average-split">
<h3>Average Split<a class="headerlink" href="#average-split" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p><code class="docutils literal"><span class="pre">Average</span> <span class="pre">Split</span></code> усредняет направление вертексной нормали, исходя из направлений нормалей, разделенных функцией <code class="docutils literal"><span class="pre">Split</span> <span class="pre">Normals</span></code>.</p>
<p><em>Использование</em></p>
<p>Для того, чтобы объединить несколько разделенных вертексных нормалей в одну так, чтобы она имела их среднее направление, достаточно выделить нужный вертекс и нажать <code class="docutils literal"><span class="pre">Average</span> <span class="pre">Split</span></code>.</p>
<a class="reference internal image-reference" href="_images/vnt_img10.gif"><img alt="_images/vnt_img10.gif" class="align-center" src="_images/vnt_img10.gif" style="width: 100%;" /></a>
</div>
<div class="section" id="restore">
<h3>Restore<a class="headerlink" href="#restore" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p>Кнопка <code class="docutils literal"><span class="pre">Restore</span></code> восстанавливает исходное направление нормалей выделенных вертексов.</p>
<p><em>Использование</em></p>
<p>Для того, чтобы восстановить нормали к исходному направлению (которое раcсчитывается на основе нормалей полигонов), нужно выделить нужные вертексы и нажать кнопку <code class="docutils literal"><span class="pre">Restore</span></code>.</p>
<a class="reference internal image-reference" href="_images/vnt_img11.gif"><img alt="_images/vnt_img11.gif" class="align-center" src="_images/vnt_img11.gif" style="width: 100%;" /></a>
</div>
<div class="section" id="tree-foliage-face">
<h3>Tree, Foliage и Face<a class="headerlink" href="#tree-foliage-face" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p>Функция <code class="docutils literal"><span class="pre">Tree</span></code> направляет нормали выделенных вертексов в сторону от 3D-курсора. <code class="docutils literal"><span class="pre">Foliage</span></code> направляет нормали вертекcов строго вверх по глобальной оси <code class="docutils literal"><span class="pre">Z</span></code>. <code class="docutils literal"><span class="pre">Face</span></code> направляет нормали вертексов выделенного полигона параллельно нормали этого полигона.</p>
<p>Использование</p>
<p>Чтобы воспользоваться функцией <code class="docutils literal"><span class="pre">Tree</span></code>, выделите нужные вертексы и расположите курсор в нужном вам месте. После нажатия кнопки <code class="docutils literal"><span class="pre">Tree</span></code> все выделенные вертексы будут направлены в сторону от курсора, как будто бы они выстреливают из одной точки.</p>
<p>Функция <code class="docutils literal"><span class="pre">Foliage</span></code> очень проста в использовании: выделите нужные вертексы и нажмите кнопку, и функция направит их строго вверх.</p>
<p>Чтобы направить нормали вертексов параллельно нормали полигона, выделите нужный полигон и нажмите <code class="docutils literal"><span class="pre">Face</span></code>. Все нормали вертексов, образующих этот полигон, будут направлены параллельно нормали самого полигона. Эта функция работает только с одним выделенным полигоном одновременно.</p>
<a class="reference internal image-reference" href="_images/vnt_img12.gif"><img alt="_images/vnt_img12.gif" class="align-center" src="_images/vnt_img12.gif" style="width: 100%;" /></a>
</div>
<div class="section" id="copy-paste">
<h3>Copy/Paste<a class="headerlink" href="#copy-paste" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p>Копирует направление нормали с одного вертекса на другой.</p>
<p><em>Использование</em></p>
<p>Выделите вертекс для копирования и нажмите <code class="docutils literal"><span class="pre">Copy</span></code>. Затем выделите вертекс, на который хотите копировать результат, и нажмите <code class="docutils literal"><span class="pre">Paste</span></code>. Вставлять скопированную информацию можно на множество разных вертексов. Кнопки не активны в режиме <code class="docutils literal"><span class="pre">Split</span> <span class="pre">Mode</span></code> и не переносят данные уже &#8220;разделенных&#8221; нормалей на другие вертексы.</p>
<a class="reference internal image-reference" href="_images/vnt_img13.gif"><img alt="_images/vnt_img13.gif" class="align-center" src="_images/vnt_img13.gif" style="width: 100%;" /></a>
</div>
<div class="section" id="copy-from-mesh">
<h3>Copy From Mesh<a class="headerlink" href="#copy-from-mesh" title="Ссылка на этот заголовок">¶</a></h3>
<p><em>Описание</em></p>
<p>Эта функция позволяет копировать направление вертексных нормалей с одной геометрии на другую. Существует два режима копирования, <code class="docutils literal"><span class="pre">Matched</span> <span class="pre">Vertices</span></code> и <code class="docutils literal"><span class="pre">Nearest</span> <span class="pre">Vertices</span></code>.</p>
<p>В режиме <code class="docutils literal"><span class="pre">Matched</span> <span class="pre">Vertices</span></code> копируются направления нормалей с вертекса одной модели на вертекс другой, если у них одинаковые координаты; прочие вертексы игнорируются. В режиме <code class="docutils literal"><span class="pre">Nearest</span> <span class="pre">Vertices</span></code> копируются нормали с ближайших вертексов другой модели.</p>
<p><em>Использование</em></p>
<p>Работа с этой функцией производится в объектном режиме. Первым нужно выделить объект, с которого будет происходить копирование, далее объект, на который будет происходить копирование. Необходимо также выделить вертексы целевого объекта, на которые необходимо произвести перенос направления нормалей.</p>
<a class="reference internal image-reference" href="_images/vnt_img14.gif"><img alt="_images/vnt_img14.gif" class="align-center" src="_images/vnt_img14.gif" style="width: 100%;" /></a>
</div>
</div>
<div class="section" id="index-3">
<span id="id7"></span><h2>Освещение от источников света<a class="headerlink" href="#index-3" title="Ссылка на этот заголовок">¶</a></h2>
<p>На сцене может быть несколько (но не менее одного) источников света разного типа.</p>
<div class="section" id="id8">
<h3>Типы источников света<a class="headerlink" href="#id8" title="Ссылка на этот заголовок">¶</a></h3>
<p>Поддерживаются источники света следующих типов:</p>
<dl class="docutils">
<dt><em>Point</em></dt>
<dd>Точечный. Свет распространяется из одной точки равномерно во все стороны, с постепенным затуханием.</dd>
<dt><em>Sun</em></dt>
<dd>&#8220;Солнце&#8221;. Свет распространяется из бесконечной плоскости прямолинейно в одном направлении, без затухания.</dd>
<dt><em>Spot</em></dt>
<dd>Прожектор. Свет распространяется из одной точки, с ограничением угла распространения, с постепенным затуханием.</dd>
<dt><em>Hemi</em></dt>
<dd>Полусфера. Свет распространяется из бесконечной полусферы, без затухания.</dd>
</dl>
</div>
<div class="section" id="id9">
<h3>Настройка источников света<a class="headerlink" href="#id9" title="Ссылка на этот заголовок">¶</a></h3>
<p>Производится во вкладке <code class="docutils literal"><span class="pre">Object</span> <span class="pre">Data</span></code> при выборе объекта-лампы.</p>
<a class="reference internal image-reference" href="_images/lighting_setup.jpg"><img alt="_images/lighting_setup.jpg" class="align-center" src="_images/lighting_setup.jpg" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>Color</em></dt>
<dd>Цветовая характеристика света. Значение по умолчанию (1.0, 1.0, 1.0) (белый).</dd>
<dt><em>Energy</em></dt>
<dd>Интенсивность излучения. Значение по умолчанию 1.0.</dd>
<dt><em>Falloff</em></dt>
<dd>Тип затухания. Значение экспортируется, но в движке всегда используется <code class="docutils literal"><span class="pre">Inverse</span> <span class="pre">Square</span></code> (обратный квадратичный). Применяется для источников света типа <code class="docutils literal"><span class="pre">Point</span></code> и <code class="docutils literal"><span class="pre">Spot</span></code>. Значение по умолчанию <code class="docutils literal"><span class="pre">Inverse</span> <span class="pre">Square</span></code>.</dd>
<dt><em>Distance</em></dt>
<dd>Параметр затухания. Применяется для источников света типа <code class="docutils literal"><span class="pre">Point</span></code> и <code class="docutils literal"><span class="pre">Spot</span></code>. Значение по умолчанию 25.0.</dd>
<dt><em>Specular</em></dt>
<dd>Создание отблеска на объектах. По умолчанию включено.</dd>
<dt><em>Diffuse</em></dt>
<dd>Применение рассеянного освещения к объектам. По умолчанию включено.</dd>
<dt><em>Spot Shape &gt; Size</em></dt>
<dd>Угол конуса в градусах. Применяется для источников света типа <code class="docutils literal"><span class="pre">Spot</span></code>. Значение по умолчанию 45º.</dd>
<dt><em>Spot Shape &gt; Blend</em></dt>
<dd>Параметр смягчения края светового пятна. Применяется для источников света типа <code class="docutils literal"><span class="pre">Spot</span></code>. Значение по умолчанию 0.15.</dd>
<dt><em>Dynamic intesity</em></dt>
<dd>Источник света используется для расчета изменения времени суток. Применяется для источников света типа &#8220;Солнце&#8221;. По умолчанию отключено.</dd>
<dt><em>Shadows &gt; Generate shadows</em></dt>
<dd>Источник света используется для расчета падающих теней. Применяется в случае наличия нескольких источников света. По умолчанию отключено.</dd>
</dl>
</div>
</div>
<div class="section" id="environment-lighting">
<span id="id10"></span><h2>Освещение от окружающей среды<a class="headerlink" href="#environment-lighting" title="Ссылка на этот заголовок">¶</a></h2>
<p>Движок поддерживает 3 метода симуляции рассеянного освещения от окружающих объектов.</p>
<ol class="arabic simple">
<li>&#8220;Плоское&#8221; освещение белым цветом.</li>
<li>Полусферическая модель освещения, в которой задается цвет горизонта и цвет зенита, в результате чего объекты заливаются градиентом между этими цветами в зависимости от направления нормалей.</li>
<li>Освещение с помощью <a class="reference internal" href="textures.html#environment-map"><span>карты окружения</span></a> - т.н. методика image-based lighting.</li>
</ol>
<div class="section" id="id11">
<h3>Активация<a class="headerlink" href="#id11" title="Ссылка на этот заголовок">¶</a></h3>
<p>Включить опцию <code class="docutils literal"><span class="pre">Environment</span> <span class="pre">Lighting</span></code> во вкладке <code class="docutils literal"><span class="pre">World</span></code>.</p>
<a class="reference internal image-reference" href="_images/lighting_environment.jpg"><img alt="_images/lighting_environment.jpg" class="align-center" src="_images/lighting_environment.jpg" style="width: 100%;" /></a>
</div>
<div class="section" id="id12">
<h3>Настройка<a class="headerlink" href="#id12" title="Ссылка на этот заголовок">¶</a></h3>
<dl class="docutils">
<dt><em>World &gt; Environment Lighting &gt; Energy</em></dt>
<dd>Интенсивность освещения от окружающей среды. Значение по умолчанию 1.0.</dd>
<dt><em>World &gt; Environment Lighting &gt; Environment Color</em></dt>
<dd>Выбор метода симуляции рассеянного освещения: <code class="docutils literal"><span class="pre">White</span></code> - &#8220;плоское&#8221; освещение белым цветом, <code class="docutils literal"><span class="pre">Sky</span> <span class="pre">Color</span></code> - полусферическая модель , <code class="docutils literal"><span class="pre">Sky</span> <span class="pre">Texture</span></code> - освещение с помощью <a class="reference internal" href="textures.html#environment-map"><span>карты окружения</span></a>. Значение по умолчанию <code class="docutils literal"><span class="pre">White</span></code>.</dd>
<dt><em>World &gt; Horizon Color</em> и <em>World &gt; Zenith Color</em></dt>
<dd>Если выбрана полусферическая модель рассеянного освещения <code class="docutils literal"><span class="pre">Sky</span> <span class="pre">Color</span></code>, цвет горизонта и цвет зенита задаются цветоподборщиками <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Horizon</span> <span class="pre">Color</span></code> (цвет горизонта) и <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Zenith</span> <span class="pre">Color</span></code> (цвет зенита). При выборе цвета рекомендуется активировать опцию <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Blend</span> <span class="pre">Sky</span></code>.</dd>
</dl>
</div>
<div class="section" id="id13">
<h3>Использование карты окружения<a class="headerlink" href="#id13" title="Ссылка на этот заголовок">¶</a></h3>
<p>Для того, чтобы использовать карту окружения в целях реализации освещения от окружающей среды, необходимо:</p>
<ol class="arabic simple">
<li>Включить опцию <code class="docutils literal"><span class="pre">Environment</span> <span class="pre">Lighting</span></code> во вкладке <code class="docutils literal"><span class="pre">World</span></code>.</li>
<li>Выбрать метод <code class="docutils literal"><span class="pre">Environment</span> <span class="pre">Lighting</span> <span class="pre">&gt;</span> <span class="pre">Sky</span> <span class="pre">Texture</span></code>.</li>
<li>Перейти из вкладки <code class="docutils literal"><span class="pre">World</span></code> во вкладку <code class="docutils literal"><span class="pre">Texture</span></code>.</li>
<li>Создать <a class="reference internal" href="textures.html#environment-map"><span>карту окружения</span></a>, загрузить в нее соответствующее изображение.</li>
<li>Для карты окружения на панели <code class="docutils literal"><span class="pre">Export</span> <span class="pre">Options</span></code> для значения <code class="docutils literal"><span class="pre">Sky</span> <span class="pre">Texture</span> <span class="pre">Usage</span></code> выбрать <code class="docutils literal"><span class="pre">ENVIRONMENT_LIGHTING</span></code> или <code class="docutils literal"><span class="pre">BOTH</span></code> (опция <code class="docutils literal"><span class="pre">BOTH</span></code> активирует также использование этой текстуры в качестве <a class="reference internal" href="textures.html#skydome-texture"><span>текстуры неба</span></a>).</li>
</ol>
<a class="reference internal image-reference" href="_images/lighting_environment_texture.jpg"><img alt="_images/lighting_environment_texture.jpg" class="align-center" src="_images/lighting_environment_texture.jpg" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="shadows">
<span id="id14"></span><h2>Тени<a class="headerlink" href="#shadows" title="Ссылка на этот заголовок">¶</a></h2>
<p>Тени - один из важнейших элементов при рендеринге конечного изображения. Они предоставляют зрителю не только информацию о силуэте объектов, но и об их высоте и взаимном расположении, положении источника света и т.д.</p>
<p>Платформой Blend4Web реализуются такие техники, как каскадные карты теней (CSM) и смягченные тени (PCF).</p>
<div class="section" id="id15">
<h3>Активация<a class="headerlink" href="#id15" title="Ссылка на этот заголовок">¶</a></h3>
<ol class="arabic simple">
<li>На объектах, <strong>отбрасывающих</strong> тени, включить опцию <code class="docutils literal"><span class="pre">Shadows:</span> <span class="pre">Cast</span></code> во вкладке <code class="docutils literal"><span class="pre">Object</span></code>.</li>
<li>На объектах, <strong>получающих</strong> тени, включить опцию <code class="docutils literal"><span class="pre">Shadows:</span> <span class="pre">Receive</span></code> во вкладке <code class="docutils literal"><span class="pre">Object</span></code>.</li>
<li>Убедиться, что включена опция <code class="docutils literal"><span class="pre">Shadows</span></code> <code class="docutils literal"><span class="pre">AUTO</span></code> или <code class="docutils literal"><span class="pre">ON</span></code> во вкладке <code class="docutils literal"><span class="pre">Render</span></code>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p>Объекты, имеющие <a class="reference internal" href="materials.html#alpha-blend"><span>прозрачные материалы с градиентом</span></a>, не отбрасывают теней.</p>
<a class="last reference internal image-reference" href="_images/alpha_shadows.jpg"><img alt="_images/alpha_shadows.jpg" class="align-center" src="_images/alpha_shadows.jpg" style="width: 100%;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="id16">
<h3>Настройка<a class="headerlink" href="#id16" title="Ссылка на этот заголовок">¶</a></h3>
<dl class="docutils">
<dt><em>Направление</em></dt>
<dd>В случае наличия нескольких источников света рекомендуется указать, какой именно источник света будет использоваться для расчета падающих теней, включив опцию <code class="docutils literal"><span class="pre">Shadows</span> <span class="pre">&gt;</span> <span class="pre">Generate</span> <span class="pre">Shadows</span></code> во вкладке <code class="docutils literal"><span class="pre">Object</span> <span class="pre">Data</span></code> при выборе объекта-лампы.</dd>
<dt><em>Цвет</em></dt>
<dd>Цвет тени определяется настройками <a class="reference internal" href="#environment-lighting"><span>освещения от окружающей среды</span></a>.</dd>
</dl>
<p>Во вкладке <code class="docutils literal"><span class="pre">Render</span></code> на панели <code class="docutils literal"><span class="pre">Shadows</span></code> находятся дополнительные настройки:</p>
<a class="reference internal image-reference" href="_images/b4w_shadow_settings.png"><img alt="_images/b4w_shadow_settings.png" class="align-center" src="_images/b4w_shadow_settings.png" style="width: 100%;" /></a>
<dl class="docutils">
<dt><em>Resolution</em></dt>
<dd>Разрешение используемой карты теней. Значение по умолчанию: 2048x2048px.</dd>
<dt><em>Self-shadow polygon offset</em></dt>
<dd>Коэффициент смещения полигона в зависимости от ориентации к источнику света. Значение по умолчанию: 1.</dd>
<dt><em>Self-shadow normal offset</em></dt>
<dd>Коэффициент смещения полигона по нормали. Значение по умолчанию: 0.01.</dd>
</dl>
<p>Последние две настройки служат для борьбы с артефактами самозатенения. Они проявляются на объектах, одновременно отбрасывающих и принимающих тени.
Параметр <code class="docutils literal"><span class="pre">Self-shadow</span> <span class="pre">polygon</span> <span class="pre">offset</span></code> лучше справляется с артефактами во внутренних областях полигонов, а <code class="docutils literal"><span class="pre">Self-shadow</span> <span class="pre">normal</span> <span class="pre">offset</span></code> - в приграничных.
Оба параметра приводят к искажению теней, поэтому рекомендуется держать их как можно меньшими.</p>
<a class="reference internal image-reference" href="_images/self_shadow_artifacts.png"><img alt="_images/self_shadow_artifacts.png" class="align-center" src="_images/self_shadow_artifacts.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>Enable CSM</em></dt>
<dd>Включение каскадной модели теней; открывает доступ к расширенным настройкам. Отключено по умолчанию.</dd>
</dl>
<p>Эта опция позволяет выбрать один из следующих вариантов наложения теней:</p>
<ul class="simple">
<li>Стандартная модель, использующая одну оптимизированную карту теней, охватывающую всю сцену (<code class="docutils literal"><span class="pre">Enable</span> <span class="pre">CSM</span></code> отключена).</li>
<li>Каскады теней (<code class="docutils literal"><span class="pre">Enable</span> <span class="pre">CSM</span></code> включена).</li>
</ul>
<dl class="docutils">
<dt><em>Blur radius</em></dt>
<dd>Коэффициент размытия теней, позволяющий настроить cмягченные тени. Значение по умолчанию: 3. Коэффициент 0 даст жесткие тени.</dd>
</dl>
<a class="reference internal image-reference" href="_images/blur_radius.png"><img alt="_images/blur_radius.png" class="align-center" src="_images/blur_radius.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Смягченные тени могут повысить качество и реалистичность изображения. Они скрывают неизбежную при использовании основанных на изображениях техник зубчатость краев, особенно сильно проявляющуюся для карт теней низкого разрешения. Использование смягченных теней часто позволяет снизить разрешение без существенной потери качества.</p>
<div class="section" id="id17">
<h4>Стандартная модель<a class="headerlink" href="#id17" title="Ссылка на этот заголовок">¶</a></h4>
<p>Этот вариант больше подходит для маленьких сцен, состоящих из небольшого числа объектов. Благодаря оптимизации на таких сценах можно добиться более высокого качества теней по сравнению с каскадной моделью. Данный вариант проще и быстрее настроить, а использование всего лишь одной карты теней положительно сказывается на производительности.</p>
</div>
<div class="section" id="id18">
<h4>Каскады теней<a class="headerlink" href="#id18" title="Ссылка на этот заголовок">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Данные настройки поддерживаются только для источников освещения типа <code class="docutils literal"><span class="pre">Sun</span></code>. Для других источников каскады автоматически отключаются.</p>
</div>
<p>Для обеспечения приемлемого качества теней и одновременно покрытия значительных пространств необходимо использовать несколько стадий генерации теней (каскадов). При этом вблизи наблюдателя располагается каскад с наилучшим качеством, вдали от наблюдателя — с наихудшим.
Этот вариант больше подходит для сцен среднего и большого размера, например, игровых уровней.</p>
<p>При включении предоставляет расширенные настройки:</p>
<img alt="_images/b4w_shadow_settings_csm.png" class="align-center" src="_images/b4w_shadow_settings_csm.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>CSM number</em></dt>
<dd>Количество каскадов теней. Поддерживается от 1 до 4 каскадов. Значение по умолчанию: 1.</dd>
<dt><em>CSM first cascade border</em></dt>
<dd>Размер первого каскада. Значение по умолчанию: 10.0.</dd>
<dt><em>CSM last cascade border</em></dt>
<dd>Размер последнего каскада. Значение по умолчанию: 100.0.</dd>
</dl>
<p>Размеры промежуточных каскадов интерполируются на основе последних двух параметров.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">При настройке следует помнить, что, увеличивая размер каскада, мы получаем на нем менее качественные тени. С другой стороны, уменьшение параметра <code class="docutils literal"><span class="pre">CSM</span> <span class="pre">first</span> <span class="pre">cascade</span> <span class="pre">border</span></code> приблизит к камере и сделает более заметными последующие менее детальные каскады. Уменьшение параметра <code class="docutils literal"><span class="pre">CSM</span> <span class="pre">last</span> <span class="pre">cascade</span> <span class="pre">border</span></code> приведет к исчезновению теней на более близком расстоянии от камеры. Однако, при использовании мягких теней качество в целом улучшится благодаря размытию на границах.</p>
</div>
<a class="reference internal image-reference" href="_images/csm_cascade_distance.png"><img alt="_images/csm_cascade_distance.png" class="align-center" src="_images/csm_cascade_distance.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>CSM first cascade blur radius</em></dt>
<dd>Коэффициент размытия на первом каскаде. Значение по умолчанию: 3. Коэффициент 0 даст жесткие тени.</dd>
<dt><em>CSM last cascade blur radius</em></dt>
<dd>Коэффициент размытия на последнем каскаде. Значение по умолчанию: 1.5. Коэффициент 0 даст жесткие тени.</dd>
</dl>
<p>Радиус размытия каждого промежуточного каскада интерполируется на основе этих параметров.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Смягченные тени рекомендуется настраивать сначала на первом каскаде опцией <code class="docutils literal"><span class="pre">CSM</span> <span class="pre">first</span> <span class="pre">cascade</span> <span class="pre">blur</span> <span class="pre">radius</span></code>, а далее на всех остальных с помощью <code class="docutils literal"><span class="pre">CSM</span> <span class="pre">last</span> <span class="pre">cascade</span> <span class="pre">blur</span> <span class="pre">radius</span></code>. Часто на последнем каскаде может потребоваться размытие меньшее, нежели на первом. Это нужно для того, чтобы тени на последнем каскаде не стали слишком блеклыми из-за низкой детализации, к тому же это уменьшит нежелательные артефакты самозатенения.</p>
</div>
<dl class="docutils">
<dt><em>Fade-out last cascade</em></dt>
<dd>Плавное исчезновение последнего каскада. По умолчанию включено.</dd>
<dt><em>Blend between cascades</em></dt>
<dd>Сглаживание границ между каскадами. По умолчанию включено.</dd>
</dl>
<a class="reference internal image-reference" href="_images/blend_between_cascades.png"><img alt="_images/blend_between_cascades.png" class="align-center" src="_images/blend_between_cascades.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>
<div class="section" id="index-4">
<span id="id19"></span><h2>Цвет фона<a class="headerlink" href="#index-4" title="Ссылка на этот заголовок">¶</a></h2>
<p>Цвет фона можно задать несколькими способами:</p>
<ol class="arabic simple">
<li>Установить параметры <code class="docutils literal"><span class="pre">Horizon</span> <span class="pre">Color</span></code> и <code class="docutils literal"><span class="pre">Zenith</span> <span class="pre">Color</span></code> на вкладке <code class="docutils literal"><span class="pre">World</span></code> в Blender, предварительно выставив опцию <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Render</span> <span class="pre">Sky</span></code>.</li>
<li>Поместить сцену внутрь модели (например, куба или сферы) с направленными внутрь нормалями, с материалом и опциональной текстурой.</li>
<li>Разместить перед камерой поверхность с материалом и опциональной текстурой, присоединить ее к камере связью родитель-потомок. При необходимости настроить расстояние до поверхности, переднюю и заднюю плоскости отсечения камеры.</li>
</ol>
<a class="reference internal image-reference" href="_images/parented_background.jpg"><img alt="_images/parented_background.jpg" class="align-center" src="_images/parented_background.jpg" style="width: 100%;" /></a>
<ol class="arabic" start="4">
<li><p class="first">Использовать <a class="reference internal" href="textures.html#skydome-texture"><span>текстуру неба</span></a>.</p>
</li>
<li><p class="first">Настроить динамически генерируемую <a class="reference internal" href="outdoor_rendering.html#atmosphere"><span>атмосферу</span></a>.</p>
</li>
<li><p class="first">Установить параметр движка <code class="docutils literal"><span class="pre">background_color</span></code>, используя программный метод <code class="docutils literal"><span class="pre">config.set()</span></code>, предварительно отключив опцию <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Render</span> <span class="pre">Sky</span></code> на вкладке <code class="docutils literal"><span class="pre">World</span></code> в Blender. Установленное значение используется в качестве аргумента метода WebGL <code class="docutils literal"><span class="pre">clearColor()</span></code>. Для получения корректных результатов рекомендуется отключить прозрачность контекста WebGL (параметр <code class="docutils literal"><span class="pre">alpha</span></code>). Такая конфигурация используется по умолчанию в стандартном веб-плеере движка.</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">m_cfg</span> <span class="o">=</span> <span class="nx">b4w</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">m_main</span> <span class="o">=</span> <span class="nx">b4w</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">);</span>

<span class="c1">// gray</span>
<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;background_color&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mf">0.224</span><span class="p">,</span> <span class="mf">0.224</span><span class="p">,</span> <span class="mf">0.224</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]));</span>
<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

<span class="nx">m_main</span><span class="p">.</span><span class="nx">init</span><span class="p">(...);</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">В качестве фона можно использовать любой HTML контент, находящийся позади элемента <code class="docutils literal"><span class="pre">canvas</span></code>, который используется для рендеринга. Для это необходимо активировать прозрачность контекста WebGL (параметр <code class="docutils literal"><span class="pre">alpha</span></code>), предварительно отключив опцию <code class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Render</span> <span class="pre">Sky</span></code> на вкладке <code class="docutils literal"><span class="pre">World</span></code> в Blender. Для получения корректных результатов рекомендуется выставить полностью прозрачный черный цвет фона. Такая конфигурация используется по умолчанию в стандартном <a class="reference internal" href="viewer.html#viewer"><span>просмотрщике сцен</span></a> SDK движка.</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">m_cfg</span> <span class="o">=</span> <span class="nx">b4w</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">m_main</span> <span class="o">=</span> <span class="nx">b4w</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">);</span>

<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;background_color&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]));</span>
<span class="nx">m_cfg</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nx">m_main</span><span class="p">.</span><span class="nx">init</span><span class="p">(...);</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">См.также</p>
<p class="last"><a class="reference internal" href="gamma_alpha.html#alpha-compositing"><span>Альфа-композитинг</span></a></p>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, ООО &#34;Триумф&#34;.<br/>
      Обновлено: 2015-07-29.<br/>
      Создано с помощью <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>