b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec4","a",";","a","=","u_view_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","a",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_color_id",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eU",";","varying","vec4","eV",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";","varying","vec4","e_",";","varying","vec4","fa",";","varying","vec4","fb",";","varying","vec4","fc",";","uniform","float","u_perspective_cast_far_bound",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","te",",","tf",";","vec3","tg",",","th",",","ti",",","tj",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tg","=","u_camera_eye_frag","-","eU",";","tg","=","normalize","(","tg",")",";","td","(","tg",",","th",",","ti",",","tj",",","te",",","tf",")",";","tf","=","tf",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["tf","=","(","texture2D","(","u_sampler",",","fd",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tf","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","tf","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eU",";","varying","vec4","eV",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eZ",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","vN",";","float","vO",",","vP",",","vQ",";","mat4","vR",";","vec3","vS",",","vT",",","vU",",","vV",",","vW",",","vX",";","vS","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vT","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vU","=","vec3","(","a_tangent",")",";","vV","=","a_tangent","[","3","]","*","cross","(","vT",",","vU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vU","=","vec3","(","0.0",")",";","vV","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vT","=","vec3","(","0.0",")",";","vU","=","vec3","(","0.0",")",";","vV","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["vS","=","mix","(","vS",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vT","=","mix","(","vT",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vW","=","vec3","(","a_tangent",")",";","vX","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vW",")",";","vU","=","mix","(","vU",",","vW",",","u_va_frame_factor",")",";","vV","=","mix","(","vV",",","vX",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uT","(","vS",",","vU",",","vV",",","vT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vV","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vV","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vU","=","(","u_model_matrix","*","vec4","(","vV",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vR","=","tM","(","u_camera_eye",",","vU",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vR","=","tG","(","u_camera_eye",",","vU",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vX","=","(","u_model_matrix","*","vec4","(","vV",",","1.0",")",")",".","xyz",";","vR","=","vR","*","ty","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vX",")",";"]}]}}]},{type:"textline",tokens:["el","vY","=","tT","(","vS","-","vV",",","vV",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vR",")",";","vY",".","b","=","vU",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["el","vY","=","tT","(","vS",",","vV",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vH","(","vY",".","a",",","vY",".","b",",","vT",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vT","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vT","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["vH","(","vY",".","a",",","vY",".","b",",","vT",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["fd","=","tW","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eU","=","vY",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["eW","=","vY",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vO","=","(","dot","(","cross","(","vY",".","e",",","vY",".","c",")",",","vY",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","eX","=","vec4","(","vY",".","c",",","vO",")",";"]}]}}]},{type:"textline",tokens:["eV","=","u_view_matrix","*","vec4","(","vY",".","a",",","1.0",")",";","vN","=","u_proj_matrix","*","eV",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["vN",".","xy","+=","u_subpixel_jitter","*","vN",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vO","=","vN",".","x",";","vP","=","vN",".","y",";","vQ","=","vN",".","w",";","eY",".","x","=","(","vO","+","vQ",")","/","2.0",";","eY",".","y","=","(","vP","+","vQ",")","/","2.0",";","eY",".","z","=","vQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eZ","=","-","eV",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["vM","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","vY",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eU",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eX",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","e_",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fc",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","vN",",","vO",";","vec3","vP",",","vQ",",","vR",",","vS",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["vP","=","u_camera_eye_frag","-","eU",";","vP","=","normalize","(","vP",")",";","td","(","vP",",","vQ",",","vR",",","vS",",","vN",",","vO",")",";","vO","=","vO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vO","=","(","texture2D","(","u_colormap0",",","fd",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vO","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","vO","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","gT","(","eV",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","+=","0.00001","*","eX",".","r",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eU",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eX",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","e_",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fc",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eZ",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","wC",";","vec4","wD",",","wE",";","float","wF",";","mat4","wG",",","wH",";","vec3","wI",",","wJ",",","wK",",","wL",",","wM",",","wN",";","wI","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["wJ","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wJ","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["wK","=","vec3","(","a_tangent",")",";","wL","=","a_tangent","[","3","]","*","cross","(","wJ",",","wK",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wK","=","vec3","(","0.0",")",";","wL","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["wI","=","mix","(","wI",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["wJ","=","mix","(","wJ",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["wM","=","vec3","(","a_tangent",")",";","wN","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","wM",")",";","wK","=","mix","(","wK",",","wM",",","u_va_frame_factor",")",";","wL","=","mix","(","wL",",","wN",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uT","(","wI",",","wK",",","wL",",","wJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["wL","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wL","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["el","wO","=","wr","(","wI",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","wJ",",","wL",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["wK","=","(","u_model_matrix","*","vec4","(","wL",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wG","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wG","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wH","=","tM","(","u_camera_eye",",","wK",",","wG",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wH","=","tG","(","u_camera_eye",",","wK",",","wG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wN","=","(","u_model_matrix","*","vec4","(","wL",",","1.0",")",")",".","xyz",";","wH","=","wH","*","ty","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","wN",")",";"]}]}}]},{type:"textline",tokens:["el","wO","=","tT","(","wI","-","wL",",","wL",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","wJ",",","wH",")",";","wO",".","b","=","wK",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["el","wO","=","tT","(","wI",",","wL",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","wJ",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wJ","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wJ","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["vH","(","wO",".","a",",","wO",".","b",",","wJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eU","=","wO",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["eW","=","wO",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["wF","=","(","dot","(","cross","(","wO",".","e",",","wO",".","c",")",",","wO",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","eX","=","vec4","(","wO",".","c",",","wF",")",";"]}]}}]}]}}]},{type:"textline",tokens:["wD","=","u_view_matrix","*","vec4","(","wO",".","a",",","1.0",")",";","wE","=","u_proj_matrix","*","wD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["wE",".","xy","+=","u_subpixel_jitter","*","wE",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eY","=","eT","(","wE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eZ","=","-","eV",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["vM","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["fd","=","tW","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wB","(","wO",".","a",",","wO",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eV","=","wD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wC","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","wF","=","SHADOW_TEX_RES","/","2.0",";","wC","=","floor","(","wC","*","wF","+","0.5",")","/","wF","-","wC",";","wE",".","xy","+=","wC",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","wE",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","wC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","wC",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","wC",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","wC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","wC",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","wC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","wC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","wC",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","wC",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","wD",";","mat4","wE",";","vec3","wF",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["wF","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","wE","=","tG","(","u_camera_eye",",","wF",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wE","=","wE","*","ty","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["el","wG","=","tT","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","wE",")",";","wG",".","b","=","wF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["el","wG","=","tT","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["wD","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","wG",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["wC","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wC","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["wC","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","wD",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","wD",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","fd",";","varying","float","wE",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","wF","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","wF","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","wH","(","float","wG",")","{","return","wG","-","floor","(","wG","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","wQ","(","inout","float","wI",",","in","float","wJ","[","wF","]",",","in","float","wK",")","{","float","wL",",","wM",",","wN",",","wO",";","for","(","int","wP","=","0",";","wP","<","NUM_RINGS",";","wP","++",")","{","wL","=","40.0","*","wJ","[","wP","]",";","wM","=","300.0","*","(","wH","(","wL",")","-","0.005",")",";","wN","=","wL",";","wO","=","abs","(","wN","*","(","u_halo_size","*","wM","-","wK",")",")",";","wI","+=","1.0","-","min","(","wO",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","wZ","(","inout","float","wR",",","in","float","wS","[","wF","]",",","in","float","wT",")","{","float","wU",",","wV",",","wW",",","wX",";","for","(","int","wY","=","0",";","wY","<","NUM_LINES",";","wY","++",")","{","wU","=","wS","[","wY","]",";","wV","=","wU",";","wW","=","1000.0","*","(","wH","(","wU",")","-","0.005",")",";","wX","=","20.0","*","abs","(","wV","*","fd",".","x","+","wW","*","fd",".","y",")",";","wR","+=","1.0","-","min","(","wX",",","1.0",")",";","}","wR","*=","wT",";","}"]}]}}]},{type:"textline",tokens:["void","xf","(","inout","float","w_",",","in","vec2","xa",")","{","float","xb",",","xc",",","xd",",","xe",";","xc","=","atan","(","xa",".","y",",","xa",".","x",")",";","xc","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","xd","=","cos","(","xc",")",";","xe","=","sin","(","xc",")",";","xc","=","(","xd","*","xa",".","x","+","xe","*","xa",".","y",")","*","(","xd","*","xa",".","y","-","xe","*","xa",".","x",")",";","xb","=","abs","(","xc",")",";","if","(","xb","<","1.0",")","{","xb","=","(","0.01","*","u_halo_size",")","/","(","xb",")",";","w_","*=","sqrt","(","min","(","xb",",","1.0",")",")",";","}","}","void","main","(",")","{","vec3","xg",";","float","xh",",","xi",",","xj",",","xk",";","xh","=","(","fd",".","x","*","fd",".","x","+","fd",".","y","*","fd",".","y",")",";","xi","=","sqrt","(","xh",")",";","xh","=","max","(","1.0","-","xh",",","0.0",")",";","xh","=","pow","(","xh",",","u_halo_hardness",")",";","xj","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","xl","[","wF","]",";","for","(","int","xm","=","0",";","xm","<","wF",";","xm","++",")","{","xl","[","xm","]","=","fract","(","wE","/","(","float","(","xm",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["xk","=","0.0",";","wQ","(","xk",",","xl",",","xi",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["xi","=","0.0",";","wZ","(","xi",",","xl",",","xh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["xf","(","xh",",","fd",")",";"]}]}}]},{type:"textline",tokens:["xh","*=","xj",";","xg","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["xk","*=","xh",";","xg","+=","u_halo_rings_color","*","xk",";","xh","+=","xk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["xi","*=","xj",";","xg","+=","u_halo_lines_color","*","xi",";","xh","+=","xi",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["xh","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xi","=","u_halo_stars_blend","*","(","wD",".","y","-","u_halo_stars_height",")",";","xh","*=","clamp","(","xi",",","0.0",",","1.0",")",";","xh","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ef","(","xg",")",";","ei","(","xg",",","xh",")",";","gl_FragColor","=","vec4","(","xg",",","xh",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","fd",";","varying","float","wE",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","wD",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","wF",",","wG",";","mat4","wH",",","wI",";","vec3","wJ",";","wJ","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","fd","=","a_halo_bb_vertex","*","2.0",";","wE","=","fract","(","wJ",".","x","+","wJ",".","y","+","wJ",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["wH","=","tk","(","wJ",",","u_view_matrix",")",";","wI","=","u_view_matrix",";","wI","[","3","]","[","0","]","=","0.0",";","wI","[","3","]","[","1","]","=","0.0",";","wI","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wH","=","tk","(","wJ",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["wF","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","wF","=","wH","*","wF",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["wG","=","u_proj_matrix","*","wI","*","wF",";","wG",".","z","=","0.99999","*","wG",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wD","=","wF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wG","=","u_proj_matrix","*","u_view_matrix","*","wF",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","wG",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","wF",";","wF","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","wF",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"PROCEDURAL_FOG",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION","USE_REFRACTION","NODES",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:2},"REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","eU",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","wF",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","wG",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","e_",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fc",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},"USE_NODE_B4W_REFRACTION","USE_REFRACTION","NODES",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","wH",",","wI",",","wJ",",","wK",";","mat3","wL",";","vec2","wM",",","wN",",","wO",",","wP",";","vec3","wQ",",","wR",",","wS",",","wT",",","wU",",","wV",",","wW",",","wX",",","wY",";","float","wZ",",","w_",",","xa",",","xb",",","xc",",","xd",",","xe",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["wZ","=","length","(","eV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["w_","=","eU",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["wQ","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["wR","=","normalize","(","u_camera_eye_frag","-","eU",")",";","td","(","wR",",","wS",",","wT",",","wU",",","xa",",","xb",")",";","wS","=","wS",";","xb","=","xb",";","wU","=","wU",";","xa","=","xa",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["wM","=","fd",";"]}]}}]},{type:"textline",tokens:["wT","=","eW",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","wT","=","wT",";","else","wT","=","-","wT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["wV","=","cross","(","wT",",","eX",".","xyz",")","*","eX",".","w",";","wL","=","mat3","(","eX",".","xyz",",","wV",",","wT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["wN","=","normalize","(","u_view_matrix_frag","*","vec4","(","eW",",","0.0",")",")",".","st",";","wN","=","wN","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","wZ","<","PARALLAX_LOD_DIST",")","{","xc","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","wZ",")",",","0.0",",","1.0",")",";","xc","=","u_parallax_scale","*","xc",";","wV","=","normalize","(","wF","*","wL",")",";","xd","=","1.0","/","PARALLAX_STEPS",";","wO","=","wV",".","xy","*","xc","/","(","PARALLAX_STEPS","*","wV",".","z",")",";","xc","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wP","=","wN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wP","=","wM",";"]}]}}]},{type:"textline",tokens:["xe","=","texture2D","(","u_normalmap0",",","wP",")",".","a",";","for","(","float","xf","=","1.0",";","xf","<=","PARALLAX_STEPS",";","xf","++",")","{","if","(","xe","<","xc",")","{","xc","-=","xd",";","wP","-=","wO",";","xe","=","texture2D","(","u_normalmap0",",","wP",")",".","a",";","}","}","wO","=","wP","+","wO",";","xd","=","texture2D","(","u_normalmap0",",","wO",")",".","a","-","(","xc","+","xd",")",";","xc","=","xe","-","xc",";","xd","=","xc","/","(","xc","-","xd",")",";","wP","=","xd","*","wO","+","(","1.0","-","xd",")","*","wP",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["wM","+=","wP","-","wN",";"]}]}}]},{type:"textline",tokens:["wN","=","wP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["wN","+=","wP","-","wM",";"]}]}}]},{type:"textline",tokens:["wM","=","wP",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wH","=","texture2D","(","u_normalmap0",",","wN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wH","=","texture2D","(","u_normalmap0",",","wM",")",";"]}]}}]},{type:"textline",tokens:["wV","=","wH",".","rgb","-","0.5",";","wV","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","wV",",","u_normal_factor",")",";","wU","=","wL","*","wV",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wU","=","wT",";"]}]}}]},{type:"textline",tokens:["wU","=","normalize","(","wU",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["wN","=","normalize","(","u_view_matrix_frag","*","vec4","(","wU",",","0.0",")",")",".","st",";","wN","=","wN","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["wR","=","normalize","(","wF",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wT","=","wG",";","ed","(","wT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wH","=","vec4","(","wT",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wH","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["xd","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wI","=","texture2D","(","u_colormap0",",","wN",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wI","=","texture2D","(","u_colormap0",",","wM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","wI",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wJ","=","texture2D","(","u_colormap1",",","wN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wJ","=","texture2D","(","u_colormap1",",","wM",")",";"]}]}}]},{type:"textline",tokens:["ed","(","wJ",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wK","=","texture2D","(","u_stencil0",",","wN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wK","=","texture2D","(","u_stencil0",",","wM",")",";"]}]}}]},{type:"textline",tokens:["wI","=","mix","(","wI",",","wJ",",","wK",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wH",".","rgb","=","mix","(","wH",".","rgb",",","wI",".","rgb",",","u_diffuse_color_factor",")",";","xc","=","u_alpha_factor","*","wI",".","a",";","xc","+=","(","1.0","-","step","(","0.0",",","xc",")",")",";","wH",".","a","=","mix","(","xc",",","1.0",",","u_diffuse_color",".","a",")",";","xd","=","wI",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wH",".","rgb","*=","mix","(","vec3","(","1.0",")",",","wI",".","rgb",",","u_diffuse_color_factor",")",";","wH",".","a","=","wI",".","a",";","xd","=","wI",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["wT","=","u_diffuse_intensity","*","wH",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["wS","=","wT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wV","=","u_environment_energy","*","hu","(","wU",")",";","wV","=","u_ambient","*","wV",";","xa","=","gY","(","wT",")",";","wW","=","u_emit","*","wH",".","rgb",";","wX","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["wY","=","vec3","(","xd",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wY","=","texture2D","(","u_specmap0",",","wN",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wY","=","texture2D","(","u_specmap0",",","wM",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["ed","(","wY",".","rgb",")",";","wX","=","mix","(","wX",",","wY",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["xd","=","u_specular_params","[","0","]",";","wM","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","wX","=","xd","*","wX",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["af","xg","=","cS","(","wW",",","wV",",","wT",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["af","xg","=","cN","(","wW",",","wV",",","wT",",","wX",",","eU",",","wU",",","wR",",","wM",",","u_diffuse_params",",","xa",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["wS","=","xg",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["hr","(","wS",",","wR",",","wU",",","u_reflect_factor",")",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["hr","(","wS",",","wR",",","wU",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["wS","+=","xg",".","b",";"]}]}}]},{type:"textline",tokens:["xb","=","wH",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["wS","=","max","(","wS","-","sqrt","(","0.01","*","-","min","(","w_",",","0.0",")",")",",","0.5","*","wS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["eb","(","wS",",","w_",",","u_time",",","xa",",","wU",",","u_sun_direction",",","wQ",",","u_sun_quaternion",",","eU",",","wZ",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xb","<=","0.5",")","discard",";","xb","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xa","=","max","(","max","(","xg",".","b",".","r",",","xg",".","b",".","g",")",",","xg",".","b",".","b",")","*","u_specular_alpha",";","xb","=","wH",".","a","*","(","1.0","-","xa",")","+","xa",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xb","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["wS","=","mix","(","hI","(","eY",",","wU",".","xz","*","u_refr_bump",")",",","wS",",","xb",")",";","xb","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"PROCEDURAL_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xa","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["wU","=","D","(","u_cube_fog",",","wR",")",";","wH","=","vec4","(","wU",",","u_fog_color_density",".","a",")",";","ed","(","wH",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wH","=","u_fog_color_density",";","wH",".","rgb","*=","xa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["U","(","wS",",","wZ",",","wR",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","wH",",","w_",",","xa",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["x","(","wS",",","wZ",",","wH",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wM","=","texture2DProj","(","u_shadow_mask",",","eY",")",".","rg",";","wZ","=","wM",".","g",";","wS","=","vec3","(","wZ",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"SHADELESS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["wS","=","vec3","(","fe",".","a",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ef","(","wS",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},"NODES_GLOW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ei","(","wS",",","xb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","wS",",","xb",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","eU",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","wF",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","wG",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","e_",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fc",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eZ",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","wH",",","wI",";","float","wJ",";","mat4","wK",";","vec3","wL",",","wM",",","wN",",","wO",",","wP",",","wQ",",","wR",";","wL","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["wM","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wM","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wN","=","vec3","(","a_tangent",")",";","wO","=","a_tangent","[","3","]","*","cross","(","wM",",","wN",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wP","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","wQ","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","wP","=","wP","-","u_camera_eye",";","wO","=","cross","(","wP",",","wQ",")",";","wN","=","cross","(","wQ",",","wO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wN","=","vec3","(","0.0",")",";","wO","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["wL","=","mix","(","wL",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["wM","=","mix","(","wM",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["wQ","=","vec3","(","a_tangent",")",";","wP","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","wQ",")",";","wN","=","mix","(","wN",",","wQ",",","u_va_frame_factor",")",";","wO","=","mix","(","wO",",","wP",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uT","(","wL",",","wN",",","wO",",","wM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["wP","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wP","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["el","wS","=","wr","(","wL",",","wN",",","wO",",","wM",",","wP",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["wQ","=","(","u_model_matrix","*","vec4","(","wP",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wK","=","tM","(","u_camera_eye",",","wQ",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wK","=","tG","(","u_camera_eye",",","wQ",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wR","=","(","u_model_matrix","*","vec4","(","wP",",","1.0",")",")",".","xyz",";","wK","=","wK","*","ty","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","wR",")",";"]}]}}]},{type:"textline",tokens:["el","wS","=","tT","(","wL","-","wP",",","wP",",","wN",",","wO",",","wM",",","wK",")",";","wS",".","b","=","wQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["el","wS","=","tT","(","wL",",","wP",",","wN",",","wO",",","wM",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wJ","=","(","dot","(","cross","(","wS",".","e",",","wS",".","c",")",",","wS",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","eX","=","vec4","(","wS",".","c",",","wJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vH","(","wS",".","a",",","wS",".","b",",","wM",")",";"]}]}}]},{type:"textline",tokens:["eU","=","wS",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["eW","=","wS",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["wF","=","u_camera_eye","-","wS",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["fd","=","tW","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["wG","=","wS",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["wG","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["wH","=","u_view_matrix","*","vec4","(","wS",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["eV","=","wH",";"]}]}}]},{type:"textline",tokens:["wI","=","u_proj_matrix","*","wH",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["wI",".","xy","+=","u_subpixel_jitter","*","wI",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["eY","=","eT","(","wI",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wB","(","wS",".","a",",","wS",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eZ","=","-","wH",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["vM","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","wI",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec2","u_texel_size",";","uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","float","wH",";","varying","vec3","wG",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"textline",tokens:["varying","float","wI",";","void","main","(",")","{","vec4","wJ",";","vec3","wK",";","float","wL",",","wM",",","wN",";","vec2","wO",",","wP",";","wO","=","gl_PointCoord","-","0.5",";","wL","=","2.0","*","length","(","wO",")",";","wL","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","wL",")",";","wL","=","u_diffuse_color",".","a","*","wH","*","(","1.0","-","wL",")",";","wK","=","wG","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["x","(","wK",",","length","(","eV",")",",","u_fog_color_density",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["wP","=","eY",".","xy","/","eY",".","z",";","wO","=","vec2","(","wO",".","x",",","-","wO",".","y",")","*","wI","*","u_texel_size",";","wO","=","vec2","(","wP","+","wO",")",";","wJ","=","texture2D","(","u_scene_depth",",","wO",")",";","wM","=","k","(","wJ",")",";","wN","=","-","eV",".","z","/","u_view_max_depth",";","wN","=","wM","-","wN",";","wN","=","u_view_max_depth","/","SOFT_STRENGTH","*","wN",";","wL","=","wL","*","min","(","wN",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["ef","(","wK",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ei","(","wK",",","wL",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","wK",",","wL",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","wH",";","varying","vec3","wG",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"textline",tokens:["varying","float","wI",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","xv",",","xw",",","xx",",","xy",";","vec4","xz",",","xA",";","wJ","xB",";","xB","=","xu","(",")",";","xz","=","u_view_matrix","*","vec4","(","xB",".","b",",","1.0",")",";","xA","=","u_proj_matrix","*","xz",";","gl_Position","=","xA",";","wH","=","xB",".","c",";","wG","=","xB",".","d",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eV","=","xz",";"]}]}}]},{type:"textline",tokens:["xv","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","xv","=","xB",".","a","*","xv",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","xA",".","x",";","xx","=","xA",".","y",";","xy","=","xA",".","w",";","eY",".","x","=","(","xw","+","xy",")","/","2.0",";","eY",".","y","=","(","xx","+","xy",")","/","2.0",";","eY",".","z","=","xy",";","wI","=","xv",";"]}]}}]},{type:"textline",tokens:["gl_PointSize","=","xv",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","wH",";","varying","vec3","wG",";","varying","vec2","fd",";","varying","vec3","wF",";","varying","vec3","eU",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec2","xv",";","float","xw",",","xx",",","xy",";","vec3","xz",",","xA",",","xB",",","xC",",","xD",",","xE",";","vec4","xF",",","xG",";","xF","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["xG","=","texture2D","(","u_sampler",",","fd",")",";","ed","(","xG",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xF",".","rgb","=","mix","(","xF",".","rgb",",","xG",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xF",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xG",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["xF",".","a","=","xG",".","a",";"]}]}}]},{type:"textline",tokens:["xF",".","rgb","*=","wG",";","xz","=","u_diffuse_intensity","*","xF",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","u_emit","*","xF",".","rgb",";","xB","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xC","=","u_environment_energy","*","hu","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xC","=","u_environment_energy","*","hu","(","xB",")",";"]}]}}]},{type:"textline",tokens:["xC","=","u_ambient","*","xC",";","xw","=","u_specular_params","[","0","]",";","xv","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","xD","=","xw","*","u_specular_color",";","xE","=","normalize","(","wF",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["af","xH","=","cN","(","xA",",","xC",",","xz",",","xD",",","eU",",","xB",",","xE",",","xv",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["af","xH","=","cS","(","xA",",","xC",",","xz",")",";"]}]}}]},{type:"textline",tokens:["xC","=","xH",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xC","=","xz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["x","(","xC",",","length","(","eV",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["xw","=","xF",".","a","*","wH",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xx","=","-","eV",".","z","/","u_view_max_depth",";","xF","=","texture2DProj","(","u_scene_depth",",","eY",")",";","xy","=","k","(","xF",")",";","xx","=","xy","-","xx",";","xx","=","u_view_max_depth","/","SOFT_STRENGTH","*","xx",";","xw","=","xw","*","min","(","xx",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["ef","(","xC",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ei","(","xC",",","xw",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xC",",","xw",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","wH",";","varying","vec3","wG",";","varying","vec2","fd",";","varying","vec3","wF",";","varying","vec3","eU",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","xx","(","vec2","xv",",","vec2","xw",")","{","return","(","atan","(","xw",".","y",",","xw",".","x",")","-","atan","(","xv",".","y",",","xv",".","x",")",")",";","}","void","main","(",")","{","vec4","xy",",","xz",",","xA",";","mat4","xB",";","float","xC",",","xD",",","xE",";","wJ","xF",";","xF","=","xu","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","xC","=","xF",".","e",";","xB","=","tk","(","xF",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","xC","=","xF",".","e",";","xB","=","eF","(",")",";","xB","[","3","]","=","vec4","(","xF",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","xC","=","xF",".","e",";","xB","=","eJ","(","radians","(","90.0",")",")",";","xB","[","3","]","=","vec4","(","xF",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","xC","=","xx","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","xF",".","e",";","xB","=","eH","(","radians","(","-","90.0",")",")",";","xB","[","3","]","=","vec4","(","xF",".","b",",","1.0",")",";","}","xy","=","vec4","(","a_p_bb_vertex","*","2.0","*","xF",".","a","*","u_p_size",",","0.0",",","1.0",")",";","xy","=","xB","*","eL","(","xC",")","*","xy",";","xz","=","u_view_matrix","*","xy",";","xA","=","u_proj_matrix","*","xz",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xC","=","xA",".","x",";","xD","=","xA",".","y",";","xE","=","xA",".","w",";","eY",".","x","=","(","xC","+","xE",")","/","2.0",";","eY",".","y","=","(","xD","+","xE",")","/","2.0",";","eY",".","z","=","xE",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","xA",";","wH","=","xF",".","c",";","wG","=","xF",".","d",";","fd","=","a_p_bb_vertex","+","0.5",";","eU","=","xy",".","xyz",";","wF","=","u_camera_eye","-","xy",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eV","=","xz",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","xv",";","const","float","xw","=","0.99",";","const","float","xx","=","1.8",";","const","int","xy","=","8",";","float","xE","(","vec3","xz",",","vec3","xA",")","{","float","xB",",","xC",",","xD",";","xB","=","dot","(","xA",",","xA",")",";","xC","=","2.0","*","dot","(","xA",",","xz",")",";","xD","=","dot","(","xz",",","xz",")","-","1.0",";","xB","=","xC","*","xC","-","4.0","*","xB","*","xD",";","xB","=","sqrt","(","xB",")",";","xB","=","(","-","xC","-","xB",")","/","2.0",";","xB","=","xD","/","xB",";","return","xB",";","}","float","xL","(","float","xF",",","float","xG",")","{","float","xH",",","xI",",","xJ",",","xK",";","xH","=","3.0","*","(","1.0","-","xG","*","xG",")",";","xI","=","2.0","*","(","2.0","+","xG","*","xG",")",";","xJ","=","1.0","+","xF","*","xF",";","xK","=","pow","(","1.0","+","xG","*","xG","-","2.0","*","xG","*","xF",",","1.5",")",";","xK","=","max","(","xK",",","0.00001",")",";","return","(","xH","/","xI",")","*","(","xJ","/","xK",")",";","}","float","xR","(","vec3","xM",",","vec3","xN",",","float","xO",")","{","vec3","xP",";","float","xQ",";","xQ","=","dot","(","xN",",","-","xM",")",";","if","(","xQ","<","0.0",")","{","return","1.0",";","}","xP","=","xM","+","xQ","*","xN",";","if","(","length","(","xP",")","<","xO",")","{","return","0.0",";","}","else","if","(","length","(","xP",")",">=","xO",")","{","xP","=","normalize","(","xP",")","*","xO","-","xM",";","xQ","=","acos","(","dot","(","normalize","(","xP",")",",","xN",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","xQ","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","xV","(","float","xS",",","vec3","xT",",","float","xU",")","{","return","xT","-","xT","*","pow","(","u_sky_color",",","vec3","(","xU","/","xS",")",")",";","}","void","main","(",")","{","float","xW",",","xX",",","xY",",","xZ",",","x_",",","ya",",","yb",",","yc",",","yd",";","vec3","ye",",","yf",",","yg",",","yh",",","yi",",","yj",",","yk",";","ye","=","normalize","(","xv",")",";","yf","=","u_sun_direction",";","xW","=","dot","(","ye",",","yf",")",";","xX","=","xL","(","xW",",","-","0.01",")","*","u_rayleigh_brightness","*","yf",".","y",";","xY","=","xL","(","xW","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","yf",".","y",")",";","xW","=","smoothstep","(","0.0",",","100.0",",","xL","(","xW",",","0.9995",")",")","*","u_spot_brightness",";","yg","=","vec3","(","0.0",",","xw",",","0.0",")",";","xZ","=","xE","(","yg",",","ye",")",";","x_","=","xZ","/","float","(","xy",")",";","ya","=","xR","(","yg",",","ye",",","xw","-","0.3",")",";","yh","=","vec3","(","0.0",",","0.0",",","0.0",")",";","yi","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","yl","=","0",";","yl","<","xy",";","yl","++",")","{","yb","=","x_","*","float","(","yl",")",";","yj","=","yg","+","ye","*","yb",";","yc","=","xR","(","yj",",","yf",",","xw","-","0.2",")",";","yd","=","xE","(","yj",",","yf",")",";","yk","=","xV","(","yd",",","vec3","(","xx",")",",","u_scatter_strength",")","*","yc",";","yh","+=","xV","(","sqrt","(","yb",")",",","u_sky_color","*","yk",",","u_rayleigh_strength",")",";","yi","+=","xV","(","yb",",","yk",",","u_mie_strength",")",";","}","yh","=","yh","*","ya","*","pow","(","xZ",",","u_rayleigh_collection_power",")","/","float","(","xy",")",";","yi","=","(","yi","*","ya","*","pow","(","xZ",",","u_mie_collection_power",")",")","/","float","(","xy",")",";","yh","=","vec3","(","xW","*","yi","+","xY","*","yi","+","xX","*","yh",")",";","ef","(","yh",")",";","gl_FragColor","=","vec4","(","yh",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","xv",";","void","main","(",")","{","vec4","xw",",","xx",";","xw","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","xx","=","u_cube_view_matrix","*","xw",";","xv","=","xx",".","xyz",";","gl_Position","=","xw",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","fd",";","void","main","(",")","{","vec4","xw",";","xw","=","texture2D","(","u_sampler",",","fd",")",";","ef","(","xw",".","rgb",")",";","ei","(","xw",".","rgb",",","xw",".","a",")",";","gl_FragColor","=","xw",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","fd",";","void","main","(",")","{","vec2","xw",";","float","xx",";","vec4","xy",";","vec3","xz",";","fd","=","a_texcoord",";","xz","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","xy","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","xz",",","0.0",")",";","xy",".","x","/=","xy",".","w",";","xy",".","y","/=","xy",".","w",";","xy","+=","99999.0","*","step","(","xy",".","z",",","0.0",")",";","xy","+=","100.0","*","(","step","(","1.0",",","abs","(","xy",".","x",")",")","+","step","(","1.0",",","abs","(","xy",".","y",")",")",")",";","xy",".","x","=","-","a_lf_dist","*","xy",".","x",";","xy",".","y","=","-","a_lf_dist","*","xy",".","y",";","xx","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","xw","=","vec2","(","a_lf_bb_vertex",".","x","/","xx",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","xA","=","1.9",";","xw","*=","(","1.0","+","xA","*","length","(","xy",".","xy",")",")",";","}","gl_Position","=","vec4","(","xy",".","xy","+","xw",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","zC","(","vec3","zx",",","vec3","zy",",","float","zz",",","float","zA",")","{","float","zB",";","zB","=","zz","*","zA",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","xM","(","zy",",","zx",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","xQ","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","xU","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","xZ","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yd","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yi","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ym","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yq","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yu","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yy","(","zx",",","zy",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yE","(","zy",",","zx",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yK","(","zy",",","zx",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yQ","(","zy",",","zx",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yW","(","zy",",","zx",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","za","(","zy",",","zx",",","zB",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ze","(","zy",",","zx",",","zB",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","zK","(","float","zD",",","float","zE",",","float","zF",",","float","zG",")","{","float","zH",";","vec3","zI",",","zJ",";","zI","=","vec3","(","zD",")",",","zJ","=","vec3","(","zE",")",";","zH","=","zF","*","zG",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","xM","(","zJ",",","zI",",","zH",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","xQ","(","zI",",","zJ",",","zH",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","xU","(","zI",",","zJ",",","zH",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zk","(","zD",",","zE",",","zH",",","zG",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zq","(","zD",",","zE",",","zH",",","zG",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zw","(","zD",",","zE",",","zH",",","zG",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ym","(","zI",",","zJ",",","zH",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yq","(","zI",",","zJ",",","zH",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yu","(","zI",",","zJ",",","zH",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yy","(","zI",",","zJ",",","zH",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","za","(","zJ",",","zI",",","zH",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ze","(","zJ",",","zI",",","zH",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","xv",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","zL",";","float","zM",",","zN",",","zO",";","vec3","zP",",","zQ",",","zR",",","zS",",","zT",";","zQ","=","normalize","(","xv",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["zP","=","textureCube","(","u_sky",",","zQ",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["zP","=","u_horizon_color",";","ef","(","zP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["zR","=","vec3","(","fd",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zR","=","vec3","(","xv",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["zM","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["zM","=","abs","(","fd",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zM","=","(","fd",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zN","=","acos","(","zQ",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["zM","=","abs","(","zN","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zM","=","1.0","-","zN","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["zS","=","u_horizon_color",";","zT","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["zN","=","1.0",";","zL","=","textureCube","(","u_sky",",","zQ",")",";","ed","(","zL",".","rgb",")",";","zN","=","zL",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["zN","=","dot","(","zL",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["zL","=","vec4","(","vec3","(","1.0",")","-","zL",".","rgb",",","zL",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zN","=","1.0","-","zN",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["zL","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zN","=","zL",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["zS","=","zC","(","zL",".","rgb",",","zS",",","zN",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zO","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","zR",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["zO","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","zO","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["zO","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["zO","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","zO","!=","0.0",")","zT","=","zC","(","zL",".","rgb",",","zT",",","zN",",","zO",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["zN","=","dot","(","zL",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["zM","=","zK","(","u_sky_tex_dvar",",","zM",",","zN",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["zP","=","mix","(","zS",",","zT",",","zM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zP","=","zS",";"]}]}}]},{type:"textline",tokens:["ef","(","zP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ef","(","zS",")",";","ef","(","zT",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["zP","=","mix","(","zS",",","zT",",","zM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zP","=","zS",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","zP",")",";","zM","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","zM","=","min","(","-","zM","*","0.03",",","0.8",")",";","zN","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","zS","=","vec3","(","0.0",")",";","zL","=","u_underwater_fog_color_density",";","zL",".","rgb","=","mix","(","zL",".","rgb",",","zS",",","min","(","-","zQ",".","y","+","zM",",","1.0",")",")","*","zN",";","zM","=","clamp","(","sign","(","zQ",".","y","-","0.05","*","zM",")",",","0.0",",","1.0",")",";","zP","=","mix","(","zL",".","rgb",",","zP",",","zM",")",";","ef","(","zP",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","zP",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","xv",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","zx",",","zy",";","zx","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","zy","=","u_sky_vp_inverse","*","zx",";","xv","=","zy",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["fd","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","zx",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","WATER_EFFECTS",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"PROCEDURAL_FOG",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","zx","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","wF",";","varying","vec3","eU",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eX",";","varying","vec3","zy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","zz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","zA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","zB",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","zN","(","in","vec2","zC",",","in","vec3","zD",",","in","vec3","zE",",","in","vec3","zF",",","out","float","zG",")","{","float","zH",",","zI",",","zJ",";","vec2","zK",";","vec3","zL",",","zM",";","zG","=","0.0",";","zL","=","reflect","(","-","zE",",","zD",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zK","=","zC",".","xy","+","zD",".","xz","*","REFL_BUMP","/","eZ",";","zG","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zM","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zM","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["zH","=","dot","(","zE",",","zD",")",";","zG","*=","max","(","1.0","-","1.0","/","zH",",","1.0",")",";","}","else","{","zM","=","texture2D","(","u_plane_reflection",",","zK",")",".","rgb",";","ed","(","zM",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zG","=","u_mirror_factor",";","zM","=","zF","*","textureCube","(","u_mirrormap",",","zL",")",".","rgb",";","ed","(","zM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zG","=","u_reflect_factor",";","zM","=","zF","*","vec3","(","0.3",",","0.5",",","1.0",")",";","ed","(","zM",")",";"]}]}}]},{type:"textline",tokens:["zL","=","normalize","(","zL","+","zE",")",";","zH","=","1.0","-","dot","(","zE",",","zL",")",";","zI","=","u_fresnel_params","[","3","]",";","zJ","=","u_fresnel_params","[","2","]",";","zJ","=","zI","+","(","1.0","-","zI",")","*","pow","(","zH",",","zJ",")",";","zG","=","min","(","zG","*","zJ",",","1.0",")",";","return","zM",";","}","void","main","(",")","{","vec4","zO",";","vec2","zP",",","zQ",",","zR",";","float","zS",",","zT",",","zU",",","zV",",","zW",",","zX",";","vec3","zY",",","zZ",",","z_",",","Aa",",","Ab",",","Ac",",","Ad",";","mat3","Ae",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ae","=","mat3","(","eX",",","zy",",","eW",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["zY","=","normalize","(","eW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zY","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zS","=","eU",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["zP","=","vec2","(","zz",".","x",",","-","zz",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zP","=","vec2","(","eU",".","x",",","-","eU",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zP","=","fd",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zZ","=","vec3","(","0.0",")",";","z_","=","texture2D","(","u_normalmap0",",","zP","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","zZ","+=","z_",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Aa","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["Aa","+=","z_",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","texture2D","(","u_normalmap0",",","zP","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","zZ","+=","z_",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["Aa","+=","z_",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","texture2D","(","u_normalmap0",",","zP","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","zZ","+=","z_",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["Aa","+=","z_",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","texture2D","(","u_normalmap0",",","zP","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","zZ","+=","z_",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["Aa","+=","z_",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Aa","=","Ae","*","Aa",";","if","(","!","eo","(","Aa",",","vec3","(","0.0",")",")",")","Aa","=","normalize","(","Aa",")",";","Aa","=","mix","(","zY",",","Aa",",","0.2",")",";","Aa","=","normalize","(","Aa",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["zY","=","mix","(","zY",",","normalize","(","Ae","*","zZ",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zY","=","mix","(","zY",",","normalize","(","Ae","*","zZ",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["zY","=","normalize","(","zY",")",";"]}]}}]},{type:"textline",tokens:["zZ","=","normalize","(","wF",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zQ","=","eY",".","xy","/","eY",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zT","=","eZ","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["zU","=","u_diffuse_color",".","a",";","zO","=","texture2DProj","(","u_scene_depth",",","eY",")",";","zV","=","k","(","zO",")",";","zW","=","max","(","zV","-","eZ",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["zR","=","zQ","+","zY",".","xz","*","u_refr_bump","/","eZ",";","zV","=","hA","(","zV",",","zR",",","zQ",")",";","zV","=","max","(","zV","-","eZ",",","0.0",")",";","zV","=","u_view_max_depth","/","ABSORB","*","zV",";","if","(","u_cam_water_depth","<","0.0",")","zX","=","0.0",";","else","zX","=","min","(","zU","*","zV",",","1.0",")",";","zV","=","u_view_max_depth","/","ABSORB","*","zW",";","zU","=","min","(","15.0","*","zU","*","u_view_max_depth","*","zW",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zV","=","u_view_max_depth","/","ABSORB","*","zW",";","if","(","u_cam_water_depth",">","0.0",")","zU","=","min","(","zU","*","zV",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["zU","*=","min","(","5.0","*","zT",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zU","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["zX","=","1.0","-","zU",";","zR","=","zQ","+","zY",".","xz","*","u_refr_bump","/","eZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","texture2D","(","u_refractmap",",","zR",")",".","rgb",";","ed","(","z_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["zV","=","pow","(","min","(","zA",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","Ab","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","zV",")",";","zV","=","pow","(","min","(","zA",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","Ab","=","mix","(","u_shore_water_col",",","Ab",",","zV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ab","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["zW","=","max","(","1.0","-","u_view_max_depth","*","zW",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zW","=","1.0","-","zU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["zS","=","max","(","zS","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ac","=","normalize","(","vec3","(","zA",".","r",",","0.0",",","zA",".","g",")",")",";","Ac","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","Ac",",","0.8",")",")",";","zV","=","1.25","*","max","(","dot","(","Aa",",","Ac",")","-","0.2",",","0.0",")",";","zV","+=","max","(","dot","(","Aa",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","zW","+=","zV","*","(","1.0","-","zA",".","b",")",";","zS","*=","(","1.0","-","0.95","*","pow","(","zA",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["zW","+=","zS",";","zW","=","min","(","u_foam_factor","*","zW",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["zO","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","zP","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["zS","=","u_specular_params","[","0","]",";","zP","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","Aa","=","zS","*","u_specular_color",";","Ac","=","u_environment_energy","*","hu","(","zY",")",";","Ac","=","u_ambient","*","Ac",";","Ac","=","Ac","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ad","=","zN","(","zQ",",","zY",",","zZ",",","Ac",",","zS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ad","=","zN","(","vec2","(","0.0",")",",","zY",",","zZ",",","Ac",",","zS",")",";"]}]}}]},{type:"textline",tokens:["Ab","=","u_diffuse_intensity","*","Ab",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["af","Af","=","cN","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ab",",","Aa",",","eU",",","zY",",","zZ",",","zP",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["af","Af","=","cS","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ab",")",";"]}]}}]},{type:"textline",tokens:["Ab","=","Af",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["zV","=","max","(","dot","(","u_sun_direction",",","-","eW",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","zZ",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","zV","=","clamp","(","SSS_STRENGTH","*","zV",",","0.0",",","1.0",")",";","Ab","=","mix","(","Ab",",","u_shallow_water_col",",","zV",")",";","Ab","=","mix","(","Ab",",","u_shore_water_col",",","zV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Ab","=","mix","(","z_",",","Ab",",","zX",")",";"]}]}}]},{type:"textline",tokens:["Ab","=","mix","(","Ab",",","Ad",",","zS",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["zS","=","mix","(","zO",".","g",",","zO",".","r",",","max","(","4.0","*","(","zW","-","0.75",")",",","0.0",")",")",";","zS","=","mix","(","zO",".","b",",","zS",",","max","(","2.0","*","zW","-","1.0",",","0.0",")",")",";","zS","=","mix","(","0.0",",","zS",",","zW",")",";","Ab","=","mix","(","Ab",",","Ac",",","zS",")",";"]}]}}]},{type:"textline",tokens:["Ab","+=","Af",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["zZ","=","D","(","u_cube_fog",",","zZ",")",";","zO","=","vec4","(","zZ",",","u_fog_color_density",".","a",")",";","ed","(","zO",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zO","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","ab","(","Ab",",","zT",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",")",";","}","else","{","x","(","Ab",",","zT",",","zO",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["x","(","Ab",",","zT",",","zO",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ef","(","Ab",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["zU","=","max","(","zU",",","Af",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["zU","+=","zS",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["ei","(","Ab",",","zU",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["zZ","=","fwidth","(","zB",")",";","zZ","=","smoothstep","(","vec3","(","0.0",")",",","zZ","*","zx",",","zB",")",";","zS","=","min","(","min","(","zZ",".","x",",","zZ",".","y",")",",","zZ",".","z",")",";","zS","=","clamp","(","zS",",","0.0",",","1.0",")",";","Ab","=","mix","(","u_wireframe_edge_color",",","Ab",",","zS",")",";","zU","=","mix","(","1.0",",","zU",",","zS",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ab",",","zU",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","wF",";","varying","vec3","eU",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","fd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eX",";","varying","vec3","zy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","zz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","zA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","zB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zG","(","in","vec2","zx",")","{","float","zC",";","vec4","zD",";","vec2","zE",";","zE","=","0.5","+","vec2","(","(","zx",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","zx",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","zD","=","texture2D","(","u_shore_dist_map",",","zE",")",";","const","vec2","zF","=","vec2","(","1.0","/","255.0",",","1.0",")",";","zC","=","dot","(","zD",".","ba",",","zF",")",";","zE","=","normalize","(","zD",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","zE",",","zC",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","zS","(","inout","vec3","zH",",","in","float","zI",",","in","vec3","zJ",")","{","vec2","zK",",","zL",",","zM",";","float","zN",",","zO",",","zP",",","zQ",",","zR",";","zN","=","dG","(","DST_NOISE_SCALE_0","*","(","zH",".","xz","+","DST_NOISE_FREQ_0","*","zI",")",")","*","dG","(","DST_NOISE_SCALE_1","*","(","zH",".","zx","-","DST_NOISE_FREQ_1","*","zI",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["zO","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","zP","=","zJ",".","b",";","zQ","=","sqrt","(","zP",")",";","zO","=","max","(","zP",",","DIR_MIN_SHR_FAC",")","*","sin","(","zQ","/","zO","+","DIR_FREQ","*","zI",")",";","zR","=","max","(","dG","(","DIR_NOISE_SCALE","*","(","zH",".","xz","+","DIR_NOISE_FREQ","*","zI",")",")",",","DIR_MIN_NOISE_FAC",")",";","zO","*=","zR",";","zQ","=","WAVES_HEIGHT","*","mix","(","zO",",","zN",",","max","(","zQ",",","DST_MIN_FAC",")",")",";","zK","=","zJ",".","rg",";","zO","=","WAVES_HOR_FAC","*","zO","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","zP",")",",","0.0",")",";","zK","=","zO","*","zK",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zQ","=","WAVES_HEIGHT","*","zN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["zL","=","2.0","*","(","zH",".","xz","-","0.1","*","zI",")",";","zM","=","1.3","*","(","zH",".","zx","+","0.03","*","zI",")",";","zN","=","dj","(","0.5","*","zL",")",".","x","+","dj","(","0.5","*","zM",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["zH",".","xz","+=","zK",";","zN","*=","zP",";"]}]}}]},{type:"textline",tokens:["zQ","+=","SMALL_WAVES_FAC","*","zN",";"]}]}}]},{type:"textline",tokens:["zH",".","y","+=","zQ",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","zT",",","zU",";","vec2","zV",";","float","zW",",","zX",",","zY",";","vec3","zZ",",","z_",",","Aa",",","Ab",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","zB","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","zB","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","zB","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["zZ","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["zW","=","abs","(","zZ",".","y",")",";","zV","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","zW",")",";","zZ",".","y","=","WATER_LEVEL",";","zZ",".","xz","+=","zV",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["fd","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["el","Ac","=","tT","(","zZ",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["zA","=","zG","(","Ac",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["zX","=","length","(","u_wind",")",";","zY","=","u_time",";","zY","*=","zX",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["zW","=","zW",";","zZ","=","Ac",".","a","+","vec3","(","zW",",","0.0",",","0.0",")",";","z_","=","Ac",".","a","+","vec3","(","0.0",",","0.0",",","zW",")",";","if","(","a_position",".","y","<","0.0",")","{","Ac",".","a",".","y","=","WATER_LEVEL","-","1.0",";","zZ",".","y","=","Ac",".","a",".","y",";","z_",".","y","=","Ac",".","a",".","y",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zz","=","Ac",".","a",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zZ","=","Ac",".","a","+","vec3","(","0.05",",","0.0",",","0.0",")",";","z_","=","Ac",".","a","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Aa","=","zG","(","zZ",".","xz",")",";","Ab","=","zG","(","z_",".","xz",")",";","zS","(","zZ",",","zY",",","Aa",")",";","zS","(","z_",",","zY",",","Ab",")",";","zS","(","Ac",".","a",",","zY",",","zA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zS","(","zZ",",","zY",",","vec3","(","0.0",")",")",";","zS","(","z_",",","zY",",","vec3","(","0.0",")",")",";","zS","(","Ac",".","a",",","zY",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["zZ","=","normalize","(","zZ","-","Ac",".","a",")",";","z_","=","normalize","(","z_","-","Ac",".","a",")",";","eW","=","normalize","(","cross","(","z_",",","zZ",")",")",";","zY","=","dot","(","eW",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","zY","=","clamp","(","0.8","-","zY",",","0.0",",","1.0",")",";","eW","=","mix","(","eW",",","vec3","(","0.0",",","1.0",",","0.0",")",",","zY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","a_tangent",";","eW","=","a_normal",";"]}]}}]},{type:"textline",tokens:["eX","=","z_",";","zy","=","cross","(","eW",",","eX",")",";"]}]}}]},{type:"textline",tokens:["eU","=","Ac",".","a",";","wF","=","u_camera_eye","-","Ac",".","a",";","zT","=","u_view_matrix","*","vec4","(","Ac",".","a",",","1.0",")",";","zU","=","u_proj_matrix","*","zT",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["zY","=","zU",".","x",";","zW","=","zU",".","y",";","zX","=","zU",".","w",";","eY",".","x","=","(","zY","+","zX",")","/","2.0",";","eY",".","y","=","(","zW","+","zX",")","/","2.0",";","eY",".","z","=","zX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["eZ","=","-","zT",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","zU",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","zB",";","const","float","zx","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","zC","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","zC","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","zD","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","zE","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","zF","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","zG",",","zH",";","vec3","zI",",","zJ",";","zI","=","vec3","(","0.0",")",";","zG","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["zJ","=","sign","(","zB","-","vec3","(","0.02","*","zx",")",")",";","if","(","zJ",".","x","<","0.0","||","zJ",".","y","<","0.0","||","zJ",".","z","<","0.0",")","{","zI","=","zC",";","zG","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zJ","=","sign","(","zB","-","vec3","(","0.02","*","zx",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","zJ",".","x","<","0.0","||","zJ",".","y","<","0.0","||","zJ",".","z","<","0.0",")","zI","=","u_wireframe_edge_color",";","else","zI","=","zF",";","zG","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","zJ",".","x","<","0.0","||","zJ",".","y","<","0.0","||","zJ",".","z","<","0.0",")","zG","=","1.0",";","else","zG","=","0.0",";","zI","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","zJ",".","x","<","0.0","||","zJ",".","y","<","0.0","||","zJ",".","z","<","0.0",")","zI","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","zI","=","zD",";","else","zI","=","zE",";","zG","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["zJ","=","fwidth","(","zB",")",";","zJ","=","smoothstep","(","vec3","(","0.0",")",",","zJ","*","zx",",","zB",")",";","zH","=","min","(","min","(","zJ",".","x",",","zJ",".","y",")",",","zJ",".","z",")",";","zH","=","clamp","(","zH",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","zI","=","vec3","(","mix","(","u_wireframe_edge_color",",","zF",",","zH",")",")",";","zG","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","zI","=","u_wireframe_edge_color",";","zG","=","mix","(","1.0",",","0.0",",","zH",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","zI","=","mix","(","u_wireframe_edge_color",",","zD",",","zH",")",";","else","zI","=","mix","(","u_wireframe_edge_color",",","zE",",","zH",")",";","zG","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["ef","(","zI",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["ei","(","zI",",","zG",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","zI",",","zG",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","zB",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","zx",";","mat4","zC",";","vec3","zD",",","zE",",","zF",",","zG",",","zH",";","if","(","a_polyindex","==","0.0",")","zB","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","zB","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","zB","=","vec3","(","0.0",",","0.0",",","1.0",")",";","zD","=","a_position",";","zE","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["el","zI","=","tT","(","zD",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["zD","=","mix","(","zD",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["zF","=","vec3","(","0.0",")",";","zG","=","vec3","(","0.0",")",";","uT","(","zD",",","zF",",","zG",",","zE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["zG","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zG","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["el","zI","=","wr","(","zD",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","zG",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["zF","=","(","u_model_matrix","*","vec4","(","zG",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zC","=","tM","(","u_camera_eye",",","zF",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zC","=","tG","(","u_camera_eye",",","zF",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zH","=","(","u_model_matrix","*","vec4","(","zG",",","1.0",")",")",".","xyz",";","zC","=","zC","*","ty","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","zH",")",";"]}]}}]},{type:"textline",tokens:["el","zI","=","tT","(","zD","-","zG",",","zG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","zC",")",";","zI",".","b","=","zF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["el","zI","=","tT","(","zD",",","zG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vH","(","zI",".","a",",","zI",".","b",",","zE",")",";"]}]}}]}]}}]},{type:"textline",tokens:["zx","=","u_view_matrix","*","vec4","(","zI",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","zx",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","fd",";","void","main","(",")","{","vec4","zx",",","zC",";","zx","=","texture2D","(","u_sampler_left",",","fd",")",";","zC","=","texture2D","(","u_sampler_right",",","fd",")",";","gl_FragColor","=","vec4","(","zx","[","0","]",",","zC","[","1","]",",","zC","[","2","]",",","zx","[","3","]","+","zC","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","fd",";","vec4","zE","(","float","zx",",","float","zC",")","{","vec2","zD",";","zD","=","fd","+","vec2","(","zx",",","zC",")","*","u_texel_size",";","return","texture2D","(","u_color",",","zD",")",";","}","float","zI","(","vec4","zF",")","{","float","zG",";","vec3","zH",";","zH","=","vec3","(","0.299",",","0.587",",","0.114",")",";","zG","=","dot","(","zF",".","rgb",",","zH",")",";","return","zG",";","}","vec4","zV","(",")","{","vec2","zJ",";","float","zK",",","zL",",","zM",",","zN",",","zO",",","zP",";","vec4","zQ",",","zR",",","zS",",","zT",",","zU",";","zQ","=","zE","(","-","1.0",",","-","1.0",")",";","zR","=","zE","(","1.0",",","-","1.0",")",";","zS","=","zE","(","-","1.0",",","1.0",")",";","zT","=","zE","(","1.0",",","1.0",")",";","zU","=","zE","(","0.0",",","0.0",")",";","zK","=","zI","(","zQ",")",";","zL","=","zI","(","zR",")",";","zM","=","zI","(","zS",")",";","zN","=","zI","(","zT",")",";","zO","=","zI","(","zU",")",";","zP","=","min","(","zO",",","min","(","min","(","zK",",","zL",")",",","min","(","zM",",","zN",")",")",")",";","zO","=","max","(","zO",",","max","(","max","(","zK",",","zL",")",",","max","(","zM",",","zN",")",")",")",";","zJ",".","x","=","-","(","(","zK","+","zL",")","-","(","zM","+","zN",")",")",";","zJ",".","y","=","(","(","zK","+","zM",")","-","(","zL","+","zN",")",")",";","zN","=","max","(","(","zK","+","zL","+","zM","+","zN",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","zN","=","1.0","/","(","min","(","abs","(","zJ",".","x",")",",","abs","(","zJ",".","y",")",")","+","zN",")",";","zJ","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","zJ","*","zN",")",")","*","u_texel_size",";","zU","=","0.5","*","(","texture2D","(","u_color",",","fd","+","zJ","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","fd","+","zJ","*","(","2.0","/","3.0","-","0.5",")",")",")",";","zT","=","zU","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","fd","+","zJ","*","-","0.5",")","+","texture2D","(","u_color",",","fd","+","zJ","*","0.5",")",")",";","zN","=","zI","(","zT",")",";","if","(","(","zN","<","zP",")","||","(","zN",">","zO",")",")","return","zU",";","else","return","zT",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","Az","(",")","{","bool","zW",",","zX",",","zY",",","zZ",",","z_",";","float","Aa",",","Ab",",","Ac",",","Ad",",","Ae",",","Af",",","Ag",",","Ah",",","Ai",",","Aj",",","Ak",",","Al",",","Am",",","An",",","Ao",";","vec4","Ap",",","Aq",",","Ar",",","As",",","At",";","vec2","Au",",","Av",",","Aw",",","Ax",",","Ay",";","Au",".","x","=","fd",".","x",";","Au",".","y","=","fd",".","y",";","Ap","=","texture2D","(","u_color",",","Au",")",";","Aq","=","zE","(","0.0",",","1.0",")",";","Ar","=","zE","(","1.0",",","0.0",")",";","As","=","zE","(","0.0",",","-","1.0",")",";","At","=","zE","(","-","1.0",",","0.0",")",";","Aa","=","zI","(","Aq",")",";","Ab","=","zI","(","Ar",")",";","Ac","=","zI","(","As",")",";","Ad","=","zI","(","At",")",";","Ae","=","zI","(","Ap",")",";","Af","=","max","(","Aa",",","Ae",")",";","Ag","=","min","(","Aa",",","Ae",")",";","Af","=","max","(","Ab",",","Af",")",";","Ag","=","min","(","Ab",",","Ag",")",";","Ah","=","max","(","Ac",",","Ad",")",";","Ai","=","min","(","Ac",",","Ad",")",";","Af","=","max","(","Ah",",","Af",")",";","Ag","=","min","(","Ai",",","Ag",")",";","Ai","=","Af","*","FXAA_QUALITY_EDGE_THRESHOLD",";","Ag","=","Af","-","Ag",";","Ai","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","Ai",")",";","zW","=","Ag","<","Ai",";","if","(","zW",")","return","Ap",";","Ap","=","zE","(","-","1.0",",","-","1.0",")",";","At","=","zE","(","1.0",",","1.0",")",";","As","=","zE","(","1.0",",","-","1.0",")",";","Ar","=","zE","(","-","1.0",",","1.0",")",";","Ai","=","zI","(","Ap",")",";","Af","=","zI","(","At",")",";","Ah","=","zI","(","As",")",";","Aj","=","zI","(","Ar",")",";","Ak","=","Ac","+","Aa",";","Al","=","Ad","+","Ab",";","Ag","=","1.0","/","Ag",";","Am","=","Ak","+","Al",";","Ak","=","(","-","2.0","*","Ae",")","+","Ak",";","Al","=","(","-","2.0","*","Ae",")","+","Al",";","An","=","Ah","+","Af",";","Ah","=","Ai","+","Ah",";","Ao","=","(","-","2.0","*","Ab",")","+","An",";","Ah","=","(","-","2.0","*","Ac",")","+","Ah",";","Ai","=","Ai","+","Aj",";","Af","=","Aj","+","Af",";","Ao","=","(","abs","(","Ak",")","*","2.0",")","+","abs","(","Ao",")",";","Ah","=","(","abs","(","Al",")","*","2.0",")","+","abs","(","Ah",")",";","Al","=","(","-","2.0","*","Ad",")","+","Ai",";","Af","=","(","-","2.0","*","Aa",")","+","Af",";","Ao","=","abs","(","Al",")","+","Ao",";","Ah","=","abs","(","Af",")","+","Ah",";","An","=","Ai","+","An",";","Ai","=","u_texel_size",".","x",";","zW","=","Ao",">=","Ah",";","An","=","Am","*","2.0","+","An",";","if","(","!","zW",")","Ac","=","Ad",";","if","(","!","zW",")","Aa","=","Ab",";","if","(","zW",")","Ai","=","u_texel_size",".","y",";","An","=","(","An","*","(","1.0","/","12.0",")",")","-","Ae",";","Ab","=","Ac","-","Ae",";","Ad","=","Aa","-","Ae",";","Ac","=","Ac","+","Ae",";","Aa","=","Aa","+","Ae",";","zX","=","abs","(","Ab",")",">=","abs","(","Ad",")",";","Ad","=","max","(","abs","(","Ab",")",",","abs","(","Ad",")",")",";","if","(","zX",")","Ai","=","-","Ai",";","Ag","=","clamp","(","abs","(","An",")","*","Ag",",","0.0",",","1.0",")",";","Av",".","x","=","Au",".","x",";","Av",".","y","=","Au",".","y",";","Aw",".","x","=","(","!","zW",")","?","0.0",":","u_texel_size",".","x",";","Aw",".","y","=","(","zW",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","zW",")","Av",".","x","+=","Ai","*","0.5",";","if","(","zW",")","Av",".","y","+=","Ai","*","0.5",";","Ax",".","x","=","Av",".","x","-","Aw",".","x",";","Ax",".","y","=","Av",".","y","-","Aw",".","y",";","Ay",".","x","=","Av",".","x","+","Aw",".","x",";","Ay",".","y","=","Av",".","y","+","Aw",".","y",";","An","=","(","(","-","2.0",")","*","Ag",")","+","3.0",";","Ab","=","zI","(","texture2D","(","u_color",",","Ax",")",")",";","Ag","=","Ag","*","Ag",";","Am","=","zI","(","texture2D","(","u_color",",","Ay",")",")",";","if","(","!","zX",")","Ac","=","Aa",";","Ad","=","Ad","*","1.0","/","4.0",";","Ae","=","Ae","-","Ac","*","0.5",";","Ag","=","An","*","Ag",";","zX","=","Ae","<","0.0",";","Ab","-=","Ac","*","0.5",";","Am","-=","Ac","*","0.5",";","zY","=","abs","(","Ab",")",">=","Ad",";","zZ","=","abs","(","Am",")",">=","Ad",";","if","(","!","zY",")","Ax",".","x","-=","Aw",".","x","*","1.5",";","if","(","!","zY",")","Ax",".","y","-=","Aw",".","y","*","1.5",";","z_","=","(","!","zY",")","||","(","!","zZ",")",";","if","(","!","zZ",")","Ay",".","x","+=","Aw",".","x","*","1.5",";","if","(","!","zZ",")","Ay",".","y","+=","Aw",".","y","*","1.5",";","if","(","z_",")","{","if","(","!","zY",")","Ab","=","zI","(","texture2D","(","u_color",",","Ax",".","xy",")",")",";","if","(","!","zZ",")","Am","=","zI","(","texture2D","(","u_color",",","Ay",".","xy",")",")",";","if","(","!","zY",")","Ab","=","Ab","-","Ac","*","0.5",";","if","(","!","zZ",")","Am","=","Am","-","Ac","*","0.5",";","zY","=","abs","(","Ab",")",">=","Ad",";","zZ","=","abs","(","Am",")",">=","Ad",";","if","(","!","zY",")","Ax",".","x","-=","Aw",".","x","*","2.0",";","if","(","!","zY",")","Ax",".","y","-=","Aw",".","y","*","2.0",";","z_","=","(","!","zY",")","||","(","!","zZ",")",";","if","(","!","zZ",")","Ay",".","x","+=","Aw",".","x","*","2.0",";","if","(","!","zZ",")","Ay",".","y","+=","Aw",".","y","*","2.0",";","if","(","z_",")","{","if","(","!","zY",")","Ab","=","zI","(","texture2D","(","u_color",",","Ax",".","xy",")",")",";","if","(","!","zZ",")","Am","=","zI","(","texture2D","(","u_color",",","Ay",".","xy",")",")",";","if","(","!","zY",")","Ab","=","Ab","-","Ac","*","0.5",";","if","(","!","zZ",")","Am","=","Am","-","Ac","*","0.5",";","zY","=","abs","(","Ab",")",">=","Ad",";","zZ","=","abs","(","Am",")",">=","Ad",";","if","(","!","zY",")","Ax",".","x","-=","Aw",".","x","*","2.0",";","if","(","!","zY",")","Ax",".","y","-=","Aw",".","y","*","2.0",";","z_","=","(","!","zY",")","||","(","!","zZ",")",";","if","(","!","zZ",")","Ay",".","x","+=","Aw",".","x","*","2.0",";","if","(","!","zZ",")","Ay",".","y","+=","Aw",".","y","*","2.0",";","if","(","z_",")","{","if","(","!","zY",")","Ab","=","zI","(","texture2D","(","u_color",",","Ax",".","xy",")",")",";","if","(","!","zZ",")","Am","=","zI","(","texture2D","(","u_color",",","Ay",".","xy",")",")",";","if","(","!","zY",")","Ab","=","Ab","-","Ac","*","0.5",";","if","(","!","zZ",")","Am","=","Am","-","Ac","*","0.5",";","zY","=","abs","(","Ab",")",">=","Ad",";","zZ","=","abs","(","Am",")",">=","Ad",";","if","(","!","zY",")","Ax",".","x","-=","Aw",".","x","*","4.0",";","if","(","!","zY",")","Ax",".","y","-=","Aw",".","y","*","4.0",";","z_","=","(","!","zY",")","||","(","!","zZ",")",";","if","(","!","zZ",")","Ay",".","x","+=","Aw",".","x","*","4.0",";","if","(","!","zZ",")","Ay",".","y","+=","Aw",".","y","*","4.0",";","if","(","z_",")","{","if","(","!","zY",")","Ab","=","zI","(","texture2D","(","u_color",",","Ax",".","xy",")",")",";","if","(","!","zZ",")","Am","=","zI","(","texture2D","(","u_color",",","Ay",".","xy",")",")",";","if","(","!","zY",")","Ab","=","Ab","-","Ac","*","0.5",";","if","(","!","zZ",")","Am","=","Am","-","Ac","*","0.5",";","zY","=","abs","(","Ab",")",">=","Ad",";","zZ","=","abs","(","Am",")",">=","Ad",";","if","(","!","zY",")","Ax",".","x","-=","Aw",".","x","*","2.0",";","if","(","!","zY",")","Ax",".","y","-=","Aw",".","y","*","2.0",";","if","(","!","zZ",")","Ay",".","x","+=","Aw",".","x","*","2.0",";","if","(","!","zZ",")","Ay",".","y","+=","Aw",".","y","*","2.0",";","}","}","}","}","Ad","=","Au",".","x","-","Ax",".","x",";","Ac","=","Ay",".","x","-","Au",".","x",";","if","(","!","zW",")","Ad","=","Au",".","y","-","Ax",".","y",";","if","(","!","zW",")","Ac","=","Ay",".","y","-","Au",".","y",";","zZ","=","(","Ab","<","0.0",")","!=","zX",";","Ab","=","(","Ac","+","Ad",")",";","zX","=","(","Am","<","0.0",")","!=","zX",";","Ab","=","1.0","/","Ab",";","zY","=","Ad","<","Ac",";","Ac","=","min","(","Ad",",","Ac",")",";","zX","=","zY","?","zZ",":","zX",";","Ag","=","Ag","*","Ag",";","Ab","=","(","Ac","*","(","-","Ab",")",")","+","0.5",";","Ag","=","Ag","*","FXAA_QUALITY_SUBPIX",";","Ab","=","zX","?","Ab",":","0.0",";","Ag","=","max","(","Ab",",","Ag",")",";","if","(","!","zW",")","Au",".","x","+=","Ag","*","Ai",";","if","(","zW",")","Au",".","y","+=","Ag","*","Ai",";","return","texture2D","(","u_color",",","Au",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_PASS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","fd",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","zV","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Az","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","fd",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","fd",";","void","main","(",")","{","vec4","zx",";","vec2","zC",",","zD",";","zC","=","vec2","(","0.0",",","0.0",")",";","zD","=","u_texel_size",";","zx","=","texture2D","(","u_color",",","fd",")",";","gl_FragColor","=","zx","*","0.0875447373698",";","zC","+=","zD",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","+","zC",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","-","zC",")","*","0.0858112354248",";","zC","+=","zD",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","+","zC",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","-","zC",")","*","0.0808139781061",";","zC","+=","zD",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","+","zC",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","-","zC",")","*","0.0731235112908",";","zC","+=","zD",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","+","zC",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","-","zC",")","*","0.0635705267419",";","zC","+=","zD",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","+","zC",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","-","zC",")","*","0.0530985673112",";","zC","+=","zD",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","+","zC",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","-","zC",")","*","0.0426125984122",";","zC","+=","zD",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","+","zC",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","-","zC",")","*","0.0328565115809",";","zC","+=","zD",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","+","zC",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","fd","-","zC",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","zx",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","fd",";","void","main","(",")","{","vec4","zx",",","zC",";","zx","=","texture2D","(","u_main",",","fd",")",";","zC","=","texture2D","(","u_bloom",",","fd",")",";","zx","=","zx",";","zx","+=","zC",";","gl_FragColor","=","vec4","(","zx",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","fd",";","void","main","(",")","{","float","zx",";","vec3","zC",",","zD",";","vec4","zE",";","zE","=","texture2D","(","u_color",",","fd",")",";","zC","=","zE",".","rgb",";","if","(","u_brightness","<","0.0",")","zC","=","zC","*","(","1.0","+","u_brightness",")",";","else","zC","=","zC","+","(","(","1.0","-","zC",")","*","u_brightness",")",";","zC","=","(","zC","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","zC","*=","u_exposure",";","zD","=","vec3","(","0.299",",","0.587",",","0.114",")",";","zx","=","dot","(","zC",",","zD",")",";","zC","=","mix","(","vec3","(","zx",")",",","zC",",","u_saturation",")",";","gl_FragColor","=","vec4","(","zC",",","zE",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","fd",";","void","main","(",")","{","gl_FragColor","=","g","(","clamp","(","zI","(","u_depth",",","fd",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","fd",";","void","main","(",")","{","float","zx",",","zJ",";","vec4","zK",",","zL",";","zK","=","texture2D","(","u_sharp",",","fd",")",";","if","(","u_dof_dist",">","0.0",")","{","zx","=","zI","(","u_depth",",","fd",",","u_camera_range",")",";","zx","*=","u_view_max_depth",";","if","(","zx","<","u_dof_dist",")","zJ","=","(","u_dof_dist","-","zx",")","/","u_dof_front",";","else","zJ","=","(","zx","-","u_dof_dist",")","/","u_dof_rear",";","zJ","=","clamp","(","zJ",",","0.0",",","1.0",")",";","zL","=","texture2D","(","u_blurred",",","fd",")",";","gl_FragColor","=","mix","(","zK",",","zL",",","zJ",")",";","}","else","gl_FragColor","=","zK",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","fd",";","void","main","(",")","{","float","zx",";","vec4","zJ",",","zK",",","zL",";","zJ","=","texture2D","(","u_src_color",",","fd",")",";","zK","=","texture2D","(","u_glow_mask_small",",","fd",")",";","zL","=","texture2D","(","u_glow_mask_large",",","fd",")",";","gl_FragColor","=","zJ",";","if","(","zL",".","a","!=","0.0",")","{","zx","=","u_glow_mask_large_coeff","*","zL",".","a",";","zx","=","clamp","(","zx",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","zL",".","rgb","/","zL",".","a",",","zx",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","zx",")",";","}","if","(","zK",".","a","!=","0.0",")","{","zx","=","u_glow_mask_small_coeff","*","zK",".","a",";","zx","=","clamp","(","zx",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","zK",".","rgb","/","zK",".","a",",","zx",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","zx",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","zJ",";","varying","vec2","zK",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","fd",";","varying","vec4","zL",";","void","main","(",")","{","vec4","zM",";","float","zN",",","zO",",","zP",",","zQ",",","zR",";","vec2","zS",",","zT",",","zU",";","zS","=","(","zL",".","xy","-","fd",")",";","zN","=","length","(","zS",")",";","zS","=","u_radial_blur_step","*","zS","/","zN",";","zO","=","zN","/","u_radial_blur_step",";","zS","*=","min","(","zO",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","zO","=","max","(","zO",",","STEPS_PER_PASS",")",";","zT","=","fd",";","zP","=","0.0",";","for","(","float","zV","=","0.0",";","zV","<","STEPS_PER_PASS",";","zV","+=","1.0",")","{","if","(","zV","<=","zO",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["zQ","=","zI","(","u_input",",","zT",",","u_camera_range",")",";","zP","+=","max","(","(","1.0","-","pow","(","zN",",","0.3",")",")","*","step","(","0.9",",","zQ",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zM","=","texture2D","(","u_input",",","zT",")",";","zP","+=","k","(","zM",")",";"]}]}}]},{type:"textline",tokens:["}","zT","+=","zS",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zU","=","fd","+","zK",";","zR","=","dj","(","vec2","(","2.5","*","(","zU",".","x",")",",","2.5","*","(","zU",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","dj","(","vec2","(","5.0","*","(","zU",".","x",")","-","0.66","*","u_time",",","5.0","*","(","zU",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dG","(","vec2","(","7.5","*","(","zU",".","x",")","+","0.33","*","u_time",",","7.5","*","(","zU",".","y",")","-","0.33","*","u_time",")",")",";","zR","*=","clamp","(","1.2","-","sqrt","(","0.2","*","zN",")",",","0.0",",","1.0",")","*","zJ",";","zP","=","max","(","zR",",","zP",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","g","(","zP","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","zJ",";","varying","vec2","zK",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","fd",";","varying","vec4","zL",";","void","main","(",")","{","float","zx",",","zM",";","vec3","zN",";","fd","=","a_bb_vertex","+","0.5",";","zN","=","normalize","(","u_sun_direction",")",";","zL","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","zN",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","zJ","=","1.0",";","zN","=","vec3","(","0.0",",","1.0",",","0.0",")",";","zN","=","er","(","u_camera_quat",",","zN",")",";","zN","=","normalize","(","zN",")",";","zx","=","dot","(","zN",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","zM","=","atan","(","zN",".","x",",","zN",".","z",")",";","zK","=","vec2","(","-","zM",",","acos","(","zx",")",")",";","}","else","{","zJ","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["zL",".","xy","=","0.5","*","(","zL",".","xy","/","zL",".","w","+","1.0",")",";","zL","+=","99999.0","*","step","(","zL",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","fd",";","void","main","(",")","{","float","zx",";","vec3","zM",";","vec4","zN",";","zN","=","texture2D","(","u_main",",","fd",")",";","zM","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","ed","(","zN",".","rgb",")",";","zx","=","k","(","texture2D","(","u_god_rays",",","fd",")",")",";","zM","=","zN",".","rgb","+","u_god_rays_intensity","*","vec3","(","zx",")","*","zM",";","ef","(","zM",")",";","gl_FragColor",".","rgb","=","zM",";","gl_FragColor",".","a","=","zN",".","a",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","fd",";","void","main","(",")","{","float","zx",";","vec4","zM",";","zM","=","texture2D","(","u_input",",","fd",")",";","zx","=","dot","(","zM",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","zx",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","zx",",","zM",";","zM","=","0.0",";","for","(","float","zN","=","0.025",";","zN","<","1.0",";","zN","+=","0.05",")","for","(","float","zO","=","0.025",";","zO","<","1.0",";","zO","+=","0.05",")","{","zx","=","max","(","texture2D","(","u_input",",","vec2","(","zN",",","zO",")",")",".","r",",","0.01",")",";","zM","+=","log","(","zx",")",";","}","zM","=","exp","(","zM","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","zM",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","fd",";","varying","float","zM",";","void","main","(",")","{","vec4","zN",";","float","zO",",","zP",";","zO","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","zP","=","texture2D","(","u_luminance",",","fd",")",".","r",";","zN","=","texture2D","(","u_main",",","fd",")",";","zO","=","zP","/","zO",";","zP","=","u_bloom_edge_lum",";","gl_FragColor","=","zN","*","max","(","zO","-","zP",",","0.0",")","*","zM",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","fd",";","varying","float","zM",";","const","vec3","zx","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","zU","(","in","vec4","zN",",","in","vec3","zO",",","out","vec3","zP",")","{","float","zQ",",","zR",",","zS",",","zT",";","zQ","=","zN",".","w","*","zO",".","x","+","zN",".","y","*","zO",".","z","-","zN",".","z","*","zO",".","y",";","zR","=","zN",".","w","*","zO",".","y","+","zN",".","z","*","zO",".","x","-","zN",".","x","*","zO",".","z",";","zS","=","zN",".","w","*","zO",".","z","+","zN",".","x","*","zO",".","y","-","zN",".","y","*","zO",".","x",";","zT","=","-","zN",".","x","*","zO",".","x","-","zN",".","y","*","zO",".","y","-","zN",".","z","*","zO",".","z",";","zP",".","x","=","zQ","*","zN",".","w","-","zT","*","zN",".","x","-","zR","*","zN",".","z","+","zS","*","zN",".","y",";","zP",".","y","=","zR","*","zN",".","w","-","zT","*","zN",".","y","-","zS","*","zN",".","x","+","zQ","*","zN",".","z",";","zP",".","z","=","zS","*","zN",".","w","-","zT","*","zN",".","z","-","zQ","*","zN",".","y","+","zR","*","zN",".","x",";","}","void","main","(",")","{","vec3","zV",";","fd","=","2.0","*","a_position",";","zU","(","u_camera_quat",",","zx",",","zV",")",";","zM","=","dot","(","-","zV",",","u_sun_direction",")","*","u_bloom_key",";","zM","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","fd",";","float","zx","=","0.0042",";","void","main","(",")","{","vec4","zN",",","zO",",","zP",",","zQ",";","zN","=","texture2D","(","u_mb_tex_curr",",","fd",")",";","zO","=","texture2D","(","u_mb_tex_accum",",","fd",")",";","if","(","length","(","zN","-","zO",")",">","u_motion_blur_decay_threshold",")","{","zP","=","(","1.0","-","u_motion_blur_exp",")","*","zN","+","u_motion_blur_exp","*","zO",";","zP","=","zP","-","zO",";","zQ","=","zN","-","zO",";","zP","=","min","(","max","(","abs","(","zP",")",",","vec4","(","zx",")",")",",","abs","(","zQ",")",")","*","sign","(","zP",")",";","gl_FragColor","=","zO","+","zP",";","}","else","{","gl_FragColor","=","zN",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","fd",";","void","main","(",")","{","vec3","zx",";","float","zN",";","vec4","zO",",","zP",",","zQ",";","zO","=","texture2D","(","u_outline_src",",","fd",")",";","gl_FragColor","=","zO",";","if","(","u_draw_outline","!=","0.0",")","{","zP","=","texture2D","(","u_outline_mask",",","fd",")",";","zQ","=","texture2D","(","u_outline_mask_blurred",",","fd",")",";","zN","=","zQ",".","a","-","zP",".","a",";","if","(","zN","!=","0.0",")","{","zN","=","smoothstep","(","0.0",",","1.0",",","zQ",".","a",")",";","if","(","zP",".","a","==","0.0",")","{","zx","=","u_outline_color",";","ef","(","zx",")",";","zP","=","vec4","(","clamp","(","zx",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","zO",",","zP",",","zN",")",";","}","}","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","fd",";","void","main","(",")","{","vec2","zx",",","zN",";","vec4","zO",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","fd",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zO","=","texture2D","(","u_color",",","fd",")",";","gl_FragColor",".","rgb","=","vec3","(","(","zO",".","r","+","zO",".","g","+","zO",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zx","=","vec2","(","0.0",",","0.0",")",";","zN","=","u_texel_size",";","zO","=","texture2D","(","u_color",",","fd",")",";","gl_FragColor","=","zO","*","0.2270270270",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","0.1945945946",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","0.1945945946",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","0.1216216216",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","0.1216216216",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","0.0540540541",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","0.0540540541",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","0.0162162162",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zx","=","vec2","(","0.0",",","0.0",")",";","zN","=","u_texel_size",";","zO","=","texture2D","(","u_color",",","fd",")",";","gl_FragColor","=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.152507",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.141763",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.141763",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.113861",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.113861",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.079019",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.079019",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.047383",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.047383",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.024549",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.024549",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.01099",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.01099",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.00425",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.00425",";","zx","+=","zN",";","zO","=","texture2D","(","u_color",",","fd","+","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.00142",";","zO","=","texture2D","(","u_color",",","fd","-","zx",")",";","gl_FragColor","+=","zO","*","(","1.0","-","step","(","0.0",",","-","zO",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zN","=","u_texel_size",";","zO","=","texture2D","(","u_color",",","fd",")",";","gl_FragColor","=","zO",";","if","(","zO",".","a","==","0.0",")","{","zO","=","texture2D","(","u_color",",","fd","+","zN",")",";","if","(","zO",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","zO",".","a",")",";","else","{","zO","=","texture2D","(","u_color",",","fd","-","zN",")",";","if","(","zO",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","zO",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","fd",";","void","main","(",")","{","fd","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","fd",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","zN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","zO",";","varying","vec4","zP",";","varying","vec4","zQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","zR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zX","(","vec2","zS",",","sampler2D","zT",")","{","float","zU",",","zV",",","zW",";","zU","=","texture2D","(","zT",",","zS",")",".","r",";","zV","=","texture2D","(","zT",",","zO",".","xy",")",".","r",";","zW","=","texture2D","(","zT",",","zO",".","zw",")",".","r",";","return","vec3","(","zU",",","zV",",","zW",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Ab","(","vec2","zY",",","sampler2D","zZ",")","{","vec2","z_",";","vec3","Aa",";","Aa","=","zX","(","zY",",","zZ",")",";","z_","=","abs","(","Aa",".","xx","-","Aa",".","yz",")",";","z_","=","step","(","SMAA_PREDICATION_THRESHOLD",",","z_",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","z_",")",";","}"]}]}}]},{type:"textline",tokens:["void","Af","(","bvec2","Ac",",","inout","vec2","Ad",",","vec2","Ae",")","{","if","(","Ac",".","x",")","Ad",".","x","=","Ae",".","x",";","if","(","Ac",".","y",")","Ad",".","y","=","Ae",".","y",";","}","void","Af","(","bvec4","Ag",",","inout","vec4","Ah",",","vec4","Ai",")","{","Af","(","Ag",".","xy",",","Ah",".","xy",",","Ai",".","xy",")",";","Af","(","Ag",".","zw",",","Ah",".","zw",",","Ai",".","zw",")",";","}","vec2","Ak","(","vec2","Aj",")","{","return","sign","(","Aj",")","*","floor","(","abs","(","Aj",")","+",".5",")",";","}","vec4","Ak","(","vec4","Al",")","{","return","sign","(","Al",")","*","floor","(","abs","(","Al",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Ay","(","vec2","Am",",","sampler2D","An"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Ao"]}]}}]},{type:"textline",tokens:[")","{","vec4","Ap",";","float","Aq",",","Ar",",","As",",","At",",","Au",";","vec3","Av",";","vec2","Aw",",","Ax",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","Ab","(","Am",",","Ao",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["Av","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","Aq","=","dot","(","texture2D","(","An",",","Am",")",".","rgb",",","Av",")",";","Ar","=","dot","(","texture2D","(","An",",","zO",".","xy",")",".","rgb",",","Av",")",";","As","=","dot","(","texture2D","(","An",",","zO",".","zw",")",".","rgb",",","Av",")",";","Ap",".","xy","=","abs","(","Aq","-","vec2","(","Ar",",","As",")",")",";","Aw","=","step","(","Aw",",","Ap",".","xy",")",";","if","(","dot","(","Aw",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","At","=","dot","(","texture2D","(","An",",","zP",".","xy",")",".","rgb",",","Av",")",";","Au","=","dot","(","texture2D","(","An",",","zP",".","zw",")",".","rgb",",","Av",")",";","Ap",".","zw","=","abs","(","Aq","-","vec2","(","At",",","Au",")",")",";","Ax","=","max","(","Ap",".","xy",",","Ap",".","zw",")",";","Au","=","dot","(","texture2D","(","An",",","zQ",".","xy",")",".","rgb",",","Av",")",";","At","=","dot","(","texture2D","(","An",",","zQ",".","zw",")",".","rgb",",","Av",")",";","Ap",".","zw","=","abs","(","vec2","(","Ar",",","As",")","-","vec2","(","Au",",","At",")",")",";","Ax","=","max","(","Ax",".","xy",",","Ap",".","zw",")",";","At","=","max","(","Ax",".","x",",","Ax",".","y",")",";","Aw",".","xy","*=","step","(","At",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","Ap",".","xy",")",";","return","Aw",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","AA","(","vec2","Az",")","{","Az",".","r","=","Az",".","r","*","abs","(","5.0","*","Az",".","r","-","5.0","*","0.75",")",";","return","Ak","(","Az",")",";","}","vec4","AA","(","vec4","AB",")","{","AB",".","rb","=","AB",".","rb","*","abs","(","5.0","*","AB",".","rb","-","5.0","*","0.75",")",";","return","Ak","(","AB",")",";","}","vec2","AJ","(","sampler2D","AC",",","vec2","AD",",","vec2","AE",",","out","vec2","AF",")","{","vec3","AG",";","vec4","AH",";","AH","=","vec4","(","AD",",","-","1.0",",","1.0",")",";","AG","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","AI","=","0",";","AI","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","AI","++",")","{","if","(","AH",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","AH",".","w",">","0.9",")","{","AH",".","xyz","+=","AG","*","vec3","(","AE",",","1.0",")",";","AF","=","texture2D","(","AC",",","AH",".","xy",",","0.0",")",".","rg",";","AH",".","w","=","dot","(","AF",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","AH",".","zw",";","}","vec2","AR","(","sampler2D","AK",",","vec2","AL",",","vec2","AM",",","out","vec2","AN",")","{","vec3","AO",";","vec4","AP",";","AP","=","vec4","(","AL",",","-","1.0",",","1.0",")",";","AP",".","x","+=","0.25","*","u_texel_size",".","x",";","AO","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","AQ","=","0",";","AQ","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","AQ","++",")","{","if","(","AP",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","AP",".","w",">","0.9",")","{","AP",".","xyz","=","AO","*","vec3","(","AM",",","1.0",")","+","AP",".","xyz",";","AN","=","texture2D","(","AK",",","AP",".","xy",",","0.0",")",".","rg",";","AN","=","AA","(","AN",")",";","AP",".","w","=","dot","(","AN",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","AP",".","zw",";","}","vec2","AX","(","sampler2D","AS",",","vec2","AT",",","vec2","AU",",","float","AV",")","{","vec2","AW",";","AW","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","AU","+","AT",";","AW","=","SMAA_AREATEX_PIXEL_SIZE","*","AW","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","AW",".","x","+=","0.5",";","AW",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","AV",";","return","texture2D","(","AS",",","AW",",","0.0",")",".","rg",";","}","vec2","Bi","(","sampler2D","AY",",","sampler2D","AZ",",","vec2","A_",",","vec2","Ba",",","vec4","Bb",")","{","vec4","Bc",",","Bd",",","Be",";","vec2","Bf",",","Bg",",","Bh",";","Bf","=","vec2","(","0.0",",","0.0",")",";","if","(","Ba",".","r",">","0.0",")","{","Bc",".","xz","=","AJ","(","AY",",","A_",",","vec2","(","-","1.0",",","1.0",")",",","Bg",")",";","Bc",".","x","+=","float","(","Bg",".","y",">","0.9",")",";","}","else","Bc",".","xz","=","vec2","(","0.0",",","0.0",")",";","Bc",".","yw","=","AJ","(","AY",",","A_",",","vec2","(","1.0",",","-","1.0",")",",","Bg",")",";","if","(","Bc",".","x","+","Bc",".","y",">","2.0",")","{","Bd","=","vec4","(","-","Bc",".","x","+","0.25",",","Bc",".","x",",","Bc",".","y",",","-","Bc",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","A_",".","xyxy",";","Be",".","xy","=","texture2D","(","AY",",","Bd",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","Be",".","zw","=","texture2D","(","AY",",","Bd",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","Be",".","yxwz","=","AA","(","Be",".","xyzw",")",";","Bh","=","vec2","(","2.0",",","2.0",")","*","Be",".","xz","+","Be",".","yw",";","Af","(","bvec2","(","step","(","0.9",",","Bc",".","zw",")",")",",","Bh",",","vec2","(","0.0",",","0.0",")",")",";","Bf","+=","AX","(","AZ",",","Bc",".","xy",",","Bh",",","Bb",".","z",")",";","}","Bc",".","xz","=","AR","(","AY",",","A_",",","vec2","(","-","1",",","-","1",")",",","Bg",")",";","if","(","texture2D","(","AY",",","A_","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","Bc",".","yw","=","AR","(","AY",",","A_",",","vec2","(","1",",","1",")",",","Bg",")",";","Bc",".","y","+=","float","(","Bg",".","y",">","0.9",")",";","}","else","Bc",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","Bc",".","x","+","Bc",".","y",">","2.0",")","{","Be","=","vec4","(","-","Bc",".","x",",","-","Bc",".","x",",","Bc",".","y",",","Bc",".","y",")","*","u_texel_size",".","xyxy","+","A_",".","xyxy",";","Bd",".","x","=","texture2D","(","AY",",","Be",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","Bd",".","y","=","texture2D","(","AY",",","Be",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","Bd",".","zw","=","texture2D","(","AY",",","Be",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","Bg","=","vec2","(","2.0",",","2.0",")","*","Bd",".","xz","+","Bd",".","yw",";","Af","(","bvec2","(","step","(","0.9",",","Bc",".","zw",")",")",",","Bg",",","vec2","(","0",",","0",")",")",";","Bf","+=","AX","(","AZ",",","Bc",".","xy",",","Bg",",","Bb",".","w",")",".","gr",";","}","return","Bf",";","}"]}]}}]},{type:"textline",tokens:["float","Bo","(","sampler2D","Bj",",","vec2","Bk",",","float","Bl",")","{","vec2","Bm",",","Bn",";","Bm","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","Bn","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","Bl",",","1.0",")",";","Bm","+=","vec2","(","-","1.0",",","1.0",")",";","Bn","+=","vec2","(","0.5",",","-","0.5",")",";","Bm","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","Bn","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","Bj",",","Bm","*","Bk","+","Bn",",","0.0",")",".","r",";","}","float","Bw","(","sampler2D","Bp",",","sampler2D","Bq",",","vec2","Br",",","float","Bs",")","{","float","Bt",";","vec2","Bu",";","Bu","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Bv","=","0",";","Bv","<","SMAA_MAX_SEARCH_STEPS",";","Bv","++",")","{","if","(","Br",".","x",">","Bs","&&","Bu",".","g",">","0.8281","&&","Bu",".","r","==","0.0",")","{","Bu","=","texture2D","(","Bp",",","Br",",","0.0",")",".","rg",";","Br","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Br",";","}","}","Bt","=","-","(","255.0","/","127.0",")","*","Bo","(","Bq",",","Bu",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","Bt","+","Br",".","x",";","}","float","BE","(","sampler2D","Bx",",","sampler2D","By",",","vec2","Bz",",","float","BA",")","{","float","BB",";","vec2","BC",";","BC","=","vec2","(","0.0",",","1.0",")",";","for","(","int","BD","=","0",";","BD","<","SMAA_MAX_SEARCH_STEPS",";","BD","++",")","{","if","(","Bz",".","x","<","BA","&&","BC",".","g",">","0.8281","&&","BC",".","r","==","0.0",")","{","BC","=","texture2D","(","Bx",",","Bz",",","0.0",")",".","rg",";","Bz","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Bz",";","}","}","BB","=","-","(","255.0","/","127.0",")","*","Bo","(","By",",","BC",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","BB","+","Bz",".","x",";","}","float","BM","(","sampler2D","BF",",","sampler2D","BG",",","vec2","BH",",","float","BI",")","{","float","BJ",";","vec2","BK",";","BK","=","vec2","(","1.0",",","0.0",")",";","for","(","int","BL","=","0",";","BL","<","SMAA_MAX_SEARCH_STEPS",";","BL","++",")","{","if","(","BH",".","y",">","BI","&&","BK",".","r",">","0.8281","&&","BK",".","g","==","0.0",")","{","BK","=","texture2D","(","BF",",","BH",",","0.0",")",".","rg",";","BH","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","BH",";","}","}","BJ","=","-","(","255.0","/","127.0",")","*","Bo","(","BG",",","BK",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","BJ","+","BH",".","y",";","}","float","BU","(","sampler2D","BN",",","sampler2D","BO",",","vec2","BP",",","float","BQ",")","{","float","BR",";","vec2","BS",";","BS","=","vec2","(","1.0",",","0.0",")",";","for","(","int","BT","=","0",";","BT","<","SMAA_MAX_SEARCH_STEPS",";","BT","++",")","{","if","(","BP",".","y","<","BQ","&&","BS",".","r",">","0.8281","&&","BS",".","g","==","0.0",")","{","BS","=","texture2D","(","BN",",","BP",",","0.0",")",".","rg",";","BP","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","BP",";","}","}","BR","=","-","(","255.0","/","127.0",")","*","Bo","(","BO",",","BS",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","BR","+","BP",".","y",";","}","vec2","Ca","(","sampler2D","BV",",","vec2","BW",",","float","BX",",","float","BY",",","float","BZ",")","{","vec2","B_",";","B_","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","Ak","(","4.0","*","vec2","(","BX",",","BY",")",")","+","BW",";","B_","=","SMAA_AREATEX_PIXEL_SIZE","*","B_","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","B_",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","BZ","+","B_",".","y",";","return","texture2D","(","BV",",","B_",",","0.0",")",".","rg",";","}","void","Ch","(","sampler2D","Cb",",","inout","vec2","Cc",",","vec4","Cd",",","vec2","Ce",")","{","vec2","Cf",",","Cg",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Cf","=","step","(","Ce",".","xy",",","Ce",".","yx",")",";","Cg","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","Cf",";","Cg","/=","Cf",".","x","+","Cf",".","y",";","Cf","=","vec2","(","1.0",",","1.0",")",";","Cf",".","x","-=","Cg",".","x","*","texture2D","(","Cb",",","Cd",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","Cf",".","x","-=","Cg",".","y","*","texture2D","(","Cb",",","Cd",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","Cf",".","y","-=","Cg",".","x","*","texture2D","(","Cb",",","Cd",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","Cf",".","y","-=","Cg",".","y","*","texture2D","(","Cb",",","Cd",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","Cc","*=","clamp","(","Cf",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","Co","(","sampler2D","Ci",",","inout","vec2","Cj",",","vec4","Ck",",","vec2","Cl",")","{","vec2","Cm",",","Cn",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Cm","=","step","(","Cl",".","xy",",","Cl",".","yx",")",";","Cn","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","Cm",";","Cn","/=","Cm",".","x","+","Cm",".","y",";","Cm","=","vec2","(","1.0",",","1.0",")",";","Cm",".","x","-=","Cn",".","x","*","texture2D","(","Ci",",","Ck",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","Cm",".","x","-=","Cn",".","y","*","texture2D","(","Ci",",","Ck",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","Cm",".","y","-=","Cn",".","x","*","texture2D","(","Ci",",","Ck",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","Cm",".","y","-=","Cn",".","y","*","texture2D","(","Ci",",","Ck",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","Cj","*=","clamp","(","Cm",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","CC","(","vec2","Cp",",","vec2","Cq",",","sampler2D","Cr",",","sampler2D","Cs",",","sampler2D","Ct",",","vec4","Cu",")","{","float","Cv",",","Cw",";","vec3","Cx",";","vec2","Cy",",","Cz",",","CA",";","vec4","CB",";","CB","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","Cy","=","texture2D","(","Cr",",","Cp",")",".","rg",";","if","(","Cy",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["CB",".","rg","=","Bi","(","Cr",",","Cs",",","Cp",",","Cy",",","Cu",")",";","if","(","CB",".","r","==","-","CB",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","Cx",".","x","=","Bw","(","Cr",",","Ct",",","zO",".","xy",",","zQ",".","x",")",";","Cx",".","y","=","zP",".","y",";","Cz",".","x","=","Cx",".","x",";","Cv","=","texture2D","(","Cr",",","Cx",".","xy",",","0.0",")",".","r",";","Cx",".","z","=","BE","(","Cr",",","Ct",",","zO",".","zw",",","zQ",".","y",")",";","Cz",".","y","=","Cx",".","z",";","Cz","=","abs","(","Ak","(","Cz","/","u_texel_size",".","xx","-","Cq",".","xx",")",")",";","CA","=","sqrt","(","Cz",")",";","Cw","=","texture2D","(","Cr",",","Cx",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","CB",".","rg","=","Ca","(","Cs",",","CA",",","Cv",",","Cw",",","Cu",".","y",")",";","Cx",".","y","=","Cp",".","y",";","Ch","(","Cr",",","CB",".","rg",",","Cx",".","xyzy",",","Cz",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","Cy",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","Cy",".","r",">","0.0",")","{",";","Cx",".","y","=","BM","(","Cr",",","Ct",",","zP",".","xy",",","zQ",".","z",")",";","Cx",".","x","=","zO",".","x",";","Cy",".","x","=","Cx",".","y",";","Cw","=","texture2D","(","Cr",",","Cx",".","xy",",","0.0",")",".","g",";","Cx",".","z","=","BU","(","Cr",",","Ct",",","zP",".","zw",",","zQ",".","w",")",";","Cy",".","y","=","Cx",".","z",";","Cy","=","abs","(","Ak","(","Cy","/","u_texel_size",".","yy","-","Cq",".","yy",")",")",";","Cz","=","sqrt","(","Cy",")",";","Cv","=","texture2D","(","Cr",",","Cx",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","CB",".","ba","=","Ca","(","Cs",",","Cz",",","Cw",",","Cv",",","Cu",".","x",")",";","Cx",".","x","=","Cp",".","x",";","Co","(","Cr",",","CB",".","ba",",","Cx",".","xyxz",",","Cy",")",";","}","return","CB",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","CO","(","vec2","CD",",","sampler2D","CE",",","sampler2D","CF"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","CG"]}]}}]},{type:"textline",tokens:[")","{","bool","CH",";","vec2","CI",",","CJ",",","CK",";","vec4","CL",",","CM",",","CN",";","CL",".","x","=","texture2D","(","CF",",","zN",".","xy",")",".","a",";","CL",".","y","=","texture2D","(","CF",",","zN",".","zw",")",".","g",";","CL",".","wz","=","texture2D","(","CF",",","CD",")",".","xz",";","if","(","dot","(","CL",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","CM","=","texture2D","(","CE",",","CD",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["CN","=","texture2D","(","CG",",","fd",")",";","CI","=","2.0","*","s","(","CN",")","-","1.0",";","CM",".","a","=","sqrt","(","2.0","*","length","(","CI",")",")",";"]}]}}]},{type:"textline",tokens:["return","CM",";","}","else","{","CH","=","max","(","CL",".","x",",","CL",".","z",")",">","max","(","CL",".","y",",","CL",".","w",")",";","CM","=","vec4","(","0.0",",","CL",".","y",",","0.0",",","CL",".","w",")",";","CI","=","CL",".","yw",";","Af","(","bvec4","(","CH",",","CH",",","CH",",","CH",")",",","CM",",","vec4","(","CL",".","x",",","0.0",",","CL",".","z",",","0.0",")",")",";","Af","(","bvec2","(","CH",",","CH",")",",","CI",",","CL",".","xz",")",";","CI","/=","dot","(","CI",",","vec2","(","1.0",",","1.0",")",")",";","CM","=","CM","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","CD",".","xyxy",";","CL","=","CI",".","x","*","texture2D","(","CE",",","CM",".","xy",",","0.0",")",";","CL","+=","CI",".","y","*","texture2D","(","CE",",","CM",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["CN","=","texture2D","(","CG",",","CM",".","xy",")",";","CJ","=","2.0","*","s","(","CN",")","-","1.0",";","CK","=","CI",".","x","*","CJ",";","CN","=","texture2D","(","CG",",","CM",".","zw",")",";","CJ","=","2.0","*","s","(","CN",")","-","1.0",";","CK","+=","CI",".","y","*","CJ",";","CL",".","a","=","sqrt","(","2.0","*","length","(","CK",")",")",";"]}]}}]},{type:"textline",tokens:["return","CL",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","CY","(","vec2","CP",",","sampler2D","CQ",",","sampler2D","CR"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","CS"]}]}}]},{type:"textline",tokens:[")","{","float","CT",";","vec2","CU",";","vec4","CV",",","CW",",","CX",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["CV","=","texture2D","(","CS",",","fd",")",";","CU","=","2.0","*","s","(","CV",")","-","1.0",";","CV","=","texture2D","(","CQ",",","CP",")",";","CW","=","texture2D","(","CR",",","CP","-","CU",")",";","CT","=","abs","(","CV",".","a","*","CV",".","a","-","CW",".","a","*","CW",".","a",")","/","2.0",";","CT","=","0.5","*","clamp","(","1.0","-","sqrt","(","CT",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","CX","=","mix","(","CV",",","CW",",","CT",")",";","CX",".","a","=","1.0",";","return","CX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["CV","=","texture2D","(","CQ",",","CP",")",";","CW","=","texture2D","(","CR",",","CP",")",";","return","mix","(","CV",",","CW",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","CZ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["CZ","=","vec4","(","Ay","(","fd",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["CZ","=","CC","(","fd",",","zR",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["CZ","=","CO","(","fd",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["CZ","=","vec4","(","CY","(","fd",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["CZ","=","texture2D","(","u_color",",","fd",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","CZ",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","fd",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","zN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","zO",";","varying","vec4","zP",";","varying","vec4","zQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","zR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","zS","(","vec2","zx",")","{","zO","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","zx",".","xyxy",";","zP","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","zx",".","xyxy",";","zQ","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","zx",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","zV","(","vec2","zT",",","out","vec2","zU",")","{","zU","=","zT","/","u_texel_size",";","zO","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","zT",".","xyxy",";","zP","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","zT",".","xyxy",";","zQ","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","zO",".","xz",",","zP",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","zX","(","vec2","zW",")","{","zN","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","zW",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","fd","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zS","(","fd",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zV","(","fd",",","zR",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zX","(","fd",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","fd",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","zS","(","in","vec2","zx",")","{","return","zI","(","u_depth",",","zx",",","u_camera_range",")",";","}","void","main","(",")","{","vec3","zT",",","zU",",","zV",";","float","zW",",","zX",",","zY",",","zZ",",","z_",",","Aa",",","Ab",";","zW","=","texture2D","(","u_color",",","fd",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","zW",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["zT","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","fd","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","zX","=","zS","(","fd",")",";","zY","=","zX","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ac","=","8.0",";","const","int","Ad","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ac","=","16.0",";","const","int","Ad","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ac","=","24.0",";","const","int","Ad","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ac","=","32.0",";","const","int","Ad","=","4",";"]}]}}]},{type:"textline",tokens:["zZ","=","u_ssao_radius_increase","*","0.001",";","const","float","Ae","=","1.0","+","2.4","/","Ac",";","z_","=","0.0",";","for","(","int","Af","=","0",";","Af","<","Ad",";","Af","++",")","for","(","int","Ag","=","-","1",";","Ag","<=","1",";","Ag","+=","2",")","for","(","int","Ah","=","-","1",";","Ah","<=","1",";","Ah","+=","2",")","for","(","int","Ai","=","-","1",";","Ai","<=","1",";","Ai","+=","2",")","{","zU","=","reflect","(","normalize","(","vec3","(","Ag",",","Ah",",","Ai",")",")",",","zT",")","*","(","zZ","*=","Ae",")",";","zV","=","vec3","(","fd",",","zY",")",";","zV","+=","vec3","(","zU",".","xy",",","zU",".","z","*","zY","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["zV",".","z","-=","1.4","*","(","zV",".","z","-","zY",")","*","step","(","zY",",","zV",".","z",")",";"]}]}}]},{type:"textline",tokens:["Aa","=","zS","(","zV",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","Ab","=","clamp","(","(","zY","-","Aa",")","/","Aa",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["z_","+=","mix","(","1.0",",","Ab",",","step","(","Aa",",","zV",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["z_","+=","mix","(","step","(","zV",".","z",",","Aa",")",",","0.5",",","Ab",")",";"]}]}}]},{type:"textline",tokens:["}","z_","=","z_","/","Ac",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","clamp","(","z_","*","z_","+","0.6","*","z_",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["z_","=","clamp","(","z_","*","z_","+","z_",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["zX","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","zX",")",";","z_","=","mix","(","1.0",",","z_",",","zX",")",";","gl_FragColor","=","vec4","(","zW",",","z_",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","fd",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","zS","(","in","vec2","zx",")","{","return","zI","(","u_depth",",","zx",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","zT",",","zU",";","float","zV",",","zW",",","zX",",","zY",",","zZ",",","z_",",","Aa",";","zV","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["zW","=","zS","(","fd",")",";","zX","=","0.0",";","zY","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["zT","=","vec2","(","-","2.0",")",";","for","(","int","Ab","=","0",";","Ab","<","4",";","++","Ab",")","{","for","(","int","Ac","=","0",";","Ac","<","4",";","++","Ac",")","{","zU","=","(","zT","+","vec2","(","float","(","Ab",")",",","float","(","Ac",")",")",")","*","u_texel_size",";","zZ","=","texture2D","(","u_ssao_mask",",","fd","+","zU",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","zS","(","fd","+","zU",")",";","Aa","=","1.0","-","clamp","(","abs","(","z_","-","zW",")","*","zY",",","0.0",",","1.0",")",";","zV","+=","zZ","*","Aa",";","zX","+=","Aa",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zV","+=","zZ",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","fd",")",".","r",",","zV","/","zX",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","fd",")",".","r",",","zV","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","fd",";","void","main","(",")","{","vec2","zx",";","vec4","zS",",","zT",";","float","zU",";","zU","=","texture2D","(","u_depth",",","fd",")",".","x",";","zS","=","vec4","(","fd","*","2.0","-","1.0",",","2.0","*","zU","-","1.0",",","1.0",")",";","zT","=","u_view_proj_inverse","*","zS",";","zT","=","zT","/","zT",".","w",";","zT","=","u_view_proj_prev","*","zT",";","zT","/=","zT",".","w",";","zx","=","(","zS",".","xy","-","zT",".","xy",")","/","4.0","+","0.5",";","zx","=","clamp","(","zx",",","0.0",",","1.0",")",";","gl_FragColor","=","g","(","zx",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","a","=","255.0",";","float","b","=","0.0",";","float","c","=","1.0",";","vec4","g","(","const","in","float","d",")","{","vec4","e",",","f",";","e","=","vec4","(","a","*","a","*","a",",","a","*","a",",","a",",","c",")",";","f","=","vec4","(","b",",","c","/","a",",","c","/","a",",","c","/","a",")",";","e","=","fract","(","d","*","e",")",";","e","-=","e",".","xxyz","*","f",";","return","e",";","}","float","k","(","const","in","vec4","h",")","{","vec4","i",";","float","j",";","i","=","vec4","(","c","/","(","a","*","a","*","a",")",",","c","/","(","a","*","a",")",",","c","/","a",",","c",")",";","j","=","dot","(","h",",","i",")",";","return","j",";","}","vec4","g","(","const","in","vec2","l",")","{","vec4","m",";","vec2","n",",","o",";","n","=","vec2","(","a",",","c",")",";","o","=","vec2","(","b",",","c","/","a",")",";","m","=","fract","(","l",".","xxyy","*","n",".","xyxy",")",";","m","-=","m",".","xxzz","*","o",".","xyxy",";","if","(","l",".","r","==","c",")","m",".","rg","=","vec2","(","b",",","c",")",";","if","(","l",".","g","==","c",")","m",".","ba","=","vec2","(","b",",","c",")",";","return","m",";","}","vec2","s","(","const","in","vec4","p",")","{","vec2","q",",","r",";","r","=","vec2","(","c","/","a",",","c",")",";","q",".","r","=","dot","(","p",".","rg",",","r",")",";","q",".","g","=","dot","(","p",".","ba",",","r",")",";","return","q",";","}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","x","(","inout","vec3","t",",","in","float","u",",","in","vec4","v",")","{","float","w",";","w","=","v",".","w","*","u",";","w","=","exp","(","-","w","*","w",")",";","w","=","clamp","(","w",",","0.0",",","1.0",")",";","t","=","mix","(","v",".","rgb",",","t",",","w",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","D","(","in","mat4","y",",","in","vec3","z",")","{","vec3","A",",","B",",","C",";","A","=","mix","(","y","[","0","]",".","rgb",",","y","[","1","]",".","rgb",",","max","(","sign","(","z",".","x",")",",","0.0",")",")",";","B","=","mix","(","y","[","2","]",".","rgb",",","y","[","3","]",".","rgb",",","max","(","sign","(","z",".","z",")",",","0.0",")",")",";","C","=","vec3","(","y","[","0","]",".","a",",","y","[","1","]",".","a",",","y","[","2","]",".","a",")",";","B","=","mix","(","A",",","B",",","abs","(","z",".","z",")",")",";","B","=","mix","(","B",",","C",",","abs","(","z",".","y",")",")",";","return","B",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","F","(","inout","float","E",")","{","E","-=","0.5",";","E","=","4.0","*","(","E","*","E","*","E",")","+","0.5",";","}","void","U","(","inout","vec3","G",",","in","float","H",",","in","vec3","I",",","in","float","J",",","in","vec4","L",",","in","vec4","M",",","in","float","N",",","in","float","O",")","{","vec3","P",",","Q",";","float","R",",","S",",","T",";","R","=","M",".","w","*","H",";","R","=","exp","(","-","R","*","R",")",";","R","=","clamp","(","R",",","0.0",",","1.0",")",";","S","=","max","(","I",".","y",",","0.0",")",";","H","=","max","(","H","-","max","(","J","/","S",",","0.0",")",",","0.0",")",";","T","=","L",".","w","*","H",";","T","=","1.0","-","T",";","T","=","max","(","T",",","0.0",")",";","F","(","T",")",";","T","+=","max","(","N","-","0.5",",","0.0",")",";","if","(","T","<","R",")","{","P","=","vec3","(","0.0",",","0.02",",","0.05",")",";","Q","=","L",".","rgb",";","J","=","clamp","(","-","J","*","0.03",",","0.0",",","0.8",")",";","P","=","mix","(","Q",",","P",",","min","(","S",",","1.0",")",")",";","P","=","mix","(","P",",","vec3","(","0.0",")",",","J",")","*","O",";","G","=","mix","(","P",",","G",",","T",")",";","}","if","(","T",">=","R",")","{","G","=","mix","(","M",".","rgb",",","G",",","R",")",";","}","}","void","ab","(","inout","vec3","V",",","in","float","W",",","in","float","X",",","in","vec4","Y",",","in","float","Z",")","{","vec3","_",";","float","aa",";","aa","=","Y",".","w","*","W",";","aa","=","1.0","-","aa",";","aa","=","clamp","(","aa",",","0.0",",","1.0",")",";","F","(","aa",")",";","X","=","clamp","(","-","X","*","0.03",",","0.0",",","0.8",")",";","_","=","mix","(","Y",".","rgb",",","vec3","(","0.0",")",",","X",")","*","Z",";","V","=","mix","(","_",",","V",",","aa",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ac","=","0.0",";","float","ad","=","1.0",";","float","ae","=","0.5",";","struct","af","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","SPECULAR_PHONG",{type:"equal_expr",places:2},"SPECULAR_SHADER","SPECULAR_COOKTORR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","an","(","vec3","ag",",","vec3","ah",",","vec3","ai",",","float","aj",",","float","ak",")","{","float","al",";","vec3","am",";","am","=","normalize","(","ag","+","ah",")",";","al","=","(","ad","-","aj",")","*","max","(","dot","(","ai",",","am",")",",","ac",")","+","aj",";","return","pow","(","al",",","ak",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","SPECULAR_WARDISO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","ax","(","vec3","ao",",","vec3","ap",",","vec3","aq",",","float","ar",")","{","float","as",",","at",",","au",",","av",";","vec3","aw",";","aw","=","normalize","(","ao","+","ap",")",";","as","=","max","(","dot","(","aq",",","aw",")",",","0.001",")",";","at","=","max","(","dot","(","aq",",","ap",")",",","0.01",")",";","au","=","max","(","dot","(","aq",",","ao",")",",","0.01",")",";","as","=","tan","(","acos","(","as",")",")",";","av","=","max","(","ar",",","0.001",")",";","return","au","*","(","ad","/","(","4.0","*","M_PI","*","av","*","av",")",")","*","(","exp","(","-","(","as","*","as",")","/","(","av","*","av",")",")","/","(","sqrt","(","at","*","au",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","SPECULAR_TOON",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","aF","(","vec3","ay",",","vec3","az",",","vec3","aA",",","float","aB",",","float","aC",")","{","float","aD",";","vec3","aE",";","aE","=","normalize","(","ay","+","az",")",";","aD","=","acos","(","dot","(","aE",",","aA",")",")",";","if","(","aD","<","aB",")","return","ad",";","else","if","(","aD",">=","aB","+","aC","||","aC","==","ac",")","return","ac",";","else","return","ad","-","(","aD","-","aB",")","/","aC",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","SPECULAR_BLINN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","aS","(","vec3","aG",",","vec3","aH",",","vec3","aI",",","float","aJ",",","float","aK",",","float","aL",")","{","float","aM",",","aN",",","aO",",","aP",",","aQ",";","vec3","aR",";","if","(","aJ","<","1.0","||","aK","==","ac",")","return","ac",";","else","{","if","(","aK","<","100.0",")","aK","=","sqrt","(","1.0","/","aK",")",";","else","aK","=","10.0","/","aK",";","aR","=","normalize","(","aH","+","aG",")",";","aM","=","(","ad","-","aL",")","*","max","(","dot","(","aI",",","aR",")",",","ac",")","+","aL",";","if","(","aM","<","ac",")","return","ac",";","else","{","aN","=","max","(","dot","(","aI",",","aH",")",",","0.01",")",";","aO","=","dot","(","aI",",","aG",")",";","if","(","aO","<=","0.01",")","return","ac",";","else","{","aP","=","max","(","dot","(","aH",",","aR",")",",","0.01",")",";","aQ","=","ad",";","aN","=","(","2.0","*","aM","*","aN",")","/","aP",";","aO","=","(","2.0","*","aM","*","aO",")","/","aP",";","aO","=","min","(","min","(","aQ",",","aN",")",",","aO",")",";","aN","=","sqrt","(","pow","(","aJ",",","2.0",")","+","pow","(","aP",",","2.0",")","-","ad",")",";","aP","=","pow","(","aN","-","aP",",","2.0",")","/","pow","(","aN","+","aP",",","2.0",")","*","(","ad","+","pow","(","aP","*","(","aN","+","aP",")","-","ad",",","2.0",")","/","pow","(","aP","*","(","aN","-","aP",")","+","ad",",","2.0",")",")",";","aM","=","acos","(","aM",")",";","return","max","(","aP","*","aO","*","exp","(","-","pow","(","aM",",","2.0",")","/","(","2.0","*","pow","(","aK",",","2.0",")",")",")",",","ac",")",";","}","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","DIFFUSE_OREN_NAYAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","bf","(","float","aT",",","vec3","aU",",","vec3","aV",",","vec3","aW",",","float","aX",")","{","vec3","aY",",","aZ",";","float","a_",",","ba",",","bb",",","bc",",","bd",",","be",";","if","(","aX",">","ac",")","{","a_","=","max","(","dot","(","aU",",","aW",")",",","ac",")",";","ba","=","aX","*","aX",";","bb","=","ad","-","ae","*","(","ba","/","(","ba","+","0.33",")",")",";","aY","=","aV","-","aT","*","aU",";","aZ","=","aW","-","a_","*","aU",";","if","(","length","(","aY",")","==","ac","||","length","(","aZ",")","==","ac","||","abs","(","aT",")",">","ad","||","abs","(","a_",")",">","ad",")","return","aT","*","bb",";","else","{","bc","=","acos","(","aT",")",";","a_","=","acos","(","a_",")",";","aY","=","normalize","(","aY",")",";","aZ","=","normalize","(","aZ",")",";","bd","=","max","(","bc",",","a_",")",";","be","=","min","(","bc",",","a_",")",";","be","*=","0.95",";","a_","=","max","(","dot","(","aY",",","aZ",")",",","ac",")",";","ba","=","0.45","*","(","ba","/","(","ba","+","0.09",")",")",";","return","aT","*","(","bb","+","(","ba","*","a_","*","sin","(","bd",")","*","tan","(","be",")",")",")",";","}","}","else","return","aT",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","DIFFUSE_MINNAERT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","bl","(","float","bg",",","vec3","bh",",","vec3","bi",",","float","bj",")","{","float","bk",";","bk","=","max","(","dot","(","bh",",","bi",")",",","ac",")",";","if","(","bj","<=","ad",")","return","bg","*","pow","(","max","(","bk","*","bg",",","0.1",")",",","bj","-","ad",")",";","else","return","bg","*","pow","(","1.0001","-","bk",",","bj","-","ad",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","DIFFUSE_TOON",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","bq","(","float","bm",",","float","bn",",","float","bo",")","{","float","bp",";","bp","=","acos","(","bm",")",";","if","(","bp","<","bn",")","return","ad",";","else","if","(","bp",">","(","bn","+","bo",")","||","bo","==","ac",")","return","ac",";","else","return","ad","-","(","(","bp","-","bn",")","/","bo",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","DIFFUSE_FRESNEL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","bv","(","float","br",",","float","bs",",","float","bt",")","{","float","bu",";","if","(","bs","==","ac",")","{","return","ad",";","}","else","{","bu","=","ad","+","abs","(","br",")",";","bu","=","bt","+","(","ad","-","bt",")","*","pow","(","bu",",","bs",")",";","return","clamp","(","bu",",","ac",",","ad",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","bD","(","vec3","bw",",","vec3","bx",",","vec3","by",",","vec2","bz",",","const","float","bA",",","out","float","bB",")","{","float","bC",";","bC","=","(","ad","-","bA",")","*","dot","(","bw",",","bx",")","+","bA",";","bB","=","bC",";","if","(","bA","==","ae",")","return",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","DIFFUSE_FRESNEL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","bv","(","bC",",","bz","[","0","]",",","bz","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","DIFFUSE_OREN_NAYAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","bf","(","bC",",","bw",",","bx",",","by",",","bz","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","DIFFUSE_MINNAERT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","bl","(","bC",",","bw",",","by",",","bz","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","DIFFUSE_TOON",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","bq","(","bC",",","bz","[","0","]",",","bz","[","1","]",")",";"]}]}}]},{type:"textline",tokens:["bB","=","max","(","bB",",","ac",")",";"]}]}}]},{type:"textline",tokens:["}","void","bK","(","vec3","bE",",","vec3","bF",",","vec3","bG",",","float","bH",",","vec2","bI",",","out","float","bJ",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","SPECULAR_PHONG",{type:"equal_expr",places:2},"SPECULAR_SHADER","SPECULAR_COOKTORR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","an","(","bE",",","bF",",","bG",",","bH",",","bI","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","SPECULAR_WARDISO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","ax","(","bE",",","bF",",","bG",",","bI","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","SPECULAR_TOON",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","aF","(","bE",",","bF",",","bG",",","bI","[","0","]",",","bI","[","1","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","SPECULAR_BLINN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","aS","(","bE",",","bF",",","bG",",","bI","[","0","]",",","bI","[","1","]",",","bH",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","ac",";"]}]}}]},{type:"textline",tokens:["}","void","cf","(","vec3","bL",",","vec3","bM",",","vec3","bN",",","vec2","bO",",","vec4","bP",",","vec3","bQ",",","vec3","bR",",","vec3","bS",",","inout","af","bT",",","float","bU",",","vec2","bV",",","vec2","bW",",","float","bX",")","{","float","bY",",","bZ",",","b_",",","ca",",","cb",",","cc",",","cd",",","ce",";","bY","=","ac",";","if","(","bO",".","r","!=","ac",")","bD","(","bN",",","bM",",","bL",",","bV",",","bX",",","bY",")",";","bZ","=","ac",";","if","(","bO",".","g","!=","ac",")","bK","(","bM",",","bL",",","bN",",","bX",",","bW",",","bZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","bM",",","bN",")","*","dot","(","bL",",","bN",")","<","ac",")","{","b_","=","bP",".","x",";","ca","=","bP",".","y",";","cb","=","bP",".","z",";","cc","=","bP",".","w",";","cd","=","clamp","(","abs","(","dot","(","bM",",","bN",")",")",",","ac",",","ad",")",";","ce","=","clamp","(","dot","(","bL",",","-","bM",")",",","ac",",","ad",")",";","ca","=","pow","(","ce",",","ca",")",";","bT",".","a","+=","bU","*","vec4","(","bS","*","cd","*","pow","(","bQ",",","vec3","(","b_",")",")",",","ad",")",";","bT",".","a","+=","cb","*","mix","(","vec4","(","bQ",",","ad",")",",","vec4","(","ad",")",",","cc",")","*","bU","*","vec4","(","bS","*","cd","*","vec3","(","ca",")",",","ad",")",";","}","else","{","bT",".","b","+=","bS","*","bR","*","bZ",";","bT",".","a","+=","vec4","(","bS","*","bQ","*","bY",",","bZ",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bT",".","b","+=","bS","*","bR","*","bZ",";","bT",".","a","+=","vec4","(","bS","*","bQ","*","bY",",","bZ",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"lamp",name:"POINT",statements:[{type:"textline",tokens:["cI","=","ct","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","cA","=","cq","[","LAMP_IND","]",";","cB","=","cs","[","LAMP_IND","]",";","cw","=","ac",";"]},{type:"textline",tokens:["cB","=","cB",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","cB","*=","cp",";","cA","=","cA","-","ck",";"]},{type:"textline",tokens:["cx","=","length","(","cA",")",";","cB","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","cx","*","cx",")",";","cA","=","normalize","(","cA",")",";","cf","(","cm",",","cA",",","cl",",","cI",",","cv",",","ci",",","cj",",","cB",",","cM",",","cu",",","co",",","cn",",","cw",")",";"]}]},{type:"lamp",name:"SPOT",statements:[{type:"textline",tokens:["cJ","=","ct","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","cC","=","cq","[","LAMP_IND","]",";","cD","=","cs","[","LAMP_IND","]",";","cE","=","cr","[","LAMP_IND","]",";","cx","=","ac",";"]},{type:"textline",tokens:["cD","=","cD",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","cD","*=","cp",";","cC","=","cC","-","ck",";"]},{type:"textline",tokens:["cy","=","length","(","cC",")",";","cD","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","cy","*","cy",")",";","cC","=","normalize","(","cC",")",";"]},{type:"textline",tokens:["cy","=","dot","(","cC",",","cE",")",";","cy","*=","smoothstep","(","ac",",","ad",",","(","cy","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","cD","*=","cy",";","cf","(","cm",",","cC",",","cl",",","cJ",",","cv",",","ci",",","cj",",","cD",",","cM",",","cu",",","co",",","cn",",","cx",")",";"]}]},{type:"lamp",name:"SUN",statements:[{type:"textline",tokens:["cK","=","ct","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","cE","=","cs","[","LAMP_IND","]",";","cF","=","cr","[","LAMP_IND","]",";","cy","=","ac",";"]},{type:"textline",tokens:["cE","=","cE",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","cE","*=","cp",";","cf","(","cm",",","cF",",","cl",",","cK",",","cv",",","ci",",","cj",",","cE",",","cM",",","cu",",","co",",","cn",",","cy",")",";"]}]},{type:"lamp",name:"HEMI",statements:[{type:"textline",tokens:["cL","=","ct","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","cG","=","cs","[","LAMP_IND","]",";","cH","=","cr","[","LAMP_IND","]",";","cz","=","ae",";"]},{type:"textline",tokens:["cG","=","cG",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","cG","*=","cp",";","cf","(","cm",",","cH",",","cl",",","cL",",","cv",",","ci",",","cj",",","cG",",","cM",",","cu",",","co",",","cn",",","cz",")",";"]}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["af","cN","(","vec3","cg",",","vec3","ch",",","vec3","ci",",","vec3","cj",",","vec3","ck",",","vec3","cl",",","vec3","cm",",","vec2","cn",",","vec2","co",",","float","cp",",","vec3","cq","[","NUM_LIGHTS","]",",","vec3","cr","[","NUM_LIGHTS","]",",","vec3","cs","[","NUM_LIGHTS","]",",","vec4","ct","[","NUM_LFACTORS","]",",","float","cu",",","vec4","cv",")","{","float","cw",",","cx",",","cy",",","cz",";","vec3","cA",",","cB",",","cC",",","cD",",","cE",",","cF",",","cG",",","cH",";","vec2","cI",",","cJ",",","cK",",","cL",";","af","cM",";","cM",".","a","=","vec4","(","cg","+","ci","*","ch",",","ac",")",";","cM",".","b","=","vec3","(","ac",")",";"]},{type:"lamps_main"},{type:"textline",tokens:["return","cM",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["af","cS","(","vec3","cO",",","vec3","cP",",","vec3","cQ",")","{","af","cR",";","cR",".","a","=","vec4","(","cO","+","cQ","*","cP",",","ac",")",";","cR",".","b","=","vec3","(","ac",")",";","return","cR",";","}"]}]}}]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cT","=","0.0",";","float","cU","=","1.0",";","vec4","cW","(","vec4","cV",")","{","return","cV","-","floor","(","cV","*","(","cU","/","289.0",")",")","*","289.0",";","}","vec3","cW","(","vec3","cX",")","{","return","cX","-","floor","(","cX","*","(","cU","/","289.0",")",")","*","289.0",";","}","vec2","cW","(","vec2","cY",")","{","return","cY","-","floor","(","cY","*","(","cU","/","289.0",")",")","*","289.0",";","}","vec4","c_","(","vec4","cZ",")","{","return","cZ","-","floor","(","cZ","*","(","cU","/","7.0",")",")","*","7.0",";","}","vec4","db","(","vec4","da",")","{","return","cW","(","(","34.0","*","da","+","5.0",")","*","da",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","dj","(","vec2","dc",")","{","vec4","dd",",","de",",","df",",","dg",";","vec2","dh",",","di",";","dh","=","cW","(","floor","(","dc",")",")",";","di","=","fract","(","dc",")",";","dd","=","di",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","de","=","di",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","df","=","db","(","dh",".","x","+","vec4","(","cT",",","cU",",","cT",",","cU",")",")",";","df","=","db","(","df","+","dh",".","y","+","vec4","(","cT",",","cT",",","cU",",","cU",")",")",";","dg","=","c_","(","df",")","*","K","+","K2",";","df","=","c_","(","floor","(","df","*","K",")",")","*","K","+","K2",";","dg","=","dd","+","JITTER","*","dg",";","df","=","de","+","JITTER","*","df",";","df","=","dg","*","dg","+","df","*","df",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["df",".","xy","=","min","(","df",".","xy",",","df",".","zw",")",";","df",".","x","=","min","(","df",".","x",",","df",".","y",")",";","return","df",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["df",".","xy","=","(","df",".","x","<","df",".","y",")","?","df",".","xy",":","df",".","yx",";","df",".","xz","=","(","df",".","x","<","df",".","z",")","?","df",".","xz",":","df",".","zx",";","df",".","xw","=","(","df",".","x","<","df",".","w",")","?","df",".","xw",":","df",".","wx",";","df",".","y","=","min","(","df",".","y",",","df",".","z",")",";","df",".","y","=","min","(","df",".","y",",","df",".","w",")",";","return","sqrt","(","df",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","dt","(","vec2","dk",",","float","dl",")","{","vec4","dm",",","dn",",","dp",",","dq",";","vec2","dr",",","ds",";","dr","=","cW","(","floor","(","dk",")",")",";","ds","=","fract","(","dk",")",";","dm","=","ds",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","dn","=","ds",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","dp","=","db","(","dr",".","x","+","vec4","(","cT",",","cU",",","cT",",","cU",")",")",";","dp","=","db","(","dp","+","dr",".","y","+","vec4","(","cT",",","cT",",","cU",",","cU",")",")",";","dq","=","c_","(","dp",")","*","K","+","K2",";","dp","=","c_","(","floor","(","dp","*","K",")",")","*","K","+","K2",";","dq","=","dm","+","JITTER","*","dq",";","dp","=","dn","+","JITTER","*","dp",";","dn","=","dq","*","dq","+","dp","*","dp",";","dq","+=","dl",";","dp","+=","dl",";","dm","=","dq","*","dq","+","dp","*","dp",";","dq","+=","dl",";","dp","+=","dl",";","dp","=","dq","*","dq","+","dp","*","dp",";","dn",".","xy","=","min","(","dn",".","xy",",","dn",".","zw",")",";","dn",".","x","=","min","(","dn",".","x",",","dn",".","y",")",";","dm",".","xy","=","min","(","dm",".","xy",",","dm",".","zw",")",";","dm",".","x","=","min","(","dm",".","x",",","dm",".","y",")",";","dp",".","xy","=","min","(","dp",".","xy",",","dp",".","zw",")",";","dp",".","x","=","min","(","dp",".","x",",","dp",".","y",")",";","return","vec3","(","dn",".","x",",","dm",".","x",",","dp",".","x",")",";","}","vec3","dv","(","vec3","du",")","{","return","cW","(","(","(","du","*","34.0",")","+","cU",")","*","du",")",";","}","float","dG","(","vec2","dw",")","{","vec3","dx",",","dy",",","dz",",","dA",";","vec4","dB",";","vec2","dC",",","dD",",","dE",";","const","vec4","dF","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","dC","=","floor","(","dw","+","dot","(","dw",",","dF",".","yy",")",")",";","dD","=","dw","-","dC","+","dot","(","dC",",","dF",".","xx",")",";","dE","=","(","dD",".","x",">","dD",".","y",")","?","vec2","(","cU",",","cT",")",":","vec2","(","cT",",","cU",")",";","dB","=","dD",".","xyxy","+","dF",".","xxzz",";","dB",".","xy","-=","dE",";","dC","=","cW","(","dC",")",";","dx","=","dv","(","dv","(","dC",".","y","+","vec3","(","cT",",","dE",".","y",",","cU",")",")","+","dC",".","x","+","vec3","(","cT",",","dE",".","x",",","cU",")",")",";","dy","=","max","(","0.5","-","vec3","(","dot","(","dD",",","dD",")",",","dot","(","dB",".","xy",",","dB",".","xy",")",",","dot","(","dB",".","zw",",","dB",".","zw",")",")",",","cT",")",";","dy","=","dy","*","dy",";","dy","=","dy","*","dy",";","dx","=","2.0","*","fract","(","dx","*","dF",".","www",")","-","cU",";","dz","=","abs","(","dx",")","-","0.5",";","dA","=","floor","(","dx","+","0.5",")",";","dA","=","dx","-","dA",";","dy","*=","1.79284291400159","-","0.85373472095314","*","(","dA","*","dA","+","dz","*","dz",")",";","dx",".","x","=","dA",".","x","*","dD",".","x","+","dz",".","x","*","dD",".","y",";","dx",".","yz","=","dA",".","yz","*","dB",".","xz","+","dz",".","yz","*","dB",".","yw",";","return","130.0","*","dot","(","dy",",","dx",")",";","}","vec2","dK","(","vec2","dH",")","{","float","dI",",","dJ",";","dI","=","dot","(","dH",",","vec2","(","12.9898",",","78.233",")",")",";","dJ","=","dot","(","dH",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","dI","=","fract","(","sin","(","dI",")","*","43758.5453",")","*","2.0","-","cU",";","dJ","=","fract","(","sin","(","dJ",")","*","43758.5453",")","*","2.0","-","cU",";","return","vec2","(","dI",",","dJ",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","eb","(","inout","vec3","dL",",","float","dM",",","float","dN",",","float","dO",",","vec3","dP",",","vec3","dQ",",","vec3","dR",",","vec4","dS",",","vec3","dT",",","float","dU",")","{","float","dV",",","dW",",","dX",";","vec2","dY",",","dZ",";","vec3","d_",";","vec4","ea",";","if","(","dU",">","CAUSTICS_VIEW_DISTANCE",")","return",";","ea","=","dS",";","d_","=","dT","+","dP",";","d_",".","xz","=","10.0","*","sin","(","0.1","*","d_",".","xz",")",";","d_","=","d_","+","2.0","*","cross","(","-","ea",".","xyz",",","cross","(","-","ea",".","xyz",",","d_",")","+","ea",".","w","*","d_",")",";","dY","=","d_",".","xz",";","d_","=","dQ",";","dV","=","max","(","dot","(","dP",",","d_",")",",","0.0",")",";","dW","=","0.025",";","dZ","=","CAUST_SPEED","*","dN",";","dY",".","s","+=","0.25","*","sin","(","dot","(","dT","+","dN",",","vec3","(","1.0",")",")",")",";","dY",".","t","+=","0.35","*","(","-","sin","(","dot","(","dT","-","dN",",","vec3","(","-","0.7",")",")",")",")",";","dY",".","st","+=","0.15","*","cos","(","4.0","*","dM","-","dZ",".","x",")","+","1.5","*","sin","(","dM","-","0.3","*","dZ",".","y",")",";","dX","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","dM",",","0.0",")",")",";","d_","=","dt","(","(","dY","/","dX",")",",","dW",")",";","d_","*=","CAUST_BRIGHT",";","d_","*=","d_",";","dW","=","min","(","0.25","*","dM",",","-","dM",")","+","1.0",";","dW","=","max","(","dW",",","0.0",")",";","dV","=","dO","*","dV",";","dX","=","max","(","sign","(","dM",")",",","0.0",")",";","dV","=","dV","+","max","(","0.5","*","sign","(","-","dP",".","y",")","*","dX",",","0.0",")",";","dV","=","min","(","dV",",","1.0",")",";","dL","+=","dR","*","d_","*","dW","*","dV",";","}"]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","ed","(","inout","vec3","ec",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","max","(","vec3","(","0.0",")",",","ec",")",";","ec","=","pow","(","ec",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","ef","(","inout","vec3","ee",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ee","=","max","(","vec3","(","0.0",")",",","ee",")",";","ee","=","pow","(","ee",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","ei","(","inout","vec3","eg",",","in","float","eh",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","eg","*","eh",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","ej","=","0.0",";","float","ek","=","1.0",";","struct","el","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","eo","(","vec3","em",",","vec3","en",")","{","return","any","(","lessThan","(","abs","(","em","-","en",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","er","(","in","vec4","ep",",","in","vec3","eq",")","{","return","eq","+","2.0","*","cross","(","ep",".","xyz",",","cross","(","ep",".","xyz",",","eq",")","+","ep",".","w","*","eq",")",";","}","vec4","et","(","in","vec4","es",")","{","return","vec4","(","-","es",".","xyz",",","es",".","w",")","/","dot","(","es",",","es",")",";","}","vec3","ey","(","vec4","eu",",","vec4","ev",",","vec4","ew",")","{","vec3","ex",";","ex","=","ew",".","xyz","*","eu",".","w",";","ex","=","er","(","ev",",","ex",")",";","ex","+=","eu",".","xyz","*","ew",".","w",";","return","ex",";","}","vec3","eE","(","vec4","ez",",","vec4","eA",",","vec4","eB",")","{","vec4","eC",";","vec3","eD",";","eD","=","eB",".","xyz","-","ez",".","xyz","*","eB",".","w",";","eC","=","et","(","eA",")",";","eD","=","er","(","eC",",","eD",")",";","eD","/=","ez",".","w",";","return","eD",";","}","mat4","eF","(",")","{","return","mat4","(","ek",",","ej",",","ej",",","ej",",","ej",",","ek",",","ej",",","ej",",","ej",",","ej",",","ek",",","ej",",","ej",",","ej",",","ej",",","ek",")",";","}","mat4","eH","(","float","eG",")","{","return","mat4","(","ek",",","ej",",","ej",",","ej",",","ej",",","cos","(","eG",")",",","sin","(","eG",")",",","ej",",","ej",",","-","sin","(","eG",")",",","cos","(","eG",")",",","ej",",","ej",",","ej",",","ej",",","ek",")",";","}","mat4","eJ","(","float","eI",")","{","return","mat4","(","cos","(","eI",")",",","ej",",","-","sin","(","eI",")",",","ej",",","ej",",","ek",",","ej",",","ej",",","sin","(","eI",")",",","ej",",","cos","(","eI",")",",","ej",",","ej",",","ej",",","ej",",","ek",")",";","}","mat4","eL","(","float","eK",")","{","return","mat4","(","cos","(","eK",")",",","sin","(","eK",")",",","ej",",","ej",",","-","sin","(","eK",")",",","cos","(","eK",")",",","ej",",","ej",",","ej",",","ej",",","ek",",","ej",",","ej",",","ej",",","ej",",","ek",")",";","}","el","eN","(","in","el","eM",")","{","return","el","(","eM",".","a",",","eM",".","b",",","normalize","(","eM",".","c",")",",","normalize","(","eM",".","d",")",",","normalize","(","eM",".","e",")",",","eM",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eT","(","vec4","eO",")","{","vec3","eP",";","float","eQ",",","eR",",","eS",";","eQ","=","eO",".","x",";","eR","=","eO",".","y",";","eS","=","eO",".","w",";","eP",".","x","=","(","eQ","+","eS",")","/","2.0",";","eP",".","y","=","(","eR","+","eS",")","/","2.0",";","eP",".","z","=","eS",";","return","eP",";","}"]}]}}]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","fe",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ff","=","0.1",";","const","float","fg","=","0.1",";","const","float","fh","=","-","0.01",";","const","float","fi","=","0.05",";","vec4","fj","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","fk","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","fl","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","fm","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","fn","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","fo","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","fp","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","fq","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","ft","(","vec2","fr",",","float","fs",")","{","return","all","(","lessThanEqual","(","fr",",","vec2","(","1.0","+","fs",")",")",")","&&","all","(","greaterThanEqual","(","fr",",","vec2","(","0.0","-","fs",")",")",")",";","}","float","fC","(","float","fu",",","float","fv",",","mat2","fw",",","vec3","fx",",","float","fy",",","PRECISION","sampler2D","fz",")","{","vec2","fA",",","fB",";","fB",".","x","=","fu",";","fB",".","y","=","fv",";","fB","=","fw","*","fB",";","fA","=","fx",".","xy","+","fB","*","fy","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","ft","(","fA",",","fh",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","fx",".","z",",","texture2D","(","fz",",","fA",")",".","r",")",";","}","void","fQ","(","inout","float","fD",",","inout","float","fE",",","float","fF",",","float","fG",",","mat2","fH",",","vec3","fI",",","vec3","fJ",",","float","fK",",","float","fL",",","PRECISION","sampler2D","fM",",","PRECISION","sampler2D","fN",")","{","vec2","fO",",","fP",";","fP",".","x","=","fF",";","fP",".","y","=","fG",";","fP","=","fH","*","fP",";","fO","=","fI",".","xy","+","fP","*","fK","/","SHADOW_TEX_RES",";","fD","+=","step","(","fI",".","z",",","texture2D","(","fM",",","fO",")",".","r",")",";","fO","=","fJ",".","xy","+","fP","*","fL","/","SHADOW_TEX_RES",";","fE","+=","step","(","fJ",".","z",",","texture2D","(","fN",",","fO",")",".","r",")",";","}","float","fZ","(","vec3","fR",",","PRECISION","sampler2D","fS",",","float","fT",")","{","mat2","fU",";","float","fV",",","fW",",","fX",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","fR",".","z",">","u_perspective_cast_far_bound",")","return","1.0",";","else","{"]}]}}]},{type:"textline",tokens:["fR",".","z","=","clamp","(","fR",".","z",",","0.0",",","1.0",")",";","fV","=","0.0",";","fW","=","dK","(","fR",".","xy",")",".","x","*","M_PI",";","fX","=","cos","(","fW",")",";","fW","=","sin","(","fW",")",";","fU","=","mat2","(","fX",",","fW",",","-","fW",",","fX",")",";","for","(","int","fY","=","0",";","fY","<","4",";","fY","++",")","{","fV","+=","fC","(","fj","[","fY","]",",","fn","[","fY","]",",","fU",",","fR",",","fT",",","fS",")",";","fV","+=","fC","(","fk","[","fY","]",",","fo","[","fY","]",",","fU",",","fR",",","fT",",","fS",")",";","fV","+=","fC","(","fl","[","fY","]",",","fp","[","fY","]",",","fU",",","fR",",","fT",",","fS",")",";","fV","+=","fC","(","fm","[","fY","]",",","fq","[","fY","]",",","fU",",","fR",",","fT",",","fS",")",";","}","fV","/=","16.0",";","return","clamp","(","fV",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","1.0",";","}","float","gm","(","vec3","f_",",","PRECISION","sampler2D","ga",",","vec3","gb",",","PRECISION","sampler2D","gc",",","float","gd",",","float","ge",",","float","gf",")","{","mat2","gg",";","float","gh",",","gi",",","gj",",","gk",";","f_",".","z","=","clamp","(","f_",".","z",",","0.0",",","1.0",")",";","gb",".","z","=","clamp","(","gb",".","z",",","0.0",",","1.0",")",";","gh","=","0.0",";","gi","=","0.0",";","gj","=","dK","(","f_",".","xy",")",".","x","*","M_PI",";","gk","=","cos","(","gj",")",";","gj","=","sin","(","gj",")",";","gg","=","mat2","(","gk",",","gj",",","-","gj",",","gk",")",";","for","(","int","gl","=","0",";","gl","<","4",";","gl","++",")","{","fQ","(","gh",",","gi",",","fj","[","gl","]",",","fn","[","gl","]",",","gg",",","f_",",","gb",",","gd",",","ge",",","ga",",","gc",")",";","fQ","(","gh",",","gi",",","fk","[","gl","]",",","fo","[","gl","]",",","gg",",","f_",",","gb",",","gd",",","ge",",","ga",",","gc",")",";","fQ","(","gh",",","gi",",","fl","[","gl","]",",","fp","[","gl","]",",","gg",",","f_",",","gb",",","gd",",","ge",",","ga",",","gc",")",";","fQ","(","gh",",","gi",",","fm","[","gl","]",",","fq","[","gl","]",",","gg",",","f_",",","gb",",","gd",",","ge",",","ga",",","gc",")",";","}","gh","=","mix","(","gh",",","gi",",","gf",")",";","gh","/=","16.0",";","return","clamp","(","gh",",","0.0",",","1.0",")",";","}","float","gq","(","vec2","gn",")","{","float","go",",","gp",";","go","=","min","(","gn",".","x",",","gn",".","y",")",";","gp","=","min","(","1.0","-","gn",".","x",",","1.0","-","gn",".","y",")",";","return","min","(","go",",","gp",")",";","}","float","gt","(","float","gr",",","float","gs",")","{","if","(","gs",">=","0.0","&&","gs","<=","fg",")","gr","=","(","gr","-","1.0",")","/","fg","*","gs","+","1.0",";","return","gr",";","}","float","gE","(","vec3","gu",",","vec3","gv",",","PRECISION","sampler2D","gw",",","PRECISION","sampler2D","gx",",","float","gy",",","float","gz",",","float","gA",",","float","gB",")","{","float","gC",",","gD",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["gD","=","gq","(","gu",".","xy",")",";","if","(","-","gB",">","gA","&&","gD",">=","0.0","&&","gD","<=","ff","&&","ft","(","gv",".","xy",",","0.0",")",")","{","gD","=","1.0","-","gD","/","ff",";","gC","=","gm","(","gu",",","gw",",","gv",",","gx",",","gy",",","gz",",","gD",")",";","}","else"]}]}}]},{type:"textline",tokens:["gC","=","fZ","(","gu",",","gw",",","gy",")",";","return","gC",";","}","float","gM","(","vec3","gF",",","PRECISION","sampler2D","gG",",","float","gH",",","float","gI",",","float","gJ",")","{","float","gK",",","gL",";","gK","=","fZ","(","gF",",","gG",",","gH",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","gJ",">","gI",")","{","gL","=","gq","(","gF",".","xy",")",";","gK","=","gt","(","gK",",","gL",")",";","}"]}]}}]},{type:"textline",tokens:["return","gK",";","}","float","gT","(","float","gN",")","{","vec3","gO",",","gP",",","gQ",",","gR",";","float","gS",";","gS","=","1.0",";","gO","=","e_",".","xyz","/","e_",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["gP","=","fa",".","xyz","/","fa",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["gQ","=","fb",".","xyz","/","fb",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["gR","=","fc",".","xyz","/","fc",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ft","(","gO",".","xy",",","0.0",")",")","{","gS","=","gE","(","gO",",","gP",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","gN",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","ft","(","gO",".","xy",",","fi",")",")","{","gS","=","gM","(","gO",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","gN",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ft","(","gP",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["gS","=","gE","(","gP",",","gQ",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","gN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gS","=","gM","(","gP",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","gN",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ft","(","gQ",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["gS","=","gE","(","gQ",",","gR",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","gN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gS","=","gM","(","gQ",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","gN",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ft","(","gR",".","xy",",","0.0",")",")","gS","=","gM","(","gR",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","gN",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","gS",";","}"]}]}}]},{type:"textline",tokens:["float","gY","(","inout","vec3","gU",")","{","float","gV",";","vec3","gW",";","vec2","gX",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gX","=","texture2DProj","(","u_shadow_mask",",","eY",")",".","rg",";","gW","=","vec3","(","gX",".","r",")",";","gV","=","gX",".","g",";","fe","=","vec4","(","gW",",","gV",")",";","gU","*=","fe",".","a",";","return","fe",".","r",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","gT","(","eV",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","he","(","in","vec3","gZ",",","vec3","g_",",","float","ha",",","float","hb",")","{","float","hc",";","vec3","hd",";","hd","=","normalize","(","g_","+","gZ",")",";","hc","=","1.0","-","dot","(","gZ",",","hd",")",";","hc","=","hb","+","(","1.0","-","hb",")","*","pow","(","hc",",","ha",")",";","return","hc",";","}","void","hr","(","inout","vec3","hf",",","vec3","hg",",","vec3","hh",",","float","hi",")","{","vec2","hj",",","hk",";","float","hl",",","hm",",","hn",";","vec3","ho",",","hp",",","hq",";","ho","=","reflect","(","-","hg",",","hh",")",";","hl","=","u_fresnel_params","[","2","]",";","hm","=","u_fresnel_params","[","3","]",";","hn","=","1.0",";","if","(","hl","!=","0.0",")","hn","=","he","(","hg",",","ho",",","hl",",","hm",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["hp","=","textureCube","(","u_cube_reflection",",","ho",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["hq","=","u_refl_plane",".","xyz","*","dot","(","hh",",","u_refl_plane",".","xyz",")",";","hq","=","hh","-","hq",";","hj","=","(","u_view_matrix_frag","*","vec4","(","hq",",","0.0",")",")",".","xy",";","hk","=","eY",".","xy","/","eY",".","z",";","hk","+=","hj","*","REFL_BUMP",";","hp","=","texture2D","(","u_plane_reflection",",","hk",")",".","rgb",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["hp","=","textureCube","(","u_mirrormap",",","ho",")",".","xyz",";","hi","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["ed","(","hp",".","rgb",")",";","hf","=","mix","(","hf",",","hp",",","hi","*","hn",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","hu","(","vec3","hs",")","{","float","ht",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","hs",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ht","=","0.5","*","hs",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","ht",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","hA","(","in","float","hv",",","inout","vec2","hw",",","in","vec2","hx",")","{","float","hy",";","vec4","hz",";","hz","=","texture2D","(","u_scene_depth",",","hw",")",";","hy","=","k","(","hz",")",";","if","(","hy","<","eZ",")","{","hw","=","hx",";","return","hv",";","}","else","{","return","hy",";","}","return","hv",";","}"]}]}}]},{type:"textline",tokens:["vec3","hI","(","in","vec3","hB",",","in","vec2","hC",")","{","vec3","hD",";","float","hE",";","vec4","hF",";","vec2","hG",",","hH",";","hG","=","hB",".","xy","/","hB",".","z",";","hH","=","hG","+","hC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["hF","=","texture2DProj","(","u_scene_depth",",","hB",")",";","hE","=","k","(","hF",")",";","hA","(","hE",",","hH",",","hG",")",";"]}]}}]},{type:"textline",tokens:["hD","=","texture2D","(","u_refractmap",",","hH",")",".","rgb",";","ed","(","hD",")",";","return","hD",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","hJ",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","hK","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","hL","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","hP","(","in","vec3","hM",",","in","float","hN",")","{","vec3","hO",";","hO","=","hK",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["hO","=","hI","(","eY",",","hM",".","xz","*","hN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hO","=","texture2D","(","u_refractmap",",","eY",".","xy","/","eY",".","z",")",".","rgb",";","ed","(","hO",")",";"]}]}}]},{type:"textline",tokens:["return","hO",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","hU","(","vec3","hQ",")","{","float","hR",",","hS",";","vec4","hT",";","hT","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","hT","=","mix","(","vec4","(","hQ",".","bg",",","hT",".","wz",")",",","vec4","(","hQ",".","gb",",","hT",".","xy",")",",","step","(","hQ",".","b",",","hQ",".","g",")",")",";","hT","=","mix","(","vec4","(","hT",".","xyw",",","hQ",".","r",")",",","vec4","(","hQ",".","r",",","hT",".","yzx",")",",","step","(","hT",".","x",",","hQ",".","r",")",")",";","hR","=","hT",".","x","-","min","(","hT",".","w",",","hT",".","y",")",";","hS","=","1.0e-10",";","return","vec3","(","abs","(","hT",".","z","+","(","hT",".","w","-","hT",".","y",")","/","(","6.0","*","hR","+","hS",")",")",",","hR","/","(","hT",".","x","+","hS",")",",","hT",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","hY","(","vec3","hV",")","{","vec3","hW",";","vec4","hX",";","hX","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","hW","=","abs","(","fract","(","vec3","(","hV",".","r",",","hV",".","r",",","hV",".","r",")","+","hX",".","xyz",")","*","6.0","-","hX",".","www",")",";","return","hV",".","b","*","mix","(","hX",".","xxx",",","clamp","(","hW","-","hX",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","hV",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","h_","(","vec2","hZ",")","{","return","vec3","(","hZ","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ib","(","vec3","ia",")","{","return","vec2","(","ia",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"je",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"jf",qualifier:["float"],is_optional:true},{type:"node_out",name:"jg",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_je"],statements:[{type:"textline",tokens:["je","=","normalize","(","iL",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jf"],statements:[{type:"textline",tokens:["jf","=","abs","(","iL",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jg"],statements:[{type:"textline",tokens:["jg","=","length","(","iL",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"jh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ji",qualifier:["float"],is_optional:false},{type:"node_in",name:"jj",qualifier:["float"],is_optional:false},{type:"node_out",name:"jk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jk","=","vec3","(","jh",",","ji",",","jj",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"jl",qualifier:["float"],is_optional:false},{type:"node_in",name:"jm",qualifier:["float"],is_optional:false},{type:"node_in",name:"jn",qualifier:["float"],is_optional:false},{type:"node_out",name:"jo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jo","=","hY","(","vec3","(","jl",",","jm",",","jn",")",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"jp",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ic",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jp","=","h_","(","ic",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"jq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jq","=","2.0","*","clamp","(","hJ",",","0.0",",","1.0",")","-","hL",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"id",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["jr","=","id",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"js",qualifier:["float"],is_optional:false},{type:"node_param",name:"ie",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["js","=","ie",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"jt",qualifier:["float"],is_optional:false},{type:"node_out",name:"ju",qualifier:["float"],is_optional:false},{type:"node_param",name:"ig",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jt","=","ig","[","0","]",";","ju","=","ig","[","1","]",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"jv",qualifier:["float"],is_optional:false},{type:"node_out",name:"jw",qualifier:["float"],is_optional:false},{type:"node_out",name:"jx",qualifier:["float"],is_optional:false},{type:"node_param",name:"ih",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["jv","=","ih","[","0","]",";","jw","=","ih","[","1","]",";","jx","=","ih","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"jy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jy","=","iP",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"jz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jz","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"jA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jA","=","it",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"jB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jB","[","0","]","=","iL","[","0","]",";","jB","[","1","]","=","iL","[","1","]",";","jB","[","2","]","=","iL","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"jC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jC","=","vec3","(","iO",".","r",",","-","iO",".","b",",","iO",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"jD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"jK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jD","=","hK",";","jE","=","hK",";","jF","=","hK",";","jG","=","hK",";","jH","=","hK",";","jI","=","hK",";","jJ","=","ZERO_VALUE_NODES",";","jK","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"jL",qualifier:["float"],is_optional:false},{type:"node_in",name:"jM",qualifier:["float"],is_optional:false},{type:"node_in",name:"jN",qualifier:["float"],is_optional:false},{type:"node_in",name:"jO",qualifier:["float"],is_optional:false},{type:"node_in",name:"jP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iQ","=","hU","(","jP",")",";","iQ","[","0","]","+=","(","jL","-","0.5",")",";","if","(","iQ","[","0","]",">","UNITY_VALUE_NODES",")","iQ","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","iQ","[","0","]","<","ZERO_VALUE_NODES",")","iQ","[","0","]","+=","UNITY_VALUE_NODES",";","iQ","*=","vec3","(","UNITY_VALUE_NODES",",","jM",",","jN",")",";","iQ","=","mix","(","hL",",","mix","(","hK",",","iQ",",","step","(","hK",",","iQ",")",")",",","step","(","iQ",",","hL",")",")",";","jQ","=","mix","(","jP",",","hY","(","iQ",")",",","jO",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"jR",qualifier:["float"],is_optional:false},{type:"node_in",name:"jS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jT","=","mix","(","jS",",","hL","-","jS",",","jR",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"jU",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"jV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jW",qualifier:["float"],is_optional:false},{type:"node_out",name:"jX",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jU"],statements:[{type:"textline",tokens:["jU","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["iM","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","iR","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","iS","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","iD","=","iM",".","z",";","if","(","iD","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["jV","=","iS","-","eU",";","jW","=","length","(","jV",")",";","jV","=","normalize","(","jV",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jX"],statements:[{type:"textline",tokens:["jX","=","iD","/","(","iD","+","jW","*","jW",")",";","iD","=","iM",".","x",";","iE","=","iM",".","y",";","if","(","iD",">","-","UNITY_VALUE_NODES",")","{","iF","=","dot","(","jV",",","iR",")",";","iF","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","iF","-","iD",")","/","iE",")",";","jX","*=","iF",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jV"],statements:[{type:"textline",tokens:["jV","=","iR",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jW"],statements:[{type:"textline",tokens:["jW","=","length","(","iS","-","eU",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jX"],statements:[{type:"textline",tokens:["jX","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"jY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jZ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"j_",qualifier:["float"],is_optional:true},{type:"node_param",name:"ii",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jZ"],statements:[{type:"textline",tokens:["jZ","=","ii",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_j_"],statements:[{type:"textline",tokens:["j_","=","-","dot","(","jY",",","ii",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"ka",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kb","=","-","(","u_view_matrix_frag","*","vec4","(","ka",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"kc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kd",qualifier:["float"],is_optional:false},{type:"node_in",name:"ke",qualifier:["float"],is_optional:false},{type:"node_in",name:"kf",qualifier:["float"],is_optional:false},{type:"node_in",name:"kg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ki",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ki","=","kc",";"]},{type:"textline",tokens:["kd",";","ke",";","kf",";","kg",";","kh",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"kj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kk",qualifier:["float"],is_optional:false},{type:"node_in",name:"kl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"km",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["km","=","kj",";"]},{type:"textline",tokens:["kk",";","kl",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"kn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ko",qualifier:["float"],is_optional:false},{type:"node_in",name:"kp",qualifier:["float"],is_optional:false},{type:"node_in",name:"kq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kr","=","kn",";"]},{type:"textline",tokens:["ko",";","kp",";","kq",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"ks",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kt",qualifier:["float"],is_optional:false},{type:"node_in",name:"ku",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kv","=","ks",";"]},{type:"textline",tokens:["kt",";","ku",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"kw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kx",qualifier:["float"],is_optional:false},{type:"node_in",name:"ky",qualifier:["float"],is_optional:false},{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_out",name:"kA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kA","=","kw",";"]},{type:"textline",tokens:["kx",";","ky",";","kz",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"kB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kC","=","kB",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"kD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kF","=","kD",";"]},{type:"textline",tokens:["kE",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"kG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kH",qualifier:["float"],is_optional:false},{type:"node_in",name:"kI",qualifier:["float"],is_optional:false},{type:"node_in",name:"kJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kK","[","0","]","=","kK","[","1","]","=","kK","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["kG",";","kH",";","kI",";","kJ",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"kL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kM",qualifier:["float"],is_optional:false},{type:"node_in",name:"kN",qualifier:["float"],is_optional:false},{type:"node_in",name:"kO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kP","=","kL",";"]},{type:"textline",tokens:["kM",";","kN",";","kO",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"kQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kR",qualifier:["float"],is_optional:false},{type:"node_in",name:"kS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kT","=","kQ",";"]},{type:"textline",tokens:["kR",";","kS",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"kU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kV",qualifier:["float"],is_optional:false},{type:"node_in",name:"kW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"kX",qualifier:["float"],is_optional:false},{type:"node_in",name:"kY",qualifier:["float"],is_optional:false},{type:"node_in",name:"kZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"k_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["k_","[","0","]","=","k_","[","1","]","=","k_","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["kU",";","kW",";","kX",";","kY",";","kZ",";","kV",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"la",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lb",qualifier:["float"],is_optional:false},{type:"node_out",name:"lc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lc","=","la",";"]},{type:"textline",tokens:["lb",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"ld",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"le",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","[","0","]","=","le","[","1","]","=","le","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ld",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"lf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","[","0","]","=","lf","[","1","]","=","lf","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"lg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lh",qualifier:["float"],is_optional:false},{type:"node_out",name:"li",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["li","[","0","]","=","li","[","1","]","=","li","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["lg",";","lh",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"lj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ll",qualifier:["float"],is_optional:false},{type:"node_out",name:"lm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lm","[","0","]","=","lm","[","1","]","=","lm","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["lj",";","lk",";","ll",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"ln",qualifier:["float"],is_optional:false},{type:"node_in",name:"lo",qualifier:["float"],is_optional:false},{type:"node_in",name:"lp",qualifier:["float"],is_optional:false},{type:"node_in",name:"lq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lr","=","lq",";"]},{type:"textline",tokens:["ln",";","lo",";","lp",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"ls",qualifier:["float"],is_optional:false},{type:"node_in",name:"lt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lu","=","lt",";"]},{type:"textline",tokens:["ls",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"lv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lw","[","0","]","=","lw","[","1","]","=","lw","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["lv",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"lx",qualifier:["float"],is_optional:false},{type:"node_out",name:"ly",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ly","[","0","]","=","ly","[","1","]","=","ly","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["lx",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"lz",qualifier:["float"],is_optional:false},{type:"node_out",name:"lA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lA","[","0","]","=","lA","[","1","]","=","lA","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["lz",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"lB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lC",qualifier:["float"],is_optional:false},{type:"node_out",name:"lD",qualifier:["float"],is_optional:false},{type:"node_out",name:"lE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lC","=","lB","[","0","]",";","lD","=","lB","[","1","]",";","lE","=","lB","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"lF",qualifier:["float"],is_optional:false},{type:"node_in",name:"lG",qualifier:["float"],is_optional:false},{type:"node_in",name:"lH",qualifier:["float"],is_optional:false},{type:"node_out",name:"lI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lI","[","0","]","=","lF",";","lI","[","1","]","=","lG",";","lI","[","2","]","=","lH",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"lJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lK",qualifier:["float"],is_optional:false},{type:"node_in",name:"lL",qualifier:["float"],is_optional:false},{type:"node_out",name:"lM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iF","=","lK","-","lL","*","0.5",";","lM","=","max","(","(","UNITY_VALUE_NODES","+","lL",")","*","lJ","+","iF",",","hK",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"lN",qualifier:["float"],is_optional:false},{type:"node_in",name:"lO",qualifier:["float"],is_optional:false},{type:"node_out",name:"lP",qualifier:["float"],is_optional:false},{type:"node_out",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"lR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lP","=","lQ","=","lR","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["lN",";","lO",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lT","[","0","]","=","lT","[","1","]","=","lT","[","2","]","=","ZERO_VALUE_NODES",";","lU","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["lS",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"lV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lW","[","0","]","=","lW","[","1","]","=","lW","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["lV",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"lX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lY","[","0","]","=","lY","[","1","]","=","lY","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["lX",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"lZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"l_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ma",qualifier:["float"],is_optional:false},{type:"node_in",name:"mb",qualifier:["float"],is_optional:false},{type:"node_out",name:"mc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"md",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mc","[","0","]","=","mc","[","1","]","=","mc","[","2","]","=","ZERO_VALUE_NODES",";","md","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["lZ",";","l_",";","ma",";","mb",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"me",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["float"],is_optional:false},{type:"node_in",name:"mh",qualifier:["float"],is_optional:false},{type:"node_in",name:"mi",qualifier:["float"],is_optional:false},{type:"node_out",name:"mj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mj","[","0","]","=","mj","[","1","]","=","mj","[","2","]","=","ZERO_VALUE_NODES",";","mk","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["me",";","mf",";","mg",";","mh",";","mi",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mm",qualifier:["float"],is_optional:false},{type:"node_out",name:"mn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mn","[","0","]","=","mn","[","1","]","=","mn","[","2","]","=","ZERO_VALUE_NODES",";","mo","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ml",";","mm",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mq",qualifier:["float"],is_optional:false},{type:"node_in",name:"mr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ms",qualifier:["float"],is_optional:false},{type:"node_in",name:"mt",qualifier:["float"],is_optional:false},{type:"node_in",name:"mu",qualifier:["float"],is_optional:false},{type:"node_in",name:"mv",qualifier:["float"],is_optional:false},{type:"node_out",name:"mw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mw","[","0","]","=","mw","[","1","]","=","mw","[","2","]","=","ZERO_VALUE_NODES",";","mx","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["mp",";","mq",";","mr",";","ms",";","mt",";","mu",";","mv",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"my",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mz","[","0","]","=","mz","[","1","]","=","mz","[","2","]","=","ZERO_VALUE_NODES",";","mA","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["my",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"mB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mC",qualifier:["float"],is_optional:false},{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_out",name:"mE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mE","[","0","]","=","mE","[","1","]","=","mE","[","2","]","=","ZERO_VALUE_NODES",";","mF","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["mB",";","mC",";","mD",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"mG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"mK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mK","[","0","]","=","mK","[","1","]","=","mK","[","2","]","=","ZERO_VALUE_NODES",";","mL","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["mG",";","mH",";","mI",";","mJ",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"mR",qualifier:["float"],is_optional:false},{type:"node_in",name:"mS",qualifier:["float"],is_optional:false},{type:"node_in",name:"mT",qualifier:["float"],is_optional:false},{type:"node_in",name:"mU",qualifier:["float"],is_optional:false},{type:"node_out",name:"mV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mV","[","0","]","=","mV","[","1","]","=","mV","[","2","]","=","ZERO_VALUE_NODES",";","mW","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["mM",";","mN",";","mO",";","mP",";","mQ",";","mR",";","mS",";","mT",";","mU",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"mX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mZ","=","clamp","(","mX","+","mY",",","hK",",","hL",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"m_",qualifier:["float"],is_optional:false},{type:"node_in",name:"na",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","m_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nc","=","iE","*","na","+","(","UNITY_VALUE_NODES","-","iE",")","*","nb",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"nd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ne",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ij",qualifier:["varying","vec2"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nd"],statements:[{type:"textline",tokens:["nd","=","h_","(","ij",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ne"],statements:[{type:"textline",tokens:["ne","=","vec3","(","ij",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"nf",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ik",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["nf","=","vec3","(","ik",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"ng",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ng","=","iP",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"nh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nh","=","abs","(","hJ",")",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"ni",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ni","[","0","]","=","ni","[","1","]","=","ni","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"nj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nj","[","0","]","=","iL","[","0","]",";","nj","[","1","]","=","iL","[","1","]",";","nj","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"nk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nk","[","0","]","=","nk","[","1","]","=","nk","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"nl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nl","[","0","]","=","nl","[","1","]","=","nl","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"nm",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"il",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["nm","=","vec3","(","il",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"nn",qualifier:["float"],is_optional:false},{type:"node_out",name:"no",qualifier:["float"],is_optional:false},{type:"node_out",name:"np",qualifier:["float"],is_optional:false},{type:"node_out",name:"nq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ns",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nn","=","ZERO_VALUE_NODES",";","no","=","ZERO_VALUE_NODES",";","np","=","ZERO_VALUE_NODES",";","nq","=","vec3","(","ZERO_VALUE_NODES",")",";","nr","=","ZERO_VALUE_NODES",";","ns","=","nq",";","nt","=","nq",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"nu",qualifier:["float"],is_optional:false},{type:"node_out",name:"nv",qualifier:["float"],is_optional:false},{type:"node_out",name:"nw",qualifier:["float"],is_optional:false},{type:"node_out",name:"nx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nu","=","ZERO_VALUE_NODES",";","nv","=","ZERO_VALUE_NODES",";","nw","=","ZERO_VALUE_NODES",";","nx","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nz",qualifier:["float"],is_optional:false},{type:"node_out",name:"nA",qualifier:["float"],is_optional:false},{type:"node_out",name:"nB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nz","=","ZERO_VALUE_NODES",";","nA","=","ZERO_VALUE_NODES",";","nB","=","ZERO_VALUE_NODES",";","ny","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"nC",qualifier:["float"],is_optional:false},{type:"node_out",name:"nD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nD","=","nC",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"nE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nE","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"nF",qualifier:["float"],is_optional:false},{type:"node_in",name:"nG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nH",qualifier:["float"],is_optional:false},{type:"node_out",name:"nI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nH","=","nI","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["nG",";","nF",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"nJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"nK",qualifier:["float"],is_optional:false},{type:"node_out",name:"nL",qualifier:["float"],is_optional:false},{type:"node_out",name:"nM",qualifier:["float"],is_optional:false},{type:"node_out",name:"nN",qualifier:["float"],is_optional:false},{type:"node_out",name:"nO",qualifier:["float"],is_optional:false},{type:"node_out",name:"nP",qualifier:["float"],is_optional:false},{type:"node_out",name:"nQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"nR",qualifier:["float"],is_optional:false},{type:"node_out",name:"nS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nJ","=","nK","=","nL","=","ZERO_VALUE_NODES",";","nM","=","nN","=","nO","=","ZERO_VALUE_NODES",";","nP","=","nP","=","nR","=","nS","=","ZERO_VALUE_NODES",";","nQ","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"nT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nT","=","nU","=","vec3","(","ZERO_VALUE_NODES",")",";","nV","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"nW",qualifier:["float"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nY","=","nX",";"]},{type:"textline",tokens:["nW",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"nZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"n_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oa",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oa","=","n_",";"]},{type:"textline",tokens:["nZ",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"ob",qualifier:["float"],is_optional:false},{type:"node_out",name:"oc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"od",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oc","[","0","]","=","oc","[","1","]","=","oc","[","2","]","=","clamp","(","ob",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","od","=","oc","[","0","]",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"oe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"of",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["of","=","oe",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["of","=","(","MAPPING_TRS_MATRIX","*","vec4","(","of",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["of","=","of","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["of","=","of","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["of","=","max","(","of",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["of","=","min","(","of",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["of","=","normalize","(","of",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"og",qualifier:["float"],is_optional:false},{type:"node_in",name:"oh",qualifier:["float"],is_optional:false},{type:"node_out",name:"oi",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oi","=","og","+","oh",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oi","=","clamp","(","oi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"oj",qualifier:["float"],is_optional:false},{type:"node_in",name:"ok",qualifier:["float"],is_optional:false},{type:"node_out",name:"ol",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ol","=","oj","-","ok",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ol","=","clamp","(","ol",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"om",qualifier:["float"],is_optional:false},{type:"node_in",name:"on",qualifier:["float"],is_optional:false},{type:"node_out",name:"oo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oo","=","om","*","on",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oo","=","clamp","(","oo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"op",qualifier:["float"],is_optional:false},{type:"node_in",name:"oq",qualifier:["float"],is_optional:false},{type:"node_out",name:"or",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["or","=","(","oq","!=","ZERO_VALUE_NODES",")","?","op","/","oq",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["or","=","clamp","(","or",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"os",qualifier:["float"],is_optional:false},{type:"node_in",name:"ot",qualifier:["float"],is_optional:false},{type:"node_out",name:"ou",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ou","=","sin","(","os",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ou","=","clamp","(","ou",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["ot",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"ov",qualifier:["float"],is_optional:false},{type:"node_in",name:"ow",qualifier:["float"],is_optional:false},{type:"node_out",name:"ox",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ox","=","cos","(","ov",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ox","=","clamp","(","ox",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["ow",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"oy",qualifier:["float"],is_optional:false},{type:"node_in",name:"oz",qualifier:["float"],is_optional:false},{type:"node_out",name:"oA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oA","=","tan","(","oy",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oA","=","clamp","(","oA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oz",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"oB",qualifier:["float"],is_optional:false},{type:"node_in",name:"oC",qualifier:["float"],is_optional:false},{type:"node_out",name:"oD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oD","=","(","oB","<=","UNITY_VALUE_NODES","&&","oB",">=","-","UNITY_VALUE_NODES",")","?","asin","(","oB",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oD","=","clamp","(","oD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oC",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"oE",qualifier:["float"],is_optional:false},{type:"node_in",name:"oF",qualifier:["float"],is_optional:false},{type:"node_out",name:"oG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oG","=","(","oE","<=","UNITY_VALUE_NODES","&&","oE",">=","-","UNITY_VALUE_NODES",")","?","acos","(","oE",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oG","=","clamp","(","oG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oF",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"oH",qualifier:["float"],is_optional:false},{type:"node_in",name:"oI",qualifier:["float"],is_optional:false},{type:"node_out",name:"oJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oJ","=","atan","(","oH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oJ","=","clamp","(","oJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oI",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"oK",qualifier:["float"],is_optional:false},{type:"node_in",name:"oL",qualifier:["float"],is_optional:false},{type:"node_out",name:"oM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","oK","<","ZERO_VALUE_NODES","||","oK","==","ZERO_VALUE_NODES","&&","oL","==","ZERO_VALUE_NODES",")","oM","=","ZERO_VALUE_NODES",";","else","oM","=","pow","(","oK",",","oL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oM","=","clamp","(","oM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"oN",qualifier:["float"],is_optional:false},{type:"node_in",name:"oO",qualifier:["float"],is_optional:false},{type:"node_out",name:"oP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oP","=","(","oN",">","ZERO_VALUE_NODES","&&","oO",">","ZERO_VALUE_NODES",")","?","log2","(","oN",")","/","log2","(","oO",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oP","=","clamp","(","oP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"oQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"oR",qualifier:["float"],is_optional:false},{type:"node_out",name:"oS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oS","=","min","(","oQ",",","oR",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oS","=","clamp","(","oS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"oT",qualifier:["float"],is_optional:false},{type:"node_in",name:"oU",qualifier:["float"],is_optional:false},{type:"node_out",name:"oV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oV","=","max","(","oT",",","oU",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oV","=","clamp","(","oV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"oW",qualifier:["float"],is_optional:false},{type:"node_in",name:"oX",qualifier:["float"],is_optional:false},{type:"node_out",name:"oY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oY","=","floor","(","oW","+","0.5",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oY","=","clamp","(","oY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oX",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"oZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"o_",qualifier:["float"],is_optional:false},{type:"node_out",name:"pa",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pa","=","(","oZ","<","o_",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["pa","=","clamp","(","pa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"pb",qualifier:["float"],is_optional:false},{type:"node_in",name:"pc",qualifier:["float"],is_optional:false},{type:"node_out",name:"pd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","(","pb",">","pc",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["pd","=","clamp","(","pd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"pe",qualifier:["float"],is_optional:false},{type:"node_in",name:"pf",qualifier:["float"],is_optional:false},{type:"node_out",name:"pg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pg","=","abs","(","pf",")",">","0.000001","?","mod","(","pe",",","pf",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["pg","=","clamp","(","pg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"ph",qualifier:["float"],is_optional:false},{type:"node_in",name:"pi",qualifier:["float"],is_optional:false},{type:"node_out",name:"pj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pj","=","abs","(","ph",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["pj","=","clamp","(","pj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["pi",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"pk",qualifier:["float"],is_optional:false},{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pn","=","mix","(","pl",",","pm",",","iE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pn","=","clamp","(","pn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"po",qualifier:["float"],is_optional:false},{type:"node_in",name:"pp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","po",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pr","=","mix","(","pp",",","pp","+","pq",",","iE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pr","=","clamp","(","pr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"ps",qualifier:["float"],is_optional:false},{type:"node_in",name:"pt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","ps",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pv","=","mix","(","pt",",","pt","*","pu",",","iE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pv","=","clamp","(","pv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"pw",qualifier:["float"],is_optional:false},{type:"node_in",name:"px",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"py",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pz","=","mix","(","px",",","px","-","py",",","iE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pz","=","clamp","(","pz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"pA",qualifier:["float"],is_optional:false},{type:"node_in",name:"pB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","iD","=","UNITY_VALUE_NODES","-","iE",";","pD","=","hL","-","(","vec3","(","iD",")","+","iE","*","(","hL","-","pC",")",")","*","(","hL","-","pB",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pD","=","clamp","(","pD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"pE",qualifier:["float"],is_optional:false},{type:"node_in",name:"pF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","iD","=","UNITY_VALUE_NODES","-","iE",";","pG","+=","step","(","pG",",","hK",")",";","pH","=","iD","*","pF","+","iE","*","pF","/","pG",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pH","=","clamp","(","pH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"pI",qualifier:["float"],is_optional:false},{type:"node_in",name:"pJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pL","=","mix","(","pJ",",","abs","(","pJ","-","pK",")",",","iE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pL","=","clamp","(","pL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"pM",qualifier:["float"],is_optional:false},{type:"node_in",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pP","=","min","(","pN",".","rgb",",","pO",".","rgb","*","iE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pP","=","clamp","(","pP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"pQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"pR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pT","=","max","(","pR",".","rgb",",","pS",".","rgb","*","iE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pT","=","clamp","(","pT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"pU",qualifier:["float"],is_optional:false},{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","iS","=","vec3","(","UNITY_VALUE_NODES","-","iE",")",";","pX","=","mix","(","pV","*","(","iS","+","2.0","*","iE","*","pW",")",",","hL","-","(","iS","+","2.0","*","iE","*","(","hL","-","pW",")",")","*","(","hL","-","pV",")",",","step","(","0.5",",","pV",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pX","=","clamp","(","pX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"pY",qualifier:["float"],is_optional:false},{type:"node_in",name:"pZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qa",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","pY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","iS","=","hL","-","iE","*","p_",";","iR","=","clamp","(","pZ","/","iS",",","0.0",",","1.0",")",";","qa","=","mix","(","mix","(","iR",",","hL",",","step","(","iS",",","hK",")",")",",","pZ",",","step","(","pZ",",","hK",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qa","=","clamp","(","qa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"qb",qualifier:["float"],is_optional:false},{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qe",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","qb",",","0.0",",","1.0",")",";","iS","=","vec3","(","1.0","-","iE",")",";","iS","=","iS","+","iE","*","qd",";","iR","=","clamp","(","hL","-","(","hL","-","qc",")","/","iS",",","0.0",",","1.0",")",";","qe","=","mix","(","iR",",","hK",",","step","(","iS",",","hK",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qe","=","clamp","(","qe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"qf",qualifier:["float"],is_optional:false},{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","qf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qi","=","qg",";","iR","=","hU","(","qh",")",";","if","(","iR",".","y","!=","ZERO_VALUE_NODES",")","{","iS","=","hU","(","qi",")",";","iS",".","x","=","iR",".","x",";","iT","=","hY","(","iS",")",";","qi","=","mix","(","qi",",","iT",",","iE",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qi","=","clamp","(","qi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"qj",qualifier:["float"],is_optional:false},{type:"node_in",name:"qk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ql",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","qj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","iD","=","UNITY_VALUE_NODES","-","iE",";","qm","=","qk",";","iT","=","hU","(","qm",")",";","if","(","iT",".","y","!=","ZERO_VALUE_NODES",")","{","iR","=","hU","(","ql",")",";","iT",".","y","=","iD","*","iT",".","y","+","iE","*","iR",".","y",";","qm","=","hY","(","iT",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qm","=","clamp","(","qm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"qn",qualifier:["float"],is_optional:false},{type:"node_in",name:"qo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","qn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","iD","=","UNITY_VALUE_NODES","-","iE",";","iR","=","hU","(","qo",")",";","iU","=","hU","(","qp",")",";","iR",".","z","=","iD","*","iR",".","z","+","iE","*","iU",".","z",";","qq","=","hY","(","iR",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qq","=","clamp","(","qq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"qr",qualifier:["float"],is_optional:false},{type:"node_in",name:"qs",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","qr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qu","=","qs",";","iV","=","hU","(","qt",")",";","if","(","iV",".","y","!=","ZERO_VALUE_NODES",")","{","iU","=","hU","(","qu",")",";","iU",".","x","=","iV",".","x",";","iU",".","y","=","iV",".","y",";","iW","=","hY","(","iU",")",";","qu","=","mix","(","qu",",","iW",",","iE",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qu","=","clamp","(","qu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"qv",qualifier:["float"],is_optional:false},{type:"node_in",name:"qw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","qv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","iD","=","UNITY_VALUE_NODES","-","iE",";","iW","=","qx","+","qw","-","qx","*","qw",";","qy","=","qw","*","(","vec3","(","iD",")","+","vec3","(","iE",")","*","(","(","hL","-","qw",")","*","qx","+","iW",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qy","=","clamp","(","qy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"qz",qualifier:["float"],is_optional:false},{type:"node_in",name:"qA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iE","=","clamp","(","qz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qC","=","qA","+","iE","*","(","2.0","*","qB","-","hL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qC","=","clamp","(","qC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"qD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iu","=","qD",";","iy","=","qE",";"]}]},{type:"node",name:"MATERIAL",declarations:[{type:"node_in",name:"qF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qH",qualifier:["float"],is_optional:false},{type:"node_in",name:"qI",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qJ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qK",qualifier:["float"],is_optional:true},{type:"node_out",name:"qL",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"im",qualifier:["float"]},{type:"node_param",name:"io",qualifier:["float"]},{type:"node_param",name:"ip",qualifier:["const","vec2"]},{type:"node_param",name:"iq",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["iW","=","clamp","(","qF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["iV","=","iq","[","0","]","*","clamp","(","qG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["iX","=","normalize","(","qI",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["iX","=","iP",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1},"NODES_GLOW",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["iY","=","iB","*","iW",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["iW","*=","qH",";"]}]}]},{type:"textline",tokens:["iZ","=","iC","*","u_environment_energy","*","hu","(","iX",")",";","iE","=","gY","(","iW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["iz","=","vec2","(","ip","[","0","]",",","ip","[","1","]",")",";"]},{type:"textline",tokens:["iA","=","vec2","(","iq","[","1","]",",","iq","[","2","]",")",";","jd","=","cN","(","iY",",","iZ",",","iW",",","iV",",","iO",",","iX",",","it",",","iA",",","iz",",","iE",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["jd","=","cS","(","iY",",","iZ",",","iW",")",";"]}]}]},{type:"textline",tokens:["ix","=","iE",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["jd",".","a","=","vec4","(","iW",",","ZERO_VALUE_NODES",")",";","jd",".","b","=","hK",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qJ"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["qJ","=","jd",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qJ","=","hK",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["qJ","+=","jd",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qK"],statements:[{type:"textline",tokens:["qK","=","clamp","(","im",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["iD","=","max","(","max","(","jd",".","b",".","r",",","jd",".","b",".","g",")",",","jd",".","b",".","b",")","*","io",";","qK","=","im","*","(","UNITY_VALUE_NODES","-","iD",")","+","iD",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qL"],statements:[{type:"textline",tokens:["qL","=","iX",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["iv","=","jd",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["iv","=","hK",";"]}]}]},{type:"textline",tokens:["iw","=","iX",";"]}]},{type:"node",name:"MATERIAL_EXT",declarations:[{type:"node_in",name:"qM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qO",qualifier:["float"],is_optional:false},{type:"node_in",name:"qP",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"qQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"qR",qualifier:["float"],is_optional:false},{type:"node_in",name:"qS",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"qT",qualifier:["float"],is_optional:false},{type:"node_in",name:"qU",qualifier:["float"],is_optional:false},{type:"node_in",name:"qV",qualifier:["float"],is_optional:false},{type:"node_out",name:"qW",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qX",qualifier:["float"],is_optional:true},{type:"node_out",name:"qY",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qZ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"q_",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"ir",qualifier:["const","vec2"]},{type:"node_param",name:"is",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["iV","=","clamp","(","qM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["i_","=","is","[","0","]","*","clamp","(","qN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["ja","=","normalize","(","qP",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["ja","=","iP",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1},"NODES_GLOW",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["jb","=","qQ","*","iV",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["iV","*=","qO",";"]}]}]},{type:"textline",tokens:["iD","=","gY","(","iV",")",";"]},{type:"textline",tokens:["jc","=","iC","*","u_environment_energy","*","hu","(","ja",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["iz","=","vec2","(","ir","[","0","]",",","ir","[","1","]",")",";","iA","=","vec2","(","is","[","1","]",",","is","[","2","]",")",";","jd","=","cN","(","jb",",","jc",",","iV",",","i_",",","iO",",","ja",",","it",",","iA",",","iz",",","iD",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","qR",",","qS",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["jd","=","cS","(","jb",",","jc",",","iV",")",";"]}]}]},{type:"textline",tokens:["ix","=","iD",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["jd",".","a","=","vec4","(","iV",",","ZERO_VALUE_NODES",")",";","jd",".","b","=","hK",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qW"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["qW","=","jd",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qW","=","hK",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["hr","(","qW",",","it",",","ja",",","qT",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["qW","+=","jd",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qX"],statements:[{type:"textline",tokens:["qX","=","clamp","(","qV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["iG","=","max","(","max","(","jd",".","b",".","r",",","jd",".","b",".","g",")",",","jd",".","b",".","b",")","*","qU",";","qX","=","clamp","(","qV","*","(","UNITY_VALUE_NODES","-","iG",")","+","iG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qY"],statements:[{type:"textline",tokens:["qY","=","ja",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qZ"],statements:[{type:"textline",tokens:["qZ","=","jd",".","a",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_q_"],statements:[{type:"textline",tokens:["q_","=","jd",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["iv","=","jd",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["iv","=","hK",";"]}]}]},{type:"textline",tokens:["iw","=","ja",";"]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"ra",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ra","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"rb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rc","=","dot","(","rb",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"rd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"re",qualifier:["float"],is_optional:true},{type:"node_out",name:"rf",qualifier:["float"],is_optional:true},{type:"node_out",name:"rg",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_re"],statements:[{type:"textline",tokens:["re","=","rd",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rf"],statements:[{type:"textline",tokens:["rf","=","rd",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rg"],statements:[{type:"textline",tokens:["rg","=","rd",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"rh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ri",qualifier:["float"],is_optional:true},{type:"node_out",name:"rj",qualifier:["float"],is_optional:true},{type:"node_out",name:"rk",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["i_","=","hU","(","rh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ri"],statements:[{type:"textline",tokens:["ri","=","i_",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rj"],statements:[{type:"textline",tokens:["rj","=","i_",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rk"],statements:[{type:"textline",tokens:["rk","=","i_",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"rl",qualifier:["float"],is_optional:false},{type:"node_in",name:"rm",qualifier:["float"],is_optional:false},{type:"node_in",name:"rn",qualifier:["float"],is_optional:false},{type:"node_out",name:"ro",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ro","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","rl","-","rn",")","*","rm",")",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"rp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rq",qualifier:["float"],is_optional:false},{type:"node_out",name:"rr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rr","=","max","(","hK",",","rp",")",";","rr","=","pow","(","rr",",","vec3","(","rq",")",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"rs",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rt","=","max","(","hK",",","rs",")",";","rt","=","pow","(","rt",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"ru",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rv","=","max","(","hK",",","ru",")",";","rv","=","pow","(","rv",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"rw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ry",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ry"],statements:[{type:"textline",tokens:["rw","[","2","]","=","rw","[","1","]","=","rw","[","0","]","=","0.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ry"],statements:[{type:"textline",tokens:["rx","[","2","]","=","rx","[","1","]","=","rx","[","0","]","=","0.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ry"],statements:[{type:"textline",tokens:["ry","=","0.0",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"rz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rA",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rB",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["iM","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","rz",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rA"],statements:[{type:"textline",tokens:["rA","=","iM",".","xyz",";","ed","(","rA",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rB"],statements:[{type:"textline",tokens:["rB","=","iM",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"rC",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rD",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rE",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rF",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rH",qualifier:["float"],is_optional:true},{type:"node_out",name:"rI",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rJ",qualifier:["float"],is_optional:true},{type:"node_out",name:"rK",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rL",qualifier:["float"],is_optional:true},{type:"node_out",name:"rM",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rN",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["iM","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ib","(","rC",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rG"],statements:[{type:"textline",tokens:["rG","=","iM",".","xyz",";","ed","(","rG",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rH"],statements:[{type:"textline",tokens:["rH","=","iM",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["iM","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ib","(","rD",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rI"],statements:[{type:"textline",tokens:["rI","=","iM",".","xyz",";","ed","(","rI",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rJ"],statements:[{type:"textline",tokens:["rJ","=","iM",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["iM","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ib","(","rE",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rK"],statements:[{type:"textline",tokens:["rK","=","iM",".","xyz",";","ed","(","rK",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rL"],statements:[{type:"textline",tokens:["rL","=","iM",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["iM","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ib","(","rF",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rM"],statements:[{type:"textline",tokens:["rM","=","iM",".","xyz",";","ed","(","rM",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rN"],statements:[{type:"textline",tokens:["rN","=","iM",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"rO",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rP",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rQ",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rR",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rS",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rT",qualifier:["float"],is_optional:true},{type:"node_out",name:"rU",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rV",qualifier:["float"],is_optional:true},{type:"node_out",name:"rW",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rX",qualifier:["float"],is_optional:true},{type:"node_out",name:"rY",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rZ",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["iM","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ib","(","rO",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rS"],statements:[{type:"textline",tokens:["rS","=","normalize","(","iN","*","(","iM",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rT"],statements:[{type:"textline",tokens:["rT","=","iM",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["iM","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ib","(","rP",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rU"],statements:[{type:"textline",tokens:["rU","=","normalize","(","iN","*","(","iM",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rV"],statements:[{type:"textline",tokens:["rV","=","iM",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["iM","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ib","(","rQ",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rW"],statements:[{type:"textline",tokens:["rW","=","normalize","(","iN","*","(","iM",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rX"],statements:[{type:"textline",tokens:["rX","=","iM",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["iM","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ib","(","rR",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rY"],statements:[{type:"textline",tokens:["rY","=","normalize","(","iN","*","(","iM",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rZ"],statements:[{type:"textline",tokens:["rZ","=","iM",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"r_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["r_","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"sa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sd",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sc","=","sa","+","sb",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sd"],statements:[{type:"textline",tokens:["sd","=","(","abs","(","sc","[","0","]",")","+","abs","(","sc","[","1","]",")","+","abs","(","sc","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"se",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sh",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sg","=","se","-","sf",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sh"],statements:[{type:"textline",tokens:["sh","=","(","abs","(","sg","[","0","]",")","+","abs","(","sg","[","1","]",")","+","abs","(","sg","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"si",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sl",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sk","=","si","+","sj",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sl"],statements:[{type:"textline",tokens:["sl","=","length","(","sk",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sk"],statements:[{type:"textline",tokens:["sk","=","normalize","(","sk",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"sm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"so",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sp",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["so","=","hK",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sp"],statements:[{type:"textline",tokens:["sp","=","dot","(","sm",",","sn",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"sq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ss",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"st",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["ss","=","cross","(","sq",",","sr",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_st"],statements:[{type:"textline",tokens:["st","=","length","(","ss",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"su",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sx",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sw","=","normalize","(","su",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sx"],statements:[{type:"textline",tokens:["sx","=","length","(","su",")",";"]}]}]},{type:"textline",tokens:["sv",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"sy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["sA","=","reflect","(","-","sy",",","sz",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"sB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sC",qualifier:["float"],is_optional:false},{type:"node_in",name:"sD",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"sE",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"sF",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["iG","=","length","(","iL",")",";","if","(","iG","<","sE",")","{","iz","=","ib","(","sB",")",";","iH","=","clamp","(","0.5","*","(","sE","-","iG",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","iH","=","sC","*","iH",";"]},{type:"textline",tokens:["i_","=","normalize","(","it","*","iN",")",";"]},{type:"textline",tokens:["iI","=","UNITY_VALUE_NODES","/","sD",";"]},{type:"textline",tokens:["iA","=","i_",".","xy","*","iH","/","(","sD","*","i_",".","z",")",";","iJ","=","UNITY_VALUE_NODES",";","iK","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","iz",")",".","a",";"]},{type:"textline",tokens:["for","(","float","sG","=","1.0",";","sG","<=","sD",";","sG","++",")","{","if","(","iK","<","iJ",")","{","iJ","-=","iI",";","iz","-=","iA",";","iK","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","iz",")",".","a",";","}","}"]},{type:"textline",tokens:["iA","=","iz","+","iA",";","iI","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","iA",")",".","a","-","(","iJ","+","iI",")",";","iJ","=","iK","-","iJ",";","iI","=","iJ","/","(","iJ","-","iI",")",";"]},{type:"textline",tokens:["iz","=","iI","*","iA","+","(","UNITY_VALUE_NODES","-","iI",")","*","iz",";","sF","=","h_","(","iz",")",";","}","else","sF","=","sB",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"sH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["sI","=","clamp","(","sH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"sJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sK",qualifier:["float"],is_optional:false},{type:"node_out",name:"sL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["sL","=","hP","(","sJ",",","sK",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"sM",qualifier:["float"],is_optional:false},{type:"node_in",name:"sN",qualifier:["float"],is_optional:false},{type:"node_in",name:"sO",qualifier:["float"],is_optional:false},{type:"node_in",name:"sP",qualifier:["float"],is_optional:false},{type:"node_in",name:"sQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"sR",qualifier:["float"],is_optional:true},{type:"node_out",name:"sS",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sR"],statements:[{type:"textline",tokens:["sR","=","sM",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sS"],statements:[{type:"textline",tokens:["sS","=","vec4","(","sN",",","sO",",","sP",",","sQ",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"sT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sT","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"sU",qualifier:["float"],is_optional:false},{type:"node_in",name:"sV",qualifier:["float"],is_optional:false},{type:"node_in",name:"sW",qualifier:["float"],is_optional:false},{type:"node_out",name:"sX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sX","=","smoothstep","(","sV",",","sW",",","sU",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"sY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iu","=","sY",";","iy","=","sZ",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"s_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ta",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ta","=","(","s_",".","r","+","s_",".","g","+","s_",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"tb",qualifier:["float"],is_optional:false},{type:"node_out",name:"tc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tc","[","0","]","=","tb",";","tc","[","1","]","=","tb",";","tc","[","2","]","=","tb",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","td","(","in","vec3","it",",","out","vec3","iu",",","out","vec3","iv",",","out","vec3","iw",",","out","float","ix",",","out","float","iy",")","{","vec2","iz",",","iA",";","float","iB",",","iC",",","iD",",","iE",",","iF",",","iG",",","iH",",","iI",",","iJ",",","iK",";","vec4","iL",",","iM",";","mat3","iN",";","vec3","iO",",","iP",",","iQ",",","iR",",","iS",",","iT",",","iU",",","iV",",","iW",",","iX",",","iY",",","iZ",",","i_",",","ja",",","jb",",","jc",";","iu","=","hK",";","iv","=","hK",";","iw","=","hK",";","ix","=","ZERO_VALUE_NODES",";","iy","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","USE_NODE_MATERIAL_EXT","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["iO","=","eW",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","iO","=","iO",";","else","iO","=","-","iO",";"]}]}}]},{type:"textline",tokens:["iP","=","normalize","(","iO",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["iQ","=","cross","(","iO",",","eX",".","xyz",")","*","eX",".","w",";","iN","=","mat3","(","eX",".","xyz",",","iQ",",","iO",")",";","iN","=","iN",";"]}]}}]},{type:"textline",tokens:["iO","=","eU",";","iL","=","eV",";","iB","=","u_emit",";","iC","=","u_ambient",";","af","jd",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","te","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","tk","(","vec3","tf",",","mat4","tg",")","{","vec3","th",",","ti",",","tj",";","th","=","vec3","(","tg","[","0","]","[","0","]",",","tg","[","1","]","[","0","]",",","tg","[","2","]","[","0","]",")",";","ti","=","vec3","(","tg","[","0","]","[","1","]",",","tg","[","1","]","[","1","]",",","tg","[","2","]","[","1","]",")",";","tj","=","vec3","(","tg","[","0","]","[","2","]",",","tg","[","1","]","[","2","]",",","tg","[","2","]","[","2","]",")",";","ti","=","cross","(","tj",",","th",")",";","th","=","normalize","(","th",")",";","ti","=","normalize","(","ti",")",";","tj","=","normalize","(","tj",")",";","return","mat4","(","vec4","(","th",",","0.0",")",",","vec4","(","ti",",","0.0",")",",","vec4","(","tj",",","0.0",")",",","vec4","(","tf",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","tq","(","vec3","tl",",","vec3","tm",")","{","vec3","tn",",","to",",","tp",";","tn","=","tl","-","tm",";","tn",".","y","=","0.0",";","to","=","cross","(","te",",","tn",")",";","tp","=","cross","(","tn",",","to",")",";","to","=","normalize","(","to",")",";","tp","=","normalize","(","tp",")",";","tn","=","normalize","(","tn",")",";","return","mat4","(","vec4","(","to",",","0.0",")",",","vec4","(","tp",",","0.0",")",",","vec4","(","tn",",","0.0",")",",","vec4","(","tm",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ty","(","in","vec3","tr",",","float","ts",",","float","tt",",","float","tu",",","vec3","tv",")","{","float","tw",",","tx",";","tw","=","fract","(","length","(","tv",")","/","0.17",")",";","tx","=","tu","+","tw","/","10.0",";","tw","=","tw",";","if","(","tu","!=","0.0",")","tw","/=","tu",";","tr","*=","1.0","+","0.5","*","sin","(","ts",")",";","tw","=","length","(","tr",")","*","tt","*","sin","(","2.0","*","3.14","*","ts","*","tx","+","tw",")",";","return","eL","(","tw",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","tG","(","in","vec3","tz",",","in","vec3","tA",",","in","mat4","tB",")","{","vec3","tC",";","float","tD",",","tE",";","mat4","tF",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tF","=","tk","(","tA",",","tB",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","fract","(","(","tA",".","x","*","1.43","+","tA",".","y","*","0.123","+","tA",".","z","*","6.1",")",")",";","tD","=","2.0","*","M_PI","*","tD",";","tC","=","normalize","(","vec3","(","tB","[","0","]","[","2","]",",","0.0",",","tB","[","2","]","[","2","]",")",")",";","tE","=","acos","(","tC","[","2","]",")",";","if","(","tC","[","0","]","<","0.0",")","tE","=","2.0","*","M_PI","-","tE",";","tE","=","tE","-","tD",";","if","(","tE","<","0.0",")","tE","=","2.0","*","M_PI","+","tE",";","tD","=","tD",";","if","(","tE","<=","MAX_BILLBOARD_ANGLE",")","tD","+=","tE",";","else","if","(","tE","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","tD","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","tE","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","tE","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","tD","+=","tE","-","M_PI",";","else","if","(","tE","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","tD","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","tE","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","tD","+=","tE","-","2.0","*","M_PI",";","tF","=","eJ","(","tD",")",";","tF","[","3","]","=","vec4","(","tA",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tF","=","tq","(","tz",",","tA",")",";"]}]}}]},{type:"textline",tokens:["return","tF",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","tM","(","in","vec3","tH",",","in","vec3","tI",",","in","mat4","tJ",",","mat4","tK",")","{","mat4","tL",";","tL","=","tG","(","tH",",","tI",",","tJ",")",";","tK","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","tL","=","tL","*","tK",";","return","tL",";","}"]}]}}]},{type:"textline",tokens:["el","tT","(","in","vec3","tN",",","in","vec3","tO",",","in","vec3","tP",",","in","vec3","tQ",",","in","vec3","tR",",","in","mat4","tS",")","{","tN","=","(","tS","*","vec4","(","tN",",","1.0",")",")",".","xyz",";","tO","=","(","tS","*","vec4","(","tO",",","1.0",")",")",".","xyz",";","tP","=","(","tS","*","vec4","(","tP",",","0.0",")",")",".","xyz",";","tQ","=","(","tS","*","vec4","(","tQ",",","0.0",")",")",".","xyz",";","tR","=","(","tS","*","vec4","(","tR",",","0.0",")",")",".","xyz",";","return","eN","(","el","(","tN",",","tO",",","tP",",","tQ",",","tR",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","tW","(","vec2","tU",",","vec3","tV",")","{","return","(","tU","+","0.5",")","*","tV",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","uc","(","in","vec4","tX",",","in","vec4","tY",",","in","float","tZ",")","{","float","t_",",","ua",",","ub",";","t_","=","tX","[","0","]","*","tY","[","0","]","+","tX","[","1","]","*","tY","[","1","]","+","tX","[","2","]","*","tY","[","2","]","+","tX","[","3","]","*","tY","[","3","]",";","if","(","t_","<","0.0",")","{","tY","*=","-","1.0",";","t_","=","-","t_",";","}","if","(","abs","(","t_",")",">=","1.0",")","return","tX",";","ua","=","acos","(","t_",")",";","t_","=","sqrt","(","1.0","-","t_","*","t_",")",";","if","(","abs","(","t_",")","<","0.001",")","return","vec4","(","tX","*","0.5","+","tY","*","0.5",")",";","ub","=","sin","(","(","1.0","-","tZ",")","*","ua",")","/","t_",";","t_","=","sin","(","tZ","*","ua",")","/","t_",";","return","tX","*","ub","+","tY","*","t_",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uo","(","in","vec3","ud",",","in","vec4","ue",",","in","vec4","uf",",","in","vec4","ug",",","in","vec4","uh",",","in","float","ui",")","{","vec4","uj",",","uk",";","vec3","ul",",","um",",","un",";","ul","=","ey","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","ud",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["uj","=","uc","(","ue",",","uf",",","ui",")",";","uk","=","mix","(","ug",",","uh",",","ui",")",";","um","=","er","(","uj",",","ul",")",";","um","=","um","*","uk",".","w","+","uk",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["un","=","er","(","ue",",","ul",")",";","ul","=","er","(","uf",",","ul",")",";","un","=","un","*","ug",".","w","+","ug",".","xyz",";","ul","=","ul","*","uh",".","w","+","uh",".","xyz",";","um","=","mix","(","un",",","ul",",","ui",")",";"]}]}}]},{type:"textline",tokens:["return","eE","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","um",",","1.0",")",")",";","}","vec3","ux","(","in","vec3","up",",","in","vec4","uq",",","in","vec4","ur",",","in","float","us",")","{","vec4","ut",";","vec3","uu",",","uv",",","uw",";","uu","=","ey","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","up",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","uc","(","uq",",","ur",",","us",")",";","uv","=","er","(","ut",",","uu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uw","=","er","(","uq",",","uu",")",";","uu","=","er","(","ur",",","uu",")",";","uv","=","mix","(","uw",",","uu",",","us",")",";"]}]}}]},{type:"textline",tokens:["return","eE","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","uv",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","uo","(","in","vec3","uy",",","in","vec4","uz",",","in","vec4","uA",")","{","vec3","uB",";","uB","=","ey","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","uy",",","1.0",")",")",";","uB","=","er","(","uz",",","uB",")",";","uB","=","uB","*","uA",".","w","+","uA",".","xyz",";","return","eE","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","uB",",","1.0",")",")",";","}","vec3","ux","(","in","vec3","uC",",","in","vec4","uD",")","{","vec3","uE",";","uE","=","ey","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","uC",",","0.0",")",")",";","uE","=","er","(","uD",",","uE",")",";","return","eE","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","uE",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","uT","(","inout","vec3","uF",",","inout","vec3","uG",",","inout","vec3","uH",",","inout","vec3","uI",")","{","int","uJ",",","uK",";","vec4","uL",";","vec3","uM",",","uN",",","uO",",","uP",";","float","uQ",",","uR",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","uM","=","vec3","(","0.0",",","0.0",",","0.0",")",";","uN","=","vec3","(","0.0",",","0.0",",","0.0",")",";","uO","=","vec3","(","0.0",",","0.0",",","0.0",")",";","uP","=","vec3","(","0.0",",","0.0",",","0.0",")",";","uL","=","a_influence",";","for","(","int","uS","=","0",";","uS","<","4",";","uS","++",")","{","uJ","=","int","(","uL","[","uS","]",")",";","uR","=","fract","(","uL","[","uS","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uM","+=","uR","*","uo","(","uF",",","u_quatsb","[","uJ","]",",","u_quatsa","[","uJ","]",",","u_transb","[","uJ","]",",","u_transa","[","uJ","]",",","uQ",")",";","uN","+=","uR","*","ux","(","uG",",","u_quatsb","[","uJ","]",",","u_quatsa","[","uJ","]",",","uQ",")",";","uO","+=","uR","*","ux","(","uH",",","u_quatsb","[","uJ","]",",","u_quatsa","[","uJ","]",",","uQ",")",";","uP","+=","uR","*","ux","(","uI",",","u_quatsb","[","uJ","]",",","u_quatsa","[","uJ","]",",","uQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uM","+=","uR","*","uo","(","uF",",","u_quatsb","[","uJ","]",",","u_transb","[","uJ","]",")",";","uN","+=","uR","*","ux","(","uG",",","u_quatsb","[","uJ","]",")",";","uO","+=","uR","*","ux","(","uH",",","u_quatsb","[","uJ","]",")",";","uP","+=","uR","*","ux","(","uI",",","u_quatsb","[","uJ","]",")",";"]}]}}]},{type:"textline",tokens:["}","uF","=","uM",";","uG","=","uN",";","uH","=","uO",";","uI","=","uP",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","uK","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","uK",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uF","=","uo","(","uF",",","u_quatsb","[","uK","]",",","u_quatsa","[","uK","]",",","u_transb","[","uK","]",",","u_transa","[","uK","]",",","uQ",")",";","uG","=","ux","(","uG",",","u_quatsb","[","uK","]",",","u_quatsa","[","uK","]",",","uQ",")",";","uH","=","ux","(","uH",",","u_quatsb","[","uK","]",",","u_quatsa","[","uK","]",",","uQ",")",";","uI","=","ux","(","uI",",","u_quatsb","[","uK","]",",","u_quatsa","[","uK","]",",","uQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uF","=","uo","(","uF",",","u_quatsb","[","uK","]",",","u_transb","[","uK","]",")",";","uG","=","ux","(","uG",",","u_quatsb","[","uK","]",")",";","uH","=","ux","(","uH",",","u_quatsb","[","uK","]",")",";","uI","=","ux","(","uI",",","u_quatsb","[","uK","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","vd","(","inout","vec3","uU",",","in","vec3","uV",",","in","float","uW",",","in","float","uX",",","in","float","uY",",","in","vec3","uZ",",","in","float","u_",")","{","vec3","va",";","float","vb",",","vc",";","vb","=","length","(","uV",")",";","vc","=","uX","*","(","1.0","+","0.1","*","fract","(","vb",")",")",";","vb","=","uW","*","u_","*","(","1.0","+","sin","(","2.0","*","3.14","*","uY","*","vc","+","vb",")",")",";","vc","=","(","uU",".","y","-","uV",".","y",")","*","abs","(","vb",")",";","vc","+=","1.0",";","vc","*=","vc",";","vc","=","vc","*","vc","-","vc",";","va","=","uU",";","va",".","xz","+=","uZ",".","xz","*","vc","*","sign","(","vb",")",";","va","=","va","-","uV",";","if","(","all","(","equal","(","va",",","vec3","(","0.0",")",")",")",")","uU","=","uV",";","else","{","vb","=","length","(","uU","-","uV",")",";","uU","=","uV","+","normalize","(","va",")","*","vb",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","vf","(","vec4","ve",")","{","return","ve","*","ve","*","(","3.0","-","2.0","*","ve",")",";","}","vec4","vh","(","vec4","vg",")","{","return","abs","(","fract","(","vg","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","vj","(","vec4","vi",")","{","return","vf","(","vh","(","vi",")",")",";","}","void","vA","(","inout","vec3","vk",",","in","float","vl",",","in","vec3","vm",",","in","vec3","vn",",","in","vec3","vo",",","in","float","vp",",","in","float","vq",",","in","float","vr",",","in","vec3","vs",")","{","vec3","vt",";","vec4","vu",";","vec2","vv",",","vw",";","float","vx",",","vy",",","vz",";","vx","=","dot","(","vo",",","vec3","(","1.0",")",")",";","vy","=","vx","+","vs",".","g",";","vz","=","dot","(","vk",",","vec3","(","vs",".","g",")",")",";","vv","=","(","vl","+","vec2","(","vz",",","vy",")",")",";","vu","=","(","(","fract","(","(","vv",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","vn",")","*","vp",";","vu","=","vj","(","vu",")",";","vw","=","vu",".","xz","+","vu",".","yw",";","vw",".","y","=","0.5","-","vw",".","y",";","vt","=","vw",".","xyx","*","vs",".","rbr","*","vec3","(","vq","*","vm",".","x",",","vr",",","vq","*","vm",".","z",")",";","vk","+=","vt",";","}"]}]}}]},{type:"textline",tokens:["void","vH","(","inout","vec3","vB",",","inout","vec3","vC",",","in","vec3","vD",")","{","vec3","vE",",","vF",",","vG",";","vE","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vF","=","vC",";","vG","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vF","=","vB",";","vG","=","vC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vA","(","vF",",","u_time",",","vD",",","vE",",","vG",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["vd","(","vF",",","vG",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","vE",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vd","(","vF",",","vG",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","vE",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vB","+=","vF","-","vC",";","vC","=","vF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vB","=","vF",";","vC","=","vG",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","hJ",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"ik",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ik","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"ij",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ij","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"il",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["il","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"ic",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ic","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"vI",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["vI","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"vJ",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["vJ","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"vK",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["vK","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"vL",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["vL","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","vM","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["hJ","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","vR","(","vec3","vN",",","float","vO",",","vec2","vP",")","{","vec2","vQ",";","vQ","=","vec2","(","(","vN",".","x","-","vP",".","x",")","/","vO",",","-","(","vN",".","z","-","vP",".","y",")","/","vO",")",";","return","fract","(","vQ",")",";","}","vec2","vV","(","vec2","vS",",","float","vT",",","vec2","vU",")","{","return","vec2","(","vS",".","x","*","vT",",","-","vS",".","y","*","vT",")","+","vU",";","}","el","vW","(",")","{","return","el","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","el","wr","(","vec3","vX",",","vec3","vY",",","vec3","vZ",",","vec3","v_",",","vec3","wa",",","PRECISION","sampler2D","wb",",","sampler2D","wc",",","vec3","wd",",","float","we",",","vec3","wf",",","vec4","wg",",","mat4","wh",")","{","mat4","wi",";","vec4","wj",";","vec2","wk",",","wl",",","wm",";","float","wn",",","wo",";","vec3","wp",";","wp","=","er","(","wg",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","wn","=","-","wp",".","x",";","wo","=","-","wp",".","z",";","wk","=","vec2","(","wf",".","x","+","we","*","(","-","1.0","-","wn",")","/","2.0",",","wf",".","z","+","we","*","(","1.0","-","wo",")","/","2.0",")",";","wl","=","vR","(","wa",",","we",",","wk",")",";","wo","=","we","/","2.0",";","wm","=","abs","(","vV","(","wl","-","vec2","(","0.5",")",",","we",",","vec2","(","0.0",")",")",")",";","wo","=","wo","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","wm",")",">","wo",")","return","vW","(",")",";","wo","=","we","/","wd",".","z",";","wm","=","(","wl","-","vec2","(","0.5",")",")","*","wo","+","vec2","(","0.5",")",";","wp","=","wp","*","(","we","/","wd",".","z","-","1.0",")","/","2.0",";","wm",".","x","+=","wp",".","x",";","wm",".","y","-=","wp",".","z",";","wj","=","texture2D","(","wc",",","wm",")",";","wo","=","wj",".","r",";","if","(","wo","<","u_scale_threshold",")","return","vW","(",")",";","wn","=","wd",".","y","-","wd",".","x",";","wn","=","wd",".","y","-","texture2D","(","wb",",","wm",")",".","r","*","wn",";","wm","=","vX",".","xz","-","wa",".","xz",";","wa",".","xz","=","vV","(","wl",",","we",",","wk",")",";","wa",".","y","=","wn",";","vX",".","xz","=","wa",".","xz","+","wm",";","vX",".","y","*=","wo",";","vX",".","y","+=","wn",";","wp","=","wj",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vX","-=","wa",";","wi","=","tG","(","wf",",","wa",",","wh",")",";","el","wq","=","tT","(","vX",",","wa",",","vY",",","vZ",",","v_",",","wi",")",";","wq",".","b","=","wa",";","wq",".","f","=","wp",";","return","eN","(","wq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","eN","(","el","(","vX",",","wa",",","vY",",","vZ",",","v_",",","wp",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","wx","(","mat4","ws",",","vec4","wt",")","{","vec4","wu",";","float","wv",";","vec2","ww",";","ww","=","(","ws","*","u_v_light_matrix","[","3","]",")",".","xy",";","wv","=","SHADOW_TEX_RES","/","2.0",";","ww","=","floor","(","ww","*","wv","+","0.5",")","/","wv","-","ww",";","wu","=","ws","*","wt",";","wu",".","xy","+=","ww",";","wu","=","u_b_light_matrix","*","wu",";","return","wu",";","}","void","wB","(","vec3","wy",",","vec3","wz",")","{","vec4","wA",";","wA","=","u_v_light_matrix","*","vec4","(","wy","+","u_normal_offset","*","wz",",","1.0",")",";","e_","=","wx","(","u_p_light_matrix0",",","wA",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["fa","=","wx","(","u_p_light_matrix1",",","wA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["fb","=","wx","(","u_p_light_matrix2",",","wA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["fc","=","wx","(","u_p_light_matrix3",",","wA",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","wJ","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","wP","(","inout","float","wK",",","float","wL",",","vec2","wM",",","vec2","wN",")","{","float","wO",";","wO","=","wN",".","x","-","wM",".","x",";","wO","=","(","wL","-","wM",".","x",")","/","wO",";","wK","=","mix","(","wK",",","wN",".","y",",","clamp","(","wO",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","wV","(","inout","vec3","wQ",",","float","wR",",","vec4","wS",",","vec4","wT",")","{","float","wU",";","wU","=","wT",".","x","-","wS",".","x",";","wU","=","(","wR","-","wS",".","x",")","/","wU",";","wQ","=","mix","(","wQ",",","wT",".","yzw",",","clamp","(","wU",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","xa","(","float","wW",",","float","wX",",","vec2","wY","[","SIZE_RAMP_LENGTH","]",")","{","float","wZ",",","w_",";","wZ","=","wW","/","wX",";","w_","=","wY","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wP","(","w_",",","wZ",",","wY","[","0","]",",","wY","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wP","(","w_",",","wZ",",","wY","[","1","]",",","wY","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wP","(","w_",",","wZ",",","wY","[","2","]",",","wY","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","w_",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xg","(","float","xb",",","float","xc",",","vec4","xd","[","COLOR_RAMP_LENGTH","]",")","{","vec3","xe",";","float","xf",";","xf","=","xb","/","xc",";","xe","=","xd","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wV","(","xe",",","xf",",","xd","[","0","]",",","xd","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wV","(","xe",",","xf",",","xd","[","1","]",",","xd","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wV","(","xe",",","xf",",","xd","[","2","]",",","xd","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xe",";","}"]}]}}]},{type:"textline",tokens:["float","xo","(","float","xh",",","float","xi",",","float","xj",",","float","xk",")","{","float","xl",",","xm",",","xn",";","xl","=","max","(","0.01",",","min","(","xi",",","xj",")",")",";","xm","=","max","(","0.01",",","min","(","xi",",","xk",")",")",";","xn","=","xi","-","xm",";","xm","=","clamp","(","xh","/","xl",",","0.0",",","1.0",")","-","step","(","xn",",","xh",")","*","(","xh","-","xn",")","/","xm",";","return","xm",";","}","wJ","xu","(",")","{","vec3","xp",",","xq",";","float","xr",",","xs",";","wJ","xt",";","if","(","u_p_cyclic","==","1",")","{","xr","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","xr","<","0.0",")","xr","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","xr","=","u_p_time","-","a_p_delay",";","}","if","(","xr","<","0.0","||","xr",">=","a_p_lifetime",")","{","xt",".","a","=","0.0001",";","xt",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","xr","<","0.0","||","xr",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","a_position",";","xq","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xp","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xq","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["xp","+=","u_p_nfactor","*","xr","*","xq",";","xp","+=","a_p_vels",".","xyz","*","xr",";","xp",".","y","-=","u_p_gravity","*","xr","*","xr","/","2.0",";","xs","=","max","(","u_p_mass",",","EPSILON",")",";","xp","+=","(","u_p_wind","/","xs",")","*","xr","*","xr","/","2.0",";","xt",".","b","=","xp",";","xt",".","e","=","a_p_vels",".","w","*","xr",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xt",".","a","=","xa","(","xr",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xt",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xt",".","d","=","xg","(","xr",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xt",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["xt",".","c","=","xo","(","xr",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","xt",";","}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","xw","=","0.0",";","float","xx","=","1.0",";","vec3","xy","=","vec3","(","xw",")",";","vec3","xz","=","vec3","(","xx",")",";","vec3","xE","(","vec3","xA",")","{","float","xB",",","xC",";","vec4","xD",";","xD","=","vec4","(","xw",",","-","xx","/","3.0",",","2.0","/","3.0",",","-","xx",")",";","xD","=","mix","(","vec4","(","xA",".","bg",",","xD",".","wz",")",",","vec4","(","xA",".","gb",",","xD",".","xy",")",",","step","(","xA",".","b",",","xA",".","g",")",")",";","xD","=","mix","(","vec4","(","xD",".","xyw",",","xA",".","r",")",",","vec4","(","xA",".","r",",","xD",".","yzx",")",",","step","(","xD",".","x",",","xA",".","r",")",")",";","xB","=","xD",".","x","-","min","(","xD",".","w",",","xD",".","y",")",";","xC","=","1.0e-10",";","return","vec3","(","abs","(","xD",".","z","+","(","xD",".","w","-","xD",".","y",")","/","(","6.0","*","xB","+","xC",")",")",",","xB","/","(","xD",".","x","+","xC",")",",","xD",".","x",")",";","}","vec3","xI","(","vec3","xF",")","{","vec3","xG",";","vec4","xH",";","xH","=","vec4","(","xx",",","2.0","/","3.0",",","xx","/","3.0",",","3.0",")",";","xG","=","abs","(","fract","(","vec3","(","xF",".","r",",","xF",".","r",",","xF",".","r",")","+","xH",".","xyz",")","*","6.0","-","xH",".","www",")",";","return","xF",".","b","*","mix","(","xH",".","xxx",",","clamp","(","xG","-","xH",".","xxx",",","xw",",","xx",")",",","xF",".","g",")",";","}","vec3","xM","(","vec3","xJ",",","vec3","xK",",","float","xL",")","{","return","mix","(","xJ",",","xK",",","xL",")",";","}","vec3","xQ","(","vec3","xN",",","vec3","xO",",","float","xP",")","{","return","xP","*","xN","+","xO",";","}","vec3","xU","(","vec3","xR",",","vec3","xS",",","float","xT",")","{","return","xS","-","xT","*","xR",";","}","vec3","xZ","(","vec3","xV",",","vec3","xW",",","float","xX",")","{","float","xY",";","xY","=","xx","-","xX",";","return","(","vec3","(","xY",")","+","xX","*","xV",")","*","xW",";","}","vec3","yd","(","vec3","x_",",","vec3","ya",",","float","yb",")","{","vec3","yc",";","yc","=","vec3","(","xx","-","yb",")",";","return","xz","-","(","yc","+","yb","*","(","xz","-","x_",")",")","*","(","xz","-","ya",")",";","}","vec3","yi","(","vec3","ye",",","vec3","yf",",","float","yg",")","{","vec3","yh",";","yh","=","vec3","(","xx","-","yg",")",";","return","mix","(","yf","*","(","yh","+","2.0","*","yg","*","ye",")",",","xz","-","(","yh","+","2.0","*","yg","*","(","xz","-","ye",")",")","*","(","xz","-","yf",")",",","step","(","0.5",",","yf",")",")",";","}","vec3","ym","(","vec3","yj",",","vec3","yk",",","float","yl",")","{","return","mix","(","yk",",","abs","(","yj","-","yk",")",",","yl",")",";","}","vec3","yq","(","vec3","yn",",","vec3","yo",",","float","yp",")","{","return","mix","(","yo",",","yo","/","(","yn","+","step","(","yn",",","xy",")",")",",","yp",")",";","}","vec3","yu","(","vec3","yr",",","vec3","ys",",","float","yt",")","{","return","mix","(","ys",",","min","(","yr",",","ys",")",",","yt",")",";","}","vec3","yy","(","vec3","yv",",","vec3","yw",",","float","yx",")","{","return","max","(","yx","*","yv",",","yw",")",";","}","vec3","yE","(","vec3","yz",",","vec3","yA",",","float","yB",")","{","vec3","yC",",","yD",";","yC","=","xE","(","yA",")",";","if","(","yC",".","y","!=","xw",")","{","yD","=","xE","(","yz",")",";","yD","=","xI","(","vec3","(","yC",".","x",",","yD",".","yz",")",")",";","return","mix","(","yz",",","yD",",","yB",")",";","}","return","yz",";","}","vec3","yK","(","vec3","yF",",","vec3","yG",",","float","yH",")","{","vec3","yI",",","yJ",";","yI","=","xE","(","yF",")",";","if","(","yI",".","y","!=","xw",")","{","yJ","=","xE","(","yG",")",";","return","xI","(","vec3","(","yI",".","x",",","mix","(","yI",".","y",",","yJ",".","y",",","yH",")",",","yI",".","z",")",")",";","}","return","yF",";","}","vec3","yQ","(","vec3","yL",",","vec3","yM",",","float","yN",")","{","vec3","yO",",","yP",";","yO","=","xE","(","yL",")",";","yP","=","xE","(","yM",")",";","return","xI","(","vec3","(","yO",".","xy",",","mix","(","yO",".","z",",","yP",".","z",",","yN",")",")",")",";","}","vec3","yW","(","vec3","yR",",","vec3","yS",",","float","yT",")","{","vec3","yU",",","yV",";","yU","=","xE","(","yS",")",";","if","(","yU",".","y","!=","xw",")","{","yV","=","xE","(","yR",")",";","yV","=","xI","(","vec3","(","yU",".","xy",",","yV",".","z",")",")",";","return","mix","(","yR",",","yV",",","yT",")",";","}","return","yR",";","}","vec3","za","(","vec3","yX",",","vec3","yY",",","float","yZ",")","{","vec3","y_",";","y_","=","xz","-","(","xz","-","yY",")","*","(","xz","-","yX",")",";","return","mix","(","yX",",","(","(","xz","-","yX",")","*","yY","*","yX",")","+","yX","*","y_",",","yZ",")",";","}","vec3","ze","(","vec3","zb",",","vec3","zc",",","float","zd",")","{","return","zb","+","zd","*","(","2.0","*","zc","-","xx",")",";","}","float","zk","(","float","zf",",","float","zg",",","float","zh",",","float","zi",")","{","float","zj",";","zj","=","xx","-","zi",";","return","(","zj","+","zh","*","zf",")","*","zg",";","}","float","zq","(","float","zl",",","float","zm",",","float","zn",",","float","zo",")","{","float","zp",";","zp","=","xx","-","zo",";","return","xx","-","(","zp","+","zn","*","(","xx","-","zl",")",")","*","(","xx","-","zm",")",";","}","float","zw","(","float","zr",",","float","zs",",","float","zt",",","float","zu",")","{","float","zv",";","zv","=","xx","-","zu",";","return","mix","(","zs","*","(","zv","+","2.0","*","zt","*","zr",")",",","xx","-","(","zv","+","2.0","*","zt","*","(","xx","-","zr",")",")","*","(","xx","-","zs",")",",","step","(","0.5",",","zs",")",")",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","zI","(","in","sampler2D","zC",",","in","vec2","zD",",","in","vec2","zE",")","{","float","zF",",","zG",",","zH",";","zF","=","texture2D","(","zC",",","zD",")",".","r",";","zG","=","zE",".","x",";","zH","=","zE",".","y",";","zG","=","2.0","*","zG","/","(","zG","+","zH","-","(","2.0","*","zF","-","1.0",")","*","(","zH","-","zG",")",")",";","return","zG",";","}"]}]}}