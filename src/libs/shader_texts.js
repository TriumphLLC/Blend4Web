/**
 * Copyright (C) 2014-2016 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_proj_matrix",";","void","main","(",")","{","gl_Position","=","u_view_proj_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"std_enums.glsl"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","float","u_alpha_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_color_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";","varying","vec4","bJ",";","varying","vec4","bK",";","varying","vec4","bL",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","qR",",","qS",",","qT",",","qU",",","qV",";","float","qW",",","qX",";","vec4","qY",";","vec3","qZ",",","q_",",","ra",",","rb",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["qZ","=","u_camera_eye_frag","-","bC",";","qZ","=","normalize","(","qZ",")",";","qR","=","mat4","(","0.0",")",";","qS","=","mat4","(","0.0",")",";","qT","=","mat4","(","0.0",")",";","qU","=","mat4","(","0.0",")",";","qV","=","mat4","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qR","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["qS","=","O","(","u_view_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["qT","=","O","(","u_view_zup_tsr_inverse",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["qU","=","O","(","u_model_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["qV","=","O","(","u_model_zup_tsr_inverse",")",";"]}]}}]},{type:"textline",tokens:["qQ","(","qZ",",","qR",",","qS",",","qT",",","qU",",","qV",",","q_",",","ra",",","rb",",","qY",",","qW",")",";","qW","=","qW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["qW","=","(","texture2D","(","u_sampler",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qX","=","u_alpha_factor","*","qW",";","qX","+=","(","1.0","-","step","(","0.0",",","qX",")",")",";","qW","=","mix","(","qX",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qW","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","qW","<","0.5",")","discard",";","qW","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tz",";","float","tA",",","tB",",","tC",";","vec3","tD",",","tE",",","tF",",","tG",",","tH",",","tI",";","mat4","tJ",",","tK",",","tL",";","tJ","=","O","(","u_view_tsr",")",";","tD","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["tE","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tF","=","vec3","(","a_tangent",")",";","tG","=","a_tangent","[","3","]","*","cross","(","tE",",","tF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tF","=","vec3","(","0.0",")",";","tG","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tE","=","vec3","(","0.0",")",";","tF","=","vec3","(","0.0",")",";","tG","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","mix","(","tD",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["tE","=","mix","(","tE",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","vec3","(","a_tangent",")",";","tI","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","tH",")",";","tF","=","mix","(","tF",",","tH",",","u_va_frame_factor",")",";","tG","=","mix","(","tG",",","tI",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sF","(","tD",",","tF",",","tG",",","tE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tG","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tG","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tK","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tF","=","(","tK","*","vec4","(","tG",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tL","=","ry","(","u_camera_eye",",","tF",",","tJ",",","tK",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tL","=","rs","(","u_camera_eye",",","tF",",","tJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tL","=","tL","*","rk","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","tF",")",";"]}]}}]},{type:"textline",tokens:["c","tM","=","rF","(","tD","-","tG",",","tG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tL",")",";","tM",".","b","=","tF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","tM","=","rF","(","tD",",","tG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tK",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tt","(","tM",".","a",",","tM",".","b",",","tE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tE","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tE","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tt","(","tM",".","a",",","tM",".","b",",","tE",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rI","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","tM",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","tM",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","(","dot","(","cross","(","tM",".","e",",","tM",".","c",")",",","tM",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","tM",".","c",",","tA",")",";"]}]}}]},{type:"textline",tokens:["bD","=","tJ","*","vec4","(","tM",".","a",",","1.0",")",";","tz","=","u_proj_matrix","*","bD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["tz",".","xy","+=","u_subpixel_jitter","*","tz",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","tz",".","x",";","tB","=","tz",".","y",";","tC","=","tz",".","w",";","bG",".","x","=","(","tA","+","tC",")","/","2.0",";","bG",".","y","=","(","tB","+","tC",")","/","2.0",";","bG",".","z","=","tC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["ty","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","tJ","*","vec4","(","tM",".","a",",","1.0",")",";","}"]}]},exports["debug_view.glslf"] = {type:"group",parts:[{type:"define",name:"DV_NONE",tokens:["0"]},{type:"define",name:"DV_OPAQUE_WIREFRAME",tokens:["1"]},{type:"define",name:"DV_TRANSPARENT_WIREFRAME",tokens:["2"]},{type:"define",name:"DV_FRONT_BACK_VIEW",tokens:["3"]},{type:"define",name:"DV_DEBUG_SPHERES",tokens:["4"]},{type:"define",name:"DV_CLUSTERS_VIEW",tokens:["5"]},{type:"define",name:"DV_BATCHES_VIEW",tokens:["6"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_debug_view_mode",";","uniform","float","u_cluster_id",";","uniform","float","u_batch_debug_id",";","uniform","float","u_debug_colors_seed",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","tz",";","const","float","tA","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","tB","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","tB","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","tC","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","tD","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","tE","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["float","tH","(",")","{","vec3","tF",";","float","tG",";","tG","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tF","=","sign","(","tz","-","vec3","(","0.02","*","tA",")",")",";","if","(","tF",".","x","<","0.0","||","tF",".","y","<","0.0","||","tF",".","z","<","0.0",")","tG","=","0.0",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["tF","=","fwidth","(","tz",")",";","tF","=","smoothstep","(","vec3","(","0.0",")",",","tF","*","tA",",","tz",")",";","tG","=","min","(","min","(","tF",".","x",",","tF",".","y",")",",","tF",".","z",")",";","tG","=","clamp","(","tG",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["return","tG",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","tI",",","tJ",";","vec3","tK",",","tL",";","tK","=","vec3","(","0.0",")",";","tI","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["tL","=","sign","(","tz","-","vec3","(","0.02","*","tA",")",")",";","if","(","tL",".","x","<","0.0","||","tL",".","y","<","0.0","||","tL",".","z","<","0.0",")","{","tK","=","tB",";","tI","=","1.0",";","}","else","discard",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_debug_view_mode","==","DV_OPAQUE_WIREFRAME",")","{","tJ","=","tH","(",")",";","tK","=","vec3","(","mix","(","u_wireframe_edge_color",",","tE",",","tJ",")",")",";","tI","=","1.0",";","}","else","if","(","u_debug_view_mode","==","DV_TRANSPARENT_WIREFRAME",")","{","tJ","=","tH","(",")",";","tK","=","u_wireframe_edge_color",";","tI","=","mix","(","1.0",",","0.0",",","tJ",")",";","}","else","if","(","u_debug_view_mode","==","DV_FRONT_BACK_VIEW",")","{","tJ","=","tH","(",")",";","if","(","gl_FrontFacing",")","tK","=","mix","(","u_wireframe_edge_color",",","tC",",","tJ",")",";","else","tK","=","mix","(","u_wireframe_edge_color",",","tD",",","tJ",")",";","tI","=","1.0",";","}","else","if","(","u_debug_view_mode","==","DV_CLUSTERS_VIEW",")","{","tJ","=","u_cluster_id","+","u_debug_colors_seed","+","2.0",";","tK","=","vec3","(","fract","(","tJ","*","19.73",")",",","fract","(","tJ","*","6.34",")",",","fract","(","tJ","*","1.56",")",")",";","tI","=","1.0",";","}","else","if","(","u_debug_view_mode","==","DV_BATCHES_VIEW",")","{","tJ","=","u_batch_debug_id","+","u_debug_colors_seed",";","tK","=","vec3","(","fract","(","tJ","*","19.73",")",",","fract","(","tJ","*","6.34",")",",","fract","(","tJ","*","1.56",")",")",";","tI","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["bu","(","tK",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","tK",",","tI",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","tK",",","tI",")",";","}"]}]},exports["debug_view.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","tz",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","uf",",","ug",",","uh",",","ui",",","uj",";","mat4","uk",",","ul",",","um",";","uk","=","O","(","u_view_tsr",")",";","ul","=","O","(","u_model_tsr",")",";","if","(","a_polyindex","==","0.0",")","tz","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","tz","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","tz","=","vec3","(","0.0",",","0.0",",","1.0",")",";","uf","=","a_position",";","ug","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","un","=","rF","(","uf",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ul",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uf","=","mix","(","uf",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","vec3","(","0.0",")",";","ui","=","vec3","(","0.0",")",";","sF","(","uf",",","uh",",","ui",",","ug",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["ui","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ui","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","un","=","ue","(","uf",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ui",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","uk",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","(","ul","*","vec4","(","ui",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["um","=","ry","(","u_camera_eye",",","uh",",","uk",",","ul",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["um","=","rs","(","u_camera_eye",",","uh",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uj","=","(","ul","*","vec4","(","ui",",","1.0",")",")",".","xyz",";","um","=","um","*","rk","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","uj",")",";"]}]}}]},{type:"textline",tokens:["c","un","=","rF","(","uf","-","ui",",","ui",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","um",")",";","un",".","b","=","uh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","un","=","rF","(","uf",",","ui",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ul",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tt","(","un",".","a",",","un",".","b",",","ug",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","uk","*","vec4","(","un",".","a",",","1.0",")",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","uf",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uf",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uf",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","uf",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","uf",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","uf",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","uf",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uf",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uf",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","ug",";","vec3","uh",";","mat4","ui",",","uj",",","uk",";","ui","=","O","(","u_view_tsr",")",";","uj","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","(","uj","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","uk","=","rs","(","u_camera_eye",",","uh",",","ui",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uk","=","uk","*","rk","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","ul","=","rF","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uk",")",";","ul",".","b","=","uh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","ul","=","rF","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uj",")",";"]}]}}]},{type:"textline",tokens:["ug","=","u_proj_matrix","*","ui","*","vec4","(","ul",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uf","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uf","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uf","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","ug",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","ug",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","float","uh",";"]},{type:"include",file:"color_util.glslf"},{type:"include",file:"halo_color.glslf"},{type:"textline",tokens:["void","main","(",")","{","float","uT",";","vec3","uU",";","vec4","uV",";","uV","=","uS","(",")",";","uU","=","uV",".","rgb",";","uT","=","uV",".","a",";","bu","(","uU",")",";","bx","(","uU",",","uT",")",";","gl_FragColor","=","vec4","(","uU",",","uT",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","attribute","float","a_random_vals",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","bM",";","varying","float","uh",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ug",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","uT",",","uU",";","vec3","uV",";","mat4","uW",",","uX",",","uY",";","uW","=","O","(","u_view_tsr",")",";","uX","=","O","(","u_model_tsr",")",";","uV","=","(","uX","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","bM","=","a_halo_bb_vertex","*","2.0",";","uh","=","a_random_vals",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uX","=","qX","(","uV",",","uW",")",";","uY","=","uW",";","uY","[","3","]","[","0","]","=","0.0",";","uY","[","3","]","[","1","]","=","0.0",";","uY","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uX","=","qX","(","uV",",","uW",")",";"]}]}}]},{type:"textline",tokens:["uT","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","uT","=","uX","*","uT",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uU","=","u_proj_matrix","*","uY","*","uT",";","uU",".","z","=","0.99999","*","uU",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ug","=","uT",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uU","=","u_proj_matrix","*","uW","*","uT",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uU",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","float","uT",";","vec3","uU",";","uU","=","u_diffuse_color",".","xyz",";","uT","=","u_diffuse_color",".","a",";","bu","(","uU",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","uU",",","uT",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uU",",","uT",")",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_direction",";","uniform","mat3","u_model_tsr",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_line_width",";"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","main","(",")","{","mat2","uT",";","float","uU",";","vec2","uV",",","uW",";","vec4","uX",";","mat4","uY",",","uZ",";","uY","=","O","(","u_view_tsr",")",";","uZ","=","O","(","u_model_tsr",")",";","c","u_","=","rF","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","normalize","(","a_direction",")",",","uZ",")",";","uX","=","u_proj_matrix","*","uY","*","vec4","(","u_",".","a",",","1.0",")",";","uX",".","xyz","/=","uX",".","w",";","uV","=","(","u_proj_matrix","*","uY","*","vec4","(","u_",".","e",",","0.0",")",")",".","xy",";","uU","=","M_PI","/","2.0",";","uT","=","mat2","(","cos","(","uU",")",",","sin","(","uU",")",",","-","sin","(","uU",")",",","cos","(","uU",")",")",";","uV","=","uT","*","normalize","(","uV",")",";","uW","=","(","u_line_width","/","u_height",")","*","vec2","(","u_proj_matrix","[","0","]","[","0","]","/","u_proj_matrix","[","1","]","[","1","]",",","1.0",")",";","gl_Position","=","vec4","(","uX",".","xy","+","uV",".","xy","*","uW","/","2.0",",","uX",".","z",",","1.0",")",";","gl_Position","*=","uX",".","w",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","vz",";","mat4","vA",",","vB",",","vC",",","vD",",","vE",";","vec4","vF",";","vec3","vG",",","vH",",","vI",",","vJ",",","vK",";","float","vL",",","vM",",","vN",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vL","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vM","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vG","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["vH","=","normalize","(","u_camera_eye_frag","-","bC",")",";","vA","=","mat4","(","0.0",")",";","vB","=","mat4","(","0.0",")",";","vC","=","mat4","(","0.0",")",";","vD","=","mat4","(","0.0",")",";","vE","=","mat4","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vA","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","u_view_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["vC","=","O","(","u_view_zup_tsr_inverse",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["vD","=","O","(","u_model_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["vE","=","O","(","u_model_zup_tsr_inverse",")",";"]}]}}]},{type:"textline",tokens:["qQ","(","vH",",","vA",",","vB",",","vC",",","vD",",","vE",",","vI",",","vJ",",","vK",",","vF",",","vN",")",";","vI","=","vI",";","vN","=","vN",";","vK","=","vK",";","vF","=","vF",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["vI","=","max","(","vI","-","sqrt","(","0.01","*","-","min","(","vM",",","0.0",")",")",",","0.5","*","vI",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","vI",",","vM",",","u_time",",","vF",",","vK",",","u_sun_direction",",","vG",",","u_sun_quaternion",",","bC",",","vL",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","vN","<","0.5",")","discard",";","vN","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vN","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vy","(","vI",",","length","(","bD",")",",","vH",",","vM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vy","(","vI",",","length","(","bD",")",",","vH",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vz","=","texture2DProj","(","u_shadow_mask",",","bG",")",".","rg",";","vM","=","vz",".","g",";","vI","=","vec3","(","vM",")",";"]}]}}]},{type:"textline",tokens:["bu","(","vI",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","vI",",","vN",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","vI",",","vN",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat3","u_view_tsr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD","DYNAMIC_GRASS",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vz",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","vN",",","vO",";","float","vP",";","vec3","vQ",",","vR",",","vS",",","vT",",","vU",",","vV",",","vW",";","mat4","vX",",","vY",",","vZ",",","v_",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vX","=","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vY","=","O","(","u_view_tsr",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vX","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["vZ","=","O","(","u_model_tsr",")",";","vQ","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vR","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vR","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vS","=","vec3","(","a_tangent",")",";","vT","=","a_tangent","[","3","]","*","cross","(","vR",",","vS",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vU","=","(","vZ","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vV","=","normalize","(","(","vZ","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vU","=","vU","-","u_camera_eye",";","vT","=","cross","(","vU",",","vV",")",";","vS","=","cross","(","vV",",","vT",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vS","=","vec3","(","0.0",")",";","vT","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["vQ","=","mix","(","vQ",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vR","=","mix","(","vR",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vV","=","vec3","(","a_tangent",")",";","vU","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vV",")",";","vS","=","mix","(","vS",",","vV",",","u_va_frame_factor",")",";","vT","=","mix","(","vT",",","vU",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sF","(","vQ",",","vS",",","vT",",","vR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vU","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vU","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","wa","=","ue","(","vQ",",","vS",",","vT",",","vR",",","vU",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","vX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vV","=","(","vZ","*","vec4","(","vU",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["v_","=","ry","(","u_camera_eye",",","vV",",","vX",",","vZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["v_","=","rs","(","u_camera_eye",",","vV",",","vX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vW","=","(","vZ","*","vec4","(","vU",",","1.0",")",")",".","xyz",";","v_","=","v_","*","rk","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vW",")",";"]}]}}]},{type:"textline",tokens:["c","wa","=","rF","(","vQ","-","vU",",","vU",",","vS",",","vT",",","vR",",","v_",")",";","wa",".","b","=","vV",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","wa","=","rF","(","vQ",",","vU",",","vS",",","vT",",","vR",",","vZ",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vP","=","(","dot","(","cross","(","wa",".","e",",","wa",".","c",")",",","wa",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","wa",".","c",",","vP",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tt","(","wa",".","a",",","wa",".","b",",","vR",")",";"]}]}}]},{type:"textline",tokens:["bC","=","wa",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","wa",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vz","=","u_camera_eye","-","wa",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rI","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vA","=","wa",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vA","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vN","=","vX","*","vec4","(","wa",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vO","=","vY","*","vec4","(","wa",".","a",",","1.0",")",";","bD","=","vO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bD","=","vN",";"]}]}}]}]}}]},{type:"textline",tokens:["vO","=","u_proj_matrix","*","vN",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["vO",".","xy","+=","u_subpixel_jitter","*","vO",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","vO",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vM","(","wa",".","a",",","wa",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","vN",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["ty","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vO",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";","varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vz",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xS",",","xT",",","xU",",","xV",";","mat4","xW",";","mat3","xX",";","vec2","xY",",","xZ",",","x_",",","ya",";","vec3","yb",",","yc",",","yd",",","ye",",","yf",",","yg",",","yh",",","yi",",","yj",";","float","yk",",","yl",",","ym",",","yn",",","yo",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["yk","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["yl","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["yb","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xY","=","bM",";"]}]}}]},{type:"textline",tokens:["yc","=","normalize","(","bE",")",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["yc","=","yc",";","else","yc","=","-","yc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["yd","=","cross","(","yc",",","bF",".","xyz",")","*","bF",".","w",";","xX","=","mat3","(","bF",".","xyz",",","yd",",","yc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xW","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xZ","=","normalize","(","xW","*","vec4","(","bE",",","0.0",")",")",".","st",";","xZ","=","xZ","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yk","<","PARALLAX_LOD_DIST",")","{","ym","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","yk",")",",","0.0",",","1.0",")",";","ym","=","u_parallax_scale","*","ym",";","yd","=","normalize","(","vz","*","xX",")",";","yn","=","1.0","/","PARALLAX_STEPS",";","x_","=","yd",".","xy","*","ym","/","(","PARALLAX_STEPS","*","yd",".","z",")",";","ym","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ya","=","xZ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ya","=","xY",";"]}]}}]},{type:"textline",tokens:["yo","=","texture2D","(","u_normalmap0",",","ya",")",".","a",";","for","(","float","yp","=","1.0",";","yp","<=","PARALLAX_STEPS",";","yp","++",")","{","if","(","yo","<","ym",")","{","ym","-=","yn",";","ya","-=","x_",";","yo","=","texture2D","(","u_normalmap0",",","ya",")",".","a",";","}","}","x_","=","ya","+","x_",";","yn","=","texture2D","(","u_normalmap0",",","x_",")",".","a","-","(","ym","+","yn",")",";","ym","=","yo","-","ym",";","yn","=","ym","/","(","ym","-","yn",")",";","ya","=","yn","*","x_","+","(","1.0","-","yn",")","*","ya",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xY","+=","ya","-","xZ",";"]}]}}]},{type:"textline",tokens:["xZ","=","ya",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xZ","+=","ya","-","xY",";"]}]}}]},{type:"textline",tokens:["xY","=","ya",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xS","=","texture2D","(","u_normalmap0",",","xZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xS","=","texture2D","(","u_normalmap0",",","xY",")",";"]}]}}]},{type:"textline",tokens:["yd","=","xS",".","rgb","-","0.5",";","yd","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","yd",",","u_normal_factor",")",";","yd","=","xX","*","yd",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yd","=","yc",";"]}]}}]},{type:"textline",tokens:["yd","=","normalize","(","yd",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xZ","=","normalize","(","xW","*","vec4","(","yd",",","0.0",")",")",".","st",";","xZ","=","xZ","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["yc","=","normalize","(","vz",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ye","=","vA",";","br","(","ye",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xS","=","vec4","(","ye",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xS","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["yn","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xT","=","texture2D","(","u_colormap0",",","xZ",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xT","=","texture2D","(","u_colormap0",",","xY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["br","(","xT",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xU","=","texture2D","(","u_colormap1",",","xZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xU","=","texture2D","(","u_colormap1",",","xY",")",";"]}]}}]},{type:"textline",tokens:["br","(","xU",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xV","=","texture2D","(","u_stencil0",",","xZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xV","=","texture2D","(","u_stencil0",",","xY",")",";"]}]}}]},{type:"textline",tokens:["xT","=","mix","(","xT",",","xU",",","xV",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xS",".","rgb","=","mix","(","xS",".","rgb",",","xT",".","rgb",",","u_diffuse_color_factor",")",";","ym","=","u_alpha_factor","*","xT",".","a",";","ym","+=","(","1.0","-","step","(","0.0",",","ym",")",")",";","xS",".","a","=","mix","(","ym",",","1.0",",","u_diffuse_color",".","a",")",";","yn","=","xT",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xS",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xT",".","rgb",",","u_diffuse_color_factor",")",";","xS",".","a","=","xT",".","a",";","yn","=","xT",".","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["ye","=","xS",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yf","=","u_diffuse_intensity","*","xS",".","rgb",";","yg","=","u_environment_energy","*","dS","(","yd",")",";","yg","=","u_ambient","*","yg",";","xT","=","du","(","yf",")",";","yh","=","u_emit","*","xS",".","rgb",";","yi","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["yj","=","vec3","(","yn",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yj","=","texture2D","(","u_specmap0",",","xZ",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yj","=","texture2D","(","u_specmap0",",","xY",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["br","(","yj",".","rgb",")",";","yi","=","mix","(","yi",",","yj",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["yn","=","u_specular_params","[","0","]",";","xY","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","yi","=","yn","*","yi",";","xR","(","yh",",","yg",",","yf",",","yi",",","bC",",","yd",",","yc",",","xY",",","u_diffuse_params",",","xT",",","0.0",",","vec4","(","0.0",")",",","ye",",","yj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","ye",",","yc",",","yd",",","u_reflect_factor",",","xW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","ye",",","yc",",","yd",",","u_reflect_factor",",","mat4","(","0.0",")",")",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","ye",",","yc",",","yd",",","0.0",",","xW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","ye",",","yc",",","yd",",","0.0",",","mat4","(","0.0",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ye","+=","yj",";"]}]}}]},{type:"textline",tokens:["yn","=","xS",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["ye","=","max","(","ye","-","sqrt","(","0.01","*","-","min","(","yl",",","0.0",")",")",",","0.5","*","ye",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","ye",",","yl",",","u_time",",","xT",",","yd",",","u_sun_direction",",","yb",",","u_sun_quaternion",",","bC",",","yk",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yn","<","0.5",")","discard",";","yn","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ym","=","max","(","max","(","yj",".","r",",","yj",".","g",")",",","yj",".","b",")","*","u_specular_alpha",";","yn","=","xS",".","a","*","(","1.0","-","ym",")","+","ym",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yn","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["xY","=","-","(","xW","*","vec4","(","yd",",","0.0",")",")",".","xy",";","ye","=","mix","(","ef","(","bG",",","xY","*","u_refr_bump",")",",","ye",",","yn",")",";","yn","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vy","(","ye",",","yk",",","yc",",","yl",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vy","(","ye",",","yk",",","yc",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","ye",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","ye",",","yn",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ye",",","yn",")",";","}"]}]},exports["particle_system.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","NODES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_time",";","uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"particles_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","mat4","Kr",",","Ks",",","Kt",",","Ku",",","Kv",";","float","Kw",",","Kx",",","Ky",";","vec4","Kz",";","vec3","KA",",","KB",",","KC",",","KD",";","KA","=","normalize","(","u_camera_eye_frag","-","bC",")",";","Kr","=","mat4","(","0.0",")",";","Ks","=","mat4","(","0.0",")",";","Kt","=","mat4","(","0.0",")",";","Ku","=","mat4","(","0.0",")",";","Kv","=","mat4","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kr","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["Ks","=","O","(","u_view_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["Kt","=","O","(","u_view_zup_tsr_inverse",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["Ku","=","O","(","u_model_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["Kv","=","O","(","u_model_zup_tsr_inverse",")",";"]}]}}]},{type:"textline",tokens:["Kq","(","KA",",","Kr",",","Ks",",","Kt",",","Ku",",","Kv",",","KB",",","KC",",","KD",",","Kz",",","Kw",")",";","KB","=","KB",";","Kw","=","Kw",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","Kw","<","0.5",")","discard",";","Kw","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Kw","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vy","(","KB",",","length","(","bD",")",",","KA",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Kx","=","-","bD",".","z","/","u_view_max_depth",";","Kz","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Ky","=","Z","(","Kz",")",";","Kx","=","Ky","-","Kx",";","Kx","=","u_view_max_depth","/","SOFT_STRENGTH","*","Kx",";","Kw","=","Kw","*","min","(","Kx",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","KB",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","KB",",","Kw",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","KB",",","Kw",")",";","}"]}]},exports["particle_system.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","vec3","a_p_data",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"textline",tokens:["attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","float","u_p_tilt",";","uniform","float","u_p_tilt_rand",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1},"NODES","HALO_PARTICLES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_COLOR_RAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Kr",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uh",";"]}]}}]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"particles.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"particles_nodes.glslv"}]}}]},{type:"textline",tokens:["float","Le","(","vec2","Lc",",","vec2","Ld",")","{","return","(","atan","(","Ld",".","y",",","Ld",".","x",")","-","atan","(","Lc",".","y",",","Lc",".","x",")",")",";","}","void","main","(",")","{","vec3","Lf",",","Lg",";","vec4","Lh",",","Li",",","Lj",";","float","Lk",",","Ll",",","Lm",";","mat4","Ln",",","Lo",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["Ks","Lp",";","Lp","=","KU","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","Lk","=","Lp",".","e",";","Lo","=","qX","(","Lp",".","b",",","Ln",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","Lk","=","Lp",".","e",";","Lo","=","w","(",")",";","Lo","[","3","]","=","vec4","(","Lp",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","Lk","=","Lp",".","e",";","Lo","=","A","(","radians","(","90.0",")",")",";","Lo","[","3","]","=","vec4","(","Lp",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","Lk","=","Le","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","Lp",".","e",";","Lo","=","y","(","radians","(","-","90.0",")",")",";","Lo","[","3","]","=","vec4","(","Lp",".","b",",","1.0",")",";","}","Lh","=","vec4","(","a_p_bb_vertex","*","2.0","*","Lp",".","a","*","u_p_size",",","0.0",",","1.0",")",";","Ll","=","a_p_data","[","2","]",";","Lm","=","u_p_tilt","*","u_p_tilt_rand","*","(","2.0","*","Ll","-","1.0",")",";","Lm","=","(","Lm","+","u_p_tilt",")","*","M_PI",";","Lh","=","Lo","*","C","(","Lm","+","Lk",")","*","Lh",";","Li","=","Ln","*","Lh",";","Lj","=","u_proj_matrix","*","Li",";"]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","Ll",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lf","=","vec3","(","a_tangent",")",";","Lg","=","a_tangent","[","3","]","*","cross","(","a_normal",",","Lf",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lf","=","vec3","(","0.0",")",";","Lg","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["c","Lq","=","rF","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Lf",",","Lg",",","vec3","(","0.0",")",",","Lo","*","C","(","Lk",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","(","dot","(","cross","(","a_normal",",","Lq",".","c",")",",","Lq",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","Lq",".","c",",","Lk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["Lb","(","Lp",".","b",",","Lp",".","f",",","Lp",".","g",",","Lp",".","h",",","Lp",".","a",",","a_p_bb_vertex",",","a_p_data","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_p_bb_vertex","+","0.5",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_p_bb_vertex","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Kr","=","Lp",".","c",";"]}]}}]},{type:"textline",tokens:["vA","=","Lp",".","d",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","Lj",".","x",";","Ll","=","Lj",".","y",";","Lm","=","Lj",".","w",";","bG",".","x","=","(","Lk","+","Lm",")","/","2.0",";","bG",".","y","=","(","Ll","+","Lm",")","/","2.0",";","bG",".","z","=","Lm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","Li",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Lj",";","bC","=","Lh",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vz","=","u_camera_eye","-","Lh",".","xyz",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["particle_system_stack.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","NODES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_size",";","uniform","vec3","u_halo_rings_color",";","uniform","float","u_halo_hardness",";","uniform","vec3","u_halo_lines_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Kr",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uh",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ug",";"]}]}}]}]}}]},{type:"include",file:"lighting_nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"environment.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"halo_color.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Lc",";","float","Ld",",","Le",",","Lf",";","vec4","Lg",",","Lh",";","vec3","Li",",","Lj",",","Lk",",","Ll",",","Lm",",","Ln",",","Lo",",","Lp",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Li","=","normalize","(","vz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Lg","=","uS","(",")",";","Lj","=","Lg",".","rgb","*","vA",";","Ld","=","0.9","*","length","(","bM",")",";","Ld","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","Ld",")",";","Ld","=","Lg",".","a","*","(","1.0","-","Ld",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lg","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","texture2D","(","u_sampler",",","bM",")",";","br","(","Lh",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lg",".","rgb","=","mix","(","Lg",".","rgb",",","Lh",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lg",".","rgb","*=","mix","(","vec3","(","1.0",")",",","Lh",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["Lg",".","a","=","Lh",".","a",";"]}]}}]},{type:"textline",tokens:["Lg",".","rgb","*=","vA",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","u_diffuse_intensity","*","Lg",".","rgb",";","Ll","=","u_emit","*","Lg",".","rgb",";","Lm","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","u_environment_energy","*","dS","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","u_environment_energy","*","dS","(","Lm",")",";"]}]}}]},{type:"textline",tokens:["Ln","=","u_ambient","*","Ln",";","Le","=","u_specular_params","[","0","]",";","Lc","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","Lo","=","Le","*","u_specular_color",";","xR","(","Ll",",","Ln",",","Lk",",","Lo",",","bC",",","Lm",",","Li",",","Lc",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","Lj",",","Lp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lj","=","Lg",".","rgb",";"]}]}}]},{type:"textline",tokens:["Ld","=","Lg",".","a","*","Kr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vy","(","Lj",",","length","(","bD",")",",","Li",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Le","=","-","bD",".","z","/","u_view_max_depth",";","Lg","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Lf","=","Z","(","Lg",")",";","Le","=","Lf","-","Le",";","Le","=","u_view_max_depth","/","SOFT_STRENGTH","*","Le",";","Ld","=","Ld","*","min","(","Le",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","Lj",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","Lj",",","Ld",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Lj",",","Ld",")",";","}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","Lc",";","const","float","Ld","=","0.99",";","const","float","Le","=","1.8",";","const","int","Lf","=","8",";","float","Ll","(","vec3","Lg",",","vec3","Lh",")","{","float","Li",",","Lj",",","Lk",";","Li","=","dot","(","Lh",",","Lh",")",";","Lj","=","2.0","*","dot","(","Lh",",","Lg",")",";","Lk","=","dot","(","Lg",",","Lg",")","-","1.0",";","Li","=","Lj","*","Lj","-","4.0","*","Li","*","Lk",";","Li","=","sqrt","(","Li",")",";","Li","=","(","-","Lj","-","Li",")","/","2.0",";","Li","=","Lk","/","Li",";","return","Li",";","}","float","Ls","(","float","Lm",",","float","Ln",")","{","float","Lo",",","Lp",",","Lq",",","Lr",";","Lo","=","3.0","*","(","1.0","-","Ln","*","Ln",")",";","Lp","=","2.0","*","(","2.0","+","Ln","*","Ln",")",";","Lq","=","1.0","+","Lm","*","Lm",";","Lr","=","pow","(","1.0","+","Ln","*","Ln","-","2.0","*","Ln","*","Lm",",","1.5",")",";","Lr","=","max","(","Lr",",","0.00001",")",";","return","(","Lo","/","Lp",")","*","(","Lq","/","Lr",")",";","}","float","Ly","(","vec3","Lt",",","vec3","Lu",",","float","Lv",")","{","vec3","Lw",";","float","Lx",";","Lx","=","dot","(","Lu",",","-","Lt",")",";","if","(","Lx","<","0.0",")","{","return","1.0",";","}","Lw","=","Lt","+","Lx","*","Lu",";","if","(","length","(","Lw",")","<","Lv",")","{","return","0.0",";","}","else","if","(","length","(","Lw",")",">=","Lv",")","{","Lw","=","normalize","(","Lw",")","*","Lv","-","Lt",";","Lx","=","acos","(","dot","(","normalize","(","Lw",")",",","Lu",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","Lx","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","LC","(","float","Lz",",","vec3","LA",",","float","LB",")","{","return","LA","-","LA","*","pow","(","u_sky_color",",","vec3","(","LB","/","Lz",")",")",";","}","void","main","(",")","{","float","LD",",","LE",",","LF",",","LG",",","LH",",","LI",",","LJ",",","LK",",","LL",";","vec3","LM",",","LN",",","LO",",","LP",",","LQ",",","LR",",","LS",";","LM","=","normalize","(","Lc",")",";","LN","=","u_sun_direction",";","LD","=","dot","(","LM",",","LN",")",";","LE","=","Ls","(","LD",",","-","0.01",")","*","u_rayleigh_brightness","*","LN",".","y",";","LF","=","Ls","(","LD","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","LN",".","y",")",";","LD","=","smoothstep","(","0.0",",","100.0",",","Ls","(","LD",",","0.9995",")",")","*","u_spot_brightness",";","LO","=","vec3","(","0.0",",","Ld",",","0.0",")",";","LG","=","Ll","(","LO",",","LM",")",";","LH","=","LG","/","float","(","Lf",")",";","LI","=","Ly","(","LO",",","LM",",","Ld","-","0.3",")",";","LP","=","vec3","(","0.0",",","0.0",",","0.0",")",";","LQ","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","LT","=","0",";","LT","<","Lf",";","LT","++",")","{","LJ","=","LH","*","float","(","LT",")",";","LR","=","LO","+","LM","*","LJ",";","LK","=","Ly","(","LR",",","LN",",","Ld","-","0.2",")",";","LL","=","Ll","(","LR",",","LN",")",";","LS","=","LC","(","LL",",","vec3","(","Le",")",",","u_scatter_strength",")","*","LK",";","LP","+=","LC","(","sqrt","(","LJ",")",",","u_sky_color","*","LS",",","u_rayleigh_strength",")",";","LQ","+=","LC","(","LJ",",","LS",",","u_mie_strength",")",";","}","LP","=","LP","*","LI","*","pow","(","LG",",","u_rayleigh_collection_power",")","/","float","(","Lf",")",";","LQ","=","(","LQ","*","LI","*","pow","(","LG",",","u_mie_collection_power",")",")","/","float","(","Lf",")",";","LP","=","vec3","(","LD","*","LQ","+","LF","*","LQ","+","LE","*","LP",")",";","bu","(","LP",")",";","gl_FragColor","=","vec4","(","LP",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","Lc",";","void","main","(",")","{","vec4","Ld",",","Le",";","Ld","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","Le","=","u_cube_view_matrix","*","Ld",";","Lc","=","Le",".","xyz",";","gl_Position","=","Ld",";","}"]}]},exports["shadow.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","Ld",",","Le",",","Lf",",","Lg",",","Lh",";","float","Li",",","Lj",";","vec4","Lk",";","vec3","Ll",",","Lm",",","Ln",",","Lo",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["Ll","=","u_camera_eye_frag","-","bC",";","Ll","=","normalize","(","Ll",")",";","Ld","=","mat4","(","0.0",")",";","Le","=","mat4","(","0.0",")",";","Lf","=","mat4","(","0.0",")",";","Lg","=","mat4","(","0.0",")",";","Lh","=","mat4","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ld","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["Le","=","O","(","u_view_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["Lf","=","O","(","u_view_zup_tsr_inverse",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["Lg","=","O","(","u_model_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","O","(","u_model_zup_tsr_inverse",")",";"]}]}}]},{type:"textline",tokens:["qQ","(","Ll",",","Ld",",","Le",",","Lf",",","Lg",",","Lh",",","Lm",",","Ln",",","Lo",",","Lk",",","Li",")",";","Li","=","Li",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["Li","=","(","texture2D","(","u_colormap0",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lj","=","u_alpha_factor","*","Li",";","Lj","+=","(","1.0","-","step","(","0.0",",","Lj",")",")",";","Li","=","mix","(","Lj",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Li","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Li","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","dr","(","bD",".","z",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","*=","clamp","(","bF",".","r",",","0.999999999",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["shadow.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Ld",";","vec4","Le",",","Lf",";","float","Lg",";","vec3","Lh",",","Li",",","Lj",",","Lk",",","Ll",",","Lm",";","mat4","Ln",",","Lo",",","Lp",",","Lq",";","Ln","=","O","(","u_view_tsr",")",";","Lh","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["Li","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Li","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Lj","=","vec3","(","a_tangent",")",";","Lk","=","a_tangent","[","3","]","*","cross","(","Li",",","Lj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lj","=","vec3","(","0.0",")",";","Lk","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","mix","(","Lh",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["Li","=","mix","(","Li",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["Ll","=","vec3","(","a_tangent",")",";","Lm","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","Ll",")",";","Lj","=","mix","(","Lj",",","Ll",",","u_va_frame_factor",")",";","Lk","=","mix","(","Lk",",","Lm",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sF","(","Lh",",","Lj",",","Lk",",","Li",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","Lr","=","ue","(","Lh",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Li",",","Lk",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","Ln",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lo","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["Lj","=","(","Lo","*","vec4","(","Lk",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lp","=","O","(","u_shadow_cast_billboard_view_tsr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lp","=","Ln",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lq","=","ry","(","u_camera_eye",",","Lj",",","Lp",",","Lo",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lq","=","rs","(","u_camera_eye",",","Lj",",","Lp",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lq","=","Lq","*","rk","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","Lj",")",";"]}]}}]},{type:"textline",tokens:["c","Lr","=","rF","(","Lh","-","Lk",",","Lk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Li",",","Lq",")",";","Lr",".","b","=","Lj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","Lr","=","rF","(","Lh",",","Lk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Li",",","Lo",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Li","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Li","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tt","(","Lr",".","a",",","Lr",".","b",",","Li",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","Lr",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","Lr",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["Lg","=","(","dot","(","cross","(","Lr",".","e",",","Lr",".","c",")",",","Lr",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","Lr",".","c",",","Lg",")",";"]}]}}]}]}}]},{type:"textline",tokens:["Le","=","Ln","*","vec4","(","Lr",".","a",",","1.0",")",";","Lf","=","u_proj_matrix","*","Le",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["Lf",".","xy","+=","u_subpixel_jitter","*","Lf",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","Lf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["ty","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rI","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vM","(","Lr",".","a",",","Lr",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","Le",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ld","=","(","u_proj_matrix","*","Ln","[","3","]",")",".","xy",";","Lg","=","SHADOW_TEX_RES","/","2.0",";","Ld","=","floor","(","Ld","*","Lg","+","0.5",")","/","Lg","-","Ld",";","Lf",".","xy","+=","Ld",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Lf",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","bM",";","void","main","(",")","{","vec4","Ld",";","Ld","=","texture2D","(","u_sampler",",","bM",")",";","bu","(","Ld",".","rgb",")",";","bx","(","Ld",".","rgb",",","Ld",".","a",")",";","gl_FragColor","=","Ld",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","bM",";","void","main","(",")","{","vec2","Ld",";","float","Le",";","vec4","Lf",";","vec3","Lg",";","mat4","Lh",";","Lh","=","O","(","u_view_tsr",")",";","bM","=","a_texcoord",";","Lg","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","Lf","=","u_proj_matrix","*","Lh","*","vec4","(","Lg",",","0.0",")",";","Lf",".","x","/=","Lf",".","w",";","Lf",".","y","/=","Lf",".","w",";","Lf","+=","99999.0","*","step","(","Lf",".","z",",","0.0",")",";","Lf","+=","100.0","*","(","step","(","1.0",",","abs","(","Lf",".","x",")",")","+","step","(","1.0",",","abs","(","Lf",".","y",")",")",")",";","Lf",".","x","=","-","a_lf_dist","*","Lf",".","x",";","Lf",".","y","=","-","a_lf_dist","*","Lf",".","y",";","Le","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","Ld","=","vec2","(","a_lf_bb_vertex",".","x","/","Le",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","Li","=","1.9",";","Ld","*=","(","1.0","+","Li","*","length","(","Lf",".","xy",")",")",";","}","gl_Position","=","vec4","(","Lf",".","xy","+","Ld",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","Nh","(","vec3","Nc",",","vec3","Nd",",","float","Ne",",","float","Nf",")","{","float","Ng",";","Ng","=","Ne","*","Nf",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lr","(","Nd",",","Nc",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lv","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lz","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LE","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LJ","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LO","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LS","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LW","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","L_","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Md","(","Nc",",","Nd",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mj","(","Nd",",","Nc",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mp","(","Nd",",","Nc",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mv","(","Nd",",","Nc",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MB","(","Nd",",","Nc",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MG","(","Nd",",","Nc",",","Ng",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MK","(","Nd",",","Nc",",","Ng",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","Np","(","float","Ni",",","float","Nj",",","float","Nk",",","float","Nl",")","{","float","Nm",";","vec3","Nn",",","No",";","Nn","=","vec3","(","Ni",")",",","No","=","vec3","(","Nj",")",";","Nm","=","Nk","*","Nl",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lr","(","No",",","Nn",",","Nm",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lv","(","Nn",",","No",",","Nm",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lz","(","Nn",",","No",",","Nm",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MQ","(","Ni",",","Nj",",","Nm",",","Nl",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MW","(","Ni",",","Nj",",","Nm",",","Nl",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Nb","(","Ni",",","Nj",",","Nm",",","Nl",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LS","(","Nn",",","No",",","Nm",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LW","(","Nn",",","No",",","Nm",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","L_","(","Nn",",","No",",","Nm",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Md","(","Nn",",","No",",","Nm",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MG","(","No",",","Nn",",","Nm",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MK","(","No",",","Nn",",","Nm",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","Lc",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Nq",";","float","Nr",",","Ns",",","Nt",";","vec3","Nu",",","Nv",",","Nw",",","Nx",",","Ny",";","Nv","=","normalize","(","Lc",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","textureCube","(","u_sky",",","Nv",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","u_horizon_color",";","bu","(","Nu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","vec3","(","bM",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","vec3","(","Lc",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["Nr","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","abs","(","bM",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","(","bM",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","acos","(","Nv",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","abs","(","Ns","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","1.0","-","Ns","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["Nx","=","u_horizon_color",";","Ny","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","1.0",";","Nq","=","textureCube","(","u_sky",",","Nv",")",";","br","(","Nq",".","rgb",")",";","Ns","=","Nq",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","bB","(","Nq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","vec4","(","vec3","(","1.0",")","-","Nq",".","rgb",",","Nq",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","1.0","-","Ns",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","Nq",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","Nh","(","Nq",".","rgb",",","Nx",",","Ns",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","Nw",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","Nt","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Nt","!=","0.0",")","Ny","=","Nh","(","Nq",".","rgb",",","Ny",",","Ns",",","Nt",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","dot","(","Nq",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["Nr","=","Np","(","u_sky_tex_dvar",",","Nr",",","Ns",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","mix","(","Nx",",","Ny",",","Nr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","Nx",";"]}]}}]},{type:"textline",tokens:["bu","(","Nu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bu","(","Nx",")",";","bu","(","Ny",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","mix","(","Nx",",","Ny",",","Nr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","Nx",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["br","(","Nu",")",";","Nr","=","WATER_LEVEL","-","u_camera_eye_frag",".","y",";","Nx","=","vec3","(","0.0",")",";","Nx","=","mix","(","u_underwater_fog_color_density",".","rgb",",","Nx",",","min","(","-","Nv",".","y",",","1.0",")",")",";","Nx","*=","min","(","1.0","-","min","(","0.03","*","Nr",",","0.8",")",",","1.0",")",";","Nr","=","clamp","(","sign","(","0.01","*","Nr","-","Nv",".","y",")",",","0.0",",","1.0",")",";","Nu","=","mix","(","Nu",",","Nx",",","Nr",")",";","bu","(","Nu",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Nu",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","Lc",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Nc",",","Nd",";","Nc","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","Nd","=","u_sky_vp_inverse","*","Nc",";","Lc","=","Nd",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Nc",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nc","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vz",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","Nd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ne",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Nf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","tz",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","Nr","(","in","vec2","Ng",",","in","vec3","Nh",",","in","vec3","Ni",",","in","vec3","Nj",",","out","float","Nk",")","{","float","Nl",",","Nm",",","Nn",";","vec2","No",";","vec3","Np",",","Nq",";","Nk","=","0.0",";","Np","=","reflect","(","-","Ni",",","Nh",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["No","=","Ng",".","xy","+","Nh",".","xz","*","REFL_BUMP","/","bH",";","Nk","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","Nq","=","texture2D","(","u_plane_reflection",",","No",")",".","rgb",";","br","(","Nq",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","u_mirror_factor",";","Nq","=","Nj","*","textureCube","(","u_mirrormap",",","Np",")",".","rgb",";","br","(","Nq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","u_reflect_factor",";","Nq","=","Nj","*","vec3","(","0.3",",","0.5",",","1.0",")",";","br","(","Nq",")",";"]}]}}]},{type:"textline",tokens:["Np","=","normalize","(","Np","+","Ni",")",";","Nl","=","1.0","-","dot","(","Ni",",","Np",")",";","Nm","=","u_fresnel_params","[","3","]",";","Nn","=","u_fresnel_params","[","2","]",";","Nn","=","Nm","+","(","1.0","-","Nm",")","*","pow","(","Nl",",","Nn",")",";","Nk","=","min","(","Nk","*","Nn",",","1.0",")",";","return","Nq",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","Ns",";","vec2","Nt",",","Nu",",","Nv",";","float","Nw",",","Nx",",","Ny",",","Nz",",","NA",";","vec3","NB",",","NC",",","ND",",","NE",",","NF",",","NG",",","NH",",","NI",",","NJ",";","mat3","NK",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NK","=","mat3","(","bF",",","Nd",",","bE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NB","=","normalize","(","bE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NB","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","vec2","(","Ne",".","x",",","-","Ne",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","vec2","(","bC",".","x",",","-","bC",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NC","=","vec3","(","0.0",")",";","ND","=","texture2D","(","u_normalmap0",",","Nt","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","NC","+=","ND",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["NE","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["NE","+=","ND",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ND","=","texture2D","(","u_normalmap0",",","Nt","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","NC","+=","ND",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["NE","+=","ND",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ND","=","texture2D","(","u_normalmap0",",","Nt","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","NC","+=","ND",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["NE","+=","ND",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ND","=","texture2D","(","u_normalmap0",",","Nt","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","NC","+=","ND",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["NE","+=","ND",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["NE","=","NK","*","NE",";","if","(","!","f","(","NE",",","vec3","(","0.0",")",")",")","NE","=","normalize","(","NE",")",";","NE","=","mix","(","NB",",","NE",",","0.2",")",";","NE","=","normalize","(","NE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NB","=","mix","(","NB",",","normalize","(","NK","*","NC",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NB","=","mix","(","NB",",","normalize","(","NK","*","NC",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["NB","=","normalize","(","NB",")",";"]}]}}]},{type:"textline",tokens:["NC","=","normalize","(","vz",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","bG",".","xy","/","bG",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","Nu","+","NB",".","xz","*","u_refr_bump","/","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","u_diffuse_color",".","a",";","Ns","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Ny","=","Z","(","Ns",")",";","Nz","=","max","(","Ny","-","bH",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","dY","(","Ny",",","Nv",",","Nu",")",";","Ny","=","max","(","Ny","-","bH",",","0.0",")",";","Ny","=","u_view_max_depth","/","ABSORB","*","Ny",";","Ny","=","min","(","Nx","*","Ny",",","1.0",")",";","Nx","=","min","(","15.0","*","Nx","*","u_view_max_depth","*","Nz",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NA","=","u_view_max_depth","/","ABSORB","*","Nz",";","if","(","u_cam_water_depth",">","0.0",")","Nx","=","min","(","Nx","*","NA",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","Nx",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","Ny","=","0.0",";","ND","=","texture2D","(","u_refractmap",",","Nv",")",".","rgb",";","br","(","ND",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["NA","=","pow","(","min","(","Nf",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","NF","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","NA",")",";","NA","=","pow","(","min","(","Nf",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","NF","=","mix","(","u_shore_water_col",",","NF",",","NA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NF","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Nz","=","max","(","1.0","-","u_view_max_depth","*","Nz",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nz","=","1.0","-","Nx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","max","(","Nw","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["NG","=","normalize","(","vec3","(","Nf",".","r",",","0.0",",","Nf",".","g",")",")",";","NG","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","NG",",","0.8",")",")",";","NA","=","1.25","*","max","(","dot","(","NE",",","NG",")","-","0.2",",","0.0",")",";","NA","+=","max","(","dot","(","NE",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","Nz","+=","NA","*","(","1.0","-","Nf",".","b",")",";","Nw","*=","(","1.0","-","0.95","*","pow","(","Nf",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["Nz","+=","Nw",";","Nz","=","min","(","u_foam_factor","*","Nz",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Ns","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Nt","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["Nw","=","u_specular_params","[","0","]",";","Nt","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","NE","=","Nw","*","u_specular_color",";","NG","=","u_environment_energy","*","dS","(","NB",")",";","NG","=","u_ambient","*","NG",";","NG","=","NG","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NH","=","Nr","(","Nu",",","NB",",","NC",",","NG",",","Nw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NH","=","Nr","(","vec2","(","0.0",")",",","NB",",","NC",",","NG",",","Nw",")",";"]}]}}]},{type:"textline",tokens:["NF","=","u_diffuse_intensity","*","NF",";","xR","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","NF",",","NE",",","bC",",","NB",",","NC",",","Nt",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","NI",",","NJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NA","=","max","(","dot","(","u_sun_direction",",","-","bE",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","NC",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","NA","=","clamp","(","SSS_STRENGTH","*","NA",",","0.0",",","1.0",")",";","NI","=","mix","(","NI",",","u_shallow_water_col",",","NA",")",";","NI","=","mix","(","NI",",","u_shore_water_col",",","NA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["NI","=","mix","(","ND",",","NI",",","Ny",")",";"]}]}}]},{type:"textline",tokens:["NI","=","mix","(","NI",",","NH",",","Nw",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","mix","(","Ns",".","g",",","Ns",".","r",",","max","(","4.0","*","(","Nz","-","0.75",")",",","0.0",")",")",";","Nw","=","mix","(","Ns",".","b",",","Nw",",","max","(","2.0","*","Nz","-","1.0",",","0.0",")",")",";","Nw","=","mix","(","0.0",",","Nw",",","Nz",")",";","NI","=","mix","(","NI",",","NG",",","Nw",")",";"]}]}}]},{type:"textline",tokens:["NI","+=","NJ",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nz","=","bH","*","u_view_max_depth",";","Ny","=","1.0",";","if","(","u_cam_water_depth",">","1.0",")","Ny","=","2.0",";","vy","(","NI",",","Nz",",","NC",",","Ny",")",";"]}]}}]},{type:"textline",tokens:["bu","(","NI",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","max","(","Nx",",","NJ",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Nx","+=","Nw",";"]}]}}]}]}},{type:"elif",expression:["SHORE_SMOOTHING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","NI",",","Nx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["NJ","=","fwidth","(","tz",")",";","NJ","=","smoothstep","(","vec3","(","0.0",")",",","NJ","*","Nc",",","tz",")",";","Nw","=","min","(","min","(","NJ",".","x",",","NJ",".","y",")",",","NJ",".","z",")",";","Nw","=","clamp","(","Nw",",","0.0",",","1.0",")",";","NI","=","mix","(","u_wireframe_edge_color",",","NI",",","Nw",")",";","Nx","=","mix","(","1.0",",","Nx",",","Nw",")",";"]}]}},{type:"elif",expression:["DEBUG_WIREFRAME",2,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NJ","=","sign","(","tz","-","vec3","(","0.02","*","Nc",")",")",";","Nw","=","1.0",";","if","(","NJ",".","x","<","0.0","||","NJ",".","y","<","0.0","||","NJ",".","z","<","0.0",")","Nw","=","0.0",";","NI","=","mix","(","u_wireframe_edge_color",",","NI",",","Nw",")",";","Nx","=","mix","(","1.0",",","Nx",",","Nw",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","NI",",","Nx",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vz",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","Nd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ne",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Nf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","tz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Nk","(","in","vec2","Nc",")","{","float","Ng",";","vec4","Nh",";","vec2","Ni",";","Ni","=","0.5","+","vec2","(","(","Nc",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","Nc",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","Nh","=","texture2D","(","u_shore_dist_map",",","Ni",")",";","const","vec2","Nj","=","vec2","(","1.0","/","255.0",",","1.0",")",";","Ng","=","dot","(","Nh",".","ba",",","Nj",")",";","Ni","=","normalize","(","Nh",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","Ni",",","Ng",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","Nw","(","inout","vec3","Nl",",","in","float","Nm",",","in","vec3","Nn",")","{","vec2","No",",","Np",",","Nq",";","float","Nr",",","Ns",",","Nt",",","Nu",",","Nv",";","Nr","=","aU","(","DST_NOISE_SCALE_0","*","(","Nl",".","xz","+","DST_NOISE_FREQ_0","*","Nm",")",")","*","aU","(","DST_NOISE_SCALE_1","*","(","Nl",".","zx","-","DST_NOISE_FREQ_1","*","Nm",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","Nt","=","Nn",".","b",";","Nu","=","sqrt","(","Nt",")",";","Ns","=","max","(","Nt",",","DIR_MIN_SHR_FAC",")","*","sin","(","Nu","/","Ns","+","DIR_FREQ","*","Nm",")",";","Nv","=","max","(","aU","(","DIR_NOISE_SCALE","*","(","Nl",".","xz","+","DIR_NOISE_FREQ","*","Nm",")",")",",","DIR_MIN_NOISE_FAC",")",";","Ns","*=","Nv",";","Nu","=","WAVES_HEIGHT","*","mix","(","Ns",",","Nr",",","max","(","Nu",",","DST_MIN_FAC",")",")",";","No","=","Nn",".","rg",";","Ns","=","WAVES_HOR_FAC","*","Ns","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Nt",")",",","0.0",")",";","No","=","Ns","*","No",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","WAVES_HEIGHT","*","Nr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Np","=","2.0","*","(","Nl",".","xz","-","0.1","*","Nm",")",";","Nq","=","1.3","*","(","Nl",".","zx","+","0.03","*","Nm",")",";","Nr","=","ay","(","0.5","*","(","Np","+","Nq",")",")",".","x","-","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nl",".","xz","+=","No",";","Nr","*=","Nt",";"]}]}}]},{type:"textline",tokens:["Nu","+=","SMALL_WAVES_FAC","*","Nr",";"]}]}}]},{type:"textline",tokens:["Nl",".","y","+=","Nu",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Nx",",","Ny",";","vec2","Nz",";","float","NA",",","NB",",","NC",";","vec3","ND",",","NE",",","NF",",","NG",",","NH",";","mat4","NI",",","NJ",";","NI","=","O","(","u_view_tsr",")",";","NJ","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","tz","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","tz","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","tz","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["ND","=","a_position",";","NA","=","abs","(","ND",".","y",")",";","Nz","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","NA",")",";","ND",".","y","=","WATER_LEVEL",";","ND",".","xz","+=","Nz",";","ND","=","ND",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","NK","=","rF","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","NJ",")",";","ND","=","NK",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nf","=","Nk","(","ND",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NB","=","length","(","u_wind",")",";","NC","=","u_time",";","NC","*=","NB",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["NA","=","NA",";","NE","=","ND","+","vec3","(","NA",",","0.0",",","0.0",")",";","NF","=","ND","+","vec3","(","0.0",",","0.0",",","NA",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","ND",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NE","=","ND","+","vec3","(","0.05",",","0.0",",","0.0",")",";","NF","=","ND","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["NG","=","Nk","(","NE",".","xz",")",";","NH","=","Nk","(","NF",".","xz",")",";","Nw","(","NE",",","NC",",","NG",")",";","Nw","(","NF",",","NC",",","NH",")",";","Nw","(","ND",",","NC",",","Nf",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nw","(","NE",",","NC",",","vec3","(","0.0",")",")",";","Nw","(","NF",",","NC",",","vec3","(","0.0",")",")",";","Nw","(","ND",",","NC",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","ND",".","y","=","WATER_LEVEL","-","1.0",";","NE",".","y","=","ND",".","y",";","NF",".","y","=","ND",".","y",";","}"]}]}}]},{type:"textline",tokens:["NE","=","normalize","(","NE","-","ND",")",";","NF","=","normalize","(","NF","-","ND",")",";","bE","=","normalize","(","cross","(","NF",",","NE",")",")",";","NC","=","dot","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","NC","=","clamp","(","0.8","-","NC",",","0.0",",","1.0",")",";","bE","=","mix","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",",","NC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["NF","=","a_tangent",";","bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bF","=","NF",";","Nd","=","cross","(","bE",",","bF",")",";"]}]}}]},{type:"textline",tokens:["bC","=","ND",";","vz","=","u_camera_eye","-","ND",";","Nx","=","NI","*","vec4","(","ND",",","1.0",")",";","Ny","=","u_proj_matrix","*","Nx",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["NC","=","Ny",".","x",";","NA","=","Ny",".","y",";","NB","=","Ny",".","w",";","bG",".","x","=","(","NC","+","NB",")","/","2.0",";","bG",".","y","=","(","NA","+","NB",")","/","2.0",";","bG",".","z","=","NB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","Nx",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Ny",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["2"]},{type:"define",name:"AA_QUALITY_LOW",tokens:["0"]},{type:"define",name:"AA_QUALITY_MEDIUM",tokens:["1"]},{type:"define",name:"AA_QUALITY_HIGH",tokens:["2"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["vec4","Ni","(","float","Nc",",","float","Ng",")","{","vec2","Nh",";","Nh","=","bM","+","vec2","(","Nc",",","Ng",")","*","u_texel_size",";","return","texture2D","(","u_color",",","Nh",")",";","}","vec4","Nv","(",")","{","vec2","Nj",";","float","Nk",",","Nl",",","Nm",",","Nn",",","No",",","Np",";","vec4","Nq",",","Nr",",","Ns",",","Nt",",","Nu",";","Nq","=","Ni","(","-","1.0",",","-","1.0",")",";","Nr","=","Ni","(","1.0",",","-","1.0",")",";","Ns","=","Ni","(","-","1.0",",","1.0",")",";","Nt","=","Ni","(","1.0",",","1.0",")",";","Nu","=","Ni","(","0.0",",","0.0",")",";","Nk","=","bB","(","Nu",")",";","Nl","=","bB","(","Nq",")",";","Nm","=","bB","(","Nr",")",";","Nn","=","bB","(","Ns",")",";","No","=","bB","(","Nt",")",";","Np","=","min","(","Nk",",","min","(","min","(","Nl",",","Nm",")",",","min","(","Nn",",","No",")",")",")",";","Nk","=","max","(","Nk",",","max","(","max","(","Nl",",","Nm",")",",","max","(","Nn",",","No",")",")",")",";","Nj",".","x","=","-","(","(","Nl","+","Nm",")","-","(","Nn","+","No",")",")",";","Nj",".","y","=","(","(","Nl","+","Nn",")","-","(","Nm","+","No",")",")",";","No","=","max","(","(","Nl","+","Nm","+","Nn","+","No",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","No","=","1.0","/","(","min","(","abs","(","Nj",".","x",")",",","abs","(","Nj",".","y",")",")","+","No",")",";","Nj","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","Nj","*","No",")",")","*","u_texel_size",";","Nt","=","0.5","*","(","texture2D","(","u_color",",","bM","+","Nj","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","bM","+","Nj","*","(","2.0","/","3.0","-","0.5",")",")",")",";","Ns","=","Nt","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","bM","+","Nj","*","-","0.5",")","+","texture2D","(","u_color",",","bM","+","Nj","*","0.5",")",")",";","No","=","bB","(","Ns",")",";","if","(","(","No","<","Np",")","||","(","No",">","Nk",")",")","return","Nt",";","else","return","Ns",";","}"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["1"]},{type:"define",name:"FXAA_BLEND4WEB",tokens:["1"]},{type:"include",file:"fxaa.glslf"},{type:"condition",parts:[{type:"if",expression:["AA_QUALITY","AA_QUALITY_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["39"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["1.00"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.063"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0312"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["20"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.65"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0625"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.50"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0833"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Om",";"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Nv","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Om","=","u_texel_size",";","gl_FragColor","=","Ol","(","bM",",","u_color",",","Om",",","FXAA_QUALITY_SUBPIX",",","FXAA_QUALITY_EDGE_THRESHOLD",",","FXAA_QUALITY_EDGE_THRESHOLD_MIN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","Nc",";","vec2","Ng",",","Nh",";","Ng","=","vec2","(","0.0",",","0.0",")",";","Nh","=","u_texel_size",";","Nc","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Nc","*","0.0875447373698",";","Ng","+=","Nh",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ng",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ng",")","*","0.0858112354248",";","Ng","+=","Nh",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ng",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ng",")","*","0.0808139781061",";","Ng","+=","Nh",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ng",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ng",")","*","0.0731235112908",";","Ng","+=","Nh",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ng",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ng",")","*","0.0635705267419",";","Ng","+=","Nh",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ng",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ng",")","*","0.0530985673112",";","Ng","+=","Nh",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ng",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ng",")","*","0.0426125984122",";","Ng","+=","Nh",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ng",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ng",")","*","0.0328565115809",";","Ng","+=","Nh",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ng",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ng",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","Nc",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","bM",";","void","main","(",")","{","vec4","Nc",",","Ng",";","Nc","=","texture2D","(","u_main",",","bM",")",";","Ng","=","texture2D","(","u_bloom",",","bM",")",";","Nc","=","Nc",";","Nc","+=","Ng",";","gl_FragColor","=","vec4","(","Nc",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","bM",";","void","main","(",")","{","float","Nc",";","vec3","Ng",";","vec4","Nh",";","Nh","=","texture2D","(","u_color",",","bM",")",";","Ng","=","Nh",".","rgb",";","if","(","u_brightness","<","0.0",")","Ng","=","Ng","*","(","1.0","+","u_brightness",")",";","else","Ng","=","Ng","+","(","(","1.0","-","Ng",")","*","u_brightness",")",";","Ng","=","(","Ng","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","Ng","*=","u_exposure",";","Nc","=","bB","(","vec4","(","Ng",",","0.0",")",")",";","Ng","=","mix","(","vec3","(","Nc",")",",","Ng",",","u_saturation",")",";","gl_FragColor","=","vec4","(","Ng",",","Nh",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","gl_FragColor","=","V","(","clamp","(","Os","(","u_depth",",","bM",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","float","Nc",",","Ng",";","vec4","Nh",",","Ni",";","Nh","=","texture2D","(","u_sharp",",","bM",")",";","if","(","u_dof_dist",">","0.0",")","{","Nc","=","Os","(","u_depth",",","bM",",","u_camera_range",")",";","Nc","*=","u_view_max_depth",";","if","(","Nc","<","u_dof_dist",")","Ng","=","(","u_dof_dist","-","Nc",")","/","u_dof_front",";","else","Ng","=","(","Nc","-","u_dof_dist",")","/","u_dof_rear",";","Ng","=","clamp","(","Ng",",","0.0",",","1.0",")",";","Ni","=","texture2D","(","u_blurred",",","bM",")",";","gl_FragColor","=","mix","(","Nh",",","Ni",",","Ng",")",";","}","else","gl_FragColor","=","Nh",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","bM",";","void","main","(",")","{","float","Nc",";","vec4","Ng",",","Nh",",","Ni",";","Ng","=","texture2D","(","u_src_color",",","bM",")",";","Nh","=","texture2D","(","u_glow_mask_small",",","bM",")",";","Ni","=","texture2D","(","u_glow_mask_large",",","bM",")",";","gl_FragColor","=","Ng",";","if","(","Ni",".","a","!=","0.0",")","{","Nc","=","u_glow_mask_large_coeff","*","Ni",".","a",";","Nc","=","clamp","(","Nc",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Ni",".","rgb","/","Ni",".","a",",","Nc",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","Nc",")",";","}","if","(","Nh",".","a","!=","0.0",")","{","Nc","=","u_glow_mask_small_coeff","*","Nh",".","a",";","Nc","=","clamp","(","Nc",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Nh",".","rgb","/","Nh",".","a",",","Nc",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","Nc",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Ot",";","varying","vec2","Ou",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Ov",";","void","main","(",")","{","vec4","Ow",";","int","Ox",";","float","Oy",",","Oz",",","OA",",","OB",";","vec2","OC",",","OD",",","OE",";","OC","=","(","Ov",".","xy","-","bM",")",";","Oy","=","length","(","OC",")",";","OC","=","u_radial_blur_step","*","OC","/","Oy",";","Oz","=","Oy","/","u_radial_blur_step",";","OC","*=","min","(","Oz",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","Oz","=","max","(","Oz",",","STEPS_PER_PASS",")",";","OD","=","bM",";","OA","=","0.0",";","const","int","OF","=","int","(","STEPS_PER_PASS",")",";","Ox","=","int","(","Oz","+","0.5",")",";","for","(","int","OG","=","0",";","OG","<","OF",";","OG","+=","1",")","{","if","(","OG","<=","Ox",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["Oz","=","Os","(","u_input",",","OD",",","u_camera_range",")",";","OA","+=","max","(","(","1.0","-","pow","(","Oy",",","0.3",")",")","*","step","(","0.9",",","Oz",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ow","=","texture2D","(","u_input",",","OD",")",";","OA","+=","Z","(","Ow",")",";"]}]}}]},{type:"textline",tokens:["}","OD","+=","OC",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["OE","=","bM","+","Ou",";","OB","=","ay","(","vec2","(","2.5","*","(","OE",".","x",")",",","2.5","*","(","OE",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","ay","(","vec2","(","5.0","*","(","OE",".","x",")","-","0.66","*","u_time",",","5.0","*","(","OE",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","aU","(","vec2","(","7.5","*","(","OE",".","x",")","+","0.33","*","u_time",",","7.5","*","(","OE",".","y",")","-","0.33","*","u_time",")",")",";","OB","*=","clamp","(","1.2","-","sqrt","(","0.2","*","Oy",")",",","0.0",",","1.0",")","*","Ot",";","OA","=","max","(","OB",",","OA",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","V","(","OA","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","Ot",";","varying","vec2","Ou",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Ov",";","void","main","(",")","{","float","Nc",",","Ng",";","vec3","Nh",";","bM","=","a_bb_vertex","+","0.5",";","Nh","=","normalize","(","u_sun_direction",")",";","Ov","=","u_view_proj_matrix","*","vec4","(","Nh",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","Ot","=","1.0",";","Nh","=","vec3","(","0.0",",","1.0",",","0.0",")",";","Nh","=","i","(","u_camera_quat",",","Nh",")",";","Nh","=","normalize","(","Nh",")",";","Nc","=","dot","(","Nh",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Ng","=","atan","(","Nh",".","x",",","Nh",".","z",")",";","Ou","=","vec2","(","-","Ng",",","acos","(","Nc",")",")",";","}","else","{","Ot","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["Ov",".","xy","=","0.5","*","(","Ov",".","xy","/","Ov",".","w","+","1.0",")",";","Ov","+=","99999.0","*","step","(","Ov",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","bM",";","void","main","(",")","{","float","Nc",";","vec3","Ng",";","vec4","Nh",";","Nh","=","texture2D","(","u_main",",","bM",")",";","Ng","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","br","(","Nh",".","rgb",")",";","Nc","=","Z","(","texture2D","(","u_god_rays",",","bM",")",")",";","Ng","=","Nh",".","rgb","+","u_god_rays_intensity","*","vec3","(","Nc",")","*","Ng",";","bu","(","Ng",")",";"]},{type:"condition",parts:[{type:"if",expression:["SAFARI_CANVAS_ALPHA_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ng",",","max","(","0.01",",","Nh",".","a",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ng",",","Nh",".","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","bM",";","void","main","(",")","{","float","Nc",";","vec4","Ng",";","Ng","=","texture2D","(","u_input",",","bM",")",";","Nc","=","dot","(","Ng",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","Nc",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","Nc",",","Ng",",","Nh",",","Ni",";","Ng","=","0.0",";","Nh","=","0.025",";","Ni","=","0.025",";","for","(","int","Nj","=","0",";","Nj","<","20",";","Nj","+=","1",")","{","Ni","=","0.025",";","for","(","int","Nk","=","0",";","Nk","<","20",";","Nk","+=","1",")","{","Nc","=","max","(","texture2D","(","u_input",",","vec2","(","Nh",",","Ni",")",")",".","r",",","0.01",")",";","Ng","+=","log","(","Nc",")",";","Ni","+=","0.05",";","}","Nh","+=","0.05",";","}","Ng","=","exp","(","Ng","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","Ng",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","bM",";","varying","float","Ow",";","void","main","(",")","{","vec4","Ox",";","float","Oy",",","Oz",";","Oy","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","Oz","=","texture2D","(","u_luminance",",","bM",")",".","r",";","Ox","=","texture2D","(","u_main",",","bM",")",";","Oy","=","Oz","/","Oy",";","Oz","=","u_bloom_edge_lum",";","gl_FragColor","=","Ox","*","max","(","Oy","-","Oz",",","0.0",")","*","Ow",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","bM",";","varying","float","Ow",";","const","vec3","Nc","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","Nn","(","in","vec4","Ng",",","in","vec3","Nh",",","out","vec3","Ni",")","{","float","Nj",",","Nk",",","Nl",",","Nm",";","Nj","=","Ng",".","w","*","Nh",".","x","+","Ng",".","y","*","Nh",".","z","-","Ng",".","z","*","Nh",".","y",";","Nk","=","Ng",".","w","*","Nh",".","y","+","Ng",".","z","*","Nh",".","x","-","Ng",".","x","*","Nh",".","z",";","Nl","=","Ng",".","w","*","Nh",".","z","+","Ng",".","x","*","Nh",".","y","-","Ng",".","y","*","Nh",".","x",";","Nm","=","-","Ng",".","x","*","Nh",".","x","-","Ng",".","y","*","Nh",".","y","-","Ng",".","z","*","Nh",".","z",";","Ni",".","x","=","Nj","*","Ng",".","w","-","Nm","*","Ng",".","x","-","Nk","*","Ng",".","z","+","Nl","*","Ng",".","y",";","Ni",".","y","=","Nk","*","Ng",".","w","-","Nm","*","Ng",".","y","-","Nl","*","Ng",".","x","+","Nj","*","Ng",".","z",";","Ni",".","z","=","Nl","*","Ng",".","w","-","Nm","*","Ng",".","z","-","Nj","*","Ng",".","y","+","Nk","*","Ng",".","x",";","}","void","main","(",")","{","vec3","No",";","bM","=","2.0","*","a_position",";","Nn","(","u_camera_quat",",","Nc",",","No",")",";","Ow","=","dot","(","-","No",",","u_sun_direction",")","*","u_bloom_key",";","Ow","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","bM",";","float","Nc","=","0.0042",";","void","main","(",")","{","vec4","Ng",",","Nh",",","Ni",",","Nj",";","Ng","=","texture2D","(","u_mb_tex_curr",",","bM",")",";","Nh","=","texture2D","(","u_mb_tex_accum",",","bM",")",";","if","(","length","(","Ng","-","Nh",")",">","u_motion_blur_decay_threshold",")","{","Ni","=","(","1.0","-","u_motion_blur_exp",")","*","Ng","+","u_motion_blur_exp","*","Nh",";","Ni","=","Ni","-","Nh",";","Nj","=","Ng","-","Nh",";","Ni","=","min","(","max","(","abs","(","Ni",")",",","vec4","(","Nc",")",")",",","abs","(","Nj",")",")","*","sign","(","Ni",")",";","gl_FragColor","=","Nh","+","Ni",";","}","else","{","gl_FragColor","=","Ng",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","bM",";","void","main","(",")","{","vec3","Nc",";","float","Ng",";","vec4","Nh",",","Ni",",","Nj",";","Nh","=","texture2D","(","u_outline_src",",","bM",")",";","gl_FragColor","=","Nh",";","if","(","u_draw_outline","!=","0.0",")","{","Ni","=","texture2D","(","u_outline_mask",",","bM",")",";","Nj","=","texture2D","(","u_outline_mask_blurred",",","bM",")",";","Ng","=","Nj",".","a","-","Ni",".","a",";","if","(","Ng","!=","0.0",")","{","Ng","=","smoothstep","(","0.0",",","1.0",",","Nj",".","a",")",";","if","(","Ni",".","a","==","0.0",")","{","Nc","=","u_outline_color",";","bu","(","Nc",")",";","Ni","=","vec4","(","clamp","(","Nc",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","Nh",",","Ni",",","Ng",")",";","}","}","}","}"]}]},exports["postprocessing/performance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","Nc",";","Nc","=","vec4","(","0.0",")",";","for","(","int","Ng","=","0",";","Ng","<","100",";","Ng","++",")","Nc","+=","0.001","*","texture2D","(","u_color",",","bM","+","vec2","(","0.001","*","vec2","(","Ng",")",")",")",";","gl_FragColor","=","Nc",";","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"define",name:"FLIP_CUBEMAP_COORDS",tokens:["7"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_tex_number",";","uniform","vec2","u_delta",";"]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","void","main","(",")","{","float","Nc",",","Ng",",","Nh",",","Ni",";","vec2","Nj",",","Nk",";","vec4","Nl",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bM",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor",".","rgb","=","vec3","(","(","Nl",".","r","+","Nl",".","g","+","Nl",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","vec2","(","0.0",",","0.0",")",";","Nk","=","u_texel_size",";","Nl","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Nl","*","0.2270270270",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","0.1945945946",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","0.1945945946",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","0.1216216216",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","0.1216216216",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","0.0540540541",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","0.0540540541",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","0.0162162162",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","vec2","(","0.0",",","0.0",")",";","Nk","=","u_texel_size",";","Nl","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.152507",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.141763",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.141763",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.113861",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.113861",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.079019",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.079019",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.047383",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.047383",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.024549",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.024549",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.01099",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.01099",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.00425",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.00425",";","Nj","+=","Nk",";","Nl","=","texture2D","(","u_color",",","bM","+","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.00142",";","Nl","=","texture2D","(","u_color",",","bM","-","Nj",")",";","gl_FragColor","+=","Nl","*","(","1.0","-","step","(","0.0",",","-","Nl",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","u_texel_size",";","Nl","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Nl",";","if","(","Nl",".","a","==","0.0",")","{","Nl","=","texture2D","(","u_color",",","bM","+","Nk",")",";","if","(","Nl",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Nl",".","a",")",";","else","{","Nl","=","texture2D","(","u_color",",","bM","-","Nk",")",";","if","(","Nl",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Nl",".","a",")",";","}","}"]}]}},{type:"elif",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","u_delta","[","0","]",";","Ng","=","u_delta","[","1","]",";","Nh","=","1.0","/","3.0",";","Ni","=","0.5",";","Nk","=","vec2","(","Nh",",","Ni",")",";","if","(","u_tex_number","==","0",")","{","Nj","=","bM","*","Nk","+","vec2","(","2.0","*","Nh",",","0.0",")",";","Nj","[","0","]","=","min","(","Nj","[","0","]",",","1.0","-","Nc",")",";","Nj","[","1","]","=","min","(","Nj","[","1","]",",","0.5","-","Ng",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Nh","-","Nj","[","0","]",",","Nj","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","1",")","{","Nj","=","bM","*","Nk",";","Nj","[","0","]","=","max","(","Nj","[","0","]",",","Nc",")",";","Nj","[","1","]","=","min","(","Nj","[","1","]",",","0.5","-","Ng",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Nh","-","Nj","[","0","]",",","Nj","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","2",")","{","Nj","=","bM","*","Nk","+","vec2","(","Nh",",","Ni",")",";","Nj","[","0","]","=","max","(","Nj","[","0","]",",","Nh","+","Nc",")",";","Nj","[","0","]","=","min","(","Nj","[","0","]",",","2.0","*","Nh","-","Nc",")",";","Nj","[","1","]","=","min","(","Nj","[","1","]",",","1.0","-","Ng",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Nj","[","0","]",",","3.0","*","Ni","-","Nj","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","3",")","{","Nj","=","bM","*","Nk","+","vec2","(","0.0",",","Ni",")",";","Nj","[","0","]","=","min","(","Nj","[","0","]",",","Nh","-","Nc",")",";","Nj","[","1","]","=","min","(","Nj","[","1","]",",","1.0","-","Ng",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Nj","[","0","]",",","3.0","*","Ni","-","Nj","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","4",")","{","Nj","=","bM","*","Nk","+","vec2","(","Nh",",","0.0",")",";","Nj","[","0","]","=","max","(","Nj","[","0","]",",","Nh","+","Nc",")",";","Nj","[","0","]","=","min","(","Nj","[","0","]",",","2.0","*","Nh","-","Nc",")",";","Nj","[","1","]","=","min","(","Nj","[","1","]",",","0.5","-","Ng",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","1.0","-","Nj","[","0","]",",","Nj","[","1","]",")",")",";","}","else","{","Nk","=","bM","*","Nk","+","vec2","(","2.0","*","Nh",",","Ni",")",";","Nk","[","0","]","=","min","(","Nk","[","0","]",",","1.0","-","Nc",")",";","Nk","[","1","]","=","max","(","Nk","[","1","]",",","0.5","+","Ng",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Nh","-","Nk","[","0","]",",","Nk","[","1","]",")",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","bM",";","void","main","(",")","{","bM","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Ox",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Oy",";","varying","vec4","Oz",";","varying","vec4","OA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","OB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","OH","(","vec2","OC",",","sampler2D","OD",")","{","float","OE",",","OF",",","OG",";","OE","=","texture2D","(","OD",",","OC",")",".","r",";","OF","=","texture2D","(","OD",",","Oy",".","xy",")",".","r",";","OG","=","texture2D","(","OD",",","Oy",".","zw",")",".","r",";","return","vec3","(","OE",",","OF",",","OG",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","OM","(","vec2","OI",",","sampler2D","OJ",")","{","vec2","OK",";","vec3","OL",";","OL","=","OH","(","OI",",","OJ",")",";","OK","=","abs","(","OL",".","xx","-","OL",".","yz",")",";","OK","=","step","(","SMAA_PREDICATION_THRESHOLD",",","OK",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","OK",")",";","}"]}]}}]},{type:"textline",tokens:["void","OQ","(","bvec2","ON",",","inout","vec2","OO",",","vec2","OP",")","{","if","(","ON",".","x",")","OO",".","x","=","OP",".","x",";","if","(","ON",".","y",")","OO",".","y","=","OP",".","y",";","}","void","OQ","(","bvec4","OR",",","inout","vec4","OS",",","vec4","OT",")","{","OQ","(","OR",".","xy",",","OS",".","xy",",","OT",".","xy",")",";","OQ","(","OR",".","zw",",","OS",".","zw",",","OT",".","zw",")",";","}","vec2","OV","(","vec2","OU",")","{","return","sign","(","OU",")","*","floor","(","abs","(","OU",")","+",".5",")",";","}","vec4","OV","(","vec4","OW",")","{","return","sign","(","OW",")","*","floor","(","abs","(","OW",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Pi","(","vec2","OX",",","sampler2D","OY"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","OZ"]}]}}]},{type:"textline",tokens:[")","{","vec4","O_",";","float","Pa",",","Pb",",","Pc",",","Pd",",","Pe",";","vec3","Pf",";","vec2","Pg",",","Ph",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["Pg","=","OM","(","OX",",","OZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Pg","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["Pf","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","Pa","=","dot","(","texture2D","(","OY",",","OX",")",".","rgb",",","Pf",")",";","Pb","=","dot","(","texture2D","(","OY",",","Oy",".","xy",")",".","rgb",",","Pf",")",";","Pc","=","dot","(","texture2D","(","OY",",","Oy",".","zw",")",".","rgb",",","Pf",")",";","O_",".","xy","=","abs","(","Pa","-","vec2","(","Pb",",","Pc",")",")",";","Pg","=","step","(","Pg",",","O_",".","xy",")",";","if","(","dot","(","Pg",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","Pd","=","dot","(","texture2D","(","OY",",","Oz",".","xy",")",".","rgb",",","Pf",")",";","Pe","=","dot","(","texture2D","(","OY",",","Oz",".","zw",")",".","rgb",",","Pf",")",";","O_",".","zw","=","abs","(","Pa","-","vec2","(","Pd",",","Pe",")",")",";","Ph","=","max","(","O_",".","xy",",","O_",".","zw",")",";","Pe","=","dot","(","texture2D","(","OY",",","OA",".","xy",")",".","rgb",",","Pf",")",";","Pd","=","dot","(","texture2D","(","OY",",","OA",".","zw",")",".","rgb",",","Pf",")",";","O_",".","zw","=","abs","(","vec2","(","Pb",",","Pc",")","-","vec2","(","Pe",",","Pd",")",")",";","Ph","=","max","(","Ph",".","xy",",","O_",".","zw",")",";","Pd","=","max","(","Ph",".","x",",","Ph",".","y",")",";","Pg",".","xy","*=","step","(","Pd",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","O_",".","xy",")",";","return","Pg",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Pk","(","vec2","Pj",")","{","Pj",".","r","=","Pj",".","r","*","abs","(","5.0","*","Pj",".","r","-","5.0","*","0.75",")",";","return","OV","(","Pj",")",";","}","vec4","Pk","(","vec4","Pl",")","{","Pl",".","rb","=","Pl",".","rb","*","abs","(","5.0","*","Pl",".","rb","-","5.0","*","0.75",")",";","return","OV","(","Pl",")",";","}","vec2","Pt","(","sampler2D","Pm",",","vec2","Pn",",","vec2","Po",",","out","vec2","Pp",")","{","vec3","Pq",";","vec4","Pr",";","Pr","=","vec4","(","Pn",",","-","1.0",",","1.0",")",";","Pq","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Ps","=","0",";","Ps","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Ps","++",")","{","if","(","Pr",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Pr",".","w",">","0.9",")","{","Pr",".","xyz","+=","Pq","*","vec3","(","Po",",","1.0",")",";","Pp","=","texture2D","(","Pm",",","Pr",".","xy",",","0.0",")",".","rg",";","Pr",".","w","=","dot","(","Pp",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Pr",".","zw",";","}","vec2","PB","(","sampler2D","Pu",",","vec2","Pv",",","vec2","Pw",",","out","vec2","Px",")","{","vec3","Py",";","vec4","Pz",";","Pz","=","vec4","(","Pv",",","-","1.0",",","1.0",")",";","Pz",".","x","+=","0.25","*","u_texel_size",".","x",";","Py","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","PA","=","0",";","PA","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","PA","++",")","{","if","(","Pz",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Pz",".","w",">","0.9",")","{","Pz",".","xyz","=","Py","*","vec3","(","Pw",",","1.0",")","+","Pz",".","xyz",";","Px","=","texture2D","(","Pu",",","Pz",".","xy",",","0.0",")",".","rg",";","Px","=","Pk","(","Px",")",";","Pz",".","w","=","dot","(","Px",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Pz",".","zw",";","}","vec2","PH","(","sampler2D","PC",",","vec2","PD",",","vec2","PE",",","float","PF",")","{","vec2","PG",";","PG","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","PE","+","PD",";","PG","=","SMAA_AREATEX_PIXEL_SIZE","*","PG","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","PG",".","x","+=","0.5",";","PG",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","PF",";","return","texture2D","(","PC",",","PG",",","0.0",")",".","rg",";","}","vec2","PT","(","sampler2D","PI",",","sampler2D","PJ",",","vec2","PK",",","vec2","PL",",","vec4","PM",")","{","vec4","PN",",","PO",",","PP",";","vec2","PQ",",","PR",",","PS",";","PQ","=","vec2","(","0.0",",","0.0",")",";","if","(","PL",".","r",">","0.0",")","{","PN",".","xz","=","Pt","(","PI",",","PK",",","vec2","(","-","1.0",",","1.0",")",",","PR",")",";","PN",".","x","+=","float","(","PR",".","y",">","0.9",")",";","}","else","PN",".","xz","=","vec2","(","0.0",",","0.0",")",";","PN",".","yw","=","Pt","(","PI",",","PK",",","vec2","(","1.0",",","-","1.0",")",",","PR",")",";","if","(","PN",".","x","+","PN",".","y",">","2.0",")","{","PO","=","vec4","(","-","PN",".","x","+","0.25",",","PN",".","x",",","PN",".","y",",","-","PN",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","PK",".","xyxy",";","PP",".","xy","=","texture2D","(","PI",",","PO",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","PP",".","zw","=","texture2D","(","PI",",","PO",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","PP",".","yxwz","=","Pk","(","PP",".","xyzw",")",";","PS","=","vec2","(","2.0",",","2.0",")","*","PP",".","xz","+","PP",".","yw",";","OQ","(","bvec2","(","step","(","0.9",",","PN",".","zw",")",")",",","PS",",","vec2","(","0.0",",","0.0",")",")",";","PQ","+=","PH","(","PJ",",","PN",".","xy",",","PS",",","PM",".","z",")",";","}","PN",".","xz","=","PB","(","PI",",","PK",",","vec2","(","-","1",",","-","1",")",",","PR",")",";","if","(","texture2D","(","PI",",","PK","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","PN",".","yw","=","PB","(","PI",",","PK",",","vec2","(","1",",","1",")",",","PR",")",";","PN",".","y","+=","float","(","PR",".","y",">","0.9",")",";","}","else","PN",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","PN",".","x","+","PN",".","y",">","2.0",")","{","PP","=","vec4","(","-","PN",".","x",",","-","PN",".","x",",","PN",".","y",",","PN",".","y",")","*","u_texel_size",".","xyxy","+","PK",".","xyxy",";","PO",".","x","=","texture2D","(","PI",",","PP",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","PO",".","y","=","texture2D","(","PI",",","PP",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","PO",".","zw","=","texture2D","(","PI",",","PP",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","PR","=","vec2","(","2.0",",","2.0",")","*","PO",".","xz","+","PO",".","yw",";","OQ","(","bvec2","(","step","(","0.9",",","PN",".","zw",")",")",",","PR",",","vec2","(","0",",","0",")",")",";","PQ","+=","PH","(","PJ",",","PN",".","xy",",","PR",",","PM",".","w",")",".","gr",";","}","return","PQ",";","}"]}]}}]},{type:"textline",tokens:["float","PZ","(","sampler2D","PU",",","vec2","PV",",","float","PW",")","{","vec2","PX",",","PY",";","PX","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","PY","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","PW",",","1.0",")",";","PX","+=","vec2","(","-","1.0",",","1.0",")",";","PY","+=","vec2","(","0.5",",","-","0.5",")",";","PX","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","PY","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","PU",",","PX","*","PV","+","PY",",","0.0",")",".","r",";","}","float","Qg","(","sampler2D","P_",",","sampler2D","Qa",",","vec2","Qb",",","float","Qc",")","{","float","Qd",";","vec2","Qe",";","Qe","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Qf","=","0",";","Qf","<","SMAA_MAX_SEARCH_STEPS",";","Qf","++",")","{","if","(","Qb",".","x",">","Qc","&&","Qe",".","g",">","0.8281","&&","Qe",".","r","==","0.0",")","{","Qe","=","texture2D","(","P_",",","Qb",",","0.0",")",".","rg",";","Qb","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Qb",";","}","}","Qd","=","-","(","255.0","/","127.0",")","*","PZ","(","Qa",",","Qe",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","Qd","+","Qb",".","x",";","}","float","Qo","(","sampler2D","Qh",",","sampler2D","Qi",",","vec2","Qj",",","float","Qk",")","{","float","Ql",";","vec2","Qm",";","Qm","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Qn","=","0",";","Qn","<","SMAA_MAX_SEARCH_STEPS",";","Qn","++",")","{","if","(","Qj",".","x","<","Qk","&&","Qm",".","g",">","0.8281","&&","Qm",".","r","==","0.0",")","{","Qm","=","texture2D","(","Qh",",","Qj",",","0.0",")",".","rg",";","Qj","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Qj",";","}","}","Ql","=","-","(","255.0","/","127.0",")","*","PZ","(","Qi",",","Qm",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","Ql","+","Qj",".","x",";","}","float","Qw","(","sampler2D","Qp",",","sampler2D","Qq",",","vec2","Qr",",","float","Qs",")","{","float","Qt",";","vec2","Qu",";","Qu","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Qv","=","0",";","Qv","<","SMAA_MAX_SEARCH_STEPS",";","Qv","++",")","{","if","(","Qr",".","y",">","Qs","&&","Qu",".","r",">","0.8281","&&","Qu",".","g","==","0.0",")","{","Qu","=","texture2D","(","Qp",",","Qr",",","0.0",")",".","rg",";","Qr","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Qr",";","}","}","Qt","=","-","(","255.0","/","127.0",")","*","PZ","(","Qq",",","Qu",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Qt","+","Qr",".","y",";","}","float","QE","(","sampler2D","Qx",",","sampler2D","Qy",",","vec2","Qz",",","float","QA",")","{","float","QB",";","vec2","QC",";","QC","=","vec2","(","1.0",",","0.0",")",";","for","(","int","QD","=","0",";","QD","<","SMAA_MAX_SEARCH_STEPS",";","QD","++",")","{","if","(","Qz",".","y","<","QA","&&","QC",".","r",">","0.8281","&&","QC",".","g","==","0.0",")","{","QC","=","texture2D","(","Qx",",","Qz",",","0.0",")",".","rg",";","Qz","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Qz",";","}","}","QB","=","-","(","255.0","/","127.0",")","*","PZ","(","Qy",",","QC",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","QB","+","Qz",".","y",";","}","vec2","QL","(","sampler2D","QF",",","vec2","QG",",","float","QH",",","float","QI",",","float","QJ",")","{","vec2","QK",";","QK","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","OV","(","4.0","*","vec2","(","QH",",","QI",")",")","+","QG",";","QK","=","SMAA_AREATEX_PIXEL_SIZE","*","QK","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","QK",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","QJ","+","QK",".","y",";","return","texture2D","(","QF",",","QK",",","0.0",")",".","rg",";","}","void","QS","(","sampler2D","QM",",","inout","vec2","QN",",","vec4","QO",",","vec2","QP",")","{","vec2","QQ",",","QR",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["QQ","=","step","(","QP",".","xy",",","QP",".","yx",")",";","QR","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","QQ",";","QR","/=","QQ",".","x","+","QQ",".","y",";","QQ","=","vec2","(","1.0",",","1.0",")",";","QQ",".","x","-=","QR",".","x","*","texture2D","(","QM",",","QO",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","QQ",".","x","-=","QR",".","y","*","texture2D","(","QM",",","QO",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","QQ",".","y","-=","QR",".","x","*","texture2D","(","QM",",","QO",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","QQ",".","y","-=","QR",".","y","*","texture2D","(","QM",",","QO",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","QN","*=","clamp","(","QQ",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","QZ","(","sampler2D","QT",",","inout","vec2","QU",",","vec4","QV",",","vec2","QW",")","{","vec2","QX",",","QY",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["QX","=","step","(","QW",".","xy",",","QW",".","yx",")",";","QY","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","QX",";","QY","/=","QX",".","x","+","QX",".","y",";","QX","=","vec2","(","1.0",",","1.0",")",";","QX",".","x","-=","QY",".","x","*","texture2D","(","QT",",","QV",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","QX",".","x","-=","QY",".","y","*","texture2D","(","QT",",","QV",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","QX",".","y","-=","QY",".","x","*","texture2D","(","QT",",","QV",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","QX",".","y","-=","QY",".","y","*","texture2D","(","QT",",","QV",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","QU","*=","clamp","(","QX",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Rm","(","vec2","Q_",",","vec2","Ra",",","sampler2D","Rb",",","sampler2D","Rc",",","sampler2D","Rd",",","vec4","Re",")","{","float","Rf",",","Rg",";","vec3","Rh",";","vec2","Ri",",","Rj",",","Rk",";","vec4","Rl",";","Rl","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","Ri","=","texture2D","(","Rb",",","Q_",")",".","rg",";","if","(","Ri",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Rl",".","rg","=","PT","(","Rb",",","Rc",",","Q_",",","Ri",",","Re",")",";","if","(","Rl",".","r","==","-","Rl",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","Rh",".","x","=","Qg","(","Rb",",","Rd",",","Oy",".","xy",",","OA",".","x",")",";","Rh",".","y","=","Oz",".","y",";","Rj",".","x","=","Rh",".","x",";","Rf","=","texture2D","(","Rb",",","Rh",".","xy",",","0.0",")",".","r",";","Rh",".","z","=","Qo","(","Rb",",","Rd",",","Oy",".","zw",",","OA",".","y",")",";","Rj",".","y","=","Rh",".","z",";","Rj","=","abs","(","OV","(","Rj","/","u_texel_size",".","xx","-","Ra",".","xx",")",")",";","Rk","=","sqrt","(","Rj",")",";","Rg","=","texture2D","(","Rb",",","Rh",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","Rl",".","rg","=","QL","(","Rc",",","Rk",",","Rf",",","Rg",",","Re",".","y",")",";","Rh",".","y","=","Q_",".","y",";","QS","(","Rb",",","Rl",".","rg",",","Rh",".","xyzy",",","Rj",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","Ri",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","Ri",".","r",">","0.0",")","{",";","Rh",".","y","=","Qw","(","Rb",",","Rd",",","Oz",".","xy",",","OA",".","z",")",";","Rh",".","x","=","Oy",".","x",";","Ri",".","x","=","Rh",".","y",";","Rg","=","texture2D","(","Rb",",","Rh",".","xy",",","0.0",")",".","g",";","Rh",".","z","=","QE","(","Rb",",","Rd",",","Oz",".","zw",",","OA",".","w",")",";","Ri",".","y","=","Rh",".","z",";","Ri","=","abs","(","OV","(","Ri","/","u_texel_size",".","yy","-","Ra",".","yy",")",")",";","Rj","=","sqrt","(","Ri",")",";","Rf","=","texture2D","(","Rb",",","Rh",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","Rl",".","ba","=","QL","(","Rc",",","Rj",",","Rg",",","Rf",",","Re",".","x",")",";","Rh",".","x","=","Q_",".","x",";","QZ","(","Rb",",","Rl",".","ba",",","Rh",".","xyxz",",","Ri",")",";","}","return","Rl",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ry","(","vec2","Rn",",","sampler2D","Ro",",","sampler2D","Rp"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Rq"]}]}}]},{type:"textline",tokens:[")","{","bool","Rr",";","vec2","Rs",",","Rt",",","Ru",";","vec4","Rv",",","Rw",",","Rx",";","Rv",".","x","=","texture2D","(","Rp",",","Ox",".","xy",")",".","a",";","Rv",".","y","=","texture2D","(","Rp",",","Ox",".","zw",")",".","g",";","Rv",".","wz","=","texture2D","(","Rp",",","Rn",")",".","xz",";","if","(","dot","(","Rv",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","Rw","=","texture2D","(","Ro",",","Rn",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Rx","=","texture2D","(","Rq",",","bM",")",";","Rs","=","2.0","*","ag","(","Rx",")","-","1.0",";","Rw",".","a","=","sqrt","(","2.0","*","length","(","Rs",")",")",";"]}]}}]},{type:"textline",tokens:["return","Rw",";","}","else","{","Rr","=","max","(","Rv",".","x",",","Rv",".","z",")",">","max","(","Rv",".","y",",","Rv",".","w",")",";","Rw","=","vec4","(","0.0",",","Rv",".","y",",","0.0",",","Rv",".","w",")",";","Rs","=","Rv",".","yw",";","OQ","(","bvec4","(","Rr",",","Rr",",","Rr",",","Rr",")",",","Rw",",","vec4","(","Rv",".","x",",","0.0",",","Rv",".","z",",","0.0",")",")",";","OQ","(","bvec2","(","Rr",",","Rr",")",",","Rs",",","Rv",".","xz",")",";","Rs","/=","dot","(","Rs",",","vec2","(","1.0",",","1.0",")",")",";","Rw","=","Rw","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","Rn",".","xyxy",";","Rv","=","Rs",".","x","*","texture2D","(","Ro",",","Rw",".","xy",",","0.0",")",";","Rv","+=","Rs",".","y","*","texture2D","(","Ro",",","Rw",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Rx","=","texture2D","(","Rq",",","Rw",".","xy",")",";","Rt","=","2.0","*","ag","(","Rx",")","-","1.0",";","Ru","=","Rs",".","x","*","Rt",";","Rx","=","texture2D","(","Rq",",","Rw",".","zw",")",";","Rt","=","2.0","*","ag","(","Rx",")","-","1.0",";","Ru","+=","Rs",".","y","*","Rt",";","Rv",".","a","=","sqrt","(","2.0","*","length","(","Ru",")",")",";"]}]}}]},{type:"textline",tokens:["return","Rv",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","RI","(","vec2","Rz",",","sampler2D","RA",",","sampler2D","RB"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","RC"]}]}}]},{type:"textline",tokens:[")","{","float","RD",";","vec2","RE",";","vec4","RF",",","RG",",","RH",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["RF","=","texture2D","(","RC",",","bM",")",";","RE","=","2.0","*","ag","(","RF",")","-","1.0",";","RF","=","texture2D","(","RA",",","Rz",")",";","RG","=","texture2D","(","RB",",","Rz","-","RE",")",";","RD","=","abs","(","RF",".","a","*","RF",".","a","-","RG",".","a","*","RG",".","a",")","/","2.0",";","RD","=","0.5","*","clamp","(","1.0","-","sqrt","(","RD",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","RH","=","mix","(","RF",",","RG",",","RD",")",";","RH",".","a","=","1.0",";","return","RH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["RF","=","texture2D","(","RA",",","Rz",")",";","RG","=","texture2D","(","RB",",","Rz",")",";","return","mix","(","RF",",","RG",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","RJ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RJ","=","vec4","(","Pi","(","bM",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RJ","=","Rm","(","bM",",","OB",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RJ","=","Ry","(","bM",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RJ","=","vec4","(","RI","(","bM",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["RJ","=","texture2D","(","u_color",",","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","RJ",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Ox",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Oy",";","varying","vec4","Oz",";","varying","vec4","OA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","OB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ng","(","vec2","Nc",")","{","Oy","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","Nc",".","xyxy",";","Oz","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Nc",".","xyxy",";","OA","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","Nc",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Nj","(","vec2","Nh",",","out","vec2","Ni",")","{","Ni","=","Nh","/","u_texel_size",";","Oy","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","Nh",".","xyxy",";","Oz","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","Nh",".","xyxy",";","OA","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","Oy",".","xz",",","Oz",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Nl","(","vec2","Nk",")","{","Ox","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Nk",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","bM","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ng","(","bM",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nj","(","bM",",","OB",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nl","(","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","Ng","(","in","vec2","Nc",")","{","return","Os","(","u_depth",",","Nc",",","u_camera_range",")",";","}","void","main","(",")","{","float","Nh",",","Ni",",","Nj",",","Nk",",","Nl",",","Nm",";","vec3","Nn",",","No",",","Np",",","Nq",";","Nn","=","texture2D","(","u_color",",","bM",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Nn",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["No","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","bM","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","Nh","=","Ng","(","bM",")",";","Ni","=","Nh","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nr","=","8.0",";","const","int","Ns","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nr","=","16.0",";","const","int","Ns","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nr","=","24.0",";","const","int","Ns","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nr","=","32.0",";","const","int","Ns","=","4",";"]}]}}]},{type:"textline",tokens:["Nj","=","u_ssao_radius_increase","*","0.001",";","const","float","Nt","=","1.0","+","2.4","/","Nr",";","Nk","=","0.0",";","for","(","int","Nu","=","0",";","Nu","<","Ns",";","Nu","++",")","for","(","int","Nv","=","-","1",";","Nv","<=","1",";","Nv","+=","2",")","for","(","int","OC","=","-","1",";","OC","<=","1",";","OC","+=","2",")","for","(","int","OD","=","-","1",";","OD","<=","1",";","OD","+=","2",")","{","Np","=","reflect","(","normalize","(","vec3","(","Nv",",","OC",",","OD",")",")",",","No",")","*","(","Nj","*=","Nt",")",";","Nq","=","vec3","(","bM",",","Ni",")",";","Nq","+=","vec3","(","Np",".","xy",",","Np",".","z","*","Ni","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Nq",".","z","-=","1.4","*","(","Nq",".","z","-","Ni",")","*","step","(","Ni",",","Nq",".","z",")",";"]}]}}]},{type:"textline",tokens:["Nl","=","Ng","(","Nq",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","Nm","=","clamp","(","(","Ni","-","Nl",")","/","Nl",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","+=","mix","(","1.0",",","Nm",",","step","(","Nl",",","Nq",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nk","+=","mix","(","step","(","Nq",".","z",",","Nl",")",",","0.5",",","Nm",")",";"]}]}}]},{type:"textline",tokens:["}","Nk","=","Nk","/","Nr",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","clamp","(","Nk","*","Nk","+","0.6","*","Nk",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","clamp","(","Nk","*","Nk","+","Nk",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Nh","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","Nh",")",";","Nk","=","mix","(","1.0",",","Nk",",","Nh",")",";","gl_FragColor","=","vec4","(","Nn",",","Nk",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","Ng","(","in","vec2","Nc",")","{","return","Os","(","u_depth",",","Nc",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Nh",",","Ni",";","float","Nj",",","Nk",",","Nl",",","Nm",",","Nn",",","No",",","Np",";","Nj","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","Ng","(","bM",")",";","Nl","=","0.0",";","Nm","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["Nh","=","vec2","(","-","2.0",")",";","for","(","int","Nq","=","0",";","Nq","<","4",";","++","Nq",")","{","for","(","int","Nr","=","0",";","Nr","<","4",";","++","Nr",")","{","Ni","=","(","Nh","+","vec2","(","float","(","Nq",")",",","float","(","Nr",")",")",")","*","u_texel_size",";","Nn","=","texture2D","(","u_ssao_mask",",","bM","+","Ni",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","Ng","(","bM","+","Ni",")",";","Np","=","1.0","-","clamp","(","abs","(","No","-","Nk",")","*","Nm",",","0.0",",","1.0",")",";","Nj","+=","Nn","*","Np",";","Nl","+=","Np",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nj","+=","Nn",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","Nj","/","Nl",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","Nj","/","16.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/stereo.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_enable_hmd_stereo",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_distortion_params",";","uniform","vec4","u_chromatic_aberration_coefs",";","void","Np","(","vec2","Nc",",","vec2","Ng",",","float","Nh",",","sampler2D","Ni",")","{","vec4","Nj",";","float","Nk",";","vec2","Nl",",","Nm",",","Nn",",","No",";","Nl","=","(","Nc","-","Ng",")","*","2.0",";","Nl","/=","Nh",";","Nk","=","Nl",".","x","*","Nl",".","x","+","Nl",".","y","*","Nl",".","y",";","Nl","=","Nl","*","(","1.0","+","u_distortion_params","[","0","]","*","Nk","+","u_distortion_params","[","1","]","*","Nk","*","Nk",")",";","Nl","=","Nl","*","0.5","/","(","1.0","+","u_distortion_params","[","0","]","+","u_distortion_params","[","1","]",")",";","if","(","length","(","u_chromatic_aberration_coefs",")",">","0.0",")","{","Nm","=","Nl","*","(","1.0","+","u_chromatic_aberration_coefs","[","0","]","+","Nk","*","u_chromatic_aberration_coefs","[","1","]",")","+","Ng",";","Nn","=","Nl","+","Ng",";","No","=","Nl","*","(","1.0","+","u_chromatic_aberration_coefs","[","2","]","+","Nk","*","u_chromatic_aberration_coefs","[","3","]",")","+","Ng",";","if","(","clamp","(","No",",","0.0",",","1.0",")","!=","No",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","Nj","=","texture2D","(","Ni",",","Nn",")",";","gl_FragColor","[","0","]","=","texture2D","(","Ni",",","Nm",")",".","x",";","gl_FragColor","[","1","]","=","Nj",".","y",";","gl_FragColor","[","2","]","=","texture2D","(","Ni",",","No",")",".","z",";","gl_FragColor","[","3","]","=","Nj",".","w",";","}","}","else","{","Nl","=","Nl","*","Nh","+","Ng",";","if","(","clamp","(","Nl",",","0.0",",","1.0",")","!=","Nl",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","gl_FragColor","=","texture2D","(","Ni",",","Nl",")",";","}","}","}"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","Nq",";","vec2","Nr",",","Ns",";","mat3","Nt",",","Nu",";","vec3","Nv",",","OC",";","vec4","OD",",","OE",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH"],group:{type:"group",parts:[{type:"textline",tokens:["OD","=","texture2D","(","u_sampler_left",",","bM",")",";","OE","=","texture2D","(","u_sampler_right",",","bM",")",";","Nv","=","vec3","(","OD","[","0","]",",","OD","[","1","]",",","OD","[","2","]",")",";","br","(","Nv",")",";","OC","=","vec3","(","OE","[","0","]",",","OE","[","1","]",",","OE","[","2","]",")",";","br","(","OC",")",";","Nt","=","mat3","(","0.437",",","-","0.062",",","-","0.048",",","0.449",",","-","0.062",",","-","0.050",",","0.164",",","-","0.024",",","-","0.017",")",";","Nu","=","mat3","(","-","0.011",",","0.377",",","-","0.026",",","-","0.032",",","0.761",",","-","0.093",",","-","0.007",",","0.009",",","1.234",")",";","OC","=","clamp","(","Nt","*","Nv",",","0.0",",","1.0",")","+","clamp","(","Nu","*","OC",",","0.0",",","1.0",")",";","bu","(","OC",")",";","gl_FragColor","=","vec4","(","OC",",","OD","[","3","]","+","OE","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_enable_hmd_stereo","!=","0",")","{","if","(","bM","[","0","]","<","0.5",")","{","Nr","=","vec2","(","2.0","*","bM","[","0","]",",","bM","[","1","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_sampler_left",",","Nr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","vec2","(","0.5","-","(","u_distortion_params","[","3","]","-","0.5",")","/","2.0",",","u_distortion_params","[","2","]",")",";","Nq","=","2.0","*","u_distortion_params","[","3","]",";","Np","(","Nr",",","Ns",",","Nq",",","u_sampler_left",")",";"]}]}}]},{type:"textline",tokens:["}","else","{","Ns","=","vec2","(","2.0","*","(","bM","[","0","]","-","0.5",")",",","bM","[","1","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_sampler_right",",","Ns",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","vec2","(","0.5","+","(","u_distortion_params","[","3","]","-","0.5",")","/","2.0",",","u_distortion_params","[","2","]",")",";","Nq","=","2.0","*","u_distortion_params","[","3","]",";","Np","(","Ns",",","Nr",",","Nq",",","u_sampler_right",")",";"]}]}}]},{type:"textline",tokens:["}","}","else","{","gl_FragColor","=","texture2D","(","u_sampler_left",",","bM",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","bM",";","void","main","(",")","{","vec2","Nc",";","vec4","Ng",",","Nh",";","float","Ni",";","Ni","=","texture2D","(","u_depth",",","bM",")",".","x",";","Ng","=","vec4","(","bM","*","2.0","-","1.0",",","2.0","*","Ni","-","1.0",",","1.0",")",";","Nh","=","u_view_proj_inverse","*","Ng",";","Nh","=","Nh","/","Nh",".","w",";","Nh","=","u_view_proj_prev","*","Nh",";","Nh","/=","Nh",".","w",";","Nc","=","(","Ng",".","xy","-","Nh",".","xy",")","/","4.0","+","0.5",";","Nc","=","clamp","(","Nc",",","0.0",",","1.0",")",";","gl_FragColor","=","V","(","Nc",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","a","=","0.0",";","float","b","=","1.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","vec4","k","(","in","vec4","j",")","{","return","vec4","(","-","j",".","xyz",",","j",".","w",")","/","dot","(","j",",","j",")",";","}","vec3","p","(","vec4","l",",","vec4","m",",","vec4","n",")","{","vec3","o",";","o","=","n",".","xyz","*","l",".","w",";","o","=","i","(","m",",","o",")",";","o","+=","l",".","xyz","*","n",".","w",";","return","o",";","}","vec3","v","(","vec4","q",",","vec4","r",",","vec4","s",")","{","vec4","t",";","vec3","u",";","u","=","s",".","xyz","-","q",".","xyz","*","s",".","w",";","t","=","k","(","r",")",";","u","=","i","(","t",",","u",")",";","u","/=","q",".","w",";","return","u",";","}","mat4","w","(",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","y","(","float","x",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","cos","(","x",")",",","sin","(","x",")",",","a",",","a",",","-","sin","(","x",")",",","cos","(","x",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","A","(","float","z",")","{","return","mat4","(","cos","(","z",")",",","a",",","-","sin","(","z",")",",","a",",","a",",","b",",","a",",","a",",","sin","(","z",")",",","a",",","cos","(","z",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","C","(","float","B",")","{","return","mat4","(","cos","(","B",")",",","sin","(","B",")",",","a",",","a",",","-","sin","(","B",")",",","cos","(","B",")",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","c","E","(","in","c","D",")","{","return","c","(","D",".","a",",","D",".","b",",","normalize","(","D",".","c",")",",","normalize","(","D",".","d",")",",","normalize","(","D",".","e",")",",","D",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","L","(","vec4","F",")","{","vec3","G",";","float","H",",","I",",","J",";","H","=","F",".","x",";","I","=","F",".","y",";","J","=","F",".","w",";","G",".","x","=","(","H","+","J",")","/","2.0",";","G",".","y","=","(","I","+","J",")","/","2.0",";","G",".","z","=","J",";","return","G",";","}"]}]}}]},{type:"textline",tokens:["mat4","O","(","mat3","M",")","{","mat4","N",";","N","[","0","]","[","0","]","=","(","b","-","(","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","1","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","2","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","3","]","=","a",";","N","[","1","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","-","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","1","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","2","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","3","]","=","a",";","N","[","2","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","1","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","2","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","3","]","=","a",";","N","[","3","]","[","0","]","=","M","[","0","]","[","0","]",";","N","[","3","]","[","1","]","=","M","[","0","]","[","1","]",";","N","[","3","]","[","2","]","=","M","[","0","]","[","2","]",";","N","[","3","]","[","3","]","=","1.0",";","return","N",";","}"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]},{type:"define",name:"VT_WORLD_TO_WORLD",tokens:["0"]},{type:"define",name:"VT_WORLD_TO_OBJECT",tokens:["1"]},{type:"define",name:"VT_WORLD_TO_CAMERA",tokens:["2"]},{type:"define",name:"VT_OBJECT_TO_WORLD",tokens:["3"]},{type:"define",name:"VT_OBJECT_TO_OBJECT",tokens:["4"]},{type:"define",name:"VT_OBJECT_TO_CAMERA",tokens:["5"]},{type:"define",name:"VT_CAMERA_TO_WORLD",tokens:["6"]},{type:"define",name:"VT_CAMERA_TO_OBJECT",tokens:["7"]},{type:"define",name:"VT_CAMERA_TO_CAMERA",tokens:["8"]},{type:"define",name:"VT_POINT",tokens:["0"]},{type:"define",name:"VT_VECTOR",tokens:["1"]},{type:"define",name:"VT_NORMAL",tokens:["2"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","P","=","255.0",";","float","Q","=","0.0",";","float","R","=","1.0",";","vec4","V","(","const","in","float","S",")","{","vec4","T",",","U",";","T","=","vec4","(","P","*","P","*","P",",","P","*","P",",","P",",","R",")",";","U","=","vec4","(","Q",",","R","/","P",",","R","/","P",",","R","/","P",")",";","T","=","fract","(","S","*","T",")",";","T","-=","T",".","xxyz","*","U",";","return","T",";","}","float","Z","(","const","in","vec4","W",")","{","vec4","X",";","float","Y",";","X","=","vec4","(","R","/","(","P","*","P","*","P",")",",","R","/","(","P","*","P",")",",","R","/","P",",","R",")",";","Y","=","dot","(","W",",","X",")",";","return","Y",";","}","vec4","V","(","const","in","vec2","_",")","{","vec4","aa",";","vec2","ab",",","ac",";","ab","=","vec2","(","P",",","R",")",";","ac","=","vec2","(","Q",",","R","/","P",")",";","aa","=","fract","(","_",".","xxyy","*","ab",".","xyxy",")",";","aa","-=","aa",".","xxzz","*","ac",".","xyxy",";","if","(","_",".","r","==","R",")","aa",".","rg","=","vec2","(","Q",",","R",")",";","if","(","_",".","g","==","R",")","aa",".","ba","=","vec2","(","Q",",","R",")",";","return","aa",";","}","vec2","ag","(","const","in","vec4","ad",")","{","vec2","ae",",","af",";","af","=","vec2","(","R","/","P",",","R",")",";","ae",".","r","=","dot","(","ad",".","rg",",","af",")",";","ae",".","g","=","dot","(","ad",".","ba",",","af",")",";","return","ae",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ah","=","0.0",";","float","ai","=","1.0",";","vec4","ak","(","vec4","aj",")","{","return","aj","-","floor","(","aj","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec3","ak","(","vec3","al",")","{","return","al","-","floor","(","al","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec2","ak","(","vec2","am",")","{","return","am","-","floor","(","am","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec4","ao","(","vec4","an",")","{","return","an","-","floor","(","an","*","(","ai","/","7.0",")",")","*","7.0",";","}","vec4","aq","(","vec4","ap",")","{","return","ak","(","(","34.0","*","ap","+","5.0",")","*","ap",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","ay","(","vec2","ar",")","{","vec4","as",",","at",",","au",",","av",";","vec2","aw",",","ax",";","aw","=","ak","(","floor","(","ar",")",")",";","ax","=","fract","(","ar",")",";","as","=","ax",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","at","=","ax",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","au","=","aq","(","aw",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","au","=","aq","(","au","+","aw",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","av","=","ao","(","au",")","*","K","+","K2",";","au","=","ao","(","floor","(","au","*","K",")",")","*","K","+","K2",";","av","=","as","+","JITTER","*","av",";","au","=","at","+","JITTER","*","au",";","au","=","av","*","av","+","au","*","au",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","min","(","au",".","xy",",","au",".","zw",")",";","au",".","x","=","min","(","au",".","x",",","au",".","y",")",";","return","au",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","(","au",".","x","<","au",".","y",")","?","au",".","xy",":","au",".","yx",";","au",".","xz","=","(","au",".","x","<","au",".","z",")","?","au",".","xz",":","au",".","zx",";","au",".","xw","=","(","au",".","x","<","au",".","w",")","?","au",".","xw",":","au",".","wx",";","au",".","y","=","min","(","au",".","y",",","au",".","z",")",";","au",".","y","=","min","(","au",".","y",",","au",".","w",")",";","return","sqrt","(","au",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aH","(","vec2","az",",","float","aA",")","{","vec4","aB",",","aC",",","aD",",","aE",";","vec2","aF",",","aG",";","aF","=","ak","(","floor","(","az",")",")",";","aG","=","fract","(","az",")",";","aB","=","aG",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","aC","=","aG",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","aD","=","aq","(","aF",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","aD","=","aq","(","aD","+","aF",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","aE","=","ao","(","aD",")","*","K","+","K2",";","aD","=","ao","(","floor","(","aD","*","K",")",")","*","K","+","K2",";","aE","=","aB","+","JITTER","*","aE",";","aD","=","aC","+","JITTER","*","aD",";","aC","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aB","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aD","=","aE","*","aE","+","aD","*","aD",";","aC",".","xy","=","min","(","aC",".","xy",",","aC",".","zw",")",";","aC",".","x","=","min","(","aC",".","x",",","aC",".","y",")",";","aB",".","xy","=","min","(","aB",".","xy",",","aB",".","zw",")",";","aB",".","x","=","min","(","aB",".","x",",","aB",".","y",")",";","aD",".","xy","=","min","(","aD",".","xy",",","aD",".","zw",")",";","aD",".","x","=","min","(","aD",".","x",",","aD",".","y",")",";","return","vec3","(","aC",".","x",",","aB",".","x",",","aD",".","x",")",";","}","vec3","aJ","(","vec3","aI",")","{","return","ak","(","(","(","aI","*","34.0",")","+","ai",")","*","aI",")",";","}","float","aU","(","vec2","aK",")","{","vec3","aL",",","aM",",","aN",",","aO",";","vec4","aP",";","vec2","aQ",",","aR",",","aS",";","const","vec4","aT","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","aQ","=","floor","(","aK","+","dot","(","aK",",","aT",".","yy",")",")",";","aR","=","aK","-","aQ","+","dot","(","aQ",",","aT",".","xx",")",";","aS","=","(","aR",".","x",">","aR",".","y",")","?","vec2","(","ai",",","ah",")",":","vec2","(","ah",",","ai",")",";","aP","=","aR",".","xyxy","+","aT",".","xxzz",";","aP",".","xy","-=","aS",";","aQ","=","ak","(","aQ",")",";","aL","=","aJ","(","aJ","(","aQ",".","y","+","vec3","(","ah",",","aS",".","y",",","ai",")",")","+","aQ",".","x","+","vec3","(","ah",",","aS",".","x",",","ai",")",")",";","aM","=","max","(","0.5","-","vec3","(","dot","(","aR",",","aR",")",",","dot","(","aP",".","xy",",","aP",".","xy",")",",","dot","(","aP",".","zw",",","aP",".","zw",")",")",",","ah",")",";","aM","=","aM","*","aM",";","aM","=","aM","*","aM",";","aL","=","2.0","*","fract","(","aL","*","aT",".","www",")","-","ai",";","aN","=","abs","(","aL",")","-","0.5",";","aO","=","floor","(","aL","+","0.5",")",";","aO","=","aL","-","aO",";","aM","*=","1.79284291400159","-","0.85373472095314","*","(","aO","*","aO","+","aN","*","aN",")",";","aL",".","x","=","aO",".","x","*","aR",".","x","+","aN",".","x","*","aR",".","y",";","aL",".","yz","=","aO",".","yz","*","aP",".","xz","+","aN",".","yz","*","aP",".","yw",";","return","130.0","*","dot","(","aM",",","aL",")",";","}","vec2","aY","(","vec2","aV",")","{","float","aW",",","aX",";","aW","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")",")",";","aX","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","aW","=","fract","(","sin","(","aW",")","*","43758.5453",")","*","2.0","-","ai",";","aX","=","fract","(","sin","(","aX",")","*","43758.5453",")","*","2.0","-","ai",";","return","vec2","(","aW",",","aX",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"var",name:"SUN_NUM",tokens:["0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","bp","(","inout","vec3","aZ",",","float","a_",",","float","ba",",","vec4","bb",",","vec3","bc",",","vec3","bd",",","vec3","be",",","vec4","bf",",","vec3","bg",",","float","bh",")","{","float","bi",",","bj",",","bk",";","vec2","bl",",","bm",";","vec3","bn",";","vec4","bo",";","if","(","bh",">","CAUSTICS_VIEW_DISTANCE",")","return",";","bo","=","bf",";","bn","=","bg","+","bc",";","bn",".","xz","=","10.0","*","sin","(","0.1","*","bn",".","xz",")",";","bn","=","bn","+","2.0","*","cross","(","-","bo",".","xyz",",","cross","(","-","bo",".","xyz",",","bn",")","+","bo",".","w","*","bn",")",";","bl","=","bn",".","xz",";","bn","=","bd",";","bi","=","max","(","dot","(","bc",",","bn",")",",","0.0",")",";","bj","=","0.025",";","bm","=","CAUST_SPEED","*","ba",";","bl",".","s","+=","0.25","*","sin","(","dot","(","bg","+","ba",",","vec3","(","1.0",")",")",")",";","bl",".","t","+=","0.35","*","(","-","sin","(","dot","(","bg","-","ba",",","vec3","(","-","0.7",")",")",")",")",";","bl",".","st","+=","0.15","*","cos","(","4.0","*","a_","-","bm",".","x",")","+","1.5","*","sin","(","a_","-","0.3","*","bm",".","y",")",";","bk","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","a_",",","0.0",")",")",";","bn","=","aH","(","(","bl","/","bk",")",",","bj",")",";","bn","*=","CAUST_BRIGHT",";","bn","*=","bn",";","bj","=","min","(","0.25","*","a_",",","-","a_",")","+","1.0",";","bj","=","max","(","bj",",","0.0",")",";","bi","=","bb","[","SUN_NUM","]","*","bi",";","bk","=","max","(","sign","(","a_",")",",","0.0",")",";","bi","=","bi","+","max","(","0.5","*","sign","(","-","bc",".","y",")","*","bk",",","0.0",")",";","bi","=","min","(","bi",",","1.0",")",";","aZ","+=","be","*","bn","*","bj","*","bi",";","}"]}]},exports["include/color_util.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","br","(","inout","vec3","bq",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bq","=","max","(","vec3","(","0.0",")",",","bq",")",";","bq","=","pow","(","bq",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","br","(","inout","float","bs",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bs","=","pow","(","max","(","0.0",",","bs",")",",","2.2",")",";"]}]}}]},{type:"textline",tokens:["}","void","bu","(","inout","vec3","bt",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bt","=","max","(","vec3","(","0.0",")",",","bt",")",";","bt","=","pow","(","bt",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","bx","(","inout","vec3","bv",",","in","float","bw",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","bv","*","bw",";"]}]}}]},{type:"textline",tokens:["}","float","bB","(","vec4","by",")","{","float","bz",";","vec3","bA",";","bA","=","vec3","(","0.299",",","0.587",",","0.114",")",";","bz","=","dot","(","by",".","rgb",",","bA",")",";","return","bz",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","bN","=","0.1",";","const","float","bO","=","0.1",";","const","float","bP","=","-","0.01",";","const","float","bQ","=","0.05",";","vec4","bR","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","bS","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","bT","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","bU","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","bV","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","bW","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","bX","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","bY","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","ca","(","vec2","bZ",",","float","b_",")","{","return","all","(","lessThanEqual","(","bZ",",","vec2","(","1.0","+","b_",")",")",")","&&","all","(","greaterThanEqual","(","bZ",",","vec2","(","0.0","-","b_",")",")",")",";","}","float","cj","(","float","cb",",","float","cc",",","mat2","cd",",","vec3","ce",",","float","cf",",","PRECISION","sampler2D","cg",")","{","vec2","ch",",","ci",";","ci",".","x","=","cb",";","ci",".","y","=","cc",";","ci","=","cd","*","ci",";","ch","=","ce",".","xy","+","ci","*","cf","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","ca","(","ch",",","bP",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","ce",".","z",",","texture2D","(","cg",",","ch",")",".","r",")",";","}","float","cs","(","vec3","ck",",","PRECISION","sampler2D","cl",",","float","cm",")","{","mat2","cn",";","float","co",",","cp",",","cq",";","co","=","0.0",";","ck",".","z","=","clamp","(","ck",".","z",",","0.0",",","1.0",")",";","cp","=","aY","(","ck",".","xy",")",".","x","*","M_PI",";","cq","=","cos","(","cp",")",";","cp","=","sin","(","cp",")",";","cn","=","mat2","(","cq",",","cp",",","-","cp",",","cq",")",";","for","(","int","cr","=","0",";","cr","<","4",";","cr","++",")","{","co","+=","cj","(","bR","[","cr","]",",","bV","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bS","[","cr","]",",","bW","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bT","[","cr","]",",","bX","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bU","[","cr","]",",","bY","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","}","return","clamp","(","co","/","16.0",",","0.0",",","1.0",")",";","}","float","cH","(","vec3","ct",",","PRECISION","sampler2D","cu",",","vec3","cv",",","PRECISION","sampler2D","cw",",","float","cx",",","float","cy",",","float","cz",")","{","mat2","cA",";","float","cB",",","cC",",","cD",",","cE",";","ct",".","z","=","clamp","(","ct",".","z",",","0.0",",","1.0",")",";","cv",".","z","=","clamp","(","cv",".","z",",","0.0",",","1.0",")",";","cB","=","0.0",";","cC","=","0.0",";","cD","=","aY","(","ct",".","xy",")",".","x","*","M_PI",";","cE","=","cos","(","cD",")",";","cD","=","sin","(","cD",")",";","cA","=","mat2","(","cE",",","cD",",","-","cD",",","cE",")",";","for","(","int","cF","=","0",";","cF","<","4",";","cF","++",")","{","cB","+=","cj","(","bR","[","cF","]",",","bV","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bS","[","cF","]",",","bW","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bT","[","cF","]",",","bX","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bU","[","cF","]",",","bY","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","}","for","(","int","cG","=","0",";","cG","<","4",";","cG","++",")","{","cC","+=","cj","(","bR","[","cG","]",",","bV","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bS","[","cG","]",",","bW","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bT","[","cG","]",",","bX","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bU","[","cG","]",",","bY","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","}","cB","=","mix","(","cB",",","cC",",","cz",")",";","cB","/=","16.0",";","return","clamp","(","cB",",","0.0",",","1.0",")",";","}","float","cL","(","vec2","cI",")","{","float","cJ",",","cK",";","cJ","=","min","(","cI",".","x",",","cI",".","y",")",";","cK","=","min","(","1.0","-","cI",".","x",",","1.0","-","cI",".","y",")",";","return","min","(","cJ",",","cK",")",";","}","float","cO","(","float","cM",",","float","cN",")","{","if","(","cN",">=","0.0","&&","cN","<=","bO",")","cM","=","(","cM","-","1.0",")","/","bO","*","cN","+","1.0",";","return","cM",";","}","float","cZ","(","vec3","cP",",","vec3","cQ",",","PRECISION","sampler2D","cR",",","PRECISION","sampler2D","cS",",","float","cT",",","float","cU",",","float","cV",",","float","cW",")","{","float","cX",",","cY",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["cY","=","cL","(","cP",".","xy",")",";","if","(","-","cW",">","cV","&&","cY",">=","0.0","&&","cY","<=","bN","&&","ca","(","cQ",".","xy",",","0.0",")",")","{","cY","=","1.0","-","cY","/","bN",";","cX","=","cH","(","cP",",","cR",",","cQ",",","cS",",","cT",",","cU",",","cY",")",";","}","else"]}]}}]},{type:"textline",tokens:["cX","=","cs","(","cP",",","cR",",","cT",")",";","return","cX",";","}","float","dg","(","vec3","c_",",","PRECISION","sampler2D","da",",","float","db",",","float","dc",",","float","dd",")","{","float","de",",","df",";","de","=","cs","(","c_",",","da",",","db",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","dd",">","dc",")","{","df","=","cL","(","c_",".","xy",")",";","de","=","cO","(","de",",","df",")",";","}"]}]}}]},{type:"textline",tokens:["return","de",";","}","vec4","dr","(","float","dh",")","{","vec3","di",",","dj",",","dk",",","dl",";","float","dm",",","dn",",","dp",",","dq",";","dm","=","1.0",";","di","=","bI",".","xyz","/","bI",".","w",";","if","(","bI",".","w","<","0.0",")","di",".","z","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dj","=","bJ",".","xyz","/","bJ",".","w",";","if","(","bJ",".","w","<","0.0",")","dj",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dk","=","bK",".","xyz","/","bK",".","w",";","if","(","bK",".","w","<","0.0",")","dk",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dl","=","bL",".","xyz","/","bL",".","w",";","if","(","bL",".","w","<","0.0",")","dl",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","0.0",")",")","{","dm","=","cZ","(","di",",","dj",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","bQ",")",")","{","dm","=","dg","(","di",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dj",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dj",",","dk",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dk",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dk",",","dl",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dl",".","xy",",","0.0",")",")","dm","=","dg","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","dh",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dn","=","cs","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dn","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dp","=","cs","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dp","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dq","=","cs","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dq","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","vec4","(","dm",",","dn",",","dp",",","dq",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","du","(","inout","vec3","ds",")","{","vec4","dt",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","texture2DProj","(","u_shadow_mask",",","bG",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"l_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ds","*=","dt",".","a",";"]}]}}]},{type:"textline",tokens:["return","dt",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","dr","(","bD",".","z",")",";","return","dt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","dB","(","in","vec3","dv",",","vec3","dw",",","float","dx",",","float","dy",")","{","float","dz",";","vec3","dA",";","dA","=","normalize","(","dw","+","dv",")",";","dz","=","1.0","-","dot","(","dv",",","dA",")",";","dz","=","dy","+","(","1.0","-","dy",")","*","pow","(","dz",",","dx",")",";","return","dz",";","}","void","dP","(","inout","vec3","dC",",","vec3","dD",",","vec3","dE",",","float","dF",",","mat4","dG",")","{","vec2","dH",",","dI",";","float","dJ",",","dK",",","dL",";","vec3","dM",",","dN",",","dO",";","dM","=","reflect","(","-","dD",",","dE",")",";","dJ","=","u_fresnel_params","[","2","]",";","dK","=","u_fresnel_params","[","3","]",";","dL","=","1.0",";","if","(","dJ","!=","0.0",")","dL","=","dB","(","dD",",","dM",",","dJ",",","dK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_cube_reflection",",","dM",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["dO","=","u_refl_plane",".","xyz","*","dot","(","dE",",","u_refl_plane",".","xyz",")",";","dO","=","dE","-","dO",";","dH","=","(","dG","*","vec4","(","dO",",","0.0",")",")",".","xy",";","dI","=","bG",".","xy","/","bG",".","z",";","dI","+=","dH","*","REFL_BUMP",";","dN","=","texture2D","(","u_plane_reflection",",","dI",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dN","=","vec3","(","1.0",")",";","dF","=","0.0",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_mirrormap",",","dM",")",".","xyz",";","dF","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["br","(","dN",".","rgb",")",";","dC","=","mix","(","dC",",","dN",",","dF","*","dL",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","dS","(","vec3","dQ",")","{","float","dR",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","dQ",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","0.5","*","dQ",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","dR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","dY","(","in","float","dT",",","inout","vec2","dU",",","in","vec2","dV",")","{","float","dW",";","vec4","dX",";","dX","=","texture2D","(","u_scene_depth",",","dU",")",";","dW","=","Z","(","dX",")",";","if","(","dW","<","bH",")","{","dU","=","dV",";","return","dT",";","}","else","{","return","dW",";","}","return","dT",";","}"]}]}}]},{type:"textline",tokens:["vec3","ef","(","in","vec3","dZ",",","in","vec2","d_",")","{","vec3","ea",";","float","eb",";","vec4","ec",";","vec2","ed",",","ee",";","ed","=","dZ",".","xy","/","dZ",".","z",";","ee","=","ed","+","d_",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","texture2DProj","(","u_scene_depth",",","dZ",")",";","eb","=","Z","(","ec",")",";","dY","(","eb",",","ee",",","ed",")",";"]}]}}]},{type:"textline",tokens:["ea","=","texture2D","(","u_refractmap",",","ee",")",".","rgb",";","br","(","ea",")",";","return","ea",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NODE_TEX_ROW",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eg",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","eh","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","(","in","vec3","ei",",","in","float","ej",")","{","vec3","ek",";","ek","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","ef","(","bG",",","ei",".","xy","*","ej",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ek","=","texture2D","(","u_refractmap",",","bG",".","xy","/","bG",".","z",")",".","rgb",";","br","(","ek",")",";"]}]}}]},{type:"textline",tokens:["return","ek",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eq","(","vec3","em",")","{","float","en",",","eo",";","vec4","ep",";","ep","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","ep","=","mix","(","vec4","(","em",".","bg",",","ep",".","wz",")",",","vec4","(","em",".","gb",",","ep",".","xy",")",",","step","(","em",".","b",",","em",".","g",")",")",";","ep","=","mix","(","vec4","(","ep",".","xyw",",","em",".","r",")",",","vec4","(","em",".","r",",","ep",".","yzx",")",",","step","(","ep",".","x",",","em",".","r",")",")",";","en","=","ep",".","x","-","min","(","ep",".","w",",","ep",".","y",")",";","eo","=","1.0e-10",";","return","vec3","(","abs","(","ep",".","z","+","(","ep",".","w","-","ep",".","y",")","/","(","6.0","*","en","+","eo",")",")",",","en","/","(","ep",".","x","+","eo",")",",","ep",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eu","(","vec3","er",")","{","vec3","es",";","vec4","et",";","et","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","es","=","abs","(","fract","(","vec3","(","er",".","r",",","er",".","r",",","er",".","r",")","+","et",".","xyz",")","*","6.0","-","et",".","www",")",";","return","er",".","b","*","mix","(","et",".","xxx",",","clamp","(","es","-","et",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","er",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ew","(","vec2","ev",")","{","return","vec3","(","ev","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ey","(","vec3","ex",")","{","return","vec2","(","ex",".","xy","*","eh","+","vec2","(","eh",",","eh",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fr",qualifier:["float"],is_optional:true},{type:"node_out",name:"fs",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fq"],statements:[{type:"textline",tokens:["fq","=","normalize","(","fh",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fr"],statements:[{type:"textline",tokens:["fr","=","abs","(","fh",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fs"],statements:[{type:"textline",tokens:["fs","=","length","(","fh",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"ft",qualifier:["float"],is_optional:false},{type:"node_in",name:"fu",qualifier:["float"],is_optional:false},{type:"node_in",name:"fv",qualifier:["float"],is_optional:false},{type:"node_out",name:"fw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fw","=","vec3","(","ft",",","fu",",","fv",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"fx",qualifier:["float"],is_optional:false},{type:"node_in",name:"fy",qualifier:["float"],is_optional:false},{type:"node_in",name:"fz",qualifier:["float"],is_optional:false},{type:"node_out",name:"fA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fA","=","eu","(","vec3","(","fx",",","fy",",","fz",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"fB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fB","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"fC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fC","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fD",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["fD","=","ew","(","ez",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fE","=","2.0","*","eg","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"fF",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eA",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fF","=","eA",";","br","(","fF",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"fG",qualifier:["float"],is_optional:false},{type:"node_param",name:"eB",qualifier:["varying","float"],is_optional:false}],statements:[{type:"textline",tokens:["fG","=","eB",";","br","(","fG",")",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"fH",qualifier:["float"],is_optional:false},{type:"node_out",name:"fI",qualifier:["float"],is_optional:false},{type:"node_param",name:"eC",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["fH","=","eC","[","0","]",";","fI","=","eC","[","1","]",";","br","(","fH",")",";","br","(","fI",")",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"fJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"fK",qualifier:["float"],is_optional:false},{type:"node_out",name:"fL",qualifier:["float"],is_optional:false},{type:"node_param",name:"eD",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fJ","=","eD","[","0","]",";","fK","=","eD","[","1","]",";","fL","=","eD","[","2","]",";","br","(","fJ",")",";","br","(","fK",")",";","br","(","fL",")",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"fM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fM","=","fk",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"fN",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["fN","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fN","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"fO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fO","=","eM",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"fP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fP","[","0","]","=","fh","[","0","]",";","fP","[","1","]","=","fh","[","1","]",";","fP","[","2","]","=","fh","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"fQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fQ","=","vec3","(","fl",".","r",",","-","fl",".","b",",","fl",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"fR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fX",qualifier:["float"],is_optional:false},{type:"node_out",name:"fY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fR","=","vec3","(","ZERO_VALUE_NODES",")",";","fS","=","vec3","(","ZERO_VALUE_NODES",")",";","fT","=","vec3","(","ZERO_VALUE_NODES",")",";","fU","=","vec3","(","ZERO_VALUE_NODES",")",";","fV","=","vec3","(","ZERO_VALUE_NODES",")",";","fW","=","vec3","(","ZERO_VALUE_NODES",")",";","fX","=","ZERO_VALUE_NODES",";","fY","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"fZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"f_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ga",qualifier:["float"],is_optional:false},{type:"node_in",name:"gb",qualifier:["float"],is_optional:false},{type:"node_in",name:"gc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fn","=","eq","(","gc",")",";","fn","[","0","]","+=","(","fZ","-","eh",")",";","if","(","fn","[","0","]",">","UNITY_VALUE_NODES",")","fn","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","fn","[","0","]","<","ZERO_VALUE_NODES",")","fn","[","0","]","+=","UNITY_VALUE_NODES",";","fn","*=","vec3","(","UNITY_VALUE_NODES",",","f_",",","ga",")",";","fn","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","fn",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","fn",")",")",",","step","(","fn",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","gd","=","mix","(","gc",",","eu","(","fn",")",",","gb",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"ge",qualifier:["float"],is_optional:false},{type:"node_in",name:"gf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gg","=","mix","(","gf",",","vec3","(","UNITY_VALUE_NODES",")","-","gf",",","ge",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"gh",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gj",qualifier:["float"],is_optional:false},{type:"node_out",name:"gk",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gh"],statements:[{type:"textline",tokens:["gh","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["fi","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","fn","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","fo","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","fa","=","fi",".","z",";","if","(","fa","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["gi","=","fo","-","bC",";","gj","=","length","(","gi",")",";","gi","=","normalize","(","gi",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gk"],statements:[{type:"textline",tokens:["gk","=","fa","/","(","fa","+","gj","*","gj",")",";","fa","=","fi",".","x",";","fb","=","fi",".","y",";","if","(","fa",">","-","UNITY_VALUE_NODES",")","{","fc","=","dot","(","gi",",","fn",")",";","fc","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","fc","-","fa",")","/","fb",")",";","gk","*=","fc",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi","=","fn",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gj"],statements:[{type:"textline",tokens:["gj","=","length","(","fo","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gk"],statements:[{type:"textline",tokens:["gk","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"gl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gn",qualifier:["float"],is_optional:true},{type:"node_param",name:"eE",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gm"],statements:[{type:"textline",tokens:["gm","=","eE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gn"],statements:[{type:"textline",tokens:["gn","=","-","dot","(","gl",",","eE",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"go",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gp","=","-","(","eN","*","vec4","(","go",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"gq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gr",qualifier:["float"],is_optional:false},{type:"node_in",name:"gs",qualifier:["float"],is_optional:false},{type:"node_in",name:"gt",qualifier:["float"],is_optional:false},{type:"node_in",name:"gu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gw","=","gq",";"]},{type:"textline",tokens:["gr",";","gs",";","gt",";","gu",";","gv",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gy",qualifier:["float"],is_optional:false},{type:"node_in",name:"gz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gA","=","gx",";"]},{type:"textline",tokens:["gy",";","gz",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"gB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gC",qualifier:["float"],is_optional:false},{type:"node_in",name:"gD",qualifier:["float"],is_optional:false},{type:"node_in",name:"gE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gF","=","gB",";"]},{type:"textline",tokens:["gC",";","gD",";","gE",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"gG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gH",qualifier:["float"],is_optional:false},{type:"node_in",name:"gI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gJ","=","gG",";"]},{type:"textline",tokens:["gH",";","gI",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"gK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gL",qualifier:["float"],is_optional:false},{type:"node_in",name:"gM",qualifier:["float"],is_optional:false},{type:"node_in",name:"gN",qualifier:["float"],is_optional:false},{type:"node_out",name:"gO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gO","=","gK",";"]},{type:"textline",tokens:["gL",";","gM",";","gN",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"gP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gQ","=","gP",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"gR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gT","=","gR",";"]},{type:"textline",tokens:["gS",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"gU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gV",qualifier:["float"],is_optional:false},{type:"node_in",name:"gW",qualifier:["float"],is_optional:false},{type:"node_in",name:"gX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gY","[","0","]","=","gY","[","1","]","=","gY","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["gU",";","gV",";","gW",";","gX",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"gZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"g_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ha",qualifier:["float"],is_optional:false},{type:"node_in",name:"hb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hc","=","gZ",";"]},{type:"textline",tokens:["g_",";","ha",";","hb",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"hd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"he",qualifier:["float"],is_optional:false},{type:"node_in",name:"hf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hg","=","hd",";"]},{type:"textline",tokens:["he",";","hf",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"hh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hi",qualifier:["float"],is_optional:false},{type:"node_in",name:"hj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hk",qualifier:["float"],is_optional:false},{type:"node_in",name:"hl",qualifier:["float"],is_optional:false},{type:"node_in",name:"hm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hn","[","0","]","=","hn","[","1","]","=","hn","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hh",";","hj",";","hk",";","hl",";","hm",";","hi",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"ho",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hp",qualifier:["float"],is_optional:false},{type:"node_out",name:"hq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hq","=","ho",";"]},{type:"textline",tokens:["hp",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hs","[","0","]","=","hs","[","1","]","=","hs","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hr",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"ht",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ht","[","0","]","=","ht","[","1","]","=","ht","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hv",qualifier:["float"],is_optional:false},{type:"node_out",name:"hw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hw","[","0","]","=","hw","[","1","]","=","hw","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hu",";","hv",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"hx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hy",qualifier:["float"],is_optional:false},{type:"node_in",name:"hz",qualifier:["float"],is_optional:false},{type:"node_out",name:"hA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hA","[","0","]","=","hA","[","1","]","=","hA","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hx",";","hy",";","hz",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"hB",qualifier:["float"],is_optional:false},{type:"node_in",name:"hC",qualifier:["float"],is_optional:false},{type:"node_in",name:"hD",qualifier:["float"],is_optional:false},{type:"node_in",name:"hE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hF","=","hE",";"]},{type:"textline",tokens:["hB",";","hC",";","hD",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"hG",qualifier:["float"],is_optional:false},{type:"node_in",name:"hH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hI","=","hH",";"]},{type:"textline",tokens:["hG",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"hJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hK",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{type:"equal_expr",places:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{type:"equal_expr",places:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],statements:[{type:"textline",tokens:["hK","=","hJ",";"]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["VECTOR_TYPE","VT_POINT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fi","=","vec4","(","hJ",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fi","=","vec4","(","hJ",",","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eO","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eR","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eQ","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eO","*","eQ","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eP","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eR","*","eP","*","fi",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["VECTOR_TYPE","VT_NORMAL",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","normalize","(","hK",")",";"]}]}]}]}]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"hL",qualifier:["float"],is_optional:false},{type:"node_out",name:"hM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hM","[","0","]","=","hM","[","1","]","=","hM","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hL",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"hN",qualifier:["float"],is_optional:false},{type:"node_out",name:"hO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hO","[","0","]","=","hO","[","1","]","=","hO","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hN",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"hP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"hR",qualifier:["float"],is_optional:false},{type:"node_out",name:"hS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hQ","=","hP","[","0","]",";","hR","=","hP","[","1","]",";","hS","=","hP","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"hT",qualifier:["float"],is_optional:false},{type:"node_in",name:"hU",qualifier:["float"],is_optional:false},{type:"node_in",name:"hV",qualifier:["float"],is_optional:false},{type:"node_out",name:"hW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hW","[","0","]","=","hT",";","hW","[","1","]","=","hU",";","hW","[","2","]","=","hV",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"hX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hY",qualifier:["float"],is_optional:false},{type:"node_in",name:"hZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"h_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fc","=","hY","-","hZ","*","eh",";","h_","=","max","(","(","UNITY_VALUE_NODES","+","hZ",")","*","hX","+","fc",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"ia",qualifier:["float"],is_optional:false},{type:"node_in",name:"ib",qualifier:["float"],is_optional:false},{type:"node_out",name:"ic",qualifier:["float"],is_optional:false},{type:"node_out",name:"id",qualifier:["float"],is_optional:false},{type:"node_out",name:"ie",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ic","=","id","=","ie","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ia",";","ib",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"ig",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ii",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ih","[","0","]","=","ih","[","1","]","=","ih","[","2","]","=","ZERO_VALUE_NODES",";","ii","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ig",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"ij",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ik",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ik","[","0","]","=","ik","[","1","]","=","ik","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ij",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"il",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"im",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["im","[","0","]","=","im","[","1","]","=","im","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["il",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"io",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ip",qualifier:["float"],is_optional:false},{type:"node_in",name:"iq",qualifier:["float"],is_optional:false},{type:"node_in",name:"ir",qualifier:["float"],is_optional:false},{type:"node_out",name:"is",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"it",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["is","[","0","]","=","is","[","1","]","=","is","[","2","]","=","ZERO_VALUE_NODES",";","it","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["io",";","ip",";","iq",";","ir",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"iu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iv",qualifier:["float"],is_optional:false},{type:"node_in",name:"iw",qualifier:["float"],is_optional:false},{type:"node_in",name:"ix",qualifier:["float"],is_optional:false},{type:"node_in",name:"iy",qualifier:["float"],is_optional:false},{type:"node_out",name:"iz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iz","[","0","]","=","iz","[","1","]","=","iz","[","2","]","=","ZERO_VALUE_NODES",";","iA","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iu",";","iv",";","iw",";","ix",";","iy",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"iB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iC",qualifier:["float"],is_optional:false},{type:"node_out",name:"iD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iD","[","0","]","=","iD","[","1","]","=","iD","[","2","]","=","ZERO_VALUE_NODES",";","iE","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iB",";","iC",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"iF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iG",qualifier:["float"],is_optional:false},{type:"node_in",name:"iH",qualifier:["float"],is_optional:false},{type:"node_in",name:"iI",qualifier:["float"],is_optional:false},{type:"node_in",name:"iJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"iK",qualifier:["float"],is_optional:false},{type:"node_in",name:"iL",qualifier:["float"],is_optional:false},{type:"node_out",name:"iM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iM","[","0","]","=","iM","[","1","]","=","iM","[","2","]","=","ZERO_VALUE_NODES",";","iN","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iF",";","iG",";","iH",";","iI",";","iJ",";","iK",";","iL",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"iO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iP","[","0","]","=","iP","[","1","]","=","iP","[","2","]","=","ZERO_VALUE_NODES",";","iQ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iO",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"iR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iS",qualifier:["float"],is_optional:false},{type:"node_in",name:"iT",qualifier:["float"],is_optional:false},{type:"node_out",name:"iU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iU","[","0","]","=","iU","[","1","]","=","iU","[","2","]","=","ZERO_VALUE_NODES",";","iV","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iR",";","iS",";","iT",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"i_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ja",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["i_","[","0","]","=","i_","[","1","]","=","i_","[","2","]","=","ZERO_VALUE_NODES",";","ja","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iW",";","iX",";","iY",";","iZ",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"jb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"je",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jf",qualifier:["float"],is_optional:false},{type:"node_in",name:"jg",qualifier:["float"],is_optional:false},{type:"node_in",name:"jh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ji",qualifier:["float"],is_optional:false},{type:"node_in",name:"jj",qualifier:["float"],is_optional:false},{type:"node_out",name:"jk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jk","[","0","]","=","jk","[","1","]","=","jk","[","2","]","=","ZERO_VALUE_NODES",";","jl","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["jb",";","jc",";","jd",";","je",";","jf",";","jg",";","jh",";","ji",";","jj",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"jm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jo","=","clamp","(","jm","+","jn",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"jp",qualifier:["float"],is_optional:false},{type:"node_in",name:"jq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fc","=","clamp","(","jp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","js","=","fc","*","jq","+","(","UNITY_VALUE_NODES","-","fc",")","*","jr",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ju",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jt"],statements:[{type:"textline",tokens:["jt","=","ew","(","eF",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ju"],statements:[{type:"textline",tokens:["ju","=","vec3","(","eF",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"jv",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["jv","=","vec3","(","eG",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"jw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jw","=","fm",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"jx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jx","=","eg",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"jy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jy","[","0","]","=","jy","[","1","]","=","jy","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"jz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jz","[","0","]","=","fh","[","0","]",";","jz","[","1","]","=","fh","[","1","]",";","jz","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"jA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jA","[","0","]","=","jA","[","1","]","=","jA","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"jB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jB","[","0","]","=","jB","[","1","]","=","jB","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"jC",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["jC","=","vec3","(","eH",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"jD",qualifier:["float"],is_optional:false},{type:"node_out",name:"jE",qualifier:["float"],is_optional:false},{type:"node_out",name:"jF",qualifier:["float"],is_optional:false},{type:"node_out",name:"jG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jH",qualifier:["float"],is_optional:false},{type:"node_out",name:"jI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jD","=","ZERO_VALUE_NODES",";","jE","=","ZERO_VALUE_NODES",";","jF","=","ZERO_VALUE_NODES",";","jG","=","vec3","(","ZERO_VALUE_NODES",")",";","jH","=","ZERO_VALUE_NODES",";","jI","=","jG",";","jJ","=","jG",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"jK",qualifier:["float"],is_optional:false},{type:"node_out",name:"jL",qualifier:["float"],is_optional:false},{type:"node_out",name:"jM",qualifier:["float"],is_optional:false},{type:"node_out",name:"jN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jK","=","ZERO_VALUE_NODES",";","jL","=","ZERO_VALUE_NODES",";","jM","=","ZERO_VALUE_NODES",";","jN","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"jO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jP",qualifier:["float"],is_optional:false},{type:"node_out",name:"jQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"jR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jP","=","ZERO_VALUE_NODES",";","jQ","=","ZERO_VALUE_NODES",";","jR","=","ZERO_VALUE_NODES",";","jO","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"jS",qualifier:["float"],is_optional:false},{type:"node_out",name:"jT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jT","=","jS",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"jU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jU","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"jV",qualifier:["float"],is_optional:false},{type:"node_in",name:"jW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jX",qualifier:["float"],is_optional:false},{type:"node_out",name:"jY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jX","=","jY","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["jW",";","jV",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"jZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"j_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"kb",qualifier:["float"],is_optional:false},{type:"node_out",name:"kc",qualifier:["float"],is_optional:false},{type:"node_out",name:"kd",qualifier:["float"],is_optional:false},{type:"node_out",name:"ke",qualifier:["float"],is_optional:false},{type:"node_out",name:"kf",qualifier:["float"],is_optional:false},{type:"node_out",name:"kg",qualifier:["float"],is_optional:false},{type:"node_out",name:"kh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jZ","=","j_","=","ka","=","ZERO_VALUE_NODES",";","kb","=","kc","=","kd","=","ZERO_VALUE_NODES",";","ke","=","ke","=","kg","=","kh","=","ZERO_VALUE_NODES",";","kf","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"ki",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ki","=","kj","=","vec3","(","ZERO_VALUE_NODES",")",";","kk","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"kl",qualifier:["float"],is_optional:false},{type:"node_in",name:"km",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kn","=","km",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["kn",".","r","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","km",".","r","+","0.5",",","NODE_TEX_ROW",")",")",".","r","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["kn",".","g","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","km",".","g","+","0.5",",","NODE_TEX_ROW",")",")",".","g","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["kn",".","b","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","km",".","b","+","0.5",",","NODE_TEX_ROW",")",")",".","b","-","0.5",")","*","2.0",";"]}]}]},{type:"textline",tokens:["kn","=","mix","(","km",",","kn",",","kl",")",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"ko",qualifier:["float"],is_optional:false},{type:"node_in",name:"kp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kq",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["READ_A"],statements:[{type:"textline",tokens:["fc","=","texture2D","(","u_nodes_texture",",","vec2","(","kp",".","r",",","NODE_TEX_ROW",")",")",".","a",";","fb","=","texture2D","(","u_nodes_texture",",","vec2","(","kp",".","g",",","NODE_TEX_ROW",")",")",".","a",";","fa","=","texture2D","(","u_nodes_texture",",","vec2","(","kp",".","b",",","NODE_TEX_ROW",")",")",".","a",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fc","=","kp",".","r",";","fb","=","kp",".","g",";","fa","=","kp",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["kq",".","r","=","texture2D","(","u_nodes_texture",",","vec2","(","fc",",","NODE_TEX_ROW",")",")",".","r",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["kq",".","r","=","fc",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["kq",".","g","=","texture2D","(","u_nodes_texture",",","vec2","(","fb",",","NODE_TEX_ROW",")",")",".","g",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["kq",".","g","=","fb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["kq",".","b","=","texture2D","(","u_nodes_texture",",","vec2","(","fa",",","NODE_TEX_ROW",")",")",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["kq",".","b","=","fa",";"]}]}]},{type:"textline",tokens:["kq","=","mix","(","kp",",","kq",",","ko",")",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ks",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fi","=","texture2D","(","u_nodes_texture",",","vec2","(","kr",",","NODE_TEX_ROW",")",")",";","ks","=","fi",".","rgb",";","kt","=","fi",".","a",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"ku",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kv","=","ku",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["kv","=","(","MAPPING_TRS_MATRIX","*","vec4","(","kv",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["kv","=","kv","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["kv","=","kv","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["kv","=","max","(","kv",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["kv","=","min","(","kv",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["kv","=","normalize","(","kv",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"kw",qualifier:["float"],is_optional:false},{type:"node_in",name:"kx",qualifier:["float"],is_optional:false},{type:"node_out",name:"ky",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ky","=","kw","+","kx",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ky","=","clamp","(","ky",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_in",name:"kA",qualifier:["float"],is_optional:false},{type:"node_out",name:"kB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kB","=","kz","-","kA",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kB","=","clamp","(","kB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"kC",qualifier:["float"],is_optional:false},{type:"node_in",name:"kD",qualifier:["float"],is_optional:false},{type:"node_out",name:"kE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kE","=","kC","*","kD",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kE","=","clamp","(","kE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"kF",qualifier:["float"],is_optional:false},{type:"node_in",name:"kG",qualifier:["float"],is_optional:false},{type:"node_out",name:"kH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kH","=","(","kG","!=","ZERO_VALUE_NODES",")","?","kF","/","kG",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kH","=","clamp","(","kH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"kI",qualifier:["float"],is_optional:false},{type:"node_in",name:"kJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"kK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kK","=","sin","(","kI",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kK","=","clamp","(","kK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kJ",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"kL",qualifier:["float"],is_optional:false},{type:"node_in",name:"kM",qualifier:["float"],is_optional:false},{type:"node_out",name:"kN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kN","=","cos","(","kL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kN","=","clamp","(","kN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kM",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"kO",qualifier:["float"],is_optional:false},{type:"node_in",name:"kP",qualifier:["float"],is_optional:false},{type:"node_out",name:"kQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kQ","=","tan","(","kO",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kQ","=","clamp","(","kQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kP",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"kR",qualifier:["float"],is_optional:false},{type:"node_in",name:"kS",qualifier:["float"],is_optional:false},{type:"node_out",name:"kT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kT","=","(","kR","<=","UNITY_VALUE_NODES","&&","kR",">=","-","UNITY_VALUE_NODES",")","?","asin","(","kR",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kT","=","clamp","(","kT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kS",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"kU",qualifier:["float"],is_optional:false},{type:"node_in",name:"kV",qualifier:["float"],is_optional:false},{type:"node_out",name:"kW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kW","=","(","kU","<=","UNITY_VALUE_NODES","&&","kU",">=","-","UNITY_VALUE_NODES",")","?","acos","(","kU",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kW","=","clamp","(","kW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kV",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"kX",qualifier:["float"],is_optional:false},{type:"node_in",name:"kY",qualifier:["float"],is_optional:false},{type:"node_out",name:"kZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kZ","=","atan","(","kX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kZ","=","clamp","(","kZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kY",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"k_",qualifier:["float"],is_optional:false},{type:"node_in",name:"la",qualifier:["float"],is_optional:false},{type:"node_out",name:"lb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","k_","<","ZERO_VALUE_NODES","&&","la","!=","floor","(","la",")",")","lb","=","ZERO_VALUE_NODES",";","else","if","(","la","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["lb","=","UNITY_VALUE_NODES",";","else","if","(","k_","<","ZERO_VALUE_NODES",")","lb","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","la",",","2.0",")",")",")","*","pow","(","-","k_",",","la",")",";","else","if","(","k_","==","ZERO_VALUE_NODES",")","lb","=","ZERO_VALUE_NODES",";","else","lb","=","pow","(","k_",",","la",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lb","=","clamp","(","lb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"lc",qualifier:["float"],is_optional:false},{type:"node_in",name:"ld",qualifier:["float"],is_optional:false},{type:"node_out",name:"le",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","(","lc",">","ZERO_VALUE_NODES","&&","ld",">","ZERO_VALUE_NODES",")","?","log2","(","lc",")","/","log2","(","ld",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["le","=","clamp","(","le",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"lf",qualifier:["float"],is_optional:false},{type:"node_in",name:"lg",qualifier:["float"],is_optional:false},{type:"node_out",name:"lh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lh","=","min","(","lf",",","lg",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lh","=","clamp","(","lh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"li",qualifier:["float"],is_optional:false},{type:"node_in",name:"lj",qualifier:["float"],is_optional:false},{type:"node_out",name:"lk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lk","=","max","(","li",",","lj",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lk","=","clamp","(","lk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"ll",qualifier:["float"],is_optional:false},{type:"node_in",name:"lm",qualifier:["float"],is_optional:false},{type:"node_out",name:"ln",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ln","=","floor","(","ll","+","eh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ln","=","clamp","(","ln",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lm",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lo",qualifier:["float"],is_optional:false},{type:"node_in",name:"lp",qualifier:["float"],is_optional:false},{type:"node_out",name:"lq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lq","=","(","lo","<","lp",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lq","=","clamp","(","lq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"lr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ls",qualifier:["float"],is_optional:false},{type:"node_out",name:"lt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lt","=","(","lr",">","ls",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lt","=","clamp","(","lt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"lu",qualifier:["float"],is_optional:false},{type:"node_in",name:"lv",qualifier:["float"],is_optional:false},{type:"node_out",name:"lw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lw","=","abs","(","lv",")",">","0.000001","?","mod","(","lu",",","lv",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lw","=","clamp","(","lw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"lx",qualifier:["float"],is_optional:false},{type:"node_in",name:"ly",qualifier:["float"],is_optional:false},{type:"node_out",name:"lz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lz","=","abs","(","lx",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lz","=","clamp","(","lz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["ly",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"lA",qualifier:["float"],is_optional:false},{type:"node_in",name:"lB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lD","=","mix","(","lB",",","lC",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lD","=","clamp","(","lD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"lE",qualifier:["float"],is_optional:false},{type:"node_in",name:"lF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lH","=","mix","(","lF",",","lF","+","lG",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lH","=","clamp","(","lH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"lI",qualifier:["float"],is_optional:false},{type:"node_in",name:"lJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lL","=","mix","(","lJ",",","lJ","*","lK",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lL","=","clamp","(","lL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"lM",qualifier:["float"],is_optional:false},{type:"node_in",name:"lN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lP","=","mix","(","lN",",","lN","-","lO",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lP","=","clamp","(","lP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","lT","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","fb",")","+","fa","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lS",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lR",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lT","=","clamp","(","lT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"lU",qualifier:["float"],is_optional:false},{type:"node_in",name:"lV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","lW","+=","step","(","lW",",","vec3","(","ZERO_VALUE_NODES",")",")",";","lX","=","fb","*","lV","+","fa","*","lV","/","lW",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lX","=","clamp","(","lX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"lY",qualifier:["float"],is_optional:false},{type:"node_in",name:"lZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"l_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ma",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ma","=","mix","(","lZ",",","abs","(","lZ","-","l_",")",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ma","=","clamp","(","ma",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"mb",qualifier:["float"],is_optional:false},{type:"node_in",name:"mc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"md",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"me",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","me","=","min","(","mc",".","rgb",",","md",".","rgb","*","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["me","=","clamp","(","me",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mi","=","max","(","mg",".","rgb",",","mh",".","rgb","*","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mi","=","clamp","(","mi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mj",qualifier:["float"],is_optional:false},{type:"node_in",name:"mk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fo","=","vec3","(","UNITY_VALUE_NODES","-","fa",")",";","mm","=","mix","(","mk","*","(","fo","+","2.0","*","fa","*","ml",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","fo","+","2.0","*","fa","*","(","vec3","(","UNITY_VALUE_NODES",")","-","ml",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mk",")",",","step","(","eh",",","mk",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mm","=","clamp","(","mm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"mn",qualifier:["float"],is_optional:false},{type:"node_in",name:"mo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fo","=","vec3","(","UNITY_VALUE_NODES",")","-","fa","*","mp",";","fn","=","clamp","(","mo","/","fo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mq","=","mix","(","mix","(","fn",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","fo",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","mo",",","step","(","mo",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mq","=","clamp","(","mq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"mr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ms",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fo","=","vec3","(","UNITY_VALUE_NODES","-","fa",")",";","fo","=","fo","+","fa","*","mt",";","fn","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","ms",")","/","fo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mu","=","mix","(","fn",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","fo",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mu","=","clamp","(","mu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"mv",qualifier:["float"],is_optional:false},{type:"node_in",name:"mw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"my",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","my","=","mw",";","fn","=","eq","(","mx",")",";","if","(","fn",".","y","!=","ZERO_VALUE_NODES",")","{","fo","=","eq","(","my",")",";","fo",".","x","=","fn",".","x",";","fp","=","eu","(","fo",")",";","my","=","mix","(","my",",","fp",",","fa",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["my","=","clamp","(","my",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"mz",qualifier:["float"],is_optional:false},{type:"node_in",name:"mA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","mC","=","mA",";","fp","=","eq","(","mC",")",";","if","(","fp",".","y","!=","ZERO_VALUE_NODES",")","{","fo","=","eq","(","mB",")",";","fp",".","y","=","fb","*","fp",".","y","+","fa","*","fo",".","y",";","mC","=","eu","(","fp",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mC","=","clamp","(","mC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_in",name:"mE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","fp","=","eq","(","mE",")",";","fo","=","eq","(","mF",")",";","fp",".","z","=","fb","*","fp",".","z","+","fa","*","fo",".","z",";","mG","=","eu","(","fp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mG","=","clamp","(","mG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_in",name:"mI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mK","=","mI",";","fo","=","eq","(","mJ",")",";","if","(","fo",".","y","!=","ZERO_VALUE_NODES",")","{","fp","=","eq","(","mK",")",";","fp",".","x","=","fo",".","x",";","fp",".","y","=","fo",".","y",";","fn","=","eu","(","fp",")",";","mK","=","mix","(","mK",",","fn",",","fa",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mK","=","clamp","(","mK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"mL",qualifier:["float"],is_optional:false},{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","fn","=","mN","+","mM","-","mN","*","mM",";","mO","=","mM","*","(","vec3","(","fb",")","+","vec3","(","fa",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","mM",")","*","mN","+","fn",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mO","=","clamp","(","mO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"mP",qualifier:["float"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mS","=","mQ","+","fa","*","(","2.0","*","mR","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mS","=","clamp","(","mS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"mT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eS","=","mT",";","eW","=","mU",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"mV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mX",qualifier:["float"],is_optional:false},{type:"node_in",name:"mY",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"mZ",qualifier:["float"],is_optional:true},{type:"node_out",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"na",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ne",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nf",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ng",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"eI",qualifier:["const","vec2"],is_optional:false},{type:"node_param",name:"eJ",qualifier:["const","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nb","=","clamp","(","mV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["nc","=","eJ","[","0","]","*","clamp","(","mW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["nd","=","normalize","(","mY",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nd","=","fm",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["m_","=","mZ","*","nb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["m_","=","eZ","*","nb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nb","*=","mX",";"]}]}]},{type:"textline",tokens:["na","=","e_","*","u_environment_energy","*","dS","(","nd",")",";","ng","=","du","(","nb",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["ne","=","vec2","(","eI","[","0","]",",","eI","[","1","]",")",";"]},{type:"textline",tokens:["nf","=","vec2","(","eJ","[","1","]",",","eJ","[","2","]",")",";"]}]}]},{type:"textline",tokens:["eV","=","ng",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["m_","=","vec3","(","ZERO_VALUE_NODES",")",";","na","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"nh",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ni",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nk",qualifier:["float"],is_optional:true},{type:"node_in",name:"nl",qualifier:["float"],is_optional:true},{type:"node_in",name:"nm",qualifier:["float"],is_optional:true},{type:"node_out",name:"nn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"no",qualifier:["float"],is_optional:true},{type:"node_out",name:"np",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nr",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"eK",qualifier:["float"],is_optional:false},{type:"node_param",name:"eL",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nn"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nn","=","nh",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nn","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["dP","(","nn",",","eM",",","nj",",","nk",",","eN",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["dP","(","nn",",","eM",",","nj",",","nk",",","mat4","(","ZERO_VALUE_NODES",")",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nn","+=","ni",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_np"],statements:[{type:"textline",tokens:["np","=","nj",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nq"],statements:[{type:"textline",tokens:["nq","=","nh",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nr"],statements:[{type:"textline",tokens:["nr","=","ni",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_no"],statements:[{type:"textline",tokens:["no","=","clamp","(","nm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["fa","=","max","(","max","(","ni",".","r",",","ni",".","g",")",",","ni",".","b",")","*","nl",";","no","=","clamp","(","nm","*","(","UNITY_VALUE_NODES","-","fa",")","+","fa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_no"],statements:[{type:"textline",tokens:["no","=","clamp","(","eK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["fa","=","max","(","max","(","ni",".","r",",","ni",".","g",")",",","ni",".","b",")","*","eL",";","no","=","eK","*","(","UNITY_VALUE_NODES","-","fa",")","+","fa",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eT","=","ni",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eT","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["eU","=","nj",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"ns",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nv",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"nw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nv","=","vec4","(","ns","+","nu","*","nt",",","ZERO_VALUE_NODES",")",";","nw","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"nx",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nz",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nz","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["nB","=","eh",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nB","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["nA","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["nA","*=","nx","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["fn","=","u_light_positions","[","LAMP_IND","]",";","ny","=","fn","-","fl",";"]},{type:"textline",tokens:["fa","=","length","(","ny",")",";","nA","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","fa","*","fa",")",";","ny","=","normalize","(","ny",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fn","=","u_light_directions","[","LAMP_IND","]",";","fa","=","dot","(","ny",",","fn",")",";","fa","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","fa","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","nA","*=","fa",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["ny","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"nC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nD",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nF",qualifier:["float"],is_optional:false},{type:"node_in",name:"nG",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nH","=","ZERO_VALUE_NODES",";","if","(","nD",".","r","!=","ZERO_VALUE_NODES",")","{","fa","=","(","UNITY_VALUE_NODES","-","nF",")","*","dot","(","nE",",","nC",")","+","nF",";","if","(","nG","[","0","]","==","ZERO_VALUE_NODES",")","{","nH","=","UNITY_VALUE_NODES",";","}","else","{","fa","=","UNITY_VALUE_NODES","+","abs","(","fa",")",";","fa","=","nG","[","1","]","+","(","UNITY_VALUE_NODES","-","nG","[","1","]",")","*","pow","(","fa",",","nG","[","0","]",")",";","nH","=","clamp","(","fa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","nH","=","max","(","nH",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"nI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nJ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nL",qualifier:["float"],is_optional:false},{type:"node_out",name:"nM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nM","=","ZERO_VALUE_NODES",";","if","(","nJ",".","r","!=","ZERO_VALUE_NODES",")","{","fa","=","(","UNITY_VALUE_NODES","-","nL",")","*","dot","(","nK",",","nI",")","+","nL",";","nM","=","max","(","fa",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"nN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nO",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"nR",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nS","=","ZERO_VALUE_NODES",";","if","(","nO",".","r","!=","ZERO_VALUE_NODES",")","{","fa","=","(","UNITY_VALUE_NODES","-","nQ",")","*","dot","(","nP",",","nN",")","+","nQ",";","if","(","nR","[","0","]",">","ZERO_VALUE_NODES",")","{","fb","=","max","(","dot","(","nP",",","eM",")",",","ZERO_VALUE_NODES",")",";","fc","=","nR","[","0","]","*","nR","[","0","]",";","fd","=","UNITY_VALUE_NODES","-","eh","*","(","fc","/","(","fc","+","0.33",")",")",";","fn","=","nN","-","fa","*","nP",";","fp","=","eM","-","fb","*","nP",";"]},{type:"textline",tokens:["if","(","length","(","fn",")","==","ZERO_VALUE_NODES","||","length","(","fp",")","==","ZERO_VALUE_NODES","||","abs","(","fa",")",">","UNITY_VALUE_NODES","||","abs","(","fb",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["nS","=","fa","*","fd",";","else","{","fe","=","acos","(","fa",")",";","fb","=","acos","(","fb",")",";","fn","=","normalize","(","fn",")",";","fp","=","normalize","(","fp",")",";","ff","=","max","(","fe",",","fb",")",";","fg","=","min","(","fe",",","fb",")",";","fg","*=","0.95",";","fb","=","max","(","dot","(","fn",",","fp",")",",","ZERO_VALUE_NODES",")",";","fc","=","0.45","*","(","fc","/","(","fc","+","0.09",")",")",";","nS","=","fa","*","(","fd","+","(","fc","*","fb","*","sin","(","ff",")","*","tan","(","fg",")",")",")",";","}","}","else","nS","=","fa",";","nS","=","max","(","nS",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"nT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nU",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nW",qualifier:["float"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nY","=","ZERO_VALUE_NODES",";","if","(","nU",".","r","!=","ZERO_VALUE_NODES",")","{","fa","=","(","UNITY_VALUE_NODES","-","nW",")","*","dot","(","nV",",","nT",")","+","nW",";","fg","=","max","(","dot","(","nV",",","eM",")",",","ZERO_VALUE_NODES",")",";","if","(","nX","[","0","]","<=","UNITY_VALUE_NODES",")","nY","=","fa","*","pow","(","max","(","fg","*","fa",",","0.1",")",",","nX","[","0","]","-","UNITY_VALUE_NODES",")",";","else","nY","=","fa","*","pow","(","1.0001","-","fg",",","nX","[","0","]","-","UNITY_VALUE_NODES",")",";","nY","=","max","(","nY",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"nZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"n_",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ob",qualifier:["float"],is_optional:false},{type:"node_in",name:"oc",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"od",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["od","=","ZERO_VALUE_NODES",";","if","(","n_",".","r","!=","ZERO_VALUE_NODES",")","{","fg","=","(","UNITY_VALUE_NODES","-","ob",")","*","dot","(","oa",",","nZ",")","+","ob",";","fg","=","acos","(","fg",")",";","if","(","fg","<","oc","[","0","]",")","od","=","UNITY_VALUE_NODES",";","else","if","(","fg",">","(","oc","[","0","]","+","oc","[","1","]",")","||","oc","[","1","]","==","ZERO_VALUE_NODES",")","od","=","ZERO_VALUE_NODES",";","else","od","=","UNITY_VALUE_NODES","-","(","(","fg","-","oc","[","0","]",")","/","oc","[","1","]",")",";","od","=","max","(","od",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"oe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"of",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"og",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oh",qualifier:["float"],is_optional:false},{type:"node_in",name:"oi",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oj","=","ZERO_VALUE_NODES",";","if","(","of",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","oe","+","eM",")",";","oj","=","(","UNITY_VALUE_NODES","-","oh",")","*","max","(","dot","(","og",",","fp",")",",","ZERO_VALUE_NODES",")","+","oh",";","oj","=","pow","(","oj",",","oi","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"ok",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ol",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"om",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"on",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oo","=","ZERO_VALUE_NODES",";","if","(","ol",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","ok","+","eM",")",";","fg","=","max","(","dot","(","om",",","fp",")",",","0.001",")",";"]},{type:"textline",tokens:["fa","=","max","(","dot","(","om",",","eM",")",",","0.01",")",";","ff","=","max","(","dot","(","om",",","ok",")",",","0.01",")",";","fg","=","tan","(","acos","(","fg",")",")",";","fb","=","max","(","on","[","0","]",",","0.001",")",";","oo","=","ff","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","fb","*","fb",")",")","*","(","exp","(","-","(","fg","*","fg",")","/","(","fb","*","fb",")",")","/","(","sqrt","(","fa","*","ff",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"op",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oq",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"or",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"os",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ot",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ot","=","ZERO_VALUE_NODES",";","if","(","oq",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","op","+","eM",")",";","ff","=","acos","(","dot","(","fp",",","or",")",")",";","if","(","ff","<","os","[","0","]",")","ot","=","UNITY_VALUE_NODES",";","else","if","(","ff",">=","os","[","0","]","+","os","[","1","]","||","os","[","1","]","==","ZERO_VALUE_NODES",")","ot","=","ZERO_VALUE_NODES",";","else","ot","=","UNITY_VALUE_NODES","-","(","ff","-","os","[","0","]",")","/","os","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"ou",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ov",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"ow",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ox",qualifier:["float"],is_optional:false},{type:"node_in",name:"oy",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oz","=","ZERO_VALUE_NODES",";","if","(","ov",".","g","==","UNITY_VALUE_NODES",")","{","if","(","oy","[","0","]","<","UNITY_VALUE_NODES","||","oy","[","1","]","==","ZERO_VALUE_NODES",")","oz","=","ZERO_VALUE_NODES",";","else","{","if","(","oy","[","1","]","<","100.0",")","oy","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","oy","[","1","]",")",";","else","oy","[","1","]","=","10.0","/","oy","[","1","]",";","fp","=","normalize","(","eM","+","ou",")",";","ff","=","(","UNITY_VALUE_NODES","-","ox",")","*","max","(","dot","(","ow",",","fp",")",",","ZERO_VALUE_NODES",")","+","ox",";","if","(","ff","<","ZERO_VALUE_NODES",")","oz","=","ZERO_VALUE_NODES",";","else","{","fa","=","max","(","dot","(","ow",",","eM",")",",","0.01",")",";","fb","=","dot","(","ow",",","ou",")",";","if","(","fb","<=","0.01",")","oz","=","ZERO_VALUE_NODES",";","else","{","fg","=","max","(","dot","(","eM",",","fp",")",",","0.01",")",";","fc","=","UNITY_VALUE_NODES",";","fa","=","(","2.0","*","ff","*","fa",")","/","fg",";","fb","=","(","2.0","*","ff","*","fb",")","/","fg",";","fb","=","min","(","min","(","fc",",","fa",")",",","fb",")",";","fa","=","sqrt","(","pow","(","oy","[","0","]",",","2.0",")","+","pow","(","fg",",","2.0",")","-","UNITY_VALUE_NODES",")",";","fg","=","pow","(","fa","-","fg",",","2.0",")","/","pow","(","fa","+","fg",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","fg","*","(","fa","+","fg",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","fg","*","(","fa","-","fg",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","ff","=","acos","(","ff",")",";","oz","=","max","(","fg","*","fb","*","exp","(","-","pow","(","ff",",","2.0",")","/","(","2.0","*","pow","(","oy","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"oA",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["float"],is_optional:false},{type:"node_in",name:"oD",qualifier:["float"],is_optional:false},{type:"node_in",name:"oE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oK",qualifier:["float"],is_optional:false},{type:"node_out",name:"oL",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oM",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","oE",",","oF",")","*","dot","(","eM",",","oF",")","<","ZERO_VALUE_NODES",")","{","ff","=","oG",".","x",";","fb","=","oG",".","y",";","fg","=","oG",".","z",";","fa","=","oG",".","w",";"]},{type:"textline",tokens:["fc","=","clamp","(","abs","(","dot","(","oE",",","oF",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fd","=","clamp","(","dot","(","eM",",","-","oE",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","pow","(","fd",",","fb",")",";"]},{type:"textline",tokens:["oL","=","oA","+","oK","*","vec4","(","oJ","*","fc","*","pow","(","oH",",","vec3","(","ff",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["oL","+=","fg","*","mix","(","vec4","(","oH",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","fa",")","*","oK","*","vec4","(","oJ","*","fc","*","vec3","(","fb",")",",","UNITY_VALUE_NODES",")",";","oM","=","oB",";","}","else","{"]},{type:"textline",tokens:["oM","=","oB","+","oJ","*","oI","*","oD",";","oL","=","oA","+","vec4","(","oJ","*","oH","*","oC",",","oD",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oM","=","oB","+","oJ","*","oI","*","oD",";","oL","=","oA","+","vec4","(","oJ","*","oH","*","oC",",","oD",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"oN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oN","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"oO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oP","=","dot","(","oO",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"oQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oR",qualifier:["float"],is_optional:true},{type:"node_out",name:"oS",qualifier:["float"],is_optional:true},{type:"node_out",name:"oT",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oR"],statements:[{type:"textline",tokens:["oR","=","oQ",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oS"],statements:[{type:"textline",tokens:["oS","=","oQ",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oT"],statements:[{type:"textline",tokens:["oT","=","oQ",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"oU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oV",qualifier:["float"],is_optional:true},{type:"node_out",name:"oW",qualifier:["float"],is_optional:true},{type:"node_out",name:"oX",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["fp","=","eq","(","oU",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oV"],statements:[{type:"textline",tokens:["oV","=","fp",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oW"],statements:[{type:"textline",tokens:["oW","=","fp",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oX"],statements:[{type:"textline",tokens:["oX","=","fp",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"oY",qualifier:["float"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"o_",qualifier:["float"],is_optional:false},{type:"node_out",name:"pa",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pa","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","oY","-","o_",")","*","oZ",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"pb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pc",qualifier:["float"],is_optional:false},{type:"node_out",name:"pd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","pb",";","if","(","pd",".","x",">","ZERO_VALUE_NODES",")","pd",".","x","=","pow","(","pb",".","x",",","pc",")",";","if","(","pd",".","y",">","ZERO_VALUE_NODES",")","pd",".","y","=","pow","(","pb",".","y",",","pc",")",";","if","(","pd",".","z",">","ZERO_VALUE_NODES",")","pd",".","z","=","pow","(","pb",".","z",",","pc",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pf","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pe",")",";","pf","=","pow","(","pf",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ph",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ph","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pg",")",";","ph","=","pow","(","ph",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pk",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["pi","[","2","]","=","pi","[","1","]","=","pi","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pj"],statements:[{type:"textline",tokens:["pj","[","2","]","=","pj","[","1","]","=","pj","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pk"],statements:[{type:"textline",tokens:["pk","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pn",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"],is_optional:false}],statements:[{type:"textline",tokens:["fi","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","pl",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pm"],statements:[{type:"textline",tokens:["pm","=","fi",".","xyz",";","br","(","pm",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pn"],statements:[{type:"textline",tokens:["pn","=","fi",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pp",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pq",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pr",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ps",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pt",qualifier:["float"],is_optional:true},{type:"node_out",name:"pu",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_out",name:"pw",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"px",qualifier:["float"],is_optional:true},{type:"node_out",name:"py",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pz",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","po",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ps"],statements:[{type:"textline",tokens:["ps","=","fi",".","xyz",";","br","(","ps",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pt"],statements:[{type:"textline",tokens:["pt","=","fi",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pp",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pu"],statements:[{type:"textline",tokens:["pu","=","fi",".","xyz",";","br","(","pu",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","fi",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pq",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pw"],statements:[{type:"textline",tokens:["pw","=","fi",".","xyz",";","br","(","pw",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_px"],statements:[{type:"textline",tokens:["px","=","fi",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pr",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_py"],statements:[{type:"textline",tokens:["py","=","fi",".","xyz",";","br","(","py",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pz"],statements:[{type:"textline",tokens:["pz","=","fi",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"pA",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pB",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pC",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pD",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pF",qualifier:["float"],is_optional:true},{type:"node_out",name:"pG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pH",qualifier:["float"],is_optional:true},{type:"node_out",name:"pI",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pJ",qualifier:["float"],is_optional:true},{type:"node_out",name:"pK",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pL",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pA",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pE"],statements:[{type:"textline",tokens:["pE","=","normalize","(","fj","*","(","fi",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pF"],statements:[{type:"textline",tokens:["pF","=","fi",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pB",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pG"],statements:[{type:"textline",tokens:["pG","=","normalize","(","fj","*","(","fi",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pH"],statements:[{type:"textline",tokens:["pH","=","fi",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pC",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pI"],statements:[{type:"textline",tokens:["pI","=","normalize","(","fj","*","(","fi",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pJ"],statements:[{type:"textline",tokens:["pJ","=","fi",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pD",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pK"],statements:[{type:"textline",tokens:["pK","=","normalize","(","fj","*","(","fi",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pL"],statements:[{type:"textline",tokens:["pL","=","fi",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"pM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pM","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pP","=","pN","+","pO",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pQ"],statements:[{type:"textline",tokens:["pQ","=","(","abs","(","pP","[","0","]",")","+","abs","(","pP","[","1","]",")","+","abs","(","pP","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"pR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pU",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pT","=","pR","-","pS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pU"],statements:[{type:"textline",tokens:["pU","=","(","abs","(","pT","[","0","]",")","+","abs","(","pT","[","1","]",")","+","abs","(","pT","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pY",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pX","=","pV","+","pW",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pY"],statements:[{type:"textline",tokens:["pY","=","length","(","pX",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pX"],statements:[{type:"textline",tokens:["pX","=","normalize","(","pX",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"pZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qb",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qa","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qb"],statements:[{type:"textline",tokens:["qb","=","dot","(","pZ",",","p_",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qf",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qe","=","cross","(","qc",",","qd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qf"],statements:[{type:"textline",tokens:["qf","=","length","(","qe",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qj",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qi","=","normalize","(","qg",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qj"],statements:[{type:"textline",tokens:["qj","=","length","(","qg",")",";"]}]}]},{type:"textline",tokens:["qh",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ql",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qm","=","reflect","(","-","qk",",","ql",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qo",qualifier:["float"],is_optional:false},{type:"node_in",name:"qp",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qq",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fb","=","length","(","fh",")",";","if","(","fb","<","qq",")","{","eX","=","ey","(","qn",")",";","fb","=","clamp","(","eh","*","(","qq","-","fb",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","qo","*","fb",";"]},{type:"textline",tokens:["fp","=","normalize","(","eM","*","fj",")",";"]},{type:"textline",tokens:["fc","=","UNITY_VALUE_NODES","/","qp",";"]},{type:"textline",tokens:["eY","=","fp",".","xy","*","fb","/","(","qp","*","fp",".","z",")",";","fb","=","UNITY_VALUE_NODES",";","fa","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eX",")",".","a",";"]},{type:"textline",tokens:["for","(","float","qs","=","1.0",";","qs","<=","qp",";","qs","++",")","{","if","(","fa","<","fb",")","{","fb","-=","fc",";","eX","-=","eY",";","fa","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eX",")",".","a",";","}","}"]},{type:"textline",tokens:["eY","=","eX","+","eY",";","fc","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eY",")",".","a","-","(","fb","+","fc",")",";","fb","=","fa","-","fb",";","fc","=","fb","/","(","fb","-","fc",")",";"]},{type:"textline",tokens:["eX","=","fc","*","eY","+","(","UNITY_VALUE_NODES","-","fc",")","*","eX",";","qr","=","ew","(","eX",")",";","}","else","qr","=","qn",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qu","=","clamp","(","qt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qw",qualifier:["float"],is_optional:false},{type:"node_out",name:"qx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qx","=","el","(","qv",",","qw",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"qy",qualifier:["float"],is_optional:false},{type:"node_in",name:"qz",qualifier:["float"],is_optional:false},{type:"node_in",name:"qA",qualifier:["float"],is_optional:false},{type:"node_in",name:"qB",qualifier:["float"],is_optional:false},{type:"node_in",name:"qC",qualifier:["float"],is_optional:false},{type:"node_out",name:"qD",qualifier:["float"],is_optional:true},{type:"node_out",name:"qE",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qD"],statements:[{type:"textline",tokens:["qD","=","qy",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qE"],statements:[{type:"textline",tokens:["qE","=","vec4","(","qz",",","qA",",","qB",",","qC",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"qF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qF","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"qG",qualifier:["float"],is_optional:false},{type:"node_in",name:"qH",qualifier:["float"],is_optional:false},{type:"node_in",name:"qI",qualifier:["float"],is_optional:false},{type:"node_out",name:"qJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qJ","=","smoothstep","(","qH",",","qI",",","qG",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"qK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eS","=","qK",";","eW","=","qL",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"qM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qN","=","(","qM",".","r","+","qM",".","g","+","qM",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"qO",qualifier:["float"],is_optional:false},{type:"node_out",name:"qP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qP","[","0","]","=","qO",";","qP","[","1","]","=","qO",";","qP","[","2","]","=","qO",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","qQ","(","in","vec3","eM",",","in","mat4","eN",",","in","mat4","eO",",","in","mat4","eP",",","in","mat4","eQ",",","in","mat4","eR",",","out","vec3","eS",",","out","vec3","eT",",","out","vec3","eU",",","out","vec4","eV",",","out","float","eW",")","{","vec2","eX",",","eY",";","float","eZ",",","e_",",","fa",",","fb",",","fc",",","fd",",","fe",",","ff",",","fg",";","vec4","fh",",","fi",";","mat3","fj",";","vec3","fk",",","fl",",","fm",",","fn",",","fo",",","fp",";","eS","=","vec3","(","ZERO_VALUE_NODES",")",";","eT","=","vec3","(","ZERO_VALUE_NODES",")",";","eU","=","vec3","(","ZERO_VALUE_NODES",")",";","eV","=","vec4","(","ZERO_VALUE_NODES",")",";","eW","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["fk","=","normalize","(","bE",")",";","fl","=","fk",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["fl","=","fl",";","else","fl","=","-","fl",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["fm","=","fl",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fm","=","fk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["fk","=","fl",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["fn","=","cross","(","fl",",","bF",".","xyz",")","*","bF",".","w",";","fj","=","mat3","(","bF",".","xyz",",","fn",",","fl",")",";","fj","=","fj",";"]}]}}]},{type:"textline",tokens:["fl","=","bC",";","fh","=","bD",";","eZ","=","u_emit",";","e_","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","qR","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","qX","(","vec3","qS",",","mat4","qT",")","{","vec3","qU",",","qV",",","qW",";","qU","=","vec3","(","qT","[","0","]","[","0","]",",","qT","[","1","]","[","0","]",",","qT","[","2","]","[","0","]",")",";","qV","=","vec3","(","qT","[","0","]","[","1","]",",","qT","[","1","]","[","1","]",",","qT","[","2","]","[","1","]",")",";","qW","=","vec3","(","qT","[","0","]","[","2","]",",","qT","[","1","]","[","2","]",",","qT","[","2","]","[","2","]",")",";","qV","=","cross","(","qW",",","qU",")",";","return","mat4","(","vec4","(","qU",",","0.0",")",",","vec4","(","qV",",","0.0",")",",","vec4","(","qW",",","0.0",")",",","vec4","(","qS",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","rc","(","vec3","qY",",","vec3","qZ",")","{","vec3","q_",",","ra",",","rb",";","q_","=","qY","-","qZ",";","q_",".","y","=","0.0",";","q_","=","normalize","(","q_",")",";","ra","=","normalize","(","cross","(","qR",",","q_",")",")",";","rb","=","normalize","(","cross","(","q_",",","ra",")",")",";","return","mat4","(","vec4","(","ra",",","0.0",")",",","vec4","(","rb",",","0.0",")",",","vec4","(","q_",",","0.0",")",",","vec4","(","qZ",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rk","(","in","vec3","rd",",","float","re",",","float","rf",",","float","rg",",","vec3","rh",")","{","float","ri",",","rj",";","ri","=","fract","(","length","(","rh",")","/","0.17",")",";","rj","=","rg","+","ri","/","10.0",";","ri","=","ri",";","if","(","rg","!=","0.0",")","ri","/=","rg",";","rd","*=","1.0","+","0.5","*","sin","(","re",")",";","ri","=","length","(","rd",")","*","rf","*","sin","(","2.0","*","3.14","*","re","*","rj","+","ri",")",";","return","C","(","ri",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","rs","(","in","vec3","rl",",","in","vec3","rm",",","in","mat4","rn",")","{","vec3","ro",";","float","rp",",","rq",";","mat4","rr",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["rr","=","qX","(","rm",",","rn",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["rp","=","fract","(","(","rm",".","x","*","1.43","+","rm",".","y","*","0.123","+","rm",".","z","*","6.1",")",")",";","rp","=","2.0","*","M_PI","*","rp",";","ro","=","normalize","(","vec3","(","rn","[","0","]","[","2","]",",","0.0",",","rn","[","2","]","[","2","]",")",")",";","rq","=","acos","(","ro","[","2","]",")",";","if","(","ro","[","0","]","<","0.0",")","rq","=","2.0","*","M_PI","-","rq",";","rq","=","rq","-","rp",";","if","(","rq","<","0.0",")","rq","=","2.0","*","M_PI","+","rq",";","rp","=","rp",";","if","(","rq","<=","MAX_BILLBOARD_ANGLE",")","rp","+=","rq",";","else","if","(","rq","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","rp","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rq","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","rq","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","rp","+=","rq","-","M_PI",";","else","if","(","rq","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","rp","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rq","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","rp","+=","rq","-","2.0","*","M_PI",";","rr","=","A","(","rp",")",";","rr","[","3","]","=","vec4","(","rm",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rr","=","rc","(","rl",",","rm",")",";"]}]}}]},{type:"textline",tokens:["return","rr",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ry","(","in","vec3","rt",",","in","vec3","ru",",","in","mat4","rv",",","mat4","rw",")","{","mat4","rx",";","rx","=","rs","(","rt",",","ru",",","rv",")",";","rw","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","rx","=","rx","*","rw",";","return","rx",";","}"]}]}}]},{type:"textline",tokens:["c","rF","(","in","vec3","rz",",","in","vec3","rA",",","in","vec3","rB",",","in","vec3","rC",",","in","vec3","rD",",","in","mat4","rE",")","{","rz","=","(","rE","*","vec4","(","rz",",","1.0",")",")",".","xyz",";","rA","=","(","rE","*","vec4","(","rA",",","1.0",")",")",".","xyz",";","rB","=","(","rE","*","vec4","(","rB",",","0.0",")",")",".","xyz",";","rC","=","(","rE","*","vec4","(","rC",",","0.0",")",")",".","xyz",";","rD","=","(","rE","*","vec4","(","rD",",","0.0",")",")",".","xyz",";","return","E","(","c","(","rz",",","rA",",","rB",",","rC",",","rD",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","rI","(","vec2","rG",",","vec3","rH",")","{","return","(","rG","+","0.5",")","*","rH",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rP","(","in","vec4","rJ",",","in","vec4","rK",",","in","float","rL",")","{","float","rM",",","rN",",","rO",";","rM","=","rJ","[","0","]","*","rK","[","0","]","+","rJ","[","1","]","*","rK","[","1","]","+","rJ","[","2","]","*","rK","[","2","]","+","rJ","[","3","]","*","rK","[","3","]",";","if","(","rM","<","0.0",")","{","rK","*=","-","1.0",";","rM","=","-","rM",";","}","if","(","abs","(","rM",")",">=","1.0",")","return","rJ",";","rN","=","acos","(","rM",")",";","rM","=","sqrt","(","1.0","-","rM","*","rM",")",";","if","(","abs","(","rM",")","<","0.001",")","return","vec4","(","rJ","*","0.5","+","rK","*","0.5",")",";","rO","=","sin","(","(","1.0","-","rL",")","*","rN",")","/","rM",";","rM","=","sin","(","rL","*","rN",")","/","rM",";","return","rJ","*","rO","+","rK","*","rM",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","sa","(","in","vec3","rQ",",","in","vec4","rR",",","in","vec4","rS",",","in","vec4","rT",",","in","vec4","rU",",","in","float","rV",")","{","vec4","rW",",","rX",";","vec3","rY",",","rZ",",","r_",";","rY","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rQ",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rW","=","rP","(","rR",",","rS",",","rV",")",";","rX","=","mix","(","rT",",","rU",",","rV",")",";","rZ","=","i","(","rW",",","rY",")",";","rZ","=","rZ","*","rX",".","w","+","rX",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["r_","=","i","(","rR",",","rY",")",";","rY","=","i","(","rS",",","rY",")",";","r_","=","r_","*","rT",".","w","+","rT",".","xyz",";","rY","=","rY","*","rU",".","w","+","rU",".","xyz",";","rZ","=","mix","(","r_",",","rY",",","rV",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rZ",",","1.0",")",")",";","}","vec3","sj","(","in","vec3","sb",",","in","vec4","sc",",","in","vec4","sd",",","in","float","se",")","{","vec4","sf",";","vec3","sg",",","sh",",","si",";","sg","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sb",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["sf","=","rP","(","sc",",","sd",",","se",")",";","sh","=","i","(","sf",",","sg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["si","=","i","(","sc",",","sg",")",";","sg","=","i","(","sd",",","sg",")",";","sh","=","mix","(","si",",","sg",",","se",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sh",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","sa","(","in","vec3","sk",",","in","vec4","sl",",","in","vec4","sm",")","{","vec3","sn",";","sn","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sk",",","1.0",")",")",";","sn","=","i","(","sl",",","sn",")",";","sn","=","sn","*","sm",".","w","+","sm",".","xyz",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sn",",","1.0",")",")",";","}","vec3","sj","(","in","vec3","so",",","in","vec4","sp",")","{","vec3","sq",";","sq","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","so",",","0.0",")",")",";","sq","=","i","(","sp",",","sq",")",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sq",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","sF","(","inout","vec3","sr",",","inout","vec3","ss",",","inout","vec3","st",",","inout","vec3","su",")","{","int","sv",",","sw",";","vec4","sx",";","vec3","sy",",","sz",",","sA",",","sB",";","float","sC",",","sD",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sC","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","sy","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sz","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sA","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sB","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sx","=","a_influence",";","for","(","int","sE","=","0",";","sE","<","4",";","sE","++",")","{","sv","=","int","(","sx","[","sE","]",")",";","sD","=","fract","(","sx","[","sE","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sy","+=","sD","*","sa","(","sr",",","u_quatsb","[","sv","]",",","u_quatsa","[","sv","]",",","u_transb","[","sv","]",",","u_transa","[","sv","]",",","sC",")",";","sz","+=","sD","*","sj","(","ss",",","u_quatsb","[","sv","]",",","u_quatsa","[","sv","]",",","sC",")",";","sA","+=","sD","*","sj","(","st",",","u_quatsb","[","sv","]",",","u_quatsa","[","sv","]",",","sC",")",";","sB","+=","sD","*","sj","(","su",",","u_quatsb","[","sv","]",",","u_quatsa","[","sv","]",",","sC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sy","+=","sD","*","sa","(","sr",",","u_quatsb","[","sv","]",",","u_transb","[","sv","]",")",";","sB","+=","sD","*","sj","(","su",",","u_quatsb","[","sv","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["sz","+=","sD","*","sj","(","ss",",","u_quatsb","[","sv","]",")",";","sA","+=","sD","*","sj","(","st",",","u_quatsb","[","sv","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","sr","=","sy",";","su","=","sB",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ss","=","sz",";","st","=","sA",";"]}]}}]},{type:"textline",tokens:["}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","sw","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","sw",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sr","=","sa","(","sr",",","u_quatsb","[","sw","]",",","u_quatsa","[","sw","]",",","u_transb","[","sw","]",",","u_transa","[","sw","]",",","sC",")",";","ss","=","sj","(","ss",",","u_quatsb","[","sw","]",",","u_quatsa","[","sw","]",",","sC",")",";","st","=","sj","(","st",",","u_quatsb","[","sw","]",",","u_quatsa","[","sw","]",",","sC",")",";","su","=","sj","(","su",",","u_quatsb","[","sw","]",",","u_quatsa","[","sw","]",",","sC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sr","=","sa","(","sr",",","u_quatsb","[","sw","]",",","u_transb","[","sw","]",")",";","su","=","sj","(","su",",","u_quatsb","[","sw","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ss","=","sj","(","ss",",","u_quatsb","[","sw","]",")",";","st","=","sj","(","st",",","u_quatsb","[","sw","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","sQ","(","inout","vec3","sG",",","in","vec3","sH",",","in","float","sI",",","in","float","sJ",",","in","float","sK",",","in","vec3","sL",",","in","float","sM",")","{","vec3","sN",";","float","sO",",","sP",";","sO","=","length","(","sH",")",";","sP","=","sJ","*","(","1.0","+","0.1","*","fract","(","sO",")",")",";","sO","=","sI","*","sM","*","(","1.0","+","sin","(","2.0","*","3.14","*","sK","*","sP","+","sO",")",")",";","sP","=","(","sG",".","y","-","sH",".","y",")","*","abs","(","sO",")",";","sP","+=","1.0",";","sP","*=","sP",";","sP","=","sP","*","sP","-","sP",";","sN","=","sG",";","sN",".","xz","+=","sL",".","xz","*","sP","*","sign","(","sO",")",";","sN","=","sN","-","sH",";","if","(","all","(","equal","(","sN",",","vec3","(","0.0",")",")",")",")","sG","=","sH",";","else","{","sO","=","length","(","sG","-","sH",")",";","sG","=","sH","+","normalize","(","sN",")","*","sO",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","sS","(","vec4","sR",")","{","return","sR","*","sR","*","(","3.0","-","2.0","*","sR",")",";","}","vec4","sU","(","vec4","sT",")","{","return","abs","(","fract","(","sT","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","sW","(","vec4","sV",")","{","return","sS","(","sU","(","sV",")",")",";","}","void","tm","(","inout","vec3","sX",",","in","float","sY",",","in","vec3","sZ",",","in","vec3","s_",",","in","vec3","ta",",","in","float","tb",",","in","float","tc",",","in","float","td",",","in","vec3","te",")","{","vec3","tf",";","vec4","tg",";","vec2","th",",","ti",";","float","tj",",","tk",",","tl",";","tj","=","dot","(","ta",",","vec3","(","1.0",")",")",";","tk","=","tj","+","te",".","g",";","tl","=","dot","(","sX",",","vec3","(","te",".","g",")",")",";","th","=","(","sY","+","vec2","(","tl",",","tk",")",")",";","tg","=","(","(","fract","(","(","th",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","s_",")","*","tb",";","tg","=","sW","(","tg",")",";","ti","=","tg",".","xz","+","tg",".","yw",";","ti",".","y","=","0.5","-","ti",".","y",";","tf","=","ti",".","xyx","*","te",".","rbr","*","vec3","(","tc","*","sZ",".","x",",","td",",","tc","*","sZ",".","z",")",";","sX","+=","tf",";","}"]}]}}]},{type:"textline",tokens:["void","tt","(","inout","vec3","tn",",","inout","vec3","to",",","in","vec3","tp",")","{","vec3","tq",",","tr",",","ts",";","tq","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tr","=","to",";","ts","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tr","=","tn",";","ts","=","to",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tm","(","tr",",","u_time",",","tp",",","tq",",","ts",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["sQ","(","tr",",","ts",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tq",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sQ","(","tr",",","ts",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tq",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tn","+=","tr","-","to",";","to","=","tr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tr",";","to","=","ts",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2},"PARTICLE_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","eg",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eG","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eF","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eH","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["ez","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"],is_optional:false},{type:"node_param",name:"tu",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tu","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"],is_optional:false},{type:"node_param",name:"tv",qualifier:["varying","float"],is_optional:false}],statements:[{type:"textline",tokens:["tv","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"tw",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["tw","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"],is_optional:false},{type:"node_param",name:"tx",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tx","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","ty","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","tE","(","vec3","tA",",","float","tB",",","vec2","tC",")","{","vec2","tD",";","tD","=","vec2","(","(","tA",".","x","-","tC",".","x",")","/","tB",",","-","(","tA",".","z","-","tC",".","y",")","/","tB",")",";","return","fract","(","tD",")",";","}","vec2","tI","(","vec2","tF",",","float","tG",",","vec2","tH",")","{","return","vec2","(","tF",".","x","*","tG",",","-","tF",".","y","*","tG",")","+","tH",";","}","c","tJ","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","ue","(","vec3","tK",",","vec3","tL",",","vec3","tM",",","vec3","tN",",","vec3","tO",",","PRECISION","sampler2D","tP",",","sampler2D","tQ",",","vec3","tR",",","float","tS",",","vec3","tT",",","vec4","tU",",","mat4","tV",")","{","mat4","tW",";","vec4","tX",";","vec2","tY",",","tZ",",","t_",";","float","ua",",","ub",";","vec3","uc",";","uc","=","i","(","tU",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","ua","=","-","uc",".","x",";","ub","=","-","uc",".","z",";","tY","=","vec2","(","tT",".","x","+","tS","*","(","-","1.0","-","ua",")","/","2.0",",","tT",".","z","+","tS","*","(","1.0","-","ub",")","/","2.0",")",";","tZ","=","tE","(","tO",",","tS",",","tY",")",";","ub","=","tS","/","2.0",";","t_","=","abs","(","tI","(","tZ","-","vec2","(","0.5",")",",","tS",",","vec2","(","0.0",")",")",")",";","ub","=","ub","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","t_",")",">","ub",")","return","tJ","(",")",";","ub","=","tS","/","tR",".","z",";","t_","=","(","tZ","-","vec2","(","0.5",")",")","*","ub","+","vec2","(","0.5",")",";","uc","=","uc","*","(","tS","/","tR",".","z","-","1.0",")","/","2.0",";","t_",".","x","+=","uc",".","x",";","t_",".","y","-=","uc",".","z",";","tX","=","texture2D","(","tQ",",","t_",")",";","ub","=","tX",".","r",";","if","(","ub","<","u_scale_threshold",")","return","tJ","(",")",";","ua","=","tR",".","y","-","tR",".","x",";","ua","=","tR",".","y","-","texture2D","(","tP",",","t_",")",".","r","*","ua",";","t_","=","tK",".","xz","-","tO",".","xz",";","tO",".","xz","=","tI","(","tZ",",","tS",",","tY",")",";","tO",".","y","=","ua",";","tK",".","xz","=","tO",".","xz","+","t_",";","tK",".","y","*=","ub",";","tK",".","y","+=","ua",";","uc","=","tX",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tK","-=","tO",";","tW","=","rs","(","tT",",","tO",",","tV",")",";","c","ud","=","rF","(","tK",",","tO",",","tL",",","tM",",","tN",",","tW",")",";","ud",".","b","=","tO",";","ud",".","f","=","uc",";","return","E","(","ud",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","E","(","c","(","tK",",","tO",",","tL",",","tM",",","tN",",","uc",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/halo_color.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","ui","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","ui","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","uk","(","float","uj",")","{","return","uj","-","floor","(","uj","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","ut","(","inout","float","ul",",","in","float","um","[","ui","]",",","in","float","un",")","{","float","uo",",","up",",","uq",",","ur",";","for","(","int","us","=","0",";","us","<","NUM_RINGS",";","us","++",")","{","uo","=","40.0","*","um","[","us","]",";","up","=","300.0","*","(","uk","(","uo",")","-","0.005",")",";","uq","=","uo",";","ur","=","abs","(","uq","*","(","u_halo_size","*","up","-","un",")",")",";","ul","+=","1.0","-","min","(","ur",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","uC","(","inout","float","uu",",","in","float","uv","[","ui","]",",","in","float","uw",")","{","float","ux",",","uy",",","uz",",","uA",";","for","(","int","uB","=","0",";","uB","<","NUM_LINES",";","uB","++",")","{","ux","=","uv","[","uB","]",";","uy","=","ux",";","uz","=","1000.0","*","(","uk","(","ux",")","-","0.005",")",";","uA","=","20.0","*","abs","(","uy","*","bM",".","x","+","uz","*","bM",".","y",")",";","uu","+=","1.0","-","min","(","uA",",","1.0",")",";","}","uu","*=","uw",";","}"]}]}}]},{type:"textline",tokens:["void","uJ","(","inout","float","uD",",","in","vec2","uE",")","{","float","uF",",","uG",",","uH",",","uI",";","uG","=","atan","(","uE",".","y",",","uE",".","x",")",";","uG","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","uH","=","cos","(","uG",")",";","uI","=","sin","(","uG",")",";","uG","=","(","uH","*","uE",".","x","+","uI","*","uE",".","y",")","*","(","uH","*","uE",".","y","-","uI","*","uE",".","x",")",";","uF","=","abs","(","uG",")",";","if","(","uF","<","1.0",")","{","uF","=","(","0.01","*","u_halo_size",")","/","(","uF",")",";","uD","*=","sqrt","(","min","(","uF",",","1.0",")",")",";","}","}","vec4","uS","(",")","{","vec4","uK",";","vec3","uL",";","float","uM",",","uN",",","uO",",","uP",";","uM","=","(","bM",".","x","*","bM",".","x","+","bM",".","y","*","bM",".","y",")",";","uN","=","sqrt","(","uM",")",";","uM","=","max","(","1.0","-","uM",",","0.0",")",";","uM","=","pow","(","uM",",","u_halo_hardness",")",";","uO","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","uQ","[","ui","]",";","for","(","int","uR","=","0",";","uR","<","ui",";","uR","++",")","{","uQ","[","uR","]","=","fract","(","uh","/","float","(","uR","+","1",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uP","=","0.0",";","ut","(","uP",",","uQ",",","uN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uN","=","0.0",";","uC","(","uN",",","uQ",",","uM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uJ","(","uM",",","bM",")",";"]}]}}]},{type:"textline",tokens:["uM","*=","uO",";","uL","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uP","*=","uM",";","uL","+=","u_halo_rings_color","*","uP",";","uM","+=","uP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uN","*=","uO",";","uL","+=","u_halo_lines_color","*","uN",";","uM","+=","uN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uM","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uN","=","u_halo_stars_blend","*","(","ug",".","y","-","u_halo_stars_height",")",";","uM","*=","clamp","(","uN",",","0.0",",","1.0",")",";","uM","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["uK","=","vec4","(","uL",",","uM",")",";","return","uK",";","}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["void","uZ","(","inout","vec3","uT",",","in","float","uU",",","in","float","uV",",","in","vec4","uW",")","{","float","uX",",","uY",";","uX","=","clamp","(","(","uU","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uX","*=","uX",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uX","=","sqrt","(","uX",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","uV",">","u_fog_params",".","w",")","uX","=","0.0",";","else","{","uY","=","(","u_fog_params",".","w","-","max","(","uV",",","0.0",")",")","/","u_fog_params",".","w",";","uX","*=","uY","*","uY",";","}","}","uW",".","a","=","1.0","-","(","1.0","-","uX",")","*","(","1.0","-","u_fog_params",".","x",")",";","uT","=","mix","(","uT",",","uW",".","rgb",",","uW",".","a",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ve","(","in","mat4","u_",",","in","vec3","va",")","{","vec3","vb",",","vc",",","vd",";","vb","=","mix","(","u_","[","0","]",".","rgb",",","u_","[","1","]",".","rgb",",","max","(","sign","(","va",".","x",")",",","0.0",")",")",";","vc","=","mix","(","u_","[","2","]",".","rgb",",","u_","[","3","]",".","rgb",",","max","(","sign","(","va",".","z",")",",","0.0",")",")",";","vd","=","vec3","(","u_","[","0","]",".","a",",","u_","[","1","]",".","a",",","u_","[","2","]",".","a",")",";","vc","=","mix","(","vb",",","vc",",","abs","(","va",".","z",")",")",";","vc","=","mix","(","vc",",","vd",",","abs","(","va",".","y",")",")",";","br","(","vc",")",";","return","vc",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","vg","(","inout","float","vf",")","{","vf","-=","0.5",";","vf","=","4.0","*","(","vf","*","vf","*","vf",")","+","0.5",";","}"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","vr","(","inout","vec3","vh",",","in","float","vi",",","in","vec3","vj",",","in","float","vk",",","in","vec4","vl",",","in","float","vm",")","{","vec3","vn",",","vo",";","float","vp",",","vq",";","vp","=","max","(","vj",".","y",",","0.0",")",";","vq","=","max","(","vi","-","max","(","vk","/","vp",",","0.0",")",",","0.0",")",";","vq","=","vl",".","w","*","vq",";","vn","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vo","=","vl",".","rgb",";","vq","=","min","(","vq",",","1.0",")",";","vg","(","vq",")",";","vq","*=","clamp","(","2.0","-","vm",",","0.0",",","1.0",")",";","vn","=","mix","(","vo",",","vn",",","min","(","vp",",","1.0",")",")",";","vk","=","clamp","(","-","vk","*","0.03",",","0.0",",","0.8",")",";","vn","*=","1.0","-","vk",";","vh","=","mix","(","vh",",","vn",",","vq",")",";","}"]}]}}]}]}}]},{type:"textline",tokens:["void","vy","(","inout","vec3","vs",",","float","vt",",","vec3","vu",",","float","vv",")","{","vec4","vw",";","vec3","vx",";"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vx","=","ve","(","u_cube_fog",",","vu",")",";","vw","=","vec4","(","vx",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vw","=","u_fog_color_density",";"]}]}}]},{type:"textline",tokens:["uZ","(","vs",",","vt",",","bC",".","y",",","vw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vr","(","vs",",","vt",",","vu",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","vv",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["}"]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","vH","(","mat4","vB",",","vec4","vC",",","mat4","vD",")","{","vec4","vE",";","float","vF",";","vec2","vG",";","vG","=","(","vB","*","vD","[","3","]",")",".","xy",";","vF","=","SHADOW_TEX_RES","/","2.0",";","vG","=","floor","(","vG","*","vF","+","0.5",")","/","vF","-","vG",";","vE","=","vB","*","vC",";","vE",".","xy","+=","vG",";","vE",".","xyz","=","0.5","*","(","vE",".","xyz","+","vE",".","w",")",";","return","vE",";","}","void","vM","(","vec3","vI",",","vec3","vJ",")","{","vec4","vK",";","mat4","vL",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vL","=","O","(","u_v_light_tsr","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vL","=","O","(","mat3","(","u_v_light_ts","[","0","]",",","u_v_light_r","[","0","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vK","=","vL","*","vec4","(","vI","+","u_normal_offset","*","vJ",",","1.0",")",";","bI","=","vH","(","u_p_light_matrix0",",","vK",",","vL",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vL","=","O","(","u_v_light_tsr","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vL","=","O","(","mat3","(","u_v_light_ts","[","1","]",",","u_v_light_r","[","1","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vK","=","vL","*","vec4","(","vI","+","u_normal_offset","*","vJ",",","1.0",")",";","bJ","=","vH","(","u_p_light_matrix1",",","vK",",","vL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vL","=","O","(","u_v_light_tsr","[","2","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vL","=","O","(","mat3","(","u_v_light_ts","[","2","]",",","u_v_light_r","[","2","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vK","=","vL","*","vec4","(","vI","+","u_normal_offset","*","vJ",",","1.0",")",";","bK","=","vH","(","u_p_light_matrix2",",","vK",",","vL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vL","=","O","(","u_v_light_tsr","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vL","=","O","(","mat3","(","u_v_light_ts","[","3","]",",","u_v_light_r","[","3","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vK","=","vL","*","vec4","(","vI","+","u_normal_offset","*","vJ",",","1.0",")",";","bL","=","vH","(","u_p_light_matrix3",",","vK",",","vL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","vH","(","u_p_light_matrix1",",","vK",",","vL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bK","=","vH","(","u_p_light_matrix2",",","vK",",","vL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bL","=","vH","(","u_p_light_matrix3",",","vK",",","vL",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","vN","=","0.5",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"wk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wo",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wp",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"wq",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"wr",qualifier:["vec4"],is_optional:true},{type:"node_out",name:"ws",qualifier:["float"],is_optional:true},{type:"node_out",name:"wt",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["wk","=","vO",";","wl","=","vP",";","wm","=","vQ",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wn"],statements:[{type:"textline",tokens:["wn","=","vR",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wo"],statements:[{type:"textline",tokens:["wo","=","vT",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wq"],statements:[{type:"textline",tokens:["wq","=","vV",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wp"],statements:[{type:"textline",tokens:["wp","=","vW",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wr"],statements:[{type:"textline",tokens:["wr","=","vX",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ws"],statements:[{type:"textline",tokens:["ws","=","vY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wt"],statements:[{type:"textline",tokens:["wt","=","vZ",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"wu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ww",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wx",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"wy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["wx","=","vec4","(","wu","+","ww","*","wv",",","ZERO_VALUE_NODES",")",";","wy","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"wz",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"wA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wB",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wB","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["wD","=","vN",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["wD","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["wC","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["wC","*=","wz","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["wi","=","u_light_positions","[","LAMP_IND","]",";","wA","=","wi","-","vS",";"]},{type:"textline",tokens:["wb","=","length","(","wA",")",";","wC","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","wb","*","wb",")",";","wA","=","normalize","(","wA",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["wi","=","u_light_directions","[","LAMP_IND","]",";","wb","=","dot","(","wA",",","wi",")",";","wb","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","wb","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","wC","*=","wb",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["wA","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"wE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wF",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wH",qualifier:["float"],is_optional:false},{type:"node_in",name:"wI",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wJ","=","ZERO_VALUE_NODES",";","if","(","wF",".","r","!=","ZERO_VALUE_NODES",")","{","wb","=","(","UNITY_VALUE_NODES","-","wH",")","*","dot","(","wG",",","wE",")","+","wH",";","if","(","wI","[","0","]","==","ZERO_VALUE_NODES",")","{","wJ","=","UNITY_VALUE_NODES",";","}","else","{","wb","=","UNITY_VALUE_NODES","+","abs","(","wb",")",";","wb","=","wI","[","1","]","+","(","UNITY_VALUE_NODES","-","wI","[","1","]",")","*","pow","(","wb",",","wI","[","0","]",")",";","wJ","=","clamp","(","wb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","wJ","=","max","(","wJ",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"wK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wL",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wN",qualifier:["float"],is_optional:false},{type:"node_out",name:"wO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wO","=","ZERO_VALUE_NODES",";","if","(","wL",".","r","!=","ZERO_VALUE_NODES",")","{","wb","=","(","UNITY_VALUE_NODES","-","wN",")","*","dot","(","wM",",","wK",")","+","wN",";","wO","=","max","(","wb",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"wP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wQ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wS",qualifier:["float"],is_optional:false},{type:"node_in",name:"wT",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wU","=","ZERO_VALUE_NODES",";","if","(","wQ",".","r","!=","ZERO_VALUE_NODES",")","{","wb","=","(","UNITY_VALUE_NODES","-","wS",")","*","dot","(","wR",",","wP",")","+","wS",";","if","(","wT","[","0","]",">","ZERO_VALUE_NODES",")","{","wc","=","max","(","dot","(","wR",",","vU",")",",","ZERO_VALUE_NODES",")",";","wd","=","wT","[","0","]","*","wT","[","0","]",";","we","=","UNITY_VALUE_NODES","-","vN","*","(","wd","/","(","wd","+","0.33",")",")",";","wi","=","wP","-","wb","*","wR",";","wj","=","vU","-","wc","*","wR",";"]},{type:"textline",tokens:["if","(","length","(","wi",")","==","ZERO_VALUE_NODES","||","length","(","wj",")","==","ZERO_VALUE_NODES","||","abs","(","wb",")",">","UNITY_VALUE_NODES","||","abs","(","wc",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["wU","=","wb","*","we",";","else","{","wf","=","acos","(","wb",")",";","wc","=","acos","(","wc",")",";","wi","=","normalize","(","wi",")",";","wj","=","normalize","(","wj",")",";","wg","=","max","(","wf",",","wc",")",";","wh","=","min","(","wf",",","wc",")",";","wh","*=","0.95",";","wc","=","max","(","dot","(","wi",",","wj",")",",","ZERO_VALUE_NODES",")",";","wd","=","0.45","*","(","wd","/","(","wd","+","0.09",")",")",";","wU","=","wb","*","(","we","+","(","wd","*","wc","*","sin","(","wg",")","*","tan","(","wh",")",")",")",";","}","}","else","wU","=","wb",";","wU","=","max","(","wU",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"wV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wW",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wY",qualifier:["float"],is_optional:false},{type:"node_in",name:"wZ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"w_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["w_","=","ZERO_VALUE_NODES",";","if","(","wW",".","r","!=","ZERO_VALUE_NODES",")","{","wb","=","(","UNITY_VALUE_NODES","-","wY",")","*","dot","(","wX",",","wV",")","+","wY",";","wh","=","max","(","dot","(","wX",",","vU",")",",","ZERO_VALUE_NODES",")",";","if","(","wZ","[","0","]","<=","UNITY_VALUE_NODES",")","w_","=","wb","*","pow","(","max","(","wh","*","wb",",","0.1",")",",","wZ","[","0","]","-","UNITY_VALUE_NODES",")",";","else","w_","=","wb","*","pow","(","1.0001","-","wh",",","wZ","[","0","]","-","UNITY_VALUE_NODES",")",";","w_","=","max","(","w_",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"xa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xb",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xd",qualifier:["float"],is_optional:false},{type:"node_in",name:"xe",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xf",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xf","=","ZERO_VALUE_NODES",";","if","(","xb",".","r","!=","ZERO_VALUE_NODES",")","{","wh","=","(","UNITY_VALUE_NODES","-","xd",")","*","dot","(","xc",",","xa",")","+","xd",";","wh","=","acos","(","wh",")",";","if","(","wh","<","xe","[","0","]",")","xf","=","UNITY_VALUE_NODES",";","else","if","(","wh",">","(","xe","[","0","]","+","xe","[","1","]",")","||","xe","[","1","]","==","ZERO_VALUE_NODES",")","xf","=","ZERO_VALUE_NODES",";","else","xf","=","UNITY_VALUE_NODES","-","(","(","wh","-","xe","[","0","]",")","/","xe","[","1","]",")",";","xf","=","max","(","xf",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"xg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xh",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xj",qualifier:["float"],is_optional:false},{type:"node_in",name:"xk",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xl","=","ZERO_VALUE_NODES",";","if","(","xh",".","g","!=","ZERO_VALUE_NODES",")","{","wj","=","normalize","(","xg","+","vU",")",";","xl","=","(","UNITY_VALUE_NODES","-","xj",")","*","max","(","dot","(","xi",",","wj",")",",","ZERO_VALUE_NODES",")","+","xj",";","xl","=","pow","(","xl",",","xk","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"xm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xn",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xp",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xq","=","ZERO_VALUE_NODES",";","if","(","xn",".","g","!=","ZERO_VALUE_NODES",")","{","wj","=","normalize","(","xm","+","vU",")",";","wh","=","max","(","dot","(","xo",",","wj",")",",","0.001",")",";"]},{type:"textline",tokens:["wb","=","max","(","dot","(","xo",",","vU",")",",","0.01",")",";","wg","=","max","(","dot","(","xo",",","xm",")",",","0.01",")",";","wh","=","tan","(","acos","(","wh",")",")",";","wc","=","max","(","xp","[","0","]",",","0.001",")",";","xq","=","wg","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","wc","*","wc",")",")","*","(","exp","(","-","(","wh","*","wh",")","/","(","wc","*","wc",")",")","/","(","sqrt","(","wb","*","wg",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"xr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xs",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xu",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xv","=","ZERO_VALUE_NODES",";","if","(","xs",".","g","!=","ZERO_VALUE_NODES",")","{","wj","=","normalize","(","xr","+","vU",")",";","wg","=","acos","(","dot","(","wj",",","xt",")",")",";","if","(","wg","<","xu","[","0","]",")","xv","=","UNITY_VALUE_NODES",";","else","if","(","wg",">=","xu","[","0","]","+","xu","[","1","]","||","xu","[","1","]","==","ZERO_VALUE_NODES",")","xv","=","ZERO_VALUE_NODES",";","else","xv","=","UNITY_VALUE_NODES","-","(","wg","-","xu","[","0","]",")","/","xu","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"xw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xx",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xz",qualifier:["float"],is_optional:false},{type:"node_in",name:"xA",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xB","=","ZERO_VALUE_NODES",";","if","(","xx",".","g","!=","ZERO_VALUE_NODES",")","{","if","(","xA","[","0","]","<","1.0","||","xA","[","1","]","==","ZERO_VALUE_NODES",")","xB","=","ZERO_VALUE_NODES",";","else","{","if","(","xA","[","1","]","<","100.0",")","xA","[","1","]","=","sqrt","(","1.0","/","xA","[","1","]",")",";","else","xA","[","1","]","=","10.0","/","xA","[","1","]",";","wj","=","normalize","(","vU","+","xw",")",";","wg","=","(","UNITY_VALUE_NODES","-","xz",")","*","max","(","dot","(","xy",",","wj",")",",","ZERO_VALUE_NODES",")","+","xz",";","if","(","wg","<","ZERO_VALUE_NODES",")","xB","=","ZERO_VALUE_NODES",";","else","{","wb","=","max","(","dot","(","xy",",","vU",")",",","0.01",")",";","wc","=","dot","(","xy",",","xw",")",";","if","(","wc","<=","0.01",")","xB","=","ZERO_VALUE_NODES",";","else","{","wh","=","max","(","dot","(","vU",",","wj",")",",","0.01",")",";","wd","=","UNITY_VALUE_NODES",";","wb","=","(","2.0","*","wg","*","wb",")","/","wh",";","wc","=","(","2.0","*","wg","*","wc",")","/","wh",";","wc","=","min","(","min","(","wd",",","wb",")",",","wc",")",";","wb","=","sqrt","(","pow","(","xA","[","0","]",",","2.0",")","+","pow","(","wh",",","2.0",")","-","UNITY_VALUE_NODES",")",";","wh","=","pow","(","wb","-","wh",",","2.0",")","/","pow","(","wb","+","wh",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","wh","*","(","wb","+","wh",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","wh","*","(","wb","-","wh",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","wg","=","acos","(","wg",")",";","xB","=","max","(","wh","*","wc","*","exp","(","-","pow","(","wg",",","2.0",")","/","(","2.0","*","pow","(","xA","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"xC",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xE",qualifier:["float"],is_optional:false},{type:"node_in",name:"xF",qualifier:["float"],is_optional:false},{type:"node_in",name:"xG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xI",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xM",qualifier:["float"],is_optional:false},{type:"node_out",name:"xN",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"xO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xO","=","xD","+","xL","*","xK","*","xF",";","xN","=","xC","+","vec4","(","xL","*","xJ","*","xE",",","xF",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"xP",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["v_","=","xP",".","rgb",";","wa","=","xQ",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","xR","(","vec3","vO",",","vec3","vP",",","vec3","vQ",",","vec3","vR",",","vec3","vS",",","vec3","vT",",","vec3","vU",",","vec2","vV",",","vec2","vW",",","vec4","vX",",","float","vY",",","vec4","vZ",",","out","vec3","v_",",","out","vec3","wa",")","{","float","wb",",","wc",",","wd",",","we",",","wf",",","wg",",","wh",";","vec3","wi",",","wj",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NODE_TEX_ROW",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","xS","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xX","(","vec3","xT",")","{","float","xU",",","xV",";","vec4","xW",";","xW","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","xW","=","mix","(","vec4","(","xT",".","bg",",","xW",".","wz",")",",","vec4","(","xT",".","gb",",","xW",".","xy",")",",","step","(","xT",".","b",",","xT",".","g",")",")",";","xW","=","mix","(","vec4","(","xW",".","xyw",",","xT",".","r",")",",","vec4","(","xT",".","r",",","xW",".","yzx",")",",","step","(","xW",".","x",",","xT",".","r",")",")",";","xU","=","xW",".","x","-","min","(","xW",".","w",",","xW",".","y",")",";","xV","=","1.0e-10",";","return","vec3","(","abs","(","xW",".","z","+","(","xW",".","w","-","xW",".","y",")","/","(","6.0","*","xU","+","xV",")",")",",","xU","/","(","xW",".","x","+","xV",")",",","xW",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ya","(","vec3","xY",")","{","vec3","xZ",";","vec4","x_",";","x_","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","xZ","=","abs","(","fract","(","vec3","(","xY",".","r",",","xY",".","r",",","xY",".","r",")","+","x_",".","xyz",")","*","6.0","-","x_",".","www",")",";","return","xY",".","b","*","mix","(","x_",".","xxx",",","clamp","(","xZ","-","x_",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","xY",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yc","(","vec2","yb",")","{","return","vec3","(","yb","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ye","(","vec3","yd",")","{","return","vec2","(","yd",".","xy","*","xS","+","vec2","(","xS",",","xS",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"yT",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"yU",qualifier:["float"],is_optional:true},{type:"node_out",name:"yV",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yT"],statements:[{type:"textline",tokens:["yT","=","normalize","(","yK",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yU"],statements:[{type:"textline",tokens:["yU","=","abs","(","yK",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yV"],statements:[{type:"textline",tokens:["yV","=","length","(","yK",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"yW",qualifier:["float"],is_optional:false},{type:"node_in",name:"yX",qualifier:["float"],is_optional:false},{type:"node_in",name:"yY",qualifier:["float"],is_optional:false},{type:"node_out",name:"yZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yZ","=","vec3","(","yW",",","yX",",","yY",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"y_",qualifier:["float"],is_optional:false},{type:"node_in",name:"za",qualifier:["float"],is_optional:false},{type:"node_in",name:"zb",qualifier:["float"],is_optional:false},{type:"node_out",name:"zc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zc","=","ya","(","vec3","(","y_",",","za",",","zb",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"zd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zd","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"ze",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ze","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"zf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zf","=","yc","(","bM",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"zg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zg","=","2.0","*","vec3","(","bM",",","ZERO_VALUE_NODES",")","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"zh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zh","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"zi",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zi","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"zj",qualifier:["float"],is_optional:false},{type:"node_out",name:"zk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zj","=","UNITY_VALUE_NODES",";","zk","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"zl",qualifier:["float"],is_optional:false},{type:"node_out",name:"zm",qualifier:["float"],is_optional:false},{type:"node_out",name:"zn",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zl","=","UNITY_VALUE_NODES",";","zm","=","UNITY_VALUE_NODES",";","zn","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"zo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zo","=","yN",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"zp",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["zp","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["zp","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"zq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zq","=","yo",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"zr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zr","[","0","]","=","yK","[","0","]",";","zr","[","1","]","=","yK","[","1","]",";","zr","[","2","]","=","yK","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"zs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zs","=","vec3","(","yO",".","r",",","-","yO",".","b",",","yO",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"zt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zz",qualifier:["float"],is_optional:false},{type:"node_out",name:"zA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zt","=","vec3","(","ZERO_VALUE_NODES",")",";","zu","=","vec3","(","ZERO_VALUE_NODES",")",";","zv","=","vec3","(","ZERO_VALUE_NODES",")",";","zw","=","vec3","(","ZERO_VALUE_NODES",")",";","zx","=","vec3","(","ZERO_VALUE_NODES",")",";","zy","=","vec3","(","ZERO_VALUE_NODES",")",";","zz","=","ZERO_VALUE_NODES",";","zA","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"zB",qualifier:["float"],is_optional:false},{type:"node_in",name:"zC",qualifier:["float"],is_optional:false},{type:"node_in",name:"zD",qualifier:["float"],is_optional:false},{type:"node_in",name:"zE",qualifier:["float"],is_optional:false},{type:"node_in",name:"zF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yQ","=","xX","(","zF",")",";","yQ","[","0","]","+=","(","zB","-","xS",")",";","if","(","yQ","[","0","]",">","UNITY_VALUE_NODES",")","yQ","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","yQ","[","0","]","<","ZERO_VALUE_NODES",")","yQ","[","0","]","+=","UNITY_VALUE_NODES",";","yQ","*=","vec3","(","UNITY_VALUE_NODES",",","zC",",","zD",")",";","yQ","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","yQ",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","yQ",")",")",",","step","(","yQ",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","zG","=","mix","(","zF",",","ya","(","yQ",")",",","zE",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"zH",qualifier:["float"],is_optional:false},{type:"node_in",name:"zI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zJ","=","mix","(","zI",",","vec3","(","UNITY_VALUE_NODES",")","-","zI",",","zH",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"zK",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"zL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zM",qualifier:["float"],is_optional:false},{type:"node_out",name:"zN",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zK"],statements:[{type:"textline",tokens:["zK","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["yL","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","yQ","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","yR","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","yD","=","yL",".","z",";","if","(","yD","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["zL","=","yR","-","bC",";","zM","=","length","(","zL",")",";","zL","=","normalize","(","zL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zN"],statements:[{type:"textline",tokens:["zN","=","yD","/","(","yD","+","zM","*","zM",")",";","yD","=","yL",".","x",";","yE","=","yL",".","y",";","if","(","yD",">","-","UNITY_VALUE_NODES",")","{","yF","=","dot","(","zL",",","yQ",")",";","yF","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","yF","-","yD",")","/","yE",")",";","zN","*=","yF",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zL"],statements:[{type:"textline",tokens:["zL","=","yQ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zM"],statements:[{type:"textline",tokens:["zM","=","length","(","yR","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zN"],statements:[{type:"textline",tokens:["zN","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"zO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zP",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"zQ",qualifier:["float"],is_optional:true},{type:"node_param",name:"yf",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zP"],statements:[{type:"textline",tokens:["zP","=","yf",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zQ"],statements:[{type:"textline",tokens:["zQ","=","-","dot","(","zO",",","yf",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"zR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zS","=","-","(","yp","*","vec4","(","zR",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"zT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zU",qualifier:["float"],is_optional:false},{type:"node_in",name:"zV",qualifier:["float"],is_optional:false},{type:"node_in",name:"zW",qualifier:["float"],is_optional:false},{type:"node_in",name:"zX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zZ","=","zT",";"]},{type:"textline",tokens:["zU",";","zV",";","zW",";","zX",";","zY",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"z_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Aa",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ab",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ac",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ac","=","z_",";"]},{type:"textline",tokens:["Aa",";","Ab",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"Ad",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ae",qualifier:["float"],is_optional:false},{type:"node_in",name:"Af",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ag",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ah",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ah","=","Ad",";"]},{type:"textline",tokens:["Ae",";","Af",";","Ag",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"Ai",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Aj",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ak",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Al",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Al","=","Ai",";"]},{type:"textline",tokens:["Aj",";","Ak",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"Am",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"An",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ao",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ap",qualifier:["float"],is_optional:false},{type:"node_out",name:"Aq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Aq","=","Am",";"]},{type:"textline",tokens:["An",";","Ao",";","Ap",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"Ar",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"As",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["As","=","Ar",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"At",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Au",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Av",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Av","=","At",";"]},{type:"textline",tokens:["Au",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"Aw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ax",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ay",qualifier:["float"],is_optional:false},{type:"node_in",name:"Az",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AA","[","0","]","=","AA","[","1","]","=","AA","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Aw",";","Ax",";","Ay",";","Az",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"AB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AC",qualifier:["float"],is_optional:false},{type:"node_in",name:"AD",qualifier:["float"],is_optional:false},{type:"node_in",name:"AE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AF","=","AB",";"]},{type:"textline",tokens:["AC",";","AD",";","AE",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"AG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AH",qualifier:["float"],is_optional:false},{type:"node_in",name:"AI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AJ","=","AG",";"]},{type:"textline",tokens:["AH",";","AI",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"AK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AL",qualifier:["float"],is_optional:false},{type:"node_in",name:"AM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AN",qualifier:["float"],is_optional:false},{type:"node_in",name:"AO",qualifier:["float"],is_optional:false},{type:"node_in",name:"AP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AQ","[","0","]","=","AQ","[","1","]","=","AQ","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AK",";","AM",";","AN",";","AO",";","AP",";","AL",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"AR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AS",qualifier:["float"],is_optional:false},{type:"node_out",name:"AT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AT","=","AR",";"]},{type:"textline",tokens:["AS",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"AU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AV","[","0","]","=","AV","[","1","]","=","AV","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AU",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"AW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AW","[","0","]","=","AW","[","1","]","=","AW","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"AX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AY",qualifier:["float"],is_optional:false},{type:"node_out",name:"AZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AZ","[","0","]","=","AZ","[","1","]","=","AZ","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AX",";","AY",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"A_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ba",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bb",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bc","[","0","]","=","Bc","[","1","]","=","Bc","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["A_",";","Ba",";","Bb",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"Bd",qualifier:["float"],is_optional:false},{type:"node_in",name:"Be",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bf",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bh","=","Bg",";"]},{type:"textline",tokens:["Bd",";","Be",";","Bf",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"Bi",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bk","=","Bj",";"]},{type:"textline",tokens:["Bi",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"Bl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bm",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["CONVERT_TYPE","WORLD_TO_WORLD",{type:"equal_expr",places:2},"CONVERT_TYPE","OBJECT_TO_OBJECT",{type:"equal_expr",places:2},"CONVERT_TYPE","CAMERA_TO_CAMERA",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],statements:[{type:"textline",tokens:["Bm","=","Bl",";"]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["VECTOR_TYPE","VT_POINT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["yL","=","vec4","(","Bl",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yL","=","vec4","(","Bl",",","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bm","=","(","yq","*","yL",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bm","=","(","yt","*","yL",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bm","=","(","ys","*","yL",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bm","=","(","yq","*","ys","*","yL",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bm","=","(","yr","*","yL",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bm","=","(","yt","*","yr","*","yL",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["VECTOR_TYPE","VT_NORMAL",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bm","=","normalize","(","Bm",")",";"]}]}]}]}]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"Bn",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bo","[","0","]","=","Bo","[","1","]","=","Bo","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bn",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"Bp",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bq","[","0","]","=","Bq","[","1","]","=","Bq","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bp",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"Br",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bs",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bt",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Bs","=","Br","[","0","]",";","Bt","=","Br","[","1","]",";","Bu","=","Br","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"Bv",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bw",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bx",qualifier:["float"],is_optional:false},{type:"node_out",name:"By",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["By","[","0","]","=","Bv",";","By","[","1","]","=","Bw",";","By","[","2","]","=","Bx",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"Bz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BA",qualifier:["float"],is_optional:false},{type:"node_in",name:"BB",qualifier:["float"],is_optional:false},{type:"node_out",name:"BC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","BA","-","BB","*","xS",";","BC","=","max","(","(","UNITY_VALUE_NODES","+","BB",")","*","Bz","+","yF",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"BD",qualifier:["float"],is_optional:false},{type:"node_in",name:"BE",qualifier:["float"],is_optional:false},{type:"node_out",name:"BF",qualifier:["float"],is_optional:false},{type:"node_out",name:"BG",qualifier:["float"],is_optional:false},{type:"node_out",name:"BH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BF","=","BG","=","BH","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["BD",";","BE",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"BI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BJ","[","0","]","=","BJ","[","1","]","=","BJ","[","2","]","=","ZERO_VALUE_NODES",";","BK","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BI",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"BL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["BM","[","0","]","=","BM","[","1","]","=","BM","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["BL",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"BN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["BO","[","0","]","=","BO","[","1","]","=","BO","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["BN",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"BP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"BR",qualifier:["float"],is_optional:false},{type:"node_in",name:"BS",qualifier:["float"],is_optional:false},{type:"node_out",name:"BT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BT","[","0","]","=","BT","[","1","]","=","BT","[","2","]","=","ZERO_VALUE_NODES",";","BU","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BP",";","BQ",";","BR",";","BS",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"BV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BW",qualifier:["float"],is_optional:false},{type:"node_in",name:"BX",qualifier:["float"],is_optional:false},{type:"node_in",name:"BY",qualifier:["float"],is_optional:false},{type:"node_in",name:"BZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"B_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ca",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["B_","[","0","]","=","B_","[","1","]","=","B_","[","2","]","=","ZERO_VALUE_NODES",";","Ca","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BV",";","BW",";","BX",";","BY",";","BZ",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"Cb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cc",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ce",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cd","[","0","]","=","Cd","[","1","]","=","Cd","[","2","]","=","ZERO_VALUE_NODES",";","Ce","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cb",";","Cc",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"Cf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cg",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ch",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ci",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cj",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ck",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cl",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cn",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cm","[","0","]","=","Cm","[","1","]","=","Cm","[","2","]","=","ZERO_VALUE_NODES",";","Cn","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cf",";","Cg",";","Ch",";","Ci",";","Cj",";","Ck",";","Cl",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"Co",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cp","[","0","]","=","Cp","[","1","]","=","Cp","[","2","]","=","ZERO_VALUE_NODES",";","Cq","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Co",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"Cr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cs",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ct",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cu","[","0","]","=","Cu","[","1","]","=","Cu","[","2","]","=","ZERO_VALUE_NODES",";","Cv","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cr",";","Cs",";","Ct",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"Cw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cz",qualifier:["float"],is_optional:false},{type:"node_out",name:"CA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["CA","[","0","]","=","CA","[","1","]","=","CA","[","2","]","=","ZERO_VALUE_NODES",";","CB","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cw",";","Cx",";","Cy",";","Cz",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"CC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CG",qualifier:["float"],is_optional:false},{type:"node_in",name:"CH",qualifier:["float"],is_optional:false},{type:"node_in",name:"CI",qualifier:["float"],is_optional:false},{type:"node_in",name:"CJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"CK",qualifier:["float"],is_optional:false},{type:"node_out",name:"CL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["CL","[","0","]","=","CL","[","1","]","=","CL","[","2","]","=","ZERO_VALUE_NODES",";","CM","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["CC",";","CD",";","CE",";","CF",";","CG",";","CH",";","CI",";","CJ",";","CK",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"CN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CP","=","clamp","(","CN","+","CO",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"CQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"CR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","CQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","CT","=","yF","*","CR","+","(","UNITY_VALUE_NODES","-","yF",")","*","CS",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"CU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CV",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CU"],statements:[{type:"textline",tokens:["CU","=","yc","(","bM",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CV"],statements:[{type:"textline",tokens:["CV","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"CW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CW","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"CX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CX","=","yP",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"CY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CY","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"CZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CZ","[","0","]","=","CZ","[","1","]","=","CZ","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"C_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["C_","[","0","]","=","yK","[","0","]",";","C_","[","1","]","=","yK","[","1","]",";","C_","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"Da",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Da","[","0","]","=","Da","[","1","]","=","Da","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"Db",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Db","[","0","]","=","Db","[","1","]","=","Db","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"Dc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Dc","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"Dd",qualifier:["float"],is_optional:false},{type:"node_out",name:"De",qualifier:["float"],is_optional:false},{type:"node_out",name:"Df",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dh",qualifier:["float"],is_optional:false},{type:"node_out",name:"Di",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dj",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"yg",qualifier:["varying","vec4"],is_optional:true},{type:"node_param",name:"yh",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yi",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yj",qualifier:["varying","vec3"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["PARTICLE_BATCH"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dd"],statements:[{type:"textline",tokens:["Dd","=","yg","[","0","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_De"],statements:[{type:"textline",tokens:["De","=","yg","[","1","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Df"],statements:[{type:"textline",tokens:["Df","=","yg","[","2","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dg"],statements:[{type:"textline",tokens:["Dg","=","vec3","(","yh",".","r",",","-","yh",".","b",",","yh",".","g",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dh"],statements:[{type:"textline",tokens:["Dh","=","yg","[","3","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Di"],statements:[{type:"textline",tokens:["Di","=","vec3","(","yi",".","r",",","-","yi",".","b",",","yi",".","g",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dj"],statements:[{type:"textline",tokens:["Dj","=","vec3","(","yj",".","r",",","-","yj",".","b",",","yj",".","g",")",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["Dd","=","ZERO_VALUE_NODES",";","De","=","ZERO_VALUE_NODES",";","Df","=","ZERO_VALUE_NODES",";","Dg","=","vec3","(","ZERO_VALUE_NODES",")",";","Dh","=","ZERO_VALUE_NODES",";","Di","=","Dg",";","Dj","=","Dg",";"]}]}]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"Dk",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dl",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dm",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Dk","=","ZERO_VALUE_NODES",";","Dl","=","ZERO_VALUE_NODES",";","Dm","=","ZERO_VALUE_NODES",";","Dn","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"Do",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dp",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dq",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dp","=","ZERO_VALUE_NODES",";","Dq","=","ZERO_VALUE_NODES",";","Dr","=","ZERO_VALUE_NODES",";","Do","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"Ds",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dt","=","Ds",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"Du",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Du","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"Dv",qualifier:["float"],is_optional:false},{type:"node_in",name:"Dw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dx",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dx","=","Dy","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Dw",";","Dv",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"Dz",qualifier:["float"],is_optional:false},{type:"node_out",name:"DA",qualifier:["float"],is_optional:false},{type:"node_out",name:"DB",qualifier:["float"],is_optional:false},{type:"node_out",name:"DC",qualifier:["float"],is_optional:false},{type:"node_out",name:"DD",qualifier:["float"],is_optional:false},{type:"node_out",name:"DE",qualifier:["float"],is_optional:false},{type:"node_out",name:"DF",qualifier:["float"],is_optional:false},{type:"node_out",name:"DG",qualifier:["float"],is_optional:false},{type:"node_out",name:"DH",qualifier:["float"],is_optional:false},{type:"node_out",name:"DI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dz","=","DA","=","DB","=","ZERO_VALUE_NODES",";","DC","=","DD","=","DE","=","ZERO_VALUE_NODES",";","DF","=","DF","=","DH","=","DI","=","ZERO_VALUE_NODES",";","DG","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"DJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DJ","=","DK","=","vec3","(","ZERO_VALUE_NODES",")",";","DL","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"DM",qualifier:["float"],is_optional:false},{type:"node_in",name:"DN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["DO","=","DN",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["DO",".","r","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DN",".","r","+","0.5",",","NODE_TEX_ROW",")",")",".","r","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["DO",".","g","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DN",".","g","+","0.5",",","NODE_TEX_ROW",")",")",".","g","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["DO",".","b","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DN",".","b","+","0.5",",","NODE_TEX_ROW",")",")",".","b","-","0.5",")","*","2.0",";"]}]}]},{type:"textline",tokens:["DO","=","mix","(","DN",",","DO",",","DM",")",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"DP",qualifier:["float"],is_optional:false},{type:"node_in",name:"DQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DR",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["READ_A"],statements:[{type:"textline",tokens:["yF","=","texture2D","(","u_nodes_texture",",","vec2","(","DQ",".","r",",","NODE_TEX_ROW",")",")",".","a",";","yE","=","texture2D","(","u_nodes_texture",",","vec2","(","DQ",".","g",",","NODE_TEX_ROW",")",")",".","a",";","yD","=","texture2D","(","u_nodes_texture",",","vec2","(","DQ",".","b",",","NODE_TEX_ROW",")",")",".","a",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yF","=","DQ",".","r",";","yE","=","DQ",".","g",";","yD","=","DQ",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["DR",".","r","=","texture2D","(","u_nodes_texture",",","vec2","(","yF",",","NODE_TEX_ROW",")",")",".","r",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DR",".","r","=","yF",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["DR",".","g","=","texture2D","(","u_nodes_texture",",","vec2","(","yE",",","NODE_TEX_ROW",")",")",".","g",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DR",".","g","=","yE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["DR",".","b","=","texture2D","(","u_nodes_texture",",","vec2","(","yD",",","NODE_TEX_ROW",")",")",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DR",".","b","=","yD",";"]}]}]},{type:"textline",tokens:["DR","=","mix","(","DQ",",","DR",",","DP",")",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"DS",qualifier:["float"],is_optional:false},{type:"node_out",name:"DT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yL","=","texture2D","(","u_nodes_texture",",","vec2","(","DS",",","NODE_TEX_ROW",")",")",";","DT","=","yL",".","rgb",";","DU","=","yL",".","a",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"DV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["DW","=","DV",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["DW","=","(","MAPPING_TRS_MATRIX","*","vec4","(","DW",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["DW","=","DW","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["DW","=","DW","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["DW","=","max","(","DW",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["DW","=","min","(","DW",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["DW","=","normalize","(","DW",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"DX",qualifier:["float"],is_optional:false},{type:"node_in",name:"DY",qualifier:["float"],is_optional:false},{type:"node_out",name:"DZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DZ","=","DX","+","DY",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DZ","=","clamp","(","DZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"D_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ea",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Eb","=","D_","-","Ea",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eb","=","clamp","(","Eb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"Ec",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ed",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ee",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ee","=","Ec","*","Ed",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ee","=","clamp","(","Ee",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"Ef",qualifier:["float"],is_optional:false},{type:"node_in",name:"Eg",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Eh","=","(","Eg","!=","ZERO_VALUE_NODES",")","?","Ef","/","Eg",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eh","=","clamp","(","Eh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"Ei",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ej",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ek",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ek","=","sin","(","Ei",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ek","=","clamp","(","Ek",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ej",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"El",qualifier:["float"],is_optional:false},{type:"node_in",name:"Em",qualifier:["float"],is_optional:false},{type:"node_out",name:"En",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["En","=","cos","(","El",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["En","=","clamp","(","En",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Em",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"Eo",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ep",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Eq","=","tan","(","Eo",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eq","=","clamp","(","Eq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ep",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"Er",qualifier:["float"],is_optional:false},{type:"node_in",name:"Es",qualifier:["float"],is_optional:false},{type:"node_out",name:"Et",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Et","=","(","Er","<=","UNITY_VALUE_NODES","&&","Er",">=","-","UNITY_VALUE_NODES",")","?","asin","(","Er",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Et","=","clamp","(","Et",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Es",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"Eu",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ev",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ew",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ew","=","(","Eu","<=","UNITY_VALUE_NODES","&&","Eu",">=","-","UNITY_VALUE_NODES",")","?","acos","(","Eu",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ew","=","clamp","(","Ew",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ev",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"Ex",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ey",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ez",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ez","=","atan","(","Ex",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ez","=","clamp","(","Ez",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ey",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"EA",qualifier:["float"],is_optional:false},{type:"node_in",name:"EB",qualifier:["float"],is_optional:false},{type:"node_out",name:"EC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","EA","<","ZERO_VALUE_NODES","&&","EB","!=","floor","(","EB",")",")","EC","=","ZERO_VALUE_NODES",";","else","if","(","EB","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["EC","=","UNITY_VALUE_NODES",";","else","if","(","EA","<","ZERO_VALUE_NODES",")","EC","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","EB",",","2.0",")",")",")","*","pow","(","-","EA",",","EB",")",";","else","if","(","EA","==","ZERO_VALUE_NODES",")","EC","=","ZERO_VALUE_NODES",";","else","EC","=","pow","(","EA",",","EB",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EC","=","clamp","(","EC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"ED",qualifier:["float"],is_optional:false},{type:"node_in",name:"EE",qualifier:["float"],is_optional:false},{type:"node_out",name:"EF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EF","=","(","ED",">","ZERO_VALUE_NODES","&&","EE",">","ZERO_VALUE_NODES",")","?","log2","(","ED",")","/","log2","(","EE",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EF","=","clamp","(","EF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"EG",qualifier:["float"],is_optional:false},{type:"node_in",name:"EH",qualifier:["float"],is_optional:false},{type:"node_out",name:"EI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EI","=","min","(","EG",",","EH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EI","=","clamp","(","EI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"EJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"EK",qualifier:["float"],is_optional:false},{type:"node_out",name:"EL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EL","=","max","(","EJ",",","EK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EL","=","clamp","(","EL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"EM",qualifier:["float"],is_optional:false},{type:"node_in",name:"EN",qualifier:["float"],is_optional:false},{type:"node_out",name:"EO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EO","=","floor","(","EM","+","xS",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EO","=","clamp","(","EO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["EN",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"EP",qualifier:["float"],is_optional:false},{type:"node_in",name:"EQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"ER",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ER","=","(","EP","<","EQ",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ER","=","clamp","(","ER",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"ES",qualifier:["float"],is_optional:false},{type:"node_in",name:"ET",qualifier:["float"],is_optional:false},{type:"node_out",name:"EU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EU","=","(","ES",">","ET",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EU","=","clamp","(","EU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"EV",qualifier:["float"],is_optional:false},{type:"node_in",name:"EW",qualifier:["float"],is_optional:false},{type:"node_out",name:"EX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EX","=","abs","(","EW",")",">","0.000001","?","mod","(","EV",",","EW",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EX","=","clamp","(","EX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"EY",qualifier:["float"],is_optional:false},{type:"node_in",name:"EZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"E_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["E_","=","abs","(","EY",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["E_","=","clamp","(","E_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["EZ",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"Fa",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Fa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fd","=","mix","(","Fb",",","Fc",",","yD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fd","=","clamp","(","Fd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"Fe",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ff",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Fe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fh","=","mix","(","Ff",",","Ff","+","Fg",",","yD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fh","=","clamp","(","Fh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"Fi",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Fi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fl","=","mix","(","Fj",",","Fj","*","Fk",",","yD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fl","=","clamp","(","Fl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"Fm",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fo",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Fm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fp","=","mix","(","Fn",",","Fn","-","Fo",",","yD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fp","=","clamp","(","Fp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"Fq",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fs",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ft",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Fq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yE","=","UNITY_VALUE_NODES","-","yD",";","Ft","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","yE",")","+","yD","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fs",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fr",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Ft","=","clamp","(","Ft",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"Fu",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Fu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yE","=","UNITY_VALUE_NODES","-","yD",";","Fw","+=","step","(","Fw",",","vec3","(","ZERO_VALUE_NODES",")",")",";","Fx","=","yE","*","Fv","+","yD","*","Fv","/","Fw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fx","=","clamp","(","Fx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"Fy",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Fy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FB","=","mix","(","Fz",",","abs","(","Fz","-","FA",")",",","yD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FB","=","clamp","(","FB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"FC",qualifier:["float"],is_optional:false},{type:"node_in",name:"FD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","FC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FF","=","min","(","FD",".","rgb",",","FE",".","rgb","*","yD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FF","=","clamp","(","FF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"FG",qualifier:["float"],is_optional:false},{type:"node_in",name:"FH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","FG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FJ","=","max","(","FH",".","rgb",",","FI",".","rgb","*","yD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FJ","=","clamp","(","FJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"FK",qualifier:["float"],is_optional:false},{type:"node_in",name:"FL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","FK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yR","=","vec3","(","UNITY_VALUE_NODES","-","yD",")",";","FN","=","mix","(","FL","*","(","yR","+","2.0","*","yD","*","FM",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","yR","+","2.0","*","yD","*","(","vec3","(","UNITY_VALUE_NODES",")","-","FM",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","FL",")",",","step","(","xS",",","FL",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FN","=","clamp","(","FN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"FO",qualifier:["float"],is_optional:false},{type:"node_in",name:"FP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","FO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yR","=","vec3","(","UNITY_VALUE_NODES",")","-","yD","*","FQ",";","yQ","=","clamp","(","FP","/","yR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FR","=","mix","(","mix","(","yQ",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","yR",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","FP",",","step","(","FP",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FR","=","clamp","(","FR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"FS",qualifier:["float"],is_optional:false},{type:"node_in",name:"FT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","FS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yR","=","vec3","(","UNITY_VALUE_NODES","-","yD",")",";","yR","=","yR","+","yD","*","FU",";","yQ","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","FT",")","/","yR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FV","=","mix","(","yQ",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","yR",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FV","=","clamp","(","FV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"FW",qualifier:["float"],is_optional:false},{type:"node_in",name:"FX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","FW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FZ","=","FX",";","yQ","=","xX","(","FY",")",";","if","(","yQ",".","y","!=","ZERO_VALUE_NODES",")","{","yR","=","xX","(","FZ",")",";","yR",".","x","=","yQ",".","x",";","yS","=","ya","(","yR",")",";","FZ","=","mix","(","FZ",",","yS",",","yD",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FZ","=","clamp","(","FZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"F_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ga",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","F_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yE","=","UNITY_VALUE_NODES","-","yD",";","Gc","=","Ga",";","yS","=","xX","(","Gc",")",";","if","(","yS",".","y","!=","ZERO_VALUE_NODES",")","{","yR","=","xX","(","Gb",")",";","yS",".","y","=","yE","*","yS",".","y","+","yD","*","yR",".","y",";","Gc","=","ya","(","yS",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gc","=","clamp","(","Gc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"Gd",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ge",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Gd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yE","=","UNITY_VALUE_NODES","-","yD",";","yS","=","xX","(","Ge",")",";","yR","=","xX","(","Gf",")",";","yS",".","z","=","yE","*","yS",".","z","+","yD","*","yR",".","z",";","Gg","=","ya","(","yS",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gg","=","clamp","(","Gg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"Gh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Gh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Gk","=","Gi",";","yR","=","xX","(","Gj",")",";","if","(","yR",".","y","!=","ZERO_VALUE_NODES",")","{","yS","=","xX","(","Gk",")",";","yS",".","x","=","yR",".","x",";","yS",".","y","=","yR",".","y",";","yQ","=","ya","(","yS",")",";","Gk","=","mix","(","Gk",",","yQ",",","yD",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gk","=","clamp","(","Gk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"Gl",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Go",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Gl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yE","=","UNITY_VALUE_NODES","-","yD",";","yQ","=","Gn","+","Gm","-","Gn","*","Gm",";","Go","=","Gm","*","(","vec3","(","yE",")","+","vec3","(","yD",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","Gm",")","*","Gn","+","yQ",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Go","=","clamp","(","Go",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"Gp",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yD","=","clamp","(","Gp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Gs","=","Gq","+","yD","*","(","2.0","*","Gr","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gs","=","clamp","(","Gs",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"Gt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","Gt",";","yy","=","Gu",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"Gv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gx",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gy",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Gz",qualifier:["float"],is_optional:true},{type:"node_out",name:"GA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GF",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"GG",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"GH",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"yk",qualifier:["const","vec2"],is_optional:true},{type:"node_param",name:"yl",qualifier:["const","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["GC","=","clamp","(","Gv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["GD","=","yl","[","0","]","*","clamp","(","Gw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["GE","=","normalize","(","Gy",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GE","=","yP",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["GA","=","Gz","*","GC",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GA","=","yB","*","GC",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["GC","*=","Gx",";"]}]}]},{type:"textline",tokens:["GB","=","yC","*","u_environment_energy","*","dS","(","GE",")",";","GH","=","vec4","(","1.0",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["GF","=","vec2","(","yk","[","0","]",",","yk","[","1","]",")",";"]},{type:"textline",tokens:["GG","=","vec2","(","yl","[","1","]",",","yl","[","2","]",")",";"]}]}]},{type:"textline",tokens:["yx","=","GH",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GA","=","vec3","(","ZERO_VALUE_NODES",")",";","GB","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"GI",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"GJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GL",qualifier:["float"],is_optional:true},{type:"node_in",name:"GM",qualifier:["float"],is_optional:true},{type:"node_in",name:"GN",qualifier:["float"],is_optional:true},{type:"node_out",name:"GO",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GP",qualifier:["float"],is_optional:true},{type:"node_out",name:"GQ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GR",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GS",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"ym",qualifier:["float"],is_optional:false},{type:"node_param",name:"yn",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["GL",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GO"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["GO","=","GI",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GO","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["GO","+=","GJ",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GQ"],statements:[{type:"textline",tokens:["GQ","=","GK",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GR"],statements:[{type:"textline",tokens:["GR","=","GI",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GS"],statements:[{type:"textline",tokens:["GS","=","GJ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GP"],statements:[{type:"textline",tokens:["GP","=","clamp","(","GN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yD","=","max","(","max","(","GJ",".","r",",","GJ",".","g",")",",","GJ",".","b",")","*","GM",";","GP","=","clamp","(","GN","*","(","UNITY_VALUE_NODES","-","yD",")","+","yD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GP"],statements:[{type:"textline",tokens:["GP","=","clamp","(","ym",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yD","=","max","(","max","(","GJ",".","r",",","GJ",".","g",")",",","GJ",".","b",")","*","yn",";","GP","=","ym","*","(","UNITY_VALUE_NODES","-","yD",")","+","yD",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yv","=","GJ",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yv","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["yw","=","GK",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"GT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GW",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"GX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["GW","=","vec4","(","GT","+","GV","*","GU",",","ZERO_VALUE_NODES",")",";","GX","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"GY",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"GZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"G_",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Ha",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Hb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["G_","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Hb","=","xS",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Hb","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["Ha","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["Ha","*=","GY","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["yQ","=","u_light_positions","[","LAMP_IND","]",";","GZ","=","yQ","-","yO",";"]},{type:"textline",tokens:["yD","=","length","(","GZ",")",";","Ha","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","yD","*","yD",")",";","GZ","=","normalize","(","GZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["yQ","=","u_light_directions","[","LAMP_IND","]",";","yD","=","dot","(","GZ",",","yQ",")",";","yD","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","yD","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","Ha","*=","yD",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["GZ","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"Hc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hd",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"He",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hf",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hg",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hh","=","ZERO_VALUE_NODES",";","if","(","Hd",".","r","!=","ZERO_VALUE_NODES",")","{","yD","=","(","UNITY_VALUE_NODES","-","Hf",")","*","dot","(","He",",","Hc",")","+","Hf",";","if","(","Hg","[","0","]","==","ZERO_VALUE_NODES",")","{","Hh","=","UNITY_VALUE_NODES",";","}","else","{","yD","=","UNITY_VALUE_NODES","+","abs","(","yD",")",";","yD","=","Hg","[","1","]","+","(","UNITY_VALUE_NODES","-","Hg","[","1","]",")","*","pow","(","yD",",","Hg","[","0","]",")",";","Hh","=","clamp","(","yD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","Hh","=","max","(","Hh",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"Hi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hj",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hl",qualifier:["float"],is_optional:false},{type:"node_out",name:"Hm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hm","=","ZERO_VALUE_NODES",";","if","(","Hj",".","r","!=","ZERO_VALUE_NODES",")","{","yD","=","(","UNITY_VALUE_NODES","-","Hl",")","*","dot","(","Hk",",","Hi",")","+","Hl",";","Hm","=","max","(","yD",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"Hn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ho",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hq",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hr",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hs",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hs","=","ZERO_VALUE_NODES",";","if","(","Ho",".","r","!=","ZERO_VALUE_NODES",")","{","yD","=","(","UNITY_VALUE_NODES","-","Hq",")","*","dot","(","Hp",",","Hn",")","+","Hq",";","if","(","Hr","[","0","]",">","ZERO_VALUE_NODES",")","{","yE","=","max","(","dot","(","Hp",",","yo",")",",","ZERO_VALUE_NODES",")",";","yF","=","Hr","[","0","]","*","Hr","[","0","]",";","yG","=","UNITY_VALUE_NODES","-","xS","*","(","yF","/","(","yF","+","0.33",")",")",";","yQ","=","Hn","-","yD","*","Hp",";","yS","=","yo","-","yE","*","Hp",";"]},{type:"textline",tokens:["if","(","length","(","yQ",")","==","ZERO_VALUE_NODES","||","length","(","yS",")","==","ZERO_VALUE_NODES","||","abs","(","yD",")",">","UNITY_VALUE_NODES","||","abs","(","yE",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["Hs","=","yD","*","yG",";","else","{","yH","=","acos","(","yD",")",";","yE","=","acos","(","yE",")",";","yQ","=","normalize","(","yQ",")",";","yS","=","normalize","(","yS",")",";","yI","=","max","(","yH",",","yE",")",";","yJ","=","min","(","yH",",","yE",")",";","yJ","*=","0.95",";","yE","=","max","(","dot","(","yQ",",","yS",")",",","ZERO_VALUE_NODES",")",";","yF","=","0.45","*","(","yF","/","(","yF","+","0.09",")",")",";","Hs","=","yD","*","(","yG","+","(","yF","*","yE","*","sin","(","yI",")","*","tan","(","yJ",")",")",")",";","}","}","else","Hs","=","yD",";","Hs","=","max","(","Hs",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"Ht",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hu",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hw",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hx",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hy","=","ZERO_VALUE_NODES",";","if","(","Hu",".","r","!=","ZERO_VALUE_NODES",")","{","yD","=","(","UNITY_VALUE_NODES","-","Hw",")","*","dot","(","Hv",",","Ht",")","+","Hw",";","yJ","=","max","(","dot","(","Hv",",","yo",")",",","ZERO_VALUE_NODES",")",";","if","(","Hx","[","0","]","<=","UNITY_VALUE_NODES",")","Hy","=","yD","*","pow","(","max","(","yJ","*","yD",",","0.1",")",",","Hx","[","0","]","-","UNITY_VALUE_NODES",")",";","else","Hy","=","yD","*","pow","(","1.0001","-","yJ",",","Hx","[","0","]","-","UNITY_VALUE_NODES",")",";","Hy","=","max","(","Hy",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"Hz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HA",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HC",qualifier:["float"],is_optional:false},{type:"node_in",name:"HD",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HE","=","ZERO_VALUE_NODES",";","if","(","HA",".","r","!=","ZERO_VALUE_NODES",")","{","yJ","=","(","UNITY_VALUE_NODES","-","HC",")","*","dot","(","HB",",","Hz",")","+","HC",";","yJ","=","acos","(","yJ",")",";","if","(","yJ","<","HD","[","0","]",")","HE","=","UNITY_VALUE_NODES",";","else","if","(","yJ",">","(","HD","[","0","]","+","HD","[","1","]",")","||","HD","[","1","]","==","ZERO_VALUE_NODES",")","HE","=","ZERO_VALUE_NODES",";","else","HE","=","UNITY_VALUE_NODES","-","(","(","yJ","-","HD","[","0","]",")","/","HD","[","1","]",")",";","HE","=","max","(","HE",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"HF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HG",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HI",qualifier:["float"],is_optional:false},{type:"node_in",name:"HJ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HK","=","ZERO_VALUE_NODES",";","if","(","HG",".","g","==","UNITY_VALUE_NODES",")","{","yS","=","normalize","(","HF","+","yo",")",";","HK","=","(","UNITY_VALUE_NODES","-","HI",")","*","max","(","dot","(","HH",",","yS",")",",","ZERO_VALUE_NODES",")","+","HI",";","HK","=","pow","(","HK",",","HJ","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"HL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HM",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HO",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HP","=","ZERO_VALUE_NODES",";","if","(","HM",".","g","==","UNITY_VALUE_NODES",")","{","yS","=","normalize","(","HL","+","yo",")",";","yJ","=","max","(","dot","(","HN",",","yS",")",",","0.001",")",";"]},{type:"textline",tokens:["yD","=","max","(","dot","(","HN",",","yo",")",",","0.01",")",";","yI","=","max","(","dot","(","HN",",","HL",")",",","0.01",")",";","yJ","=","tan","(","acos","(","yJ",")",")",";","yE","=","max","(","HO","[","0","]",",","0.001",")",";","HP","=","yI","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","yE","*","yE",")",")","*","(","exp","(","-","(","yJ","*","yJ",")","/","(","yE","*","yE",")",")","/","(","sqrt","(","yD","*","yI",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"HQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HR",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HT",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HU","=","ZERO_VALUE_NODES",";","if","(","HR",".","g","==","UNITY_VALUE_NODES",")","{","yS","=","normalize","(","HQ","+","yo",")",";","yI","=","acos","(","dot","(","yS",",","HS",")",")",";","if","(","yI","<","HT","[","0","]",")","HU","=","UNITY_VALUE_NODES",";","else","if","(","yI",">=","HT","[","0","]","+","HT","[","1","]","||","HT","[","1","]","==","ZERO_VALUE_NODES",")","HU","=","ZERO_VALUE_NODES",";","else","HU","=","UNITY_VALUE_NODES","-","(","yI","-","HT","[","0","]",")","/","HT","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"HV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HW",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HY",qualifier:["float"],is_optional:false},{type:"node_in",name:"HZ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"H_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["H_","=","ZERO_VALUE_NODES",";","if","(","HW",".","g","==","UNITY_VALUE_NODES",")","{","if","(","HZ","[","0","]","<","UNITY_VALUE_NODES","||","HZ","[","1","]","==","ZERO_VALUE_NODES",")","H_","=","ZERO_VALUE_NODES",";","else","{","if","(","HZ","[","1","]","<","100.0",")","HZ","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","HZ","[","1","]",")",";","else","HZ","[","1","]","=","10.0","/","HZ","[","1","]",";","yS","=","normalize","(","yo","+","HV",")",";","yI","=","(","UNITY_VALUE_NODES","-","HY",")","*","max","(","dot","(","HX",",","yS",")",",","ZERO_VALUE_NODES",")","+","HY",";","if","(","yI","<","ZERO_VALUE_NODES",")","H_","=","ZERO_VALUE_NODES",";","else","{","yD","=","max","(","dot","(","HX",",","yo",")",",","0.01",")",";","yE","=","dot","(","HX",",","HV",")",";","if","(","yE","<=","0.01",")","H_","=","ZERO_VALUE_NODES",";","else","{","yJ","=","max","(","dot","(","yo",",","yS",")",",","0.01",")",";","yF","=","UNITY_VALUE_NODES",";","yD","=","(","2.0","*","yI","*","yD",")","/","yJ",";","yE","=","(","2.0","*","yI","*","yE",")","/","yJ",";","yE","=","min","(","min","(","yF",",","yD",")",",","yE",")",";","yD","=","sqrt","(","pow","(","HZ","[","0","]",",","2.0",")","+","pow","(","yJ",",","2.0",")","-","UNITY_VALUE_NODES",")",";","yJ","=","pow","(","yD","-","yJ",",","2.0",")","/","pow","(","yD","+","yJ",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","yJ","*","(","yD","+","yJ",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","yJ","*","(","yD","-","yJ",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","yI","=","acos","(","yI",")",";","H_","=","max","(","yJ","*","yE","*","exp","(","-","pow","(","yI",",","2.0",")","/","(","2.0","*","pow","(","HZ","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"Ia",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"Ib",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ic",qualifier:["float"],is_optional:false},{type:"node_in",name:"Id",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ie",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"If",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ig",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"Ih",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ii",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ij",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ik",qualifier:["float"],is_optional:false},{type:"node_out",name:"Il",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"Im",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","Ie",",","If",")","*","dot","(","yo",",","If",")","<","ZERO_VALUE_NODES",")","{","yI","=","Ig",".","x",";","yE","=","Ig",".","y",";","yJ","=","Ig",".","z",";","yD","=","Ig",".","w",";"]},{type:"textline",tokens:["yF","=","clamp","(","abs","(","dot","(","Ie",",","If",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yG","=","clamp","(","dot","(","yo",",","-","Ie",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yE","=","pow","(","yG",",","yE",")",";"]},{type:"textline",tokens:["Il","=","Ia","+","Ik","*","vec4","(","Ij","*","yF","*","pow","(","Ih",",","vec3","(","yI",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["Il","+=","yJ","*","mix","(","vec4","(","Ih",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","yD",")","*","Ik","*","vec4","(","Ij","*","yF","*","vec3","(","yE",")",",","UNITY_VALUE_NODES",")",";","Im","=","Ib",";","}","else","{"]},{type:"textline",tokens:["Im","=","Ib","+","Ij","*","Ii","*","Id",";","Il","=","Ia","+","vec4","(","Ij","*","Ih","*","Ic",",","Id",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Im","=","Ib","+","Ij","*","Ii","*","Id",";","Il","=","Ia","+","vec4","(","Ij","*","Ih","*","Ic",",","Id",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"In",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["In","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"Io",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ip",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ip","=","dot","(","Io",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"Iq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ir",qualifier:["float"],is_optional:true},{type:"node_out",name:"Is",qualifier:["float"],is_optional:true},{type:"node_out",name:"It",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ir"],statements:[{type:"textline",tokens:["Ir","=","Iq",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Is"],statements:[{type:"textline",tokens:["Is","=","Iq",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_It"],statements:[{type:"textline",tokens:["It","=","Iq",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"Iu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Iv",qualifier:["float"],is_optional:true},{type:"node_out",name:"Iw",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ix",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["yS","=","xX","(","Iu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Iv"],statements:[{type:"textline",tokens:["Iv","=","yS",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Iw"],statements:[{type:"textline",tokens:["Iw","=","yS",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ix"],statements:[{type:"textline",tokens:["Ix","=","yS",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"Iy",qualifier:["float"],is_optional:false},{type:"node_in",name:"Iz",qualifier:["float"],is_optional:false},{type:"node_in",name:"IA",qualifier:["float"],is_optional:false},{type:"node_out",name:"IB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["IB","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","Iy","-","IA",")","*","Iz",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"IC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ID",qualifier:["float"],is_optional:false},{type:"node_out",name:"IE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["IE","=","IC",";","if","(","IE",".","x",">","ZERO_VALUE_NODES",")","IE",".","x","=","pow","(","IC",".","x",",","ID",")",";","if","(","IE",".","y",">","ZERO_VALUE_NODES",")","IE",".","y","=","pow","(","IC",".","y",",","ID",")",";","if","(","IE",".","z",">","ZERO_VALUE_NODES",")","IE",".","z","=","pow","(","IC",".","z",",","ID",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"IF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["IG","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","IF",")",";","IG","=","pow","(","IG",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"IH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"II",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["II","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","IH",")",";","II","=","pow","(","II",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"IJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IL",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IL"],statements:[{type:"textline",tokens:["IJ","[","2","]","=","IJ","[","1","]","=","IJ","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IL"],statements:[{type:"textline",tokens:["IK","[","2","]","=","IK","[","1","]","=","IK","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IL"],statements:[{type:"textline",tokens:["IL","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"IM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IN",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IO",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"],is_optional:false}],statements:[{type:"textline",tokens:["yL","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","IM",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IN"],statements:[{type:"textline",tokens:["IN","=","yL",".","xyz",";","br","(","IN",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IO"],statements:[{type:"textline",tokens:["IO","=","yL",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"IP",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IQ",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IR",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IS",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IT",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IU",qualifier:["float"],is_optional:true},{type:"node_out",name:"IV",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IW",qualifier:["float"],is_optional:true},{type:"node_out",name:"IX",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IY",qualifier:["float"],is_optional:true},{type:"node_out",name:"IZ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"I_",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yL","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ye","(","IP",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IT"],statements:[{type:"textline",tokens:["IT","=","yL",".","xyz",";","br","(","IT",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IU"],statements:[{type:"textline",tokens:["IU","=","yL",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["yL","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ye","(","IQ",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IV"],statements:[{type:"textline",tokens:["IV","=","yL",".","xyz",";","br","(","IV",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IW"],statements:[{type:"textline",tokens:["IW","=","yL",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["yL","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ye","(","IR",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IX"],statements:[{type:"textline",tokens:["IX","=","yL",".","xyz",";","br","(","IX",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IY"],statements:[{type:"textline",tokens:["IY","=","yL",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["yL","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ye","(","IS",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IZ"],statements:[{type:"textline",tokens:["IZ","=","yL",".","xyz",";","br","(","IZ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_I_"],statements:[{type:"textline",tokens:["I_","=","yL",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"Ja",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Jb",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Jc",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Jd",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Je",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jf",qualifier:["float"],is_optional:true},{type:"node_out",name:"Jg",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jh",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ji",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jj",qualifier:["float"],is_optional:true},{type:"node_out",name:"Jk",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jl",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yL","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ye","(","Ja",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Je"],statements:[{type:"textline",tokens:["Je","=","normalize","(","yM","*","(","yL",".","xyz","-","xS",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jf"],statements:[{type:"textline",tokens:["Jf","=","yL",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["yL","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ye","(","Jb",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jg"],statements:[{type:"textline",tokens:["Jg","=","normalize","(","yM","*","(","yL",".","xyz","-","xS",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jh"],statements:[{type:"textline",tokens:["Jh","=","yL",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["yL","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ye","(","Jc",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ji"],statements:[{type:"textline",tokens:["Ji","=","normalize","(","yM","*","(","yL",".","xyz","-","xS",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jj"],statements:[{type:"textline",tokens:["Jj","=","yL",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["yL","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ye","(","Jd",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jk"],statements:[{type:"textline",tokens:["Jk","=","normalize","(","yM","*","(","yL",".","xyz","-","xS",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jl"],statements:[{type:"textline",tokens:["Jl","=","yL",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"Jm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Jm","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"Jn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jo",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jq",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jp","=","Jn","+","Jo",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jq"],statements:[{type:"textline",tokens:["Jq","=","(","abs","(","Jp","[","0","]",")","+","abs","(","Jp","[","1","]",")","+","abs","(","Jp","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"Jr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Js",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ju",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jt","=","Jr","-","Js",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ju"],statements:[{type:"textline",tokens:["Ju","=","(","abs","(","Jt","[","0","]",")","+","abs","(","Jt","[","1","]",")","+","abs","(","Jt","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"Jv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jy",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jx","=","Jv","+","Jw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jy"],statements:[{type:"textline",tokens:["Jy","=","length","(","Jx",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jx"],statements:[{type:"textline",tokens:["Jx","=","normalize","(","Jx",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"Jz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JC",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["JB","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JC"],statements:[{type:"textline",tokens:["JC","=","dot","(","Jz",",","JA",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"JD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JG",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["JF","=","cross","(","JD",",","JE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JG"],statements:[{type:"textline",tokens:["JG","=","length","(","JF",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"JH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JK",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["JJ","=","normalize","(","JH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JK"],statements:[{type:"textline",tokens:["JK","=","length","(","JH",")",";"]}]}]},{type:"textline",tokens:["JI",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"JL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JN","=","reflect","(","-","JL",",","JM",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"JO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JP",qualifier:["float"],is_optional:false},{type:"node_in",name:"JQ",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"JR",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"JS",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yE","=","length","(","yK",")",";","if","(","yE","<","JR",")","{","yz","=","ye","(","JO",")",";","yE","=","clamp","(","xS","*","(","JR","-","yE",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yE","=","JP","*","yE",";"]},{type:"textline",tokens:["yS","=","normalize","(","yo","*","yM",")",";"]},{type:"textline",tokens:["yF","=","UNITY_VALUE_NODES","/","JQ",";"]},{type:"textline",tokens:["yA","=","yS",".","xy","*","yE","/","(","JQ","*","yS",".","z",")",";","yE","=","UNITY_VALUE_NODES",";","yD","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yz",")",".","a",";"]},{type:"textline",tokens:["for","(","float","JT","=","1.0",";","JT","<=","JQ",";","JT","++",")","{","if","(","yD","<","yE",")","{","yE","-=","yF",";","yz","-=","yA",";","yD","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yz",")",".","a",";","}","}"]},{type:"textline",tokens:["yA","=","yz","+","yA",";","yF","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yA",")",".","a","-","(","yE","+","yF",")",";","yE","=","yD","-","yE",";","yF","=","yE","/","(","yE","-","yF",")",";"]},{type:"textline",tokens:["yz","=","yF","*","yA","+","(","UNITY_VALUE_NODES","-","yF",")","*","yz",";","JS","=","yc","(","yz",")",";","}","else","JS","=","JO",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"JU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JV","=","clamp","(","JU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"JW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JX",qualifier:["float"],is_optional:false},{type:"node_out",name:"JY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JY","=","JW",";","JX",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"JZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"J_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ka",qualifier:["float"],is_optional:false},{type:"node_in",name:"Kb",qualifier:["float"],is_optional:false},{type:"node_in",name:"Kc",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kd",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ke",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Kd"],statements:[{type:"textline",tokens:["Kd","=","JZ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ke"],statements:[{type:"textline",tokens:["Ke","=","vec4","(","J_",",","Ka",",","Kb",",","Kc",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"Kf",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Kf","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"Kg",qualifier:["float"],is_optional:false},{type:"node_in",name:"Kh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ki",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Kj","=","smoothstep","(","Kh",",","Ki",",","Kg",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"Kk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Kl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","Kk",";","yy","=","Kl",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"Km",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Kn",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Kn","=","(","Km",".","r","+","Km",".","g","+","Km",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"Ko",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Kp","[","0","]","=","Ko",";","Kp","[","1","]","=","Ko",";","Kp","[","2","]","=","Ko",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","Kq","(","in","vec3","yo",",","in","mat4","yp",",","in","mat4","yq",",","in","mat4","yr",",","in","mat4","ys",",","in","mat4","yt",",","out","vec3","yu",",","out","vec3","yv",",","out","vec3","yw",",","out","vec4","yx",",","out","float","yy",")","{","vec2","yz",",","yA",";","float","yB",",","yC",",","yD",",","yE",",","yF",",","yG",",","yH",",","yI",",","yJ",";","vec4","yK",",","yL",";","mat3","yM",";","vec3","yN",",","yO",",","yP",",","yQ",",","yR",",","yS",";","yu","=","vec3","(","ZERO_VALUE_NODES",")",";","yv","=","vec3","(","ZERO_VALUE_NODES",")",";","yw","=","vec3","(","ZERO_VALUE_NODES",")",";","yx","=","vec4","(","ZERO_VALUE_NODES",")",";","yy","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["yN","=","normalize","(","bE",")",";","yO","=","yN",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["yO","=","yO",";","else","yO","=","-","yO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["yP","=","yO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yP","=","yN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["yN","=","yO",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["yQ","=","cross","(","yO",",","bF",".","xyz",")","*","bF",".","w",";","yM","=","mat3","(","bF",".","xyz",",","yQ",",","yO",")",";","yM","=","yM",";"]}]}}]},{type:"textline",tokens:["yO","=","bC",";","yK","=","bD",";","yB","=","u_emit",";","yC","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","Ks","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","vec3","f",";","vec3","g",";","float","h",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ky","(","inout","vec3","Kt",",","float","Ku",",","vec4","Kv",",","vec4","Kw",")","{","float","Kx",";","Kx","=","Kw",".","x","-","Kv",".","x",";","Kx","=","(","Ku","-","Kv",".","x",")","/","Kx",";","Kt","=","mix","(","Kt",",","Kw",".","yzw",",","clamp","(","Kx",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","KE","(","float","Kz",",","float","KA",",","vec4","KB","[","COLOR_RAMP_LENGTH","]",")","{","vec3","KC",";","float","KD",";","KD","=","Kz","/","KA",";","KC","=","KB","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ky","(","KC",",","KD",",","KB","[","0","]",",","KB","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ky","(","KC",",","KD",",","KB","[","1","]",",","KB","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ky","(","KC",",","KD",",","KB","[","2","]",",","KB","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","KC",";","}"]}]}}]},{type:"textline",tokens:["float","KM","(","float","KF",",","float","KG",",","float","KH",",","float","KI",")","{","float","KJ",",","KK",",","KL",";","KJ","=","max","(","0.01",",","min","(","KG",",","KH",")",")",";","KK","=","max","(","0.01",",","min","(","KG",",","KI",")",")",";","KL","=","KG","-","KK",";","KK","=","clamp","(","KF","/","KJ",",","0.0",",","1.0",")","-","step","(","KL",",","KF",")","*","(","KF","-","KL",")","/","KK",";","return","KK",";","}","Ks","KU","(",")","{","mat4","KN",";","vec3","KO",",","KP",";","float","KQ",",","KR",",","KS",";","Ks","KT",";","KR","=","a_p_data","[","0","]",";","KS","=","a_p_data","[","1","]",";","if","(","u_p_cyclic","==","1",")","{","KQ","=","mod","(","u_p_time",",","u_p_length",")","-","KS",";","if","(","KQ","<","0.0",")","KQ","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","KQ","=","u_p_time","-","KS",";","}","if","(","KQ","<","0.0","||","KQ",">=","KR",")","{","KT",".","a","=","0.0001",";","KT",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","KQ","<","0.0","||","KQ",">=","KR",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["KO","=","a_position",";","KP","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KN","=","O","(","u_model_tsr",")",";","KO","=","(","KN","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","KP","=","(","KN","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["KP","=","u_p_nfactor","*","KP",";","KP","+=","a_p_vels",".","xyz",";","KP",".","y","-=","u_p_gravity","*","KQ","/","2.0",";","KR","=","max","(","u_p_mass",",","EPSILON",")",";","KP","+=","(","u_p_wind_fac","*","u_wind","/","KR",")","*","KQ","/","2.0",";","KT",".","h","=","KQ",";","KT",".","f","=","KP",";","KT",".","g","=","a_normal","*","a_p_vels",".","w",";","KT",".","b","=","KO","+","KP","*","KQ",";","KT",".","e","=","a_p_vels",".","w","*","KQ",";"]},{type:"condition",parts:[{type:"if",expression:["USE_COLOR_RAMP"],group:{type:"group",parts:[{type:"textline",tokens:["KT",".","a","=","texture2D","(","u_color_ramp_tex",",","vec2","(","KQ","/","u_p_max_lifetime",",","0.5",")",")",".","g",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KT",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KT",".","d","=","KE","(","KQ",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KT",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["KT",".","c","=","KM","(","KQ",",","a_p_data","[","0","]",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","KT",";","}"]}]},exports["include/particles_nodes.glslv"] = {type:"group",parts:[{type:"node",name:"TEX_COORD_UV",declarations:[],statements:[{type:"textline",tokens:["bM","=","K_","+","0.5",";"]}]},{type:"node",name:"UV_MERGED",declarations:[],statements:[{type:"textline",tokens:["bM","=","K_","+","0.5",";"]}]},{type:"node",name:"UVMAP",declarations:[],statements:[{type:"textline",tokens:["bM","=","K_","+","0.5",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[],statements:[{type:"textline",tokens:["bM","=","K_","+","0.5",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_param",name:"yg",qualifier:["varying","vec4"],is_optional:true},{type:"node_param",name:"yh",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yi",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yj",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"node_PARTICLE_INFO_var_a_p_indices",qualifier:["attribute","float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_SIZE"],statements:[{type:"textline",tokens:["yg","[","3","]","=","KZ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_AGE"],statements:[{type:"textline",tokens:["yg","[","1","]","=","KY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_LT"],statements:[{type:"textline",tokens:["yg","[","2","]","=","La",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_LOC"],statements:[{type:"textline",tokens:["yh","=","KV",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_IND"],statements:[{type:"textline",tokens:["yg","[","0","]","=","node_PARTICLE_INFO_var_a_p_indices",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_VEL"],statements:[{type:"textline",tokens:["yi","=","KW",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_A_VEL"],statements:[{type:"textline",tokens:["yj","=","KX",";"]}]}]}]},{type:"nodes_global"},{type:"textline",tokens:["void","Lb","(","in","vec3","KV",",","in","vec3","KW",",","in","vec3","KX",",","in","float","KY",",","in","float","KZ",",","in","vec2","K_",",","in","float","La",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","K_","+","0.5",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Ld","=","0.0",";","float","Le","=","1.0",";","vec3","Lj","(","vec3","Lf",")","{","float","Lg",",","Lh",";","vec4","Li",";","Li","=","vec4","(","Ld",",","-","Le","/","3.0",",","2.0","/","3.0",",","-","Le",")",";","Li","=","mix","(","vec4","(","Lf",".","bg",",","Li",".","wz",")",",","vec4","(","Lf",".","gb",",","Li",".","xy",")",",","step","(","Lf",".","b",",","Lf",".","g",")",")",";","Li","=","mix","(","vec4","(","Li",".","xyw",",","Lf",".","r",")",",","vec4","(","Lf",".","r",",","Li",".","yzx",")",",","step","(","Li",".","x",",","Lf",".","r",")",")",";","Lg","=","Li",".","x","-","min","(","Li",".","w",",","Li",".","y",")",";","Lh","=","1.0e-10",";","return","vec3","(","abs","(","Li",".","z","+","(","Li",".","w","-","Li",".","y",")","/","(","6.0","*","Lg","+","Lh",")",")",",","Lg","/","(","Li",".","x","+","Lh",")",",","Li",".","x",")",";","}","vec3","Ln","(","vec3","Lk",")","{","vec3","Ll",";","vec4","Lm",";","Lm","=","vec4","(","Le",",","2.0","/","3.0",",","Le","/","3.0",",","3.0",")",";","Ll","=","abs","(","fract","(","vec3","(","Lk",".","r",",","Lk",".","r",",","Lk",".","r",")","+","Lm",".","xyz",")","*","6.0","-","Lm",".","www",")",";","return","Lk",".","b","*","mix","(","Lm",".","xxx",",","clamp","(","Ll","-","Lm",".","xxx",",","Ld",",","Le",")",",","Lk",".","g",")",";","}","vec3","Lr","(","vec3","Lo",",","vec3","Lp",",","float","Lq",")","{","return","mix","(","Lo",",","Lp",",","Lq",")",";","}","vec3","Lv","(","vec3","Ls",",","vec3","Lt",",","float","Lu",")","{","return","Lu","*","Ls","+","Lt",";","}","vec3","Lz","(","vec3","Lw",",","vec3","Lx",",","float","Ly",")","{","return","Lx","-","Ly","*","Lw",";","}","vec3","LE","(","vec3","LA",",","vec3","LB",",","float","LC",")","{","float","LD",";","LD","=","Le","-","LC",";","return","(","vec3","(","LD",")","+","LC","*","LA",")","*","LB",";","}","vec3","LJ","(","vec3","LF",",","vec3","LG",",","float","LH",")","{","vec3","LI",";","LI","=","vec3","(","Le","-","LH",")",";","return","vec3","(","Le",")","-","(","LI","+","LH","*","(","vec3","(","Le",")","-","LF",")",")","*","(","vec3","(","Le",")","-","LG",")",";","}","vec3","LO","(","vec3","LK",",","vec3","LL",",","float","LM",")","{","vec3","LN",";","LN","=","vec3","(","Le","-","LM",")",";","return","mix","(","LL","*","(","LN","+","2.0","*","LM","*","LK",")",",","vec3","(","Le",")","-","(","LN","+","2.0","*","LM","*","(","vec3","(","Le",")","-","LK",")",")","*","(","vec3","(","Le",")","-","LL",")",",","step","(","0.5",",","LL",")",")",";","}","vec3","LS","(","vec3","LP",",","vec3","LQ",",","float","LR",")","{","return","mix","(","LQ",",","abs","(","LP","-","LQ",")",",","LR",")",";","}","vec3","LW","(","vec3","LT",",","vec3","LU",",","float","LV",")","{","return","mix","(","LU",",","LU","/","(","LT","+","step","(","LT",",","vec3","(","Ld",")",")",")",",","LV",")",";","}","vec3","L_","(","vec3","LX",",","vec3","LY",",","float","LZ",")","{","return","mix","(","LY",",","min","(","LX",",","LY",")",",","LZ",")",";","}","vec3","Md","(","vec3","Ma",",","vec3","Mb",",","float","Mc",")","{","return","max","(","Mc","*","Ma",",","Mb",")",";","}","vec3","Mj","(","vec3","Me",",","vec3","Mf",",","float","Mg",")","{","vec3","Mh",",","Mi",";","Mh","=","Lj","(","Mf",")",";","if","(","Mh",".","y","!=","Ld",")","{","Mi","=","Lj","(","Me",")",";","Mi","=","Ln","(","vec3","(","Mh",".","x",",","Mi",".","yz",")",")",";","return","mix","(","Me",",","Mi",",","Mg",")",";","}","return","Me",";","}","vec3","Mp","(","vec3","Mk",",","vec3","Ml",",","float","Mm",")","{","vec3","Mn",",","Mo",";","Mn","=","Lj","(","Mk",")",";","if","(","Mn",".","y","!=","Ld",")","{","Mo","=","Lj","(","Ml",")",";","return","Ln","(","vec3","(","Mn",".","x",",","mix","(","Mn",".","y",",","Mo",".","y",",","Mm",")",",","Mn",".","z",")",")",";","}","return","Mk",";","}","vec3","Mv","(","vec3","Mq",",","vec3","Mr",",","float","Ms",")","{","vec3","Mt",",","Mu",";","Mt","=","Lj","(","Mq",")",";","Mu","=","Lj","(","Mr",")",";","return","Ln","(","vec3","(","Mt",".","xy",",","mix","(","Mt",".","z",",","Mu",".","z",",","Ms",")",")",")",";","}","vec3","MB","(","vec3","Mw",",","vec3","Mx",",","float","My",")","{","vec3","Mz",",","MA",";","Mz","=","Lj","(","Mx",")",";","if","(","Mz",".","y","!=","Ld",")","{","MA","=","Lj","(","Mw",")",";","MA","=","Ln","(","vec3","(","Mz",".","xy",",","MA",".","z",")",")",";","return","mix","(","Mw",",","MA",",","My",")",";","}","return","Mw",";","}","vec3","MG","(","vec3","MC",",","vec3","MD",",","float","ME",")","{","vec3","MF",";","MF","=","vec3","(","Le",")","-","(","vec3","(","Le",")","-","MD",")","*","(","vec3","(","Le",")","-","MC",")",";","return","mix","(","MC",",","(","(","vec3","(","Le",")","-","MC",")","*","MD","*","MC",")","+","MC","*","MF",",","ME",")",";","}","vec3","MK","(","vec3","MH",",","vec3","MI",",","float","MJ",")","{","return","MH","+","MJ","*","(","2.0","*","MI","-","Le",")",";","}","float","MQ","(","float","ML",",","float","MM",",","float","MN",",","float","MO",")","{","float","MP",";","MP","=","Le","-","MO",";","return","(","MP","+","MN","*","ML",")","*","MM",";","}","float","MW","(","float","MR",",","float","MS",",","float","MT",",","float","MU",")","{","float","MV",";","MV","=","Le","-","MU",";","return","Le","-","(","MV","+","MT","*","(","Le","-","MR",")",")","*","(","Le","-","MS",")",";","}","float","Nb","(","float","MX",",","float","MY",",","float","MZ",",","float","M_",")","{","float","Na",";","Na","=","Le","-","M_",";","return","mix","(","MY","*","(","Na","+","2.0","*","MZ","*","MX",")",",","Le","-","(","Na","+","2.0","*","MZ","*","(","Le","-","MX",")",")","*","(","Le","-","MY",")",",","step","(","0.5",",","MY",")",")",";","}"]}]},exports["include/fxaa.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"ifndef",name:"FXAA_PS3",group:{type:"group",parts:[{type:"define",name:"FXAA_PS3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360",group:{type:"group",parts:[{type:"define",name:"FXAA_360",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360_OPT",group:{type:"group",parts:[{type:"define",name:"FXAA_360_OPT",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC",group:{type:"group",parts:[{type:"define",name:"FXAA_PC",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC_CONSOLE",group:{type:"group",parts:[{type:"define",name:"FXAA_PC_CONSOLE",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_120",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_120",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_130",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_130",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_3",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_4",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_4",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_5",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_5",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GREEN_AS_LUMA",group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_EARLY_EXIT",group:{type:"group",parts:[{type:"define",name:"FXAA_EARLY_EXIT",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_DISCARD",group:{type:"group",parts:[{type:"define",name:"FXAA_DISCARD",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"condition",parts:[{type:"ifdef",name:"GL_EXT_gpu_shader4",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FXAA_HLSL_5",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["4.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["2.0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.125"]}]}},{type:"else",group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.25"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_QUALITY_PRESET",group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",10,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",11,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",12,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",13,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",14,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",15,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",20,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",21,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",22,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",23,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",24,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",25,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",26,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["9"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",27,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["10"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",28,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["11"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",29,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",39,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"var",name:"FXAA_QUALITY_P12",tokens:["0.0"]},{type:"textline",tokens:["float","Nx","(","float","Nw",")","{","return","clamp","(","Nw",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["FXAA_BLEND4WEB",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","NA","(","sampler2D","Ny",",","vec2","Nz",")","{","return","texture2D","(","Ny",",","Nz",")",";","}","vec4","NF","(","sampler2D","NB",",","vec2","NC",",","vec2","ND",",","vec2","NE",")","{","return","texture2D","(","NB",",","NC","+","(","ND","*","NE",")",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","Ol","(","vec2","NG",",","sampler2D","NH",",","vec2","NI",",","float","NJ",",","float","NK",",","float","NL",")","{","bool","NM",",","NN",",","NO",",","NP",",","NQ",";","float","NR",",","NS",",","NT",",","NU",",","NV",",","NW",",","NX",",","NY",",","NZ",",","N_",",","Oa",",","Ob",",","Oc",",","Od",",","Oe",";","vec4","Of",";","vec2","Og",",","Oh",",","Oi",",","Oj",",","Ok",";","Og",".","x","=","NG",".","x",";","Og",".","y","=","NG",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Of","=","NA","(","NH",",","Og",")",";","NR","=","bB","(","Of",")",";","NS","=","bB","(","NF","(","NH",",","Og",",","vec2","(","0",",","1",")",",","NI",".","xy",")",")",";","NT","=","bB","(","NF","(","NH",",","Og",",","vec2","(","1",",","0",")",",","NI",".","xy",")",")",";","NU","=","bB","(","NF","(","NH",",","Og",",","vec2","(","0",",","-","1",")",",","NI",".","xy",")",")",";","NV","=","bB","(","NF","(","NH",",","Og",",","vec2","(","-","1",",","0",")",",","NI",".","xy",")",")",";"]}]}}]},{type:"textline",tokens:["NW","=","max","(","NS",",","NR",")",";","NX","=","min","(","NS",",","NR",")",";","NW","=","max","(","NT",",","NW",")",";","NX","=","min","(","NT",",","NX",")",";","NY","=","max","(","NU",",","NV",")",";","NZ","=","min","(","NU",",","NV",")",";","NW","=","max","(","NY",",","NW",")",";","NX","=","min","(","NZ",",","NX",")",";","NZ","=","NW","*","NK",";","NX","=","NW","-","NX",";","NZ","=","max","(","NL",",","NZ",")",";","NM","=","NX","<","NZ",";","if","(","NM",")","return","Of",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NZ","=","bB","(","NF","(","NH",",","Og",",","vec2","(","-","1",",","-","1",")",",","NI",".","xy",")",")",";","NW","=","bB","(","NF","(","NH",",","Og",",","vec2","(","1",",","1",")",",","NI",".","xy",")",")",";","NY","=","bB","(","NF","(","NH",",","Og",",","vec2","(","1",",","-","1",")",",","NI",".","xy",")",")",";","N_","=","bB","(","NF","(","NH",",","Og",",","vec2","(","-","1",",","1",")",",","NI",".","xy",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["Oa","=","NU","+","NS",";","Ob","=","NV","+","NT",";","NX","=","1.0","/","NX",";","Oc","=","Oa","+","Ob",";","Oa","=","(","-","2.0","*","NR",")","+","Oa",";","Ob","=","(","-","2.0","*","NR",")","+","Ob",";","Od","=","NY","+","NW",";","NY","=","NZ","+","NY",";","Oe","=","(","-","2.0","*","NT",")","+","Od",";","NY","=","(","-","2.0","*","NU",")","+","NY",";","NZ","=","NZ","+","N_",";","NW","=","N_","+","NW",";","Oe","=","(","abs","(","Oa",")","*","2.0",")","+","abs","(","Oe",")",";","NY","=","(","abs","(","Ob",")","*","2.0",")","+","abs","(","NY",")",";","Ob","=","(","-","2.0","*","NV",")","+","NZ",";","NW","=","(","-","2.0","*","NS",")","+","NW",";","Oe","=","abs","(","Ob",")","+","Oe",";","NY","=","abs","(","NW",")","+","NY",";","Od","=","NZ","+","Od",";","NZ","=","NI",".","x",";","NM","=","Oe",">=","NY",";","Od","=","Oc","*","2.0","+","Od",";","if","(","!","NM",")","NU","=","NV",";","if","(","!","NM",")","NS","=","NT",";","if","(","NM",")","NZ","=","NI",".","y",";","Od","=","(","Od","*","(","1.0","/","12.0",")",")","-","NR",";","NT","=","NU","-","NR",";","NV","=","NS","-","NR",";","NU","=","NU","+","NR",";","NS","=","NS","+","NR",";","NN","=","abs","(","NT",")",">=","abs","(","NV",")",";","NV","=","max","(","abs","(","NT",")",",","abs","(","NV",")",")",";","if","(","NN",")","NZ","=","-","NZ",";","NX","=","Nx","(","abs","(","Od",")","*","NX",")",";","Oh",".","x","=","Og",".","x",";","Oh",".","y","=","Og",".","y",";","Oi",".","x","=","(","!","NM",")","?","0.0",":","NI",".","x",";","Oi",".","y","=","(","NM",")","?","0.0",":","NI",".","y",";","if","(","!","NM",")","Oh",".","x","+=","NZ","*","0.5",";","if","(","NM",")","Oh",".","y","+=","NZ","*","0.5",";","Oj",".","x","=","Oh",".","x","-","Oi",".","x","*","FXAA_QUALITY_P0",";","Oj",".","y","=","Oh",".","y","-","Oi",".","y","*","FXAA_QUALITY_P0",";","Ok",".","x","=","Oh",".","x","+","Oi",".","x","*","FXAA_QUALITY_P0",";","Ok",".","y","=","Oh",".","y","+","Oi",".","y","*","FXAA_QUALITY_P0",";","Od","=","(","(","-","2.0",")","*","NX",")","+","3.0",";","NT","=","bB","(","NA","(","NH",",","Oj",")",")",";","NX","=","NX","*","NX",";","Oc","=","bB","(","NA","(","NH",",","Ok",")",")",";","if","(","!","NN",")","NU","=","NS",";","NV","=","NV","*","1.0","/","4.0",";","NS","=","NR","-","NU","*","0.5",";","NX","=","Od","*","NX",";","NN","=","NS","<","0.0",";","NT","-=","NU","*","0.5",";","Oc","-=","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P1",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P1",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P1",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P1",";","if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P2",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P2",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P2",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P2",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P3",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P3",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P3",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P3",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",4,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P4",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P4",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P4",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P4",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",5,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P5",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P5",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P5",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P5",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",6,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P6",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P6",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P6",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P6",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",7,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P7",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P7",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P7",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P7",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",8,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P8",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P8",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P8",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P8",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",9,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P9",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P9",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P9",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P9",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",10,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P10",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P10",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P10",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P10",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",11,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P11",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P11",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P11",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P11",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",12,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NQ",")","{","if","(","!","NO",")","NT","=","bB","(","NA","(","NH",",","Oj",".","xy",")",")",";","if","(","!","NP",")","Oc","=","bB","(","NA","(","NH",",","Ok",".","xy",")",")",";","if","(","!","NO",")","NT","=","NT","-","NU","*","0.5",";","if","(","!","NP",")","Oc","=","Oc","-","NU","*","0.5",";","NO","=","abs","(","NT",")",">=","NV",";","NP","=","abs","(","Oc",")",">=","NV",";","if","(","!","NO",")","Oj",".","x","-=","Oi",".","x","*","FXAA_QUALITY_P12",";","if","(","!","NO",")","Oj",".","y","-=","Oi",".","y","*","FXAA_QUALITY_P12",";","NQ","=","(","!","NO",")","||","(","!","NP",")",";","if","(","!","NP",")","Ok",".","x","+=","Oi",".","x","*","FXAA_QUALITY_P12",";","if","(","!","NP",")","Ok",".","y","+=","Oi",".","y","*","FXAA_QUALITY_P12",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}","NV","=","Og",".","x","-","Oj",".","x",";","NU","=","Ok",".","x","-","Og",".","x",";","if","(","!","NM",")","NV","=","Og",".","y","-","Oj",".","y",";","if","(","!","NM",")","NU","=","Ok",".","y","-","Og",".","y",";","NP","=","(","NT","<","0.0",")","!=","NN",";","NT","=","(","NU","+","NV",")",";","NN","=","(","Oc","<","0.0",")","!=","NN",";","NT","=","1.0","/","NT",";","NO","=","NV","<","NU",";","NU","=","min","(","NV",",","NU",")",";","NN","=","NO","?","NP",":","NN",";","NX","=","NX","*","NX",";","NT","=","(","NU","*","(","-","NT",")",")","+","0.5",";","NX","=","NX","*","NJ",";","NT","=","NN","?","NT",":","0.0",";","NX","=","max","(","NT",",","NX",")",";","if","(","!","NM",")","Og",".","x","+=","NX","*","NZ",";","if","(","NM",")","Og",".","y","+=","NX","*","NZ",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_DISCARD",1,{type:"equal_expr",places:2},"FXAA_BLEND4WEB",1,{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","NA","(","NH",",","Og",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","NA","(","NH",",","Og",")",".","xyz",",","NR",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Os","(","in","sampler2D","Om",",","in","vec2","On",",","in","vec2","Oo",")","{","float","Op",",","Oq",",","Or",";","Op","=","texture2D","(","Om",",","On",")",".","r",";","Oq","=","Oo",".","x",";","Or","=","Oo",".","y",";","Oq","=","2.0","*","Oq","/","(","Oq","+","Or","-","(","2.0","*","Op","-","1.0",")","*","(","Or","-","Oq",")",")",";","return","Oq",";","}"]}]}}